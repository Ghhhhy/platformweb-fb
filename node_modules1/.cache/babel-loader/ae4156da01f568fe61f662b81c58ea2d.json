{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\fundMonitoring\\UserRegulationRelation\\UserRegulationRelation.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\fundMonitoring\\UserRegulationRelation\\UserRegulationRelation.vue","mtime":1694505522512},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\babel.config.js","mtime":1694505520209},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIdHRwTW9kdWxlIGZyb20gJ0AvYXBpL2ZyYW1lL21haW4vZnVuZE1vbml0b3JpbmcvdXNlclJlZ3VsYXRpb25SZWxhdGlvbi5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVXNlclByb1JlbGF0aW9uJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd0xvYWRpbmdMZWZ0OiBmYWxzZSwKICAgICAgc2hvd0xvYWRpbmdSaWdodDogZmFsc2UsCiAgICAgIHVzZXJUcmVlRGF0YTogW10sCiAgICAgIHN0YW1wVHJlZURhdGE6IFtdLAogICAgICBwcm9BcnJheTogW10sCiAgICAgIHVzZXJTZWxlY3Q6IHt9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYWFhOiBmdW5jdGlvbiBhYWEob2JqLCBjaGVja3NPYmopIHsKICAgICAgY29uc29sZS5sb2cob2JqLCBjaGVja3NPYmopOwogICAgfSwKICAgIGluaXQ6IGZ1bmN0aW9uIGluaXQoKSB7fSwKICAgIG9uVXNlclRyZWVMb2FkRmluaXNoOiBmdW5jdGlvbiBvblVzZXJUcmVlTG9hZEZpbmlzaChkYXRhKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHRoaXMudXNlclRyZWVEYXRhID0gZGF0YTsKICAgICAgSHR0cE1vZHVsZS5xdWVyeVRhYmxlRGF0YXMoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5zdGFtcFRyZWVEYXRhID0gcmVzLmRhdGE7CiAgICAgICAgX3RoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIC8vIOmHjeaWsOi1i+WAvAogICAgICAgICAgX3RoaXMudXNlclRyZWVEYXRhID0gW107CiAgICAgICAgICBfdGhpcy51c2VyVHJlZURhdGEgPSBfdGhpcy5zdGFtcFRyZWVEYXRhOwogICAgICAgIH0pOwogICAgICAgIF90aGlzLnNob3dMb2FkaW5nUmlnaHQgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnNob3dMb2FkaW5nUmlnaHQgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgdHJlZU5vZGVDbGljazogZnVuY3Rpb24gdHJlZU5vZGVDbGljayhvYmopIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMudXNlclNlbGVjdCA9IG9iajsKICAgICAgdmFyIHBhcmFtID0gewogICAgICAgIHVzZXJJZDogb2JqLmlkCiAgICAgIH07CiAgICAgIEh0dHBNb2R1bGUucXVlcnlCeVVzZXJJZChwYXJhbSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIGFycmF5ID0gW107CiAgICAgICAgcmVzLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgYXJyYXkucHVzaChpdGVtLnJlZ3VsYXRpb25Db2RlKTsKICAgICAgICB9KTsKICAgICAgICBfdGhpczIucHJvQXJyYXkgPSBhcnJheTsKICAgICAgICAvLyBjb25zb2xlLmxvZygnYXJyYXknLCBhcnJheSkKICAgICAgICAvLyBjb25zb2xlLmxvZygnYXJyYXknLCB0aGlzLiRyZWZzLnN0YW1wVHJlZSkKICAgICAgICBfdGhpczIuJHJlZnMuc3RhbXBUcmVlLnNldENoZWNrZWRLZXlzKGFycmF5KTsKICAgICAgICAvLyBpZiAoYXJyYXkubGVuZ3RoID4gMCkgewogICAgICAgIC8vICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIC8vICAgICB0aGlzLiRyZWZzLnN0YW1wVHJlZS50cmVlT3B0aW9uRm4oKS5zZXRDaGVja2VkS2V5cyhhcnJheSkKICAgICAgICAvLyAgIH0pCiAgICAgICAgLy8gfQogICAgICAgIGNvbnNvbGUubG9nKCdhcnJheTEnLCBfdGhpczIuJHJlZnMuc3RhbXBUcmVlKTsKICAgICAgfSk7CiAgICB9LAogICAgbm9kZWNoZWNrbWV0aG9kOiBmdW5jdGlvbiBub2RlY2hlY2ttZXRob2Qob2JqLCBzdGF0ZSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgLy8gaWYgKG9iai5yZWd1bGF0aW9uQ29kZSA9PT0gJzAnIHx8IG9iai5yZWd1bGF0aW9uQ29kZSA9PT0gJzAxJyB8fCBvYmoucmVndWxhdGlvbkNvZGUgPT09ICcwMicpIHsKICAgICAgLy8gICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+agueiKgueCueS4jeiDveiiq+mAieS4re+8gScpCiAgICAgIC8vICAgdGhpcy4kcmVmcy5zdGFtcFRyZWUuc2V0Q2hlY2tlZEtleXModGhpcy5wcm9BcnJheSkKICAgICAgLy8gICByZXR1cm4KICAgICAgLy8gfQogICAgICBpZiAodGhpcy51c2VyU2VsZWN0LmlkKSB7CiAgICAgICAgdmFyIGlzQ2hlY2tlZCA9IHN0YXRlLmNoZWNrZWRLZXlzLmluY2x1ZGVzKG9iai5yZWd1bGF0aW9uQ29kZSk7CiAgICAgICAgdmFyIHBhcmFtID0gewogICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXJTZWxlY3QuaWQsCiAgICAgICAgICByZWd1bGF0aW9uOiBzdGF0ZS5jaGVja2VkTm9kZXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgcmVndWxhdGlvbkNvZGU6IGl0ZW0ucmVndWxhdGlvbkNvZGUsCiAgICAgICAgICAgICAgcmVndWxhdGlvbk5hbWU6IGl0ZW0ucmVndWxhdGlvbk5hbWUKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pCiAgICAgICAgfTsKICAgICAgICBIdHRwTW9kdWxlLnVwZGF0ZShwYXJhbSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwMDAwMDAnKSB7CiAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZS5zdWNjZXNzKGlzQ2hlY2tlZCA/ICfmjojmnYPmiJDlip8nIDogJ+WPlua2iOaOiOadg+aIkOWKnycpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMzLnRyZWVOb2RlQ2xpY2soX3RoaXMzLnVzZXJTZWxlY3QpOwogICAgICAgICAgICBfdGhpczMuJG1lc3NhZ2UuZXJyb3IocmVzLnJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nnlKjmiLfvvIEnKTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogIH0KfTs="},{"version":3,"names":["HttpModule","name","data","showLoadingLeft","showLoadingRight","userTreeData","stampTreeData","proArray","userSelect","methods","aaa","obj","checksObj","console","log","init","onUserTreeLoadFinish","_this","queryTableDatas","then","res","$nextTick","catch","treeNodeClick","_this2","param","userId","id","queryByUserId","array","forEach","item","push","regulationCode","$refs","stampTree","setCheckedKeys","nodecheckmethod","state","_this3","isChecked","checkedKeys","includes","regulation","checkedNodes","map","regulationName","update","code","$message","success","error","result","warning","mounted"],"sources":["src/views/main/fundMonitoring/UserRegulationRelation/UserRegulationRelation.vue"],"sourcesContent":["<!--用户印章授权 gyl-->\r\n<template>\r\n  <div style=\"height:100%\">\r\n    <!-- <TreeScollLoad /> -->\r\n    <BsMainFormListLayout>\r\n      <template v-slot:topTap> topTap </template>\r\n      <template v-slot:topTabPane></template>\r\n      <template v-slot:query></template>\r\n      <template v-slot:mainTree>\r\n      </template>\r\n      <template v-slot:mainForm>\r\n        <div style=\"height:100%\">\r\n          <div class=\"tree\">\r\n            <TreeScollLoad />\r\n            <!-- <BsBossTree\r\n              ref=\"userTree\"\r\n              v-loading=\"showLoadingLeft\"\r\n              :visible=\"true\"\r\n              :datas=\"userTreeData\"\r\n              empty-text=\"暂无数据\"\r\n              :is-need-root=\"false\"\r\n              :is-show-input=\"true\"\r\n              :clickmethod=\"treeNodeClick\"\r\n              :open-loading=\"true\"\r\n              :defaultexpandedkeys=\"['0']\"\r\n            /> -->\r\n          </div>\r\n          <div class=\"tree\">\r\n            <BsBossTree\r\n              ref=\"stampTree\"\r\n              v-loading=\"showLoadingRight\"\r\n              :visible=\"true\"\r\n              :datas=\"stampTreeData\"\r\n              empty-text=\"暂无数据\"\r\n              :is-need-root=\"false\"\r\n              :is-checkbox=\"true\"\r\n              :defaultexpandedkeys=\"['0']\"\r\n              :is-show-input=\"true\"\r\n              :open-loading=\"true\"\r\n              treeid=\"regulationCode\"\r\n              :nodecheckmethod=\"nodecheckmethod\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </BsMainFormListLayout>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport HttpModule from '@/api/frame/main/fundMonitoring/userRegulationRelation.js'\r\nexport default {\r\n  name: 'UserProRelation',\r\n  data() {\r\n    return {\r\n      showLoadingLeft: false,\r\n      showLoadingRight: false,\r\n      userTreeData: [],\r\n      stampTreeData: [],\r\n      proArray: [],\r\n      userSelect: {}\r\n    }\r\n  },\r\n  methods: {\r\n    aaa(obj, checksObj) {\r\n      console.log(obj, checksObj)\r\n    },\r\n    init() {\r\n    },\r\n    onUserTreeLoadFinish(data) {\r\n      this.userTreeData = data\r\n      HttpModule.queryTableDatas().then(res => {\r\n        this.stampTreeData = res.data\r\n        this.$nextTick(() => {\r\n          // 重新赋值\r\n          this.userTreeData = []\r\n          this.userTreeData = this.stampTreeData\r\n        })\r\n        this.showLoadingRight = false\r\n      }).catch(() => {\r\n        this.showLoadingRight = false\r\n      })\r\n    },\r\n    treeNodeClick(obj) {\r\n      this.userSelect = obj\r\n      const param = {\r\n        userId: obj.id\r\n      }\r\n      HttpModule.queryByUserId(param).then(res => {\r\n        let array = []\r\n        res.data.forEach(item => {\r\n          array.push(item.regulationCode)\r\n        })\r\n        this.proArray = array\r\n        // console.log('array', array)\r\n        // console.log('array', this.$refs.stampTree)\r\n        this.$refs.stampTree.setCheckedKeys(array)\r\n        // if (array.length > 0) {\r\n        //   this.$nextTick(() => {\r\n        //     this.$refs.stampTree.treeOptionFn().setCheckedKeys(array)\r\n        //   })\r\n        // }\r\n        console.log('array1', this.$refs.stampTree)\r\n      })\r\n    },\r\n    nodecheckmethod(obj, state) {\r\n      // if (obj.regulationCode === '0' || obj.regulationCode === '01' || obj.regulationCode === '02') {\r\n      //   this.$message.warning('根节点不能被选中！')\r\n      //   this.$refs.stampTree.setCheckedKeys(this.proArray)\r\n      //   return\r\n      // }\r\n      if (this.userSelect.id) {\r\n        let isChecked = state.checkedKeys.includes(obj.regulationCode)\r\n        var param = {\r\n          userId: this.userSelect.id,\r\n          regulation: state.checkedNodes\r\n            .map(item => {\r\n              return { regulationCode: item.regulationCode, regulationName: item.regulationName }\r\n            })\r\n        }\r\n        HttpModule.update(param).then(res => {\r\n          if (res.code === '000000') {\r\n            this.$message.success(isChecked ? '授权成功' : '取消授权成功')\r\n          } else {\r\n            this.treeNodeClick(this.userSelect)\r\n            this.$message.error(res.result)\r\n          }\r\n        })\r\n      } else {\r\n        this.$message.warning('请选择用户！')\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init()\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.tree{\r\n  float:left;\r\n  height:100%;\r\n  width:50%\r\n}\r\n</style>\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,OAAAA,UAAA;AACA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,eAAA;MACAC,gBAAA;MACAC,YAAA;MACAC,aAAA;MACAC,QAAA;MACAC,UAAA;IACA;EACA;EACAC,OAAA;IACAC,GAAA,WAAAA,IAAAC,GAAA,EAAAC,SAAA;MACAC,OAAA,CAAAC,GAAA,CAAAH,GAAA,EAAAC,SAAA;IACA;IACAG,IAAA,WAAAA,KAAA,GACA;IACAC,oBAAA,WAAAA,qBAAAd,IAAA;MAAA,IAAAe,KAAA;MACA,KAAAZ,YAAA,GAAAH,IAAA;MACAF,UAAA,CAAAkB,eAAA,GAAAC,IAAA,WAAAC,GAAA;QACAH,KAAA,CAAAX,aAAA,GAAAc,GAAA,CAAAlB,IAAA;QACAe,KAAA,CAAAI,SAAA;UACA;UACAJ,KAAA,CAAAZ,YAAA;UACAY,KAAA,CAAAZ,YAAA,GAAAY,KAAA,CAAAX,aAAA;QACA;QACAW,KAAA,CAAAb,gBAAA;MACA,GAAAkB,KAAA;QACAL,KAAA,CAAAb,gBAAA;MACA;IACA;IACAmB,aAAA,WAAAA,cAAAZ,GAAA;MAAA,IAAAa,MAAA;MACA,KAAAhB,UAAA,GAAAG,GAAA;MACA,IAAAc,KAAA;QACAC,MAAA,EAAAf,GAAA,CAAAgB;MACA;MACA3B,UAAA,CAAA4B,aAAA,CAAAH,KAAA,EAAAN,IAAA,WAAAC,GAAA;QACA,IAAAS,KAAA;QACAT,GAAA,CAAAlB,IAAA,CAAA4B,OAAA,WAAAC,IAAA;UACAF,KAAA,CAAAG,IAAA,CAAAD,IAAA,CAAAE,cAAA;QACA;QACAT,MAAA,CAAAjB,QAAA,GAAAsB,KAAA;QACA;QACA;QACAL,MAAA,CAAAU,KAAA,CAAAC,SAAA,CAAAC,cAAA,CAAAP,KAAA;QACA;QACA;QACA;QACA;QACA;QACAhB,OAAA,CAAAC,GAAA,WAAAU,MAAA,CAAAU,KAAA,CAAAC,SAAA;MACA;IACA;IACAE,eAAA,WAAAA,gBAAA1B,GAAA,EAAA2B,KAAA;MAAA,IAAAC,MAAA;MACA;MACA;MACA;MACA;MACA;MACA,SAAA/B,UAAA,CAAAmB,EAAA;QACA,IAAAa,SAAA,GAAAF,KAAA,CAAAG,WAAA,CAAAC,QAAA,CAAA/B,GAAA,CAAAsB,cAAA;QACA,IAAAR,KAAA;UACAC,MAAA,OAAAlB,UAAA,CAAAmB,EAAA;UACAgB,UAAA,EAAAL,KAAA,CAAAM,YAAA,CACAC,GAAA,WAAAd,IAAA;YACA;cAAAE,cAAA,EAAAF,IAAA,CAAAE,cAAA;cAAAa,cAAA,EAAAf,IAAA,CAAAe;YAAA;UACA;QACA;QACA9C,UAAA,CAAA+C,MAAA,CAAAtB,KAAA,EAAAN,IAAA,WAAAC,GAAA;UACA,IAAAA,GAAA,CAAA4B,IAAA;YACAT,MAAA,CAAAU,QAAA,CAAAC,OAAA,CAAAV,SAAA;UACA;YACAD,MAAA,CAAAhB,aAAA,CAAAgB,MAAA,CAAA/B,UAAA;YACA+B,MAAA,CAAAU,QAAA,CAAAE,KAAA,CAAA/B,GAAA,CAAAgC,MAAA;UACA;QACA;MACA;QACA,KAAAH,QAAA,CAAAI,OAAA;MACA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAvC,IAAA;EACA;AACA"}]}