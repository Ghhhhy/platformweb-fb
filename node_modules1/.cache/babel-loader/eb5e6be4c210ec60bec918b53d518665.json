{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\tool\\eval\\calculate.js","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\tool\\eval\\calculate.js","mtime":1694505521947},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\babel.config.js","mtime":1694505520209},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyogZXNsaW50LWRpc2FibGUgKi8KdmFyIF9yZXF1aXJlID0gcmVxdWlyZSgnLi9vcGVyYXRvci5qcycpLAogIG9wZXJhdG9yTGlzdGVuZXIgPSBfcmVxdWlyZS5vcGVyYXRvckxpc3RlbmVyOwp2YXIgX3JlcXVpcmUyID0gcmVxdWlyZSgnLi9lbnYuanMnKSwKICBnZXRVVUlEID0gX3JlcXVpcmUyLmdldFVVSUQsCiAgX3JlcXVpcmUyJGNvbnN0YW50ID0gX3JlcXVpcmUyLmNvbnN0YW50LAogIG9wZXJhdFVuaXRUeXBlID0gX3JlcXVpcmUyJGNvbnN0YW50Lm9wZXJhdFVuaXRUeXBlLAogIGZpbmRWYWx1ZUR5bmFtaWNUeXBlID0gX3JlcXVpcmUyJGNvbnN0YW50LmZpbmRWYWx1ZUR5bmFtaWNUeXBlLAogIHRocmVlRXllRHluYW1pY1R5cGUgPSBfcmVxdWlyZTIkY29uc3RhbnQudGhyZWVFeWVEeW5hbWljVHlwZSwKICBmdW5EeW5hbWljVHlwZSA9IF9yZXF1aXJlMiRjb25zdGFudC5mdW5EeW5hbWljVHlwZSwKICBydW5EeW5hbWljVHlwZSA9IF9yZXF1aXJlMiRjb25zdGFudC5ydW5EeW5hbWljVHlwZTsKLy8g6L+Q566X56ymCnZhciBvcGVyYXRvck1hcDsKb3BlcmF0b3JMaXN0ZW5lci5wdXNoKGZ1bmN0aW9uIChsaXN0LCBtYXApIHsKICBvcGVyYXRvck1hcCA9IG1hcDsKfSk7Ci8vIOiuoeeulwpmdW5jdGlvbiBjYWxjdWxhdGVUb1NoYXJlZFZhcnMoc2NyaXB0cywgc2hhcmVkVmFyc3MpIHsKICB2YXIgc3RhY2sgPSBbXTsKICB2YXIgaXRlbTsKICBmb3IgKHZhciBpID0gMDsgaSA8IHNjcmlwdHMubGVuZ3RoOyBpKyspIHsKICAgIGl0ZW0gPSBzY3JpcHRzW2ldOwogICAgaWYgKGl0ZW0uY29udHJvbCA9PSAxKSB7CiAgICAgIGlmIChpdGVtLmlzU3RhdGljKSB7CiAgICAgICAgLy8g6Z2Z5oCBCiAgICAgICAgc3RhY2sucHVzaChpdGVtLnZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzd2l0Y2ggKGl0ZW0udHlwZSkgewogICAgICAgICAgY2FzZSB0aHJlZUV5ZUR5bmFtaWNUeXBlOgogICAgICAgICAgICAvLyDkuInnm64KICAgICAgICAgICAgdmFyIHRlc3QgPSBjYWxjdWxhdGUoaXRlbS5jaGVja0NvZGVzLCBzaGFyZWRWYXJzcyk7CiAgICAgICAgICAgIHN0YWNrLnB1c2goY2FsY3VsYXRlKHRlc3QKICAgICAgICAgICAgLy8g5oiQ5Yqf55qECiAgICAgICAgICAgID8gaXRlbS5jb3JyZWN0Q29kZXMKICAgICAgICAgICAgLy8g5aSx6LSl55qECiAgICAgICAgICAgIDogaXRlbS5lcnJvckNvZGVzLCBzaGFyZWRWYXJzcykpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgZmluZFZhbHVlRHluYW1pY1R5cGU6CiAgICAgICAgICAgIC8vIOW8leeUqAogICAgICAgICAgICBzdGFjay5wdXNoKGZpbmRWYXJzVmFsdWUoaXRlbS5zY3JpcHRzLCBzaGFyZWRWYXJzcykuaGFuZGxlKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIHJ1bkR5bmFtaWNUeXBlOgogICAgICAgICAgICAvLyDpnIDopoHliqjmgIHov5DooYznmoTohJrmnKwKICAgICAgICAgICAgc3RhY2sucHVzaChjYWxjdWxhdGUoaXRlbS5zY3JpcHRzLCBzaGFyZWRWYXJzcykpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgZnVuRHluYW1pY1R5cGU6CiAgICAgICAgICAgIC8vIOaWueazlQogICAgICAgICAgICB2YXIgX2ZpbmRWYXJzVmFsdWUgPSBmaW5kVmFyc1ZhbHVlKGl0ZW0udmFycywgc2hhcmVkVmFyc3MpLAogICAgICAgICAgICAgIHJvb3QgPSBfZmluZFZhcnNWYWx1ZS5yb290LAogICAgICAgICAgICAgIGhhbmRsZSA9IF9maW5kVmFyc1ZhbHVlLmhhbmRsZTsKICAgICAgICAgICAgaWYgKGhhbmRsZSkgewogICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBbXTsKICAgICAgICAgICAgICBpZiAoaXRlbS5wYXJhbXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBpdGVtLnBhcmFtcy5sZW5ndGg7IGsrKykgewogICAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChjYWxjdWxhdGUoaXRlbS5wYXJhbXNba10sIHNoYXJlZFZhcnNzKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHN0YWNrLnB1c2goaGFuZGxlLmFwcGx5KHJvb3QgfHwgZW52LCBwYXJhbXMpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBzdGFjay5wdXNoKG51bGwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIGlmIChpdGVtLmNvbnRyb2wgPT0gMCkgewogICAgICAvLyDov5DnrpfnrKYKICAgICAgdmFyIGIgPSBzdGFjay5wb3AoKTsKICAgICAgdmFyIGEgPSBzdGFjay5wb3AoKTsKICAgICAgc3RhY2sucHVzaChvcGVyYXRvck1hcFtpdGVtLnZhbHVlXS5mdW4oYSwgYiwgc3RhY2spKTsKICAgIH0KICB9CiAgcmV0dXJuIHN0YWNrLnBvcCgpOwp9CjsKdmFyIGNhbGN1bGF0ZSA9IGNhbGN1bGF0ZVRvU2hhcmVkVmFyczsKLyoqDQogKiDlj5jph4/mn6Xmib4NCiAqLwpmdW5jdGlvbiBmaW5kVmFyc1ZhbHVlKHZhcnMsIF9zZWxmU2hhcmVkVmFycykgewogIC8vIOWPpeafhAogIHZhciBoYW5kbGU7CiAgdmFyIHJvb3Q7CiAgLy8g6K6h5pWwCiAgdmFyIGtleTsKICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcnMubGVuZ3RoOyBpKyspIHsKICAgIGtleSA9IGNhbGN1bGF0ZShbdmFyc1tpXV0sIF9zZWxmU2hhcmVkVmFycyk7CiAgICBpZiAoaSA9PSAwKSB7CiAgICAgIGlmICh2YXJzW2ldLnJlc2VydmUpIHsKICAgICAgICBoYW5kbGUgPSB2YXJzW2ldLnZhbHVlOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOeOr+Wig+WPmOmHj+mHjOmdouaJvgogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgX3NlbGZTaGFyZWRWYXJzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICByb290ID0gX3NlbGZTaGFyZWRWYXJzW2tdOwogICAgICAgICAgaGFuZGxlID0gcm9vdFtrZXldOwogICAgICAgICAgaWYgKGhhbmRsZSAhPSBudWxsKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKGhhbmRsZSAhPSBudWxsKSB7CiAgICAgICAgcm9vdCA9IGhhbmRsZTsKICAgICAgICBoYW5kbGUgPSBoYW5kbGVba2V5XTsKICAgICAgfQogICAgfQogIH0KICByZXR1cm4gewogICAgcm9vdDogcm9vdCwKICAgIGhhbmRsZTogaGFuZGxlCiAgfTsKfQovLyDluLjph48KbW9kdWxlLmV4cG9ydHMgPSB7CiAgY2FsY3VsYXRlOiBjYWxjdWxhdGUKfTs="},{"version":3,"names":["_require","require","operatorListener","_require2","getUUID","_require2$constant","constant","operatUnitType","findValueDynamicType","threeEyeDynamicType","funDynamicType","runDynamicType","operatorMap","push","list","map","calculateToSharedVars","scripts","sharedVarss","stack","item","i","length","control","isStatic","value","type","test","calculate","checkCodes","correctCodes","errorCodes","findVarsValue","handle","_findVarsValue","vars","root","params","k","apply","env","b","pop","a","fun","_selfSharedVars","key","reserve","module","exports"],"sources":["C:/Users/何小龙/Desktop/platformweb-fb/src/components/tool/eval/calculate.js"],"sourcesContent":["/* eslint-disable */\r\nconst {\r\n  // 运算符类型\r\n  operatorListener\r\n} = require('./operator.js')\r\nconst {\r\n  getUUID,\r\n  constant: {\r\n    // 常量\r\n    operatUnitType,\r\n    findValueDynamicType,\r\n    // 三目运算符\r\n    threeEyeDynamicType,\r\n    // 方法\r\n    funDynamicType,\r\n    // 需要计算的参数\r\n    runDynamicType\r\n  }\r\n} = require('./env.js')\r\n// 运算符\r\nvar operatorMap\r\noperatorListener.push((list, map) => {\r\n  operatorMap = map\r\n})\r\n// 计算\r\nfunction calculateToSharedVars(scripts, sharedVarss) {\r\n  let stack = []\r\n  let item\r\n  for (let i = 0; i < scripts.length; i++) {\r\n    item = scripts[i]\r\n    if (item.control == 1) {\r\n      if (item.isStatic) {\r\n        // 静态\r\n        stack.push(item.value)\r\n      } else {\r\n        switch (item.type) {\r\n          case threeEyeDynamicType:\r\n            // 三目\r\n            let test = calculate(item.checkCodes, sharedVarss)\r\n            stack.push(calculate(\r\n              test\r\n              // 成功的\r\n                ? item.correctCodes\r\n              // 失败的\r\n                : item.errorCodes, sharedVarss))\r\n            break\r\n          case findValueDynamicType:\r\n            // 引用\r\n            stack.push(findVarsValue(item.scripts, sharedVarss).handle)\r\n            break\r\n          case runDynamicType:\r\n            // 需要动态运行的脚本\r\n            stack.push(calculate(item.scripts, sharedVarss))\r\n            break\r\n          case funDynamicType:\r\n            // 方法\r\n            let {\r\n              root,\r\n              handle\r\n            } = findVarsValue(item.vars, sharedVarss)\r\n            if (handle) {\r\n              let params = []\r\n              if (item.params.length > 0) {\r\n                for (let k = 0; k < item.params.length; k++) {\r\n                  params.push(calculate(item.params[k], sharedVarss))\r\n                }\r\n              }\r\n              stack.push(handle.apply(root || env, params))\r\n            } else {\r\n              stack.push(null)\r\n            }\r\n            break\r\n        }\r\n      }\r\n    } else if (item.control == 0) {\r\n      // 运算符\r\n      let b = stack.pop()\r\n      let a = stack.pop()\r\n      stack.push(operatorMap[item.value].fun(a, b, stack))\r\n    }\r\n  }\r\n  return stack.pop()\r\n};\r\nconst calculate = calculateToSharedVars\r\n/**\r\n * 变量查找\r\n */\r\nfunction findVarsValue(vars, _selfSharedVars) {\r\n  // 句柄\r\n  let handle\r\n  let root\r\n  // 计数\r\n  let key\r\n  for (let i = 0; i < vars.length; i++) {\r\n    key = calculate([vars[i]], _selfSharedVars)\r\n    if (i == 0) {\r\n      if (vars[i].reserve) {\r\n        handle = vars[i].value\r\n      } else {\r\n        // 环境变量里面找\r\n        for (let k = 0; k < _selfSharedVars.length; k++) {\r\n          root = _selfSharedVars[k]\r\n          handle = root[key]\r\n          if (handle != null) {\r\n            break\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      if (handle != null) {\r\n        root = handle\r\n        handle = handle[key]\r\n      }\r\n    }\r\n  }\r\n  return {\r\n    root: root,\r\n    handle: handle\r\n  }\r\n}\r\n// 常量\r\nmodule.exports = {\r\n  calculate\r\n}\r\n"],"mappings":"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"}]}