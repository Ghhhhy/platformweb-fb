{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\functionalComponent\\import\\importTable\\importTableUtil.js","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\functionalComponent\\import\\importTable\\importTableUtil.js","mtime":1694505521773},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\babel.config.js","mtime":1694505520209},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvKSB7ICJAYmFiZWwvaGVscGVycyAtIHR5cGVvZiI7IHJldHVybiBfdHlwZW9mID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9CmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsga2V5ID0gX3RvUHJvcGVydHlLZXkoa2V5KTsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvWyJAQGl0ZXJhdG9yIl07IGlmICghaXQpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgdmFyIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUoX2UpIHsgdGhyb3cgX2U7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IGl0LmNhbGwobyk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTIpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2UyOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXQucmV0dXJuICE9IG51bGwpIGl0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAoZGlkRXJyKSB0aHJvdyBlcnI7IH0gfSB9OyB9CmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07IHJldHVybiBhcnIyOyB9CmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBfdG9Qcm9wZXJ0eUtleShkZXNjcmlwdG9yLmtleSksIGRlc2NyaXB0b3IpOyB9IH0KZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsICJwcm90b3R5cGUiLCB7IHdyaXRhYmxlOiBmYWxzZSB9KTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9CmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykgeyB2YXIga2V5ID0gX3RvUHJpbWl0aXZlKGFyZywgInN0cmluZyIpOyByZXR1cm4gX3R5cGVvZihrZXkpID09PSAic3ltYm9sIiA/IGtleSA6IFN0cmluZyhrZXkpOyB9CmZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkgeyBpZiAoX3R5cGVvZihpbnB1dCkgIT09ICJvYmplY3QiIHx8IGlucHV0ID09PSBudWxsKSByZXR1cm4gaW5wdXQ7IHZhciBwcmltID0gaW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHByaW0gIT09IHVuZGVmaW5lZCkgeyB2YXIgcmVzID0gcHJpbS5jYWxsKGlucHV0LCBoaW50IHx8ICJkZWZhdWx0Iik7IGlmIChfdHlwZW9mKHJlcykgIT09ICJvYmplY3QiKSByZXR1cm4gcmVzOyB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOyB9IHJldHVybiAoaGludCA9PT0gInN0cmluZyIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTsgfQovKiBlc2xpbnQtZGlzYWJsZSBuby11c2VsZXNzLWNvbnN0cnVjdG9yICovCi8qDQogKiBkZXNjcmliZTogIOWfuuS6jnhsc3jnmoTlr7zlhaXooajkvZPlrp7njrDvvIzmlK/mjIHop6PmnpDltYzlpZfooajlpLQNCiAqIEBEYXRlOiAgIDIwMjEtMDgtMTcNCiAqIEF1dGhvcjogVGl0YW5zQDIzOTY3NTc1OTFAcXEuY29tDQogKiBATGFzdCBNb2RpZmllZCB0aW1lOiAyMDIxLTA4LTE3DQogKi8KLy8gaW1wb3J0IHsgY29sdW1ucywgZGF0YXMgfSBmcm9tICcuL3Rlc3REYXRhLmpzJwppbXBvcnQgWGxzeFRvb2wgZnJvbSAneGxzeCc7CnZhciBJbXBvcnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEltcG9ydCgpIHsKICAgIHZhciBnbG9hYmVsQ29uZmlnID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbXBvcnQpOwogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdGhpcy5YbHN4VG9vbCA9IFhsc3hUb29sOwogICAgdGhpcy5pbXBvcnRHbG9ibGVDb25mID0gewogICAgICBvbmx5UGFyc2luZ0ZpcnN0U2hlZXQ6IHRydWUsCiAgICAgIG1heFNpemU6IDEwMjQgKiAxMDI0ICogMTAsCiAgICAgIGFjY2VwdFR5cGU6ICd4bHN4JywKICAgICAgdGhlYWRSb3dJbmRleFN0YXJ0OiAxLAogICAgICB0aGVhZFJvd0luZGV4RW5kOiAxLAogICAgICBmaWxlbmFtZTogJycsCiAgICAgIGZpZWxkTmFtZTogJ2ZpZWxkJywKICAgICAgY29sdW1uQ29uZmlnOiBbXQogICAgfTsKICAgIHRoaXMuaW5wdXRUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpOwogICAgdGhpcy5pbnB1dFRhZy5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnZmlsZScpOwogICAgdGhpcy5pbnB1dFRhZy5zZXRBdHRyaWJ1dGUoJ2FjY2VwdCcsICcueGxzeCwueGxzJyk7CiAgICB0aGlzLmlucHV0VGFnLnNldEF0dHJpYnV0ZSgnbXVsdGlwbGUnLCBmYWxzZSk7CiAgICB0aGlzLmlucHV0VGFnLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzOwogICAgICBzZWxmLnJlYWRXb3JrYm9va0Zyb21Mb2NhbEZpbGUoZmlsZXMpOwogICAgfSk7CiAgICB0aGlzLmltcG9ydEhpc3RvcnkgPSBbXTsgLy8g5a+85YWl5Y6G5Y+y6K6w5b2VCiAgfQogIF9jcmVhdGVDbGFzcyhJbXBvcnQsIFt7CiAgICBrZXk6ICJpbXBvcnRFeGNlbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW1wb3J0RXhjZWwoX3JlZiwgY2IpIHsKICAgICAgdmFyIGNvbmZpZyA9IF9yZWYuY29uZmlnOwogICAgICAvLyDop6blj5Hlr7zlhaVFeGNlbOWKqOS9nAogICAgICB0aGlzLmNvbmZpZ1NvdXJjZSA9IGNvbmZpZzsKICAgICAgdGhpcy5jdXJJbXBvcnRHbG9ibGVDb25mID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5pbXBvcnRHbG9ibGVDb25mLCBjb25maWcpOwogICAgICB0aGlzLmltcG9ydGNhbGxiYWNrID0gY2I7CiAgICAgIHRoaXMuc2VsZWN0RmlsZShjYik7CiAgICB9CiAgfSwgewogICAga2V5OiAic2VsZWN0RmlsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0RmlsZSgpIHsKICAgICAgLy8g6Kem5Y+R6YCJ5Y+W5paH5Lu25pON5L2cCiAgICAgIHRoaXMud29ya2Jvb2sgPSB7fTsKICAgICAgdGhpcy5pbnB1dFRhZy52YWx1ZSA9IG51bGw7CiAgICAgIHRoaXMuaW5wdXRUYWcuY2xpY2soKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRVdWlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRVdWlkKCkgewogICAgICB2YXIgaGV4RGlnaXRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonOwogICAgICAvLyDojrflj5ZtYXBpZAogICAgICB2YXIgcyA9IFtdOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM2OyBpKyspIHsKICAgICAgICBzW2ldID0gaGV4RGlnaXRzLnN1YnN0cihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAweDEwKSwgMSk7CiAgICAgIH0KICAgICAgc1sxNF0gPSAnNCc7CiAgICAgIHNbMTldID0gaGV4RGlnaXRzLnN1YnN0cihzWzE5XSAmIDB4MyB8IDB4OCwgMSk7CiAgICAgIHNbOF0gPSBzWzEzXSA9IHNbMThdID0gc1syM10gPSAnJzsKICAgICAgdmFyIHV1aWQgPSBzLmpvaW4oJycpOwogICAgICByZXR1cm4gdXVpZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzbWFsbEh1bXAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNtYWxsSHVtcChzdHIpIHsKICAgICAgLy8g6L+e5a2X56ym6L2s5oiQ5bCP6am85bOwCiAgICAgIHJldHVybiBzdHIuc3BsaXQoJ18nKS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgcmV0dXJuIGluZGV4ID09PSAwID8gaXRlbS50b0xvd2VyQ2FzZSgpIDogaXRlbS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15bYS16XXsxLDF9LywgZnVuY3Rpb24gKCQxLCAkMiwgJDMpIHsKICAgICAgICAgIHJldHVybiAkMS50b1VwcGVyQ2FzZSgpOwogICAgICAgIH0pOwogICAgICB9KS5qb2luKCcnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb2x1bW5MYWJlbFRvSW5kZXgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbHVtbkxhYmVsVG9JbmRleChsYWJlbCkgewogICAgICAvLyDojrflj5bliJflrZfmr43ntKLlvJXovazljJbkuLrmlbDlrZfntKLlvJUKICAgICAgaWYgKCEvW0EtWl0rLy50ZXN0KGxhYmVsLnRvTG9jYWxlVXBwZXJDYXNlKCkpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHBhcmFtZXRlcixFeHBlY3QgYSBTdHJpbmc8QWxwaGFiZXRpYz4hJyk7CiAgICAgIH0KICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgdmFyIGNoYXJzID0gbGFiZWwudG9Mb2NhbGVVcHBlckNhc2UoKS5zcGxpdCgnJyk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpbmRleCArPSAoY2hhcnNbaV0uY2hhckNvZGVBdCgpIC0gJ0EnLmNoYXJDb2RlQXQoKSArIDEpICogTWF0aC5wb3coMjYsIGNoYXJzLmxlbmd0aCAtIGkgLSAxKTsKICAgICAgfQogICAgICByZXR1cm4gaW5kZXggLSAxOwogICAgfQogIH0sIHsKICAgIGtleTogImdldEV4Y2VsQ29sdW1uTGFiZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEV4Y2VsQ29sdW1uTGFiZWwobnVtKSB7CiAgICAgIC8vIOiOt+WPlue0ouW8leiOt+WPluWIl+Wtl+avjQogICAgICAvLyDmlrnms5XkuIAg6auY5pWICiAgICAgIGlmICghL1swLTldKy8udGVzdChudW0pKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHBhcmFtZXRlcixFeHBlY3QgYSBOdW1iZXIhJyk7CiAgICAgIH0KICAgICAgdmFyIG9yZEEgPSAnQScuY2hhckNvZGVBdCgwKTsKICAgICAgdmFyIG9yZFogPSAnWicuY2hhckNvZGVBdCgwKTsKICAgICAgdmFyIGxlbiA9IG9yZFogLSBvcmRBICsgMTsKICAgICAgdmFyIHJlc3VsdCA9ICcnOwogICAgICB3aGlsZSAobnVtID49IDApIHsKICAgICAgICByZXN1bHQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKG51bSAlIGxlbiArIG9yZEEpICsgcmVzdWx0OwogICAgICAgIG51bSA9IE1hdGguZmxvb3IobnVtIC8gbGVuKSAtIDE7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgLy8g5pa55rOV5LqMIOS9juaViAogICAgICAvKg0KICAgICAgICAgIGxldCB0ZW1wID0gJycNCiAgICAgICAgICBsZXQgaSA9IE1hdGguZmxvb3IoTWF0aC5sb2coMjUuMCAqIChudW0pIC8gMjYuMCArIDEpIC8gTWF0aC5sb2coMjYpKSArIDENCiAgICAgICAgICBpZiAoaSA+IDEpIHsNCiAgICAgICAgICAgIGxldCBzdWIgPSBudW0gLSAyNiAqIChNYXRoLnBvdygyNiwgaSAtIDEpIC0gMSkgLyAyNQ0KICAgICAgICAgICAgZm9yIChsZXQgaiA9IGk7IGogPiAwOyBqLS0pIHsNCiAgICAgICAgICAgICAgdGVtcCA9IHRlbXAgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKHN1YiAvIE1hdGgucG93KDI2LCBqIC0gMSkgKyA2NSkNCiAgICAgICAgICAgICAgc3ViID0gc3ViICUgTWF0aC5wb3coMjYsIGogLSAxKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0ZW1wID0gdGVtcCArIFN0cmluZy5mcm9tQ2hhckNvZGUobnVtICsgNjUpDQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiB0ZW1wDQogICAgICAqLwogICAgfQogIH0sIHsKICAgIGtleTogInRyYW5zQnl0ZVRvU2l6ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdHJhbnNCeXRlVG9TaXplKHZhbHVlKSB7CiAgICAgIC8vIOaNoueul+aWh+S7tuWkp+WwjwogICAgICBpZiAodmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSA9PT0gJycpIHsKICAgICAgICByZXR1cm4gJzAgQnl0ZXMnOwogICAgICB9CiAgICAgIHZhciB1bml0QXJyID0gWydCeXRlcycsICdLQicsICdNQicsICdHQicsICdUQicsICdQQicsICdFQicsICdaQicsICdZQiddOwogICAgICB2YXIgaW5kZXggPSAwOwogICAgICB2YXIgc3Jjc2l6ZSA9IHBhcnNlRmxvYXQodmFsdWUpOwogICAgICBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5sb2coc3Jjc2l6ZSkgLyBNYXRoLmxvZygxMDI0KSk7CiAgICAgIHZhciBzaXplID0gc3Jjc2l6ZSAvIE1hdGgucG93KDEwMjQsIGluZGV4KTsKICAgICAgLy8gIOS/neeVmeeahOWwj+aVsOS9jeaVsAogICAgICBzaXplID0gc2l6ZS50b0ZpeGVkKDIpOwogICAgICByZXR1cm4gc2l6ZSArIHVuaXRBcnJbaW5kZXhdOwogICAgfQogIH0sIHsKICAgIGtleTogImxpc3RUb1RyZWVCeU5lc3RDb2RlTGVuZ3RoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsaXN0VG9UcmVlQnlOZXN0Q29kZUxlbmd0aChkYXRhLCBuZXN0Q29kZUtleSkgewogICAgICAvLyDmoLnmja5uZXN0Q29kZUtleSDplb/luqYg55Sf5oiQ5bWM5aWX5pWw5o2uCiAgICAgIHZhciBtYXAgPSB7fTsgLy8g5p6E5bu6bWFwCiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIG1hcFtpdGVtW25lc3RDb2RlS2V5XV0gPSBpdGVtOwogICAgICAgIGl0ZW0uY2hpbGRyZW4gPSBbXTsKICAgICAgfSk7CiAgICAgIHZhciB0cmVlRGF0YSA9IFtdOwogICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgcG5lc3RDb2RlS2V5ID0gU3RyaW5nKGl0ZW1bbmVzdENvZGVLZXldKTsKICAgICAgICBwbmVzdENvZGVLZXkgPSBwbmVzdENvZGVLZXkuc2xpY2UoMCwgcG5lc3RDb2RlS2V5Lmxlbmd0aCAtIDEpOwogICAgICAgIHZhciBtYXBJdGVtID0gbWFwW2l0ZW1bcG5lc3RDb2RlS2V5XV07CiAgICAgICAgd2hpbGUgKCFtYXBJdGVtICYmIHBuZXN0Q29kZUtleSAhPT0gJycpIHsKICAgICAgICAgIHBuZXN0Q29kZUtleSA9IHBuZXN0Q29kZUtleS5zbGljZSgwLCBwbmVzdENvZGVLZXkubGVuZ3RoIC0gMSk7CiAgICAgICAgICBtYXBJdGVtID0gbWFwW3BuZXN0Q29kZUtleV07CiAgICAgICAgfQogICAgICAgIGlmIChtYXBJdGVtKSB7CiAgICAgICAgICBpdGVtWydpdGVtX19wY29kZSddID0gU3RyaW5nKG1hcEl0ZW1bbmVzdENvZGVLZXldKTsKICAgICAgICAgIGl0ZW1bJ2l0ZW1fX3BOZXN0Q29kZSddID0gU3RyaW5nKG1hcEl0ZW1bJ2l0ZW1fX3BOZXN0Q29kZSddID8gbWFwSXRlbVsnaXRlbV9fcE5lc3RDb2RlJ10gKyAnXycgKyBpdGVtW25lc3RDb2RlS2V5XSA6IGl0ZW1bbmVzdENvZGVLZXldKTsKICAgICAgICAgIGl0ZW1bJ2l0ZW1fX2xldmVsJ10gPSBpdGVtWydpdGVtX19wTmVzdENvZGUnXS5zcGxpdCgnLScpLmxlbmd0aDsKICAgICAgICAgIChtYXBJdGVtLmNoaWxkcmVuIHx8IChtYXBJdGVtLmNoaWxkcmVuID0gW10pKS5wdXNoKGl0ZW0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0cmVlRGF0YS5wdXNoKGl0ZW0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiB0cmVlRGF0YTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRTaGVldEVmZmVjdGl2ZUNlbGxJbmZvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTaGVldEVmZmVjdGl2ZUNlbGxJbmZvKHJlZkFyZWEpIHsKICAgICAgLy8g6I635Y+W5pyJ5pWI5Yy65Z+f5Y2V5YWD5qC85L+h5oGvIC8vICdBMTpIMTQxNScKICAgICAgdmFyIHJlZkFyZWFBcnIgPSByZWZBcmVhLnRvTG9jYWxlVXBwZXJDYXNlKCkuc3BsaXQoJzonKTsKICAgICAgdmFyIHNoZWV0RWZmZWN0aXZlQ2VsbEluZm8gPSB7CiAgICAgICAgc3RhcnRDb2xMYWJlbDogcmVmQXJlYUFyclswXS5yZXBsYWNlKC9bMC05XS9pZywgJycpLAogICAgICAgIGVuZENvbExhYmVsOiByZWZBcmVhQXJyWzFdLnJlcGxhY2UoL1swLTldL2lnLCAnJyksCiAgICAgICAgc3RhcnRSb3dJbmRleDogcmVmQXJlYUFyclswXS5yZXBsYWNlKC9bQS1aXS9pZywgJycpLAogICAgICAgIGVuZFJvd0luZGV4OiByZWZBcmVhQXJyWzFdLnJlcGxhY2UoL1tBLVpdL2lnLCAnJyksCiAgICAgICAgY29sQXJlYUxhYmVsOiBbXQogICAgICB9OwogICAgICBzaGVldEVmZmVjdGl2ZUNlbGxJbmZvLnN0YXJ0Q29sSW5kZXggPSB0aGlzLmNvbHVtbkxhYmVsVG9JbmRleChzaGVldEVmZmVjdGl2ZUNlbGxJbmZvLnN0YXJ0Q29sTGFiZWwpOwogICAgICBzaGVldEVmZmVjdGl2ZUNlbGxJbmZvLmVuZENvbEluZGV4ID0gdGhpcy5jb2x1bW5MYWJlbFRvSW5kZXgoc2hlZXRFZmZlY3RpdmVDZWxsSW5mby5lbmRDb2xMYWJlbCk7CiAgICAgIGZvciAodmFyIGkgPSBzaGVldEVmZmVjdGl2ZUNlbGxJbmZvLnN0YXJ0Q29sSW5kZXg7IGkgPD0gc2hlZXRFZmZlY3RpdmVDZWxsSW5mby5lbmRDb2xJbmRleDsgaSsrKSB7CiAgICAgICAgc2hlZXRFZmZlY3RpdmVDZWxsSW5mby5jb2xBcmVhTGFiZWwucHVzaCh0aGlzLmdldEV4Y2VsQ29sdW1uTGFiZWwoaSkpOwogICAgICB9CiAgICAgIHJldHVybiBzaGVldEVmZmVjdGl2ZUNlbGxJbmZvOwogICAgfQogIH0sIHsKICAgIGtleTogImdldE1lcmdlc0luZm8iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1lcmdlc0luZm8obWVyZ2VzKSB7CiAgICAgIC8vIOeUn+aIkOWNleWFg+agvOWQiOW5tuaYoOWwhAogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBtZXJnZXNNYXAgPSB7CiAgICAgICAgbWVyZ2VzQ2VsbDoge30sCiAgICAgICAgbWVyZ2VzVG9DZWxsOiB7fQogICAgICB9OwogICAgICBtZXJnZXMgJiYgbWVyZ2VzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgdmFyIHJlZmNlbGxUbyA9IHNlbGYuZ2V0RXhjZWxDb2x1bW5MYWJlbChpdGVtLnMuYykgKyAoK2l0ZW0ucy5yICsgMSk7CiAgICAgICAgbWVyZ2VzTWFwLm1lcmdlc0NlbGxbcmVmY2VsbFRvXSA9IHsKICAgICAgICAgIHJlZmNlbGw6IHJlZmNlbGxUbywKICAgICAgICAgIHN0YXJ0Q29sTGFiZWw6IHNlbGYuZ2V0RXhjZWxDb2x1bW5MYWJlbChpdGVtLnMuYyksCiAgICAgICAgICBlbmRDb2xMYWJlbDogc2VsZi5nZXRFeGNlbENvbHVtbkxhYmVsKGl0ZW0uZS5jKSwKICAgICAgICAgIHN0YXJ0Q29sSW5kZXg6IGl0ZW0ucy5jLAogICAgICAgICAgZW5kQ29sSW5kZXg6IGl0ZW0uZS5jLAogICAgICAgICAgc3RhcnRSb3dJbmRleDogK2l0ZW0ucy5yICsgMSwKICAgICAgICAgIGVuZFJvd0luZGV4OiAraXRlbS5zLnIgKyAxCiAgICAgICAgfTsKICAgICAgICBmb3IgKHZhciByID0gaXRlbS5zLnI7IHIgPD0gaXRlbS5lLnI7IHIrKykgewogICAgICAgICAgZm9yICh2YXIgYyA9IGl0ZW0ucy5jOyBjIDw9IGl0ZW0uZS5jOyBjKyspIHsKICAgICAgICAgICAgdmFyIHJlZmNlbGwgPSBzZWxmLmdldEV4Y2VsQ29sdW1uTGFiZWwoYykgKyAoK3IgKyAxKTsKICAgICAgICAgICAgbWVyZ2VzTWFwLm1lcmdlc1RvQ2VsbFtyZWZjZWxsXSA9IHJlZmNlbGxUbzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gbWVyZ2VzTWFwOwogICAgfQogIH0sIHsKICAgIGtleTogImdlbmVyYXRlVGhlYWRBcnIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlVGhlYWRBcnIoc2hlZXREYXRhU291cmNlKSB7CiAgICAgIC8vIOagueaNruW3suacieaVsOaNruWSjOWNleWFg+agvOWQiOW5tuaYoOWwhCDnlJ/miJDlrozmlbTooajlpLRBcnJheQogICAgICB2YXIgX3RoaXMkY3VySW1wb3J0R2xvYmxlID0gdGhpcy5jdXJJbXBvcnRHbG9ibGVDb25mLAogICAgICAgIHRoZWFkUm93SW5kZXhTdGFydCA9IF90aGlzJGN1ckltcG9ydEdsb2JsZS50aGVhZFJvd0luZGV4U3RhcnQsCiAgICAgICAgdGhlYWRSb3dJbmRleEVuZCA9IF90aGlzJGN1ckltcG9ydEdsb2JsZS50aGVhZFJvd0luZGV4RW5kLAogICAgICAgIF90aGlzJGN1ckltcG9ydEdsb2JsZTIgPSBfdGhpcyRjdXJJbXBvcnRHbG9ibGUudGhlYWREZWZhdWx0RGF0YSwKICAgICAgICB0aGVhZERlZmF1bHREYXRhID0gX3RoaXMkY3VySW1wb3J0R2xvYmxlMiA9PT0gdm9pZCAwID8ge30gOiBfdGhpcyRjdXJJbXBvcnRHbG9ibGUyOwogICAgICB0aGVhZFJvd0luZGV4RW5kID0gdGhlYWRSb3dJbmRleEVuZCA+IHRoZWFkUm93SW5kZXhTdGFydCA/ICt0aGVhZFJvd0luZGV4RW5kICsgMSA6ICt0aGVhZFJvd0luZGV4U3RhcnQgKyAxOwogICAgICB2YXIgY29sQXJlYUxhYmVsID0gdGhpcy5jdXJTaGVldEVmZmVjdGl2ZUNlbGxJbmZvLmNvbEFyZWFMYWJlbDsKICAgICAgdmFyIF90aGlzJGdldE1lcmdlc0luZm8gPSB0aGlzLmdldE1lcmdlc0luZm8oc2hlZXREYXRhU291cmNlWychbWVyZ2VzJ10pLAogICAgICAgIG1lcmdlc1RvQ2VsbCA9IF90aGlzJGdldE1lcmdlc0luZm8ubWVyZ2VzVG9DZWxsOwogICAgICB2YXIgaGVhZE1hcCA9IHt9OwogICAgICB2YXIgaGVhZEFhcnJ5QWxsID0gW107CiAgICAgIGZvciAodmFyIGkgPSB0aGVhZFJvd0luZGV4U3RhcnQ7IGkgPCB0aGVhZFJvd0luZGV4RW5kOyBpKyspIHsKICAgICAgICB2YXIgaGVhZEFhcnJ5ID0gW107CiAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGNvbEFyZWFMYWJlbCksCiAgICAgICAgICBfc3RlcDsKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIGNvbGxhYmVsID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgIGlmIChzaGVldERhdGFTb3VyY2VbY29sbGFiZWwgKyBpXSkgewogICAgICAgICAgICAgIHZhciBjZWxsaXRlbSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhlYWREZWZhdWx0RGF0YSksIHt9LCB7CiAgICAgICAgICAgICAgICBjb2xsYWJlbDogY29sbGFiZWwsCiAgICAgICAgICAgICAgICAvLyAgbWVyZ2VzSW5mbzogbWVyZ2VzQ2VsbFtjb2xsYWJlbCArIGldLAogICAgICAgICAgICAgICAgdGl0bGU6IHNoZWV0RGF0YVNvdXJjZVtjb2xsYWJlbCArIGldLnYKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBoZWFkQWFycnkucHVzaChjZWxsaXRlbSk7CiAgICAgICAgICAgICAgaGVhZE1hcFtjb2xsYWJlbCArIGldID0gY2VsbGl0ZW07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFyIF9jZWxsaXRlbSA9IG1lcmdlc1RvQ2VsbFtjb2xsYWJlbCArIGldOwogICAgICAgICAgICAgIGhlYWRBYXJyeS5wdXNoKF9jZWxsaXRlbSk7CiAgICAgICAgICAgICAgaGVhZE1hcFtjb2xsYWJlbCArIGldID0gX2NlbGxpdGVtOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgIH0KICAgICAgICBoZWFkQWFycnlBbGwucHVzaChoZWFkQWFycnkpOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgaGVhZEFhcnJ5QWxsOiBoZWFkQWFycnlBbGwsCiAgICAgICAgaGVhZE1hcDogaGVhZE1hcAogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImdlbmVyYXRlVGhlYWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlVGhlYWQoc2hlZXREYXRhU291cmNlKSB7CiAgICAgIC8vIOagueaNruihqOWktOWujOaVtOaVsOaNruWSjOWNleWFg+agvOWQiOW5tuaYoOWwhOeUn+aIkOW1jOWll+ihqOWktAogICAgICB2YXIgX3RoaXMkZ2VuZXJhdGVUaGVhZEFyID0gdGhpcy5nZW5lcmF0ZVRoZWFkQXJyKHNoZWV0RGF0YVNvdXJjZSksCiAgICAgICAgaGVhZEFhcnJ5QWxsID0gX3RoaXMkZ2VuZXJhdGVUaGVhZEFyLmhlYWRBYXJyeUFsbCwKICAgICAgICBoZWFkTWFwID0gX3RoaXMkZ2VuZXJhdGVUaGVhZEFyLmhlYWRNYXA7CiAgICAgIHZhciB0aGVhZFJvd0luZGV4U3RhcnQgPSB0aGlzLmN1ckltcG9ydEdsb2JsZUNvbmYudGhlYWRSb3dJbmRleFN0YXJ0OwogICAgICB2YXIgdGhlYWRBcnJSZWF1bHQgPSBbXTsKICAgICAgaGVhZEFhcnJ5QWxsLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgaXRlbS5mb3JFYWNoKGZ1bmN0aW9uIChjb2wsIGNvbEluZGV4KSB7CiAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHsKICAgICAgICAgICAgaWYgKF90eXBlb2YoY29sKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICB0aGVhZEFyclJlYXVsdC5wdXNoKGNvbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmIChfdHlwZW9mKGNvbCkgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAgICAgdmFyIHBDZWxsUmVmID0gaGVhZE1hcFtjb2wuY29sbGFiZWwgKyAoK2luZGV4ICsgdGhlYWRSb3dJbmRleFN0YXJ0IC0gMSldOwogICAgICAgICAgICAgIGlmIChfdHlwZW9mKHBDZWxsUmVmKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIChwQ2VsbFJlZi5jaGlsZHJlbiB8fCAocENlbGxSZWYuY2hpbGRyZW4gPSBbXSkpLnB1c2goY29sKTsgLy8g6L+Z6YeM5Yik5patbWFwSXRlbeS4reaYr+WQpuWtmOWcqGNoaWxkCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHdoaWxlIChfdHlwZW9mKHBDZWxsUmVmKSAhPT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgICAgcENlbGxSZWYgPSBoZWFkTWFwW3BDZWxsUmVmXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIChwQ2VsbFJlZi5jaGlsZHJlbiB8fCAocENlbGxSZWYuY2hpbGRyZW4gPSBbXSkpLnB1c2goY29sKTsgLy8g6L+Z6YeM5Yik5patbWFwSXRlbeS4reaYr+WQpuWtmOWcqGNoaWxkCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwoKICAgICAgcmV0dXJuIHRoZWFkQXJyUmVhdWx0OwogICAgfQogIH0sIHsKICAgIGtleTogImdlbmVyYXRlVGhlYWRUcmVlVG9saXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZW5lcmF0ZVRoZWFkVHJlZVRvbGlzdChkYXRhKSB7CiAgICAgIHZhciBsZXZlbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMTsKICAgICAgdmFyIHBpZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJyc7CiAgICAgIHZhciBhbGx0aWxsZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzID8gYXJndW1lbnRzWzNdIDogdW5kZWZpbmVkOwogICAgICB2YXIgbGlzdCA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogW107CiAgICAgIC8vIOW1jOWll2hlYWTovazmjaLmiJDlubPooYzmlbDmja7lubbnlJ/miJBpZOWSjHBpZAogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICBpdGVtLnJlbmRlck1hcElkID0gc2VsZi5nZXRVdWlkKCk7CiAgICAgICAgaXRlbS5vcmRlclBOdW0gPSBwaWQ7CiAgICAgICAgaXRlbS5vcmRlck51bSA9IHBpZCArIFN0cmluZyhpbmRleCkucGFkU3RhcnQoNCwgJzAnKTsKICAgICAgICBpdGVtLmNvbHVtbkxldmVsID0gbGV2ZWw7CiAgICAgICAgaXRlbS5hbGx0aWxsZSA9IGFsbHRpbGxlID8gYWxsdGlsbGUgKyAnLScgKyBpdGVtLnRpdGxlIDogaXRlbS50aXRsZTsKICAgICAgICBsaXN0LnB1c2goaXRlbSk7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbS5jaGlsZHJlbikgJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICAgIHNlbGYuZ2VuZXJhdGVUaGVhZFRyZWVUb2xpc3QoaXRlbS5jaGlsZHJlbiwgbGV2ZWwgKyAxLCBpdGVtLm9yZGVyTnVtLCBpdGVtLmFsbHRpbGxlLCBsaXN0KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gbGlzdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZW5lcmF0ZVRoZWFkTG93ZXN0TGV2ZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlVGhlYWRMb3dlc3RMZXZlbChkYXRhKSB7CiAgICAgIHZhciBtYXAgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHsKICAgICAgICBsb3dlc3RMZXZlbEFycjogW10sCiAgICAgICAgTG93ZXN0TGV2ZWxNYXA6IHt9CiAgICAgIH07CiAgICAgIC8vIOagueaNruW1jOWll+ihqOWktOeUn+aIkOaVsOaNruS9jue6p+aYoOWwhO+8jOeUqOadpeWkhOeQhuino+aekOihqOS9kwogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICB2YXIgdGl0bGVBcnIgPSBpdGVtLnRpdGxlLnNwbGl0KCc6OicpOwogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0uY2hpbGRyZW4pICYmICFpdGVtLmNoaWxkcmVuLmxlbmd0aCB8fCAhQXJyYXkuaXNBcnJheShpdGVtLmNoaWxkcmVuKSkgewogICAgICAgICAgdmFyIGN1ckxvd2Vyc3RMZXZlbCA9IE9iamVjdC5hc3NpZ24oaXRlbSwgewogICAgICAgICAgICB0aXRsZTogdGl0bGVBcnJbMF0ucmVwbGFjZSgnKOWFgyknLCAnJyksCiAgICAgICAgICAgIGlzcGFyZW50cm93OiBmYWxzZSwKICAgICAgICAgICAgZmllbGQ6IHNlbGYuZ2V0RmllbGQoc2VsZi5zbWFsbEh1bXAodGl0bGVBcnJbMV0gfHwgKCdmJyArIChtYXAubG93ZXN0TGV2ZWxBcnIubGVuZ3RoICsgJycpLnBhZFN0YXJ0KDMsICcwJykpLnRvTG9jYWxlTG93ZXJDYXNlKCkpLCB0aXRsZUFyclswXSksCiAgICAgICAgICAgIGNvbHVtbk5hbWU6IHRpdGxlQXJyWzFdIHx8ICgnZicgKyAobWFwLmxvd2VzdExldmVsQXJyLmxlbmd0aCArICcnKS5wYWRTdGFydCgzLCAnMCcpKS50b0xvY2FsZUxvd2VyQ2FzZSgpLAogICAgICAgICAgICBjb2x1bW50eXBlOiAxLAogICAgICAgICAgICB0eXBlOiB0aXRsZUFyclsyXSB8fCAnJHZ4ZUlucHV0JyAvLyDmlrDlhajlsYDkuIvmi4nmoJE6ICR2eGVUcmVl77yM5paH5pys5pWw5a2X6L6T5YWlOiAkdnhlSW5wdXTvvIzkuIvmi4npgInmi6k6ICR2eGVTZWxlY3TvvIzorqHnrpfmuLLmn5Plmag6ICR2eGVDYWxjdWxhdGXvvIzph5Hpop3ovpPlhaU6ICR2eGVNb25lee+8jOS4i+aLieaWh+acrOahhjogJHZ4ZUVkaXREb3duVGV4dGFyZWHvvIzlpKnmlbA6ICR2eGVEYXlz77yM5pe26Ze05pel5pyfOiAkdnhlVGltZe+8jOWNlemAiTogJHZ4ZVJhZGlv77yM5aSa6YCJOiAkdnhlQ2hlY2tib3jvvIzpl7TpmpTml7bpl7TmiJbmlbDlgLzpgInmi6novpPlhaXmuLLmn5Plmag6ICR2eGVJbnRlcnZhcu+8jOW8gOWFszogJHZ4ZVN3aXRjaO+8jOi/m+W6puadoTogdnhlUHJvZ3Jlc3PjgILlhbbkuK3vvIzmnaHku7bmuLLmn5PlmajvvIzov5vluqbmnaEKICAgICAgICAgIH0pOwoKICAgICAgICAgIG1hcC5sb3dlc3RMZXZlbEFyci5wdXNoKGN1ckxvd2Vyc3RMZXZlbCk7CiAgICAgICAgICBtYXAuTG93ZXN0TGV2ZWxNYXBbY3VyTG93ZXJzdExldmVsLmNvbGxhYmVsXSA9IGN1ckxvd2Vyc3RMZXZlbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgT2JqZWN0LmFzc2lnbihpdGVtLCB7CiAgICAgICAgICAgIHRpdGxlOiB0aXRsZUFyclswXS5yZXBsYWNlKCco5YWDKScsICcnKSwKICAgICAgICAgICAgZmllbGQ6IHNlbGYuZ2V0RmllbGQoc2VsZi5zbWFsbEh1bXAodGl0bGVBcnJbMV0gfHwgJycpKSwKICAgICAgICAgICAgY29sdW1uTmFtZTogdGl0bGVBcnJbMV0gfHwgJycsCiAgICAgICAgICAgIGlzcGFyZW50cm93OiB0cnVlLAogICAgICAgICAgICBjb2x1bW50eXBlOiAxLAogICAgICAgICAgICB0eXBlOiAnJyAvLyDmlrDlhajlsYDkuIvmi4nmoJE6ICR2eGVUcmVl77yM5paH5pys5pWw5a2X6L6T5YWlOiAkdnhlSW5wdXTvvIzkuIvmi4npgInmi6k6ICR2eGVTZWxlY3TvvIzorqHnrpfmuLLmn5Plmag6ICR2eGVDYWxjdWxhdGXvvIzph5Hpop3ovpPlhaU6ICR2eGVNb25lee+8jOS4i+aLieaWh+acrOahhjogJHZ4ZUVkaXREb3duVGV4dGFyZWHvvIzlpKnmlbA6ICR2eGVEYXlz77yM5pe26Ze05pel5pyfOiAkdnhlVGltZe+8jOWNlemAiTogJHZ4ZVJhZGlv77yM5aSa6YCJOiAkdnhlQ2hlY2tib3jvvIzpl7TpmpTml7bpl7TmiJbmlbDlgLzpgInmi6novpPlhaXmuLLmn5Plmag6ICR2eGVJbnRlcnZhcu+8jOW8gOWFszogJHZ4ZVN3aXRjaO+8jOi/m+W6puadoTogdnhlUHJvZ3Jlc3PjgILlhbbkuK3vvIzmnaHku7bmuLLmn5PlmajvvIzov5vluqbmnaEKICAgICAgICAgIH0pOwoKICAgICAgICAgIHNlbGYuZ2VuZXJhdGVUaGVhZExvd2VzdExldmVsKGl0ZW0uY2hpbGRyZW4sIG1hcCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIG1hcDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRGaWVsZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RmllbGQoZmllbGQsIHRpdGxlKSB7CiAgICAgIHZhciB0YWJsZUNvbHVtbnNUaXRsZUZpZWxkTWFwID0gdGhpcy5jb2x1bW5zQ29uZmlnTWFwLnRhYmxlQ29sdW1uc1RpdGxlRmllbGRNYXA7CiAgICAgIGlmICh0YWJsZUNvbHVtbnNUaXRsZUZpZWxkTWFwW1N0cmluZyh0aXRsZSkucmVwbGFjZSgvXCjlhYNcKXxcKOS4h+WFg1wpfHVuZGVmaW5lZC9pZywgJycpXSkgewogICAgICAgIHJldHVybiB0YWJsZUNvbHVtbnNUaXRsZUZpZWxkTWFwW1N0cmluZyh0aXRsZSkucmVwbGFjZSgvXCjlhYNcKXxcKOS4h+WFg1wpfHVuZGVmaW5lZC9pZywgJycpXTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZmllbGQ7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZW5lcmF0ZVRoZWFkQW5kVGJvZHkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdlbmVyYXRlVGhlYWRBbmRUYm9keShzaGVldERhdGFTb3VyY2UpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgLy8g55Sf5oiQ6KGo5aS0KOW1jOWll+ihqOWktOWSjOWNleihqOWktCnlkozooajkvZMKICAgICAgdmFyIF90aGlzJGN1ckltcG9ydEdsb2JsZTMgPSB0aGlzLmN1ckltcG9ydEdsb2JsZUNvbmYsCiAgICAgICAgdGhlYWRSb3dJbmRleEVuZCA9IF90aGlzJGN1ckltcG9ydEdsb2JsZTMudGhlYWRSb3dJbmRleEVuZCwKICAgICAgICB0aGVhZFJvd0luZGV4U3RhcnQgPSBfdGhpcyRjdXJJbXBvcnRHbG9ibGUzLnRoZWFkUm93SW5kZXhTdGFydCwKICAgICAgICBjb2x1bW5zID0gX3RoaXMkY3VySW1wb3J0R2xvYmxlMy5jb2x1bW5zOwogICAgICB0aGlzLmN1clNoZWV0RWZmZWN0aXZlQ2VsbEluZm8gPSB0aGlzLmdldFNoZWV0RWZmZWN0aXZlQ2VsbEluZm8oc2hlZXREYXRhU291cmNlWychcmVmJ10pOwogICAgICB0aGlzLmNvbHVtbnNDb25maWdNYXAgPSB0aGlzLmdlbmVyYXRlQ29sdW1uc0FsbE1hcChBcnJheS5pc0FycmF5KGNvbHVtbnMpID8gY29sdW1ucyA6IFtdKTsKICAgICAgdmFyIHRoZWFkUmVzdWx0ID0gdGhpcy5nZW5lcmF0ZVRoZWFkKHNoZWV0RGF0YVNvdXJjZSk7CiAgICAgIHZhciBfdGhpcyRnZW5lcmF0ZVRoZWFkTG8gPSB0aGlzLmdlbmVyYXRlVGhlYWRMb3dlc3RMZXZlbCh0aGVhZFJlc3VsdCksCiAgICAgICAgbG93ZXN0TGV2ZWxBcnIgPSBfdGhpcyRnZW5lcmF0ZVRoZWFkTG8ubG93ZXN0TGV2ZWxBcnI7CiAgICAgIHZhciBlbmRSb3dJbmRleCA9IHRoaXMuY3VyU2hlZXRFZmZlY3RpdmVDZWxsSW5mby5lbmRSb3dJbmRleDsKICAgICAgdmFyIHRib2R5UmVzdWx0ID0gW107CiAgICAgIGlmICgrZW5kUm93SW5kZXggPiArdGhlYWRSb3dJbmRleEVuZCkgewogICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKHJvd0luZGV4KSB7CiAgICAgICAgICB2YXIgcm93ID0ge307CiAgICAgICAgICBsb3dlc3RMZXZlbEFyci5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4sIGNvbHVtbkluZGV4KSB7CiAgICAgICAgICAgIHJvd1tjb2x1bW5bX3RoaXMuY3VySW1wb3J0R2xvYmxlQ29uZi5maWVsZE5hbWUgfHwgJ2ZpZWxkJ11dID0gc2hlZXREYXRhU291cmNlW2NvbHVtbi5jb2xsYWJlbCArIHJvd0luZGV4XSA/IFN0cmluZyhzaGVldERhdGFTb3VyY2VbY29sdW1uLmNvbGxhYmVsICsgcm93SW5kZXhdLnYpLnJlcGxhY2UoL251bGx8TmFOfHVuZGVmaW5lZHwsL2lnLCAnJykgOiAnJzsKICAgICAgICAgIH0pOwogICAgICAgICAgdGJvZHlSZXN1bHQucHVzaChyb3cpOwogICAgICAgIH07CiAgICAgICAgZm9yICh2YXIgcm93SW5kZXggPSArdGhlYWRSb3dJbmRleEVuZCArIDE7IHJvd0luZGV4IDw9IGVuZFJvd0luZGV4OyByb3dJbmRleCsrKSB7CiAgICAgICAgICBfbG9vcChyb3dJbmRleCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHZhciBwYXJzZUV4Y2VsZGF0YSA9IHsKICAgICAgICB0aGVhZExldmVsOiB0aGVhZFJvd0luZGV4RW5kIC0gdGhlYWRSb3dJbmRleFN0YXJ0ICsgMSwKICAgICAgICB0Ym9keTogdGJvZHlSZXN1bHQsCiAgICAgICAgdGJvZHlOZXN0OiB0aGlzLmxpc3RUb1RyZWVCeU5lc3RDb2RlTGVuZ3RoKHRib2R5UmVzdWx0LCBsb3dlc3RMZXZlbEFyclswXS5maWVsZCksCiAgICAgICAgdGhlYWROZXN0OiB0aGVhZFJlc3VsdCwKICAgICAgICB0aGVhZExpc3Q6IHRoaXMuZ2VuZXJhdGVUaGVhZFRyZWVUb2xpc3QodGhlYWRSZXN1bHQpLAogICAgICAgIHRoZWFkU2luZzogbG93ZXN0TGV2ZWxBcnIsCiAgICAgICAgc2hlZXRFZmZlY3RpdmVDZWxsSW5mbzogdGhpcy5jdXJTaGVldEVmZmVjdGl2ZUNlbGxJbmZvLAogICAgICAgIHNoZWV0RGF0YVNvdXJjZTogc2hlZXREYXRhU291cmNlCiAgICAgIH07CiAgICAgIHZhciBzb3VyY2VEYXRhID0ge307CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbHVtbnMpICYmIGNvbHVtbnMubGVuZ3RoKSB7CiAgICAgICAgdmFyIGNvbHVtbnNNYXAgPSB0aGlzLmNvbHVtbnNDb25maWdNYXA7CiAgICAgICAgc291cmNlRGF0YS50Ym9keVNvdXJjZSA9IHRoaXMudHJhbnNUYm9keVRvU291cmNlKHsKICAgICAgICAgIHRib2R5OiBwYXJzZUV4Y2VsZGF0YS50Ym9keSwKICAgICAgICAgIHZpZXdUb1NvdXJjZU1hcDogY29sdW1uc01hcC52aWV3VG9Tb3VyY2VNYXAsCiAgICAgICAgICBjb2x1bW5zQ29uZmlnTGlzdDogY29sdW1uc01hcC5jb2x1bW5zTGlzdCwKICAgICAgICAgIHJvd3NPYmpUZW1wOiBjb2x1bW5zTWFwLnJvd3NPYmpUZW1wLAogICAgICAgICAgY29sdW1uc0NvbmZpZ1RpdGxlRmllbE1hcDogY29sdW1uc01hcC50YWJsZUNvbHVtbnNUaXRsZUZpZWxkTWFwCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocGFyc2VFeGNlbGRhdGEsIHNvdXJjZURhdGEpOwogICAgfQogIH0sIHsKICAgIGtleTogInRyYW5zVGJvZHlUb1NvdXJjZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdHJhbnNUYm9keVRvU291cmNlKF9yZWYyKSB7CiAgICAgIHZhciB0Ym9keSA9IF9yZWYyLnRib2R5LAogICAgICAgIGNvbHVtbnNDb25maWdMaXN0ID0gX3JlZjIuY29sdW1uc0NvbmZpZ0xpc3QsCiAgICAgICAgdmlld1RvU291cmNlTWFwID0gX3JlZjIudmlld1RvU291cmNlTWFwLAogICAgICAgIHJvd3NPYmpUZW1wID0gX3JlZjIucm93c09ialRlbXA7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgcmV0dXJuIHRib2R5Lm1hcChmdW5jdGlvbiAocm93LCByb3dJbmRleCkgewogICAgICAgIHZhciBuZXdSb3cgPSB7fTsKICAgICAgICBjb2x1bW5zQ29uZmlnTGlzdC5tYXAoZnVuY3Rpb24gKGNvbHVtbiwgY29sdW1uSW5kZXgpIHsKICAgICAgICAgIHNlbGYucmV2ZXJzZVBhcnNlVmlld0RhdGFUb3NvdXJjZSh7CiAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICBjb2x1bW46IGNvbHVtbiwKICAgICAgICAgICAgdmlld1RvU291cmNlTWFwOiB2aWV3VG9Tb3VyY2VNYXAKICAgICAgICAgIH0sIG5ld1Jvdyk7CiAgICAgICAgICAvLyBuZXdSb3dbY29sdW1uLmZpZWxkXSA9IHJvd1tkYXRhVGl0bGVGaWVsZE1hcE1hcFtjb2x1bW4udGl0bGVdXQogICAgICAgIH0pOwoKICAgICAgICByZXR1cm4gbmV3Um93OwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXZlcnNlUGFyc2VWaWV3RGF0YVRvc291cmNlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXZlcnNlUGFyc2VWaWV3RGF0YVRvc291cmNlKF9yZWYzLCBuZXdSb3cpIHsKICAgICAgdmFyIHJvdyA9IF9yZWYzLnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmMy5jb2x1bW4sCiAgICAgICAgdmlld1RvU291cmNlTWFwID0gX3JlZjMudmlld1RvU291cmNlTWFwOwogICAgICAvLyDlpITnkIbljZXkuKog5a+85YWl5pWw5o2uCiAgICAgIC8vICBuZWVkTWFwOiB0cnVlLAogICAgICAvLyAgbmFtZTogaXRlbVJlbmRlci5uYW1lLAogICAgICAvLyAgb3B0aW9uczogQXJyYXkuaXNBcnJheShpdGVtUmVuZGVyLm9wdGlvbnMpID8gaXRlbVJlbmRlci5vcHRpb25zIDogW10sCiAgICAgIC8vICBtdWx0aXBsZTogdHJ1ZSwKICAgICAgLy8gIGZvcm11bGE6IGNvbmx1bS5mb3JtdWxhCiAgICAgIHZhciB2YWx1ZSA9IHJvd1tjb2x1bW4uZmllbGRdOwogICAgICBpZiAodmlld1RvU291cmNlTWFwICYmIHZpZXdUb1NvdXJjZU1hcC5uZWVkTWFwKSB7CiAgICAgICAgdmFyIHRyYW5zVmFsdWUgPSAnJzsKICAgICAgICB2YXIgdmlld1ZhbHVlID0gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogJyc7CiAgICAgICAgaWYgKHZpZXdUb1NvdXJjZU1hcC5tdWx0aXBsZSkgewogICAgICAgICAgaWYgKHZpZXdWYWx1ZS5sZW5ndGgpIHsKICAgICAgICAgICAgdmFyIHZpZXdUb1NvdXJjZVZhbHVlQXJyID0gW107CiAgICAgICAgICAgIHZpZXdUb1NvdXJjZU1hcC5vcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgaWYgKHZpZXdWYWx1ZS5pbmRleE9mKGl0ZW0ubGFiZWwpID49IDApIHsKICAgICAgICAgICAgICAgIHZpZXdUb1NvdXJjZVZhbHVlQXJyLnB1c2goaXRlbS52YWx1ZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdHJhbnNWYWx1ZSA9IHZpZXdUb1NvdXJjZVZhbHVlQXJyLmpvaW4oJywnKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRyYW5zVmFsdWUgPSAnJzsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmlld1RvU291cmNlTWFwLm9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgaWYgKHZpZXdWYWx1ZS5pbmRleE9mKGl0ZW0ubGFiZWwpID49IDApIHsKICAgICAgICAgICAgICB0cmFuc1ZhbHVlID0gaXRlbS52YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIG5ld1Jvd1tjb2x1bW4uZmllbGRdID0gdHJhbnNWYWx1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXdSb3dbY29sdW1uLmZpZWxkXSA9IHZhbHVlICsgJycucmVwbGFjZSgvbnVsbHxOYU58dW5kZWZpbmVkfCwvaWcsICcnKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdlbmVyYXRlQ29sdW1uc0FsbE1hcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2VuZXJhdGVDb2x1bW5zQWxsTWFwKGNvbHVtbnMpIHsKICAgICAgdmFyIG9iaiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogewogICAgICAgIC8vIOeUn+aIkOWvvOWFpXZpZXfmmKDlsITmlbDmja4KICAgICAgICB0YWJsZUNvbHVtbnNGaWVsZE1hcDoge30sCiAgICAgICAgdGFibGVDb2x1bW5zVGl0bGVGaWVsZE1hcDoge30sCiAgICAgICAgdmlld1RvU291cmNlTWFwOiB7fSwKICAgICAgICBjb2x1bW5zTGlzdDogW10sCiAgICAgICAgY29sRm9ybXVsYUNvbmZpZzoge30sCiAgICAgICAgcm93c09ialRlbXA6IHt9LAogICAgICAgIHRhYmxlQ29sdW1uc1RpdGxlTWFwOiB7fQogICAgICB9OwogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIGNvbHVtbnMuZm9yRWFjaChmdW5jdGlvbiAoY29ubHVtLCBpbmRleCkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbmx1bS5jaGlsZHJlbikgJiYgY29ubHVtLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgICAgc2VsZi5nZW5lcmF0ZUNvbHVtbnNBbGxNYXAoY29ubHVtLmNoaWxkcmVuLCBvYmopOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvYmouY29sdW1uc0xpc3QucHVzaChjb25sdW0pOwogICAgICAgICAgaWYgKGNvbmx1bS5mb3JtdWxhKSB7CiAgICAgICAgICAgIG9iai5jb2xGb3JtdWxhQ29uZmlnW2Nvbmx1bS5maWVsZF0gPSBjb25sdW0uZm9ybXVsYTsKICAgICAgICAgICAgb2JqLnRhYmxlQ29sdW1uc1RpdGxlTWFwW2Nvbmx1bS50aXRsZV0gPSBjb25sdW07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoY29ubHVtLmZpZWxkKSB7CiAgICAgICAgICAgIG9iai5yb3dzT2JqVGVtcFtjb25sdW0uZmllbGRdID0gJyc7CiAgICAgICAgICAgIHZhciBtYXAgPSB7CiAgICAgICAgICAgICAgbmVlZE1hcDogdHJ1ZSwKICAgICAgICAgICAgICBvcHRpb25zOiBbXSwKICAgICAgICAgICAgICBtdWx0aXBsZTogZmFsc2UsCiAgICAgICAgICAgICAgZm9ybXVsYTogY29ubHVtLmZvcm11bGEKICAgICAgICAgICAgfTsKICAgICAgICAgICAgb2JqLnRhYmxlQ29sdW1uc0ZpZWxkTWFwW2Nvbmx1bS5maWVsZF0gPSBjb25sdW07CiAgICAgICAgICAgIG9iai50YWJsZUNvbHVtbnNUaXRsZUZpZWxkTWFwW2Nvbmx1bS50aXRsZV0gPSBjb25sdW0uZmllbGQ7CiAgICAgICAgICAgIHZhciBpdGVtUmVuZGVyID0gY29ubHVtLmNlbGxSZW5kZXIgfHwgY29ubHVtLmVkaXRSZW5kZXIgfHwgY29ubHVtLmNvbnRlbnRSZW5kZXI7CiAgICAgICAgICAgIGlmIChpdGVtUmVuZGVyKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChpdGVtUmVuZGVyLm5hbWUpIHsKICAgICAgICAgICAgICAgIGNhc2UgJyR2eGVTZWxlY3QnOgogICAgICAgICAgICAgICAgICBpZiAoaXRlbVJlbmRlci5wcm9wcyAmJiBpdGVtUmVuZGVyLnByb3BzLm11bHRpcGxlKSB7CiAgICAgICAgICAgICAgICAgICAgbWFwID0gT2JqZWN0LmFzc2lnbih7fSwgbWFwLCB7CiAgICAgICAgICAgICAgICAgICAgICBuZWVkTWFwOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbVJlbmRlci5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogQXJyYXkuaXNBcnJheShpdGVtUmVuZGVyLm9wdGlvbnMpID8gaXRlbVJlbmRlci5vcHRpb25zIDogW10sCiAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZTogdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG1hcCA9IE9iamVjdC5hc3NpZ24oe30sIG1hcCwgewogICAgICAgICAgICAgICAgICAgICAgbmVlZE1hcDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW1SZW5kZXIubmFtZSwKICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IEFycmF5LmlzQXJyYXkoaXRlbVJlbmRlci5vcHRpb25zKSA/IGl0ZW1SZW5kZXIub3B0aW9ucyA6IFtdLAogICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGU6IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICckdnhlUmFkaW8nOgogICAgICAgICAgICAgICAgICBtYXAgPSBPYmplY3QuYXNzaWduKHt9LCBtYXAsIHsKICAgICAgICAgICAgICAgICAgICBuZWVkTWFwOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW1SZW5kZXIubmFtZSwKICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5pc0FycmF5KGl0ZW1SZW5kZXIub3B0aW9ucykgPyBpdGVtUmVuZGVyLm9wdGlvbnMgOiBbXSwKICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZTogZmFsc2UKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnJHZ4ZUNoZWNrYm94JzoKICAgICAgICAgICAgICAgICAgbWFwID0gT2JqZWN0LmFzc2lnbih7fSwgbWFwLCB7CiAgICAgICAgICAgICAgICAgICAgbmVlZE1hcDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtUmVuZGVyLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogQXJyYXkuaXNBcnJheShpdGVtUmVuZGVyLm9wdGlvbnMpID8gaXRlbVJlbmRlci5vcHRpb25zIDogW10sCiAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGU6IHRydWUKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAnJHZ4ZVN3aXRjaCc6CiAgICAgICAgICAgICAgICAgIG1hcCA9IE9iamVjdC5hc3NpZ24oe30sIG1hcCwgewogICAgICAgICAgICAgICAgICAgIG5lZWRNYXA6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbVJlbmRlci5uYW1lLAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IEFycmF5LmlzQXJyYXkoaXRlbVJlbmRlci5vcHRpb25zKSA/IGl0ZW1SZW5kZXIub3B0aW9ucyA6IFtdLAogICAgICAgICAgICAgICAgICAgIG11bHRpcGxlOiBmYWxzZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICBtYXAgPSBPYmplY3QuYXNzaWduKHt9LCBtYXAsIHsKICAgICAgICAgICAgICAgICAgICBuZWVkTWFwOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtUmVuZGVyLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogQXJyYXkuaXNBcnJheShpdGVtUmVuZGVyLm9wdGlvbnMpID8gaXRlbVJlbmRlci5vcHRpb25zIDogW10sCiAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGU6IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbWFwID0gT2JqZWN0LmFzc2lnbih7fSwgbWFwLCB7CiAgICAgICAgICAgICAgICBuZWVkTWFwOiBmYWxzZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG9iai52aWV3VG9Tb3VyY2VNYXBbY29ubHVtLmZpZWxkXSA9IG1hcDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gb2JqOwogICAgfQogIH0sIHsKICAgIGtleTogInJlYWRXb3JrYm9va0Zyb21Mb2NhbEZpbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlYWRXb3JrYm9va0Zyb21Mb2NhbEZpbGUoZmlsZXMpIHsKICAgICAgLy8g6K+75Y+W5a+85YWl55qEZXhjZWzmlofku7bmlbDmja4KICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICBpZiAoIWZpbGVzLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgX2ZpbGVzJCA9IGZpbGVzWzBdLAogICAgICAgIG5hbWUgPSBfZmlsZXMkLm5hbWUsCiAgICAgICAgc2l6ZSA9IF9maWxlcyQuc2l6ZSwKICAgICAgICB0eXBlID0gX2ZpbGVzJC50eXBlOwogICAgICB2YXIgb25seVBhcnNpbmdGaXJzdFNoZWV0ID0gdGhpcy5jdXJJbXBvcnRHbG9ibGVDb25mLm9ubHlQYXJzaW5nRmlyc3RTaGVldDsKICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciBkYXRhID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgIHZhciB3b3JrYm9vayA9IHNlbGYuWGxzeFRvb2wucmVhZChkYXRhLCB7CiAgICAgICAgICB0eXBlOiAnYmluYXJ5JwogICAgICAgIH0pOwogICAgICAgIHNlbGYud29ya2Jvb2sgPSB3b3JrYm9vazsKICAgICAgICB2YXIgZXhjZWxEYXRhTWFwID0ge307CiAgICAgICAgdmFyIGV4Y2VsRGF0YUFycmF5ID0gW107CiAgICAgICAgdmFyIGZpcnN0U2hlZXREYXRhID0gW107CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAob25seVBhcnNpbmdGaXJzdFNoZWV0ID8gMSA6IHdvcmtib29rLlNoZWV0TmFtZXMubGVuZ3RoKTsgaSsrKSB7CiAgICAgICAgICAvLyDlpoLmnpzlpJrkuKpzaGhlZXQs6L+Z5Zyw5pa55Y+v5Lul6K6+572u5LiA5Liq5by55qGG5Y675aGr5YaZ6KGo5aS05Y2V5YWD5qC85L+h5oGvIOaIluiAhSDlj6/ku6Ug6KGo5qC856ys5LiA6KGM5oGS5a6a6YWN572u6KGo5aS06K+05piO5p2l6Kej5p6Q6K+05piO6I635Y+W6Kej5p6Q55qE5LiA5Lqb5b+F6aG75pWw5o2uCiAgICAgICAgICB2YXIgc2hlZXREYXRhID0gc2VsZi5nZW5lcmF0ZVRoZWFkQW5kVGJvZHkod29ya2Jvb2suU2hlZXRzW3dvcmtib29rLlNoZWV0TmFtZXNbaV1dKTsKICAgICAgICAgIHZhciBjdXJTaGVldERhdGEgPSB7CiAgICAgICAgICAgIHNoZWV0TmFtZTogd29ya2Jvb2suU2hlZXROYW1lc1tpXSwKICAgICAgICAgICAgZGF0YTogc2hlZXREYXRhCiAgICAgICAgICB9OwogICAgICAgICAgZXhjZWxEYXRhTWFwW3dvcmtib29rLlNoZWV0TmFtZXNbaV1dID0gY3VyU2hlZXREYXRhOwogICAgICAgICAgZXhjZWxEYXRhQXJyYXlbaV0gPSBjdXJTaGVldERhdGE7CiAgICAgICAgICBpZiAoaSA9PT0gMCkgewogICAgICAgICAgICBmaXJzdFNoZWV0RGF0YSA9IHNoZWV0RGF0YTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gZmlsZW5hbWUgIG5hbWUucmVwbGFjZSgvLnhsc3gkfC54bHMkLywnJykKICAgICAgICB2YXIgY3VySW1wb3J0RGF0YSA9IHsKICAgICAgICAgIGltcG9ydFV0aWw6IHNlbGYsCiAgICAgICAgICBjdXJJbXBvcnRDb25maWc6IHNlbGYuY3VySW1wb3J0R2xvYmxlQ29uZiwKICAgICAgICAgIGZpbGVuYW1lOiBuYW1lLAogICAgICAgICAgbmFtZTogbmFtZS5yZXBsYWNlKC8ueGxzeCR8LnhscyQvLCAnJyksCiAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgc2l6ZTogc2VsZi50cmFuc0J5dGVUb1NpemUoc2l6ZSksCiAgICAgICAgICBpbXBvcnQ6IHdvcmtib29rLAogICAgICAgICAgZXhjZWxEYXRhTWFwOiBleGNlbERhdGFNYXAsCiAgICAgICAgICBmaXJzdFNoZWV0RGF0YTogZmlyc3RTaGVldERhdGEsCiAgICAgICAgICBleGNlbERhdGFBcnJheTogZXhjZWxEYXRhQXJyYXkKICAgICAgICB9OwogICAgICAgIHNlbGYuaW1wb3J0Y2FsbGJhY2soY3VySW1wb3J0RGF0YSk7CiAgICAgICAgc2VsZi5pbXBvcnRIaXN0b3J5LnB1c2goY3VySW1wb3J0RGF0YSk7CiAgICAgICAgc2VsZi5pbXBvcnRIaXN0b3J5ID0gc2VsZi5pbXBvcnRIaXN0b3J5LnJldmVyc2UoKS5zbGljZSgwLCAyMCkucmV2ZXJzZSgpOwogICAgICB9OwogICAgICByZWFkZXIucmVhZEFzQmluYXJ5U3RyaW5nKGZpbGVzWzBdKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEltcG9ydDsKfSgpOwpleHBvcnQgZGVmYXVsdCBuZXcgSW1wb3J0KCk7"},{"version":3,"names":["XlsxTool","Import","gloabelConfig","arguments","length","undefined","_classCallCheck","self","importGlobleConf","onlyParsingFirstSheet","maxSize","acceptType","theadRowIndexStart","theadRowIndexEnd","filename","fieldName","columnConfig","inputTag","document","createElement","setAttribute","addEventListener","e","files","target","readWorkbookFromLocalFile","importHistory","_createClass","key","value","importExcel","_ref","cb","config","configSource","curImportGlobleConf","Object","assign","importcallback","selectFile","workbook","click","getUuid","hexDigits","s","i","substr","Math","floor","random","uuid","join","smallHump","str","split","map","item","index","toLowerCase","replace","$1","$2","$3","toUpperCase","columnLabelToIndex","label","test","toLocaleUpperCase","Error","chars","charCodeAt","pow","getExcelColumnLabel","num","ordA","ordZ","len","result","String","fromCharCode","transByteToSize","unitArr","srcsize","parseFloat","log","size","toFixed","listToTreeByNestCodeLength","data","nestCodeKey","forEach","children","treeData","pnestCodeKey","slice","mapItem","push","getSheetEffectiveCellInfo","refArea","refAreaArr","sheetEffectiveCellInfo","startColLabel","endColLabel","startRowIndex","endRowIndex","colAreaLabel","startColIndex","endColIndex","getMergesInfo","merges","mergesMap","mergesCell","mergesToCell","refcellTo","c","r","refcell","generateTheadArr","sheetDataSource","_this$curImportGloble","_this$curImportGloble2","theadDefaultData","curSheetEffectiveCellInfo","_this$getMergesInfo","headMap","headAarryAll","headAarry","_iterator","_createForOfIteratorHelper","_step","n","done","collabel","cellitem","_objectSpread","title","v","err","f","generateThead","_this$generateTheadAr","theadArrReault","col","colIndex","_typeof","pCellRef","generateTheadTreeTolist","level","pid","alltille","list","renderMapId","orderPNum","orderNum","padStart","columnLevel","Array","isArray","generateTheadLowestLevel","lowestLevelArr","LowestLevelMap","titleArr","curLowerstLevel","isparentrow","field","getField","toLocaleLowerCase","columnName","columntype","type","tableColumnsTitleFieldMap","columnsConfigMap","generateTheadAndTbody","_this","_this$curImportGloble3","columns","generateColumnsAllMap","theadResult","_this$generateTheadLo","tbodyResult","_loop","rowIndex","row","column","columnIndex","parseExceldata","theadLevel","tbody","tbodyNest","theadNest","theadList","theadSing","sourceData","columnsMap","tbodySource","transTbodyToSource","viewToSourceMap","columnsConfigList","columnsList","rowsObjTemp","columnsConfigTitleFielMap","_ref2","newRow","reverseParseViewDataTosource","_ref3","needMap","transValue","viewValue","multiple","viewToSourceValueArr","options","indexOf","obj","tableColumnsFieldMap","colFormulaConfig","tableColumnsTitleMap","conlum","formula","itemRender","cellRender","editRender","contentRender","name","props","_files$","reader","FileReader","onload","read","excelDataMap","excelDataArray","firstSheetData","SheetNames","sheetData","Sheets","curSheetData","sheetName","curImportData","importUtil","curImportConfig","import","reverse","readAsBinaryString"],"sources":["C:/Users/何小龙/Desktop/platformweb-fb/src/components/functionalComponent/import/importTable/importTableUtil.js"],"sourcesContent":["\r\n/* eslint-disable no-useless-constructor */\r\n/*\r\n * describe:  基于xlsx的导入表体实现，支持解析嵌套表头\r\n * @Date:   2021-08-17\r\n * Author: Titans@2396757591@qq.com\r\n * @Last Modified time: 2021-08-17\r\n */\r\n// import { columns, datas } from './testData.js'\r\nimport XlsxTool from 'xlsx'\r\nclass Import {\r\n  constructor(gloabelConfig = {}) {\r\n    let self = this\r\n    this.XlsxTool = XlsxTool\r\n    this.importGlobleConf = {\r\n      onlyParsingFirstSheet: true,\r\n      maxSize: 1024 * 1024 * 10,\r\n      acceptType: 'xlsx',\r\n      theadRowIndexStart: 1,\r\n      theadRowIndexEnd: 1,\r\n      filename: '',\r\n      fieldName: 'field',\r\n      columnConfig: []\r\n    }\r\n    this.inputTag = document.createElement('input')\r\n    this.inputTag.setAttribute('type', 'file')\r\n    this.inputTag.setAttribute('accept', '.xlsx,.xls')\r\n    this.inputTag.setAttribute('multiple', false)\r\n    this.inputTag.addEventListener('change', function (e) {\r\n      const files = e.target.files\r\n      self.readWorkbookFromLocalFile(files)\r\n    })\r\n    this.importHistory = [] // 导入历史记录\r\n  }\r\n  importExcel({ config }, cb) { // 触发导入Excel动作\r\n    this.configSource = config\r\n    this.curImportGlobleConf = Object.assign({}, this.importGlobleConf, config)\r\n    this.importcallback = cb\r\n    this.selectFile(cb)\r\n  }\r\n  selectFile() { // 触发选取文件操作\r\n    this.workbook = {}\r\n    this.inputTag.value = null\r\n    this.inputTag.click()\r\n  }\r\n  getUuid(hexDigits = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz') { // 获取mapid\r\n    let s = []\r\n    for (let i = 0; i < 36; i++) {\r\n      s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1)\r\n    }\r\n    s[14] = '4'\r\n    s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1)\r\n    s[8] = s[13] = s[18] = s[23] = ''\r\n    let uuid = s.join('')\r\n    return uuid\r\n  }\r\n  smallHump(str) {\r\n    // 连字符转成小驼峰\r\n    return str.split('_').map((item, index) => {\r\n      return index === 0 ? item.toLowerCase() : item.toLowerCase().replace(/^[a-z]{1,1}/, ($1, $2, $3) => {\r\n        return $1.toUpperCase()\r\n      })\r\n    }).join('')\r\n  }\r\n  columnLabelToIndex(label) { // 获取列字母索引转化为数字索引\r\n    if (!/[A-Z]+/.test(label.toLocaleUpperCase())) {\r\n      throw new Error('Invalid parameter,Expect a String<Alphabetic>!')\r\n    }\r\n    let index = 0\r\n    let chars = label.toLocaleUpperCase().split('')\r\n    for (let i = 0; i < chars.length; i++) {\r\n      index += (chars[i].charCodeAt() - 'A'.charCodeAt() + 1) * Math.pow(26, chars.length - i - 1)\r\n    }\r\n    return index - 1\r\n  }\r\n  getExcelColumnLabel(num) { // 获取索引获取列字母\r\n    // 方法一 高效\r\n    if (!/[0-9]+/.test(num)) {\r\n      throw new Error('Invalid parameter,Expect a Number!')\r\n    }\r\n    let ordA = 'A'.charCodeAt(0)\r\n    let ordZ = 'Z'.charCodeAt(0)\r\n    let len = ordZ - ordA + 1\r\n    let result = ''\r\n    while (num >= 0) {\r\n      result = String.fromCharCode(num % len + ordA) + result\r\n      num = Math.floor(num / len) - 1\r\n    }\r\n    return result\r\n    // 方法二 低效\r\n    /*\r\n        let temp = ''\r\n        let i = Math.floor(Math.log(25.0 * (num) / 26.0 + 1) / Math.log(26)) + 1\r\n        if (i > 1) {\r\n          let sub = num - 26 * (Math.pow(26, i - 1) - 1) / 25\r\n          for (let j = i; j > 0; j--) {\r\n            temp = temp + String.fromCharCode(sub / Math.pow(26, j - 1) + 65)\r\n            sub = sub % Math.pow(26, j - 1)\r\n          }\r\n        } else {\r\n          temp = temp + String.fromCharCode(num + 65)\r\n        }\r\n        return temp\r\n    */\r\n  }\r\n  transByteToSize(value) { // 换算文件大小\r\n    if (value == null || value === '') {\r\n      return '0 Bytes'\r\n    }\r\n    let unitArr = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\r\n    let index = 0\r\n    let srcsize = parseFloat(value)\r\n    index = Math.floor(Math.log(srcsize) / Math.log(1024))\r\n    let size = srcsize / Math.pow(1024, index)\r\n    //  保留的小数位数\r\n    size = size.toFixed(2)\r\n    return size + unitArr[index]\r\n  }\r\n  listToTreeByNestCodeLength(data, nestCodeKey) { // 根据nestCodeKey 长度 生成嵌套数据\r\n    let map = {} // 构建map\r\n    data.forEach(function (item) {\r\n      map[item[nestCodeKey]] = item\r\n      item.children = []\r\n    })\r\n    let treeData = []\r\n    data.forEach(item => {\r\n      let pnestCodeKey = String(item[nestCodeKey])\r\n      pnestCodeKey = pnestCodeKey.slice(0, pnestCodeKey.length - 1)\r\n      let mapItem = map[item[pnestCodeKey]]\r\n      while (!mapItem && pnestCodeKey !== '') {\r\n        pnestCodeKey = pnestCodeKey.slice(0, pnestCodeKey.length - 1)\r\n        mapItem = map[pnestCodeKey]\r\n      }\r\n      if (mapItem) {\r\n        item['item__pcode'] = String(mapItem[nestCodeKey])\r\n        item['item__pNestCode'] = String(mapItem['item__pNestCode'] ? mapItem['item__pNestCode'] + '_' + item[nestCodeKey] : item[nestCodeKey])\r\n        item['item__level'] = item['item__pNestCode'].split('-').length;\r\n        (mapItem.children || (mapItem.children = [])).push(item)\r\n      } else {\r\n        treeData.push(item)\r\n      }\r\n    })\r\n    return treeData\r\n  }\r\n  getSheetEffectiveCellInfo(refArea) { // 获取有效区域单元格信息 // 'A1:H1415'\r\n    let refAreaArr = refArea.toLocaleUpperCase().split(':')\r\n    let sheetEffectiveCellInfo = {\r\n      startColLabel: refAreaArr[0].replace(/[0-9]/ig, ''),\r\n      endColLabel: refAreaArr[1].replace(/[0-9]/ig, ''),\r\n      startRowIndex: refAreaArr[0].replace(/[A-Z]/ig, ''),\r\n      endRowIndex: refAreaArr[1].replace(/[A-Z]/ig, ''),\r\n      colAreaLabel: []\r\n    }\r\n    sheetEffectiveCellInfo.startColIndex = this.columnLabelToIndex(sheetEffectiveCellInfo.startColLabel)\r\n    sheetEffectiveCellInfo.endColIndex = this.columnLabelToIndex(sheetEffectiveCellInfo.endColLabel)\r\n    for (let i = sheetEffectiveCellInfo.startColIndex; i <= sheetEffectiveCellInfo.endColIndex; i++) {\r\n      sheetEffectiveCellInfo.colAreaLabel.push(this.getExcelColumnLabel(i))\r\n    }\r\n    return sheetEffectiveCellInfo\r\n  }\r\n  getMergesInfo(merges) { // 生成单元格合并映射\r\n    let self = this\r\n    let mergesMap = {\r\n      mergesCell: {},\r\n      mergesToCell: {}\r\n    }\r\n    merges && merges.forEach((item, index) => {\r\n      let refcellTo = self.getExcelColumnLabel(item.s.c) + (+item.s.r + 1)\r\n      mergesMap.mergesCell[refcellTo] = {\r\n        refcell: refcellTo,\r\n        startColLabel: self.getExcelColumnLabel(item.s.c),\r\n        endColLabel: self.getExcelColumnLabel(item.e.c),\r\n        startColIndex: item.s.c,\r\n        endColIndex: item.e.c,\r\n        startRowIndex: +item.s.r + 1,\r\n        endRowIndex: +item.s.r + 1\r\n      }\r\n      for (let r = item.s.r; r <= item.e.r; r++) {\r\n        for (let c = item.s.c; c <= item.e.c; c++) {\r\n          let refcell = self.getExcelColumnLabel(c) + (+r + 1)\r\n          mergesMap.mergesToCell[refcell] = refcellTo\r\n        }\r\n      }\r\n    })\r\n    return mergesMap\r\n  }\r\n  generateTheadArr(sheetDataSource) { // 根据已有数据和单元格合并映射 生成完整表头Array\r\n    let { theadRowIndexStart, theadRowIndexEnd, theadDefaultData = {} } = this.curImportGlobleConf\r\n    theadRowIndexEnd = theadRowIndexEnd > theadRowIndexStart ? +theadRowIndexEnd + 1 : +theadRowIndexStart + 1\r\n    let { colAreaLabel } = this.curSheetEffectiveCellInfo\r\n    let { mergesToCell } = this.getMergesInfo(sheetDataSource['!merges'])\r\n    let headMap = {}\r\n    let headAarryAll = []\r\n    for (let i = theadRowIndexStart; i < theadRowIndexEnd; i++) {\r\n      let headAarry = []\r\n      for (let collabel of colAreaLabel) {\r\n        if (sheetDataSource[collabel + i]) {\r\n          let cellitem = {\r\n            // rowIndex: i,\r\n            ...theadDefaultData,\r\n            collabel: collabel,\r\n            //  mergesInfo: mergesCell[collabel + i],\r\n            title: sheetDataSource[collabel + i].v\r\n          }\r\n          headAarry.push(cellitem)\r\n          headMap[collabel + i] = cellitem\r\n        } else {\r\n          let cellitem = mergesToCell[collabel + i]\r\n          headAarry.push(cellitem)\r\n          headMap[collabel + i] = cellitem\r\n        }\r\n      }\r\n      headAarryAll.push(headAarry)\r\n    }\r\n    return { headAarryAll, headMap }\r\n  }\r\n  generateThead(sheetDataSource) { // 根据表头完整数据和单元格合并映射生成嵌套表头\r\n    let { headAarryAll, headMap } = this.generateTheadArr(sheetDataSource)\r\n    let { theadRowIndexStart } = this.curImportGlobleConf\r\n    let theadArrReault = []\r\n    headAarryAll.forEach((item, index) => {\r\n      item.forEach((col, colIndex) => {\r\n        if (index === 0) {\r\n          if (typeof col === 'object') {\r\n            theadArrReault.push(col)\r\n          }\r\n        } else {\r\n          if (typeof col === 'object') {\r\n            let pCellRef = headMap[col.collabel + (+index + theadRowIndexStart - 1)]\r\n            if (typeof pCellRef === 'object') {\r\n              (pCellRef.children || (pCellRef.children = [])).push(col) // 这里判断mapItem中是否存在child\r\n            } else {\r\n              while (typeof pCellRef !== 'object') {\r\n                pCellRef = headMap[pCellRef]\r\n              }\r\n              (pCellRef.children || (pCellRef.children = [])).push(col) // 这里判断mapItem中是否存在child\r\n            }\r\n          }\r\n        }\r\n      })\r\n    })\r\n    return theadArrReault\r\n  }\r\n  generateTheadTreeTolist(data, level = 1, pid = '', alltille, list = []) { // 嵌套head转换成平行数据并生成id和pid\r\n    let self = this\r\n    data.forEach((item, index) => {\r\n      item.renderMapId = self.getUuid()\r\n      item.orderPNum = pid\r\n      item.orderNum = pid + String(index).padStart(4, '0')\r\n      item.columnLevel = level\r\n      item.alltille = alltille ? alltille + '-' + item.title : item.title\r\n      list.push(item)\r\n      if (Array.isArray(item.children) && item.children.length) {\r\n        self.generateTheadTreeTolist(item.children, level + 1, item.orderNum, item.alltille, list)\r\n      }\r\n    })\r\n    return list\r\n  }\r\n  generateTheadLowestLevel(data, map = { lowestLevelArr: [], LowestLevelMap: {} }) { // 根据嵌套表头生成数据低级映射，用来处理解析表体\r\n    let self = this\r\n    data.forEach((item, index) => {\r\n      let titleArr = item.title.split('::')\r\n      if ((Array.isArray(item.children) && !item.children.length) || !Array.isArray(item.children)) {\r\n        let curLowerstLevel = Object.assign(item, {\r\n          title: titleArr[0].replace('(元)', ''),\r\n          isparentrow: false,\r\n          field: self.getField(self.smallHump(titleArr[1] || ('f' + (map.lowestLevelArr.length + '').padStart(3, '0')).toLocaleLowerCase()), titleArr[0]),\r\n          columnName: titleArr[1] || ('f' + (map.lowestLevelArr.length + '').padStart(3, '0')).toLocaleLowerCase(),\r\n          columntype: 1,\r\n          type: titleArr[2] || '$vxeInput' // 新全局下拉树: $vxeTree，文本数字输入: $vxeInput，下拉选择: $vxeSelect，计算渲染器: $vxeCalculate，金额输入: $vxeMoney，下拉文本框: $vxeEditDownTextarea，天数: $vxeDays，时间日期: $vxeTime，单选: $vxeRadio，多选: $vxeCheckbox，间隔时间或数值选择输入渲染器: $vxeIntervar，开关: $vxeSwitch，进度条: vxeProgress。其中，条件渲染器，进度条\r\n        })\r\n        map.lowestLevelArr.push(curLowerstLevel)\r\n        map.LowestLevelMap[curLowerstLevel.collabel] = curLowerstLevel\r\n      } else {\r\n        Object.assign(item, {\r\n          title: titleArr[0].replace('(元)', ''),\r\n          field: self.getField(self.smallHump(titleArr[1] || '')),\r\n          columnName: titleArr[1] || '',\r\n          isparentrow: true,\r\n          columntype: 1,\r\n          type: '' // 新全局下拉树: $vxeTree，文本数字输入: $vxeInput，下拉选择: $vxeSelect，计算渲染器: $vxeCalculate，金额输入: $vxeMoney，下拉文本框: $vxeEditDownTextarea，天数: $vxeDays，时间日期: $vxeTime，单选: $vxeRadio，多选: $vxeCheckbox，间隔时间或数值选择输入渲染器: $vxeIntervar，开关: $vxeSwitch，进度条: vxeProgress。其中，条件渲染器，进度条\r\n        })\r\n        self.generateTheadLowestLevel(item.children, map)\r\n      }\r\n    })\r\n    return map\r\n  }\r\n  getField(field, title) {\r\n    let { tableColumnsTitleFieldMap } = this.columnsConfigMap\r\n    if (tableColumnsTitleFieldMap[String(title).replace(/\\(元\\)|\\(万元\\)|undefined/ig, '')]) {\r\n      return tableColumnsTitleFieldMap[String(title).replace(/\\(元\\)|\\(万元\\)|undefined/ig, '')]\r\n    } else {\r\n      return field\r\n    }\r\n  }\r\n  generateTheadAndTbody(sheetDataSource) { // 生成表头(嵌套表头和单表头)和表体\r\n    let { theadRowIndexEnd, theadRowIndexStart, columns } = this.curImportGlobleConf\r\n    this.curSheetEffectiveCellInfo = this.getSheetEffectiveCellInfo(sheetDataSource['!ref'])\r\n    this.columnsConfigMap = this.generateColumnsAllMap(Array.isArray(columns) ? columns : [])\r\n    let theadResult = this.generateThead(sheetDataSource)\r\n    let { lowestLevelArr } = this.generateTheadLowestLevel(theadResult)\r\n    let { endRowIndex } = this.curSheetEffectiveCellInfo\r\n    let tbodyResult = []\r\n    if (+endRowIndex > +theadRowIndexEnd) {\r\n      for (let rowIndex = +theadRowIndexEnd + 1; rowIndex <= endRowIndex; rowIndex++) {\r\n        let row = {}\r\n        lowestLevelArr.forEach((column, columnIndex) => {\r\n          row[column[this.curImportGlobleConf.fieldName || 'field']] = sheetDataSource[column.collabel + rowIndex] ? String(sheetDataSource[column.collabel + rowIndex].v).replace(/null|NaN|undefined|,/ig, '') : ''\r\n        })\r\n        tbodyResult.push(row)\r\n      }\r\n    }\r\n    let parseExceldata = {\r\n      theadLevel: theadRowIndexEnd - theadRowIndexStart + 1,\r\n      tbody: tbodyResult,\r\n      tbodyNest: this.listToTreeByNestCodeLength(tbodyResult, lowestLevelArr[0].field),\r\n      theadNest: theadResult,\r\n      theadList: this.generateTheadTreeTolist(theadResult),\r\n      theadSing: lowestLevelArr,\r\n      sheetEffectiveCellInfo: this.curSheetEffectiveCellInfo,\r\n      sheetDataSource: sheetDataSource\r\n    }\r\n    let sourceData = {\r\n\r\n    }\r\n    if (Array.isArray(columns) && columns.length) {\r\n      let columnsMap = this.columnsConfigMap\r\n      sourceData.tbodySource = this.transTbodyToSource(\r\n        {\r\n          tbody: parseExceldata.tbody,\r\n          viewToSourceMap: columnsMap.viewToSourceMap,\r\n          columnsConfigList: columnsMap.columnsList,\r\n          rowsObjTemp: columnsMap.rowsObjTemp,\r\n          columnsConfigTitleFielMap: columnsMap.tableColumnsTitleFieldMap\r\n        }\r\n      )\r\n    }\r\n    return Object.assign(parseExceldata, sourceData)\r\n  }\r\n  transTbodyToSource({ tbody, columnsConfigList, viewToSourceMap, rowsObjTemp }) {\r\n    let self = this\r\n    return tbody.map((row, rowIndex) => {\r\n      let newRow = {}\r\n      columnsConfigList.map((column, columnIndex) => {\r\n        self.reverseParseViewDataTosource({ row, column, viewToSourceMap }, newRow)\r\n        // newRow[column.field] = row[dataTitleFieldMapMap[column.title]]\r\n      })\r\n      return newRow\r\n    })\r\n  }\r\n  reverseParseViewDataTosource({ row, column, viewToSourceMap }, newRow) {\r\n    // 处理单个 导入数据\r\n    //  needMap: true,\r\n    //  name: itemRender.name,\r\n    //  options: Array.isArray(itemRender.options) ? itemRender.options : [],\r\n    //  multiple: true,\r\n    //  formula: conlum.formula\r\n    let value = row[column.field]\r\n    if (viewToSourceMap && viewToSourceMap.needMap) {\r\n      let transValue = ''\r\n      let viewValue = typeof (value) === 'string' ? value : ''\r\n      if (viewToSourceMap.multiple) {\r\n        if (viewValue.length) {\r\n          let viewToSourceValueArr = []\r\n          viewToSourceMap.options.forEach((item, index) => {\r\n            if (viewValue.indexOf(item.label) >= 0) {\r\n              viewToSourceValueArr.push(item.value)\r\n            }\r\n          })\r\n          transValue = viewToSourceValueArr.join(',')\r\n        } else {\r\n          transValue = ''\r\n        }\r\n      } else {\r\n        viewToSourceMap.options.forEach((item, index) => {\r\n          if (viewValue.indexOf(item.label) >= 0) {\r\n            transValue = item.value\r\n          }\r\n        })\r\n      }\r\n      newRow[column.field] = transValue\r\n    } else {\r\n      newRow[column.field] = value + ''.replace(/null|NaN|undefined|,/ig, '')\r\n    }\r\n  }\r\n  generateColumnsAllMap(columns, obj = { // 生成导入view映射数据\r\n    tableColumnsFieldMap: {},\r\n    tableColumnsTitleFieldMap: {},\r\n    viewToSourceMap: {},\r\n    columnsList: [],\r\n    colFormulaConfig: {},\r\n    rowsObjTemp: {},\r\n    tableColumnsTitleMap: {}\r\n  }) {\r\n    let self = this\r\n    columns.forEach((conlum, index) => {\r\n      if (Array.isArray(conlum.children) && conlum.children.length) {\r\n        self.generateColumnsAllMap(conlum.children, obj)\r\n      } else {\r\n        obj.columnsList.push(conlum)\r\n        if (conlum.formula) {\r\n          obj.colFormulaConfig[conlum.field] = conlum.formula\r\n          obj.tableColumnsTitleMap[conlum.title] = conlum\r\n        }\r\n        if (conlum.field) {\r\n          obj.rowsObjTemp[conlum.field] = ''\r\n          let map = {\r\n            needMap: true,\r\n            options: [],\r\n            multiple: false,\r\n            formula: conlum.formula\r\n          }\r\n          obj.tableColumnsFieldMap[conlum.field] = conlum\r\n          obj.tableColumnsTitleFieldMap[conlum.title] = conlum.field\r\n          let itemRender = conlum.cellRender || conlum.editRender || conlum.contentRender\r\n          if (itemRender) {\r\n            switch (itemRender.name) {\r\n              case '$vxeSelect':\r\n                if (itemRender.props && itemRender.props.multiple) {\r\n                  map = Object.assign({}, map, {\r\n                    needMap: true,\r\n                    name: itemRender.name,\r\n                    options: Array.isArray(itemRender.options) ? itemRender.options : [],\r\n                    multiple: true\r\n                  })\r\n                } else {\r\n                  map = Object.assign({}, map, {\r\n                    needMap: true,\r\n                    name: itemRender.name,\r\n                    options: Array.isArray(itemRender.options) ? itemRender.options : [],\r\n                    multiple: false\r\n                  })\r\n                }\r\n                break\r\n              case '$vxeRadio':\r\n                map = Object.assign({}, map, {\r\n                  needMap: true,\r\n                  name: itemRender.name,\r\n                  options: Array.isArray(itemRender.options) ? itemRender.options : [],\r\n                  multiple: false\r\n                })\r\n                break\r\n              case '$vxeCheckbox':\r\n                map = Object.assign({}, map, {\r\n                  needMap: true,\r\n                  name: itemRender.name,\r\n                  options: Array.isArray(itemRender.options) ? itemRender.options : [],\r\n                  multiple: true\r\n                })\r\n                break\r\n              case '$vxeSwitch':\r\n                map = Object.assign({}, map, {\r\n                  needMap: true,\r\n                  name: itemRender.name,\r\n                  options: Array.isArray(itemRender.options) ? itemRender.options : [],\r\n                  multiple: false\r\n                })\r\n                break\r\n              default:\r\n                map = Object.assign({}, map, {\r\n                  needMap: false,\r\n                  name: itemRender.name,\r\n                  options: Array.isArray(itemRender.options) ? itemRender.options : [],\r\n                  multiple: false\r\n                })\r\n                break\r\n            }\r\n          } else {\r\n            map = Object.assign({}, map, {\r\n              needMap: false\r\n            })\r\n          }\r\n          obj.viewToSourceMap[conlum.field] = map\r\n        }\r\n      }\r\n    })\r\n    return obj\r\n  }\r\n  readWorkbookFromLocalFile(files) { // 读取导入的excel文件数据\r\n    let self = this\r\n    if (!files.length) {\r\n      return\r\n    }\r\n    let { name, size, type } = files[0]\r\n    let { onlyParsingFirstSheet } = this.curImportGlobleConf\r\n    let reader = new FileReader()\r\n    reader.onload = function (e) {\r\n      let data = e.target.result\r\n      let workbook = self.XlsxTool.read(data, { type: 'binary' })\r\n      self.workbook = workbook\r\n      let excelDataMap = {}\r\n      let excelDataArray = []\r\n      let firstSheetData = []\r\n      for (let i = 0; i < (onlyParsingFirstSheet ? 1 : workbook.SheetNames.length); i++) {\r\n        // 如果多个shheet,这地方可以设置一个弹框去填写表头单元格信息 或者 可以 表格第一行恒定配置表头说明来解析说明获取解析的一些必须数据\r\n        let sheetData = self.generateTheadAndTbody(workbook.Sheets[workbook.SheetNames[i]])\r\n        let curSheetData = {\r\n          sheetName: workbook.SheetNames[i],\r\n          data: sheetData\r\n        }\r\n        excelDataMap[workbook.SheetNames[i]] = curSheetData\r\n        excelDataArray[i] = curSheetData\r\n        if (i === 0) {\r\n          firstSheetData = sheetData\r\n        }\r\n      }\r\n      // filename  name.replace(/.xlsx$|.xls$/,'')\r\n      let curImportData = { importUtil: self, curImportConfig: self.curImportGlobleConf, filename: name, name: name.replace(/.xlsx$|.xls$/, ''), type: type, size: self.transByteToSize(size), import: workbook, excelDataMap, firstSheetData, excelDataArray }\r\n      self.importcallback(curImportData)\r\n      self.importHistory.push(curImportData)\r\n      self.importHistory = self.importHistory.reverse().slice(0, 20).reverse()\r\n    }\r\n    reader.readAsBinaryString(files[0])\r\n  }\r\n}\r\n\r\nexport default new Import()\r\n"],"mappings":"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"}]}