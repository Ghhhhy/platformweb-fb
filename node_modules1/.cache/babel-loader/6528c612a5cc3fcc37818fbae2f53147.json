{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\@bszx\\boss-ui\\packages\\Table\\src\\config\\render\\publicRender.js","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\@bszx\\boss-ui\\packages\\Table\\src\\config\\render\\publicRender.js","mtime":1693279677000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\babel.config.js","mtime":1694505520209},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9tZXJnZUpTWFByb3BzIGZyb20gIkB2dWUvYmFiZWwtaGVscGVyLXZ1ZS1qc3gtbWVyZ2UtcHJvcHMiOwpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IHJldHVybiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5KGFycikgfHwgX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KGFycikgfHwgX25vbkl0ZXJhYmxlU3ByZWFkKCk7IH0KZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfQpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIGl0ZXJbU3ltYm9sLml0ZXJhdG9yXSAhPSBudWxsIHx8IGl0ZXJbIkBAaXRlcmF0b3IiXSAhPSBudWxsKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfQpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07IHJldHVybiBhcnIyOyB9CmZ1bmN0aW9uIF90eXBlb2YobykgeyAiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2YiOyByZXR1cm4gX3R5cGVvZiA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAic3ltYm9sIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG8pIHsgcmV0dXJuIHR5cGVvZiBvOyB9IDogZnVuY3Rpb24gKG8pIHsgcmV0dXJuIG8gJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG8uY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2YgbzsgfSwgX3R5cGVvZihvKTsgfQpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGtleSA9IF90b1Byb3BlcnR5S2V5KGtleSk7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQpmdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleShhcmcpIHsgdmFyIGtleSA9IF90b1ByaW1pdGl2ZShhcmcsICJzdHJpbmciKTsgcmV0dXJuIF90eXBlb2Yoa2V5KSA9PT0gInN5bWJvbCIgPyBrZXkgOiBTdHJpbmcoa2V5KTsgfQpmdW5jdGlvbiBfdG9QcmltaXRpdmUoaW5wdXQsIGhpbnQpIHsgaWYgKF90eXBlb2YoaW5wdXQpICE9PSAib2JqZWN0IiB8fCBpbnB1dCA9PT0gbnVsbCkgcmV0dXJuIGlucHV0OyB2YXIgcHJpbSA9IGlucHV0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmIChwcmltICE9PSB1bmRlZmluZWQpIHsgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCAiZGVmYXVsdCIpOyBpZiAoX3R5cGVvZihyZXMpICE9PSAib2JqZWN0IikgcmV0dXJuIHJlczsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS4iKTsgfSByZXR1cm4gKGhpbnQgPT09ICJzdHJpbmciID8gU3RyaW5nIDogTnVtYmVyKShpbnB1dCk7IH0KLyoKICogQEF1dGhvcjog6L276K+tCiAqIEBEYXRlOiAyMDIxLTExLTA4IDE0OjQ0OjU4CiAqIEBMYXN0RWRpdG9yczogQ29tZXIKICogQExhc3RFZGl0VGltZTogMjAyMy0wMy0zMSAxMTozNTowMAogKiBARGVzY3JpcHRpb246CiAqLwovKiBlc2xpbnQtZGlzYWJsZSBuby1ldmFsICovCmltcG9ydCB7IGZpbHRlclR5cGVNYXAgfSBmcm9tICcuLi90YWJsZURlZmF1bHRDb25maWcnOwoKLy8g6KGo5qC85bqf5byD5Y6f5riy5p+T5ZCM5pe26K6h566X5pS55Li66K6h566X5ZCO5riy5p+T77yMZm9ybeS7jeeEtumHh+eUqOa4suafk+WunuaXtuiuoeeul+OAggp2YXIgZGVmYXVsdEdsb2JhbFV0aWxzID0gewogIGNhbGN1bGF0ZVJlbmRlcjogZnVuY3Rpb24gY2FsY3VsYXRlUmVuZGVyKGgsIF9yZWYsIF9yZWYyLCBjb250ZXh0KSB7CiAgICB2YXIgcHJvcHMgPSBfcmVmLnByb3BzLAogICAgICBuYW1lID0gX3JlZi5uYW1lOwogICAgdmFyICRjb2x1bW5JbmRleCA9IF9yZWYyLiRjb2x1bW5JbmRleCwKICAgICAgJHJvd0luZGV4ID0gX3JlZjIuJHJvd0luZGV4LAogICAgICBpdGVtcyA9IF9yZWYyLml0ZW1zLAogICAgICBjb2x1bW4gPSBfcmVmMi5jb2x1bW4sCiAgICAgIGRhdGEgPSBfcmVmMi5kYXRhLAogICAgICByb3cgPSBfcmVmMi5yb3csCiAgICAgICRzZXEgPSBfcmVmMi4kc2VxLAogICAgICAkdGFibGUgPSBfcmVmMi4kdGFibGUsCiAgICAgICR0eXBlID0gX3JlZjIuJHR5cGUsCiAgICAgIGNvbHVtbkluZGV4ID0gX3JlZjIuY29sdW1uSW5kZXgsCiAgICAgIGlzRWRpdCA9IF9yZWYyLmlzRWRpdCwKICAgICAgbGV2ZWwgPSBfcmVmMi5sZXZlbCwKICAgICAgcm93SW5kZXggPSBfcmVmMi5yb3dJbmRleCwKICAgICAgc2VxID0gX3JlZjIuc2VxOwogICAgcHJvcHMgPSBwcm9wcyB8fCB7fTsKICAgIHZhciB2YWwgPSBpc05hTihwYXJzZUZsb2F0KHJvd1tjb2x1bW4ucHJvcGVydHldKSkgPyAnJyA6IHBhcnNlRmxvYXQocm93W2NvbHVtbi5wcm9wZXJ0eV0pOwogICAgaWYgKHZhbCAhPT0gJycpIHsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eV0gPSB2YWwudG9GaXhlZCgyKTsKICAgICAgaWYgKCFjb250ZXh0LiRncmlkLiRwYXJlbnQudG9vbGJhckNvbmZpZ0luQ29weS5tb25leUlucHV0U3dpY2ggfHwgY29udGV4dC4kZ3JpZC4kcGFyZW50LnRvb2xiYXJDb25maWdJbkNvcHkuZGlzYWJsZWRNb25leUNvbnZlcnNpb24pIHsKICAgICAgICB2YWwgPSBOdW1iZXIodmFsLnRvRml4ZWQoMikpLnRvTG9jYWxlU3RyaW5nKCk7CiAgICAgICAgdmFsID0gdmFsLnNwbGl0KCcuJykubGVuZ3RoID09PSAxID8gdmFsICsgJy4wMCcgOiB2YWwuc3BsaXQoJy4nKVsxXS5sZW5ndGggPT09IDEgPyB2YWwgKyAnMCcgOiB2YWw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIG1vbmV5VW5pdCA9IGNvbnRleHQuJGdyaWQuJHBhcmVudC5tb25leVVuaXQgPyBjb250ZXh0LiRncmlkLiRwYXJlbnQubW9uZXlVbml0IDogMTsKICAgICAgICB2YWwgPSBOdW1iZXIoKHZhbCAvIG1vbmV5VW5pdCkudG9GaXhlZCgyKSkudG9Mb2NhbGVTdHJpbmcoKTsKICAgICAgICB2YWwgPSB2YWwuc3BsaXQoJy4nKS5sZW5ndGggPT09IDEgPyB2YWwgKyAnLjAwJyA6IHZhbC5zcGxpdCgnLicpWzFdLmxlbmd0aCA9PT0gMSA/IHZhbCArICcwJyA6IHZhbDsKICAgICAgfQogICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXSA9IHZhbDsKICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJ0ZXh0IGJsb2NrIiwKICAgICAgICAicHJvcHMiOiBfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcykKICAgICAgfSwgW3ZhbF0pXTsKICAgIH0gZWxzZSB7CiAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddID0gJyc7CiAgICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgICAiY2xhc3MiOiAidGV4dCBibG9jayIsCiAgICAgICAgInByb3BzIjogX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpCiAgICAgIH0pXTsKICAgIH0KICB9LAogIGZvcm1DYWxjdWxhdGVSZW5kZXI6IGZ1bmN0aW9uIGZvcm1DYWxjdWxhdGVSZW5kZXIoaCwgcmVuZGVyT3B0cywgX3JlZjMsIGNvbnRleHQpIHsKICAgIHZhciBkYXRhID0gX3JlZjMuZGF0YSwKICAgICAgcHJvcGVydHkgPSBfcmVmMy5wcm9wZXJ0eSwKICAgICAgJGZvcm0gPSBfcmVmMy4kZm9ybTsKICAgIGZ1bmN0aW9uIGNhbGNsYXRlKGNvbHVtbnMsIGRhdGEsIGtleSkgewogICAgICBmdW5jdGlvbiByZXZlcihjb2x1bW5zKSB7CiAgICAgICAgY29sdW1ucy5zb21lKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT09IGtleSAmJiBuZXcgUmVnRXhwKCcoe1thLXpBLVowLTlfXSp9KScsICdpZycpLnRlc3QoaXRlbS5mb3JtdWxhKSkgewogICAgICAgICAgICBmb3JtdWxhSXRlbSA9IGl0ZW07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIWZvcm11bGFJdGVtICYmIEFycmF5LmlzQXJyYXkoaXRlbS5jaGlsZHJlbikgJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICAgICAgcmV2ZXIoaXRlbS5jaGlsZHJlbik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdmFyIGZvcm11bGFJdGVtID0gZmFsc2U7CiAgICAgIHJldmVyKGNvbHVtbnMpOwogICAgICBpZiAoZm9ybXVsYUl0ZW0pIHsKICAgICAgICB2YXIgZm9ybXVsYSA9IGZvcm11bGFJdGVtLmZvcm11bGE7CiAgICAgICAgZm9yICh2YXIga2V5QyBpbiBkYXRhKSB7CiAgICAgICAgICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgnKHsnICsga2V5QyArICd9KScsICdpZycpOwogICAgICAgICAgaWYgKHJlZy50ZXN0KGZvcm11bGEpKSB7CiAgICAgICAgICAgIGNhbGNsYXRlKCRmb3JtLml0ZW1zLCBkYXRhLCBrZXlDKTsKICAgICAgICAgICAgdmFyIHZhbHVlID0gdHlwZW9mIGRhdGFba2V5Q10gPT09ICdudW1iZXInIHx8IHR5cGVvZiBkYXRhW2tleUNdID09PSAnc3RyaW5nJyA/IGRhdGFba2V5Q10gOiAwOwogICAgICAgICAgICBmb3JtdWxhID0gZm9ybXVsYS5yZXBsYWNlKHJlZywgaXNOYU4ocGFyc2VGbG9hdCh2YWx1ZSkpID8gMCA6IHBhcnNlRmxvYXQodmFsdWUpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWV2YWwKICAgICAgICBkYXRhW2tleV0gPSBwYXJzZUZsb2F0KGV2YWwoZm9ybXVsYSkudG9GaXhlZCgyKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGRhdGFba2V5XTsKICAgIH0KICAgIGNhbGNsYXRlKCRmb3JtLml0ZW1zLCBkYXRhLCBwcm9wZXJ0eSk7CiAgICB2YXIgdmFsID0gaXNOYU4ocGFyc2VGbG9hdChkYXRhW3Byb3BlcnR5XSkpID8gMCA6IHBhcnNlRmxvYXQoZGF0YVtwcm9wZXJ0eV0pOwogICAgdmFyIG1vbmV5VW5pdCA9IDE7CiAgICB2YWwgPSBOdW1iZXIoKHZhbCAvIG1vbmV5VW5pdCkudG9GaXhlZCgyKSkudG9Mb2NhbGVTdHJpbmcoKTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2VsZXNzLWVzY2FwZQogICAgcmV0dXJuIFtoKCJzcGFuIiwgW3ZhbF0pXTsKICB9LAogIGZvcm1hdExhYmVsOiBmdW5jdGlvbiBmb3JtYXRMYWJlbChmb3JtYXQsIG5vZGVEYXRhLCB2YWx1ZUtleXMpIHsKICAgIC8vIOagvOW8j+WMluaYvuekumxhYmVsCiAgICB2YXIgcmVnUiA9IG5ldyBSZWdFeHAoJyh7W2EtekEtWjAtOV9dKn0pJywgJ2lnJyk7CiAgICB2YXIgcm93c0tleSA9IChmb3JtYXQubWF0Y2gocmVnUikgfHwgW10pLm1hcChmdW5jdGlvbiAoa2V5LCBrZXlJbmRleCkgewogICAgICByZXR1cm4ga2V5LnJlcGxhY2UoL3t8fS9naSwgJycpOwogICAgfSk7CiAgICB2YXIgYXJyID0gW107CiAgICByb3dzS2V5LmZvckVhY2goZnVuY3Rpb24gKGtleSwgaW5kZXgpIHsKICAgICAgaWYgKGtleSA9PT0gKHZhbHVlS2V5c1swXSB8fCAnY29kZScgfHwgJ2NvZGUnKSkgewogICAgICAgIG5vZGVEYXRhW2tleV0gIT09ICdyb290JyAmJiBub2RlRGF0YVtrZXldICYmIGFyci5wdXNoKG5vZGVEYXRhW2tleV0pOwogICAgICB9IGVsc2UgewogICAgICAgIG5vZGVEYXRhW2tleV0gJiYgYXJyLnB1c2gobm9kZURhdGFba2V5XSk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGFyci5qb2luKCctJyk7CiAgfSwKICBkZWJvdW5jZUl0ZW1DaGFuZ2U6IGZ1bmN0aW9uIChkZWJvdW5jZSkgewogICAgcmV0dXJuIGRlYm91bmNlKDMwMCk7CiAgfShmdW5jdGlvbiAoZGVsYXkpIHsKICAgIC8vIOWIqeeUqOmXreWMheS/neWtmOWumuaXtuWZqAogICAgdmFyIHRpbWVyID0gbnVsbDsKICAgIHJldHVybiBmdW5jdGlvbiAoY2IpIHsKICAgICAgLy8g5Zyo6KeE5a6a5pe26Ze05YaF5YaN5qyh6Kem5Y+R5Lya5YWI5riF6Zmk5a6a5pe25Zmo5ZCO5YaN6YeN6K6+5a6a5pe25ZmoCiAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgY2IoKTsKICAgICAgfSwgZGVsYXkpOwogICAgfTsKICB9KSwKICBmb3JtYXQ6IGZ1bmN0aW9uIGZvcm1hdChfZm9ybWF0LCBvYmosIG90aGVEYXRhT2JqKSB7CiAgICB2YXIgcmVnUiA9IG5ldyBSZWdFeHAoJyh7W2EtekEtWjAtOV9dKn0pJywgJ2lnJyk7CiAgICB2YXIgcm93c0tleSA9IChfZm9ybWF0Lm1hdGNoKHJlZ1IpIHx8IFtdKS5tYXAoZnVuY3Rpb24gKGtleSwga2V5SW5kZXgpIHsKICAgICAgcmV0dXJuIGtleS5yZXBsYWNlKC97fH0vZ2ksICcnKTsKICAgIH0pOwogICAgcm93c0tleS5tYXAoZnVuY3Rpb24gKGtleSwgaW5kZXhrZXkpIHsKICAgICAgX2Zvcm1hdCA9IF9mb3JtYXQucmVwbGFjZShuZXcgUmVnRXhwKCd7JyArIGtleSArICd9JywgJ2lnJyksIG9ialtrZXldIHx8IG90aGVEYXRhT2JqICYmIG90aGVEYXRhT2JqW2tleV0gfHwgJycpOwogICAgfSk7CiAgICByZXR1cm4gX2Zvcm1hdDsKICB9LAogIGdldGxlYWZDaGlsZHJlbkxpc3Q6IGZ1bmN0aW9uIGdldGxlYWZDaGlsZHJlbkxpc3QoZGF0YSkgewogICAgdmFyIHJlc3VsdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0uY2hpbGRyZW4pICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgc2VsZi5nZXRsZWFmQ2hpbGRyZW5MaXN0KGl0ZW0uY2hpbGRyZW4sIHJlc3VsdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHJlc3VsdDsKICB9LAogIGRlZXBDb3B5OiBmdW5jdGlvbiBkZWVwQ29weShvYmopIHsKICAgIC8vIOa3seaLt+i0nemAmueUqOaWueazlQogICAgdmFyIG1lID0gdGhpczsKICAgIHZhciBuZXdPYmogPSBudWxsOwogICAgaWYgKF90eXBlb2Yob2JqKSAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7CiAgICAgIG5ld09iaiA9IG9iajsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAgIG5ld09iaiA9IG9iai5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICByZXR1cm4gbWUuZGVlcENvcHkoaXRlbSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAob2JqIGluc3RhbmNlb2YgT2JqZWN0KSB7CiAgICAgICAgbmV3T2JqID0ge307CiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikgewogICAgICAgICAgbmV3T2JqW2tleV0gPSBtZS5kZWVwQ29weShvYmpba2V5XSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIE1hcCkgewogICAgICAgIG5ld09iaiA9IG5ldyBNYXAoKTsKICAgICAgICBvYmoua2V5cygpLmZvckVhY2goZnVuY3Rpb24gKG1hcFYsIG1hcEspIHsKICAgICAgICAgIG5ld09iai5zZXQobWFwSywgbWUuZGVlcENvcHkobWFwVikpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIFNldCkgewogICAgICAgIG5ld09iaiA9IG5ldyBNYXAoKTsKICAgICAgICBTZXQuZm9yRWFjaChmdW5jdGlvbiAoc2V0Viwgc2V0SSkgewogICAgICAgICAgbmV3T2JqLmFkZChtZS5kZWVwQ29weShzZXRWKSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7fQogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcHJvdG8KICAgICAgLy8gbmV3T2JqLl9fcHJvdG9fXyA9IG9iai5fX3Byb3RvX18KICAgIH0KCiAgICByZXR1cm4gbmV3T2JqOwogIH0sCiAgcGFyc2VDb25kaXRpb25zOiBmdW5jdGlvbiBwYXJzZUNvbmRpdGlvbnMoY29uZGl0aW9uc09iaiwgZGF0YSkgewogICAgdmFyIG90aGVEYXRhT2JqID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTsKICAgIGNvbmRpdGlvbnNPYmogPSBjb25kaXRpb25zT2JqIHx8IHt9OwogICAgdmFyIHJlc3VsdCA9IHt9OwogICAgZm9yICh2YXIga2V5IGluIGNvbmRpdGlvbnNPYmopIHsKICAgICAgdHJ5IHsKICAgICAgICByZXN1bHRba2V5XSA9IGV2YWwoZGVmYXVsdEdsb2FiYWxVdGlscy5mb3JtYXQoY29uZGl0aW9uc09ialtrZXldLCBkYXRhLCBvdGhlRGF0YU9iaikpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgICByZXN1bHRba2V5XSA9ICcnOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gcmVzdWx0OwogIH0sCiAgZXZhbDogZnVuY3Rpb24gX2V2YWwoZXhwcmVzaW9uLCBvYmosIG90aGVEYXRhT2JqKSB7CiAgICB2YXIgcmVnUiA9IG5ldyBSZWdFeHAoJyh7W2EtekEtWjAtOV9dKn0pJywgJ2lnJyk7CiAgICB2YXIgcm93c0tleSA9IChleHByZXNpb24ubWF0Y2gocmVnUikgfHwgW10pLm1hcChmdW5jdGlvbiAoa2V5LCBrZXlJbmRleCkgewogICAgICByZXR1cm4ga2V5LnJlcGxhY2UoL3t8fS9naSwgJycpOwogICAgfSk7CiAgICByb3dzS2V5Lm1hcChmdW5jdGlvbiAoa2V5LCBpbmRleGtleSkgewogICAgICBleHByZXNpb24gPSBleHByZXNpb24ucmVwbGFjZShuZXcgUmVnRXhwKCd7JyArIGtleSArICd9JywgJ2lnJyksIG9ialtrZXldIHx8IG90aGVEYXRhT2JqICYmIG90aGVEYXRhT2JqW2tleV0gfHwgJycpOwogICAgfSk7CiAgICByZXR1cm4gZXZhbChleHByZXNpb24pOwogIH0sCiAgbWVyZ2VDb250cmFpbkNvbmZpZzogZnVuY3Rpb24gbWVyZ2VDb250cmFpbkNvbmZpZyhyZW5kZXJPcHRzLCBwYXJhbXMsIGNvbnRleHQpIHsKICAgIHZhciB0eXBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiAndGFibGUnOwogICAgLy8g5ZCI5bm25pu05paw57qm5p2fCiAgICBpZiAodHlwZSA9PT0gJ3RhYmxlJykgewogICAgICB2YXIgYnNUYWJsZSA9IGNvbnRleHQuJGdyaWQuJHBhcmVudDsKICAgICAgdmFyIF9ic1RhYmxlJGNhbGN1bGF0ZUNvbiA9IGJzVGFibGUuY2FsY3VsYXRlQ29uc3RyYWludENvbmZpZ0luLAogICAgICAgIGVuYWJsZWQgPSBfYnNUYWJsZSRjYWxjdWxhdGVDb24uZW5hYmxlZCwKICAgICAgICBlbmFibGVkVHlwZSA9IF9ic1RhYmxlJGNhbGN1bGF0ZUNvbi5lbmFibGVkVHlwZSwKICAgICAgICBjYWxjQW5kQ29uc3RyYWludEl0ZW1Db2RlRmllbGQgPSBfYnNUYWJsZSRjYWxjdWxhdGVDb24uY2FsY0FuZENvbnN0cmFpbnRJdGVtQ29kZUZpZWxkOwogICAgICBpZiAoZW5hYmxlZCAmJiAoZW5hYmxlZFR5cGUucGVyZm9ybUNvbENvbnN0cmFpbnQgfHwgZW5hYmxlZFR5cGUucGVyZm9ybUNlbGxDb25zdHJhaW50KSkgewogICAgICAgIC8vIOabtOaWsOa4suafk+mFjee9rgogICAgICAgIHZhciBjb25zdHJhaW5Sb3dEYXRhTWFwID0gYnNUYWJsZS5jb25zdHJhaW5Sb3dEYXRhTWFwOwogICAgICAgIHZhciBjdXJDZWxsTWFwID0gY29uc3RyYWluUm93RGF0YU1hcFtwYXJhbXMucm93W2NhbGNBbmRDb25zdHJhaW50SXRlbUNvZGVGaWVsZF1dICYmIGNvbnN0cmFpblJvd0RhdGFNYXBbcGFyYW1zLnJvd1tjYWxjQW5kQ29uc3RyYWludEl0ZW1Db2RlRmllbGRdXVtwYXJhbXMuY29sdW1uLnByb3BlcnR5XTsKICAgICAgICBpZiAoY3VyQ2VsbE1hcCkgewogICAgICAgICAgaWYgKGN1ckNlbGxNYXAub3B0aW9ucykgewogICAgICAgICAgICByZW5kZXJPcHRzLm9wdGlvbnMgPSBjdXJDZWxsTWFwLm9wdGlvbnM7CiAgICAgICAgICB9CiAgICAgICAgICByZW5kZXJPcHRzLnByb3BzID0gT2JqZWN0LmFzc2lnbihyZW5kZXJPcHRzLnByb3BzLCB7CiAgICAgICAgICAgIGRpc2FibGVkOiBjdXJDZWxsTWFwLmRpc2FibGVkIHx8IHJlbmRlck9wdHMucHJvcHMuZGlzYWJsZWQsCiAgICAgICAgICAgIGVkaXRhYmxlOiBjdXJDZWxsTWFwLmVkaXRhYmxlIHx8IHJlbmRlck9wdHMucHJvcHMuZWRpdGFibGUsCiAgICAgICAgICAgIHF1ZXJ5cGFyYW1zOiBjdXJDZWxsTWFwLnF1ZXJ5cGFyYW1zIHx8IHJlbmRlck9wdHMucHJvcHMucXVlcnlwYXJhbXMKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVuZGVyT3B0czsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcmVuZGVyT3B0czsKICAgICAgfQogICAgfQogIH0KfTsKLy8g5YWo5bGA5o+Q5L6b6KGo5qC85ZKMZm9ybemFjeWll+a4suafk+WZqOWFsSAxNSDnu4TvvIzliIbliKvkuLrvvJog5paw5YWo5bGA5LiL5ouJ5qCR77yM5paH5pys5pWw5a2X6L6T5YWl77yM5LiL5ouJ6YCJ5oup77yM6K6h566X5riy5p+T5Zmo77yM6YeR6aKd6L6T5YWl77yM5LiL5ouJ5paH5pys5qGG77yM5aSp5pWw77yM5pe26Ze05pel5pyf77yM5Y2V6YCJ77yM5aSa6YCJ77yM6Ze06ZqU5pe26Ze05oiW5pWw5YC86YCJ5oup6L6T5YWl5riy5p+T5Zmo77yM5byA5YWz77yM6L+b5bqm5p2h77yM5p2h5Lu25riy5p+T5Zmo44CC5YW25Lit77yM5p2h5Lu25riy5p+T5Zmo77yI6K+E5rWL5ZKMZGV2ZWxvcGluZ++8iQp2YXIgZGVmYXVsdFB1YmxpY1JlbmRlcnMgPSB7CiAgLy8g6KGo5qC8Zm9ybeWFqOWxgOa4suafk+WZqAogIC8vIDPnu4Tlj6/lpJrpgIkKICAkdnhlVHJlZTogewogICAgLy8g5YWo5bGA5qCR5riy5p+T5ZmoCiAgICByZW5kZXJEZWZhdWx0OiBmdW5jdGlvbiByZW5kZXJEZWZhdWx0KGgsIF9yZWY0LCBfcmVmNSkgewogICAgICB2YXIgbmFtZSA9IF9yZWY0Lm5hbWUsCiAgICAgICAgcHJvcHMgPSBfcmVmNC5wcm9wczsKICAgICAgdmFyIHJvdyA9IF9yZWY1LnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmNS5jb2x1bW47CiAgICAgIHZhciBfcmVmNiA9IHByb3BzICYmIHByb3BzLmNvbmZpZyB8fCB7CiAgICAgICAgICBtdWx0aXBsZTogZmFsc2UsCiAgICAgICAgICBmb3JtYXQ6ICd7Y29kZX0te25hbWV9JywKICAgICAgICAgIHNob3dGaWVsZDogJycsCiAgICAgICAgICBpc0h1bXA6IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBtdWx0aXBsZSA9IF9yZWY2Lm11bHRpcGxlLAogICAgICAgIGZvcm1hdCA9IF9yZWY2LmZvcm1hdCwKICAgICAgICBzaG93RmllbGQgPSBfcmVmNi5zaG93RmllbGQsCiAgICAgICAgaXNIdW1wID0gX3JlZjYuaXNIdW1wLAogICAgICAgIHZhbHVlS2V5cyA9IF9yZWY2LnZhbHVlS2V5czsKICAgICAgdmFsdWVLZXlzID0gdmFsdWVLZXlzIHx8IFsnY29kZScsICduYW1lJywgJ2lkJ107CiAgICAgIHZhciBmaWVsZGtleXMgPSBpc0h1bXAgPyBbJ0NvZGUnLCAnTmFtZScsICdJZCddIDogY29sdW1uLnByb3BlcnR5LmVuZHNXaXRoKCdfJykgPyBbJ2NvZGUnLCAnbmFtZScsICdpZCddIDogWydfY29kZScsICdfbmFtZScsICdfaWQnXTsKICAgICAgdmFyIG11bHRpcGxlZmllbGRrZXlzID0gaXNIdW1wID8gWydDb2RlX19tdWx0aXBsZScsICdOYW1lX19tdWx0aXBsZScsICdJZF9fbXVsdGlwbGUnLCAnX192aWV3U29ydCddIDogY29sdW1uLnByb3BlcnR5LmVuZHNXaXRoKCdfJykgPyBbJ2NvZGVfX211bHRpcGxlJywgJ25hbWVfX211bHRpcGxlJywgJ2lkX19tdWx0aXBsZScsICdfdmlld1NvcnQnXSA6IFsnX2NvZGVfX211bHRpcGxlJywgJ19uYW1lX19tdWx0aXBsZScsICdfaWRfX211bHRpcGxlJywgJ19fdmlld1NvcnQnXTsKICAgICAgZm9ybWF0ID0gcHJvcHMgJiYgcHJvcHMuY2VsbFZpZXdGb3JtYXQgfHwgZm9ybWF0IHx8ICd7JyArIHZhbHVlS2V5c1swXSArICd9LXsnICsgdmFsdWVLZXlzWzFdICsgJ30nOwogICAgICBpZiAoc2hvd0ZpZWxkKSB7CiAgICAgICAgcm93W3Nob3dGaWVsZF0gPSAocm93W3Nob3dGaWVsZF0gKyAnJykucmVwbGFjZSgvbnVsbHx1bmRlZmluZWQvaWcsICcnKTsKICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbM11dID0gcm93W3Nob3dGaWVsZF07CiAgICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICAgImNsYXNzIjogInRleHQgYmxvY2siCiAgICAgICAgfSwgW3Jvd1tjb2x1bW4ucHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1szXV1dKV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHJlZ1IgPSBuZXcgUmVnRXhwKCcoe1thLXpBLVowLTlfXSp9KScsICdpZycpOwogICAgICAgIHZhciByb3dzS2V5ID0gZm9ybWF0Lm1hdGNoKHJlZ1IpLm1hcChmdW5jdGlvbiAoa2V5LCBrZXlJbmRleCkgewogICAgICAgICAgcmV0dXJuIGtleS5yZXBsYWNlKC97fH0vZ2ksICcnKTsKICAgICAgICB9KTsKICAgICAgICBpZiAoIW11bHRpcGxlKSB7CiAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5XSA9IFtyb3dbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzBdXSwgcm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1sxXV0sIHJvd1tjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMl1dXS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgIHJldHVybiAoaXRlbSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZC9pZywgJycpOwogICAgICAgICAgfSkuam9pbignIyMnKS5yZXBsYWNlKCcjIyMjJywgJycpOwogICAgICAgICAgdmFyIGFyciA9IFtdOwogICAgICAgICAgcm93c0tleS5tYXAoZnVuY3Rpb24gKGtleSwgaW5kZXhrZXkpIHsKICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2NvZGUnKSB7CiAgICAgICAgICAgICAgKHJvd1tjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMF1dICsgJycpLnJlcGxhY2UoL251bGx8dW5kZWZpbmVkfHJvb3QvaWcsICcnKSAhPT0gJycgJiYgYXJyLnB1c2gocm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1swXV0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGtleSA9IGlzSHVtcCA/IGtleS5yZXBsYWNlKC9cYihcdykoXHcqKS9nLCBmdW5jdGlvbiAoJDAsICQxLCAkMikgewogICAgICAgICAgICAgICAgcmV0dXJuICQxLnRvVXBwZXJDYXNlKCkgKyAkMjsKICAgICAgICAgICAgICB9KSA6IGNvbHVtbi5wcm9wZXJ0eS5lbmRzV2l0aCgnXycpID8ga2V5IDogJ18nICsga2V5OwogICAgICAgICAgICAgIChyb3dbY29sdW1uLnByb3BlcnR5ICsga2V5XSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZC9pZywgJycpICE9PSAnJyAmJiBhcnIucHVzaChyb3dbY29sdW1uLnByb3BlcnR5ICsga2V5XSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArIG11bHRpcGxlZmllbGRrZXlzWzNdXSA9IHJvd1tjb2x1bW4ucHJvcGVydHldID09PSAnJyA/ICcnIDogYXJyLmpvaW4oJy0nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGlkTmFtZUNvZGVNYXAgPSB7CiAgICAgICAgICAgIGlkQXJyOiB0eXBlb2Ygcm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1syXV0gPT09ICdzdHJpbmcnICYmIHJvd1tjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMl1dICE9PSAnJyA/IHJvd1tjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMl1dLnNwbGl0KCcsJykgOiBBcnJheS5pc0FycmF5KHJvd1tjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMl1dKSA/IHJvd1tjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMl1dIDogcm93W2NvbHVtbi5wcm9wZXJ0eSArIG11bHRpcGxlZmllbGRrZXlzWzJdXSA/IHJvd1tjb2x1bW4ucHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1syXV0gOiBbXSwKICAgICAgICAgICAgY29kZUFycjogdHlwZW9mIHJvd1tjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMF1dID09PSAnc3RyaW5nJyAmJiByb3dbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzBdXSAhPT0gJycgPyByb3dbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzBdXS5zcGxpdCgnLCcpIDogQXJyYXkuaXNBcnJheShyb3dbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzBdXSkgPyByb3dbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzBdXSA6IHJvd1tjb2x1bW4ucHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1swXV0gPyByb3dbY29sdW1uLnByb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbMF1dIDogW10sCiAgICAgICAgICAgIG5hbWVBcnI6IHR5cGVvZiByb3dbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzFdXSA9PT0gJ3N0cmluZycgJiYgcm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1sxXV0gIT09ICcnID8gcm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1sxXV0uc3BsaXQoJywnKSA6IEFycmF5LmlzQXJyYXkocm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1sxXV0pID8gcm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1sxXV0gOiByb3dbY29sdW1uLnByb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbMV1dID8gcm93W2NvbHVtbi5wcm9wZXJ0eSArIG11bHRpcGxlZmllbGRrZXlzWzFdXSA6IFtdCiAgICAgICAgICB9OwogICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eV0gPSBpZE5hbWVDb2RlTWFwLm5hbWVBcnIubGVuZ3RoIHx8IGlkTmFtZUNvZGVNYXAuY29kZUFyci5sZW5ndGggPyBpZE5hbWVDb2RlTWFwLmNvZGVBcnIubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICByZXR1cm4gW2lkTmFtZUNvZGVNYXAuY29kZUFycltpbmRleF0sIGlkTmFtZUNvZGVNYXAubmFtZUFycltpbmRleF0sIGlkTmFtZUNvZGVNYXAuaWRBcnJbaW5kZXhdXS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgcmV0dXJuIChpdGVtICsgJycpLnJlcGxhY2UoL251bGx8dW5kZWZpbmVkL2lnLCAnJyk7CiAgICAgICAgICAgIH0pLmpvaW4oJyMjJykucmVwbGFjZSgnIyMjIycsICcnKTsKICAgICAgICAgIH0pLmpvaW4oJywnKSA6ICcnOwogICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1syXV0gPSByb3dbY29sdW1uLnByb3BlcnR5XSA9PT0gJycgPyAnJyA6IGlkTmFtZUNvZGVNYXAuaWRBcnIuam9pbignLCcpOwogICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1swXV0gPSByb3dbY29sdW1uLnByb3BlcnR5XSA9PT0gJycgPyAnJyA6IGlkTmFtZUNvZGVNYXAuY29kZUFyci5qb2luKCcsJyk7CiAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzFdXSA9IHJvd1tjb2x1bW4ucHJvcGVydHldID09PSAnJyA/ICcnIDogaWROYW1lQ29kZU1hcC5uYW1lQXJyLmpvaW4oJywnKTsKICAgICAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1syXV0gPSByb3dbY29sdW1uLnByb3BlcnR5XSA9PT0gJycgPyBbXSA6IGlkTmFtZUNvZGVNYXAuaWRBcnI7CiAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbMF1dID0gcm93W2NvbHVtbi5wcm9wZXJ0eV0gPT09ICcnID8gW10gOiBpZE5hbWVDb2RlTWFwLmNvZGVBcnI7CiAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbMV1dID0gcm93W2NvbHVtbi5wcm9wZXJ0eV0gPT09ICcnID8gW10gOiBpZE5hbWVDb2RlTWFwLm5hbWVBcnI7CiAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbM11dID0gcm93W2NvbHVtbi5wcm9wZXJ0eV0gPT09ICcnID8gJycgOiBpZE5hbWVDb2RlTWFwLmNvZGVBcnIubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICB2YXIgYXJyID0gW107CiAgICAgICAgICAgIHJvd3NLZXkubWFwKGZ1bmN0aW9uIChrZXksIGluZGV4a2V5KSB7CiAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2NvZGUnKSB7CiAgICAgICAgICAgICAgICBpZE5hbWVDb2RlTWFwW2tleSArICdBcnInXVtpbmRleF0gIT09ICdyb290JyAmJiBhcnIucHVzaChpZE5hbWVDb2RlTWFwW2tleSArICdBcnInXVtpbmRleF0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZE5hbWVDb2RlTWFwW2tleSArICdBcnInXVtpbmRleF0gJiYgYXJyLnB1c2goaWROYW1lQ29kZU1hcFtrZXkgKyAnQXJyJ11baW5kZXhdKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gYXJyLmpvaW4oJy0nKTsKICAgICAgICAgIH0pLmpvaW4oJywnKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICAgImNsYXNzIjogInRleHQgYmxvY2siCiAgICAgICAgfSwgW3Jvd1tjb2x1bW4ucHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1szXV1dKV07CiAgICAgIH0KICAgIH0sCiAgICByZW5kZXJDZWxsOiBmdW5jdGlvbiByZW5kZXJDZWxsKGgsIF9yZWY3LCBfcmVmOCkgewogICAgICB2YXIgbmFtZSA9IF9yZWY3Lm5hbWUsCiAgICAgICAgcHJvcHMgPSBfcmVmNy5wcm9wczsKICAgICAgdmFyIHJvdyA9IF9yZWY4LnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmOC5jb2x1bW47CiAgICAgIHZhciBfcmVmOSA9IHByb3BzICYmIHByb3BzLmNvbmZpZyB8fCB7CiAgICAgICAgICBtdWx0aXBsZTogZmFsc2UsCiAgICAgICAgICBmb3JtYXQ6ICd7Y29kZX0te25hbWV9JywKICAgICAgICAgIHNob3dGaWVsZDogJycsCiAgICAgICAgICBpc0h1bXA6IGZhbHNlCiAgICAgICAgfSwKICAgICAgICBtdWx0aXBsZSA9IF9yZWY5Lm11bHRpcGxlLAogICAgICAgIGZvcm1hdCA9IF9yZWY5LmZvcm1hdCwKICAgICAgICBzaG93RmllbGQgPSBfcmVmOS5zaG93RmllbGQsCiAgICAgICAgaXNIdW1wID0gX3JlZjkuaXNIdW1wLAogICAgICAgIHZhbHVlS2V5cyA9IF9yZWY5LnZhbHVlS2V5czsKICAgICAgdmFsdWVLZXlzID0gdmFsdWVLZXlzIHx8IFsnY29kZScsICduYW1lJywgJ2lkJ107CiAgICAgIHZhciBmaWVsZGtleXMgPSBpc0h1bXAgPyBbJ0NvZGUnLCAnTmFtZScsICdJZCddIDogY29sdW1uLnByb3BlcnR5LmVuZHNXaXRoKCdfJykgPyBbJ2NvZGUnLCAnbmFtZScsICdpZCddIDogWydfY29kZScsICdfbmFtZScsICdfaWQnXTsKICAgICAgdmFyIG11bHRpcGxlZmllbGRrZXlzID0gaXNIdW1wID8gWydDb2RlX19tdWx0aXBsZScsICdOYW1lX19tdWx0aXBsZScsICdJZF9fbXVsdGlwbGUnLCAnX192aWV3U29ydCddIDogY29sdW1uLnByb3BlcnR5LmVuZHNXaXRoKCdfJykgPyBbJ2NvZGVfX211bHRpcGxlJywgJ25hbWVfX211bHRpcGxlJywgJ2lkX19tdWx0aXBsZScsICdfdmlld1NvcnQnXSA6IFsnX2NvZGVfX211bHRpcGxlJywgJ19uYW1lX19tdWx0aXBsZScsICdfaWRfX211bHRpcGxlJywgJ19fdmlld1NvcnQnXTsKICAgICAgZm9ybWF0ID0gcHJvcHMgJiYgcHJvcHMuY2VsbFZpZXdGb3JtYXQgfHwgZm9ybWF0IHx8ICd7JyArIHZhbHVlS2V5c1swXSArICd9LXsnICsgdmFsdWVLZXlzWzFdICsgJ30nOwogICAgICBpZiAoc2hvd0ZpZWxkKSB7CiAgICAgICAgcm93W3Nob3dGaWVsZF0gPSAocm93W3Nob3dGaWVsZF0gKyAnJykucmVwbGFjZSgvbnVsbHx1bmRlZmluZWQvaWcsICcnKTsKICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbM11dID0gcm93W3Nob3dGaWVsZF07CiAgICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICAgImNsYXNzIjogInRleHQgYmxvY2siCiAgICAgICAgfSwgW3Jvd1tjb2x1bW4ucHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1szXV1dKV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHJlZ1IgPSBuZXcgUmVnRXhwKCcoe1thLXpBLVowLTlfXSp9KScsICdpZycpOwogICAgICAgIHZhciByb3dzS2V5ID0gZm9ybWF0Lm1hdGNoKHJlZ1IpLm1hcChmdW5jdGlvbiAoa2V5LCBrZXlJbmRleCkgewogICAgICAgICAgcmV0dXJuIGtleS5yZXBsYWNlKC97fH0vZ2ksICcnKTsKICAgICAgICB9KTsKICAgICAgICBpZiAoIW11bHRpcGxlKSB7CiAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5XSA9IFtyb3dbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzBdXSwgcm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1sxXV0sIHJvd1tjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMl1dXS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgIHJldHVybiAoaXRlbSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZC9pZywgJycpOwogICAgICAgICAgfSkuam9pbignIyMnKS5yZXBsYWNlKCcjIyMjJywgJycpOwogICAgICAgICAgdmFyIGFyciA9IFtdOwogICAgICAgICAgcm93c0tleS5tYXAoZnVuY3Rpb24gKGtleSwgaW5kZXhrZXkpIHsKICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2NvZGUnKSB7CiAgICAgICAgICAgICAgKHJvd1tjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMF1dICsgJycpLnJlcGxhY2UoL251bGx8dW5kZWZpbmVkfHJvb3QvaWcsICcnKSAhPT0gJycgJiYgYXJyLnB1c2gocm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1swXV0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGtleSA9IGlzSHVtcCA/IGtleS5yZXBsYWNlKC9cYihcdykoXHcqKS9nLCBmdW5jdGlvbiAoJDAsICQxLCAkMikgewogICAgICAgICAgICAgICAgcmV0dXJuICQxLnRvVXBwZXJDYXNlKCkgKyAkMjsKICAgICAgICAgICAgICB9KSA6IGNvbHVtbi5wcm9wZXJ0eS5lbmRzV2l0aCgnXycpID8ga2V5IDogJ18nICsga2V5OwogICAgICAgICAgICAgIChyb3dbY29sdW1uLnByb3BlcnR5ICsga2V5XSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZC9pZywgJycpICE9PSAnJyAmJiBhcnIucHVzaChyb3dbY29sdW1uLnByb3BlcnR5ICsga2V5XSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArIG11bHRpcGxlZmllbGRrZXlzWzNdXSA9IHJvd1tjb2x1bW4ucHJvcGVydHldID09PSAnJyA/ICcnIDogYXJyLmpvaW4oJy0nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGlkTmFtZUNvZGVNYXAgPSB7CiAgICAgICAgICAgIGlkQXJyOiB0eXBlb2Ygcm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1syXV0gPT09ICdzdHJpbmcnICYmIHJvd1tjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMl1dICE9PSAnJyA/IHJvd1tjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMl1dLnNwbGl0KCcsJykgOiBBcnJheS5pc0FycmF5KHJvd1tjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMl1dKSA/IHJvd1tjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMl1dIDogW10sCiAgICAgICAgICAgIGNvZGVBcnI6IHR5cGVvZiByb3dbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzBdXSA9PT0gJ3N0cmluZycgJiYgcm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1swXV0gIT09ICcnID8gcm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1swXV0uc3BsaXQoJywnKSA6IEFycmF5LmlzQXJyYXkocm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1swXV0pID8gcm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1swXV0gOiBbXSwKICAgICAgICAgICAgbmFtZUFycjogdHlwZW9mIHJvd1tjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMV1dID09PSAnc3RyaW5nJyAmJiByb3dbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzFdXSAhPT0gJycgPyByb3dbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzFdXS5zcGxpdCgnLCcpIDogQXJyYXkuaXNBcnJheShyb3dbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzFdXSkgPyByb3dbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzFdXSA6IFtdCiAgICAgICAgICB9OwogICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eV0gPSBpZE5hbWVDb2RlTWFwLm5hbWVBcnIubGVuZ3RoIHx8IGlkTmFtZUNvZGVNYXAuY29kZUFyci5sZW5ndGggPyBpZE5hbWVDb2RlTWFwLmNvZGVBcnIubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICByZXR1cm4gW2lkTmFtZUNvZGVNYXAuY29kZUFycltpbmRleF0sIGlkTmFtZUNvZGVNYXAubmFtZUFycltpbmRleF0sIGlkTmFtZUNvZGVNYXAuaWRBcnJbaW5kZXhdXS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgcmV0dXJuIChpdGVtICsgJycpLnJlcGxhY2UoL251bGx8dW5kZWZpbmVkL2lnLCAnJyk7CiAgICAgICAgICAgIH0pLmpvaW4oJyMjJykucmVwbGFjZSgnIyMjIycsICcnKTsKICAgICAgICAgIH0pLmpvaW4oJywnKSA6ICcnOwogICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1syXV0gPSByb3dbY29sdW1uLnByb3BlcnR5XSA9PT0gJycgPyAnJyA6IGlkTmFtZUNvZGVNYXAuaWRBcnIuam9pbignLCcpOwogICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1swXV0gPSByb3dbY29sdW1uLnByb3BlcnR5XSA9PT0gJycgPyAnJyA6IGlkTmFtZUNvZGVNYXAuY29kZUFyci5qb2luKCcsJyk7CiAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzFdXSA9IHJvd1tjb2x1bW4ucHJvcGVydHldID09PSAnJyA/ICcnIDogaWROYW1lQ29kZU1hcC5uYW1lQXJyLmpvaW4oJywnKTsKICAgICAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1syXV0gPSByb3dbY29sdW1uLnByb3BlcnR5XSA9PT0gJycgPyBbXSA6IGlkTmFtZUNvZGVNYXAuaWRBcnI7CiAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbMF1dID0gcm93W2NvbHVtbi5wcm9wZXJ0eV0gPT09ICcnID8gW10gOiBpZE5hbWVDb2RlTWFwLmNvZGVBcnI7CiAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbMV1dID0gcm93W2NvbHVtbi5wcm9wZXJ0eV0gPT09ICcnID8gW10gOiBpZE5hbWVDb2RlTWFwLm5hbWVBcnI7CiAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbM11dID0gcm93W2NvbHVtbi5wcm9wZXJ0eV0gPT09ICcnID8gJycgOiBpZE5hbWVDb2RlTWFwLmNvZGVBcnIubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICB2YXIgYXJyID0gW107CiAgICAgICAgICAgIHJvd3NLZXkubWFwKGZ1bmN0aW9uIChrZXksIGluZGV4a2V5KSB7CiAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2NvZGUnKSB7CiAgICAgICAgICAgICAgICBpZE5hbWVDb2RlTWFwW2tleSArICdBcnInXVtpbmRleF0gIT09ICdyb290JyAmJiBhcnIucHVzaChpZE5hbWVDb2RlTWFwW2tleSArICdBcnInXVtpbmRleF0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZE5hbWVDb2RlTWFwW2tleSArICdBcnInXVtpbmRleF0gJiYgYXJyLnB1c2goaWROYW1lQ29kZU1hcFtrZXkgKyAnQXJyJ11baW5kZXhdKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gYXJyLmpvaW4oJy0nKTsKICAgICAgICAgIH0pLmpvaW4oJywnKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICAgImNsYXNzIjogInRleHQgYmxvY2siCiAgICAgICAgfSwgW3Jvd1tjb2x1bW4ucHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1szXV1dKV07CiAgICAgIH0KICAgIH0sCiAgICByZW5kZXJFZGl0OiBmdW5jdGlvbiByZW5kZXJFZGl0KGgsIHJlbmRlck9wdHMsIHBhcmFtcywgY29udGV4dCkgewogICAgICByZW5kZXJPcHRzID0gZGVmYXVsdEdsb2FiYWxVdGlscy5kZWVwQ29weShyZW5kZXJPcHRzKTsKICAgICAgdmFyIF9yZW5kZXJPcHRzID0gcmVuZGVyT3B0cywKICAgICAgICBwcm9wcyA9IF9yZW5kZXJPcHRzLnByb3BzLAogICAgICAgIG9wdGlvbnMgPSBfcmVuZGVyT3B0cy5vcHRpb25zOwogICAgICB2YXIgcm93ID0gcGFyYW1zLnJvdywKICAgICAgICBjb2x1bW4gPSBwYXJhbXMuY29sdW1uOwogICAgICB2YXIgYnNUYWJsZSA9IGNvbnRleHQuJGdyaWQuJHBhcmVudDsKICAgICAgdmFyIHNlbGYgPSBic1RhYmxlOwogICAgICBpZiAocHJvcHMuZm9ybWF0T3B0aW9ucykgewogICAgICAgIC8vIOmFjee9ruaYoOWwhAogICAgICAgIHByb3BzLm9wdGlvbnMgPSBwcm9wcy5vcHRpb25zIHx8IHt9OwogICAgICAgIHZhciByZW5kZXJPcHRpb24gPSBwcm9wcy5vcHRpb25zW2RlZmF1bHRHbG9hYmFsVXRpbHMuZm9ybWF0KHByb3BzLmZvcm1hdE9wdGlvbnMsIHJvdywgc2VsZi5wdWJsaWNEYXRhLnJvd1B1YmxpY0RhdGEpXTsKICAgICAgICBpZiAocmVuZGVyT3B0aW9uKSB7CiAgICAgICAgICBPYmplY3QuYXNzaWduKHByb3BzLmNvbmZpZywgcmVuZGVyT3B0aW9uLmNvbmZpZyk7CiAgICAgICAgICBwcm9wcy5xdWVyeXBhcmFtcyA9IHJlbmRlck9wdGlvbi5xdWVyeXBhcmFtcyB8fCBwcm9wcy5xdWVyeXBhcmFtczsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmVuZGVyT3B0cyA9IGRlZmF1bHRHbG9hYmFsVXRpbHMubWVyZ2VDb250cmFpbkNvbmZpZyhyZW5kZXJPcHRzLCBwYXJhbXMsIGNvbnRleHQpOwogICAgICB2YXIgcmVuZGVyRGF0YSA9IHJvdzsKICAgICAgdmFyIF9yZWYxMCA9IHByb3BzICYmIHByb3BzLmNvbmZpZyB8fCB7CiAgICAgICAgICBtdWx0aXBsZTogZmFsc2UsCiAgICAgICAgICB2YWx1ZUtleXM6IFsnY29kZScsICduYW1lJywgJ2lkJ10KICAgICAgICB9LAogICAgICAgIHZhbHVlS2V5cyA9IF9yZWYxMC52YWx1ZUtleXMsCiAgICAgICAgaXNIdW1wID0gX3JlZjEwLmlzSHVtcDsKICAgICAgdmFyIGZpZWxka2V5cyA9IGlzSHVtcCA/IFsnQ29kZScsICdOYW1lJywgJ0lkJ10gOiBjb2x1bW4ucHJvcGVydHkuZW5kc1dpdGgoJ18nKSA/IFsnY29kZScsICduYW1lJywgJ2lkJ10gOiBbJ19jb2RlJywgJ19uYW1lJywgJ19pZCddOwogICAgICB2YXIgbXVsdGlwbGVmaWVsZGtleXMgPSBpc0h1bXAgPyBbJ0NvZGVfX211bHRpcGxlJywgJ05hbWVfX211bHRpcGxlJywgJ0lkX19tdWx0aXBsZSddIDogY29sdW1uLnByb3BlcnR5LmVuZHNXaXRoKCdfJykgPyBbJ2NvZGVfX211bHRpcGxlJywgJ25hbWVfX211bHRpcGxlJywgJ2lkX19tdWx0aXBsZSddIDogWydfY29kZV9fbXVsdGlwbGUnLCAnX25hbWVfX211bHRpcGxlJywgJ19pZF9fbXVsdGlwbGUnXTsKICAgICAgdmFsdWVLZXlzID0gdmFsdWVLZXlzIHx8IFsnY29kZScsICduYW1lJywgJ2lkJ107CiAgICAgIHJldHVybiBbaCgnQnNUcmVlJywgewogICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgcmVmOiAndnhlLXRyZWUtJyArIGNvbHVtbi5wcm9wZXJ0eSwKICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLAogICAgICAgICAgdmFsdWU6IHJvd1tjb2x1bW4ucHJvcGVydHldCiAgICAgICAgfSwgcHJvcHMpLCB7fSwgewogICAgICAgICAgdHJlZURhdGE6IG9wdGlvbnMgfHwgW10sCiAgICAgICAgICBpc0Ryb3BTZWxlY3RUcmVlOiB0cnVlCiAgICAgICAgfSksCiAgICAgICAgb246IHsKICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiBpbnB1dCh2YWx1ZSkgewogICAgICAgICAgICByZW5kZXJEYXRhW2NvbHVtbi5wcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgICAgIH0sCiAgICAgICAgICBvbk5vZGVDbGljazogZnVuY3Rpb24gb25Ob2RlQ2xpY2soX3JlZjExKSB7CiAgICAgICAgICAgIHZhciBub2RlID0gX3JlZjExLm5vZGUsCiAgICAgICAgICAgICAgdHJlZURhdGEgPSBfcmVmMTEudHJlZURhdGE7CiAgICAgICAgICAgIGlmIChub2RlICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgcmVuZGVyRGF0YVtjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMl1dID0gbm9kZVt2YWx1ZUtleXNbMl1dOwogICAgICAgICAgICAgIHJlbmRlckRhdGFbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzBdXSA9IG5vZGVbdmFsdWVLZXlzWzBdXTsKICAgICAgICAgICAgICByZW5kZXJEYXRhW2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1sxXV0gPSBub2RlW3ZhbHVlS2V5c1sxXV07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVuZGVyRGF0YVtjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMl1dID0gJyc7CiAgICAgICAgICAgICAgcmVuZGVyRGF0YVtjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMF1dID0gJyc7CiAgICAgICAgICAgICAgcmVuZGVyRGF0YVtjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMV1dID0gJyc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnNUYWJsZS5jZWxsT3B0aW9uQ2FsbEJhY2socGFyYW1zLCB7CiAgICAgICAgICAgICAgb3B0aW9uVHlwZTogJ25vZGVDbGljaycsCiAgICAgICAgICAgICAgbm9kZTogbm9kZSwKICAgICAgICAgICAgICB0cmVlRGF0YTogdHJlZURhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LAogICAgICAgICAgb25Ob2RlQ2hlY2tDbGljazogZnVuY3Rpb24gb25Ob2RlQ2hlY2tDbGljayhfcmVmMTIpIHsKICAgICAgICAgICAgdmFyIG5vZGVzID0gX3JlZjEyLm5vZGVzLAogICAgICAgICAgICAgIG5vZGUgPSBfcmVmMTIubm9kZSwKICAgICAgICAgICAgICB0cmVlRGF0YSA9IF9yZWYxMi50cmVlRGF0YSwKICAgICAgICAgICAgICB2YWx1ZSA9IF9yZWYxMi52YWx1ZTsKICAgICAgICAgICAgcmVuZGVyRGF0YVtjb2x1bW4ucHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1syXV0gPSBub2Rlcy5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1bdmFsdWVLZXlzWzJdXSA/IGl0ZW1bdmFsdWVLZXlzWzJdXSA6ICcnOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVuZGVyRGF0YVtjb2x1bW4ucHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1swXV0gPSBub2Rlcy5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1bdmFsdWVLZXlzWzBdXSA/IGl0ZW1bdmFsdWVLZXlzWzBdXSA6ICcnOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVuZGVyRGF0YVtjb2x1bW4ucHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1sxXV0gPSBub2Rlcy5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1bdmFsdWVLZXlzWzFdXSA/IGl0ZW1bdmFsdWVLZXlzWzFdXSA6ICcnOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVuZGVyRGF0YVtjb2x1bW4ucHJvcGVydHkgKyBmaWVsZGtleXNbMl1dID0gcmVuZGVyRGF0YVtjb2x1bW4ucHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1syXV0uam9pbignLCcpOwogICAgICAgICAgICByZW5kZXJEYXRhW2NvbHVtbi5wcm9wZXJ0eSArIGZpZWxka2V5c1swXV0gPSByZW5kZXJEYXRhW2NvbHVtbi5wcm9wZXJ0eSArIG11bHRpcGxlZmllbGRrZXlzWzBdXS5qb2luKCcsJyk7CiAgICAgICAgICAgIHJlbmRlckRhdGFbY29sdW1uLnByb3BlcnR5ICsgZmllbGRrZXlzWzFdXSA9IHJlbmRlckRhdGFbY29sdW1uLnByb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbMV1dLmpvaW4oJywnKTsKICAgICAgICAgICAgYnNUYWJsZS5jZWxsT3B0aW9uQ2FsbEJhY2socGFyYW1zLCB7CiAgICAgICAgICAgICAgb3B0aW9uVHlwZTogJ25vZGVDaGVja0NsaWNrJywKICAgICAgICAgICAgICBub2RlOiBub2RlLAogICAgICAgICAgICAgIG5vZGVzOiBub2RlcywKICAgICAgICAgICAgICB0cmVlRGF0YTogdHJlZURhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KV07CiAgICB9LAogICAgcmVuZGVySXRlbTogZnVuY3Rpb24gcmVuZGVySXRlbShoLCByZW5kZXJPcHRzLCBfcmVmMTMpIHsKICAgICAgdmFyICRmb3JtID0gX3JlZjEzLiRmb3JtLAogICAgICAgIHByb3BlcnR5ID0gX3JlZjEzLnByb3BlcnR5LAogICAgICAgIGRhdGEgPSBfcmVmMTMuZGF0YTsKICAgICAgdmFyIHByb3BzID0gcmVuZGVyT3B0cy5wcm9wcywKICAgICAgICBvcHRpb25zID0gcmVuZGVyT3B0cy5vcHRpb25zOwogICAgICB2YXIgcmVuZGVyRGF0YSA9IGRhdGE7CiAgICAgIHZhciBfcmVmMTQgPSBwcm9wcyAmJiBwcm9wcy5jb25maWcgfHwgewogICAgICAgICAgZm9ybWF0OiAne2NvZGV9LXtuYW1lfScsCiAgICAgICAgICBtdWx0aXBsZTogZmFsc2UsCiAgICAgICAgICB2YWx1ZUtleXM6IFsnY29kZScsICduYW1lJywgJ2lkJ10KICAgICAgICB9LAogICAgICAgIG11bHRpcGxlID0gX3JlZjE0Lm11bHRpcGxlLAogICAgICAgIGlzSHVtcCA9IF9yZWYxNC5pc0h1bXAsCiAgICAgICAgdmFsdWVLZXlzID0gX3JlZjE0LnZhbHVlS2V5cywKICAgICAgICBmb3JtYXQgPSBfcmVmMTQuZm9ybWF0OwogICAgICB2YWx1ZUtleXMgPSB2YWx1ZUtleXMgfHwgWydjb2RlJywgJ25hbWUnLCAnaWQnXTsKICAgICAgdmFyIGZpZWxka2V5cyA9IGlzSHVtcCA/IFsnQ29kZScsICdOYW1lJywgJ0lkJ10gOiBwcm9wZXJ0eS5lbmRzV2l0aCgnXycpID8gWydjb2RlJywgJ25hbWUnLCAnaWQnXSA6IFsnX2NvZGUnLCAnX25hbWUnLCAnX2lkJ107CiAgICAgIHZhciBtdWx0aXBsZWZpZWxka2V5cyA9IGlzSHVtcCA/IFsnQ29kZV9fbXVsdGlwbGUnLCAnTmFtZV9fbXVsdGlwbGUnLCAnSWRfX211bHRpcGxlJywgJ19fdmlld1NvcnQnXSA6IHByb3BlcnR5LmVuZHNXaXRoKCdfJykgPyBbJ2NvZGVfX211bHRpcGxlJywgJ25hbWVfX211bHRpcGxlJywgJ2lkX19tdWx0aXBsZScsICdfdmlld1NvcnQnXSA6IFsnX2NvZGVfX211bHRpcGxlJywgJ19uYW1lX19tdWx0aXBsZScsICdfaWRfX211bHRpcGxlJywgJ19fdmlld1NvcnQnXTsKICAgICAgZm9ybWF0ID0gZm9ybWF0IHx8ICd7JyArIHZhbHVlS2V5c1swXSArICd9LXsnICsgdmFsdWVLZXlzWzFdICsgJ30nOwogICAgICBpZiAoIW11bHRpcGxlKSB7CiAgICAgICAgdmFyIF9kZWZhdWx0R2xvYmFsVXRpbHMkZjsKICAgICAgICBkYXRhW3Byb3BlcnR5XSA9IFtkYXRhW3Byb3BlcnR5ICsgZmllbGRrZXlzWzBdXSwgZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1sxXV0sIGRhdGFbcHJvcGVydHkgKyBmaWVsZGtleXNbMl1dXS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICByZXR1cm4gKGl0ZW0gKyAnJykucmVwbGFjZSgvbnVsbHx1bmRlZmluZWQvaWcsICcnKTsKICAgICAgICB9KS5qb2luKCcjIycpLnJlcGxhY2UoJyMjIyMnLCAnJyk7CiAgICAgICAgZGF0YVtwcm9wZXJ0eSArIG11bHRpcGxlZmllbGRrZXlzWzNdXSA9IGRhdGFbcHJvcGVydHldID09PSAnJyA/ICcnIDogZGVmYXVsdEdsb2JhbFV0aWxzLmZvcm1hdExhYmVsKGZvcm1hdCwgKF9kZWZhdWx0R2xvYmFsVXRpbHMkZiA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2RlZmF1bHRHbG9iYWxVdGlscyRmLCB2YWx1ZUtleXNbMF0sIGRhdGFbcHJvcGVydHkgKyBmaWVsZGtleXNbMF1dKSwgX2RlZmluZVByb3BlcnR5KF9kZWZhdWx0R2xvYmFsVXRpbHMkZiwgdmFsdWVLZXlzWzFdLCBkYXRhW3Byb3BlcnR5ICsgZmllbGRrZXlzWzFdXSksIF9kZWZpbmVQcm9wZXJ0eShfZGVmYXVsdEdsb2JhbFV0aWxzJGYsIHZhbHVlS2V5c1syXSwgZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1syXV0pLCBfZGVmYXVsdEdsb2JhbFV0aWxzJGYpLCB2YWx1ZUtleXMpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWkhOeQhuWkmumAieWkjeeOsOS6i+WHuueOsOW+queOr+W8leeUqOmXrumimAogICAgICAgIGlmICghZGF0YVtwcm9wZXJ0eV0gJiYgQXJyYXkuaXNBcnJheShkYXRhW3Byb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbMl1dKSAmJiAhZGF0YVtwcm9wZXJ0eSArIG11bHRpcGxlZmllbGRrZXlzWzJdXS5sZW5ndGgpIHsKICAgICAgICAgIGRlbGV0ZSBkYXRhW3Byb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbMl1dOwogICAgICAgIH0KICAgICAgICBpZiAoIWRhdGFbcHJvcGVydHldICYmIEFycmF5LmlzQXJyYXkoZGF0YVtwcm9wZXJ0eSArIG11bHRpcGxlZmllbGRrZXlzWzBdXSkgJiYgIWRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1swXV0ubGVuZ3RoKSB7CiAgICAgICAgICBkZWxldGUgZGF0YVtwcm9wZXJ0eSArIG11bHRpcGxlZmllbGRrZXlzWzBdXTsKICAgICAgICB9CiAgICAgICAgaWYgKCFkYXRhW3Byb3BlcnR5XSAmJiBBcnJheS5pc0FycmF5KGRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1sxXV0pICYmICFkYXRhW3Byb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbMV1dLmxlbmd0aCkgewogICAgICAgICAgZGVsZXRlIGRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1sxXV07CiAgICAgICAgfQogICAgICAgIHZhciBpZEFyciA9IHR5cGVvZiBkYXRhW3Byb3BlcnR5ICsgZmllbGRrZXlzWzJdXSA9PT0gJ3N0cmluZycgJiYgZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1syXV0gIT09ICcnID8gZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1syXV0uc3BsaXQoJywnKSA6IEFycmF5LmlzQXJyYXkoZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1syXV0pID8gZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1syXV0gOiBBcnJheS5pc0FycmF5KGRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1syXV0pICYmIGRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1syXV0ubGVuZ3RoID4gMCA/IGRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1syXV0gOiBbXTsKICAgICAgICB2YXIgY29kZUFyciA9IHR5cGVvZiBkYXRhW3Byb3BlcnR5ICsgZmllbGRrZXlzWzBdXSA9PT0gJ3N0cmluZycgJiYgZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1swXV0gIT09ICcnID8gZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1swXV0uc3BsaXQoJywnKSA6IEFycmF5LmlzQXJyYXkoZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1swXV0pID8gZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1swXV0gOiBBcnJheS5pc0FycmF5KGRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1swXV0pICYmIGRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1swXV0ubGVuZ3RoID4gMCA/IGRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1swXV0gOiBbXTsKICAgICAgICB2YXIgbmFtZUFyciA9IHR5cGVvZiBkYXRhW3Byb3BlcnR5ICsgZmllbGRrZXlzWzFdXSA9PT0gJ3N0cmluZycgJiYgZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1sxXV0gIT09ICcnID8gZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1sxXV0uc3BsaXQoJywnKSA6IEFycmF5LmlzQXJyYXkoZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1sxXV0pID8gZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1sxXV0gOiBBcnJheS5pc0FycmF5KGRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1sxXV0pICYmIGRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1sxXV0ubGVuZ3RoID4gMCA/IGRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1sxXV0gOiBbXTsKICAgICAgICBkYXRhW3Byb3BlcnR5XSA9IG5hbWVBcnIubGVuZ3RoIHx8IGNvZGVBcnIubGVuZ3RoID8gY29kZUFyci5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICByZXR1cm4gW2NvZGVBcnJbaW5kZXhdLCBuYW1lQXJyW2luZGV4XSwgaWRBcnJbaW5kZXhdXS5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgIHJldHVybiAoaXRlbSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZC9pZywgJycpOwogICAgICAgICAgfSkuam9pbignIyMnKS5yZXBsYWNlKCcjIyMjJywgJycpOwogICAgICAgIH0pLmpvaW4oJywnKSA6ICcnOwogICAgICAgIGRhdGFbcHJvcGVydHkgKyBmaWVsZGtleXNbMl1dID0gZGF0YVtwcm9wZXJ0eV0gPT09ICcnID8gJycgOiBpZEFyci5qb2luKCcsJyk7CiAgICAgICAgZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1swXV0gPSBkYXRhW3Byb3BlcnR5XSA9PT0gJycgPyAnJyA6IGNvZGVBcnIuam9pbignLCcpOwogICAgICAgIGRhdGFbcHJvcGVydHkgKyBmaWVsZGtleXNbMV1dID0gZGF0YVtwcm9wZXJ0eV0gPT09ICcnID8gJycgOiBuYW1lQXJyLmpvaW4oJywnKTsKICAgICAgICBkYXRhW3Byb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbMl1dID0gZGF0YVtwcm9wZXJ0eV0gPT09ICcnID8gW10gOiBpZEFycjsKICAgICAgICBkYXRhW3Byb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbMF1dID0gZGF0YVtwcm9wZXJ0eV0gPT09ICcnID8gW10gOiBjb2RlQXJyOwogICAgICAgIGRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1sxXV0gPSBkYXRhW3Byb3BlcnR5XSA9PT0gJycgPyBbXSA6IG5hbWVBcnI7CiAgICAgICAgZGF0YVtwcm9wZXJ0eSArIG11bHRpcGxlZmllbGRrZXlzWzNdXSA9IGRhdGFbcHJvcGVydHldID09PSAnJyA/ICcnIDogY29kZUFyci5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICB2YXIgX2RlZmF1bHRHbG9iYWxVdGlscyRmMjsKICAgICAgICAgIHJldHVybiBkZWZhdWx0R2xvYmFsVXRpbHMuZm9ybWF0TGFiZWwoZm9ybWF0LCAoX2RlZmF1bHRHbG9iYWxVdGlscyRmMiA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2RlZmF1bHRHbG9iYWxVdGlscyRmMiwgdmFsdWVLZXlzWzBdLCBjb2RlQXJyW2luZGV4XSksIF9kZWZpbmVQcm9wZXJ0eShfZGVmYXVsdEdsb2JhbFV0aWxzJGYyLCB2YWx1ZUtleXNbMV0sIG5hbWVBcnJbaW5kZXhdKSwgX2RlZmluZVByb3BlcnR5KF9kZWZhdWx0R2xvYmFsVXRpbHMkZjIsIHZhbHVlS2V5c1syXSwgaWRBcnJbaW5kZXhdKSwgX2RlZmF1bHRHbG9iYWxVdGlscyRmMiksIHZhbHVlS2V5cyk7CiAgICAgICAgfSkuam9pbignLCcpOwogICAgICB9CiAgICAgIGlmICgkZm9ybS4kcGFyZW50LmVkaXRhYmxlICE9PSBmYWxzZSAmJiBwcm9wcy5lZGl0YWJsZSAhPT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gW2goJ0JzVHJlZScsIHsKICAgICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICByZWY6ICd2eGUtdHJlZS0nICsgcHJvcGVydHksCiAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLAogICAgICAgICAgICB2YWx1ZTogZGF0YVtwcm9wZXJ0eV0KICAgICAgICAgIH0sIHByb3BzKSwge30sIHsKICAgICAgICAgICAgdHJlZURhdGE6IG9wdGlvbnMgfHwgW10sCiAgICAgICAgICAgIGlzRHJvcFNlbGVjdFRyZWU6IHRydWUKICAgICAgICAgIH0pLAogICAgICAgICAgb246IHsKICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7CiAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgICAgICAgICAvLyDogZrnhKblkJHlpJbliIblj5Hkuovku7YKICAgICAgICAgICAgICAocHJvcHMgPT09IG51bGwgfHwgcHJvcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb3BzLmF1dG9Gb2N1c0Rpc3BhdGNoKSAmJiAkZm9ybS4kcGFyZW50Lml0ZW1DaGFuZ2UoewogICAgICAgICAgICAgICAgJGZvcm06ICRmb3JtLAogICAgICAgICAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5LAogICAgICAgICAgICAgICAgaXRlbVZhbHVlOiBkYXRhW3Byb3BlcnR5XSwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzLAogICAgICAgICAgICAgICAgbm9kZToge30sCiAgICAgICAgICAgICAgICB0cmVlRGF0YTogW10KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25Ob2RlQ2xpY2s6IGZ1bmN0aW9uIG9uTm9kZUNsaWNrKF9yZWYxNSkgewogICAgICAgICAgICAgIHZhciBub2RlID0gX3JlZjE1Lm5vZGUsCiAgICAgICAgICAgICAgICB0cmVlRGF0YSA9IF9yZWYxNS50cmVlRGF0YSwKICAgICAgICAgICAgICAgIHZhbHVlID0gX3JlZjE1LnZhbHVlOwogICAgICAgICAgICAgIC8vIGxpbWl0Q2hlY2tlZEVuZCDmoIfor4blj6rog73pgInlj5bmnKvnuqcKICAgICAgICAgICAgICBpZiAobm9kZSAhPT0gbnVsbCAmJiAoIXByb3BzLmxpbWl0Q2hlY2tlZEVuZCB8fCAhbm9kZS5jaGlsZHJlbiB8fCBub2RlLmNoaWxkcmVuICYmICFub2RlLmNoaWxkcmVuLmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgIHJlbmRlckRhdGFbcHJvcGVydHkgKyBmaWVsZGtleXNbMl1dID0gbm9kZVt2YWx1ZUtleXNbMl1dOwogICAgICAgICAgICAgICAgcmVuZGVyRGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1swXV0gPSBub2RlW3ZhbHVlS2V5c1swXV07CiAgICAgICAgICAgICAgICByZW5kZXJEYXRhW3Byb3BlcnR5ICsgZmllbGRrZXlzWzFdXSA9IG5vZGVbdmFsdWVLZXlzWzFdXTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVuZGVyRGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1syXV0gPSBub2RlICYmIHZhbHVlID8gZGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1syXV0gfHwgJycgOiAnJzsKICAgICAgICAgICAgICAgIHJlbmRlckRhdGFbcHJvcGVydHkgKyBmaWVsZGtleXNbMF1dID0gbm9kZSAmJiB2YWx1ZSA/IGRhdGFbcHJvcGVydHkgKyBmaWVsZGtleXNbMF1dIHx8ICcnIDogJyc7CiAgICAgICAgICAgICAgICByZW5kZXJEYXRhW3Byb3BlcnR5ICsgZmllbGRrZXlzWzFdXSA9IG5vZGUgJiYgdmFsdWUgPyBkYXRhW3Byb3BlcnR5ICsgZmllbGRrZXlzWzFdXSB8fCAnJyA6ICcnOwogICAgICAgICAgICAgICAgdmFsdWUgPSBub2RlICYmIHZhbHVlICYmIGRhdGFbcHJvcGVydHldIHx8ICcnOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZW5kZXJEYXRhW3Byb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbM11dID0gdmFsdWU7CiAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogZGF0YVtwcm9wZXJ0eV0sCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgcmVuZGVyT3B0czogcmVuZGVyT3B0cywKICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUsCiAgICAgICAgICAgICAgICB0cmVlRGF0YTogdHJlZURhdGEKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25Ob2RlQ2hlY2tDbGljazogZnVuY3Rpb24gb25Ob2RlQ2hlY2tDbGljayhfcmVmMTYpIHsKICAgICAgICAgICAgICB2YXIgbm9kZSA9IF9yZWYxNi5ub2RlLAogICAgICAgICAgICAgICAgbm9kZXMgPSBfcmVmMTYubm9kZXMsCiAgICAgICAgICAgICAgICB0cmVlRGF0YSA9IF9yZWYxNi50cmVlRGF0YSwKICAgICAgICAgICAgICAgIHZhbHVlID0gX3JlZjE2LnZhbHVlOwogICAgICAgICAgICAgIHJlbmRlckRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1syXV0gPSBub2Rlcy5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbVt2YWx1ZUtleXNbMl1dID8gaXRlbVt2YWx1ZUtleXNbMl1dIDogJyc7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgcmVuZGVyRGF0YVtwcm9wZXJ0eSArIG11bHRpcGxlZmllbGRrZXlzWzBdXSA9IG5vZGVzLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgIHJldHVybiBpdGVtW3ZhbHVlS2V5c1swXV0gPyBpdGVtW3ZhbHVlS2V5c1swXV0gOiAnJzsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZW5kZXJEYXRhW3Byb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbMV1dID0gbm9kZXMubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1bdmFsdWVLZXlzWzFdXSA/IGl0ZW1bdmFsdWVLZXlzWzFdXSA6ICcnOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJlbmRlckRhdGFbcHJvcGVydHkgKyBmaWVsZGtleXNbMl1dID0gcmVuZGVyRGF0YVtwcm9wZXJ0eSArIG11bHRpcGxlZmllbGRrZXlzWzJdXS5qb2luKCcsJyk7CiAgICAgICAgICAgICAgcmVuZGVyRGF0YVtwcm9wZXJ0eSArIGZpZWxka2V5c1swXV0gPSByZW5kZXJEYXRhW3Byb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbMF1dLmpvaW4oJywnKTsKICAgICAgICAgICAgICByZW5kZXJEYXRhW3Byb3BlcnR5ICsgZmllbGRrZXlzWzFdXSA9IHJlbmRlckRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1sxXV0uam9pbignLCcpOwogICAgICAgICAgICAgIGRhdGFbcHJvcGVydHkgKyBtdWx0aXBsZWZpZWxka2V5c1szXV0gPSB2YWx1ZTsKICAgICAgICAgICAgICAkZm9ybS4kcGFyZW50Lml0ZW1DaGFuZ2UoewogICAgICAgICAgICAgICAgJGZvcm06ICRmb3JtLAogICAgICAgICAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5LAogICAgICAgICAgICAgICAgaXRlbVZhbHVlOiBkYXRhW3Byb3BlcnR5XSwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzLAogICAgICAgICAgICAgICAgbm9kZTogbm9kZSwKICAgICAgICAgICAgICAgIG5vZGVzOiBub2RlcywKICAgICAgICAgICAgICAgIHRyZWVEYXRhOiB0cmVlRGF0YQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSldOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgICAgICJjbGFzcyI6ICJ0ZXh0IGJsb2NrIHRsIgogICAgICAgIH0sIFtkYXRhW3Byb3BlcnR5ICsgbXVsdGlwbGVmaWVsZGtleXNbM11dXSldOwogICAgICB9CiAgICB9CiAgfSwKICAkdnhlU2VsZWN0OiB7CiAgICAvLyDkuIvmi4npgInmi6kKICAgIHJlbmRlckRlZmF1bHQ6IGZ1bmN0aW9uIHJlbmRlckRlZmF1bHQoaCwgX3JlZjE3LCBfcmVmMTgsIGNvbnRleHQpIHsKICAgICAgdmFyIF9yZWYxNyRwcm9wcyA9IF9yZWYxNy5wcm9wcywKICAgICAgICBwcm9wcyA9IF9yZWYxNyRwcm9wcyA9PT0gdm9pZCAwID8ge30gOiBfcmVmMTckcHJvcHMsCiAgICAgICAgb3B0aW9ucyA9IF9yZWYxNy5vcHRpb25zOwogICAgICB2YXIgcm93ID0gX3JlZjE4LnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmMTguY29sdW1uOwogICAgICByb3dbY29sdW1uLnByb3BlcnR5XSA9IChyb3dbY29sdW1uLnByb3BlcnR5XSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZC9pZywgJycpOwogICAgICBpZiAocHJvcHMubXVsdGlwbGUpIHsKICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbXVsdGlwbGUnXSA9IHJvd1tjb2x1bW4ucHJvcGVydHldID09PSAnJyA/IFtdIDogcm93W2NvbHVtbi5wcm9wZXJ0eV0uc3BsaXQoJywnKTsKICAgICAgICB2YXIgYXJyVmFsdWUgPSBbXTsKICAgICAgICBvcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICBpZiAocm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX211bHRpcGxlJ10uaW5kZXhPZihpdGVtLnZhbHVlICsgJycpID49IDApIHsKICAgICAgICAgICAgYXJyVmFsdWUucHVzaChpdGVtLmxhYmVsKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXSA9IGFyclZhbHVlLmpvaW4oJywnKTsKICAgICAgICByZXR1cm4gW2goInNwYW4iLCBbcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J11dKV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIF9hcnJWYWx1ZSA9IFtdOwogICAgICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIGlmIChyb3dbY29sdW1uLnByb3BlcnR5XSArICcnID09PSBpdGVtLnZhbHVlICsgJycpIHsKICAgICAgICAgICAgX2FyclZhbHVlLnB1c2goaXRlbS5sYWJlbCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSBfYXJyVmFsdWUuam9pbignLCcpOwogICAgICAgIHJldHVybiBbaCgic3BhbiIsIFtyb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXV0pXTsKICAgICAgfQogICAgfSwKICAgIHJlbmRlckNlbGw6IGZ1bmN0aW9uIHJlbmRlckNlbGwoaCwgX3JlZjE5LCBfcmVmMjAsIGNvbnRleHQpIHsKICAgICAgdmFyIF9yZWYxOSRwcm9wcyA9IF9yZWYxOS5wcm9wcywKICAgICAgICBwcm9wcyA9IF9yZWYxOSRwcm9wcyA9PT0gdm9pZCAwID8ge30gOiBfcmVmMTkkcHJvcHMsCiAgICAgICAgb3B0aW9ucyA9IF9yZWYxOS5vcHRpb25zOwogICAgICB2YXIgcm93ID0gX3JlZjIwLnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmMjAuY29sdW1uOwogICAgICByb3dbY29sdW1uLnByb3BlcnR5XSA9IChyb3dbY29sdW1uLnByb3BlcnR5XSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZC9pZywgJycpOwogICAgICAvLyAvLyByb3dbY29sdW1uLnByb3BlcnR5XSA9IHR5cGVvZiAocm93W2NvbHVtbi5wcm9wZXJ0eV0pID09PSAnc3RyaW5nJyA/IHJvd1tjb2x1bW4ucHJvcGVydHldIDogKEFycmF5LmlzQXJyYXkocm93W2NvbHVtbi5wcm9wZXJ0eV0pID8gcm93W2NvbHVtbi5wcm9wZXJ0eV0uam9pbignLCcpIDogJycpCiAgICAgIGlmIChwcm9wcy5tdWx0aXBsZSkgewogICAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX19tdWx0aXBsZSddID0gcm93W2NvbHVtbi5wcm9wZXJ0eV0gPT09ICcnID8gW10gOiByb3dbY29sdW1uLnByb3BlcnR5XS5zcGxpdCgnLCcpOwogICAgICAgIHZhciBhcnJWYWx1ZSA9IFtdOwogICAgICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIGlmIChyb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbXVsdGlwbGUnXS5pbmRleE9mKGl0ZW0udmFsdWUgKyAnJykgPj0gMCkgewogICAgICAgICAgICBhcnJWYWx1ZS5wdXNoKGl0ZW0ubGFiZWwpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddID0gYXJyVmFsdWUuam9pbignLCcpOwogICAgICAgIHJldHVybiBbaCgic3BhbiIsIFtyb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXV0pXTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgX2FyclZhbHVlMiA9IFtdOwogICAgICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIGlmIChyb3dbY29sdW1uLnByb3BlcnR5XSArICcnID09PSBpdGVtLnZhbHVlICsgJycpIHsKICAgICAgICAgICAgX2FyclZhbHVlMi5wdXNoKGl0ZW0ubGFiZWwpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddID0gX2FyclZhbHVlMi5qb2luKCcsJyk7CiAgICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgW3Jvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddXSldOwogICAgICB9CiAgICB9LAogICAgcmVuZGVyRWRpdDogZnVuY3Rpb24gcmVuZGVyRWRpdChoLCByZW5kZXJPcHRzLCBwYXJhbXMsIGNvbnRleHQpIHsKICAgICAgdmFyIF9yZW5kZXJPcHRzJHByb3BzID0gcmVuZGVyT3B0cy5wcm9wcywKICAgICAgICBwcm9wcyA9IF9yZW5kZXJPcHRzJHByb3BzID09PSB2b2lkIDAgPyB7fSA6IF9yZW5kZXJPcHRzJHByb3BzLAogICAgICAgIG9wdGlvbnMgPSByZW5kZXJPcHRzLm9wdGlvbnM7CiAgICAgIHZhciByb3cgPSBwYXJhbXMucm93LAogICAgICAgIGNvbHVtbiA9IHBhcmFtcy5jb2x1bW47CiAgICAgIHZhciBic1RhYmxlID0gY29udGV4dC4kZ3JpZC4kcGFyZW50OwogICAgICByb3dbY29sdW1uLnByb3BlcnR5XSA9IHR5cGVvZiByb3dbY29sdW1uLnByb3BlcnR5XSA9PT0gJ3N0cmluZycgPyByb3dbY29sdW1uLnByb3BlcnR5XSA6IEFycmF5LmlzQXJyYXkocm93W2NvbHVtbi5wcm9wZXJ0eV0pID8gcm93W2NvbHVtbi5wcm9wZXJ0eV0uam9pbignLCcpIDogJyc7CiAgICAgIGlmIChwcm9wcy5tdWx0aXBsZSkgewogICAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX19tdWx0aXBsZSddID0gcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX211bHRpcGxlJ10gPSByb3dbY29sdW1uLnByb3BlcnR5XSA9PT0gJycgPyBbXSA6IHJvd1tjb2x1bW4ucHJvcGVydHldLnNwbGl0KCcsJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIFtoKCd2eGUtc2VsZWN0JywgewogICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgcmVmOiAndnhlLXNlbGVjdC0nICsgY29sdW1uLnByb3BlcnR5LAogICAgICAgICAgdmFsdWU6IHByb3BzLm11bHRpcGxlID8gcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX211bHRpcGxlJ10gOiByb3dbY29sdW1uLnByb3BlcnR5XSwKICAgICAgICAgIHBsYWNlaG9sZGVyOiAn6K+36YCJ5oupJwogICAgICAgIH0sIHByb3BzKSwge30sIHsKICAgICAgICAgIHRyYW5zZmVyOiB0cnVlCiAgICAgICAgfSksCiAgICAgICAgb246IHsKICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKF9yZWYyMSkgewogICAgICAgICAgICB2YXIgdmFsdWUgPSBfcmVmMjEudmFsdWU7CiAgICAgICAgICAgIHZhciBhcnJWYWx1ZSA9IFtdOwogICAgICAgICAgICBpZiAocHJvcHMubXVsdGlwbGUpIHsKICAgICAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbXVsdGlwbGUnXSA9IHZhbHVlOwogICAgICAgICAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHldID0gdmFsdWUuam9pbignLCcpOwogICAgICAgICAgICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgIGlmIChyb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbXVsdGlwbGUnXS5pbmRleE9mKGl0ZW0udmFsdWUgKyAnJykgPj0gMCkgewogICAgICAgICAgICAgICAgICBhcnJWYWx1ZS5wdXNoKGl0ZW0ubGFiZWwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGJzVGFibGUuY2VsbE9wdGlvbkNhbGxCYWNrKHBhcmFtcywgewogICAgICAgICAgICAgICAgb3B0aW9uVHlwZTogJ3NlbGVjdCcsCiAgICAgICAgICAgICAgICBtdWx0aXBsZTogcHJvcHMubXVsdGlwbGUsCiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgICAgICAgICB2aWV3VmFsdWU6IGFyclZhbHVlLAogICAgICAgICAgICAgICAgZmllbGQ6IGNvbHVtbi5wcm9wZXJ0eSwKICAgICAgICAgICAgICAgIHJlbmRlck9wdHM6IHJlbmRlck9wdHMKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5XSA9IHZhbHVlOwogICAgICAgICAgICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgIGlmIChyb3dbY29sdW1uLnByb3BlcnR5XSArICcnID09PSBpdGVtLnZhbHVlICsgJycpIHsKICAgICAgICAgICAgICAgICAgYXJyVmFsdWUucHVzaChpdGVtLmxhYmVsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBic1RhYmxlLmNlbGxPcHRpb25DYWxsQmFjayhwYXJhbXMsIHsKICAgICAgICAgICAgICAgIG9wdGlvblR5cGU6ICdzZWxlY3QnLAogICAgICAgICAgICAgICAgbXVsdGlwbGU6IHByb3BzLm11bHRpcGxlLAogICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgICAgICAgICAgdmlld1ZhbHVlOiBhcnJWYWx1ZVswXSwKICAgICAgICAgICAgICAgIGZpZWxkOiBjb2x1bW4ucHJvcGVydHksCiAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIG9wdGlvbnMubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGgoJ3Z4ZS1vcHRpb24nLCB7CiAgICAgICAgICBwcm9wczogewogICAgICAgICAgICB2YWx1ZTogU3RyaW5nKGl0ZW0udmFsdWUpLAogICAgICAgICAgICBsYWJlbDogaXRlbS5sYWJlbAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KSldOwogICAgfSwKICAgIHJlbmRlckl0ZW06IGZ1bmN0aW9uIHJlbmRlckl0ZW0oaCwgcmVuZGVyT3B0cywgX3JlZjIyKSB7CiAgICAgIHZhciAkZm9ybSA9IF9yZWYyMi4kZm9ybSwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWYyMi5wcm9wZXJ0eSwKICAgICAgICBkYXRhID0gX3JlZjIyLmRhdGE7CiAgICAgIHZhciBfcmVuZGVyT3B0cyRwcm9wczIgPSByZW5kZXJPcHRzLnByb3BzLAogICAgICAgIHByb3BzID0gX3JlbmRlck9wdHMkcHJvcHMyID09PSB2b2lkIDAgPyB7fSA6IF9yZW5kZXJPcHRzJHByb3BzMiwKICAgICAgICBvcHRpb25zID0gcmVuZGVyT3B0cy5vcHRpb25zOwogICAgICBkYXRhW3Byb3BlcnR5XSA9IChkYXRhW3Byb3BlcnR5XSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZC9pZywgJycpOwogICAgICAvLyBpZiAocHJvcHMubXVsdGlwbGUpIHsKICAgICAgLy8gICBkYXRhW3Byb3BlcnR5ICsgJ19fbXVsdGlwbGUnXSA9IChkYXRhW3Byb3BlcnR5XSA9PT0gJycpID8gW10gOiBkYXRhW3Byb3BlcnR5XS5zcGxpdCgnLCcpCiAgICAgIC8vIH0KICAgICAgaWYgKCRmb3JtLiRwYXJlbnQuZWRpdGFibGUgIT09IGZhbHNlICYmIHByb3BzLmVkaXRhYmxlICE9PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbaCgndnhlLXNlbGVjdCcsIHsKICAgICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICByZWY6ICd2eGUtc2VsZWN0LScgKyBwcm9wZXJ0eSwKICAgICAgICAgICAgdmFsdWU6IHByb3BzLm11bHRpcGxlID8gZGF0YVtwcm9wZXJ0eSArICdfX211bHRpcGxlJ10gOiBkYXRhW3Byb3BlcnR5XSwKICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICfor7fpgInmi6knCiAgICAgICAgICB9LCBwcm9wcyksIHt9LCB7CiAgICAgICAgICAgIHRyYW5zZmVyOiB0cnVlCiAgICAgICAgICB9KSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKF9yZWYyMykgewogICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9yZWYyMy52YWx1ZTsKICAgICAgICAgICAgICBpZiAocHJvcHMubXVsdGlwbGUpIHsKICAgICAgICAgICAgICAgIGRhdGFbcHJvcGVydHkgKyAnX19tdWx0aXBsZSddID0gdmFsdWU7CiAgICAgICAgICAgICAgICBkYXRhW3Byb3BlcnR5XSA9IHZhbHVlLmpvaW4oJywnKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogZGF0YVtwcm9wZXJ0eV0sCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgcmVuZGVyT3B0czogcmVuZGVyT3B0cwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgb3B0aW9ucy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBbaCgndnhlLW9wdGlvbicsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICBkaXNhYmxlZDogaXRlbS5kaXNhYmxlZCwKICAgICAgICAgICAgICB2YWx1ZTogU3RyaW5nKGl0ZW0udmFsdWUpLAogICAgICAgICAgICAgIGxhYmVsOiBpdGVtLmxhYmVsCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pXTsKICAgICAgICB9KSldOwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGFbcHJvcGVydHkgKyAnX19tdWx0aXBsZSddID0gZGF0YVtwcm9wZXJ0eV0gPT09ICcnID8gW10gOiBkYXRhW3Byb3BlcnR5XS5zcGxpdCgnLCcpOwogICAgICAgIHZhciBhcnJWYWx1ZSA9IFtdOwogICAgICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIGlmIChkYXRhW3Byb3BlcnR5ICsgJ19fbXVsdGlwbGUnXS5pbmRleE9mKGl0ZW0udmFsdWUgKyAnJykgPj0gMCkgewogICAgICAgICAgICBhcnJWYWx1ZS5wdXNoKGl0ZW0ubGFiZWwpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGRhdGFbcHJvcGVydHkgKyAnX192aWV3U29ydCddID0gYXJyVmFsdWUuam9pbignLCcpOwogICAgICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgICAgICJjbGFzcyI6ICJ0ZXh0IGJsb2NrIgogICAgICAgIH0sIFtkYXRhW3Byb3BlcnR5ICsgJ19fdmlld1NvcnQnXV0pXTsKICAgICAgfQogICAgfQogIH0sCiAgJHZ4ZUNoZWNrYm94OiB7CiAgICByZW5kZXJEZWZhdWx0OiBmdW5jdGlvbiByZW5kZXJEZWZhdWx0KGgsIF9yZWYyNCwgX3JlZjI1LCBjb250ZXh0KSB7CiAgICAgIHZhciBvcHRpb25zID0gX3JlZjI0Lm9wdGlvbnMsCiAgICAgICAgX3JlZjI0JHByb3BzID0gX3JlZjI0LnByb3BzLAogICAgICAgIHByb3BzID0gX3JlZjI0JHByb3BzID09PSB2b2lkIDAgPyB7fSA6IF9yZWYyNCRwcm9wczsKICAgICAgdmFyIHJvdyA9IF9yZWYyNS5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjI1LmNvbHVtbjsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eV0gPSB0eXBlb2Ygcm93W2NvbHVtbi5wcm9wZXJ0eV0gPT09ICdzdHJpbmcnID8gcm93W2NvbHVtbi5wcm9wZXJ0eV0gOiBBcnJheS5pc0FycmF5KHJvd1tjb2x1bW4ucHJvcGVydHldKSA/IHJvd1tjb2x1bW4ucHJvcGVydHldLmpvaW4oJywnKSA6ICcnOwogICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbXVsdGlwbGUnXSA9IHJvd1tjb2x1bW4ucHJvcGVydHldLnNwbGl0KCcsJyk7CiAgICAgIHZhciB2YWx1ZSA9IFtdOwogICAgICBvcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgaXRlbS52YWx1ZSA9IGl0ZW0udmFsdWUgKyAnJzsKICAgICAgICBpZiAocm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX211bHRpcGxlJ10uaW5kZXhPZigpID49IDApIHsKICAgICAgICAgIHZhbHVlLnB1c2goaXRlbS5sYWJlbCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSB2YWx1ZS5qb2luKCcsJyk7CiAgICAgIHJldHVybiBbaCgic3BhbiIsIFtyb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXV0pXTsKICAgIH0sCiAgICByZW5kZXJDZWxsOiBmdW5jdGlvbiByZW5kZXJDZWxsKGgsIF9yZWYyNiwgX3JlZjI3KSB7CiAgICAgIHZhciBvcHRpb25zID0gX3JlZjI2Lm9wdGlvbnMsCiAgICAgICAgX3JlZjI2JHByb3BzID0gX3JlZjI2LnByb3BzLAogICAgICAgIHByb3BzID0gX3JlZjI2JHByb3BzID09PSB2b2lkIDAgPyB7fSA6IF9yZWYyNiRwcm9wczsKICAgICAgdmFyIHJvdyA9IF9yZWYyNy5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjI3LmNvbHVtbjsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eV0gPSB0eXBlb2Ygcm93W2NvbHVtbi5wcm9wZXJ0eV0gPT09ICdzdHJpbmcnID8gcm93W2NvbHVtbi5wcm9wZXJ0eV0gOiBBcnJheS5pc0FycmF5KHJvd1tjb2x1bW4ucHJvcGVydHldKSA/IHJvd1tjb2x1bW4ucHJvcGVydHldLmpvaW4oJywnKSA6ICcnOwogICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbXVsdGlwbGUnXSA9IHJvd1tjb2x1bW4ucHJvcGVydHldLnNwbGl0KCcsJyk7CiAgICAgIHZhciB2YWx1ZSA9IFtdOwogICAgICBvcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgaXRlbS52YWx1ZSA9IGl0ZW0udmFsdWUgKyAnJzsKICAgICAgICBpZiAocm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX211bHRpcGxlJ10uaW5kZXhPZihpdGVtLnZhbHVlICsgJycpID49IDApIHsKICAgICAgICAgIHZhbHVlLnB1c2goaXRlbS5sYWJlbCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSB2YWx1ZS5qb2luKCcsJyk7CiAgICAgIHJldHVybiBbaCgic3BhbiIsIFtyb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXV0pXTsKICAgIH0sCiAgICByZW5kZXJFZGl0OiBmdW5jdGlvbiByZW5kZXJFZGl0KGgsIF9yZWYyOCwgX3JlZjI5KSB7CiAgICAgIHZhciBvcHRpb25zID0gX3JlZjI4Lm9wdGlvbnMsCiAgICAgICAgX3JlZjI4JHByb3BzID0gX3JlZjI4LnByb3BzLAogICAgICAgIHByb3BzID0gX3JlZjI4JHByb3BzID09PSB2b2lkIDAgPyB7fSA6IF9yZWYyOCRwcm9wcywKICAgICAgICBfcmVmMjgkcHJvcHNDID0gX3JlZjI4LnByb3BzQywKICAgICAgICBwcm9wc0MgPSBfcmVmMjgkcHJvcHNDID09PSB2b2lkIDAgPyB7fSA6IF9yZWYyOCRwcm9wc0M7CiAgICAgIHZhciByb3cgPSBfcmVmMjkucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWYyOS5jb2x1bW47CiAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHldID0gdHlwZW9mIHJvd1tjb2x1bW4ucHJvcGVydHldID09PSAnc3RyaW5nJyA/IHJvd1tjb2x1bW4ucHJvcGVydHldIDogQXJyYXkuaXNBcnJheShyb3dbY29sdW1uLnByb3BlcnR5XSkgPyByb3dbY29sdW1uLnByb3BlcnR5XS5qb2luKCcsJykgOiAnJzsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX211bHRpcGxlJ10gPSByb3dbY29sdW1uLnByb3BlcnR5XS5zcGxpdCgnLCcpOwogICAgICAvLyByZXR1cm4gWwogICAgICAvLyAgIDx2eGUtY2hlY2tib3gtZ3JvdXAgey4uLnsgcHJvcHMgfX0gdi1tb2RlbD17cm93W2NvbHVtbi5wcm9wZXJ0eV19IHBsYWNlaG9sZGVyPSLor7fpgInmi6kiPgogICAgICAvLyAgICAge29wdGlvbnMubWFwKChpdGVtLCBpbmRleCkgPT4gewogICAgICAvLyAgICAgICByZXR1cm4gWwogICAgICAvLyAgICAgICAgIDx2eGUtY2hlY2tib3gKICAgICAgLy8gICAgICAgICAgIGxhYmVsPXtpdGVtLnZhbHVlfQogICAgICAvLyAgICAgICAgICAgeyAuLi57IHByb3BzQyB9IH0KICAgICAgLy8gICAgICAgICA+MQogICAgICAvLyAgICAgICAgICAge2l0ZW0ubGFiZWx9CiAgICAgIC8vICAgICAgICAgPC92eGUtY2hlY2tib3g+CiAgICAgIC8vICAgICAgIF0KICAgICAgLy8gICAgIH0pfQogICAgICAvLyAgIDwvdnhlLWNoZWNrYm94LWdyb3VwPgogICAgICAvLyBdCiAgICAgIHJldHVybiBbaCgndnhlLWNoZWNrYm94LWdyb3VwJywgewogICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgIHZhbHVlOiByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbXVsdGlwbGUnXQogICAgICAgIH0sIHByb3BzKSwKICAgICAgICBvbjogewogICAgICAgICAgY2hhbmdlOiBmdW5jdGlvbiBjaGFuZ2UoX3JlZjMwKSB7CiAgICAgICAgICAgIHZhciAkZXZlbnQgPSBfcmVmMzAuJGV2ZW50LAogICAgICAgICAgICAgIGNoZWNrZWQgPSBfcmVmMzAuY2hlY2tlZCwKICAgICAgICAgICAgICBjaGVja2xpc3QgPSBfcmVmMzAuY2hlY2tsaXN0LAogICAgICAgICAgICAgIGxhYmVsID0gX3JlZjMwLmxhYmVsOwogICAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbXVsdGlwbGUnXSA9IGNoZWNrbGlzdDsKICAgICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eV0gPSBjaGVja2xpc3Quam9pbignLCcpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgb3B0aW9ucy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaCgndnhlLWNoZWNrYm94JywgewogICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICBkaXNhYmxlZDogaXRlbS5kaXNhYmxlZCwKICAgICAgICAgICAgbGFiZWw6IFN0cmluZyhpdGVtLnZhbHVlKQogICAgICAgICAgfSwgcHJvcHNDKQogICAgICAgIH0sIGl0ZW0ubGFiZWwpOwogICAgICB9KSldOwogICAgfSwKICAgIHJlbmRlckl0ZW06IGZ1bmN0aW9uIHJlbmRlckl0ZW0oaCwgcmVuZGVyT3B0cywgX3JlZjMxKSB7CiAgICAgIHZhciAkZm9ybSA9IF9yZWYzMS4kZm9ybSwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWYzMS5wcm9wZXJ0eSwKICAgICAgICBkYXRhID0gX3JlZjMxLmRhdGE7CiAgICAgIHZhciBfcmVuZGVyT3B0cyRwcm9wczMgPSByZW5kZXJPcHRzLnByb3BzLAogICAgICAgIHByb3BzID0gX3JlbmRlck9wdHMkcHJvcHMzID09PSB2b2lkIDAgPyB7fSA6IF9yZW5kZXJPcHRzJHByb3BzMywKICAgICAgICBfcmVuZGVyT3B0cyRwcm9wc0MgPSByZW5kZXJPcHRzLnByb3BzQywKICAgICAgICBwcm9wc0MgPSBfcmVuZGVyT3B0cyRwcm9wc0MgPT09IHZvaWQgMCA/IHt9IDogX3JlbmRlck9wdHMkcHJvcHNDLAogICAgICAgIG9wdGlvbnMgPSByZW5kZXJPcHRzLm9wdGlvbnM7CiAgICAgIC8vIGlmIChBcnJheS5pc0FycmF5KGRhdGFbcHJvcGVydHldKSkgewogICAgICAvLyAgIGRhdGFbcHJvcGVydHkgKyAnX19tdWx0aXBsZSddID0gWy4uLmRhdGFbcHJvcGVydHldXQogICAgICAvLyB9IGVsc2UgaWYgKHR5cGVvZiBkYXRhW3Byb3BlcnR5XSA9PT0gJ3N0cmluZycpIHsKICAgICAgLy8gICBkYXRhW3Byb3BlcnR5ICsgJ19fbXVsdGlwbGUnXSA9IGRhdGFbcHJvcGVydHldLnNwbGl0KCcsJykKICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gICBkYXRhW3Byb3BlcnR5XSA9ICcnCiAgICAgIC8vICAgZGF0YVtwcm9wZXJ0eSArICdfX211bHRpcGxlJ10gPSBbXQogICAgICAvLyB9CiAgICAgIGlmICgkZm9ybS4kcGFyZW50LmVkaXRhYmxlICE9PSBmYWxzZSAmJiBwcm9wcy5lZGl0YWJsZSAhPT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gW2goJ3Z4ZS1jaGVja2JveC1ncm91cCcsIHsKICAgICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgdmFsdWU6IGRhdGFbcHJvcGVydHkgKyAnX19tdWx0aXBsZSddCiAgICAgICAgICB9LCBwcm9wcyksCiAgICAgICAgICBvbjogewogICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uIGNoYW5nZShfcmVmMzIpIHsKICAgICAgICAgICAgICB2YXIgJGV2ZW50ID0gX3JlZjMyLiRldmVudCwKICAgICAgICAgICAgICAgIGNoZWNrZWQgPSBfcmVmMzIuY2hlY2tlZCwKICAgICAgICAgICAgICAgIGNoZWNrbGlzdCA9IF9yZWYzMi5jaGVja2xpc3QsCiAgICAgICAgICAgICAgICBsYWJlbCA9IF9yZWYzMi5sYWJlbDsKICAgICAgICAgICAgICBkYXRhW3Byb3BlcnR5XSA9IGNoZWNrbGlzdC5qb2luKCcsJyk7CiAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogZGF0YVtwcm9wZXJ0eV0sCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgcmVuZGVyT3B0czogcmVuZGVyT3B0cwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgb3B0aW9ucy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBoKCd2eGUtY2hlY2tib3gnLCB7CiAgICAgICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICBkaXNhYmxlZDogaXRlbS5kaXNhYmxlZCwKICAgICAgICAgICAgICBsYWJlbDogU3RyaW5nKGl0ZW0udmFsdWUpCiAgICAgICAgICAgIH0sIHByb3BzQykKICAgICAgICAgIH0sIGl0ZW0ubGFiZWwpOwogICAgICAgIH0pKV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtoKCd2eGUtY2hlY2tib3gtZ3JvdXAnLCB7CiAgICAgICAgICBwcm9wczogX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgIHZhbHVlOiBkYXRhW3Byb3BlcnR5ICsgJ19fbXVsdGlwbGUnXQogICAgICAgICAgfSwgcHJvcHMpLAogICAgICAgICAgb246IHsKICAgICAgICAgICAgY2hhbmdlOiBmdW5jdGlvbiBjaGFuZ2UoX3JlZjMzKSB7CiAgICAgICAgICAgICAgdmFyICRldmVudCA9IF9yZWYzMy4kZXZlbnQsCiAgICAgICAgICAgICAgICBjaGVja2VkID0gX3JlZjMzLmNoZWNrZWQsCiAgICAgICAgICAgICAgICBjaGVja2xpc3QgPSBfcmVmMzMuY2hlY2tsaXN0LAogICAgICAgICAgICAgICAgbGFiZWwgPSBfcmVmMzMubGFiZWw7CiAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSBjaGVja2xpc3Quam9pbignLCcpOwogICAgICAgICAgICAgICRmb3JtLiRwYXJlbnQuaXRlbUNoYW5nZSh7CiAgICAgICAgICAgICAgICAkZm9ybTogJGZvcm0sCiAgICAgICAgICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHksCiAgICAgICAgICAgICAgICBpdGVtVmFsdWU6IGNoZWNrbGlzdCwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBvcHRpb25zLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGgoJ3Z4ZS1jaGVja2JveCcsIHsKICAgICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlLAogICAgICAgICAgICAgIGxhYmVsOiBTdHJpbmcoaXRlbS52YWx1ZSkKICAgICAgICAgICAgfSwgcHJvcHNDKQogICAgICAgICAgfSwgaXRlbS5sYWJlbCk7CiAgICAgICAgfSkpXTsKICAgICAgfQogICAgfQogIH0sCiAgLy8g5Y2V5YC8CiAgJHZ4ZUlucHV0OiB7CiAgICAvLyDovpPlhaXmoYYKICAgIGF1dG9mb2N1czogJy52eGUtaW5wdXQtLWlubmVyJywKICAgIHJlbmRlckVkaXQ6IGZ1bmN0aW9uIHJlbmRlckVkaXQoaCwgX3JlZjM0LCBfcmVmMzUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIF9yZWYzNCRwcm9wcyA9IF9yZWYzNC5wcm9wcywKICAgICAgICBwcm9wcyA9IF9yZWYzNCRwcm9wcyA9PT0gdm9pZCAwID8ge30gOiBfcmVmMzQkcHJvcHM7CiAgICAgIHZhciByb3cgPSBfcmVmMzUucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWYzNS5jb2x1bW47CiAgICAgIHByb3BzID0gT2JqZWN0LmFzc2lnbih7CiAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgIHBsYWNlaG9sZGVyOiAn6K+36L6T5YWlJwogICAgICB9LCBwcm9wcyB8fCB7fSk7CiAgICAgIHJldHVybiBbaCgidnhlLWlucHV0IiwgewogICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICJwbGFjZWhvbGRlciI6ICLor7fovpPlhaUiLAogICAgICAgICAgImNsZWFyYWJsZSI6IHRydWUsCiAgICAgICAgICAidHJhbnNmZXIiOiB0cnVlCiAgICAgICAgfSwKICAgICAgICAicHJvcHMiOiBfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcyksCiAgICAgICAgIm1vZGVsIjogewogICAgICAgICAgdmFsdWU6IHJvd1tjb2x1bW4ucHJvcGVydHldLAogICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIGNhbGxiYWNrKCQkdikgewogICAgICAgICAgICBfdGhpcy4kc2V0KHJvdywgY29sdW1uLnByb3BlcnR5LCAkJHYpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkgLy8gPGlucHV0IGNsYXNzPSJteS1jZWxsIiB0ZXh0PSJ0ZXh0IiB2LW1vZGVsPXsgcm93W2NvbHVtbi5wcm9wZXJ0eV0gfSAvPgogICAgICBdOwogICAgfSwKICAgIHJlbmRlckNlbGw6IGZ1bmN0aW9uIHJlbmRlckNlbGwoaCwgX3JlZjM2LCBfcmVmMzcsIGNvbnRleHQpIHsKICAgICAgdmFyIF9yZWYzNiRwcm9wcyA9IF9yZWYzNi5wcm9wcywKICAgICAgICBwcm9wcyA9IF9yZWYzNiRwcm9wcyA9PT0gdm9pZCAwID8ge30gOiBfcmVmMzYkcHJvcHM7CiAgICAgIHZhciByb3cgPSBfcmVmMzcucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWYzNy5jb2x1bW47CiAgICAgIHZhciBic1RhYmxlID0gY29udGV4dC4kZ3JpZC4kcGFyZW50OwogICAgICB2YXIgdHlwZSA9IHByb3BzICYmIHByb3BzLnR5cGUgfHwgJ3RleHQnOwogICAgICB2YXIgaGlkZGVuWmVybyA9IHByb3BzICYmIHByb3BzLmhpZGRlblplcm8gfHwgZmFsc2U7CiAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHldID0gKHJvd1tjb2x1bW4ucHJvcGVydHldICsgJycpLnJlcGxhY2UoL251bGx8dW5kZWZpbmVkL2lnLCAnJyk7CiAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgIGNhc2UgJ2ludGVnZXInOgogICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSBpc05hTihwYXJzZUludChyb3dbY29sdW1uLnByb3BlcnR5XSkpID8gJzAnIDogcGFyc2VJbnQocm93W2NvbHVtbi5wcm9wZXJ0eV0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnbnVtYmVyJzoKICAgICAgICAgIHZhciBudW1WYWx1ZSA9IGlzTmFOKHBhcnNlRmxvYXQocm93W2NvbHVtbi5wcm9wZXJ0eV0pKSA/ICcwJyA6IHBhcnNlRmxvYXQocm93W2NvbHVtbi5wcm9wZXJ0eV0pOwogICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSArbnVtVmFsdWUgPT09IDAgJiYgaGlkZGVuWmVybyA/ICcnIDogbnVtVmFsdWU7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdmbG9hdCc6CiAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXSA9IGJzVGFibGUudHJhbnNUb051bWJlcihyb3dbY29sdW1uLnByb3BlcnR5XSwgcHJvcHMuZGlnaXRzIHx8IDIpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddID0gcm93W2NvbHVtbi5wcm9wZXJ0eV07CiAgICAgIH0KICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJ0ZXh0IGJsb2NrIgogICAgICB9LCBbcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J11dKV07CiAgICB9LAogICAgcmVuZGVyRGVmYXVsdDogZnVuY3Rpb24gcmVuZGVyRGVmYXVsdChoLCBfcmVmMzgsIF9yZWYzOSwgY29udGV4dCkgewogICAgICB2YXIgX3JlZjM4JHByb3BzID0gX3JlZjM4LnByb3BzLAogICAgICAgIHByb3BzID0gX3JlZjM4JHByb3BzID09PSB2b2lkIDAgPyB7fSA6IF9yZWYzOCRwcm9wczsKICAgICAgdmFyIHJvdyA9IF9yZWYzOS5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjM5LmNvbHVtbjsKICAgICAgdmFyIGJzVGFibGUgPSBjb250ZXh0LiRncmlkLiRwYXJlbnQ7CiAgICAgIHZhciB0eXBlID0gcHJvcHMgJiYgcHJvcHMudHlwZSB8fCAndGV4dCc7CiAgICAgIHZhciBoaWRkZW5aZXJvID0gcHJvcHMgJiYgcHJvcHMuaGlkZGVuWmVybyB8fCBmYWxzZTsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eV0gPSAocm93W2NvbHVtbi5wcm9wZXJ0eV0gKyAnJykucmVwbGFjZSgvbnVsbHx1bmRlZmluZWQvaWcsICcnKTsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSAnaW50ZWdlcic6CiAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXSA9IGlzTmFOKHBhcnNlSW50KHJvd1tjb2x1bW4ucHJvcGVydHldKSkgPyAnMCcgOiBwYXJzZUludChyb3dbY29sdW1uLnByb3BlcnR5XSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdudW1iZXInOgogICAgICAgICAgdmFyIG51bVZhbHVlID0gaXNOYU4ocGFyc2VGbG9hdChyb3dbY29sdW1uLnByb3BlcnR5XSkpID8gJzAnIDogcGFyc2VGbG9hdChyb3dbY29sdW1uLnByb3BlcnR5XSk7CiAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXSA9ICtudW1WYWx1ZSA9PT0gMCAmJiBoaWRkZW5aZXJvID8gJycgOiBudW1WYWx1ZTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2Zsb2F0JzoKICAgICAgICAgIHZhciBmbG9hdE51bVZhbHVlID0gYnNUYWJsZS50cmFuc1RvTnVtYmVyKHJvd1tjb2x1bW4ucHJvcGVydHldLCBwcm9wcy5kaWdpdHMgfHwgMik7CiAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXSA9ICtmbG9hdE51bVZhbHVlID09PSAwICYmIGhpZGRlblplcm8gPyAnJyA6IGZsb2F0TnVtVmFsdWU7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSByb3dbY29sdW1uLnByb3BlcnR5XTsKICAgICAgfQogICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgImNsYXNzIjogInRleHQgYmxvY2siCiAgICAgIH0sIFtyb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXV0pXTsKICAgIH0sCiAgICByZW5kZXJJdGVtOiBmdW5jdGlvbiByZW5kZXJJdGVtKGgsIHJlbmRlck9wdHMsIF9yZWY0MCkgewogICAgICB2YXIgJGZvcm0gPSBfcmVmNDAuJGZvcm0sCiAgICAgICAgcHJvcGVydHkgPSBfcmVmNDAucHJvcGVydHksCiAgICAgICAgZGF0YSA9IF9yZWY0MC5kYXRhLAogICAgICAgIGl0ZW0gPSBfcmVmNDAuaXRlbTsKICAgICAgdmFyIF9yZW5kZXJPcHRzJHByb3BzNCA9IHJlbmRlck9wdHMucHJvcHMsCiAgICAgICAgcHJvcHMgPSBfcmVuZGVyT3B0cyRwcm9wczQgPT09IHZvaWQgMCA/IHt9IDogX3JlbmRlck9wdHMkcHJvcHM0OwogICAgICBwcm9wcyA9IE9iamVjdC5hc3NpZ24oewogICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICBwbGFjZWhvbGRlcjogJ+ivt+i+k+WFpScKICAgICAgfSwgcHJvcHMpOwogICAgICBpZiAoJGZvcm0uJHBhcmVudC5lZGl0YWJsZSAhPT0gZmFsc2UgJiYgcHJvcHMuZWRpdGFibGUgIT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIFtoKCd2eGUtaW5wdXQnLCB7CiAgICAgICAgICByZWY6ICd2eGUtaW5wdXQnICsgcHJvcGVydHksCiAgICAgICAgICBwcm9wczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgdmFsdWU6IGRhdGFbcHJvcGVydHldCiAgICAgICAgICB9LCBwcm9wcyksIHt9LCB7CiAgICAgICAgICAgIHRyYW5zZmVyOiB0cnVlCiAgICAgICAgICB9KSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiBpbnB1dCh2YWx1ZSkgewogICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gdmFsdWU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJsdXI6IGZ1bmN0aW9uIGJsdXIoX3JlZjQxKSB7CiAgICAgICAgICAgICAgdmFyIHZhbHVlID0gX3JlZjQxLnZhbHVlOwogICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gdmFsdWU7CiAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogdmFsdWUsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgcmVuZGVyT3B0czogcmVuZGVyT3B0cwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSldOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgICAgICJjbGFzcyI6ICJ0ZXh0IGJsb2NrIgogICAgICAgIH0sIFsiICIsIGRhdGFbcHJvcGVydHldLCAiICJdKV07CiAgICAgIH0KICAgIH0KICB9LAogICR2eGVDYWxjdWxhdGU6IHsKICAgIC8vIOiuoeeul+WIlwogICAgLy8gbGV0IHJvdyA9IHsKICAgIC8vICAgYTogMSwKICAgIC8vICAgYjogMiwKICAgIC8vICAgYzogMwogICAgLy8gfQogICAgLy8gbGV0IGZvcm11bGEgPSAnTWF0aC5wb3coe2F9K3tifSx7Y30pJwogICAgLy8gZm9yIChsZXQgayBpbiByb3cpIHsKICAgIC8vIGxldCByZWcgPSBuZXcgUmVnRXhwKCcoeycgKyBrICsgJ30pJywgJ2lnJykKICAgIC8vICAgaWYgKHJlZy50ZXN0KGZvcm11bGEpKSB7CiAgICAvLyAgICAgZm9ybXVsYSA9IGZvcm11bGEucmVwbGFjZShyZWcsIHJvd1trXSkKICAgIC8vICAgfQogICAgLy8gfQogICAgLy8gbGV0IGNhbGNSZXN1bHQgPSAobmV3IEZ1bmN0aW9uKCdjb25zb2xlLmxvZyhmb3JtdWxhKTtyZXR1cm4gZXZhbChmb3JtdWxhKScpKSgpCiAgICByZW5kZXJEZWZhdWx0OiBmdW5jdGlvbiByZW5kZXJEZWZhdWx0KGgsIHJlbmRlck9wdHMsIF9yZWY0MiwgY29udGV4dCkgewogICAgICB2YXIgJGNvbHVtbkluZGV4ID0gX3JlZjQyLiRjb2x1bW5JbmRleCwKICAgICAgICAkcm93SW5kZXggPSBfcmVmNDIuJHJvd0luZGV4LAogICAgICAgIGl0ZW1zID0gX3JlZjQyLml0ZW1zLAogICAgICAgIGNvbHVtbiA9IF9yZWY0Mi5jb2x1bW4sCiAgICAgICAgZGF0YSA9IF9yZWY0Mi5kYXRhLAogICAgICAgIHJvdyA9IF9yZWY0Mi5yb3csCiAgICAgICAgJHNlcSA9IF9yZWY0Mi4kc2VxLAogICAgICAgICR0YWJsZSA9IF9yZWY0Mi4kdGFibGUsCiAgICAgICAgJHR5cGUgPSBfcmVmNDIuJHR5cGUsCiAgICAgICAgY29sdW1uSW5kZXggPSBfcmVmNDIuY29sdW1uSW5kZXgsCiAgICAgICAgaXNFZGl0ID0gX3JlZjQyLmlzRWRpdCwKICAgICAgICBsZXZlbCA9IF9yZWY0Mi5sZXZlbCwKICAgICAgICByb3dJbmRleCA9IF9yZWY0Mi5yb3dJbmRleCwKICAgICAgICBzZXEgPSBfcmVmNDIuc2VxOwogICAgICByZXR1cm4gZGVmYXVsdEdsb2JhbFV0aWxzLmNhbGN1bGF0ZVJlbmRlcihoLCByZW5kZXJPcHRzLCB7CiAgICAgICAgJGNvbHVtbkluZGV4OiAkY29sdW1uSW5kZXgsCiAgICAgICAgJHJvd0luZGV4OiAkcm93SW5kZXgsCiAgICAgICAgaXRlbXM6IGl0ZW1zLAogICAgICAgIGNvbHVtbjogY29sdW1uLAogICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgcm93OiByb3csCiAgICAgICAgJHNlcTogJHNlcSwKICAgICAgICAkdGFibGU6ICR0YWJsZSwKICAgICAgICAkdHlwZTogJHR5cGUsCiAgICAgICAgY29sdW1uSW5kZXg6IGNvbHVtbkluZGV4LAogICAgICAgIGlzRWRpdDogaXNFZGl0LAogICAgICAgIGxldmVsOiBsZXZlbCwKICAgICAgICByb3dJbmRleDogcm93SW5kZXgsCiAgICAgICAgc2VxOiBzZXEKICAgICAgfSwgY29udGV4dCk7CiAgICB9LAogICAgcmVuZGVyQ2VsbDogZnVuY3Rpb24gcmVuZGVyQ2VsbChoLCByZW5kZXJPcHRzLCBfcmVmNDMsIGNvbnRleHQpIHsKICAgICAgdmFyICRjb2x1bW5JbmRleCA9IF9yZWY0My4kY29sdW1uSW5kZXgsCiAgICAgICAgJHJvd0luZGV4ID0gX3JlZjQzLiRyb3dJbmRleCwKICAgICAgICBpdGVtcyA9IF9yZWY0My5pdGVtcywKICAgICAgICBjb2x1bW4gPSBfcmVmNDMuY29sdW1uLAogICAgICAgIGRhdGEgPSBfcmVmNDMuZGF0YSwKICAgICAgICByb3cgPSBfcmVmNDMucm93LAogICAgICAgICRzZXEgPSBfcmVmNDMuJHNlcSwKICAgICAgICAkdGFibGUgPSBfcmVmNDMuJHRhYmxlLAogICAgICAgICR0eXBlID0gX3JlZjQzLiR0eXBlLAogICAgICAgIGNvbHVtbkluZGV4ID0gX3JlZjQzLmNvbHVtbkluZGV4LAogICAgICAgIGlzRWRpdCA9IF9yZWY0My5pc0VkaXQsCiAgICAgICAgbGV2ZWwgPSBfcmVmNDMubGV2ZWwsCiAgICAgICAgcm93SW5kZXggPSBfcmVmNDMucm93SW5kZXgsCiAgICAgICAgc2VxID0gX3JlZjQzLnNlcTsKICAgICAgcmV0dXJuIGRlZmF1bHRHbG9iYWxVdGlscy5jYWxjdWxhdGVSZW5kZXIoaCwgcmVuZGVyT3B0cywgewogICAgICAgICRjb2x1bW5JbmRleDogJGNvbHVtbkluZGV4LAogICAgICAgICRyb3dJbmRleDogJHJvd0luZGV4LAogICAgICAgIGl0ZW1zOiBpdGVtcywKICAgICAgICBjb2x1bW46IGNvbHVtbiwKICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgIHJvdzogcm93LAogICAgICAgICRzZXE6ICRzZXEsCiAgICAgICAgJHRhYmxlOiAkdGFibGUsCiAgICAgICAgJHR5cGU6ICR0eXBlLAogICAgICAgIGNvbHVtbkluZGV4OiBjb2x1bW5JbmRleCwKICAgICAgICBpc0VkaXQ6IGlzRWRpdCwKICAgICAgICBsZXZlbDogbGV2ZWwsCiAgICAgICAgcm93SW5kZXg6IHJvd0luZGV4LAogICAgICAgIHNlcTogc2VxCiAgICAgIH0sIGNvbnRleHQpOwogICAgfSwKICAgIHJlbmRlckVkaXQ6IGZ1bmN0aW9uIHJlbmRlckVkaXQoaCwgcmVuZGVyT3B0cywgX3JlZjQ0LCBjb250ZXh0KSB7CiAgICAgIHZhciAkY29sdW1uSW5kZXggPSBfcmVmNDQuJGNvbHVtbkluZGV4LAogICAgICAgICRyb3dJbmRleCA9IF9yZWY0NC4kcm93SW5kZXgsCiAgICAgICAgaXRlbXMgPSBfcmVmNDQuaXRlbXMsCiAgICAgICAgY29sdW1uID0gX3JlZjQ0LmNvbHVtbiwKICAgICAgICBkYXRhID0gX3JlZjQ0LmRhdGEsCiAgICAgICAgcm93ID0gX3JlZjQ0LnJvdywKICAgICAgICAkc2VxID0gX3JlZjQ0LiRzZXEsCiAgICAgICAgJHRhYmxlID0gX3JlZjQ0LiR0YWJsZSwKICAgICAgICAkdHlwZSA9IF9yZWY0NC4kdHlwZSwKICAgICAgICBjb2x1bW5JbmRleCA9IF9yZWY0NC5jb2x1bW5JbmRleCwKICAgICAgICBpc0VkaXQgPSBfcmVmNDQuaXNFZGl0LAogICAgICAgIGxldmVsID0gX3JlZjQ0LmxldmVsLAogICAgICAgIHJvd0luZGV4ID0gX3JlZjQ0LnJvd0luZGV4LAogICAgICAgIHNlcSA9IF9yZWY0NC5zZXE7CiAgICAgIHJldHVybiBkZWZhdWx0R2xvYmFsVXRpbHMuY2FsY3VsYXRlUmVuZGVyKGgsIHJlbmRlck9wdHMsIHsKICAgICAgICAkY29sdW1uSW5kZXg6ICRjb2x1bW5JbmRleCwKICAgICAgICAkcm93SW5kZXg6ICRyb3dJbmRleCwKICAgICAgICBpdGVtczogaXRlbXMsCiAgICAgICAgY29sdW1uOiBjb2x1bW4sCiAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICByb3c6IHJvdywKICAgICAgICAkc2VxOiAkc2VxLAogICAgICAgICR0YWJsZTogJHRhYmxlLAogICAgICAgICR0eXBlOiAkdHlwZSwKICAgICAgICBjb2x1bW5JbmRleDogY29sdW1uSW5kZXgsCiAgICAgICAgaXNFZGl0OiBpc0VkaXQsCiAgICAgICAgbGV2ZWw6IGxldmVsLAogICAgICAgIHJvd0luZGV4OiByb3dJbmRleCwKICAgICAgICBzZXE6IHNlcQogICAgICB9LCBjb250ZXh0KTsKICAgICAgLy8gcmV0dXJuIFsKICAgICAgLy8gICA8dnhlLWlucHV0CiAgICAgIC8vICAgICB2LW1vZGVsPXtyb3dbY29sdW1uLnByb3BlcnR5XX0KICAgICAgLy8gICAgIHBsYWNlaG9sZGVyPSLoh6rliqjorqHnrpciCiAgICAgIC8vICAgICByZWFkb25seQogICAgICAvLyAgICAgY2xlYXJhYmxlCiAgICAgIC8vICAgPjwvdnhlLWlucHV0PgogICAgICAvLyBdCiAgICB9LAogICAgcmVuZGVySXRlbTogZnVuY3Rpb24gcmVuZGVySXRlbShoLCByZW5kZXJPcHRzLCBfcmVmNDUpIHsKICAgICAgdmFyICRmb3JtID0gX3JlZjQ1LiRmb3JtLAogICAgICAgIGRhdGEgPSBfcmVmNDUuZGF0YSwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWY0NS5wcm9wZXJ0eTsKICAgICAgcmV0dXJuIGRlZmF1bHRHbG9iYWxVdGlscy5mb3JtQ2FsY3VsYXRlUmVuZGVyKGgsIHJlbmRlck9wdHMsIHsKICAgICAgICAkZm9ybTogJGZvcm0sCiAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHkKICAgICAgfSk7CiAgICB9CiAgfSwKICAkdnhlTW9uZXk6IHsKICAgIC8vIOi+k+WFpeahhgogICAgYXV0b2ZvY3VzOiAnLnZ4ZS1pbnB1dC0taW5uZXInLAogICAgcmVuZGVyRGVmYXVsdDogZnVuY3Rpb24gcmVuZGVyRGVmYXVsdChoLCBfcmVmNDYsIF9yZWY0NywgY29udGV4dCkgewogICAgICB2YXIgX3JlZjQ2JHByb3BzID0gX3JlZjQ2LnByb3BzLAogICAgICAgIHByb3BzID0gX3JlZjQ2JHByb3BzID09PSB2b2lkIDAgPyB7fSA6IF9yZWY0NiRwcm9wczsKICAgICAgdmFyIHJvdyA9IF9yZWY0Ny5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjQ3LmNvbHVtbiwKICAgICAgICAkZ3JpZCA9IF9yZWY0Ny4kZ3JpZDsKICAgICAgdmFyIGJzVGFibGUgPSBjb250ZXh0LiRncmlkLiRwYXJlbnQ7CiAgICAgIHZhciBtb25leVVuaXQgPSBic1RhYmxlLm1vbmV5VW5pdCA/IGJzVGFibGUubW9uZXlVbml0IDogMTsKICAgICAgdmFyIGlzUm91bmQgPSBic1RhYmxlLmlzUm91bmRJbjsKICAgICAgdmFyIHNob3daZXJvID0gYnNUYWJsZS5zaG93WmVybzsKCiAgICAgIC8vIOS4jeaYvuekuuepuuaVsOaNru+8iG51bGzvvIzmjqXlj6PkuK3lj6/og73ov5Tlm55udWxs77yJCiAgICAgIHZhciBoaWRlRW1wdHlWYWx1ZSA9IGJzVGFibGUuaGlkZUVtcHR5VmFsdWU7CiAgICAgIHZhciBpc0VtcHR5VmFsdWUgPSByb3dbY29sdW1uLnByb3BlcnR5XSA9PT0gbnVsbDsKICAgICAgaWYgKGlzRW1wdHlWYWx1ZSAmJiBoaWRlRW1wdHlWYWx1ZSkgewogICAgICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgICAgICJjbGFzcyI6ICJ0ZXh0IgogICAgICAgIH0pXTsKICAgICAgfQogICAgICB2YXIgemVybyA9IGJzVGFibGUudHJhbnNUb051bWJlcignJywgcHJvcHMuZGlnaXRzIHx8IDIsIGlzUm91bmQpOwogICAgICB2YXIgdmFsID0gYnNUYWJsZS50cmFuc1RvTnVtYmVyKHJvd1tjb2x1bW4ucHJvcGVydHldLCBwcm9wcy5kaWdpdHMgfHwgMiwgaXNSb3VuZCk7CiAgICAgIC8vIGNvbnN0IGRpZ2l0cyA9IHByb3BzLmRpZ2l0cyB8fCAobW9uZXlVbml0ID09PSAxMDAwMCA/IDQgOiAyKSAvLyDkuIflhYPmmL7npLo05L2N77yM5YWD5pi+56S6MuS9jQogICAgICB2YXIgZGlnaXRzID0gcHJvcHMuZGlnaXRzIHx8IDI7CiAgICAgIC8vIOaYvuekuuaVtOaVsOWkhOeQhgogICAgICBpZiAocHJvcHMudHlwZSA9PT0gJ2ludGVnZXInKSB7CiAgICAgICAgZGlnaXRzID0gMDsKICAgICAgfQogICAgICBpZiAodmFsID09PSB6ZXJvICYmIHNob3daZXJvKSB7CiAgICAgICAgdmFsID0gJzAuMDAnOwogICAgICB9IGVsc2UgaWYgKGJzVGFibGUudG9vbGJhckNvbmZpZ0luQ29weS5tb25leUlucHV0U3dpY2gpIHsKICAgICAgICB2YWwgPSBic1RhYmxlLnRyYW5zVG9OdW1iZXIoYnNUYWJsZS5hY2N1cmF0ZUNodUZhKHZhbCwgbW9uZXlVbml0KSwgZGlnaXRzLCBpc1JvdW5kKTsKICAgICAgfSBlbHNlIHt9CiAgICAgIHZhbCA9IGJzVGFibGUudHJhbnNUb051bWJlckxvY2FsU3RyaW5nKHZhbCwgZGlnaXRzLCBpc1JvdW5kKTsKICAgICAgdmFyIHplcm9OdW0gPSBic1RhYmxlLnRyYW5zVG9OdW1iZXIoJycsIGRpZ2l0cywgaXNSb3VuZCk7CiAgICAgIHZhciBzaG93VmFsID0gdmFsID09PSB6ZXJvTnVtID8gc2hvd1plcm8gPyB6ZXJvTnVtIDogJycgOiB2YWw7CiAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddID0gdmFsOwogICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgImNsYXNzIjogInRleHQiCiAgICAgIH0sIFtzaG93VmFsXSldOwogICAgfSwKICAgIHJlbmRlckNlbGw6IGZ1bmN0aW9uIHJlbmRlckNlbGwoaCwgX3JlZjQ4LCBfcmVmNDksIGNvbnRleHQpIHsKICAgICAgdmFyIF9yZWY0OCRwcm9wcyA9IF9yZWY0OC5wcm9wcywKICAgICAgICBwcm9wcyA9IF9yZWY0OCRwcm9wcyA9PT0gdm9pZCAwID8ge30gOiBfcmVmNDgkcHJvcHM7CiAgICAgIHZhciByb3cgPSBfcmVmNDkucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWY0OS5jb2x1bW4sCiAgICAgICAgJGdyaWQgPSBfcmVmNDkuJGdyaWQ7CiAgICAgIHZhciBic1RhYmxlID0gY29udGV4dC4kZ3JpZC4kcGFyZW50OwogICAgICB2YXIgbW9uZXlVbml0ID0gYnNUYWJsZS5tb25leVVuaXQgPyBic1RhYmxlLm1vbmV5VW5pdCA6IDE7CiAgICAgIHZhciBpc1JvdW5kID0gYnNUYWJsZS5pc1JvdW5kSW47CiAgICAgIHZhciBzaG93WmVybyA9IGJzVGFibGUuc2hvd1plcm87CgogICAgICAvLyDkuI3mmL7npLrnqbrmlbDmja7vvIhudWxs77yM5o6l5Y+j5Lit5Y+v6IO96L+U5ZuebnVsbO+8iQogICAgICB2YXIgaGlkZUVtcHR5VmFsdWUgPSBic1RhYmxlLmhpZGVFbXB0eVZhbHVlOwogICAgICBjb25zb2xlLmxvZyhic1RhYmxlLmhpZGVFbXB0eVZhbHVlLCByb3dbY29sdW1uLnByb3BlcnR5XSk7CiAgICAgIHZhciBpc0VtcHR5VmFsdWUgPSByb3dbY29sdW1uLnByb3BlcnR5XSA9PT0gbnVsbDsKICAgICAgaWYgKGlzRW1wdHlWYWx1ZSAmJiBoaWRlRW1wdHlWYWx1ZSkgewogICAgICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgICAgICJjbGFzcyI6ICJ0ZXh0IgogICAgICAgIH0pXTsKICAgICAgfQogICAgICB2YXIgemVybyA9IGJzVGFibGUudHJhbnNUb051bWJlcignJywgcHJvcHMuZGlnaXRzIHx8IDIsIGlzUm91bmQpOwogICAgICB2YXIgdmFsID0gYnNUYWJsZS50cmFuc1RvTnVtYmVyKHJvd1tjb2x1bW4ucHJvcGVydHldLCBwcm9wcy5kaWdpdHMgfHwgMiwgaXNSb3VuZCk7CiAgICAgIC8vIGNvbnN0IGRpZ2l0cyA9IHByb3BzLmRpZ2l0cyB8fCAobW9uZXlVbml0ID09PSAxMDAwMCA/IDQgOiAyKSAvLyDkuIflhYPmmL7npLo05L2N77yM5YWD5pi+56S6MuS9jQogICAgICB2YXIgZGlnaXRzID0gcHJvcHMuZGlnaXRzIHx8IDI7CiAgICAgIC8vIOaYvuekuuaVtOaVsOWkhOeQhgogICAgICBpZiAocHJvcHMudHlwZSA9PT0gJ2ludGVnZXInKSB7CiAgICAgICAgZGlnaXRzID0gMDsKICAgICAgfQogICAgICBpZiAodmFsID09PSB6ZXJvICYmIHNob3daZXJvKSB7CiAgICAgICAgdmFsID0gJzAuMDAnOwogICAgICB9IGVsc2UgaWYgKGJzVGFibGUudG9vbGJhckNvbmZpZ0luQ29weS5tb25leUlucHV0U3dpY2gpIHsKICAgICAgICB2YWwgPSBic1RhYmxlLnRyYW5zVG9OdW1iZXIoYnNUYWJsZS5hY2N1cmF0ZUNodUZhKHZhbCwgbW9uZXlVbml0KSwgZGlnaXRzLCBpc1JvdW5kKTsKICAgICAgfSBlbHNlIHt9CiAgICAgIHZhbCA9IGJzVGFibGUudHJhbnNUb051bWJlckxvY2FsU3RyaW5nKHZhbCwgZGlnaXRzLCBpc1JvdW5kKTsKICAgICAgdmFyIHplcm9OdW0gPSBic1RhYmxlLnRyYW5zVG9OdW1iZXIoJycsIGRpZ2l0cywgaXNSb3VuZCk7CiAgICAgIHZhciBzaG93VmFsID0gdmFsID09PSB6ZXJvTnVtID8gc2hvd1plcm8gPyB6ZXJvTnVtIDogJycgOiB2YWw7CiAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddID0gdmFsOwogICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgImNsYXNzIjogInRleHQiCiAgICAgIH0sIFtzaG93VmFsXSldOwogICAgfSwKICAgIHJlbmRlckVkaXQ6IGZ1bmN0aW9uIHJlbmRlckVkaXQoaCwgcmVuZGVyT3B0cywgcGFyYW1zLCBjb250ZXh0KSB7CiAgICAgIHZhciBfc3BsaXQkOwogICAgICB2YXIgX3JlbmRlck9wdHMkcHJvcHM1ID0gcmVuZGVyT3B0cy5wcm9wcywKICAgICAgICBwcm9wcyA9IF9yZW5kZXJPcHRzJHByb3BzNSA9PT0gdm9pZCAwID8ge30gOiBfcmVuZGVyT3B0cyRwcm9wczU7CiAgICAgIHZhciByb3cgPSBwYXJhbXMucm93LAogICAgICAgIGNvbHVtbiA9IHBhcmFtcy5jb2x1bW47CiAgICAgIHZhciBic1RhYmxlID0gY29udGV4dC4kZ3JpZC4kcGFyZW50OwogICAgICB2YXIgbW9uZXlJbnB1dFN3aWNoID0gY29udGV4dC4kZ3JpZC4kcGFyZW50LnRvb2xiYXJDb25maWdJbiA/IGNvbnRleHQuJGdyaWQuJHBhcmVudC50b29sYmFyQ29uZmlnSW4ubW9uZXlJbnB1dFN3aWNoIDogZmFsc2U7CiAgICAgIHZhciBtb25leVVuaXQgPSBtb25leUlucHV0U3dpY2ggPyBjb250ZXh0LiRncmlkLiRwYXJlbnQubW9uZXlVbml0ID8gY29udGV4dC4kZ3JpZC4kcGFyZW50Lm1vbmV5VW5pdCA6IDEgOiAxOwogICAgICB2YXIgaXNSb3VuZCA9IGJzVGFibGUuaXNSb3VuZEluOwogICAgICAvLyDljLnphY3lpoLmnpzkuLrnqbrml7bovpPlhaUt5Y+35Lmf5Y+v5q2j5bi46L6T5YWl5pi+56S6CiAgICAgIHZhciB2YWwgPSByb3dbY29sdW1uLnByb3BlcnR5XSA9PT0gJy0nID8gJy0nIDogKChyb3dbY29sdW1uLnByb3BlcnR5XSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZHxOYU4vaWcsICcnKSAvIG1vbmV5VW5pdCkudG9GaXhlZCgyKS50b1N0cmluZygpLnJlcGxhY2UoJy4nLCAnJykgKiBtb25leVVuaXQgLyAxMDA7CiAgICAgIC8vIGxldCB2YWwgPSAocm93W2NvbHVtbi5wcm9wZXJ0eV0gKyAnJykucmVwbGFjZSgvbnVsbHx1bmRlZmluZWR8TmFOL2lnLCAnJykKICAgICAgdmFyIGRpZ2l0cyA9IGJzVGFibGUudGFibGVDb25maWdDcC5nbG9iYWxDb25maWcubW9uZXlMaW1pdCA/IFN0cmluZyhtb25leVVuaXQpLmxlbmd0aCAtIDEgKyAyIDogMjsKICAgICAgdmFyIF9wcm9wcyRtaW4gPSBwcm9wcy5taW4sCiAgICAgICAgbWluID0gX3Byb3BzJG1pbiA9PT0gdm9pZCAwID8gLTkwMDcxOTkyNTQ3NDA5OTEgOiBfcHJvcHMkbWluLAogICAgICAgIF9wcm9wcyRtYXggPSBwcm9wcy5tYXgsCiAgICAgICAgbWF4ID0gX3Byb3BzJG1heCA9PT0gdm9pZCAwID8gOTAwNzE5OTI1NDc0MDk5MSA6IF9wcm9wcyRtYXg7CiAgICAgIHZhciBpbnB1dGRpZ2l0cyA9IHByb3BzLmlucHV0ZGlnaXRzIHx8IGRpZ2l0cyB8fCAyOwogICAgICAvLyDovpPlhaXmlbTmlbDlpITnkIYsIOmZkOWItuWPquiDvei+k+WFpeaVtOaVsAogICAgICBpZiAocHJvcHMudHlwZSA9PT0gJ2ludGVnZXInKSB7CiAgICAgICAgaW5wdXRkaWdpdHMgPSAwOwogICAgICAgIGRpZ2l0cyA9IDA7CiAgICAgIH0KICAgICAgLy8gcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX21vbmV5U3dpdGNoaW5wdXQnXSA9ICh2YWwgPT09ICctJyB8fCB2YWwgPT09ICcnKSA/IChyb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddID09PSAnLScgPyAnLScgOiAnJykgOiBic1RhYmxlLmFjY3VyYXRlQ2h1RmEodmFsLCBtb25leVVuaXQpICsgJycKICAgICAgLy8gcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX21vbmV5U3dpdGNoaW5wdXQnXSA9ICh2YWwgPT09ICctJyB8fCB2YWwgPT09ICcnKSA/IChyb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddID09PSAnLScgPyAnLScgOiAnJykgOiBic1RhYmxlLmFjY3VyYXRlTWF4Rml4ZWQoYnNUYWJsZS5hY2N1cmF0ZUNodUZhKHZhbCwgbW9uZXlVbml0KSwgZGlnaXRzKSArICcnCiAgICAgIC8vIOino+WGs+esrOS6jOasoee8lui+keS4jeiDvei+k+WFpeWwj+aVsOeCueeahOmXrumimAogICAgICBpZiAoIShyb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddICYmICgoX3NwbGl0JCA9IChyb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddICsgJycpLnNwbGl0KCcuJylbMV0pID09PSBudWxsIHx8IF9zcGxpdCQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zcGxpdCQubGVuZ3RoKSA8PSAwKSkgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX21vbmV5U3dpdGNoaW5wdXQnXSA9IHZhbCA9PT0gJy0nIHx8IHZhbCA9PT0gJycgPyByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddID09PSAnLScgPyAnLScgOiAnJyA6IGJzVGFibGUuYWNjdXJhdGVDaHVGYSh2YWwsIG1vbmV5VW5pdCkudG9TdHJpbmcoKTsKICAgICAgcmV0dXJuIFtoKCd2eGUtaW5wdXQnLCB7CiAgICAgICAgcmVmOiAndnhlLWlucHV0JyArIGNvbHVtbi5wcm9wZXJ0eSwKICAgICAgICBwcm9wczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgIHZhbHVlOiByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddLAogICAgICAgICAgc3RlcDogMSwKICAgICAgICAgIG1pbjogLTkwMDcxOTkyNTQ3NDA5OTEsCiAgICAgICAgICBtYXg6IDkwMDcxOTkyNTQ3NDA5OTEsCiAgICAgICAgICBjbGVhcmFibGU6IHRydWUsCiAgICAgICAgICBwbGFjZWhvbGRlcjogJ+ivt+i+k+WFpScsCiAgICAgICAgICBkaWdpdHM6IGRpZ2l0cyB8fCAyCiAgICAgICAgfSwgcHJvcHMpLCB7fSwgewogICAgICAgICAgcmVhZG9ubHk6IHByb3BzLnJlYWRvbmx5IHx8IHByb3BzLmRpc2FibGVkLAogICAgICAgICAgdHlwZTogJ3RleHQnCiAgICAgICAgfSksCiAgICAgICAgb246IHsKICAgICAgICAgIGZvY3VzOiBmdW5jdGlvbiBmb2N1cygpIHsKICAgICAgICAgICAgcmVuZGVyT3B0cy5pbnB1dFN0YXR1cyA9IHRydWU7CiAgICAgICAgICB9LAogICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7CiAgICAgICAgICAgIC8vIOWboOm7mOiupOiBmueEpuaXtuWAvOS4ujDvvIzovpPlhaUt5Y+35ZCO5ZCO5LiN5ruh6Laz5LiL6Z2i5q2j5YiZ77yM5Lya5oqKLeWPt+S4ouWkseWwhuWJjemdoi3mm7/mjaLmjonvvIzlr7zoh7TogZrnhKbml7bml6Dms5XovpPlhaUt5Y+3CiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXlswLTldPy0vLCAnLScpOwogICAgICAgICAgICB2YXIgJGV2ZW50ID0gd2luZG93LmV2ZW50OwogICAgICAgICAgICAvLyDpmZDliLblj6rog73ovpPlhaXmlbTmlbAKICAgICAgICAgICAgaWYgKHByb3BzLnR5cGUgPT09ICdpbnRlZ2VyJykgewogICAgICAgICAgICAgICRldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlID0gdmFsdWUudG9TdHJpbmcoKS5tYXRjaCgvXi0/WzAtOV1cZCokLykgfHwgdmFsdWUubWF0Y2goLy0/Lyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBrZXl1cDogZnVuY3Rpb24ga2V5dXAoX3JlZjUwKSB7CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9yZWY1MC52YWx1ZSwKICAgICAgICAgICAgICAkZXZlbnQgPSBfcmVmNTAuJGV2ZW50OwogICAgICAgICAgfSwKICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKF9yZWY1MSkgewogICAgICAgICAgICB2YXIgdmFsdWUgPSBfcmVmNTEudmFsdWUsCiAgICAgICAgICAgICAgJGV2ZW50ID0gX3JlZjUxLiRldmVudDsKICAgICAgICAgICAgLy8gY29uc3QgaGFzQ29tbWEgPSB2YWx1ZS5zcGxpdCgnLicpWzFdCiAgICAgICAgICAgIHZhciB2YWx1ZUxlbiA9ICh2YWx1ZS5zcGxpdCgnLicpWzFdIHx8ICcnKS5sZW5ndGg7CiAgICAgICAgICAgIHZhciBpc1RydWUgPSBtb25leVVuaXQgPT09IDEwMDAwID8gdmFsdWVMZW4gPD0gKGJzVGFibGUudGFibGVDb25maWdDcC5nbG9iYWxDb25maWcubW9uZXlMaW1pdCA/IDYgOiAyKSA6IHZhbHVlTGVuIDw9IDI7IC8vIOS4h+WFg+Wwj+aVsOeCueWQjuacgOWkmjbkvY3vvIwg5YWD5bCP5pWw54K55ZCO5pyA5aSaMuS9jQogICAgICAgICAgICBpZiAoaXNUcnVlKSB7CiAgICAgICAgICAgICAgdmFsdWUgPSBic1RhYmxlLnRyYW5zSW5wdXRUb051bWJlcigkZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSk7CiAgICAgICAgICAgICAgJGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUgPSB2YWx1ZTsKICAgICAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddID0gdmFsdWU7CiAgICAgICAgICAgICAgaWYgKHJlbmRlck9wdHMuaW5wdXRTdGF0dXMpIHsKICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA+IG1heCkgewogICAgICAgICAgICAgICAgICB2YWx1ZSA9IG1heDsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPCBtaW4pIHsKICAgICAgICAgICAgICAgICAgdmFsdWUgPSBtaW47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddID0gdmFsdWU7CiAgICAgICAgICAgICAgICAkZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSA9IHZhbHVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyDljLnphY3lpoLmnpzkuLrnqbrml7bovpPlhaUt5Y+35Lmf5Y+v5q2j5bi46L6T5YWl5pi+56S6CiAgICAgICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eV0gPSB2YWx1ZSA9PT0gJycgPyAnJyA6IHZhbHVlID09PSAnLScgPyAnLScgOiBic1RhYmxlLmFjY3VyYXRlQ2hlbmdGYSh2YWx1ZSwgbW9uZXlVbml0KTsKICAgICAgICAgICAgICAvLyByb3dbY29sdW1uLnByb3BlcnR5XSA9ICh2YWx1ZSA9PT0gJy0nIHx8IHZhbHVlID09PSAnJykgPyAnJyA6IGJzVGFibGUuYWNjdXJhdGVDaGVuZ0ZhKHZhbHVlLCBtb25leVVuaXQpCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX21vbmV5U3dpdGNoaW5wdXQnXTsKICAgICAgICAgICAgICAkZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSA9IG9sZFZhbHVlOwogICAgICAgICAgICAgIHZhbHVlID0gb2xkVmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBibHVyOiBmdW5jdGlvbiBibHVyKF9yZWY1MikgewogICAgICAgICAgICB2YXIgX3NwbGl0JDI7CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9yZWY1Mi52YWx1ZSwKICAgICAgICAgICAgICAkZXZlbnQgPSBfcmVmNTIuJGV2ZW50OwogICAgICAgICAgICB2YXIgX3YgPSB2YWx1ZTsKICAgICAgICAgICAgLy8g5Yy56YWN5aaC5p6c5Li656m65pe26L6T5YWlLeWPt+S5n+WPr+ato+W4uOi+k+WFpeaYvuekuu+8jOWmguWPqui+k+WFpeS6huespuWPt+WkseWOu+eEpueCueWAvOmcgOa4heepugogICAgICAgICAgICBpZiAodmFsdWUgPT09ICctJykgdmFsdWUgPSAnJzsKICAgICAgICAgICAgaWYgKHZhbHVlICYmICgoX3NwbGl0JDIgPSAodmFsdWUgKyAnJykuc3BsaXQoJy4nKVsxXSkgPT09IG51bGwgfHwgX3NwbGl0JDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zcGxpdCQyLmxlbmd0aCkgPD0gMCkgX3YgPSAodmFsdWUgKyAnJykucmVwbGFjZSgnLicsICcnKTsKICAgICAgICAgICAgcmVuZGVyT3B0cy5pbnB1dFN0YXR1cyA9IGZhbHNlOwogICAgICAgICAgICB2YWx1ZSA9IGJzVGFibGUudHJhbnNJbnB1dFRvTnVtYmVyKF92KTsKICAgICAgICAgICAgJGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUgPSB2YWx1ZTsKICAgICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX21vbmV5U3dpdGNoaW5wdXQnXSA9IHZhbHVlOwogICAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5XSA9IGJzVGFibGUudHJhbnNUb051bWJlcihic1RhYmxlLmFjY3VyYXRlQ2hlbmdGYShyb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddLCBtb25leVVuaXQpLCBpbnB1dGRpZ2l0cywgaXNSb3VuZCk7CiAgICAgICAgICAgIGJzVGFibGUuY2VsbE9wdGlvbkNhbGxCYWNrKHBhcmFtcywgewogICAgICAgICAgICAgIG9wdGlvblR5cGU6ICdpbnB1dCcsCiAgICAgICAgICAgICAgdmFsdWU6IHJvd1tjb2x1bW4ucHJvcGVydHldLAogICAgICAgICAgICAgIGZpZWxkOiBjb2x1bW4ucHJvcGVydHksCiAgICAgICAgICAgICAgcmVuZGVyT3B0czogcmVuZGVyT3B0cwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pXTsKICAgIH0sCiAgICByZW5kZXJJdGVtOiBmdW5jdGlvbiByZW5kZXJJdGVtKGgsIHJlbmRlck9wdHMsIF9yZWY1MykgewogICAgICB2YXIgJGZvcm0gPSBfcmVmNTMuJGZvcm0sCiAgICAgICAgZGF0YSA9IF9yZWY1My5kYXRhLAogICAgICAgIHByb3BlcnR5ID0gX3JlZjUzLnByb3BlcnR5OwogICAgICB2YXIgYnNGb3JtID0gJGZvcm0uJHBhcmVudDsKICAgICAgdmFyIGVkaXRhYmxlID0gYnNGb3JtLmVkaXRhYmxlLAogICAgICAgIGl0ZW1DaGFuZ2UgPSBic0Zvcm0uaXRlbUNoYW5nZSwKICAgICAgICBfYnNGb3JtJGNvbnN0cmFpbkRhdGEgPSBic0Zvcm0uY29uc3RyYWluRGF0YU1hcCwKICAgICAgICBjb25zdHJhaW5EYXRhTWFwID0gX2JzRm9ybSRjb25zdHJhaW5EYXRhID09PSB2b2lkIDAgPyB7fSA6IF9ic0Zvcm0kY29uc3RyYWluRGF0YTsKICAgICAgdmFyIF9yZW5kZXJPcHRzJHByb3BzNiA9IHJlbmRlck9wdHMucHJvcHMsCiAgICAgICAgcHJvcHMgPSBfcmVuZGVyT3B0cyRwcm9wczYgPT09IHZvaWQgMCA/IHt9IDogX3JlbmRlck9wdHMkcHJvcHM2OwogICAgICB2YXIgbW9uZXlJbnB1dFN3aWNoID0gYnNGb3JtLm1vbmV5SW5wdXRTd2ljaCB8fCBmYWxzZTsKICAgICAgdmFyIG1vbmV5VW5pdCA9IG1vbmV5SW5wdXRTd2ljaCA/IGJzRm9ybS5tb25leVVuaXQgfHwgMSA6IDE7CiAgICAgIHZhciBpc1JvdW5kID0gYnNGb3JtLmlzUm91bmQ7CiAgICAgIHZhciBjdXJDb25zdHJhaW5EYXRhTWFwID0gT2JqZWN0LmFzc2lnbih7fSwgY29uc3RyYWluRGF0YU1hcFtwcm9wZXJ0eV0gfHwge30pOwogICAgICB2YXIgaW5wdXRkaWdpdHMgPSAyOwogICAgICB2YXIgZGlnaXRzID0gMjsKICAgICAgaWYgKGN1ckNvbnN0cmFpbkRhdGFNYXBbJ3ZhbHVlJ10gIT09IHVuZGVmaW5lZCkgewogICAgICAgIGRhdGFbcHJvcGVydHldID0gU3RyaW5nKGN1ckNvbnN0cmFpbkRhdGFNYXBbJ3ZhbHVlJ10pOwogICAgICAgIGRlbGV0ZSBjdXJDb25zdHJhaW5EYXRhTWFwWyd2YWx1ZSddOwogICAgICB9CiAgICAgIHZhciB2YWwgPSAoZGF0YVtwcm9wZXJ0eV0gKyAnJykucmVwbGFjZSgvbnVsbHx1bmRlZmluZWR8TmFOL2lnLCAnJyk7CiAgICAgIHByb3BzLmlucHV0ZGlnaXRzID0gU3RyaW5nKG1vbmV5VW5pdCkubGVuZ3RoIC0gMSArIDI7CiAgICAgIHByb3BzID0gT2JqZWN0LmFzc2lnbih7CiAgICAgICAgdHlwZTogJ3RleHQnLAogICAgICAgIHBsYWNlaG9sZGVyOiAn6K+36L6T5YWlJwogICAgICB9LCBwcm9wcywgY3VyQ29uc3RyYWluRGF0YU1hcCk7CiAgICAgIC8vIGRhdGFbcHJvcGVydHkgKyAnX19tb25leVN3aXRjaGlucHV0J10gPSBic0Zvcm0uYWNjdXJhdGVDaHVGYSgoZGF0YVtwcm9wZXJ0eV0gKyAnJykucmVwbGFjZSgvbnVsbHx1bmRlZmluZWR8TmFOL2lnLCAnJyksIG1vbmV5VW5pdCkgKyAnJwogICAgICBpbnB1dGRpZ2l0cyA9IHByb3BzLmlucHV0ZGlnaXRzIHx8IHByb3BzLmRpZ2l0cyB8fCAyOwogICAgICAvLyDovpPlhaXmlbTmlbDlpITnkIYsIOmZkOWItuWPquiDvei+k+WFpeaVtOaVsAogICAgICBpZiAocHJvcHMudHlwZSA9PT0gJ2ludGVnZXInKSB7CiAgICAgICAgaW5wdXRkaWdpdHMgPSAwOwogICAgICAgIGRpZ2l0cyA9IDA7CiAgICAgIH0KICAgICAgaWYgKHByb3BzLnRob3VzYW5kc1N5bWJvbFZpZXcgIT09IGZhbHNlKSB7CiAgICAgICAgdmFyIF9wcm9wcyA9IHByb3BzLAogICAgICAgICAgX3Byb3BzJG1pbjIgPSBfcHJvcHMubWluLAogICAgICAgICAgbWluID0gX3Byb3BzJG1pbjIgPT09IHZvaWQgMCA/IC05MDA3MTk5MjU0NzQwOTkxIDogX3Byb3BzJG1pbjIsCiAgICAgICAgICBfcHJvcHMkbWF4MiA9IF9wcm9wcy5tYXgsCiAgICAgICAgICBtYXggPSBfcHJvcHMkbWF4MiA9PT0gdm9pZCAwID8gOTAwNzE5OTI1NDc0MDk5MSA6IF9wcm9wcyRtYXgyOwogICAgICAgIGlmICghcmVuZGVyT3B0cy5pbnB1dFN0YXR1cykgewogICAgICAgICAgZGF0YVtwcm9wZXJ0eSArICdfX21vbmV5U3dpdGNoaW5wdXQnXSA9IHZhbCA9PT0gJy0nIHx8IHZhbCA9PT0gJycgPyBkYXRhW3Byb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddID09PSAnLScgPyAnLScgOiAnJyA6IGJzRm9ybS50cmFuc1RvTnVtYmVyTG9jYWxTdHJpbmcoYnNGb3JtLmFjY3VyYXRlQ2h1RmEodmFsLCBtb25leVVuaXQpLCBpbnB1dGRpZ2l0cyk7CiAgICAgICAgfQogICAgICAgIGlmIChlZGl0YWJsZSAhPT0gZmFsc2UpIHsKICAgICAgICAgIHJldHVybiBbaCgndnhlLWlucHV0JywgewogICAgICAgICAgICByZWY6ICd2eGUtaW5wdXQtJyArIHByb3BlcnR5LAogICAgICAgICAgICBwcm9wczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICB2YWx1ZTogZGF0YVtwcm9wZXJ0eSArICdfX21vbmV5U3dpdGNoaW5wdXQnXQogICAgICAgICAgICB9LCBwcm9wcyksIHt9LCB7CiAgICAgICAgICAgICAgcmVhZG9ubHk6IHByb3BzLnJlYWRvbmx5LAogICAgICAgICAgICAgIGRpc2FibGVkOiBwcm9wcy5kaXNhYmxlZCB8fCBwcm9wcy5lZGl0YWJsZSA9PT0gZmFsc2UsCiAgICAgICAgICAgICAgdHlwZTogJ3RleHQnCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBvbjogewogICAgICAgICAgICAgIGZvY3VzOiBmdW5jdGlvbiBmb2N1cyhfcmVmNTQpIHsKICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9yZWY1NC52YWx1ZSwKICAgICAgICAgICAgICAgICAgJGV2ZW50ID0gX3JlZjU0LiRldmVudDsKICAgICAgICAgICAgICAgIHJlbmRlck9wdHMuaW5wdXRTdGF0dXMgPSB0cnVlOwogICAgICAgICAgICAgICAgdmFsdWUgPSBic0Zvcm0udHJhbnNJbnB1dFRvTnVtYmVyKCRldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLCBpbnB1dGRpZ2l0cyk7CiAgICAgICAgICAgICAgICBkYXRhW3Byb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddID0gdmFsdWU7CiAgICAgICAgICAgICAgICAkZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSA9IHZhbHVlOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7CiAgICAgICAgICAgICAgICB2YXIgJGV2ZW50ID0gd2luZG93LmV2ZW50OwogICAgICAgICAgICAgICAgLy8g6ZmQ5Yi25Y+q6IO96L6T5YWl5pW05pWwCiAgICAgICAgICAgICAgICBpZiAocHJvcHMudHlwZSA9PT0gJ2ludGVnZXInKSB7CiAgICAgICAgICAgICAgICAgICRldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlID0gdmFsdWUudG9TdHJpbmcoKS5tYXRjaCgvXi0/WzAtOV1cZCokLykgfHwgdmFsdWUubWF0Y2goLy0/Lyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAvLyAkZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCkubWF0Y2goL15cZCsoPzpcLlxkezAsMH0pPy8pCiAgICAgICAgICAgICAgICAgIHZhbHVlID0gYnNGb3JtLnRyYW5zSW5wdXRUb051bWJlcigkZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSwgaW5wdXRkaWdpdHMpOwogICAgICAgICAgICAgICAgICBpZiAocmVuZGVyT3B0cy5pbnB1dFN0YXR1cykgewogICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA+IG1heCkgewogICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBtYXg7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA8IG1pbikgewogICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBtaW47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGRhdGFbcHJvcGVydHkgKyAnX19tb25leVN3aXRjaGlucHV0J10gPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICAkZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSA9IHZhbHVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gdmFsdWUgPT09ICctJyB8fCB2YWx1ZSA9PT0gJycgPyAnJyA6IGJzRm9ybS5hY2N1cmF0ZUNoZW5nRmEoZGF0YVtwcm9wZXJ0eSArICdfX21vbmV5U3dpdGNoaW5wdXQnXSwgbW9uZXlVbml0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKF9yZWY1NSkgewogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gX3JlZjU1LnZhbHVlLAogICAgICAgICAgICAgICAgICAkZXZlbnQgPSBfcmVmNTUuJGV2ZW50OwogICAgICAgICAgICAgICAgcmVuZGVyT3B0cy5pbnB1dGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICAkZXZlbnQgPSAkZXZlbnQgfHwgd2luZG93LmV2ZW50OwogICAgICAgICAgICAgICAgdmFsdWUgPSBic0Zvcm0udHJhbnNJbnB1dFRvTnVtYmVyKCRldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLCBpbnB1dGRpZ2l0cyk7CiAgICAgICAgICAgICAgICBpZiAocmVuZGVyT3B0cy5pbnB1dFN0YXR1cykgewogICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPiBtYXgpIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IG1heDsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA8IG1pbikgewogICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbWluOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGRhdGFbcHJvcGVydHkgKyAnX19tb25leVN3aXRjaGlucHV0J10gPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgJGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUgPSB2YWx1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gdmFsdWUgPT09ICctJyB8fCB2YWx1ZSA9PT0gJycgPyAnJyA6IGJzRm9ybS5hY2N1cmF0ZUNoZW5nRmEoZGF0YVtwcm9wZXJ0eSArICdfX21vbmV5U3dpdGNoaW5wdXQnXSwgbW9uZXlVbml0KTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGJsdXI6IGZ1bmN0aW9uIGJsdXIoX3JlZjU2KSB7CiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfcmVmNTYudmFsdWUsCiAgICAgICAgICAgICAgICAgICRldmVudCA9IF9yZWY1Ni4kZXZlbnQ7CiAgICAgICAgICAgICAgICBpZiAocmVuZGVyT3B0cy5pbnB1dGluZyA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICB2YWx1ZSA9IGJzRm9ybS50cmFuc1RvTnVtYmVyKCRldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLCBpbnB1dGRpZ2l0cywgaXNSb3VuZCk7CiAgICAgICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gYnNGb3JtLmFjY3VyYXRlQ2hlbmdGYSh2YWx1ZSwgbW9uZXlVbml0KTsKICAgICAgICAgICAgICAgICAgdmFsdWUgPSBic0Zvcm0udHJhbnNUb051bWJlckxvY2FsU3RyaW5nKHZhbHVlLCBkaWdpdHMpOwogICAgICAgICAgICAgICAgICAkZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSA9IHZhbHVlOwogICAgICAgICAgICAgICAgICBkYXRhW3Byb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddID0gdmFsdWU7CiAgICAgICAgICAgICAgICAgIGl0ZW1DaGFuZ2UoewogICAgICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHksCiAgICAgICAgICAgICAgICAgICAgaXRlbVZhbHVlOiBkYXRhW3Byb3BlcnR5XSwKICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgICAgIHJlbmRlck9wdHM6IHJlbmRlck9wdHMKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB2YWx1ZSA9IGJzRm9ybS50cmFuc1RvTnVtYmVyTG9jYWxTdHJpbmcodmFsdWUsIGRpZ2l0cyk7CiAgICAgICAgICAgICAgICAgICRldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlID0gdmFsdWU7CiAgICAgICAgICAgICAgICAgIGRhdGFbcHJvcGVydHkgKyAnX19tb25leVN3aXRjaGlucHV0J10gPSB2YWx1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlbmRlck9wdHMuaW5wdXRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHJlbmRlck9wdHMuaW5wdXRTdGF0dXMgPSBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCRmb3JtLiRwYXJlbnQudW5lZGl0YWJsZUJvcmRlcikgewogICAgICAgICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgICAgICAgImNsYXNzIjogInRleHQgdGwgYm9yZGVyLXRleHQiCiAgICAgICAgICAgIH0sIFtkYXRhW3Byb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddXSldOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICAgICAgICJjbGFzcyI6ICJ0ZXh0IgogICAgICAgICAgICB9LCBbZGF0YVtwcm9wZXJ0eSArICdfX21vbmV5U3dpdGNoaW5wdXQnXV0pXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGF0YVtwcm9wZXJ0eSArICdfX21vbmV5U3dpdGNoaW5wdXQnXSA9IHZhbCA9PT0gJy0nIHx8IHZhbCA9PT0gJycgPyBkYXRhW3Byb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddID09PSAnJyA/ICcnIDogJycgOiBic0Zvcm0uYWNjdXJhdGVDaHVGYSh2YWwsIG1vbmV5VW5pdCkgKyAnJzsKICAgICAgICBpZiAoZWRpdGFibGUgIT09IGZhbHNlICYmIHByb3BzLmVkaXRhYmxlICE9PSBmYWxzZSkgewogICAgICAgICAgcmV0dXJuIFtoKCd2eGUtaW5wdXQnLCB7CiAgICAgICAgICAgIHJlZjogJ3Z4ZS1pbnB1dCcgKyBwcm9wZXJ0eSwKICAgICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICAgdmFsdWU6IGRhdGFbcHJvcGVydHkgKyAnX19tb25leVN3aXRjaGlucHV0J10sCiAgICAgICAgICAgICAgc3RlcDogMSwKICAgICAgICAgICAgICBtYXhsZW5ndGg6IDE0LAogICAgICAgICAgICAgIG1pbjogMCwKICAgICAgICAgICAgICBtYXg6IDEwMDAwMDAwMDAwMDAsCiAgICAgICAgICAgICAgZGlnaXRzOiBwcm9wcy5kaWdpdHMgfHwgMiwKICAgICAgICAgICAgICB0eXBlOiAnZmxvYXQnCiAgICAgICAgICAgIH0sIHByb3BzKSwge30sIHsKICAgICAgICAgICAgICByZWFkb25seTogcHJvcHMucmVhZG9ubHksCiAgICAgICAgICAgICAgZGlzYWJsZWQ6IHByb3BzLmRpc2FibGVkIHx8IHByb3BzLmVkaXRhYmxlID09PSBmYWxzZQogICAgICAgICAgICB9KSwKICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICBpbnB1dDogZnVuY3Rpb24gaW5wdXQodmFsdWUsICRldmVudCkgewogICAgICAgICAgICAgICAgJGV2ZW50ID0gJGV2ZW50IHx8IHdpbmRvdy5ldmVudDsKICAgICAgICAgICAgICAgIHZhbHVlID0gYnNGb3JtLnRyYW5zSW5wdXRUb051bWJlcigkZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSk7CiAgICAgICAgICAgICAgICAkZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSA9IHZhbHVlOwogICAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eSArICdfX21vbmV5U3dpdGNoaW5wdXQnXSA9IHZhbHVlOwogICAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZSA9PT0gJy0nIHx8IHZhbHVlID09PSAnJyA/ICcnIDogYnNGb3JtLmFjY3VyYXRlQ2hlbmdGYShkYXRhW3Byb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddLCBtb25leVVuaXQpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgYmx1cjogZnVuY3Rpb24gYmx1cihfcmVmNTcpIHsKICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9yZWY1Ny52YWx1ZTsKICAgICAgICAgICAgICAgIGRhdGFbcHJvcGVydHkgKyAnX19tb25leVN3aXRjaGlucHV0J10gPSB2YWx1ZTsKICAgICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gYnNGb3JtLnRyYW5zVG9OdW1iZXIoYnNGb3JtLmFjY3VyYXRlQ2hlbmdGYShkYXRhW3Byb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddLCBtb25leVVuaXQpLCBpbnB1dGRpZ2l0cywgaXNSb3VuZCk7CiAgICAgICAgICAgICAgICBic0Zvcm0uaXRlbUNoYW5nZSh7CiAgICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5LAogICAgICAgICAgICAgICAgICBpdGVtVmFsdWU6IGRhdGFbcHJvcGVydHldLAogICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCRmb3JtLiRwYXJlbnQudW5lZGl0YWJsZUJvcmRlcikgewogICAgICAgICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgICAgICAgImNsYXNzIjogInRleHQgdGwgYm9yZGVyLXRleHQiCiAgICAgICAgICAgIH0sIFtkYXRhW3Byb3BlcnR5ICsgJ19fbW9uZXlTd2l0Y2hpbnB1dCddXSldOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICAgICAgICJjbGFzcyI6ICJ0ZXh0IgogICAgICAgICAgICB9LCBbZGF0YVtwcm9wZXJ0eSArICdfX21vbmV5U3dpdGNoaW5wdXQnXV0pXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogICR2eGVFZGl0RG93blRleHRhcmVhOiB7CiAgICBhdXRvZm9jdXM6ICcudnhlLWlucHV0LS1pbm5lcicsCiAgICByZW5kZXJEZWZhdWx0OiBmdW5jdGlvbiByZW5kZXJEZWZhdWx0KGgsIGNlbGxSZW5kZXIsIF9yZWY1OCwgY29udGV4dCkgewogICAgICB2YXIgcm93ID0gX3JlZjU4LnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmNTguY29sdW1uOwogICAgICByb3dbY29sdW1uLnByb3BlcnR5XSA9IChyb3dbY29sdW1uLnByb3BlcnR5XSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZC9pZywgJycpOwogICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXSA9IHJvd1tjb2x1bW4ucHJvcGVydHldOwogICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgImNsYXNzIjogInRleHQiCiAgICAgIH0sIFtjb250ZXh0LiRncmlkLiRwYXJlbnQuZ2V0SGlnaGxpZ2h0ZWRGaWx0ZXJUZXh0KHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddKV0pXTsKICAgIH0sCiAgICByZW5kZXJDZWxsOiBmdW5jdGlvbiByZW5kZXJDZWxsKGgsIGNlbGxSZW5kZXIsIF9yZWY1OSwgY29udGV4dCkgewogICAgICB2YXIgcm93ID0gX3JlZjU5LnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmNTkuY29sdW1uOwogICAgICByb3dbY29sdW1uLnByb3BlcnR5XSA9IChyb3dbY29sdW1uLnByb3BlcnR5XSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZC9pZywgJycpOwogICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXSA9IHJvd1tjb2x1bW4ucHJvcGVydHldOwogICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgImNsYXNzIjogInRleHQiCiAgICAgIH0sIFtjb250ZXh0LiRncmlkLiRwYXJlbnQuZ2V0SGlnaGxpZ2h0ZWRGaWx0ZXJUZXh0KHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddKV0pXTsKICAgIH0sCiAgICByZW5kZXJFZGl0OiBmdW5jdGlvbiByZW5kZXJFZGl0KGgsIHJlbmRlck9wdHMsIHBhcmFtcywgY29udGV4dCkgewogICAgICByZW5kZXJPcHRzID0gZGVmYXVsdEdsb2JhbFV0aWxzLmRlZXBDb3B5KHJlbmRlck9wdHMpOwogICAgICAvLyByZW5kZXJPcHRzID0gZGVmYXVsdEdsb2JhbFV0aWxzLm1lcmdlQ29udHJhaW5Db25maWcocmVuZGVyT3B0cywgcGFyYW1zLCBjb250ZXh0KQogICAgICB2YXIgX3JlbmRlck9wdHMyID0gcmVuZGVyT3B0cywKICAgICAgICBfcmVuZGVyT3B0czIkcHJvcHMgPSBfcmVuZGVyT3B0czIucHJvcHMsCiAgICAgICAgcHJvcHMgPSBfcmVuZGVyT3B0czIkcHJvcHMgPT09IHZvaWQgMCA/IHt9IDogX3JlbmRlck9wdHMyJHByb3BzOwogICAgICB2YXIgY29sdW1uID0gcGFyYW1zLmNvbHVtbiwKICAgICAgICByb3cgPSBwYXJhbXMucm93OwogICAgICB2YXIgYnNUYWJsZSA9IGNvbnRleHQuJGdyaWQuJHBhcmVudDsKICAgICAgcmV0dXJuIFtoKCdlZGl0LWRvd24tdGV4dGFyZWEnLCB7CiAgICAgICAgcmVmOiAndnhlLWVkaXQtZG93bi10ZXh0YXJlYScgKyBjb2x1bW4ucHJvcGVydHksCiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIHR5cGU6ICd0YWJsZScsCiAgICAgICAgICBjbGVhcmFibGU6IHRydWUsCiAgICAgICAgICBwYXJhbXM6IHBhcmFtcywKICAgICAgICAgIHByb3BzOiBwcm9wcwogICAgICAgIH0sCiAgICAgICAgb246IHsKICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKF9yZWY2MCkgewogICAgICAgICAgICB2YXIgdmFsdWUgPSBfcmVmNjAudmFsdWU7CiAgICAgICAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHldID0gdmFsdWU7CiAgICAgICAgICB9LAogICAgICAgICAgYmx1cjogZnVuY3Rpb24gYmx1cihfcmVmNjEpIHsKICAgICAgICAgICAgdmFyIHZhbHVlID0gX3JlZjYxLnZhbHVlLAogICAgICAgICAgICAgICRldmVudCA9IF9yZWY2MS4kZXZlbnQ7CiAgICAgICAgICAgIGJzVGFibGUuY2VsbE9wdGlvbkNhbGxCYWNrKHBhcmFtcywgewogICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgICAkZXZlbnQ6ICRldmVudCwKICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSldOwogICAgfSwKICAgIHJlbmRlckl0ZW06IGZ1bmN0aW9uIHJlbmRlckl0ZW0oaCwgcmVuZGVyT3B0cywgX3JlZjYyKSB7CiAgICAgIHZhciAkZm9ybSA9IF9yZWY2Mi4kZm9ybSwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWY2Mi5wcm9wZXJ0eSwKICAgICAgICBkYXRhID0gX3JlZjYyLmRhdGE7CiAgICAgIHZhciBfcmVuZGVyT3B0cyRwcm9wczcgPSByZW5kZXJPcHRzLnByb3BzLAogICAgICAgIHByb3BzID0gX3JlbmRlck9wdHMkcHJvcHM3ID09PSB2b2lkIDAgPyB7fSA6IF9yZW5kZXJPcHRzJHByb3BzNzsKICAgICAgaWYgKCRmb3JtLiRwYXJlbnQuZWRpdGFibGUgIT09IGZhbHNlICYmIHByb3BzLmVkaXRhYmxlICE9PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbaCgndnhlLXRleHRhcmVhJywgewogICAgICAgICAgcmVmOiAndnhlLXRleHRhcmVhJyArIHByb3BlcnR5LAogICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgIHZhbHVlOiBkYXRhW3Byb3BlcnR5XSArICcnLAogICAgICAgICAgICBjbGVhcmFibGU6IHRydWUKICAgICAgICAgIH0sIHByb3BzKSwge30sIHsKICAgICAgICAgICAgbWF4bGVuZ3RoOiBwcm9wcy5tYXhsZW5ndGggfHwgMTAwMCwKICAgICAgICAgICAgc2hvd1dvcmRDb3VudDogdHJ1ZSwKICAgICAgICAgICAgZGlzYWJsZWQ6IHByb3BzLmRpc2FibGVkCiAgICAgICAgICB9KSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKF9yZWY2MykgewogICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9yZWY2My52YWx1ZTsKICAgICAgICAgICAgICBkYXRhW3Byb3BlcnR5XSA9IHZhbHVlOwogICAgICAgICAgICB9LAogICAgICAgICAgICBibHVyOiBmdW5jdGlvbiBibHVyKF9yZWY2NCkgewogICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9yZWY2NC52YWx1ZTsKICAgICAgICAgICAgICBkYXRhW3Byb3BlcnR5XSA9IHZhbHVlOwogICAgICAgICAgICAgICRmb3JtLiRwYXJlbnQuaXRlbUNoYW5nZSh7CiAgICAgICAgICAgICAgICAkZm9ybTogJGZvcm0sCiAgICAgICAgICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHksCiAgICAgICAgICAgICAgICBpdGVtVmFsdWU6IHZhbHVlLAogICAgICAgICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgICAgICAgIHJlbmRlck9wdHM6IHJlbmRlck9wdHMKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoJGZvcm0uJHBhcmVudC51bmVkaXRhYmxlQm9yZGVyKSB7CiAgICAgICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgICAgICJjbGFzcyI6ICJ0ZXh0IHRsIGJvcmRlci10ZXh0IgogICAgICAgICAgfSwgW2RhdGFbcHJvcGVydHldXSldOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgICAgICJjbGFzcyI6ICJ0ZXh0IgogICAgICAgICAgfSwgWyIgIiwgZGF0YVtwcm9wZXJ0eV0sICIgIl0pXTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogICR2eGVEYXlzOiB7CiAgICBhdXRvZm9jdXM6ICcudnhlLWlucHV0LS1pbm5lcicsCiAgICAvLyDlpKnmlbDmuLLmn5PlmajvvIzkuI3otrMwLjI15aSp5oyJMOiusO+8jOWkp+S6jjAuNzXlpKnmjIkx5aSp6K6w77yM5YW25LuW5oyJMC415aSp6K6wCiAgICByZW5kZXJDZWxsOiBmdW5jdGlvbiByZW5kZXJDZWxsKGgsIF9yZWY2NSwgX3JlZjY2KSB7CiAgICAgIHZhciBwcm9wcyA9IF9yZWY2NS5wcm9wczsKICAgICAgdmFyIHJvdyA9IF9yZWY2Ni5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjY2LmNvbHVtbjsKICAgICAgdmFyIHF1aXRlRGF5ID0gcm93W2NvbHVtbi5wcm9wZXJ0eV0gJSAxOwogICAgICBxdWl0ZURheSA9IHF1aXRlRGF5IDw9IDAuMjUgPyAwIDogcXVpdGVEYXkgPj0gMC43NSA/IDEgOiAwLjU7CiAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHldID0gTWF0aC5mbG9vcihyb3dbY29sdW1uLnByb3BlcnR5XSAvIDEpICsgcXVpdGVEYXk7CiAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddID0gcm93W2NvbHVtbi5wcm9wZXJ0eV07CiAgICAgIHJldHVybiBbaCgic3BhbiIsIFtyb3dbY29sdW1uLnByb3BlcnR5XV0pXTsKICAgIH0sCiAgICByZW5kZXJEZWZhdWx0OiBmdW5jdGlvbiByZW5kZXJEZWZhdWx0KGgsIF9yZWY2NywgX3JlZjY4KSB7CiAgICAgIHZhciBwcm9wcyA9IF9yZWY2Ny5wcm9wczsKICAgICAgdmFyIHJvdyA9IF9yZWY2OC5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjY4LmNvbHVtbjsKICAgICAgdmFyIHF1aXRlRGF5ID0gcm93W2NvbHVtbi5wcm9wZXJ0eV0gJSAxOwogICAgICBxdWl0ZURheSA9IHF1aXRlRGF5IDw9IDAuMjUgPyAwIDogcXVpdGVEYXkgPj0gMC43NSA/IDEgOiAwLjU7CiAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHldID0gTWF0aC5mbG9vcihyb3dbY29sdW1uLnByb3BlcnR5XSAvIDEpICsgcXVpdGVEYXk7CiAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddID0gcm93W2NvbHVtbi5wcm9wZXJ0eV07CiAgICAgIHJldHVybiBbaCgic3BhbiIsIFtyb3dbY29sdW1uLnByb3BlcnR5XV0pXTsKICAgIH0sCiAgICByZW5kZXJFZGl0OiBmdW5jdGlvbiByZW5kZXJFZGl0KGgsIF9yZWY2OSwgX3JlZjcwKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgcHJvcHMgPSBfcmVmNjkucHJvcHM7CiAgICAgIHZhciByb3cgPSBfcmVmNzAucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWY3MC5jb2x1bW47CiAgICAgIHJldHVybiBbaCgidnhlLWlucHV0IiwgewogICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICJwbGFjZWhvbGRlciI6ICLor7fovpPlhaXlpKnmlbAiLAogICAgICAgICAgInR5cGUiOiAibnVtYmVyIiwKICAgICAgICAgICJjbGVhcmFibGUiOiB0cnVlCiAgICAgICAgfSwKICAgICAgICAicHJvcHMiOiBfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcyksCiAgICAgICAgIm1vZGVsIjogewogICAgICAgICAgdmFsdWU6IHJvd1tjb2x1bW4ucHJvcGVydHldLAogICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIGNhbGxiYWNrKCQkdikgewogICAgICAgICAgICBfdGhpczIuJHNldChyb3csIGNvbHVtbi5wcm9wZXJ0eSwgJCR2KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pXTsKICAgIH0sCiAgICByZW5kZXJJdGVtOiBmdW5jdGlvbiByZW5kZXJJdGVtKGgsIHJlbmRlck9wdHMsIF9yZWY3MSkgewogICAgICB2YXIgJGZvcm0gPSBfcmVmNzEuJGZvcm0sCiAgICAgICAgcHJvcGVydHkgPSBfcmVmNzEucHJvcGVydHksCiAgICAgICAgZGF0YSA9IF9yZWY3MS5kYXRhLAogICAgICAgIGl0ZW0gPSBfcmVmNzEuaXRlbTsKICAgICAgdmFyIHByb3BzID0gcmVuZGVyT3B0cy5wcm9wczsKICAgICAgcHJvcHMgPSBwcm9wcyB8fCB7fTsKICAgICAgaWYgKCRmb3JtLiRwYXJlbnQuZWRpdGFibGUgIT09IGZhbHNlICYmIHByb3BzLmVkaXRhYmxlICE9PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbaCgndnhlLWlucHV0JywgewogICAgICAgICAgcmVmOiAndnhlLWlucHV0JyArIHByb3BlcnR5LAogICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICBwbGFjZWhvbGRlcjogJ+ivt+i+k+WFpeWkqeaVsCcsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgICBjbGVhcmFibGU6IHRydWUsCiAgICAgICAgICAgIHZhbHVlOiBkYXRhW3Byb3BlcnR5XQogICAgICAgICAgfSwgcHJvcHMpLAogICAgICAgICAgb246IHsKICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7CiAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYmx1cjogZnVuY3Rpb24gYmx1cihfcmVmNzIpIHsKICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfcmVmNzIudmFsdWU7CiAgICAgICAgICAgICAgdmFyIHF1aXRlRGF5ID0gZGF0YVtwcm9wZXJ0eV0gJSAxOwogICAgICAgICAgICAgIHF1aXRlRGF5ID0gcXVpdGVEYXkgPD0gMC4yNSA/IDAgOiBxdWl0ZURheSA+PSAwLjc1ID8gMSA6IDAuNTsKICAgICAgICAgICAgICBkYXRhW3Byb3BlcnR5XSA9IE1hdGguZmxvb3IoZGF0YVtwcm9wZXJ0eV0gLyAxKSArIHF1aXRlRGF5OwogICAgICAgICAgICAgICRmb3JtLiRwYXJlbnQuaXRlbUNoYW5nZSh7CiAgICAgICAgICAgICAgICAkZm9ybTogJGZvcm0sCiAgICAgICAgICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHksCiAgICAgICAgICAgICAgICBpdGVtVmFsdWU6IHZhbHVlLAogICAgICAgICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgICAgICAgIHJlbmRlck9wdHM6IHJlbmRlck9wdHMKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pXTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgICAiY2xhc3MiOiAidGV4dCBibG9jayIKICAgICAgICB9LCBbIiAiLCBkYXRhW3Byb3BlcnR5XSwgIiAiXSldOwogICAgICB9CiAgICB9CiAgfSwKICAkdnhlVGltZTogewogICAgYXV0b2ZvY3VzOiAnLnZ4ZS1pbnB1dC0taW5uZXInLAogICAgLy8g5pe26Ze05qC85byP5YyW5riy5p+T5ZmoCiAgICByZW5kZXJDZWxsOiBmdW5jdGlvbiByZW5kZXJDZWxsKGgsIF9yZWY3MywgX3JlZjc0KSB7CiAgICAgIHZhciBwcm9wcyA9IF9yZWY3My5wcm9wczsKICAgICAgdmFyIHJvdyA9IF9yZWY3NC5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjc0LmNvbHVtbjsKICAgICAgcHJvcHMgPSBwcm9wcyB8fCB7fTsKICAgICAgcHJvcHMuZm9ybWF0ID0gcHJvcHMuZm9ybWF0IHx8ICdZWVlZLU1NLUREIGhoOm1tOnNzJzsKICAgICAgdmFyIGRhdGVUaW1lID0gKHJvd1tjb2x1bW4ucHJvcGVydHldICsgJycpLnJlcGxhY2UoL251bGx8dW5kZWZpbmVkL2lnLCAnJyk7CiAgICAgIGlmIChkYXRlVGltZSkgewogICAgICAgIHZhciBkYXRlID0gZGF0ZVRpbWUubGVuZ3RoID09PSA4ID8gZGF0ZVRpbWUuc3Vic3RyaW5nKDAsIDQpICsgJy0nICsgZGF0ZVRpbWUuc3Vic3RyaW5nKDQsIDYpICsgJy0nICsgZGF0ZVRpbWUuc3Vic3RyaW5nKDYsIDgpIDogZGF0ZVRpbWUubGVuZ3RoID09PSAxNCA/IGRhdGVUaW1lLnN1YnN0cmluZygwLCA0KSArICctJyArIGRhdGVUaW1lLnN1YnN0cmluZyg0LCA2KSArICctJyArIGRhdGVUaW1lLnN1YnN0cmluZyg2LCA4KSArICcgJyArIGRhdGVUaW1lLnN1YnN0cmluZyg4LCAxMCkgKyAnOicgKyBkYXRlVGltZS5zdWJzdHJpbmcoMTAsIDEyKSArICc6JyArIGRhdGVUaW1lLnN1YnN0cmluZygxMiwgMTQpIDogZGF0ZVRpbWU7CiAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSBpc05hTihuZXcgRGF0ZShkYXRlVGltZSkuZ2V0VGltZSgpKSA/IG5ldyBEYXRlKGRhdGUpLmZvcm1hdChwcm9wcy5mb3JtYXQpIDogbmV3IERhdGUoZGF0ZVRpbWUpLmZvcm1hdChwcm9wcy5mb3JtYXQpOwogICAgICB9IGVsc2UgewogICAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddID0gJyc7CiAgICAgIH0KICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgW3Jvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddXSldOwogICAgfSwKICAgIHJlbmRlckRlZmF1bHQ6IGZ1bmN0aW9uIHJlbmRlckRlZmF1bHQoaCwgX3JlZjc1LCBfcmVmNzYpIHsKICAgICAgdmFyIHByb3BzID0gX3JlZjc1LnByb3BzOwogICAgICB2YXIgcm93ID0gX3JlZjc2LnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmNzYuY29sdW1uOwogICAgICBwcm9wcyA9IHByb3BzIHx8IHt9OwogICAgICBwcm9wcy5mb3JtYXQgPSBwcm9wcy5mb3JtYXQgfHwgJ1lZWVktTU0tREQgaGg6bW06c3MnOwogICAgICB2YXIgZGF0ZVRpbWUgPSAocm93W2NvbHVtbi5wcm9wZXJ0eV0gKyAnJykucmVwbGFjZSgvbnVsbHx1bmRlZmluZWQvaWcsICcnKTsKICAgICAgaWYgKGRhdGVUaW1lKSB7CiAgICAgICAgdmFyIGRhdGUgPSBkYXRlVGltZS5sZW5ndGggPT09IDggPyBkYXRlVGltZS5zdWJzdHJpbmcoMCwgNCkgKyAnLScgKyBkYXRlVGltZS5zdWJzdHJpbmcoNCwgNikgKyAnLScgKyBkYXRlVGltZS5zdWJzdHJpbmcoNiwgOCkgOiBkYXRlVGltZS5sZW5ndGggPT09IDE0ID8gZGF0ZVRpbWUuc3Vic3RyaW5nKDAsIDQpICsgJy0nICsgZGF0ZVRpbWUuc3Vic3RyaW5nKDQsIDYpICsgJy0nICsgZGF0ZVRpbWUuc3Vic3RyaW5nKDYsIDgpICsgJyAnICsgZGF0ZVRpbWUuc3Vic3RyaW5nKDgsIDEwKSArICc6JyArIGRhdGVUaW1lLnN1YnN0cmluZygxMCwgMTIpICsgJzonICsgZGF0ZVRpbWUuc3Vic3RyaW5nKDEyLCAxNCkgOiBkYXRlVGltZTsKICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXSA9IGlzTmFOKG5ldyBEYXRlKGRhdGVUaW1lKS5nZXRUaW1lKCkpID8gbmV3IERhdGUoZGF0ZSkuZm9ybWF0KHByb3BzLmZvcm1hdCkgOiBuZXcgRGF0ZShkYXRlVGltZSkuZm9ybWF0KHByb3BzLmZvcm1hdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSAnJzsKICAgICAgfQogICAgICByZXR1cm4gW2goInNwYW4iLCBbcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J11dKV07CiAgICB9LAogICAgcmVuZGVyRWRpdDogZnVuY3Rpb24gcmVuZGVyRWRpdChoLCBfcmVmNzcsIF9yZWY3OCkgewogICAgICB2YXIgcHJvcHMgPSBfcmVmNzcucHJvcHM7CiAgICAgIHZhciByb3cgPSBfcmVmNzgucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWY3OC5jb2x1bW47CiAgICAgIHJldHVybiBbaCgndnhlLWlucHV0JywgewogICAgICAgIHJlZjogJ3Z4ZS1pbnB1dCcgKyBjb2x1bW4ucHJvcGVydHksCiAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7CiAgICAgICAgICBwbGFjZWhvbGRlcjogJ+ivt+mAieaLqeaXtumXtCcsCiAgICAgICAgICB0eXBlOiAnZGF0ZScsCiAgICAgICAgICBjbGVhcmFibGU6IHRydWUsCiAgICAgICAgICB2YWx1ZTogcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10KICAgICAgICB9LCBwcm9wcyksIHt9LCB7CiAgICAgICAgICB0cmFuc2ZlcjogdHJ1ZQogICAgICAgIH0pLAogICAgICAgIG9uOiB7CiAgICAgICAgICBpbnB1dDogZnVuY3Rpb24gaW5wdXQodmFsdWUpIHsKICAgICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSB2YWx1ZSA/IG5ldyBEYXRlKHZhbHVlKS5mb3JtYXQocHJvcHMuZm9ybWF0KSA6ICcnOwogICAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5XSA9IHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddOwogICAgICAgICAgfSwKICAgICAgICAgIGJsdXI6IGZ1bmN0aW9uIGJsdXIoX3JlZjc5KSB7CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9yZWY3OS52YWx1ZTsKICAgICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSB2YWx1ZSA/IG5ldyBEYXRlKHZhbHVlKS5mb3JtYXQocHJvcHMuZm9ybWF0KSA6ICcnOwogICAgICAgICAgICByb3dbY29sdW1uLnByb3BlcnR5XSA9IHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSldOwogICAgfSwKICAgIHJlbmRlckl0ZW06IGZ1bmN0aW9uIHJlbmRlckl0ZW0oaCwgcmVuZGVyT3B0cywgX3JlZjgwKSB7CiAgICAgIHZhciAkZm9ybSA9IF9yZWY4MC4kZm9ybSwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWY4MC5wcm9wZXJ0eSwKICAgICAgICBkYXRhID0gX3JlZjgwLmRhdGE7CiAgICAgIHZhciBwcm9wcyA9IHJlbmRlck9wdHMucHJvcHM7CiAgICAgIHByb3BzID0gcHJvcHMgfHwge307CiAgICAgIHByb3BzLmZvcm1hdCA9IHByb3BzLmZvcm1hdCB8fCAnWVlZWS1NTS1ERCBoaDptbTpzcyc7CiAgICAgIHZhciBkYXRlVGltZSA9IChkYXRhW3Byb3BlcnR5XSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZC9pZywgJycpOwogICAgICBpZiAoZGF0ZVRpbWUpIHsKICAgICAgICB2YXIgZGF0ZSA9IGRhdGVUaW1lLmxlbmd0aCA9PT0gOCA/IGRhdGVUaW1lLnN1YnN0cmluZygwLCA0KSArICctJyArIGRhdGVUaW1lLnN1YnN0cmluZyg0LCA2KSArICctJyArIGRhdGVUaW1lLnN1YnN0cmluZyg2LCA4KSA6IGRhdGVUaW1lLmxlbmd0aCA9PT0gMTQgPyBkYXRlVGltZS5zdWJzdHJpbmcoMCwgNCkgKyAnLScgKyBkYXRlVGltZS5zdWJzdHJpbmcoNCwgNikgKyAnLScgKyBkYXRlVGltZS5zdWJzdHJpbmcoNiwgOCkgKyAnICcgKyBkYXRlVGltZS5zdWJzdHJpbmcoOCwgMTApICsgJzonICsgZGF0ZVRpbWUuc3Vic3RyaW5nKDEwLCAxMikgKyAnOicgKyBkYXRlVGltZS5zdWJzdHJpbmcoMTIsIDE0KSA6IGRhdGVUaW1lOwogICAgICAgIGRhdGFbcHJvcGVydHkgKyAnX192aWV3U29ydCddID0gaXNOYU4obmV3IERhdGUoZGF0ZVRpbWUpLmdldFRpbWUoKSkgPyBuZXcgRGF0ZShkYXRlKS5mb3JtYXQocHJvcHMuZm9ybWF0KSA6IG5ldyBEYXRlKGRhdGVUaW1lKS5mb3JtYXQocHJvcHMuZm9ybWF0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkYXRhW3Byb3BlcnR5ICsgJ19fdmlld1NvcnQnXSA9ICcnOwogICAgICB9CiAgICAgIGlmICgkZm9ybS4kcGFyZW50LmVkaXRhYmxlICE9PSBmYWxzZSAmJiBwcm9wcy5lZGl0YWJsZSAhPT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gW2goJ3Z4ZS1pbnB1dCcsIHsKICAgICAgICAgIHJlZjogJ3Z4ZS1pbnB1dCcgKyBwcm9wZXJ0eSwKICAgICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICBwbGFjZWhvbGRlcjogJ+ivt+mAieaLqeaXtumXtCcsCiAgICAgICAgICAgIHR5cGU6ICdkYXRlJywKICAgICAgICAgICAgY2xlYXJhYmxlOiB0cnVlLAogICAgICAgICAgICB2YWx1ZTogZGF0YVtwcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10KICAgICAgICAgIH0sIHByb3BzKSwge30sIHsKICAgICAgICAgICAgdHJhbnNmZXI6IHRydWUsCiAgICAgICAgICAgICdkaXNhYmxlZC1tZXRob2QnOiBmdW5jdGlvbiBkaXNhYmxlZE1ldGhvZChfcmVmODEpIHsKICAgICAgICAgICAgICB2YXIgZGF0ZSA9IF9yZWY4MS5kYXRlOwogICAgICAgICAgICAgIGlmIChwcm9wcy5pc0xpbWl0TWluWWVhciAmJiBwcm9wcy5taW5ZZWFyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gTnVtYmVyKG5ldyBEYXRlKGRhdGUpLmdldEZ1bGxZZWFyKCkpIDwgTnVtYmVyKHByb3BzLm1pblllYXIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLAogICAgICAgICAgb246IHsKICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7CiAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSB2YWx1ZSA/IG5ldyBEYXRlKHZhbHVlKS5mb3JtYXQocHJvcHMuZm9ybWF0KSA6ICcnOwogICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2VsZXNzLWVzY2FwZQogICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gZGF0YVtwcm9wZXJ0eSArICdfX3ZpZXdTb3J0J107CiAgICAgICAgICAgICAgLy8gZGF0YVtwcm9wZXJ0eV0gPSBkYXRhW3Byb3BlcnR5ICsgJ19fdmlld1NvcnQnXS5yZXBsYWNlKC9bLVwvOlxzXS9pZywgJycpCiAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogZGF0YVtwcm9wZXJ0eV0sCiAgICAgICAgICAgICAgICBpdGVtVmlld1ZhbHVlOiBkYXRhW3Byb3BlcnR5ICsgJ19fdmlld1NvcnQnXSwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICAgImNsYXNzIjogInRleHQgYmxvY2siCiAgICAgICAgfSwgWyIgIiwgZGF0YVtwcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10sICIgIl0pXTsKICAgICAgfQogICAgfQogIH0sCiAgJHZ4ZVJhZGlvOiB7CiAgICByZW5kZXJFZGl0OiBmdW5jdGlvbiByZW5kZXJFZGl0KGgsIF9yZWY4MiwgX3JlZjgzKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB2YXIgb3B0aW9ucyA9IF9yZWY4Mi5vcHRpb25zLAogICAgICAgIHByb3BzID0gX3JlZjgyLnByb3BzLAogICAgICAgIHByb3BzQyA9IF9yZWY4Mi5wcm9wc0M7CiAgICAgIHZhciByb3cgPSBfcmVmODMucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWY4My5jb2x1bW47CiAgICAgIHByb3BzID0gcHJvcHMgfHwge307CiAgICAgIHByb3BzQyA9IHByb3BzQyB8fCB7fTsKICAgICAgcmV0dXJuIFtoKCJ2eGUtcmFkaW8tZ3JvdXAiLCB7CiAgICAgICAgInByb3BzIjogX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpLAogICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICJwbGFjZWhvbGRlciI6ICLor7fpgInmi6kiCiAgICAgICAgfSwKICAgICAgICAibW9kZWwiOiB7CiAgICAgICAgICB2YWx1ZTogcm93W2NvbHVtbi5wcm9wZXJ0eV0sCiAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soJCR2KSB7CiAgICAgICAgICAgIF90aGlzMy4kc2V0KHJvdywgY29sdW1uLnByb3BlcnR5LCAkJHYpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgW29wdGlvbnMubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgIHJldHVybiBbaCgidnhlLXJhZGlvIiwgX21lcmdlSlNYUHJvcHMoW3sKICAgICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICAgImxhYmVsIjogaXRlbS52YWx1ZQogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIHByb3BzQzogcHJvcHNDCiAgICAgICAgfV0pLCBbaXRlbS5sYWJlbF0pXTsKICAgICAgfSldKV07CiAgICB9LAogICAgcmVuZGVyRGVmYXVsdDogZnVuY3Rpb24gcmVuZGVyRGVmYXVsdChoLCBfcmVmODQsIF9yZWY4NSwgY29udGV4dCkgewogICAgICB2YXIgb3B0aW9ucyA9IF9yZWY4NC5vcHRpb25zLAogICAgICAgIHByb3BzID0gX3JlZjg0LnByb3BzOwogICAgICB2YXIgcm93ID0gX3JlZjg1LnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmODUuY29sdW1uOwogICAgICB2YXIgdmFsdWUgPSAnJzsKICAgICAgb3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgIGlmIChyb3dbY29sdW1uLnByb3BlcnR5XSA9PT0gaXRlbS52YWx1ZSkgewogICAgICAgICAgdmFsdWUgPSBpdGVtLmxhYmVsOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddID0gdmFsdWU7CiAgICAgIHJldHVybiBbaCgic3BhbiIsIFt2YWx1ZV0pXTsKICAgIH0sCiAgICByZW5kZXJDZWxsOiBmdW5jdGlvbiByZW5kZXJDZWxsKGgsIF9yZWY4NiwgX3JlZjg3KSB7CiAgICAgIHZhciBvcHRpb25zID0gX3JlZjg2Lm9wdGlvbnMsCiAgICAgICAgcHJvcHMgPSBfcmVmODYucHJvcHM7CiAgICAgIHZhciByb3cgPSBfcmVmODcucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWY4Ny5jb2x1bW47CiAgICAgIHZhciB2YWx1ZSA9ICcnOwogICAgICBvcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgaWYgKHJvd1tjb2x1bW4ucHJvcGVydHldID09PSBpdGVtLnZhbHVlKSB7CiAgICAgICAgICB2YWx1ZSA9IGl0ZW0ubGFiZWw7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSB2YWx1ZTsKICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgW3ZhbHVlXSldOwogICAgfSwKICAgIHJlbmRlckl0ZW06IGZ1bmN0aW9uIHJlbmRlckl0ZW0oaCwgcmVuZGVyT3B0cywgX3JlZjg4KSB7CiAgICAgIHZhciAkZm9ybSA9IF9yZWY4OC4kZm9ybSwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWY4OC5wcm9wZXJ0eSwKICAgICAgICBkYXRhID0gX3JlZjg4LmRhdGE7CiAgICAgIHZhciBwcm9wcyA9IHJlbmRlck9wdHMucHJvcHMsCiAgICAgICAgcHJvcHNDID0gcmVuZGVyT3B0cy5wcm9wc0MsCiAgICAgICAgb3B0aW9ucyA9IHJlbmRlck9wdHMub3B0aW9uczsKICAgICAgaWYgKCRmb3JtLiRwYXJlbnQuZWRpdGFibGUgIT09IGZhbHNlICYmIHByb3BzLmVkaXRhYmxlICE9PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbaCgndnhlLXJhZGlvLWdyb3VwJywgewogICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICB2YWx1ZTogZGF0YVtwcm9wZXJ0eV0KICAgICAgICAgIH0sIHByb3BzKSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKF9yZWY4OSkgewogICAgICAgICAgICAgIHZhciAkZXZlbnQgPSBfcmVmODkuJGV2ZW50LAogICAgICAgICAgICAgICAgbGFiZWwgPSBfcmVmODkubGFiZWw7CiAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSBsYWJlbDsKICAgICAgICAgICAgICAkZm9ybS4kcGFyZW50Lml0ZW1DaGFuZ2UoewogICAgICAgICAgICAgICAgJGZvcm06ICRmb3JtLAogICAgICAgICAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5LAogICAgICAgICAgICAgICAgaXRlbVZhbHVlOiBsYWJlbCwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBvcHRpb25zLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGgoJ3Z4ZS1yYWRpbycsIHsKICAgICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgIGRpc2FibGVkOiBpdGVtLmRpc2FibGVkLAogICAgICAgICAgICAgIGxhYmVsOiBTdHJpbmcoaXRlbS52YWx1ZSkKICAgICAgICAgICAgfSwgcHJvcHNDKQogICAgICAgICAgfSwgaXRlbS5sYWJlbCk7CiAgICAgICAgfSkpXTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW2goJ3Z4ZS1yYWRpby1ncm91cCcsIHsKICAgICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgdmFsdWU6IGRhdGFbcHJvcGVydHldCiAgICAgICAgICB9LCBwcm9wcyksCiAgICAgICAgICBvbjogewogICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uIGNoYW5nZShfcmVmOTApIHsKICAgICAgICAgICAgICB2YXIgJGV2ZW50ID0gX3JlZjkwLiRldmVudCwKICAgICAgICAgICAgICAgIGxhYmVsID0gX3JlZjkwLmxhYmVsOwogICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gbGFiZWw7CiAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogbGFiZWwsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgcmVuZGVyT3B0czogcmVuZGVyT3B0cwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgb3B0aW9ucy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBoKCd2eGUtcmFkaW8nLCB7CiAgICAgICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSwKICAgICAgICAgICAgICBsYWJlbDogU3RyaW5nKGl0ZW0udmFsdWUpCiAgICAgICAgICAgIH0sIHByb3BzQykKICAgICAgICAgIH0sIGl0ZW0ubGFiZWwpOwogICAgICAgIH0pKV07CiAgICAgIH0KICAgIH0KICB9LAogICR2eGVFZGl0RG93bkpzb246IHsKICAgIGF1dG9mb2N1czogJy52eGUtaW5wdXQtLWlubmVyJywKICAgIHJlbmRlckVkaXQ6IGZ1bmN0aW9uIHJlbmRlckVkaXQoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7CiAgICAgIHJldHVybiBbaCgiZWRpdC1kb3duLWpzb24iLCB7CiAgICAgICAgImF0dHJzIjogewogICAgICAgICAgInR5cGUiOiAndGFibGUnLAogICAgICAgICAgInBhcmFtcyI6IHBhcmFtcwogICAgICAgIH0KICAgICAgfSldOwogICAgfSwKICAgIHJlbmRlckRlZmF1bHQ6IGZ1bmN0aW9uIHJlbmRlckRlZmF1bHQoaCwgY2VsbFJlbmRlciwgX3JlZjkxLCBjb250ZXh0KSB7CiAgICAgIHZhciByb3cgPSBfcmVmOTEucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWY5MS5jb2x1bW47CiAgICAgIHZhciB2YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHJvd1tjb2x1bW4ucHJvcGVydHldKTsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSB2YWx1ZTsKICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJ0ZXh0IGJsb2NrIgogICAgICB9LCBbdmFsdWVdKV07CiAgICB9LAogICAgcmVuZGVyQ2VsbDogZnVuY3Rpb24gcmVuZGVyQ2VsbChoLCBjZWxsUmVuZGVyLCBfcmVmOTIsIGNvbnRleHQpIHsKICAgICAgdmFyIHJvdyA9IF9yZWY5Mi5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjkyLmNvbHVtbjsKICAgICAgdmFyIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkocm93W2NvbHVtbi5wcm9wZXJ0eV0pOwogICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXSA9IHZhbHVlOwogICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgImNsYXNzIjogInRleHQgYmxvY2siCiAgICAgIH0sIFt2YWx1ZV0pXTsKICAgIH0sCiAgICByZW5kZXJJdGVtOiBmdW5jdGlvbiByZW5kZXJJdGVtKGgsIHJlbmRlck9wdHMsIHBhcmFtcykgewogICAgICB2YXIgJGZvcm0gPSBwYXJhbXMuJGZvcm0sCiAgICAgICAgcHJvcGVydHkgPSBwYXJhbXMucHJvcGVydHksCiAgICAgICAgZGF0YSA9IHBhcmFtcy5kYXRhOwogICAgICB2YXIgcHJvcHMgPSByZW5kZXJPcHRzLnByb3BzOwogICAgICBpZiAoJGZvcm0uJHBhcmVudC5lZGl0YWJsZSAhPT0gZmFsc2UgJiYgcHJvcHMuZWRpdGFibGUgIT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIFtoKCdlZGl0LWRvd24tanNvbicsIHsKICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgIHBhcmFtczogcGFyYW1zCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7CiAgICAgICAgICAgICAgZGVmYXVsdEdsb2JhbFV0aWxzLmRlYm91bmNlSXRlbUNoYW5nZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAkZm9ybS4kcGFyZW50Lml0ZW1DaGFuZ2UoewogICAgICAgICAgICAgICAgICAkZm9ybTogJGZvcm0sCiAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgICAgaXRlbVZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgICAgICAgICAgcmVuZGVyT3B0czogcmVuZGVyT3B0cwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtoKCJlZGl0LWRvd24tanNvbiIsIHsKICAgICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICAgInR5cGUiOiAnZm9ybScsCiAgICAgICAgICAgICJwYXJhbXMiOiBwYXJhbXMKICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0KICAgIH0KICB9LAogICR2eGVJbnRlcnZhcjogewogICAgYXV0b2ZvY3VzOiAnLnZ4ZS1pbnB1dC0taW5uZXInLAogICAgLy8g6Zi25q616YCJ5oupIOa4suafk+WZqCDln7rnoYDniYjmnKwKICAgIHJlbmRlckNlbGw6IGZ1bmN0aW9uIHJlbmRlckNlbGwoaCwgX3JlZjkzLCBwYXJhbXMpIHsKICAgICAgdmFyIHByb3BzID0gX3JlZjkzLnByb3BzOwogICAgICB2YXIgcm93ID0gcGFyYW1zLnJvdywKICAgICAgICBjb2x1bW4gPSBwYXJhbXMuY29sdW1uOwogICAgICB2YXIgcHJvcGVydHlBcnIgPSBjb2x1bW4ucHJvcGVydHkuc3BsaXQoJyMjJyk7CiAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHldID0gcm93W3Byb3BlcnR5QXJyWzBdXSArICcjIycgKyByb3dbcHJvcGVydHlBcnJbMV1dOwogICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXSA9IHJvd1twcm9wZXJ0eUFyclswXV0gKyAn6IezJyArIHJvd1twcm9wZXJ0eUFyclsxXV07CiAgICAgIHJldHVybiBbaCgiRWRpdEludGVydmFySW5wdXQiLCB7CiAgICAgICAgImF0dHJzIjogewogICAgICAgICAgImNvbnN0UHJvcHMiOiBwcm9wcywKICAgICAgICAgICJwYXJhbXMiOiBwYXJhbXMsCiAgICAgICAgICAidHlwZSI6ICd0YWJsZScsCiAgICAgICAgICAiZWRpdGFibGUiOiBmYWxzZQogICAgICAgIH0KICAgICAgfSldOwogICAgfSwKICAgIHJlbmRlckRlZmF1bHQ6IGZ1bmN0aW9uIHJlbmRlckRlZmF1bHQoaCwgX3JlZjk0LCBwYXJhbXMpIHsKICAgICAgdmFyIHByb3BzID0gX3JlZjk0LnByb3BzOwogICAgICB2YXIgcm93ID0gcGFyYW1zLnJvdywKICAgICAgICBjb2x1bW4gPSBwYXJhbXMuY29sdW1uOwogICAgICB2YXIgcHJvcGVydHlBcnIgPSBjb2x1bW4ucHJvcGVydHkuc3BsaXQoJyMjJyk7CiAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHldID0gcm93W3Byb3BlcnR5QXJyWzBdXSArICcjIycgKyByb3dbcHJvcGVydHlBcnJbMV1dOwogICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXSA9IHJvd1twcm9wZXJ0eUFyclswXV0gKyAn6IezJyArIHJvd1twcm9wZXJ0eUFyclsxXV07CiAgICAgIHJldHVybiBbaCgiRWRpdEludGVydmFySW5wdXQiLCB7CiAgICAgICAgImF0dHJzIjogewogICAgICAgICAgImNvbnN0UHJvcHMiOiBwcm9wcywKICAgICAgICAgICJwYXJhbXMiOiBwYXJhbXMsCiAgICAgICAgICAidHlwZSI6ICd0YWJsZScsCiAgICAgICAgICAiZWRpdGFibGUiOiBmYWxzZQogICAgICAgIH0KICAgICAgfSldOwogICAgfSwKICAgIHJlbmRlckVkaXQ6IGZ1bmN0aW9uIHJlbmRlckVkaXQoaCwgX3JlZjk1LCBwYXJhbXMpIHsKICAgICAgdmFyIHByb3BzID0gX3JlZjk1LnByb3BzOwogICAgICByZXR1cm4gW2goIkVkaXRJbnRlcnZhcklucHV0IiwgewogICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICJjb25zdFByb3BzIjogcHJvcHMsCiAgICAgICAgICAicGFyYW1zIjogcGFyYW1zLAogICAgICAgICAgInR5cGUiOiAndGFibGUnLAogICAgICAgICAgImVkaXRhYmxlIjogdHJ1ZQogICAgICAgIH0KICAgICAgfSldOwogICAgfSwKICAgIHJlbmRlckl0ZW06IGZ1bmN0aW9uIHJlbmRlckl0ZW0oaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7CiAgICAgIHZhciAkZm9ybSA9IHBhcmFtcy4kZm9ybSwKICAgICAgICBwcm9wZXJ0eSA9IHBhcmFtcy5wcm9wZXJ0eSwKICAgICAgICBkYXRhID0gcGFyYW1zLmRhdGE7CiAgICAgIHZhciBwcm9wcyA9IHJlbmRlck9wdHMucHJvcHM7CiAgICAgIHZhciBwcm9wZXJ0eUFyciA9IHByb3BlcnR5LnNwbGl0KCcjIycpOwogICAgICBpZiAoJGZvcm0uJHBhcmVudC5lZGl0YWJsZSAhPT0gZmFsc2UgJiYgcHJvcHMuZWRpdGFibGUgIT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIFtoKCdFZGl0SW50ZXJ2YXJJbnB1dCcsIHsKICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgIHZhbHVlOiBkYXRhW3Byb3BlcnR5XSwKICAgICAgICAgICAgY29uc3RQcm9wczogcHJvcHMsCiAgICAgICAgICAgIHBhcmFtczogcGFyYW1zLAogICAgICAgICAgICB0eXBlOiAnZm9ybScsCiAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlCiAgICAgICAgICB9LAogICAgICAgICAgb246IHsKICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7CiAgICAgICAgICAgICAgdmFyIF9pdGVtVmFsdWU7CiAgICAgICAgICAgICAgdmFyIHZhbHVlQXJyID0gdmFsdWUuc3BsaXQoJyMjJyk7CiAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogKF9pdGVtVmFsdWUgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9pdGVtVmFsdWUsIHByb3BlcnR5QXJyWzBdLCB2YWx1ZUFyclswXSksIF9kZWZpbmVQcm9wZXJ0eShfaXRlbVZhbHVlLCBwcm9wZXJ0eUFyclsxXSwgdmFsdWVBcnJbMV0pLCBfaXRlbVZhbHVlKSwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtoKCJFZGl0SW50ZXJ2YXJJbnB1dCIsIHsKICAgICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICAgImNvbnN0UHJvcHMiOiBwcm9wcywKICAgICAgICAgICAgInBhcmFtcyI6IHBhcmFtcywKICAgICAgICAgICAgInR5cGUiOiAnZm9ybScsCiAgICAgICAgICAgICJlZGl0YWJsZSI6IGZhbHNlCiAgICAgICAgICB9CiAgICAgICAgfSldOwogICAgICB9CiAgICB9CiAgfSwKICAkdnhlU3dpdGNoOiB7CiAgICAvLyDlvIDlhbMKICAgIC8vIHByb3BzOiB7CiAgICAvLyAgIG9wdGlvbnM6IFsKICAgIC8vICAgICB7IGxhYmVsOiAn5pivJywgdmFsdWU6IDEgfSwKICAgIC8vICAgICB7IGxhYmVsOiAn5ZCmJywgdmFsdWU6IDAgfQogICAgLy8gICBdCiAgICAvLyB9CiAgICByZW5kZXJDZWxsOiBmdW5jdGlvbiByZW5kZXJDZWxsKGgsIF9yZWY5NiwgX3JlZjk3KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICB2YXIgcHJvcHMgPSBfcmVmOTYucHJvcHMsCiAgICAgICAgb3B0aW9ucyA9IF9yZWY5Ni5vcHRpb25zOwogICAgICB2YXIgcm93ID0gX3JlZjk3LnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmOTcuY29sdW1uOwogICAgICBpZiAoT2JqZWN0LmtleXMocm93KS5pbmNsdWRlcygnb3BlblN3aXRjaCcpKSB7CiAgICAgICAgcHJvcHMgPSBPYmplY3QuYXNzaWduKHt9LCBwcm9wcywgewogICAgICAgICAgZGlzYWJsZWQ6ICFyb3cub3BlblN3aXRjaAogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBbaCgidnhlLXN3aXRjaCIsIHsKICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAib3Blbi1sYWJlbCI6IG9wdGlvbnNbMF0ubGFiZWwsCiAgICAgICAgICAiY2xvc2UtbGFiZWwiOiBvcHRpb25zWzFdLmxhYmVsLAogICAgICAgICAgIm9wZW4tdmFsdWUiOiBvcHRpb25zWzBdLnZhbHVlLAogICAgICAgICAgImNsb3NlLXZhbHVlIjogb3B0aW9uc1sxXS52YWx1ZQogICAgICAgIH0sCiAgICAgICAgInByb3BzIjogX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpLAogICAgICAgICJtb2RlbCI6IHsKICAgICAgICAgIHZhbHVlOiByb3dbY29sdW1uLnByb3BlcnR5XSwKICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiBjYWxsYmFjaygkJHYpIHsKICAgICAgICAgICAgX3RoaXM0LiRzZXQocm93LCBjb2x1bW4ucHJvcGVydHksICQkdik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KSAvLyA8ZWwtc3dpdGNoCiAgICAgIC8vICAgey4uLnsgcHJvcHMgfX0KICAgICAgLy8gICBhY3RpdmUtdGV4dD17IG9wdGlvbnNbMF0ubGFiZWwgfQogICAgICAvLyAgIGluYWN0aXZlLXRleHQ9eyBvcHRpb25zWzFdLmxhYmVsIH0KICAgICAgLy8gICB2LW1vZGVsPXtyb3dbY29sdW1uLnByb3BlcnR5XX0KICAgICAgLy8gICBhY3RpdmUtY29sb3I9IiMxM2NlNjYiCiAgICAgIC8vICAgYWN0aXZlLXZhbHVlPXsgb3B0aW9uc1swXS52YWx1ZSB9CiAgICAgIC8vICAgaW5hY3RpdmUtdmFsdWU9eyBvcHRpb25zWzFdLnZhbHVlIH0+CiAgICAgIC8vIDwvZWwtc3dpdGNoPgogICAgICBdOwogICAgfSwKICAgIHJlbmRlckRlZmF1bHQ6IGZ1bmN0aW9uIHJlbmRlckRlZmF1bHQoaCwgX3JlZjk4LCBfcmVmOTkpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHZhciBwcm9wcyA9IF9yZWY5OC5wcm9wcywKICAgICAgICBvcHRpb25zID0gX3JlZjk4Lm9wdGlvbnM7CiAgICAgIHZhciByb3cgPSBfcmVmOTkucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWY5OS5jb2x1bW47CiAgICAgIGlmIChPYmplY3Qua2V5cyhyb3cpLmluY2x1ZGVzKCdvcGVuU3dpdGNoJykpIHsKICAgICAgICBwcm9wcyA9IE9iamVjdC5hc3NpZ24oe30sIHByb3BzLCB7CiAgICAgICAgICBkaXNhYmxlZDogIXJvdy5vcGVuU3dpdGNoCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIFtoKCJ2eGUtc3dpdGNoIiwgewogICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICJvcGVuLWxhYmVsIjogb3B0aW9uc1swXS5sYWJlbCwKICAgICAgICAgICJjbG9zZS1sYWJlbCI6IG9wdGlvbnNbMV0ubGFiZWwsCiAgICAgICAgICAib3Blbi12YWx1ZSI6IG9wdGlvbnNbMF0udmFsdWUsCiAgICAgICAgICAiY2xvc2UtdmFsdWUiOiBvcHRpb25zWzFdLnZhbHVlCiAgICAgICAgfSwKICAgICAgICAicHJvcHMiOiBfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcyksCiAgICAgICAgIm1vZGVsIjogewogICAgICAgICAgdmFsdWU6IHJvd1tjb2x1bW4ucHJvcGVydHldLAogICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIGNhbGxiYWNrKCQkdikgewogICAgICAgICAgICBfdGhpczUuJHNldChyb3csIGNvbHVtbi5wcm9wZXJ0eSwgJCR2KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pIC8vIDxlbC1zd2l0Y2gKICAgICAgLy8gICB7Li4ueyBwcm9wcyB9fQogICAgICAvLyAgIGFjdGl2ZS10ZXh0PXsgb3B0aW9uc1swXS5sYWJlbCB9CiAgICAgIC8vICAgaW5hY3RpdmUtdGV4dD17IG9wdGlvbnNbMV0ubGFiZWwgfQogICAgICAvLyAgIHYtbW9kZWw9e3Jvd1tjb2x1bW4ucHJvcGVydHldfQogICAgICAvLyAgIGFjdGl2ZS1jb2xvcj0iIzEzY2U2NiIKICAgICAgLy8gICBhY3RpdmUtdmFsdWU9eyBvcHRpb25zWzBdLnZhbHVlIH0KICAgICAgLy8gICBpbmFjdGl2ZS12YWx1ZT17IG9wdGlvbnNbMV0udmFsdWUgfT4KICAgICAgLy8gPC9lbC1zd2l0Y2g+CiAgICAgIF07CiAgICB9LAogICAgcmVuZGVyRWRpdDogZnVuY3Rpb24gcmVuZGVyRWRpdChoLCBfcmVmMTAwLCBfcmVmMTAxKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICB2YXIgcHJvcHMgPSBfcmVmMTAwLnByb3BzLAogICAgICAgIG9wdGlvbnMgPSBfcmVmMTAwLm9wdGlvbnM7CiAgICAgIHZhciByb3cgPSBfcmVmMTAxLnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmMTAxLmNvbHVtbjsKICAgICAgaWYgKE9iamVjdC5rZXlzKHJvdykuaW5jbHVkZXMoJ29wZW5Td2l0Y2gnKSkgewogICAgICAgIHByb3BzID0gT2JqZWN0LmFzc2lnbih7fSwgcHJvcHMsIHsKICAgICAgICAgIGRpc2FibGVkOiAhcm93Lm9wZW5Td2l0Y2gKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gW2goInZ4ZS1zd2l0Y2giLCB7CiAgICAgICAgImF0dHJzIjogewogICAgICAgICAgIm9wZW4tbGFiZWwiOiBvcHRpb25zWzBdLmxhYmVsLAogICAgICAgICAgImNsb3NlLWxhYmVsIjogb3B0aW9uc1sxXS5sYWJlbCwKICAgICAgICAgICJvcGVuLXZhbHVlIjogb3B0aW9uc1swXS52YWx1ZSwKICAgICAgICAgICJjbG9zZS12YWx1ZSI6IG9wdGlvbnNbMV0udmFsdWUKICAgICAgICB9LAogICAgICAgICJwcm9wcyI6IF9vYmplY3RTcHJlYWQoe30sIHByb3BzKSwKICAgICAgICAibW9kZWwiOiB7CiAgICAgICAgICB2YWx1ZTogcm93W2NvbHVtbi5wcm9wZXJ0eV0sCiAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gY2FsbGJhY2soJCR2KSB7CiAgICAgICAgICAgIF90aGlzNi4kc2V0KHJvdywgY29sdW1uLnByb3BlcnR5LCAkJHYpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkgLy8gPGVsLXN3aXRjaAogICAgICAvLyAgIHsuLi57IHByb3BzIH19CiAgICAgIC8vICAgYWN0aXZlLXRleHQ9eyBvcHRpb25zWzBdLmxhYmVsIH0KICAgICAgLy8gICBpbmFjdGl2ZS10ZXh0PXsgb3B0aW9uc1sxXS5sYWJlbCB9CiAgICAgIC8vICAgdi1tb2RlbD17cm93W2NvbHVtbi5wcm9wZXJ0eV19CiAgICAgIC8vICAgYWN0aXZlLWNvbG9yPSIjMTNjZTY2IgogICAgICAvLyAgIGFjdGl2ZS12YWx1ZT17IG9wdGlvbnNbMF0udmFsdWUgfQogICAgICAvLyAgIGluYWN0aXZlLXZhbHVlPXsgb3B0aW9uc1sxXS52YWx1ZSB9PgogICAgICAvLyA8L2VsLXN3aXRjaD4KICAgICAgXTsKICAgIH0sCiAgICByZW5kZXJJdGVtOiBmdW5jdGlvbiByZW5kZXJJdGVtKGgsIHJlbmRlck9wdHMsIHBhcmFtcykgewogICAgICB2YXIgJGZvcm0gPSBwYXJhbXMuJGZvcm0sCiAgICAgICAgcHJvcGVydHkgPSBwYXJhbXMucHJvcGVydHksCiAgICAgICAgZGF0YSA9IHBhcmFtcy5kYXRhOwogICAgICB2YXIgcHJvcHMgPSByZW5kZXJPcHRzLnByb3BzOwogICAgICB2YXIgb3B0aW9ucyA9IHJlbmRlck9wdHMub3B0aW9uczsKICAgICAgaWYgKCRmb3JtLiRwYXJlbnQuZWRpdGFibGUgIT09IGZhbHNlICYmIHByb3BzLmVkaXRhYmxlICE9PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbaCgndnhlLXN3aXRjaCcsIHsKICAgICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgdmFsdWU6IGRhdGFbcHJvcGVydHldLAogICAgICAgICAgICBvcGVuTGFiZWw6IG9wdGlvbnNbMF0ubGFiZWwsCiAgICAgICAgICAgIGNsb3NlTGFiZWw6IG9wdGlvbnNbMV0ubGFiZWwsCiAgICAgICAgICAgIG9wZW5WYWx1ZTogb3B0aW9uc1swXS52YWx1ZSwKICAgICAgICAgICAgY2xvc2VWYWx1ZTogb3B0aW9uc1sxXS52YWx1ZQogICAgICAgICAgfSwgcHJvcHMpLAogICAgICAgICAgb246IHsKICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7CiAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgICAgICAgICAkZm9ybS4kcGFyZW50Lml0ZW1DaGFuZ2UoewogICAgICAgICAgICAgICAgJGZvcm06ICRmb3JtLAogICAgICAgICAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5LAogICAgICAgICAgICAgICAgaXRlbVZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtoKCd2eGUtc3dpdGNoJywgewogICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICB2YWx1ZTogZGF0YVtwcm9wZXJ0eV0sCiAgICAgICAgICAgIG9wZW5MYWJlbDogb3B0aW9uc1swXS5sYWJlbCwKICAgICAgICAgICAgY2xvc2VMYWJlbDogb3B0aW9uc1sxXS5sYWJlbCwKICAgICAgICAgICAgb3BlblZhbHVlOiBvcHRpb25zWzBdLnZhbHVlLAogICAgICAgICAgICBjbG9zZVZhbHVlOiBvcHRpb25zWzFdLnZhbHVlLAogICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZQogICAgICAgICAgfSwgcHJvcHMpLAogICAgICAgICAgb246IHsKICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7fQogICAgICAgICAgfQogICAgICAgIH0pXTsKICAgICAgfQogICAgfQogIH0sCiAgJHZ4ZUZvcm1EYXlzOiB7CiAgICAvLyDlpKnmlbDmuLLmn5PlmajvvIzkuI3otrMwLjI15aSp5oyJMOiusO+8jOWkp+S6jjAuNzXlpKnmjIkx5aSp6K6w77yM5YW25LuW5oyJMC415aSp6K6wCiAgICByZW5kZXJJdGVtOiBmdW5jdGlvbiByZW5kZXJJdGVtKGgsIHJlbmRlck9wdHMsIF9yZWYxMDIpIHsKICAgICAgdmFyICRmb3JtID0gX3JlZjEwMi4kZm9ybSwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWYxMDIucHJvcGVydHksCiAgICAgICAgZGF0YSA9IF9yZWYxMDIuZGF0YTsKICAgICAgdmFyIHByb3BzID0gcmVuZGVyT3B0cy5wcm9wczsKICAgICAgcHJvcHMgPSBwcm9wcyB8fCB7fTsKICAgICAgaWYgKCRmb3JtLiRwYXJlbnQuZWRpdGFibGUgIT09IGZhbHNlIHx8IHByb3BzLmVkaXRhYmxlICE9PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbaCgndnhlLWlucHV0JywgewogICAgICAgICAgcmVmOiAndnhlLWlucHV0JyArIHByb3BlcnR5LAogICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICBwbGFjZWhvbGRlcjogJ+ivt+i+k+WFpeWkqeaVsCcsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgICBjbGVhcmFibGU6IHRydWUsCiAgICAgICAgICAgIHZhbHVlOiBkYXRhW3Byb3BlcnR5XQogICAgICAgICAgfSwgcHJvcHMpLAogICAgICAgICAgb246IHsKICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7CiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGRhdGFbJ3RpbWVyXycgKyBwcm9wZXJ0eV0pOwogICAgICAgICAgICAgIGRhdGFbJ3RpbWVyXycgKyBwcm9wZXJ0eV0gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBxdWl0ZURheSA9IGRhdGFbcHJvcGVydHldICUgMTsKICAgICAgICAgICAgICAgIHF1aXRlRGF5ID0gcXVpdGVEYXkgPD0gMC4yNSA/IDAgOiBxdWl0ZURheSA+PSAwLjc1ID8gMSA6IDAuNTsKICAgICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gTWF0aC5mbG9vcihkYXRhW3Byb3BlcnR5XSAvIDEpICsgcXVpdGVEYXk7CiAgICAgICAgICAgICAgICBkYXRhW3Byb3BlcnR5XSA9IHZhbHVlOwogICAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICAgJGZvcm06ICRmb3JtLAogICAgICAgICAgICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHksCiAgICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogdmFsdWUsCiAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICAgIHJlbmRlck9wdHM6IHJlbmRlck9wdHMKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGRhdGFbJ3RpbWVyXycgKyBwcm9wZXJ0eV0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSldOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgICAgICJjbGFzcyI6ICJ0YyBmbi1pbmxpbmUiLAogICAgICAgICAgInByb3BzIjogX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpCiAgICAgICAgfSwgWyIgIiwgZGF0YVtwcm9wZXJ0eV0sICIgIl0pXTsKICAgICAgfQogICAgfQogIH0sCiAgJHZ4ZVByb2dyZXNzOiB7CiAgICAvLyDov5vluqbmnaEKICAgIHJlbmRlckNlbGw6IGZ1bmN0aW9uIHJlbmRlckNlbGwoaCwgX3JlZjEwMywgX3JlZjEwNCwgY29udGV4dCkgewogICAgICB2YXIgcHJvcHMgPSBfcmVmMTAzLnByb3BzLAogICAgICAgIG9wdGlvbnMgPSBfcmVmMTAzLm9wdGlvbnM7CiAgICAgIHZhciByb3cgPSBfcmVmMTA0LnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmMTA0LmNvbHVtbjsKICAgICAgdmFyIGJzVGFibGUgPSBjb250ZXh0LiRncmlkLiRwYXJlbnQ7CiAgICAgIHZhciB2YWwgPSBwYXJzZUZsb2F0KChyb3dbY29sdW1uLnByb3BlcnR5XSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZHxOYU58SW5maW5pdHlccysvaWcsICcnKSk7CiAgICAgIHZhbCA9IE51bWJlcihic1RhYmxlLmFjY3VyYXRlRml4ZWQoaXNOYU4odmFsKSA/IDAgOiB2YWwsIDIpKTsKICAgICAgcmV0dXJuIFtoKCJlbC1wcm9ncmVzcyIsIHsKICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAidGV4dC1pbnNpZGUiOiB0cnVlLAogICAgICAgICAgInN0cm9rZS13aWR0aCI6IDIwLAogICAgICAgICAgInBlcmNlbnRhZ2UiOiB2YWwKICAgICAgICB9LAogICAgICAgICJzdHlsZSI6ICJsaW5lLWhlaWdodDozMHB4IgogICAgICB9KV07CiAgICB9LAogICAgcmVuZGVyRGVmYXVsdDogZnVuY3Rpb24gcmVuZGVyRGVmYXVsdChoLCBfcmVmMTA1LCBfcmVmMTA2LCBjb250ZXh0KSB7CiAgICAgIHZhciBwcm9wcyA9IF9yZWYxMDUucHJvcHMsCiAgICAgICAgb3B0aW9ucyA9IF9yZWYxMDUub3B0aW9uczsKICAgICAgdmFyIHJvdyA9IF9yZWYxMDYucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWYxMDYuY29sdW1uOwogICAgICB2YXIgYnNUYWJsZSA9IGNvbnRleHQuJGdyaWQuJHBhcmVudDsKICAgICAgdmFyIHZhbCA9IHBhcnNlRmxvYXQoKHJvd1tjb2x1bW4ucHJvcGVydHldICsgJycpLnJlcGxhY2UoL251bGx8dW5kZWZpbmVkfE5hTnxJbmZpbml0eVxzKy9pZywgJycpKTsKICAgICAgdmFsID0gTnVtYmVyKGJzVGFibGUuYWNjdXJhdGVGaXhlZChpc05hTih2YWwpID8gMCA6IHZhbCwgMikpOwogICAgICByZXR1cm4gW2goImVsLXByb2dyZXNzIiwgewogICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICJ0ZXh0LWluc2lkZSI6IHRydWUsCiAgICAgICAgICAic3Ryb2tlLXdpZHRoIjogMjAsCiAgICAgICAgICAicGVyY2VudGFnZSI6IHZhbAogICAgICAgIH0sCiAgICAgICAgInN0eWxlIjogImxpbmUtaGVpZ2h0OjMwcHgiCiAgICAgIH0pXTsKICAgIH0sCiAgICByZW5kZXJFZGl0OiBmdW5jdGlvbiByZW5kZXJFZGl0KGgsIF9yZWYxMDcsIF9yZWYxMDgsIGNvbnRleHQpIHsKICAgICAgdmFyIHByb3BzID0gX3JlZjEwNy5wcm9wcywKICAgICAgICBvcHRpb25zID0gX3JlZjEwNy5vcHRpb25zOwogICAgICB2YXIgcm93ID0gX3JlZjEwOC5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjEwOC5jb2x1bW47CiAgICAgIHZhciBic1RhYmxlID0gY29udGV4dC4kZ3JpZC4kcGFyZW50OwogICAgICB2YXIgdmFsID0gcGFyc2VGbG9hdCgocm93W2NvbHVtbi5wcm9wZXJ0eV0gKyAnJykucmVwbGFjZSgvbnVsbHx1bmRlZmluZWR8TmFOfEluZmluaXR5XHMrL2lnLCAnJykpOwogICAgICB2YWwgPSBOdW1iZXIoYnNUYWJsZS5hY2N1cmF0ZUZpeGVkKGlzTmFOKHZhbCkgPyAwIDogdmFsLCAyKSk7CiAgICAgIHJldHVybiBbaCgiZWwtcHJvZ3Jlc3MiLCB7CiAgICAgICAgImF0dHJzIjogewogICAgICAgICAgInRleHQtaW5zaWRlIjogdHJ1ZSwKICAgICAgICAgICJzdHJva2Utd2lkdGgiOiAyMCwKICAgICAgICAgICJwZXJjZW50YWdlIjogdmFsCiAgICAgICAgfSwKICAgICAgICAic3R5bGUiOiAibGluZS1oZWlnaHQ6MzBweCIKICAgICAgfSldOwogICAgfSwKICAgIHJlbmRlckl0ZW06IGZ1bmN0aW9uIHJlbmRlckl0ZW0oaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7CiAgICAgIHZhciBwcm9wZXJ0eSA9IHBhcmFtcy5wcm9wZXJ0eSwKICAgICAgICBkYXRhID0gcGFyYW1zLmRhdGEsCiAgICAgICAgJGZvcm0gPSBwYXJhbXMuJGZvcm07CiAgICAgIHZhciB2YWx1ZSA9IHBhcnNlRmxvYXQoKGRhdGFbcHJvcGVydHldICsgJycpLnJlcGxhY2UoL251bGx8dW5kZWZpbmVkfE5hTnxJbmZpbml0eXxccysvaWcsICcnKSk7CiAgICAgIHZhbHVlID0gTnVtYmVyKCRmb3JtLiRwYXJlbnQuYWNjdXJhdGVGaXhlZChpc05hTih2YWx1ZSkgPyAwIDogdmFsdWUsIDIpKTsKICAgICAgcmV0dXJuIFtoKCJlbC1wcm9ncmVzcyIsIHsKICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAidGV4dC1pbnNpZGUiOiB0cnVlLAogICAgICAgICAgInN0cm9rZS13aWR0aCI6IDIwLAogICAgICAgICAgInBlcmNlbnRhZ2UiOiB2YWx1ZQogICAgICAgIH0sCiAgICAgICAgInN0eWxlIjogImxpbmUtaGVpZ2h0OjMwcHgiCiAgICAgIH0pXTsKICAgIH0KICB9LAogICR2eGVFZGl0RG93bkNvbmRpdGlvbnM6IHsKICAgIGF1dG9mb2N1czogJy52eGUtaW5wdXQtLWlubmVyJywKICAgIHJlbmRlckVkaXQ6IGZ1bmN0aW9uIHJlbmRlckVkaXQoaCwgX3JlZjEwOSwgcGFyYW1zKSB7CiAgICAgIHZhciBuYW1lID0gX3JlZjEwOS5uYW1lLAogICAgICAgIG9wdGlvbnMgPSBfcmVmMTA5Lm9wdGlvbnMsCiAgICAgICAgcHJvcHMgPSBfcmVmMTA5LnByb3BzOwogICAgICByZXR1cm4gW2goImVkaXQtZG93bi1jb25kaXRpb25zIiwgewogICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICJjb25zdFByb3BzIjogcHJvcHMsCiAgICAgICAgICAicGFyYW1zIjogcGFyYW1zLAogICAgICAgICAgInR5cGUiOiAndGFibGUnCiAgICAgICAgfQogICAgICB9KV07CiAgICB9LAogICAgcmVuZGVyRGVmYXVsdDogZnVuY3Rpb24gcmVuZGVyRGVmYXVsdChoLCBjZWxsUmVuZGVyLCBfcmVmMTEwLCBjb250ZXh0KSB7CiAgICAgIHZhciByb3cgPSBfcmVmMTEwLnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmMTEwLmNvbHVtbjsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSByb3dbY29sdW1uLnByb3BlcnR5XTsKICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJ0ZXh0IGJsb2NrIgogICAgICB9LCBbcm93W2NvbHVtbi5wcm9wZXJ0eV1dKV07CiAgICB9LAogICAgcmVuZGVyQ2VsbDogZnVuY3Rpb24gcmVuZGVyQ2VsbChoLCBjZWxsUmVuZGVyLCBfcmVmMTExLCBjb250ZXh0KSB7CiAgICAgIHZhciByb3cgPSBfcmVmMTExLnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmMTExLmNvbHVtbjsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSByb3dbY29sdW1uLnByb3BlcnR5XTsKICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJ0ZXh0IGJsb2NrIgogICAgICB9LCBbcm93W2NvbHVtbi5wcm9wZXJ0eV1dKV07CiAgICB9LAogICAgcmVuZGVySXRlbTogZnVuY3Rpb24gcmVuZGVySXRlbShoLCByZW5kZXJPcHRzLCBwYXJhbXMpIHsKICAgICAgdmFyIHByb3BzID0gcmVuZGVyT3B0cy5wcm9wczsKICAgICAgdmFyICRmb3JtID0gcGFyYW1zLiRmb3JtLAogICAgICAgIHByb3BlcnR5ID0gcGFyYW1zLnByb3BlcnR5LAogICAgICAgIGRhdGEgPSBwYXJhbXMuZGF0YTsKICAgICAgaWYgKCRmb3JtLiRwYXJlbnQuZWRpdGFibGUgIT09IGZhbHNlICYmIHByb3BzLmVkaXRhYmxlICE9PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbaCgnZWRpdC1kb3duLWNvbmRpdGlvbnMnLCB7CiAgICAgICAgICBwcm9wczogewogICAgICAgICAgICBjb25zdFByb3BzOiBwcm9wcywKICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXMsCiAgICAgICAgICAgIHR5cGU6ICdmb3JtJwogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiBpbnB1dCh2YWx1ZSkgewogICAgICAgICAgICAgICRmb3JtLiRwYXJlbnQuaXRlbUNoYW5nZSh7CiAgICAgICAgICAgICAgICAkZm9ybTogJGZvcm0sCiAgICAgICAgICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHksCiAgICAgICAgICAgICAgICBpdGVtVmFsdWU6IHZhbHVlLAogICAgICAgICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgICAgICAgIHJlbmRlck9wdHM6IHJlbmRlck9wdHMKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pXTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW2goImVkaXQtZG93bi1jb25kaXRpb25zIiwgewogICAgICAgICAgImF0dHJzIjogewogICAgICAgICAgICAiY29uc3RQcm9wcyI6IHByb3BzLAogICAgICAgICAgICAicGFyYW1zIjogcGFyYW1zLAogICAgICAgICAgICAidHlwZSI6ICdmb3JtJwogICAgICAgICAgfQogICAgICAgIH0pXTsKICAgICAgfQogICAgfQogIH0sCiAgJHZ4ZVJvd0NlbGxSZW5kZXJlcjogewogICAgLy8g5YiX5riy5p+T5ZmoCiAgICByZW5kZXJDZWxsOiBmdW5jdGlvbiByZW5kZXJDZWxsKGgsIHJlbmRlck9wdHMsIF9yZWYxMTIsIGNvbnRleHQpIHsKICAgICAgdmFyIHJvdyA9IF9yZWYxMTIucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWYxMTIuY29sdW1uOwogICAgICBpZiAocm93W2NvbHVtbi5wcm9wZXJ0eSArICdyZW5kZXJPcHRzJ10ubmFtZSkgewogICAgICAgIHJldHVybiBkZWZhdWx0UHVibGljUmVuZGVyc1tyb3dbY29sdW1uLnByb3BlcnR5ICsgJ3JlbmRlck9wdHMnXS5uYW1lXS5yZW5kZXJDZWxsKGgsIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAncmVuZGVyT3B0cyddLCB7CiAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgIGNvbHVtbjogY29sdW1uCiAgICAgICAgfSwgY29udGV4dCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGRlZmF1bHRQdWJsaWNSZW5kZXJzW3JlbmRlck9wdHMubmFtZV0gPyBkZWZhdWx0UHVibGljUmVuZGVyc1tyZW5kZXJPcHRzLm5hbWVdLnJlbmRlckNlbGwoaCwgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdyZW5kZXJPcHRzJ10sIHsKICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgY29sdW1uOiBjb2x1bW4KICAgICAgICB9LCBjb250ZXh0KSA6ICcnOwogICAgICB9CiAgICB9LAogICAgcmVuZGVyRWRpdDogZnVuY3Rpb24gcmVuZGVyRWRpdChoLCByZW5kZXJPcHRzLCBfcmVmMTEzLCBjb250ZXh0KSB7CiAgICAgIHZhciByb3cgPSBfcmVmMTEzLnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmMTEzLmNvbHVtbjsKICAgICAgaWYgKHJvd1tjb2x1bW4ucHJvcGVydHkgKyAncmVuZGVyT3B0cyddLm5hbWUpIHsKICAgICAgICByZXR1cm4gZGVmYXVsdFB1YmxpY1JlbmRlcnNbcm93W2NvbHVtbi5wcm9wZXJ0eSArICdyZW5kZXJPcHRzJ10ubmFtZV0ucmVuZGVyRWRpdChoLCByb3dbY29sdW1uLnByb3BlcnR5ICsgJ3JlbmRlck9wdHMnXSwgewogICAgICAgICAgcm93OiByb3csCiAgICAgICAgICBjb2x1bW46IGNvbHVtbgogICAgICAgIH0sIGNvbnRleHQpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBkZWZhdWx0UHVibGljUmVuZGVyc1tyZW5kZXJPcHRzLm5hbWVdID8gZGVmYXVsdFB1YmxpY1JlbmRlcnNbcmVuZGVyT3B0cy5uYW1lXS5yZW5kZXJFZGl0KGgsIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAncmVuZGVyT3B0cyddLCB7CiAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgIGNvbHVtbjogY29sdW1uCiAgICAgICAgfSwgY29udGV4dCkgOiAnJzsKICAgICAgfQogICAgfSwKICAgIHJlbmRlckRlZmF1bHQ6IGZ1bmN0aW9uIHJlbmRlckRlZmF1bHQoaCwgcmVuZGVyT3B0cywgX3JlZjExNCwgY29udGV4dCkgewogICAgICB2YXIgcm93ID0gX3JlZjExNC5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjExNC5jb2x1bW47CiAgICAgIGlmIChyb3dbY29sdW1uLnByb3BlcnR5ICsgJ3JlbmRlck9wdHMnXS5uYW1lKSB7CiAgICAgICAgcmV0dXJuIGRlZmF1bHRQdWJsaWNSZW5kZXJzW3Jvd1tjb2x1bW4ucHJvcGVydHkgKyAncmVuZGVyT3B0cyddLm5hbWVdLnJlbmRlckRlZmF1bHQoaCwgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdyZW5kZXJPcHRzJ10sIHsKICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgY29sdW1uOiBjb2x1bW4KICAgICAgICB9LCBjb250ZXh0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZGVmYXVsdFB1YmxpY1JlbmRlcnNbcmVuZGVyT3B0cy5uYW1lXSA/IGRlZmF1bHRQdWJsaWNSZW5kZXJzW3JlbmRlck9wdHMubmFtZV0ucmVuZGVyRGVmYXVsdChoLCByb3dbY29sdW1uLnByb3BlcnR5ICsgJ3JlbmRlck9wdHMnXSwgewogICAgICAgICAgcm93OiByb3csCiAgICAgICAgICBjb2x1bW46IGNvbHVtbgogICAgICAgIH0sIGNvbnRleHQpIDogJyc7CiAgICAgIH0KICAgIH0KICB9LAogICR2eGVCYXNpY0luZm9SZW5kZXJlcjogewogICAgLy8g5Z+656GA5L+h5oGv5riy5p+T5ZmoCiAgICByZW5kZXJDZWxsOiBmdW5jdGlvbiByZW5kZXJDZWxsKGgsIHJlbmRlck9wdHMsIF9yZWYxMTUsIGNvbnRleHQpIHsKICAgICAgdmFyIHJvdyA9IF9yZWYxMTUucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWYxMTUuY29sdW1uOwogICAgICB2YXIgbW9kZSA9IGNvbnRleHQuJGdyaWQuJHBhcmVudC4kcGFyZW50Lm1vZGU7CiAgICAgIHZhciBjdXJSZW5kZXJtYXAgPSBjb250ZXh0LiRncmlkLiRwYXJlbnQuJHBhcmVudC50YWJsZVJlbmRlck1hcC5tYXBbcm93WydtYXBpZCddXTsKICAgICAgdmFyIHJlbmRlciA9IGN1clJlbmRlcm1hcC5yZW5kZXI7CiAgICAgIGlmIChtb2RlID09PSAnZWRpdCcpIHsKICAgICAgICBpZiAocmVuZGVyICYmIGN1clJlbmRlcm1hcC5lZGl0YWJsZSkgewogICAgICAgICAgcmV0dXJuIHB1YmxpY1JlbmRlcltyZW5kZXIubmFtZV0ucmVuZGVyRWRpdChoLCByZW5kZXIsIHsKICAgICAgICAgICAgcm93OiByb3csCiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uCiAgICAgICAgICB9LCBjb250ZXh0KTsKICAgICAgICB9IGVsc2UgaWYgKCFyZW5kZXIgJiYgY3VyUmVuZGVybWFwLmVkaXRhYmxlKSB7CiAgICAgICAgICByZXR1cm4gcHVibGljUmVuZGVyWyckdnhlSW5wdXQnXS5yZW5kZXJFZGl0KGgsIHt9LCB7CiAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICBjb2x1bW46IGNvbHVtbgogICAgICAgICAgfSwgY29udGV4dCk7CiAgICAgICAgfSBlbHNlIGlmIChyZW5kZXIgJiYgcHVibGljUmVuZGVyW3JlbmRlci5uYW1lXSkgewogICAgICAgICAgcmV0dXJuIHB1YmxpY1JlbmRlcltyZW5kZXIubmFtZV0ucmVuZGVyQ2VsbChoLCByZW5kZXIsIHsKICAgICAgICAgICAgcm93OiByb3csCiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uCiAgICAgICAgICB9LCBjb250ZXh0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIHB1YmxpY1JlbmRlclsnJHZ4ZUlucHV0J10ucmVuZGVyQ2VsbChoLCB7fSwgewogICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4KICAgICAgICAgIH0sIGNvbnRleHQpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAocmVuZGVyICYmIHB1YmxpY1JlbmRlcltyZW5kZXIubmFtZV0pIHsKICAgICAgICAgIHJldHVybiBwdWJsaWNSZW5kZXJbcmVuZGVyLm5hbWVdLnJlbmRlckNlbGwoaCwgcmVuZGVyLCB7CiAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICBjb2x1bW46IGNvbHVtbgogICAgICAgICAgfSwgY29udGV4dCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBwdWJsaWNSZW5kZXJbJyR2eGVJbnB1dCddLnJlbmRlckNlbGwoaCwge30sIHsKICAgICAgICAgICAgcm93OiByb3csCiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uCiAgICAgICAgICB9LCBjb250ZXh0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICByZW5kZXJFZGl0OiBmdW5jdGlvbiByZW5kZXJFZGl0KGgsIHJlbmRlck9wdHMsIF9yZWYxMTYsIGNvbnRleHQpIHsKICAgICAgdmFyIHJvdyA9IF9yZWYxMTYucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWYxMTYuY29sdW1uOwogICAgICB2YXIgbW9kZSA9IGNvbnRleHQuJGdyaWQuJHBhcmVudC4kcGFyZW50Lm1vZGU7CiAgICAgIHZhciBjdXJSZW5kZXJtYXAgPSBjb250ZXh0LiRncmlkLiRwYXJlbnQuJHBhcmVudC50YWJsZVJlbmRlck1hcC5tYXBbcm93WydtYXBpZCddXTsKICAgICAgdmFyIHJlbmRlciA9IGN1clJlbmRlcm1hcC5yZW5kZXI7CiAgICAgIGlmIChtb2RlICE9PSAnZGV0YWlsJykgewogICAgICAgIGlmIChyZW5kZXIgJiYgY3VyUmVuZGVybWFwLmVkaXRhYmxlKSB7CiAgICAgICAgICByZXR1cm4gcHVibGljUmVuZGVyW3JlbmRlci5uYW1lXS5yZW5kZXJFZGl0KGgsIHJlbmRlciwgewogICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4KICAgICAgICAgIH0sIGNvbnRleHQpOwogICAgICAgIH0gZWxzZSBpZiAoIXJlbmRlciAmJiBjdXJSZW5kZXJtYXAuZWRpdGFibGUpIHsKICAgICAgICAgIHJldHVybiBwdWJsaWNSZW5kZXJbJyR2eGVJbnB1dCddLnJlbmRlckVkaXQoaCwge30sIHsKICAgICAgICAgICAgcm93OiByb3csCiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uCiAgICAgICAgICB9LCBjb250ZXh0KTsKICAgICAgICB9IGVsc2UgaWYgKHJlbmRlciAmJiAhY3VyUmVuZGVybWFwLmVkaXRhYmxlKSB7CiAgICAgICAgICByZXR1cm4gcHVibGljUmVuZGVyW3JlbmRlci5uYW1lXS5yZW5kZXJDZWxsKGgsIHJlbmRlciwgewogICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4KICAgICAgICAgIH0sIGNvbnRleHQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gcHVibGljUmVuZGVyWyckdnhlSW5wdXQnXS5yZW5kZXJDZWxsKGgsIHt9LCB7CiAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICBjb2x1bW46IGNvbHVtbgogICAgICAgICAgfSwgY29udGV4dCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChyZW5kZXIpIHsKICAgICAgICAgIHJldHVybiBwdWJsaWNSZW5kZXJbcmVuZGVyLm5hbWVdLnJlbmRlckNlbGwoaCwgcmVuZGVyLCB7CiAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICBjb2x1bW46IGNvbHVtbgogICAgICAgICAgfSwgY29udGV4dCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHB1YmxpY1JlbmRlclsnJHZ4ZUlucHV0J10ucmVuZGVyQ2VsbChoLCB7fSwgewogICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4KICAgICAgICAgIH0sIGNvbnRleHQpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHJlbmRlckRlZmF1bHQ6IGZ1bmN0aW9uIHJlbmRlckRlZmF1bHQoaCwgcmVuZGVyT3B0cywgX3JlZjExNywgY29udGV4dCkgewogICAgICB2YXIgcm93ID0gX3JlZjExNy5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjExNy5jb2x1bW47CiAgICAgIHZhciBlZGl0YWJsZSA9IGNvbnRleHQuJGdyaWQuJHBhcmVudC4kcGFyZW50Lm1vZGU7CiAgICAgIHZhciBjdXJSZW5kZXJtYXAgPSBjb250ZXh0LiRncmlkLiRwYXJlbnQuJHBhcmVudC50YWJsZVJlbmRlck1hcC5tYXBbcm93WydtYXBpZCddXTsKICAgICAgdmFyIHJlbmRlciA9IGN1clJlbmRlcm1hcC5yZW5kZXI7CiAgICAgIGlmIChlZGl0YWJsZSAhPT0gJ2RldGFpbCcpIHsKICAgICAgICBpZiAocmVuZGVyICYmIGVkaXRhYmxlICYmIGN1clJlbmRlcm1hcC5lZGl0YWJsZSkgewogICAgICAgICAgcmV0dXJuIHB1YmxpY1JlbmRlcltyZW5kZXIubmFtZV0ucmVuZGVyRWRpdChoLCByZW5kZXIsIHsKICAgICAgICAgICAgcm93OiByb3csCiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uCiAgICAgICAgICB9LCBjb250ZXh0KTsKICAgICAgICB9IGVsc2UgaWYgKCFyZW5kZXIgJiYgY3VyUmVuZGVybWFwLmVkaXRhYmxlKSB7CiAgICAgICAgICByZXR1cm4gcHVibGljUmVuZGVyWyckdnhlSW5wdXQnXS5yZW5kZXJFZGl0KGgsIHt9LCB7CiAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICBjb2x1bW46IGNvbHVtbgogICAgICAgICAgfSwgY29udGV4dCk7CiAgICAgICAgfSBlbHNlIGlmIChyZW5kZXIpIHsKICAgICAgICAgIHJldHVybiBwdWJsaWNSZW5kZXJbcmVuZGVyLm5hbWVdLnJlbmRlckNlbGwoaCwgcmVuZGVyLCB7CiAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICBjb2x1bW46IGNvbHVtbgogICAgICAgICAgfSwgY29udGV4dCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHB1YmxpY1JlbmRlclsnJHZ4ZUlucHV0J10ucmVuZGVyQ2VsbChoLCB7fSwgewogICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4KICAgICAgICAgIH0sIGNvbnRleHQpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAocmVuZGVyKSB7CiAgICAgICAgICByZXR1cm4gcHVibGljUmVuZGVyW3JlbmRlci5uYW1lXS5yZW5kZXJDZWxsKGgsIHJlbmRlciwgewogICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4KICAgICAgICAgIH0sIGNvbnRleHQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwdWJsaWNSZW5kZXJbJyR2eGVJbnB1dCddLnJlbmRlckNlbGwoaCwge30sIHsKICAgICAgICAgICAgcm93OiByb3csCiAgICAgICAgICAgIGNvbHVtbjogY29sdW1uCiAgICAgICAgICB9LCBjb250ZXh0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogICR2eGVFZGl0RG93blRlcm06IHsKICAgIGF1dG9mb2N1czogJy52eGUtaW5wdXQtLWlubmVyJywKICAgIHJlbmRlckRlZmF1bHQ6IGZ1bmN0aW9uIHJlbmRlckRlZmF1bHQoaCwgX3JlZjExOCwgcGFyYW1zKSB7CiAgICAgIHZhciBfcmVmMTE4JHByb3BzID0gX3JlZjExOC5wcm9wcywKICAgICAgICBwcm9wcyA9IF9yZWYxMTgkcHJvcHMgPT09IHZvaWQgMCA/IHt9IDogX3JlZjExOCRwcm9wczsKICAgICAgdmFyIHJvdyA9IHBhcmFtcy5yb3csCiAgICAgICAgY29sdW1uID0gcGFyYW1zLmNvbHVtbjsKICAgICAgdmFyIHZhbHVlID0gcm93W2NvbHVtbi5wcm9wZXJ0eV0gfHwgJyc7CiAgICAgIHZhciB5ZWFyID0gdmFsdWUuc2xpY2UoMCwgMikgfHwgJzAnOwogICAgICB2YXIgbW9udGggPSB2YWx1ZS5zbGljZSgyLCA0KSB8fCAnMCc7CiAgICAgIHZhciBkYXkgPSB2YWx1ZS5zbGljZSg0LCA2KSB8fCAnMCc7CiAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddID0gIiIuY29uY2F0KHllYXIsICJcdTVFNzQiKS5jb25jYXQobW9udGgsICJcdTY3MDgiKS5jb25jYXQoZGF5LCAiXHU1OTI5Iik7CiAgICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgICAiY2xhc3MiOiAidGV4dCBibG9jayIKICAgICAgfSwgW3Jvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddXSldOwogICAgfSwKICAgIHJlbmRlckVkaXQ6IGZ1bmN0aW9uIHJlbmRlckVkaXQoaCwgcmVuZGVyT3B0cywgcGFyYW1zLCBjb250ZXh0KSB7CiAgICAgIHZhciBfcmVuZGVyT3B0cyRwcm9wczggPSByZW5kZXJPcHRzLnByb3BzLAogICAgICAgIHByb3BzID0gX3JlbmRlck9wdHMkcHJvcHM4ID09PSB2b2lkIDAgPyB7fSA6IF9yZW5kZXJPcHRzJHByb3BzODsKICAgICAgdmFyIHJvdyA9IHBhcmFtcy5yb3csCiAgICAgICAgY29sdW1uID0gcGFyYW1zLmNvbHVtbjsKICAgICAgdmFyIGJzVGFibGUgPSBjb250ZXh0LiRncmlkLiRwYXJlbnQ7CiAgICAgIHJldHVybiBbaCgnZWRpdC1kb3duLXRlcm0nLCB7CiAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgZWRpdGFibGU6IHByb3BzLmVkaXRhYmxlLAogICAgICAgICAgdmFsdWU6IHJvd1tjb2x1bW4ucHJvcGVydHldCiAgICAgICAgfSwgcHJvcHMpLAogICAgICAgIG9uOiB7CiAgICAgICAgICBpbnB1dDogZnVuY3Rpb24gaW5wdXQodmFsdWUpIHsKICAgICAgICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgICAgICAgYnNUYWJsZS5jZWxsT3B0aW9uQ2FsbEJhY2socGFyYW1zKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pXTsKICAgIH0sCiAgICByZW5kZXJDZWxsOiBmdW5jdGlvbiByZW5kZXJDZWxsKGgsIF9yZWYxMTksIHBhcmFtcykgewogICAgICB2YXIgX3JlZjExOSRwcm9wcyA9IF9yZWYxMTkucHJvcHMsCiAgICAgICAgcHJvcHMgPSBfcmVmMTE5JHByb3BzID09PSB2b2lkIDAgPyB7fSA6IF9yZWYxMTkkcHJvcHM7CiAgICAgIHZhciByb3cgPSBwYXJhbXMucm93LAogICAgICAgIGNvbHVtbiA9IHBhcmFtcy5jb2x1bW47CiAgICAgIHZhciB2YWx1ZSA9IHJvd1tjb2x1bW4ucHJvcGVydHldIHx8ICcnOwogICAgICB2YXIgeWVhciA9IHZhbHVlLnNsaWNlKDAsIDIpIHx8ICcwJzsKICAgICAgdmFyIG1vbnRoID0gdmFsdWUuc2xpY2UoMiwgNCkgfHwgJzAnOwogICAgICB2YXIgZGF5ID0gdmFsdWUuc2xpY2UoNCwgNikgfHwgJzAnOwogICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXSA9ICIiLmNvbmNhdCh5ZWFyLCAiXHU1RTc0IikuY29uY2F0KG1vbnRoLCAiXHU2NzA4IikuY29uY2F0KGRheSwgIlx1NTkyOSIpOwogICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgImNsYXNzIjogInRleHQgYmxvY2siCiAgICAgIH0sIFtyb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1NvcnQnXV0pXTsKICAgIH0sCiAgICByZW5kZXJJdGVtOiBmdW5jdGlvbiByZW5kZXJJdGVtKGgsIHJlbmRlck9wdHMsIF9yZWYxMjApIHsKICAgICAgdmFyICRmb3JtID0gX3JlZjEyMC4kZm9ybSwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWYxMjAucHJvcGVydHksCiAgICAgICAgZGF0YSA9IF9yZWYxMjAuZGF0YTsKICAgICAgdmFyIF9yZW5kZXJPcHRzJHByb3BzOSA9IHJlbmRlck9wdHMucHJvcHMsCiAgICAgICAgcHJvcHMgPSBfcmVuZGVyT3B0cyRwcm9wczkgPT09IHZvaWQgMCA/IHt9IDogX3JlbmRlck9wdHMkcHJvcHM5OwogICAgICBpZiAoJGZvcm0uJHBhcmVudC5lZGl0YWJsZSAhPT0gZmFsc2UgJiYgcHJvcHMuZWRpdGFibGUgIT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIFtoKCdlZGl0LWRvd24tdGVybScsIHsKICAgICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgZWRpdGFibGU6IHByb3BzLmVkaXRhYmxlLAogICAgICAgICAgICB2YWx1ZTogZGF0YVtwcm9wZXJ0eV0KICAgICAgICAgIH0sIHByb3BzKSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiBpbnB1dCh2YWx1ZSkgewogICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gdmFsdWU7CiAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogZGF0YVtwcm9wZXJ0eV0sCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHZhbHVlID0gZGF0YVtwcm9wZXJ0eV0gfHwgJyc7CiAgICAgICAgdmFyIHllYXIgPSB2YWx1ZS5zbGljZSgwLCAyKSB8fCAnMCc7CiAgICAgICAgdmFyIG1vbnRoID0gdmFsdWUuc2xpY2UoMiwgNCkgfHwgJzAnOwogICAgICAgIHZhciBkYXkgPSB2YWx1ZS5zbGljZSg0LCA2KSB8fCAnMCc7CiAgICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICAgImNsYXNzIjogInRleHQgYmxvY2siLAogICAgICAgICAgInByb3BzIjogX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpCiAgICAgICAgfSwgWyJgJCIsIHllYXIsICJcdTVFNzQkIiwgbW9udGgsICJcdTY3MDgkIiwgZGF5LCAiXHU1OTI5YCJdKV07CiAgICAgIH0KICAgIH0KICB9LAogICR2eGVOZXdNb25leTogewogICAgLy8g6L6T5YWl5qGGCiAgICBhdXRvZm9jdXM6ICcudnhlLWlucHV0LS1pbm5lcicsCiAgICByZW5kZXJEZWZhdWx0OiBmdW5jdGlvbiByZW5kZXJEZWZhdWx0KGgsIF9yZWYxMjEsIF9yZWYxMjIsIGNvbnRleHQpIHsKICAgICAgdmFyIF92YWwsIF92YWwkdG9TdHJpbmckdHJpbSwgX3ZhbDIsIF92YWwyJHRvU3RyaW5nLCBfdmFsMiR0b1N0cmluZyR0cmltOwogICAgICB2YXIgcHJvcHMgPSBfcmVmMTIxLnByb3BzOwogICAgICB2YXIgcm93ID0gX3JlZjEyMi5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjEyMi5jb2x1bW4sCiAgICAgICAgJGdyaWQgPSBfcmVmMTIyLiRncmlkOwogICAgICBwcm9wcyA9IHByb3BzIHx8IHt9OwogICAgICB2YXIgYnNUYWJsZSA9IGNvbnRleHQuJGdyaWQuJHBhcmVudDsKICAgICAgdmFyIHNob3daZXJvID0gY29udGV4dC4kZ3JpZC4kcGFyZW50LnNob3daZXJvOwogICAgICB2YXIgdmlld0RpZ2l0cyA9IDA7CiAgICAgIHZhciB2YWwgPSBpc05hTihwYXJzZUZsb2F0KHJvd1tjb2x1bW4ucHJvcGVydHldKSkgPyAnJyA6IHBhcnNlRmxvYXQocm93W2NvbHVtbi5wcm9wZXJ0eV0pOwogICAgICBpZiAocHJvcHMudW5pdCA9PT0gMikgewogICAgICAgIHZhbCA9IGlzTmFOKHBhcnNlRmxvYXQocm93W2NvbHVtbi5wcm9wZXJ0eV0pKSA/ICcnIDogcGFyc2VGbG9hdChyb3dbY29sdW1uLnByb3BlcnR5XSk7CiAgICAgIH0gZWxzZSBpZiAocHJvcHMudW5pdCA9PT0gMSkgewogICAgICAgIGlmICh2YWwpIHsKICAgICAgICAgIHZhbCA9IE51bWJlcih2YWwudG9GaXhlZCgyKSkudG9Mb2NhbGVTdHJpbmcoKTsKICAgICAgICAgIHZhbCA9IHZhbC5zcGxpdCgnLicpLmxlbmd0aCA9PT0gMSA/IHZhbCArICcuMDAnIDogdmFsLnNwbGl0KCcuJylbMV0ubGVuZ3RoID09PSAxID8gdmFsICsgJzAnIDogdmFsOwogICAgICAgICAgaWYgKHNob3daZXJvKSB7CiAgICAgICAgICAgIHZhbCA9IHZhbCA9PT0gJzAuMDAnID8gJycgOiB2YWw7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJvd1tjb2x1bW4ucHJvcGVydHkgKyAnX192aWV3U29ydCddID0gKChfdmFsID0gdmFsKSA9PT0gbnVsbCB8fCBfdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3ZhbCR0b1N0cmluZyR0cmltID0gX3ZhbC50b1N0cmluZygpLnRyaW0oKSkgPT09IG51bGwgfHwgX3ZhbCR0b1N0cmluZyR0cmltID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsJHRvU3RyaW5nJHRyaW0ubGVuZ3RoKSA+IDAgPyBic1RhYmxlLnRyYW5zVG9OdW1iZXJMb2NhbFN0cmluZyh2YWwsIHZpZXdEaWdpdHMpIDogJyc7CiAgICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgICAiY2xhc3MiOiAidGV4dCIKICAgICAgfSwgWygoX3ZhbDIgPSB2YWwpID09PSBudWxsIHx8IF92YWwyID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3ZhbDIkdG9TdHJpbmcgPSBfdmFsMi50b1N0cmluZygpKSA9PT0gbnVsbCB8fCBfdmFsMiR0b1N0cmluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF92YWwyJHRvU3RyaW5nJHRyaW0gPSBfdmFsMiR0b1N0cmluZy50cmltKCkpID09PSBudWxsIHx8IF92YWwyJHRvU3RyaW5nJHRyaW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWwyJHRvU3RyaW5nJHRyaW0ubGVuZ3RoKSA+IDAgPyBic1RhYmxlLnRyYW5zVG9OdW1iZXJMb2NhbFN0cmluZyh2YWwsIHZpZXdEaWdpdHMpIDogJyddKV07CiAgICB9LAogICAgLy8gcmVuZGVyRWRpdChoLCB7IHByb3BzIH0sIHsgcm93LCBjb2x1bW4sICRncmlkIH0pIHsKICAgIC8vICAgLy8gbGV0IHZhbCA9IGlzTmFOKHBhcnNlRmxvYXQocm93W2NvbHVtbi5wcm9wZXJ0eV0pKSA/ICcwLjAwJyA6IHBhcnNlRmxvYXQocm93W2NvbHVtbi5wcm9wZXJ0eV0pCiAgICAvLyAgIC8vIHJvd1tjb2x1bW4ucHJvcGVydHldID0gdmFsCiAgICAvLyAgIHByb3BzID0gcHJvcHMgfHwge30KICAgIC8vICAgLy8gPHZ4ZS1pbnB1dCB2LW1vZGVsPSJ2YWx1ZTUwNCIgcGxhY2Vob2xkZXI9IuWwj+aVsOmXtOmalCAyLjMiIHR5cGU9ImZsb2F0IiBzdGVwPSIyLjMiIGNsZWFyYWJsZT48L3Z4ZS1pbnB1dD4KICAgIC8vICAgcmV0dXJuIFsKICAgIC8vICAgICA8dnhlLWlucHV0CiAgICAvLyAgICAgICB2LW1vZGVsPXtyb3dbY29sdW1uLnByb3BlcnR5XX0KICAgIC8vICAgICAgIHN0ZXA9eyAxIH0KICAgIC8vICAgICAgIHR5cGU9ImZsb2F0IgogICAgLy8gICAgICAgbWluID0geyAwLjAwIH0KICAgIC8vICAgICAgIHsuLi57IHByb3BzIH19CiAgICAvLyAgICAgICBtYXg9ezk5OTk5OTk5OTk5OTk5OX0KICAgIC8vICAgICAgIHBsYWNlaG9sZGVyPSLor7fovpPlhaUiCiAgICAvLyAgICAgICBjbGVhcmFibGUKICAgIC8vICAgICAgIGRpc2FibGVkCiAgICAvLyAgICAgPjwvdnhlLWlucHV0PgogICAgLy8gICAgIC8vIDxpbnB1dCBjbGFzcz0ibXktY2VsbCIgdGV4dD0idGV4dCIgdi1tb2RlbD17IHJvd1tjb2x1bW4ucHJvcGVydHldIH0gLz4KICAgIC8vICAgXQogICAgLy8gfSwKICAgIHJlbmRlckNlbGw6IGZ1bmN0aW9uIHJlbmRlckNlbGwoaCwgX3JlZjEyMywgX3JlZjEyNCwgY29udGV4dCkgewogICAgICB2YXIgX3ZhbDMsIF92YWwzJHRvU3RyaW5nLCBfdmFsMyR0b1N0cmluZyR0cmltLCBfdmFsNCwgX3ZhbDQkdG9TdHJpbmcsIF92YWw0JHRvU3RyaW5nJHRyaW07CiAgICAgIHZhciBwcm9wcyA9IF9yZWYxMjMucHJvcHM7CiAgICAgIHZhciByb3cgPSBfcmVmMTI0LnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmMTI0LmNvbHVtbiwKICAgICAgICAkZ3JpZCA9IF9yZWYxMjQuJGdyaWQ7CiAgICAgIHByb3BzID0gcHJvcHMgfHwge307CiAgICAgIHZhciBic1RhYmxlID0gY29udGV4dC4kZ3JpZC4kcGFyZW50OwogICAgICB2YXIgdmFsID0gaXNOYU4ocGFyc2VGbG9hdChyb3dbY29sdW1uLnByb3BlcnR5XSkpID8gJycgOiBwYXJzZUZsb2F0KHJvd1tjb2x1bW4ucHJvcGVydHldKTsKICAgICAgdmFyIHZpZXdEaWdpdHMgPSAwOwogICAgICB2YXIgc2hvd1plcm8gPSBjb250ZXh0LiRncmlkLiRwYXJlbnQuc2hvd1plcm87CiAgICAgIGlmIChwcm9wcy51bml0ID09PSAyKSB7fSBlbHNlIGlmIChwcm9wcy51bml0ID09PSAxKSB7CiAgICAgICAgdmFsID0gTnVtYmVyKHZhbC50b0ZpeGVkKDIpKS50b0xvY2FsZVN0cmluZygpOwogICAgICAgIHZhbCA9IHZhbC5zcGxpdCgnLicpLmxlbmd0aCA9PT0gMSA/IHZhbCArICcuMDAnIDogdmFsLnNwbGl0KCcuJylbMV0ubGVuZ3RoID09PSAxID8gdmFsICsgJzAnIDogdmFsOwogICAgICAgIGlmIChzaG93WmVybykgewogICAgICAgICAgdmFsID0gdmFsID09PSAnMC4wMCcgPyAnJyA6IHZhbDsKICAgICAgICB9CiAgICAgIH0KICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSAoKF92YWwzID0gdmFsKSA9PT0gbnVsbCB8fCBfdmFsMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF92YWwzJHRvU3RyaW5nID0gX3ZhbDMudG9TdHJpbmcoKSkgPT09IG51bGwgfHwgX3ZhbDMkdG9TdHJpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdmFsMyR0b1N0cmluZyR0cmltID0gX3ZhbDMkdG9TdHJpbmcudHJpbSgpKSA9PT0gbnVsbCB8fCBfdmFsMyR0b1N0cmluZyR0cmltID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsMyR0b1N0cmluZyR0cmltLmxlbmd0aCkgPiAwID8gYnNUYWJsZS50cmFuc1RvTnVtYmVyTG9jYWxTdHJpbmcodmFsLCB2aWV3RGlnaXRzKSA6ICcnOwogICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgImNsYXNzIjogInRleHQiCiAgICAgIH0sIFsoKF92YWw0ID0gdmFsKSA9PT0gbnVsbCB8fCBfdmFsNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF92YWw0JHRvU3RyaW5nID0gX3ZhbDQudG9TdHJpbmcoKSkgPT09IG51bGwgfHwgX3ZhbDQkdG9TdHJpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdmFsNCR0b1N0cmluZyR0cmltID0gX3ZhbDQkdG9TdHJpbmcudHJpbSgpKSA9PT0gbnVsbCB8fCBfdmFsNCR0b1N0cmluZyR0cmltID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmFsNCR0b1N0cmluZyR0cmltLmxlbmd0aCkgPiAwID8gYnNUYWJsZS50cmFuc1RvTnVtYmVyTG9jYWxTdHJpbmcodmFsLCB2aWV3RGlnaXRzKSA6ICcnXSldOwogICAgfSwKICAgIHJlbmRlckl0ZW06IGZ1bmN0aW9uIHJlbmRlckl0ZW0oaCwgcmVuZGVyT3B0cywgX3JlZjEyNSkgewogICAgICB2YXIgJGZvcm0gPSBfcmVmMTI1LiRmb3JtLAogICAgICAgIGRhdGEgPSBfcmVmMTI1LmRhdGEsCiAgICAgICAgcHJvcGVydHkgPSBfcmVmMTI1LnByb3BlcnR5OwogICAgICB2YXIgcHJvcHMgPSByZW5kZXJPcHRzLnByb3BzOwogICAgICBwcm9wcyA9IHByb3BzIHx8IHt9OwogICAgICBpZiAoJGZvcm0uJHBhcmVudC5lZGl0YWJsZSAhPT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gW2goJ3Z4ZS1pbnB1dCcsIHsKICAgICAgICAgIHJlZjogJ3Z4ZS1pbnB1dCcgKyBwcm9wZXJ0eSwKICAgICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICB2YWx1ZTogZGF0YVtwcm9wZXJ0eV0sCiAgICAgICAgICAgIHN0ZXA6IDEsCiAgICAgICAgICAgIG1pbjogMC4wMAogICAgICAgICAgfSwgcHJvcHMpLCB7fSwgewogICAgICAgICAgICBtYXg6IDEwMDAwMDAwMDAwMDAKICAgICAgICAgIH0pLAogICAgICAgICAgb246IHsKICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7CiAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgICAgICAgICAkZm9ybS4kcGFyZW50Lml0ZW1DaGFuZ2UoewogICAgICAgICAgICAgICAgJGZvcm06ICRmb3JtLAogICAgICAgICAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5LAogICAgICAgICAgICAgICAgaXRlbVZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIF9kYXRhJHByb3BlcnR5LCBfZGF0YSRwcm9wZXJ0eSR0b1N0cmksIF9kYXRhJHByb3BlcnR5JHRvU3RyaTI7CiAgICAgICAgdmFyIHZhbCA9IGlzTmFOKHBhcnNlRmxvYXQoZGF0YVtwcm9wZXJ0eV0pKSA/IDAgOiBwYXJzZUZsb2F0KGRhdGFbcHJvcGVydHldKTsKICAgICAgICBkYXRhW3Byb3BlcnR5XSA9IHZhbC50b0ZpeGVkKDIpOwogICAgICAgIC8vIGxldCBtb25leVVuaXQgPSBjb250ZXh0LiRncmlkLiRwYXJlbnQubW9uZXlVbml0ID8gY29udGV4dC4kZ3JpZC4kcGFyZW50Lm1vbmV5VW5pdCA6IDEKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlbGVzcy1lc2NhcGUKICAgICAgICB2YWwgPSAoKF9kYXRhJHByb3BlcnR5ID0gZGF0YVtwcm9wZXJ0eV0pID09PSBudWxsIHx8IF9kYXRhJHByb3BlcnR5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RhdGEkcHJvcGVydHkkdG9TdHJpID0gX2RhdGEkcHJvcGVydHkudG9TdHJpbmcoKSkgPT09IG51bGwgfHwgX2RhdGEkcHJvcGVydHkkdG9TdHJpID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RhdGEkcHJvcGVydHkkdG9TdHJpMiA9IF9kYXRhJHByb3BlcnR5JHRvU3RyaS50cmltKCkpID09PSBudWxsIHx8IF9kYXRhJHByb3BlcnR5JHRvU3RyaTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kYXRhJHByb3BlcnR5JHRvU3RyaTIubGVuZ3RoKSA+IDAgPyBOdW1iZXIodmFsLnRvRml4ZWQoMikpLnRvTG9jYWxlU3RyaW5nKCkgOiAnJzsKICAgICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgICAiY2xhc3MiOiAidGwiCiAgICAgICAgfSwgW3ZhbF0pXTsKICAgICAgfQogICAgfQogIH0sCiAgJHZ4ZU5ld0lucHV0OiB7CiAgICAvLyDovpPlhaXmoYYKICAgIGF1dG9mb2N1czogJy52eGUtaW5wdXQtLWlubmVyJywKICAgIHJlbmRlckVkaXQ6IGZ1bmN0aW9uIHJlbmRlckVkaXQoaCwgX3JlZjEyNiwgX3JlZjEyNykgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgdmFyIHByb3BzID0gX3JlZjEyNi5wcm9wczsKICAgICAgdmFyIHJvdyA9IF9yZWYxMjcucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWYxMjcuY29sdW1uOwogICAgICBwcm9wcyA9IE9iamVjdC5hc3NpZ24oewogICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICBwbGFjZWhvbGRlcjogJ+ivt+i+k+WFpScKICAgICAgfSwgcHJvcHMgfHwge30pOwogICAgICByZXR1cm4gW2goInZ4ZS1pbnB1dCIsIHsKICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAicGxhY2Vob2xkZXIiOiAi5Y+v5riF6ZmkIiwKICAgICAgICAgICJjbGVhcmFibGUiOiB0cnVlLAogICAgICAgICAgInRyYW5zZmVyIjogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgInByb3BzIjogX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpLAogICAgICAgICJtb2RlbCI6IHsKICAgICAgICAgIHZhbHVlOiByb3dbY29sdW1uLnByb3BlcnR5XSwKICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiBjYWxsYmFjaygkJHYpIHsKICAgICAgICAgICAgX3RoaXM3LiRzZXQocm93LCBjb2x1bW4ucHJvcGVydHksICQkdik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KSAvLyA8aW5wdXQgY2xhc3M9Im15LWNlbGwiIHRleHQ9InRleHQiIHYtbW9kZWw9eyByb3dbY29sdW1uLnByb3BlcnR5XSB9IC8+CiAgICAgIF07CiAgICB9LAogICAgcmVuZGVyQ2VsbDogZnVuY3Rpb24gcmVuZGVyQ2VsbChoLCBjZWxsUmVuZGVyLCBfcmVmMTI4LCBjb250ZXh0KSB7CiAgICAgIHZhciByb3cgPSBfcmVmMTI4LnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmMTI4LmNvbHVtbjsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eV0gPSAocm93W2NvbHVtbi5wcm9wZXJ0eV0gKyAnJykucmVwbGFjZSgvbnVsbHx1bmRlZmluZWQvaWcsICcnKTsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSByb3dbY29sdW1uLnByb3BlcnR5XTsKICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJ0ZXh0IgogICAgICB9LCBbcm93W2NvbHVtbi5wcm9wZXJ0eV1dKV07CiAgICB9LAogICAgcmVuZGVyRGVmYXVsdDogZnVuY3Rpb24gcmVuZGVyRGVmYXVsdChoLCBjZWxsUmVuZGVyLCBfcmVmMTI5LCBjb250ZXh0KSB7CiAgICAgIHZhciByb3cgPSBfcmVmMTI5LnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmMTI5LmNvbHVtbjsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eV0gPSAocm93W2NvbHVtbi5wcm9wZXJ0eV0gKyAnJykucmVwbGFjZSgvbnVsbHx1bmRlZmluZWQvaWcsICcnKTsKICAgICAgcm93W2NvbHVtbi5wcm9wZXJ0eSArICdfX3ZpZXdTb3J0J10gPSByb3dbY29sdW1uLnByb3BlcnR5XTsKICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJ0ZXh0IgogICAgICB9LCBbcm93W2NvbHVtbi5wcm9wZXJ0eV1dKV07CiAgICB9LAogICAgcmVuZGVySXRlbTogZnVuY3Rpb24gcmVuZGVySXRlbShoLCByZW5kZXJPcHRzLCBfcmVmMTMwKSB7CiAgICAgIHZhciAkZm9ybSA9IF9yZWYxMzAuJGZvcm0sCiAgICAgICAgcHJvcGVydHkgPSBfcmVmMTMwLnByb3BlcnR5LAogICAgICAgIGRhdGEgPSBfcmVmMTMwLmRhdGEsCiAgICAgICAgaXRlbSA9IF9yZWYxMzAuaXRlbTsKICAgICAgdmFyIF9yZW5kZXJPcHRzJHByb3BzMTAgPSByZW5kZXJPcHRzLnByb3BzLAogICAgICAgIHByb3BzID0gX3JlbmRlck9wdHMkcHJvcHMxMCA9PT0gdm9pZCAwID8ge30gOiBfcmVuZGVyT3B0cyRwcm9wczEwOwogICAgICBwcm9wcyA9IE9iamVjdC5hc3NpZ24oewogICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICBwbGFjZWhvbGRlcjogJ+ivt+i+k+WFpScKICAgICAgfSwgcHJvcHMpOwogICAgICBpZiAoJGZvcm0uJHBhcmVudC5lZGl0YWJsZSAhPT0gZmFsc2UgJiYgcHJvcHMuZWRpdGFibGUgIT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIFtoKCd2eGUtaW5wdXQnLCB7CiAgICAgICAgICByZWY6ICd2eGUtaW5wdXQnICsgcHJvcGVydHksCiAgICAgICAgICBwcm9wczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgdmFsdWU6IGRhdGFbcHJvcGVydHldCiAgICAgICAgICB9LCBwcm9wcyksIHt9LCB7CiAgICAgICAgICAgIHRyYW5zZmVyOiB0cnVlCiAgICAgICAgICB9KSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiBpbnB1dCh2YWx1ZSkgewogICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gdmFsdWU7CiAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogdmFsdWUsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgcmVuZGVyT3B0czogcmVuZGVyT3B0cwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBibHVyOiBmdW5jdGlvbiBibHVyKF9yZWYxMzEpIHsKICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfcmVmMTMxLnZhbHVlOwogICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gdmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICAgImNsYXNzIjogInRleHQgYmxvY2siCiAgICAgICAgfSwgWyIgIiwgZGF0YVtwcm9wZXJ0eV0sICIgIl0pXTsKICAgICAgfQogICAgfQogIH0sCiAgJHZ4ZURhdGVJbnB1dDogewogICAgcmVuZGVySXRlbTogZnVuY3Rpb24gcmVuZGVySXRlbShoLCByZW5kZXJPcHRzLCBfcmVmMTMyKSB7CiAgICAgIHZhciAkZm9ybSA9IF9yZWYxMzIuJGZvcm0sCiAgICAgICAgcHJvcGVydHkgPSBfcmVmMTMyLnByb3BlcnR5LAogICAgICAgIGRhdGEgPSBfcmVmMTMyLmRhdGE7CiAgICAgIGRhdGFbcHJvcGVydHldID0gKGRhdGFbcHJvcGVydHldICsgJycpLnJlcGxhY2UoL251bGx8dW5kZWZpbmVkL2lnLCAnJyk7CiAgICAgIHZhciBwcm9wcyA9IHJlbmRlck9wdHMucHJvcHM7CiAgICAgIHByb3BzID0gcHJvcHMgfHwge307CiAgICAgIGlmICgkZm9ybS4kcGFyZW50LmVkaXRhYmxlICE9PSBmYWxzZSB8fCBwcm9wcy5lZGl0YWJsZSAhPT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gW2goJ3Z4ZS1pbnB1dCcsIHsKICAgICAgICAgIHJlZjogJ3Z4ZS1pbnB1dCcgKyBwcm9wZXJ0eSwKICAgICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgdmFsdWU6IGRhdGFbcHJvcGVydHldCiAgICAgICAgICB9LCBwcm9wcyksCiAgICAgICAgICBvbjogewogICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uIGNoYW5nZSh2YWx1ZSkgewogICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbHVlLnZhbHVlOwogICAgICAgICAgICAgICRmb3JtLiRwYXJlbnQuaXRlbUNoYW5nZSh7CiAgICAgICAgICAgICAgICAkZm9ybTogJGZvcm0sCiAgICAgICAgICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHksCiAgICAgICAgICAgICAgICBpdGVtVmFsdWU6IHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWx1ZS52YWx1ZSwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICAgImNsYXNzIjogInRsIGZuLWlubGluZSIsCiAgICAgICAgICAicHJvcHMiOiBfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcykKICAgICAgICB9LCBbIiAiLCBkYXRhW3Byb3BlcnR5XSwgIiAiXSldOwogICAgICB9CiAgICB9CiAgfQp9OwovLyDlhajlsYDmj5DkvpvooajmoLznibnmnInmuLLmn5PlmaggNee7hO+8jOWIhuWIq+S4uu+8muaJi+WKqOaOkuW6j+a4suafk+WZqO+8jOi2hemTvuaOpea4suafk+WZqO+8jOW1jOWll+ihqOa4suafk+WZqO+8jOepuuaVsOaNrua4suafk+WZqO+8jOaTjeS9nOWIl+a4suafk+WZqOOAggovLyDor4TmtYvorr7orqHpmLbmrrXmuLLmn5Plmagx57uE77yM5Li65Yqo5oCB6aG55a6a5Yi25riy5p+T5Zmo77yI6K+E5rWL5ZKMZGV2ZWxvcGluZ++8ie+8jAp2YXIgZGVmYXVsdFRhYmxlUmVuZGVyZXJzID0gewogIC8vIOihqOagvOeJueacieWFqOWxgOa4suafk+WZqAogICR2eGVUYWJsZU9wdGlvblNvcnQ6IHsKICAgIC8vIOWbuuWumuaJi+WKqOaOkuW6j+a4suafkwogICAgcmVuZGVyRGVmYXVsdDogZnVuY3Rpb24gcmVuZGVyRGVmYXVsdChoLCBjZWxsUmVuZGVyLCBfcmVmMTMzLCBfcmVmMTM0KSB7CiAgICAgIHZhciAkY29sdW1uSW5kZXggPSBfcmVmMTMzLiRjb2x1bW5JbmRleCwKICAgICAgICAkcm93SW5kZXggPSBfcmVmMTMzLiRyb3dJbmRleCwKICAgICAgICBpdGVtcyA9IF9yZWYxMzMuaXRlbXMsCiAgICAgICAgY29sdW1uID0gX3JlZjEzMy5jb2x1bW4sCiAgICAgICAgZGF0YSA9IF9yZWYxMzMuZGF0YSwKICAgICAgICByb3cgPSBfcmVmMTMzLnJvdywKICAgICAgICAkc2VxID0gX3JlZjEzMy4kc2VxLAogICAgICAgIGNvbHVtbkluZGV4ID0gX3JlZjEzMy5jb2x1bW5JbmRleCwKICAgICAgICBpc0VkaXQgPSBfcmVmMTMzLmlzRWRpdCwKICAgICAgICBsZXZlbCA9IF9yZWYxMzMubGV2ZWwsCiAgICAgICAgcm93SW5kZXggPSBfcmVmMTMzLnJvd0luZGV4LAogICAgICAgIHNlcSA9IF9yZWYxMzMuc2VxOwogICAgICB2YXIgJGV4Y2VsID0gX3JlZjEzNC4kZXhjZWwsCiAgICAgICAgJGdyaWQgPSBfcmVmMTM0LiRncmlkLAogICAgICAgICR0YWJsZSA9IF9yZWYxMzQuJHRhYmxlLAogICAgICAgICR0eXBlID0gX3JlZjEzNC4kdHlwZTsKICAgICAgdmFyIHNlbGYgPSAkZ3JpZC4kcGFyZW50OwogICAgICAvLyA8YSBjbGFzcz0ib3B0aW9uUm93IiBocmVmPXtyb3cubGlua30+eyfmk43kvZwnICsgcm93W2NvbHVtbi5wcm9wZXJ0eV19PC9hPgogICAgICByZXR1cm4gW2goImRpdiIsIHsKICAgICAgICAiY2xhc3MiOiAicm93LWRyYWdzb3J0LW9wdGlvbiByb3ctb3B0aW9uLWdyb3VwIgogICAgICB9LCBbaCgiYSIsIHsKICAgICAgICAiY2xhc3MiOiAib3B0aW9uUm93LXVwU29ydCBmbi1pbmxpbmUiLAogICAgICAgICJvbiI6IHsKICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICByZXR1cm4gc2VsZi5vbk9wdGlvblNvcnRSb3dDbGljayh7CiAgICAgICAgICAgICAgcm93OiByb3csCiAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4sCiAgICAgICAgICAgICAgJHJvd0luZGV4OiAkcm93SW5kZXgsCiAgICAgICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgICAgICBpdGVtczogaXRlbXMsCiAgICAgICAgICAgICAgb3B0aW9uVHlwZTogJ3VwU29ydCcKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBbIlx1NEUwQVx1NzlGQiJdKSwgaCgiYSIsIHsKICAgICAgICAiY2xhc3MiOiAib3B0aW9uUm93LWRvd25Tb3J0IGZuLWlubGluZSIsCiAgICAgICAgIm9uIjogewogICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgIHJldHVybiBzZWxmLm9uT3B0aW9uU29ydFJvd0NsaWNrKHsKICAgICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgICBjb2x1bW46IGNvbHVtbiwKICAgICAgICAgICAgICAkcm93SW5kZXg6ICRyb3dJbmRleCwKICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgIGl0ZW1zOiBpdGVtcywKICAgICAgICAgICAgICBvcHRpb25UeXBlOiAnZG93blNvcnQnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgWyJcdTRFMEJcdTc5RkIiXSksIGgoImEiLCB7CiAgICAgICAgImNsYXNzIjogIm9wdGlvblJvdy10b3BTb3J0IGZuLWlubGluZSIsCiAgICAgICAgIm9uIjogewogICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgIHJldHVybiBzZWxmLm9uT3B0aW9uU29ydFJvd0NsaWNrKHsKICAgICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgICBjb2x1bW46IGNvbHVtbiwKICAgICAgICAgICAgICAkcm93SW5kZXg6ICRyb3dJbmRleCwKICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgIGl0ZW1zOiBpdGVtcywKICAgICAgICAgICAgICBvcHRpb25UeXBlOiAndG9wU29ydCcKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBbIlx1N0Y2RVx1OTg3NiJdKSwgaCgiYSIsIHsKICAgICAgICAiY2xhc3MiOiAib3B0aW9uUm93LWJvdHRvbVNvcnQgZm4taW5saW5lIiwKICAgICAgICAib24iOiB7CiAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygpIHsKICAgICAgICAgICAgcmV0dXJuIHNlbGYub25PcHRpb25Tb3J0Um93Q2xpY2soewogICAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLAogICAgICAgICAgICAgICRyb3dJbmRleDogJHJvd0luZGV4LAogICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgaXRlbXM6IGl0ZW1zLAogICAgICAgICAgICAgIG9wdGlvblR5cGU6ICdib3R0b21Tb3J0JwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIFsiXHU3RjZFXHU1RTk1Il0pXSldOwogICAgfQogIH0sCiAgJHZ4ZVRhYmxlSHJlZjogewogICAgLy8g5paH5pys5riy5p+TCiAgICByZW5kZXJDZWxsOiBmdW5jdGlvbiByZW5kZXJDZWxsKGgsIHJlbmRlck9wdHMsIF9yZWYxMzUpIHsKICAgICAgdmFyIHJvdyA9IF9yZWYxMzUucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWYxMzUuY29sdW1uOwogICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgImNsYXNzIjogInRleHQgaHJlZi1hIgogICAgICB9LCBbaCgiYSIsIFtyb3dbY29sdW1uLnByb3BlcnR5XV0pXSldOwogICAgfSwKICAgIHJlbmRlckVkaXQ6IGZ1bmN0aW9uIHJlbmRlckVkaXQoaCwgcmVuZGVyT3B0cywgX3JlZjEzNikgewogICAgICB2YXIgcm93ID0gX3JlZjEzNi5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjEzNi5jb2x1bW47CiAgICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgICAiY2xhc3MiOiAidGV4dCBocmVmLWEiCiAgICAgIH0sIFtoKCJhIiwgW3Jvd1tjb2x1bW4ucHJvcGVydHldXSldKV07CiAgICB9LAogICAgcmVuZGVyRGVmYXVsdDogZnVuY3Rpb24gcmVuZGVyRGVmYXVsdChoLCByZW5kZXJPcHRzLCBfcmVmMTM3KSB7CiAgICAgIHZhciByb3cgPSBfcmVmMTM3LnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmMTM3LmNvbHVtbjsKICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJ0ZXh0IGhyZWYtYSIKICAgICAgfSwgW2goImEiLCBbcm93W2NvbHVtbi5wcm9wZXJ0eV1dKV0pXTsKICAgIH0KICB9LAogICR2eGVUYWJsZUNvbnRlbnRUYWJsZTogewogICAgcmVuZGVyRXhwYW5kOiBmdW5jdGlvbiByZW5kZXJFeHBhbmQoaCwgX3JlZjEzOCwgcGFyYW1zLCBjb250ZXh0KSB7CiAgICAgIHZhciBwcm9wcyA9IF9yZWYxMzgucHJvcHM7CiAgICAgIC8vIGNvbnN0IHRhYmxlQ29uZmlnID0gewogICAgICAvLyAgIGdsb2JhbENvbmZpZzogeyAvLyDlhajlsYDpu5jorqTmuLLmn5PliJfphY3nva4KICAgICAgLy8gICAgIC8vIOWFqOWxgOmFjee9rgogICAgICAvLyAgICAgY2hlY2tUeXBlOiAnJywKICAgICAgLy8gICAgIHNlcTogZmFsc2UKICAgICAgLy8gICB9CiAgICAgIC8vIH0KICAgICAgLy8gcmV0dXJuIFsKICAgICAgLy8gICA8QnNUYWJsZSB0b29sYmFyQ29uZmlnPXtmYWxzZX0gcGFnZXJDb25maWc9e2ZhbHNlfSB0YWJsZUNvbmZpZz17IHRhYmxlQ29uZmlnIH0geyAuLi57IHByb3BzIH19IGhlaWdodD0idW5zZXQiIHRhYmxlQ29sdW1uc0NvbmZpZz17IHJvdy5jaGlsZENvbHMgfSB0YWJsZURhdGE9eyByb3cuY2hpbGREYXRhIH0+PC9Cc1RhYmxlPgogICAgICAvLyBdCiAgICAgIHZhciByb3cgPSBwYXJhbXMucm93OwogICAgICB2YXIgcHJvcHNOID0gT2JqZWN0LmFzc2lnbih7fSwgY29udGV4dC4kZ3JpZC4kcGFyZW50LmNvbnRlbnRUYWJsZUNvbmZpZywgcHJvcHMpOwogICAgICByZXR1cm4gW2goJ0JzVGFibGUnLCB7CiAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7CiAgICAgICAgICByZWY6ICcnCiAgICAgICAgfSwgcHJvcHNOKSwge30sIHsKICAgICAgICAgIGhlaWdodDogJ3Vuc2V0JywKICAgICAgICAgIHRhYmxlQ29sdW1uc0NvbmZpZzogcm93LmNoaWxkQ29scywKICAgICAgICAgIHRhYmxlRGF0YTogcm93LmNoaWxkRGF0YQogICAgICAgIH0pLAogICAgICAgIG9uOiB7CiAgICAgICAgICBQcm94eUV2ZW50OiBmdW5jdGlvbiBQcm94eUV2ZW50KCkgewogICAgICAgICAgICB2YXIgX2NvbnRleHQkJGdyaWQkJHBhcmVuOwogICAgICAgICAgICB2YXIgYXJnID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTsKICAgICAgICAgICAgKF9jb250ZXh0JCRncmlkJCRwYXJlbiA9IGNvbnRleHQuJGdyaWQuJHBhcmVudCkuJGVtaXQuYXBwbHkoX2NvbnRleHQkJGdyaWQkJHBhcmVuLCBbJ1Byb3h5RXZlbnRDb250ZW50VGFibGUnLCBhcmdbMF0sIE9iamVjdC5hc3NpZ24oYXJnWzFdLCB7CiAgICAgICAgICAgICAgUGFyZW50c1BhcmFtczogcGFyYW1zCiAgICAgICAgICAgIH0pXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGFyZy5zbGljZSgyKSkpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pXTsKICAgIH0KICB9LAogICR2eGVOb3REYXRhOiB7CiAgICAvLyDnqbrlhoXlrrnmqKHmnb8KICAgIHJlbmRlckVtcHR5OiBmdW5jdGlvbiByZW5kZXJFbXB0eShoLCByZW5kZXJPcHRzKSB7CiAgICAgIHJldHVybiBbaCgiZGl2IiwgW2goInNwYW4iLCBbaCgicCIsIFsiXHU0RUIyXHVGRjBDXHU2Q0ExXHU2NzA5XHU2NkY0XHU1OTFBXHU2NTcwXHU2MzZFXHU0RTg2XHVGRjAxIl0pXSldKV07CiAgICB9CiAgfSwKICAkdnhlVGFibGVPcHRpb25Sb3c6IHsKICAgIC8vIOaTjeS9nOWIl+a4suafkwogICAgcmVuZGVyRGVmYXVsdDogZnVuY3Rpb24gcmVuZGVyRGVmYXVsdChoLCByZW5kZXJPcHRzLCBwYXJhbXMsIGNvbnRleHQpIHsKICAgICAgdmFyIHNlbGYgPSBjb250ZXh0LiRncmlkLiRwYXJlbnQ7CiAgICAgIHZhciBwcm9wcyA9IHJlbmRlck9wdHMucHJvcHM7CiAgICAgIHZhciByb3cgPSBwYXJhbXMucm93LAogICAgICAgIGNvbHVtbiA9IHBhcmFtcy5jb2x1bW47CiAgICAgIHZhciBzdGF0dXNGaWVsZCA9IHByb3BzLnN0YXR1c0ZpZWxkLAogICAgICAgIF9wcm9wcyRvcHRpb25zID0gcHJvcHMub3B0aW9ucywKICAgICAgICBvcHRpb25zID0gX3Byb3BzJG9wdGlvbnMgPT09IHZvaWQgMCA/IHt9IDogX3Byb3BzJG9wdGlvbnM7CiAgICAgIHZhciByZW5kZXJPcHRpb24gPSBvcHRpb25zW3Jvd1tzdGF0dXNGaWVsZF0gfHwgY29sdW1uLmZpZWxkXTsKICAgICAgaWYgKHJlbmRlck9wdGlvbikgewogICAgICAgIHJldHVybiBbaCgiZGl2IiwgewogICAgICAgICAgImNsYXNzIjogInJvdy1vcHRpb24gcm93LW9wdGlvbi1ncm91cCIKICAgICAgICB9LCBbcmVuZGVyT3B0aW9uLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdidXR0b24nKSB7CiAgICAgICAgICAgIHZhciBkaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICBpZiAoaXRlbS5kaXNhYmxlZEhhbmRsZSkgewogICAgICAgICAgICAgIGRpc2FibGVkID0gaXRlbS5kaXNhYmxlZEhhbmRsZShyb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBoKCJ2eGUtYnV0dG9uIiwgewogICAgICAgICAgICAgICJjbGFzcyI6IGl0ZW0uY2xhc3MgfHwgJycsCiAgICAgICAgICAgICAgImF0dHJzIjogewogICAgICAgICAgICAgICAgImRpc2FibGVkIjogZGlzYWJsZWQsCiAgICAgICAgICAgICAgICAic3RhdHVzIjogIWRpc2FibGVkID8gaXRlbS5idG5TdGF0dXMgOiAnaW5mbycsCiAgICAgICAgICAgICAgICAic2l6ZSI6ICJtaW5pIgogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgIm9uIjogewogICAgICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLm9uT3B0aW9uUm93Q2xpY2soewogICAgICAgICAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLAogICAgICAgICAgICAgICAgICAgIG9wdGlvblR5cGU6IGl0ZW0uY29kZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIFtpdGVtLmxhYmVsXSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gaCgiYSIsIHsKICAgICAgICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAgICAgICAidGl0bGUiOiBpdGVtLmxhYmVsLAogICAgICAgICAgICAgICAgInN0YXR1cyI6IGl0ZW0uYnRuU3RhdHVzCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAiY2xhc3MiOiAnZm4taW5saW5lIGYxNCAnICsgaXRlbS5jbGFzcyB8fCAnZm4taW5saW5lIGYxNCcsCiAgICAgICAgICAgICAgIm9uIjogewogICAgICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLm9uT3B0aW9uUm93Q2xpY2soewogICAgICAgICAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLAogICAgICAgICAgICAgICAgICAgIG9wdGlvblR5cGU6IGl0ZW0uY29kZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIFtpdGVtLmxhYmVsXSk7CiAgICAgICAgICB9CiAgICAgICAgfSldKV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVuZGVyT3B0aW9uID0gb3B0aW9uc1snZGVmYXVsdCddOwogICAgICAgIGlmIChyZW5kZXJPcHRpb24pIHsKICAgICAgICAgIHJldHVybiBbaCgiZGl2IiwgewogICAgICAgICAgICAiY2xhc3MiOiAicm93LW9wdGlvbiByb3ctb3B0aW9uLWdyb3VwIgogICAgICAgICAgfSwgW3JlbmRlck9wdGlvbi5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdidXR0b24nKSB7CiAgICAgICAgICAgICAgdmFyIF9pdGVtJGlzQXZhaWxhYmxlT2JqID0gaXRlbS5pc0F2YWlsYWJsZU9iaiwKICAgICAgICAgICAgICAgIGlzQXZhaWxhYmxlT2JqID0gX2l0ZW0kaXNBdmFpbGFibGVPYmogPT09IHZvaWQgMCA/IG51bGwgOiBfaXRlbSRpc0F2YWlsYWJsZU9iajsKICAgICAgICAgICAgICB2YXIgZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICBpZiAoaXNBdmFpbGFibGVPYmopIHsKICAgICAgICAgICAgICAgIGlmIChpc0F2YWlsYWJsZU9iai50YXJnZXRGaWVsZCkgewogICAgICAgICAgICAgICAgICBkaXNhYmxlZCA9IE51bWJlcihyb3dbaXNBdmFpbGFibGVPYmoudGFyZ2V0RmllbGRdKSAhPT0gaXNBdmFpbGFibGVPYmoudGFyZ2V0VmFsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8g5Y+q6KaB55uu5qCH5a2X5q615pyJ5YC877yM5oyJ6ZKu5bCx5LiN5Y+v5pON5L2cCiAgICAgICAgICAgICAgICBpZiAoaXNBdmFpbGFibGVPYmoudmFsRmllbGQpIHsKICAgICAgICAgICAgICAgICAgZGlzYWJsZWQgPSAhWycnLCBudWxsLCAnbnVsbCcsIHVuZGVmaW5lZF0uaW5jbHVkZXMocm93W2lzQXZhaWxhYmxlT2JqLnZhbEZpZWxkXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyDlpoLmnpwgaXNBdmFpbGFibGVPYmouZGlzYWJsZWQg5Li6dHJ1Ze+8jCDkvJjlhYjlpITnkIZpc0F2YWlsYWJsZU9iai5kaXNhYmxlZAogICAgICAgICAgICAgICAgaWYgKGlzQXZhaWxhYmxlT2JqLmRpc2FibGVkKSB7CiAgICAgICAgICAgICAgICAgIGRpc2FibGVkID0gaXNBdmFpbGFibGVPYmouZGlzYWJsZWQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChpdGVtLmRpc2FibGVkSGFuZGxlKSB7CiAgICAgICAgICAgICAgICBkaXNhYmxlZCA9IGl0ZW0uZGlzYWJsZWRIYW5kbGUocm93KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIGgoInZ4ZS1idXR0b24iLCB7CiAgICAgICAgICAgICAgICAiY2xhc3MiOiBpdGVtLmNsYXNzIHx8ICcnLAogICAgICAgICAgICAgICAgImF0dHJzIjogewogICAgICAgICAgICAgICAgICAiZGlzYWJsZWQiOiBkaXNhYmxlZCwKICAgICAgICAgICAgICAgICAgInN0YXR1cyI6IGl0ZW0uYnRuU3RhdHVzLAogICAgICAgICAgICAgICAgICAic2l6ZSI6ICJtaW5pIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICJvbiI6IHsKICAgICAgICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYub25PcHRpb25Sb3dDbGljayh7CiAgICAgICAgICAgICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLAogICAgICAgICAgICAgICAgICAgICAgb3B0aW9uVHlwZTogaXRlbS5jb2RlCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCBbaXRlbS5sYWJlbF0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2ljb24nKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGgoInNwYW4iLCB7CiAgICAgICAgICAgICAgICAic3R5bGUiOiAiZGlzcGxheTppbmxpbmUtYmxvY2s7d2lkdGg6MThweDtoZWlnaHQ6MThweDtmb250LXNpemU6MTJweDttYXJnaW46MCAycHg7Y3Vyc29yOnBvaW50ZXI7IiwKICAgICAgICAgICAgICAgICJvbiI6IHsKICAgICAgICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYub25PcHRpb25Sb3dDbGljayh7CiAgICAgICAgICAgICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLAogICAgICAgICAgICAgICAgICAgICAgb3B0aW9uVHlwZTogaXRlbS5jb2RlCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCBbaCgiaSIsIHsKICAgICAgICAgICAgICAgICJjbGFzcyI6IGl0ZW0uaWNvbiwKICAgICAgICAgICAgICAgICJzdHlsZSI6IGl0ZW0uY29sb3IKICAgICAgICAgICAgICB9KV0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiBoKCJhIiwgewogICAgICAgICAgICAgICAgImF0dHJzIjogewogICAgICAgICAgICAgICAgICAidGl0bGUiOiBpdGVtLmxhYmVsLAogICAgICAgICAgICAgICAgICAic3RhdHVzIjogaXRlbS5idG5TdGF0dXMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAiY2xhc3MiOiAnZm4taW5saW5lIGYxNCAnICsgaXRlbS5jbGFzcyB8fCAnZm4taW5saW5lIGYxNCcsCiAgICAgICAgICAgICAgICAib24iOiB7CiAgICAgICAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLm9uT3B0aW9uUm93Q2xpY2soewogICAgICAgICAgICAgICAgICAgICAgcm93OiByb3csCiAgICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGNvbHVtbiwKICAgICAgICAgICAgICAgICAgICAgIG9wdGlvblR5cGU6IGl0ZW0uY29kZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgW2l0ZW0ubGFiZWxdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSldKV07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICByZW5kZXJDZWxsOiBmdW5jdGlvbiByZW5kZXJDZWxsKGgsIHJlbmRlck9wdHMsIHBhcmFtcywgY29udGV4dCkgewogICAgICB2YXIgc2VsZiA9IGNvbnRleHQuJGdyaWQuJHBhcmVudDsKICAgICAgdmFyIHByb3BzID0gcmVuZGVyT3B0cy5wcm9wczsKICAgICAgdmFyIHJvdyA9IHBhcmFtcy5yb3csCiAgICAgICAgY29sdW1uID0gcGFyYW1zLmNvbHVtbjsKICAgICAgdmFyIHN0YXR1c0ZpZWxkID0gcHJvcHMuc3RhdHVzRmllbGQsCiAgICAgICAgb3B0aW9ucyA9IHByb3BzLm9wdGlvbnM7CiAgICAgIHZhciByZW5kZXJPcHRpb24gPSBvcHRpb25zW3Jvd1tzdGF0dXNGaWVsZF0gfHwgY29sdW1uLnByb3BlcnR5XTsKICAgICAgaWYgKHJlbmRlck9wdGlvbikgewogICAgICAgIHJldHVybiBbaCgiZGl2IiwgewogICAgICAgICAgImNsYXNzIjogInJvdy1vcHRpb24gcm93LW9wdGlvbi1ncm91cCIKICAgICAgICB9LCBbcmVuZGVyT3B0aW9uLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdidXR0b24nKSB7CiAgICAgICAgICAgIHZhciBkaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICBpZiAoaXRlbS5kaXNhYmxlZEhhbmRsZSkgewogICAgICAgICAgICAgIGRpc2FibGVkID0gaXRlbS5kaXNhYmxlZEhhbmRsZShyb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBoKCJ2eGUtYnV0dG9uIiwgewogICAgICAgICAgICAgICJjbGFzcyI6IGl0ZW0uY2xhc3MgfHwgJycsCiAgICAgICAgICAgICAgImF0dHJzIjogewogICAgICAgICAgICAgICAgImRpc2FibGVkIjogZGlzYWJsZWQsCiAgICAgICAgICAgICAgICAic3RhdHVzIjogaXRlbS5idG5TdGF0dXMKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICJvbiI6IHsKICAgICAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5vbk9wdGlvblJvd0NsaWNrKHsKICAgICAgICAgICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGNvbHVtbiwKICAgICAgICAgICAgICAgICAgICBvcHRpb25UeXBlOiBpdGVtLmNvZGUKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBbaXRlbS5sYWJlbF0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIGgoImEiLCB7CiAgICAgICAgICAgICAgImF0dHJzIjogewogICAgICAgICAgICAgICAgInRpdGxlIjogaXRlbS5sYWJlbCwKICAgICAgICAgICAgICAgICJzdGF0dXMiOiBpdGVtLmJ0blN0YXR1cwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgImNsYXNzIjogJ2ZuLWlubGluZSBmMTQgJyArIGl0ZW0uY2xhc3MgfHwgJ2ZuLWlubGluZSBmMTQnLAogICAgICAgICAgICAgICJvbiI6IHsKICAgICAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5vbk9wdGlvblJvd0NsaWNrKHsKICAgICAgICAgICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGNvbHVtbiwKICAgICAgICAgICAgICAgICAgICBvcHRpb25UeXBlOiBpdGVtLmNvZGUKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBbaXRlbS5sYWJlbF0pOwogICAgICAgICAgfQogICAgICAgIH0pXSldOwogICAgICB9IGVsc2UgewogICAgICAgIHJlbmRlck9wdGlvbiA9IG9wdGlvbnNbJ2RlZmF1bHQnXTsKICAgICAgICBpZiAocmVuZGVyT3B0aW9uKSB7CiAgICAgICAgICByZXR1cm4gW2goImRpdiIsIHsKICAgICAgICAgICAgImNsYXNzIjogInJvdy1vcHRpb24gcm93LW9wdGlvbi1ncm91cCIKICAgICAgICAgIH0sIFtyZW5kZXJPcHRpb24ubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnYnV0dG9uJykgewogICAgICAgICAgICAgIHZhciBkaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgIGlmIChpdGVtLmRpc2FibGVkSGFuZGxlKSB7CiAgICAgICAgICAgICAgICBkaXNhYmxlZCA9IGl0ZW0uZGlzYWJsZWRIYW5kbGUocm93KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIGgoInZ4ZS1idXR0b24iLCB7CiAgICAgICAgICAgICAgICAiY2xhc3MiOiBpdGVtLmNsYXNzIHx8ICcnLAogICAgICAgICAgICAgICAgImF0dHJzIjogewogICAgICAgICAgICAgICAgICAiZGlzYWJsZWQiOiBkaXNhYmxlZCwKICAgICAgICAgICAgICAgICAgInN0YXR1cyI6IGl0ZW0uYnRuU3RhdHVzCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgIm9uIjogewogICAgICAgICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5vbk9wdGlvblJvd0NsaWNrKHsKICAgICAgICAgICAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25UeXBlOiBpdGVtLmNvZGUKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIFtpdGVtLmxhYmVsXSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIGgoImEiLCB7CiAgICAgICAgICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAgICAgICAgICJ0aXRsZSI6IGl0ZW0ubGFiZWwsCiAgICAgICAgICAgICAgICAgICJzdGF0dXMiOiBpdGVtLmJ0blN0YXR1cwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICJjbGFzcyI6ICdmbi1pbmxpbmUgZjE0ICcgKyBpdGVtLmNsYXNzIHx8ICdmbi1pbmxpbmUgZjE0JywKICAgICAgICAgICAgICAgICJvbiI6IHsKICAgICAgICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYub25PcHRpb25Sb3dDbGljayh7CiAgICAgICAgICAgICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLAogICAgICAgICAgICAgICAgICAgICAgb3B0aW9uVHlwZTogaXRlbS5jb2RlCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCBbaXRlbS5sYWJlbF0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KV0pXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuICcnOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHJlbmRlckVkaXQ6IGZ1bmN0aW9uIHJlbmRlckVkaXQoaCwgcmVuZGVyT3B0cywgcGFyYW1zLCBjb250ZXh0KSB7CiAgICAgIHZhciBzZWxmID0gY29udGV4dC4kZ3JpZC4kcGFyZW50OwogICAgICB2YXIgcHJvcHMgPSByZW5kZXJPcHRzLnByb3BzOwogICAgICB2YXIgcm93ID0gcGFyYW1zLnJvdywKICAgICAgICBjb2x1bW4gPSBwYXJhbXMuY29sdW1uOwogICAgICB2YXIgc3RhdHVzRmllbGQgPSBwcm9wcy5zdGF0dXNGaWVsZCwKICAgICAgICBvcHRpb25zID0gcHJvcHMub3B0aW9uczsKICAgICAgdmFyIHJlbmRlck9wdGlvbiA9IG9wdGlvbnNbcm93W3N0YXR1c0ZpZWxkXSB8fCBjb2x1bW5dOwogICAgICBpZiAocmVuZGVyT3B0aW9uKSB7CiAgICAgICAgcmV0dXJuIFtoKCJkaXYiLCB7CiAgICAgICAgICAiY2xhc3MiOiAicm93LW9wdGlvbiByb3ctb3B0aW9uLWdyb3VwIgogICAgICAgIH0sIFtyZW5kZXJPcHRpb24ubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2J1dHRvbicpIHsKICAgICAgICAgICAgdmFyIGRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgIGlmIChpdGVtLmRpc2FibGVkSGFuZGxlKSB7CiAgICAgICAgICAgICAgZGlzYWJsZWQgPSBpdGVtLmRpc2FibGVkSGFuZGxlKHJvdyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGgoInZ4ZS1idXR0b24iLCB7CiAgICAgICAgICAgICAgImNsYXNzIjogaXRlbS5jbGFzcyB8fCAnJywKICAgICAgICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAgICAgICAiZGlzYWJsZWQiOiBkaXNhYmxlZCwKICAgICAgICAgICAgICAgICJzdGF0dXMiOiBpdGVtLmJ0blN0YXR1cwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgIm9uIjogewogICAgICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLm9uT3B0aW9uUm93Q2xpY2soewogICAgICAgICAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLAogICAgICAgICAgICAgICAgICAgIG9wdGlvblR5cGU6IGl0ZW0uY29kZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIFtpdGVtLmxhYmVsXSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gaCgiYSIsIHsKICAgICAgICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAgICAgICAidGl0bGUiOiBpdGVtLmxhYmVsLAogICAgICAgICAgICAgICAgInN0YXR1cyI6IGl0ZW0uYnRuU3RhdHVzCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAiY2xhc3MiOiAnZm4taW5saW5lIGYxNCAnICsgaXRlbS5jbGFzcyB8fCAnZm4taW5saW5lIGYxNCcsCiAgICAgICAgICAgICAgIm9uIjogewogICAgICAgICAgICAgICAgImNsaWNrIjogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLm9uT3B0aW9uUm93Q2xpY2soewogICAgICAgICAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICAgICAgICAgIGNvbHVtbjogY29sdW1uLAogICAgICAgICAgICAgICAgICAgIG9wdGlvblR5cGU6IGl0ZW0uY29kZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIFtpdGVtLmxhYmVsXSk7CiAgICAgICAgICB9CiAgICAgICAgfSldKV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVuZGVyT3B0aW9uID0gb3B0aW9uc1snZGVmYXVsdCddOwogICAgICAgIGlmIChyZW5kZXJPcHRpb24pIHsKICAgICAgICAgIHJldHVybiBbaCgiZGl2IiwgewogICAgICAgICAgICAiY2xhc3MiOiAicm93LW9wdGlvbiByb3ctb3B0aW9uLWdyb3VwIgogICAgICAgICAgfSwgW3JlbmRlck9wdGlvbi5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdidXR0b24nKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGgoInZ4ZS1idXR0b24iLCB7CiAgICAgICAgICAgICAgICAiY2xhc3MiOiBpdGVtLmNsYXNzIHx8ICcnLAogICAgICAgICAgICAgICAgImF0dHJzIjogewogICAgICAgICAgICAgICAgICAic3RhdHVzIjogaXRlbS5idG5TdGF0dXMKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAib24iOiB7CiAgICAgICAgICAgICAgICAgICJjbGljayI6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLm9uT3B0aW9uUm93Q2xpY2soewogICAgICAgICAgICAgICAgICAgICAgcm93OiByb3csCiAgICAgICAgICAgICAgICAgICAgICBjb2x1bW46IGNvbHVtbiwKICAgICAgICAgICAgICAgICAgICAgIG9wdGlvblR5cGU6IGl0ZW0uY29kZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgW2l0ZW0ubGFiZWxdKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gaCgiYSIsIHsKICAgICAgICAgICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICAgICAgICAgInRpdGxlIjogaXRlbS5sYWJlbCwKICAgICAgICAgICAgICAgICAgInN0YXR1cyI6IGl0ZW0uYnRuU3RhdHVzCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgImNsYXNzIjogJ2ZuLWlubGluZSBmMTQgJyArIGl0ZW0uY2xhc3MgfHwgJ2ZuLWlubGluZSBmMTQnLAogICAgICAgICAgICAgICAgIm9uIjogewogICAgICAgICAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5vbk9wdGlvblJvd0NsaWNrKHsKICAgICAgICAgICAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4sCiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25UeXBlOiBpdGVtLmNvZGUKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIFtpdGVtLmxhYmVsXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pXSldOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICAkdnhlVGFibGVDdXN0b21SZW5kZXI6IHsKICAgIC8vIOmAmueUqOiHquWumuS5iea4suafk++8iGRldmVsb3BpbmfvvIkKICAgIHJlbmRlckRlZmF1bHQ6IGZ1bmN0aW9uIHJlbmRlckRlZmF1bHQoaCwgcmVuZGVyT3B0cywgcGFyYW1zLCBjb250ZXh0KSB7CiAgICAgIHZhciBjb2x1bW4gPSBwYXJhbXMuY29sdW1uOwogICAgICAvLyA8dGVtcGxhdGUgc2xvdC1zY29wZT0ieyByb3csIGluZGV4IH0iIHNsb3Q9ImRhdGVObyI+PC90ZW1wbGF0ZT4KICAgICAgcmV0dXJuIFtoKCJkaXYiLCB7CiAgICAgICAgImNsYXNzIjogInRhYmxlLWN1c3RvbS1yZW5kZXIiCiAgICAgIH0sIFtoKCJzbG90IiwgewogICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICJuYW1lIjogJ0NlbGxEZWZhdWx0U2xvdCcgKyBjb2x1bW4ucHJvcGVydHksCiAgICAgICAgICAicGFyYW1zIjogcGFyYW1zCiAgICAgICAgfQogICAgICB9KV0pXTsKICAgIH0sCiAgICByZW5kZXJDZWxsOiBmdW5jdGlvbiByZW5kZXJDZWxsKGgsIHJlbmRlck9wdHMsIHBhcmFtcywgY29udGV4dCkgewogICAgICB2YXIgY29sdW1uID0gcGFyYW1zLmNvbHVtbjsKICAgICAgLy8gPHRlbXBsYXRlIHNsb3Qtc2NvcGU9Insgcm93LCBpbmRleCB9IiBzbG90PSJkYXRlTm8iPjwvdGVtcGxhdGU+CiAgICAgIHZhciBic1RhYmxlID0gY29udGV4dC4kZ3JpZC4kcGFyZW50OwogICAgICB2YXIgJHNjb3BlZFNsb3RzID0gYnNUYWJsZS4kc2NvcGVkU2xvdHM7CiAgICAgIGlmICgkc2NvcGVkU2xvdHNbY29sdW1uLmZpZWxkICsgJ1Nsb3RDZWxsJ10pIHsKICAgICAgICByZXR1cm4gaCgnZGl2JywgewogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgY2xhc3M6ICdjZWxsLWN1c3RvbScKICAgICAgICAgIH0KICAgICAgICB9LCAkc2NvcGVkU2xvdHNbY29sdW1uLmZpZWxkICsgJ1Nsb3RDZWxsJ10ocGFyYW1zLCBjb250ZXh0KSk7CiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbHVtbi5vd24uY3VzdG9tQ2VsbFJlbmRlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIHJldHVybiBoKCdkaXYnLCB7CiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICBjbGFzczogJ2NlbGwtY3VzdG9tJwogICAgICAgICAgfQogICAgICAgIH0sIGNvbHVtbi5vd24uY3VzdG9tQ2VsbFJlbmRlcihoLCByZW5kZXJPcHRzLCBwYXJhbXMsIGNvbnRleHQpKTsKICAgICAgfQogICAgfSwKICAgIHJlbmRlckVkaXQ6IGZ1bmN0aW9uIHJlbmRlckVkaXQoaCwgcmVuZGVyT3B0cywgcGFyYW1zLCBjb250ZXh0KSB7CiAgICAgIHZhciBjb2x1bW4gPSBwYXJhbXMuY29sdW1uOwogICAgICAvLyA8dGVtcGxhdGUgc2xvdC1zY29wZT0ieyByb3csIGluZGV4IH0iIHNsb3Q9ImRhdGVObyI+PC90ZW1wbGF0ZT4KICAgICAgcmV0dXJuIFtoKCJkaXYiLCB7CiAgICAgICAgImNsYXNzIjogInRhYmxlLWN1c3RvbS1yZW5kZXIiCiAgICAgIH0sIFtoKCJzbG90IiwgewogICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICJuYW1lIjogJ0NlbGxFZGl0U2xvdCcgKyBjb2x1bW4ucHJvcGVydHksCiAgICAgICAgICAicGFyYW1zIjogcGFyYW1zCiAgICAgICAgfQogICAgICB9KV0pXTsKICAgIH0sCiAgICByZW5kZXJJdGVtOiBmdW5jdGlvbiByZW5kZXJJdGVtKGgsIHJlbmRlck9wdHMsIHBhcmFtcywgY29udGV4dCkgewogICAgICB2YXIgcHJvcGVydHkgPSBwYXJhbXMucHJvcGVydHk7CiAgICAgIC8vIDx0ZW1wbGF0ZSBzbG90LXNjb3BlPSJ7IHJvdywgaW5kZXggfSIgc2xvdD0iZGF0ZU5vIj48L3RlbXBsYXRlPgogICAgICByZXR1cm4gW2goImRpdiIsIHsKICAgICAgICAiY2xhc3MiOiAidGFibGUtY3VzdG9tLXJlbmRlciIKICAgICAgfSwgW2goInNsb3QiLCB7CiAgICAgICAgImF0dHJzIjogewogICAgICAgICAgIm5hbWUiOiAnaXRlbVNsb3QnICsgcHJvcGVydHksCiAgICAgICAgICAicGFyYW1zIjogcGFyYW1zCiAgICAgICAgfQogICAgICB9KV0pXTsKICAgIH0KICB9LAogICR2eGVIcmVmOiB7CiAgICAvLyDmlofmnKzmuLLmn5MKICAgIHJlbmRlckNlbGw6IGZ1bmN0aW9uIHJlbmRlckNlbGwoaCwgcmVuZGVyT3B0cywgX3JlZjEzOSwgY29udGV4dCkgewogICAgICB2YXIgcm93ID0gX3JlZjEzOS5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjEzOS5jb2x1bW47CiAgICAgIC8vIEBjbGljaz0iYnNUYWJsZS5jZWxsT3B0aW9uQ2FsbEJhY2socGFyYW1zLCB7IG9wdGlvblR5cGU6ICdpbnB1dCcsIHZhbHVlOiByb3dbY29sdW1uLnByb3BlcnR5XSwgZmllbGQ6IGNvbHVtbi5wcm9wZXJ0eSwgcmVuZGVyT3B0cyB9KSIKICAgICAgdmFyIGJzVGFibGUgPSBjb250ZXh0LiRncmlkLiRwYXJlbnQ7CiAgICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgICAiY2xhc3MiOiAidGV4dCIsCiAgICAgICAgInN0eWxlIjogImNvbG9yOiM0MDllZmY7Y3Vyc29yOnBvaW50ZXI7IiwKICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAiaHJlZiI6ICJqYXZhc2NyaXB0OjsiCiAgICAgICAgfSwKICAgICAgICAib24iOiB7CiAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygpIHsKICAgICAgICAgICAgcmV0dXJuIGJzVGFibGUuY2VsbE9wdGlvbkNhbGxCYWNrKHJvdywgY29sdW1uKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIFtyb3dbY29sdW1uLnByb3BlcnR5XV0pXTsKICAgIH0sCiAgICByZW5kZXJFZGl0OiBmdW5jdGlvbiByZW5kZXJFZGl0KGgsIHJlbmRlck9wdHMsIF9yZWYxNDAsIGNvbnRleHQpIHsKICAgICAgdmFyIHJvdyA9IF9yZWYxNDAucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWYxNDAuY29sdW1uOwogICAgICB2YXIgYnNUYWJsZSA9IGNvbnRleHQuJGdyaWQuJHBhcmVudDsKICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJ0ZXh0IGhyZWYtYSIsCiAgICAgICAgInN0eWxlIjogImNvbG9yOiM0MDllZmY7Y3Vyc29yOnBvaW50ZXI7IiwKICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAiaHJlZiI6ICJqYXZhc2NyaXB0OjsiCiAgICAgICAgfSwKICAgICAgICAib24iOiB7CiAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygpIHsKICAgICAgICAgICAgcmV0dXJuIGJzVGFibGUuY2VsbE9wdGlvbkNhbGxCYWNrKHJvdywgY29sdW1uKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIFtyb3dbY29sdW1uLnByb3BlcnR5XV0pXTsKICAgIH0sCiAgICByZW5kZXJEZWZhdWx0OiBmdW5jdGlvbiByZW5kZXJEZWZhdWx0KGgsIHJlbmRlck9wdHMsIF9yZWYxNDEsIGNvbnRleHQpIHsKICAgICAgdmFyIHJvdyA9IF9yZWYxNDEucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWYxNDEuY29sdW1uOwogICAgICB2YXIgYnNUYWJsZSA9IGNvbnRleHQuJGdyaWQuJHBhcmVudDsKICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJ0ZXh0IGhyZWYtYSIsCiAgICAgICAgInN0eWxlIjogImNvbG9yOiM0MDllZmY7Y3Vyc29yOnBvaW50ZXI7IiwKICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAiaHJlZiI6ICJqYXZhc2NyaXB0OjsiCiAgICAgICAgfSwKICAgICAgICAib24iOiB7CiAgICAgICAgICAiY2xpY2siOiBmdW5jdGlvbiBjbGljaygpIHsKICAgICAgICAgICAgcmV0dXJuIGJzVGFibGUuY2VsbE9wdGlvbkNhbGxCYWNrKHJvdywgY29sdW1uKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIFtyb3dbY29sdW1uLnByb3BlcnR5XV0pXTsKICAgIH0KICB9LAogICRjdXN0b21JY29uOiB7CiAgICAvLyDlop7liqBpY29u5Zu+5qCH5bGV56S6CiAgICByZW5kZXJEZWZhdWx0OiBmdW5jdGlvbiByZW5kZXJEZWZhdWx0KGgsIGNlbGxSZW5kZXIsIHBhcmFtcykgewogICAgICB2YXIgcmVuZGVyUHJvcHMgPSBjZWxsUmVuZGVyLnJlbmRlclByb3BzLAogICAgICAgIG9wdGlvbnMgPSBjZWxsUmVuZGVyLm9wdGlvbnMsCiAgICAgICAgcHJvcHMgPSBjZWxsUmVuZGVyLnByb3BzOwogICAgICB2YXIgcm93ID0gcGFyYW1zLnJvdywKICAgICAgICBjb2x1bW4gPSBwYXJhbXMuY29sdW1uOwogICAgICB2YXIgY2VsbFZhbHVlID0gcm93W2NvbHVtbi5wcm9wZXJ0eV07CiAgICAgIHZhciBjdXJyZW50T3B0aW9uID0gb3B0aW9ucy5maW5kKGZ1bmN0aW9uIChvcHRpb24pIHsKICAgICAgICByZXR1cm4gU3RyaW5nKG9wdGlvbi52YWx1ZSkgPT09IFN0cmluZyhjZWxsVmFsdWUpOwogICAgICB9KTsKICAgICAgaWYgKHJlbmRlclByb3BzICE9PSBudWxsICYmIHJlbmRlclByb3BzICE9PSB2b2lkIDAgJiYgcmVuZGVyUHJvcHMucmVuZGVyICYmIHR5cGVvZiAocmVuZGVyUHJvcHMgPT09IG51bGwgfHwgcmVuZGVyUHJvcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlbmRlclByb3BzLnJlbmRlcikgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICByZXR1cm4gcmVuZGVyUHJvcHMucmVuZGVyKGgsIHsKICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgY29sdW1uOiBjb2x1bW4sCiAgICAgICAgICBjZWxsUmVuZGVyOiBjZWxsUmVuZGVyLAogICAgICAgICAgcGFyYW1zOiBwYXJhbXMKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChjdXJyZW50T3B0aW9uICE9PSBudWxsICYmIGN1cnJlbnRPcHRpb24gIT09IHZvaWQgMCAmJiBjdXJyZW50T3B0aW9uLmljb25DbGFzcykgewogICAgICAgIHJldHVybiBbaCgiaSIsIHsKICAgICAgICAgICJjbGFzcyI6IGN1cnJlbnRPcHRpb24gPT09IG51bGwgfHwgY3VycmVudE9wdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudE9wdGlvbi5pY29uQ2xhc3MsCiAgICAgICAgICAic3R5bGUiOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIChjdXJyZW50T3B0aW9uID09PSBudWxsIHx8IGN1cnJlbnRPcHRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnRPcHRpb24uaWNvblN0eWxlKSB8fCB7fSksIHt9LCB7CiAgICAgICAgICAgIGZvbnRTaXplOiAnMThweCcsCiAgICAgICAgICAgIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnCiAgICAgICAgICB9KQogICAgICAgIH0pLCBwcm9wcyAhPT0gbnVsbCAmJiBwcm9wcyAhPT0gdm9pZCAwICYmIHByb3BzLnNob3dMYWJlbCA/IGgoInNwYW4iLCB7CiAgICAgICAgICAic3R5bGUiOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIChjdXJyZW50T3B0aW9uID09PSBudWxsIHx8IGN1cnJlbnRPcHRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN1cnJlbnRPcHRpb24uaWNvblN0eWxlKSB8fCB7fSksIHt9LCB7CiAgICAgICAgICAgIHZlcnRpY2FsQWxpZ246ICdtaWRkbGUnCiAgICAgICAgICB9KQogICAgICAgIH0sIFsoY3VycmVudE9wdGlvbiA9PT0gbnVsbCB8fCBjdXJyZW50T3B0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50T3B0aW9uLmxhYmVsKSB8fCAoY3VycmVudE9wdGlvbiA9PT0gbnVsbCB8fCBjdXJyZW50T3B0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50T3B0aW9uLnZhbHVlKV0pIDogJyddOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbaCgic3BhbiIsIFsoY3VycmVudE9wdGlvbiA9PT0gbnVsbCB8fCBjdXJyZW50T3B0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50T3B0aW9uLmxhYmVsKSB8fCAoY3VycmVudE9wdGlvbiA9PT0gbnVsbCB8fCBjdXJyZW50T3B0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50T3B0aW9uLnZhbHVlKV0pXTsKICAgICAgfQogICAgfQogIH0sCiAgJHZ4ZUljb246IHsKICAgIC8vIOWinuWKoGljb27lm77moIflsZXnpLoKICAgIHJlbmRlckRlZmF1bHQ6IGZ1bmN0aW9uIHJlbmRlckRlZmF1bHQoaCwgY2VsbFJhbmRlciwgcGFyYW1zKSB7CiAgICAgIHZhciBfcm93JGNoaWxkcmVuLCBfcm93JGNoaWxkcmVuMiwgX3JvdyRjaGlsZHJlbjM7CiAgICAgIHZhciByb3cgPSBwYXJhbXMucm93LAogICAgICAgIGNvbHVtbiA9IHBhcmFtcy5jb2x1bW4sCiAgICAgICAgJHRhYmxlID0gcGFyYW1zLiR0YWJsZTsKICAgICAgcmV0dXJuIFtoKCJkaXYiLCB7CiAgICAgICAgInN0eWxlIjogIm1hcmdpbi1sZWZ0OjEwcHg7ZGlzcGxheTpmbGV4IgogICAgICB9LCBbKCgoX3JvdyRjaGlsZHJlbiA9IHJvdy5jaGlsZHJlbikgPT09IG51bGwgfHwgX3JvdyRjaGlsZHJlbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JvdyRjaGlsZHJlbi5sZW5ndGgpIDwgMSB8fCAhcm93LmNoaWxkcmVuKSAmJiBoKCJpIiwgewogICAgICAgICJjbGFzcyI6ICdlbC1pY29uLWRvY3VtZW50JywKICAgICAgICAic3R5bGUiOiAibWFyZ2luLXJpZ2h0OiAxMHB4O2xpbmUtaGVpZ2h0OjMycHgiCiAgICAgIH0pLCAkdGFibGUudHJlZUV4cGFuZGVkcy5pbmRleE9mKHJvdykgPT09IC0xICYmICgoX3JvdyRjaGlsZHJlbjIgPSByb3cuY2hpbGRyZW4pID09PSBudWxsIHx8IF9yb3ckY2hpbGRyZW4yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcm93JGNoaWxkcmVuMi5sZW5ndGgpID4gMCAmJiBoKCJpIiwgewogICAgICAgICJjbGFzcyI6ICdlbC1pY29uLWZvbGRlcicsCiAgICAgICAgInN0eWxlIjogIm1hcmdpbi1yaWdodDogMTBweDtsaW5lLWhlaWdodDozMnB4IgogICAgICB9KSwgJHRhYmxlLnRyZWVFeHBhbmRlZHMuaW5kZXhPZihyb3cpID4gLTEgJiYgKChfcm93JGNoaWxkcmVuMyA9IHJvdy5jaGlsZHJlbikgPT09IG51bGwgfHwgX3JvdyRjaGlsZHJlbjMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yb3ckY2hpbGRyZW4zLmxlbmd0aCkgPiAwICYmIGgoImkiLCB7CiAgICAgICAgImNsYXNzIjogJ2VsLWljb24tZm9sZGVyLW9wZW5lZCcsCiAgICAgICAgInN0eWxlIjogIm1hcmdpbi1yaWdodDogMTBweDtsaW5lLWhlaWdodDozMnB4IgogICAgICB9KSwgaCgic3BhbiIsIHsKICAgICAgICAic3R5bGUiOiAib3ZlcmZsb3c6IGhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO2ZsZXg6MTsiCiAgICAgIH0sIFtyb3dbY29sdW1uLnByb3BlcnR5XSB8fCAwXSldKV07CiAgICB9CiAgfSwKICAkdnhlSWNvbjE6IHsKICAgIC8vIOWinuWKoGljb27lm77moIflsZXnpLog57qi54GvCiAgICByZW5kZXJEZWZhdWx0OiBmdW5jdGlvbiByZW5kZXJEZWZhdWx0KGgsIGNlbGxSYW5kZXIsIHBhcmFtcykgewogICAgICB2YXIgX2NlbGxSYW5kZXIkcHJvcHMsIF9jZWxsUmFuZGVyJHByb3BzMiwgX3JvdyRjaGlsZHJlbjQsIF9yb3ckY2hpbGRyZW41LCBfcm93JGNoaWxkcmVuNjsKICAgICAgdmFyIHNob3dWYWx1ZSA9ICgoX2NlbGxSYW5kZXIkcHJvcHMgPSBjZWxsUmFuZGVyLnByb3BzKSA9PT0gbnVsbCB8fCBfY2VsbFJhbmRlciRwcm9wcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NlbGxSYW5kZXIkcHJvcHMuc2hvd1ZhbHVlKSAhPT0gdW5kZWZpbmVkID8gISEoKF9jZWxsUmFuZGVyJHByb3BzMiA9IGNlbGxSYW5kZXIucHJvcHMpICE9PSBudWxsICYmIF9jZWxsUmFuZGVyJHByb3BzMiAhPT0gdm9pZCAwICYmIF9jZWxsUmFuZGVyJHByb3BzMi5zaG93VmFsdWUpIDogdHJ1ZTsKICAgICAgdmFyIHJvdyA9IHBhcmFtcy5yb3csCiAgICAgICAgY29sdW1uID0gcGFyYW1zLmNvbHVtbiwKICAgICAgICAkdGFibGUgPSBwYXJhbXMuJHRhYmxlOwogICAgICByZXR1cm4gW2goImRpdiIsIHsKICAgICAgICAiY2xhc3MiOiAid2FyaW5nLWljb24tcmVuZGVyLXdyYXBwZXIiLAogICAgICAgICJzdHlsZSI6ICJhbGdpbjogY2VudGVyIgogICAgICB9LCBbKCgoX3JvdyRjaGlsZHJlbjQgPSByb3cuY2hpbGRyZW4pID09PSBudWxsIHx8IF9yb3ckY2hpbGRyZW40ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcm93JGNoaWxkcmVuNC5sZW5ndGgpIDwgMSB8fCAhcm93LmNoaWxkcmVuKSAmJiBoKCJpIiwgewogICAgICAgICJjbGFzcyI6ICdyZXN1bHQtaWNvbiByZXN1bHQtcmVkJywKICAgICAgICAic3R5bGUiOiAibWFyZ2luLXJpZ2h0OiAxMHB4O2xpbmUtaGVpZ2h0OjMycHgiCiAgICAgIH0pLCAkdGFibGUudHJlZUV4cGFuZGVkcy5pbmRleE9mKHJvdykgPT09IC0xICYmICgoX3JvdyRjaGlsZHJlbjUgPSByb3cuY2hpbGRyZW4pID09PSBudWxsIHx8IF9yb3ckY2hpbGRyZW41ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcm93JGNoaWxkcmVuNS5sZW5ndGgpID4gMCAmJiBoKCJpIiwgewogICAgICAgICJjbGFzcyI6ICdyZXN1bHQtaWNvbiByZXN1bHQtcmVkJywKICAgICAgICAic3R5bGUiOiAibWFyZ2luLXJpZ2h0OiAxMHB4O2xpbmUtaGVpZ2h0OjMycHgiCiAgICAgIH0pLCAkdGFibGUudHJlZUV4cGFuZGVkcy5pbmRleE9mKHJvdykgPiAtMSAmJiAoKF9yb3ckY2hpbGRyZW42ID0gcm93LmNoaWxkcmVuKSA9PT0gbnVsbCB8fCBfcm93JGNoaWxkcmVuNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JvdyRjaGlsZHJlbjYubGVuZ3RoKSA+IDAgJiYgaCgiaSIsIHsKICAgICAgICAiY2xhc3MiOiAncmVzdWx0LWljb24gcmVzdWx0LXJlZCcsCiAgICAgICAgInN0eWxlIjogIm1hcmdpbi1yaWdodDogMTBweDtsaW5lLWhlaWdodDozMnB4IgogICAgICB9KSwgc2hvd1ZhbHVlICYmIGgoInNwYW4iLCB7CiAgICAgICAgImNsYXNzIjogIndhcmluZy1pY29uLXJlbmRlci1jb250ZW50IiwKICAgICAgICAic3R5bGUiOiAib3ZlcmZsb3c6IGhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO2ZsZXg6MTsiCiAgICAgIH0sIFtyb3dbY29sdW1uLnByb3BlcnR5XSB8fCAwXSldKV07CiAgICB9CiAgfSwKICAkdnhlSWNvbjI6IHsKICAgIC8vIOWinuWKoGljb27lm77moIflsZXnpLog6buE54GvCiAgICByZW5kZXJEZWZhdWx0OiBmdW5jdGlvbiByZW5kZXJEZWZhdWx0KGgsIGNlbGxSYW5kZXIsIHBhcmFtcykgewogICAgICB2YXIgX2NlbGxSYW5kZXIkcHJvcHMzLCBfY2VsbFJhbmRlciRwcm9wczQsIF9yb3ckY2hpbGRyZW43LCBfcm93JGNoaWxkcmVuOCwgX3JvdyRjaGlsZHJlbjk7CiAgICAgIHZhciBzaG93VmFsdWUgPSAoKF9jZWxsUmFuZGVyJHByb3BzMyA9IGNlbGxSYW5kZXIucHJvcHMpID09PSBudWxsIHx8IF9jZWxsUmFuZGVyJHByb3BzMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NlbGxSYW5kZXIkcHJvcHMzLnNob3dWYWx1ZSkgIT09IHVuZGVmaW5lZCA/ICEhKChfY2VsbFJhbmRlciRwcm9wczQgPSBjZWxsUmFuZGVyLnByb3BzKSAhPT0gbnVsbCAmJiBfY2VsbFJhbmRlciRwcm9wczQgIT09IHZvaWQgMCAmJiBfY2VsbFJhbmRlciRwcm9wczQuc2hvd1ZhbHVlKSA6IHRydWU7CiAgICAgIHZhciByb3cgPSBwYXJhbXMucm93LAogICAgICAgIGNvbHVtbiA9IHBhcmFtcy5jb2x1bW4sCiAgICAgICAgJHRhYmxlID0gcGFyYW1zLiR0YWJsZTsKICAgICAgcmV0dXJuIFtoKCJkaXYiLCB7CiAgICAgICAgImNsYXNzIjogIndhcmluZy1pY29uLXJlbmRlci13cmFwcGVyIiwKICAgICAgICAic3R5bGUiOiAiYWxnaW46IGNlbnRlciIKICAgICAgfSwgWygoKF9yb3ckY2hpbGRyZW43ID0gcm93LmNoaWxkcmVuKSA9PT0gbnVsbCB8fCBfcm93JGNoaWxkcmVuNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JvdyRjaGlsZHJlbjcubGVuZ3RoKSA8IDEgfHwgIXJvdy5jaGlsZHJlbikgJiYgaCgiaSIsIHsKICAgICAgICAiY2xhc3MiOiAncmVzdWx0LWljb24gcmVzdWx0LXllbGxvdycsCiAgICAgICAgInN0eWxlIjogIm1hcmdpbi1yaWdodDogMTBweDtsaW5lLWhlaWdodDozMnB4IgogICAgICB9KSwgJHRhYmxlLnRyZWVFeHBhbmRlZHMuaW5kZXhPZihyb3cpID09PSAtMSAmJiAoKF9yb3ckY2hpbGRyZW44ID0gcm93LmNoaWxkcmVuKSA9PT0gbnVsbCB8fCBfcm93JGNoaWxkcmVuOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JvdyRjaGlsZHJlbjgubGVuZ3RoKSA+IDAgJiYgaCgiaSIsIHsKICAgICAgICAiY2xhc3MiOiAncmVzdWx0LWljb24gcmVzdWx0LXllbGxvdycsCiAgICAgICAgInN0eWxlIjogIm1hcmdpbi1yaWdodDogMTBweDtsaW5lLWhlaWdodDozMnB4IgogICAgICB9KSwgJHRhYmxlLnRyZWVFeHBhbmRlZHMuaW5kZXhPZihyb3cpID4gLTEgJiYgKChfcm93JGNoaWxkcmVuOSA9IHJvdy5jaGlsZHJlbikgPT09IG51bGwgfHwgX3JvdyRjaGlsZHJlbjkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yb3ckY2hpbGRyZW45Lmxlbmd0aCkgPiAwICYmIGgoImkiLCB7CiAgICAgICAgImNsYXNzIjogJ3Jlc3VsdC1pY29uIHJlc3VsdC15ZWxsb3cnLAogICAgICAgICJzdHlsZSI6ICJtYXJnaW4tcmlnaHQ6IDEwcHg7bGluZS1oZWlnaHQ6MzJweCIKICAgICAgfSksIHNob3dWYWx1ZSAmJiBoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJ3YXJpbmctaWNvbi1yZW5kZXItY29udGVudCIsCiAgICAgICAgInN0eWxlIjogIm92ZXJmbG93OiBoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcztmbGV4OjE7IgogICAgICB9LCBbcm93W2NvbHVtbi5wcm9wZXJ0eV0gfHwgMF0pXSldOwogICAgfQogIH0sCiAgJHZ4ZUljb24zOiB7CiAgICAvLyDlop7liqBpY29u5Zu+5qCH5bGV56S6IOe7v+eBrwogICAgcmVuZGVyRGVmYXVsdDogZnVuY3Rpb24gcmVuZGVyRGVmYXVsdChoLCBjZWxsUmFuZGVyLCBwYXJhbXMpIHsKICAgICAgdmFyIF9jZWxsUmFuZGVyJHByb3BzNSwgX2NlbGxSYW5kZXIkcHJvcHM2LCBfcm93JGNoaWxkcmVuMTAsIF9yb3ckY2hpbGRyZW4xMSwgX3JvdyRjaGlsZHJlbjEyOwogICAgICB2YXIgc2hvd1ZhbHVlID0gKChfY2VsbFJhbmRlciRwcm9wczUgPSBjZWxsUmFuZGVyLnByb3BzKSA9PT0gbnVsbCB8fCBfY2VsbFJhbmRlciRwcm9wczUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jZWxsUmFuZGVyJHByb3BzNS5zaG93VmFsdWUpICE9PSB1bmRlZmluZWQgPyAhISgoX2NlbGxSYW5kZXIkcHJvcHM2ID0gY2VsbFJhbmRlci5wcm9wcykgIT09IG51bGwgJiYgX2NlbGxSYW5kZXIkcHJvcHM2ICE9PSB2b2lkIDAgJiYgX2NlbGxSYW5kZXIkcHJvcHM2LnNob3dWYWx1ZSkgOiB0cnVlOwogICAgICB2YXIgcm93ID0gcGFyYW1zLnJvdywKICAgICAgICBjb2x1bW4gPSBwYXJhbXMuY29sdW1uLAogICAgICAgICR0YWJsZSA9IHBhcmFtcy4kdGFibGU7CiAgICAgIHJldHVybiBbaCgiZGl2IiwgewogICAgICAgICJjbGFzcyI6ICJ3YXJpbmctaWNvbi1yZW5kZXItd3JhcHBlciIsCiAgICAgICAgInN0eWxlIjogImFsZ2luOiBjZW50ZXIiCiAgICAgIH0sIFsoKChfcm93JGNoaWxkcmVuMTAgPSByb3cuY2hpbGRyZW4pID09PSBudWxsIHx8IF9yb3ckY2hpbGRyZW4xMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JvdyRjaGlsZHJlbjEwLmxlbmd0aCkgPCAxIHx8ICFyb3cuY2hpbGRyZW4pICYmIGgoImkiLCB7CiAgICAgICAgImNsYXNzIjogJ3Jlc3VsdC1pY29uIHJlc3VsdC1ncmVlbicsCiAgICAgICAgInN0eWxlIjogIm1hcmdpbi1yaWdodDogMTBweDtsaW5lLWhlaWdodDozMnB4IgogICAgICB9KSwgJHRhYmxlLnRyZWVFeHBhbmRlZHMuaW5kZXhPZihyb3cpID09PSAtMSAmJiAoKF9yb3ckY2hpbGRyZW4xMSA9IHJvdy5jaGlsZHJlbikgPT09IG51bGwgfHwgX3JvdyRjaGlsZHJlbjExID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcm93JGNoaWxkcmVuMTEubGVuZ3RoKSA+IDAgJiYgaCgiaSIsIHsKICAgICAgICAiY2xhc3MiOiAncmVzdWx0LWljb24gcmVzdWx0LWdyZWVuJywKICAgICAgICAic3R5bGUiOiAibWFyZ2luLXJpZ2h0OiAxMHB4O2xpbmUtaGVpZ2h0OjMycHgiCiAgICAgIH0pLCAkdGFibGUudHJlZUV4cGFuZGVkcy5pbmRleE9mKHJvdykgPiAtMSAmJiAoKF9yb3ckY2hpbGRyZW4xMiA9IHJvdy5jaGlsZHJlbikgPT09IG51bGwgfHwgX3JvdyRjaGlsZHJlbjEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcm93JGNoaWxkcmVuMTIubGVuZ3RoKSA+IDAgJiYgaCgiaSIsIHsKICAgICAgICAiY2xhc3MiOiAncmVzdWx0LWljb24gcmVzdWx0LWdyZWVuJywKICAgICAgICAic3R5bGUiOiAibWFyZ2luLXJpZ2h0OiAxMHB4O2xpbmUtaGVpZ2h0OjMycHgiCiAgICAgIH0pLCBzaG93VmFsdWUgJiYgaCgic3BhbiIsIHsKICAgICAgICAiY2xhc3MiOiAid2FyaW5nLWljb24tcmVuZGVyLWNvbnRlbnQiLAogICAgICAgICJzdHlsZSI6ICJvdmVyZmxvdzogaGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7ZmxleDoxOyIKICAgICAgfSwgW3Jvd1tjb2x1bW4ucHJvcGVydHldIHx8IDBdKV0pXTsKICAgIH0KICB9LAogICR2eGVJY29uNDogewogICAgLy8g5aKe5YqgaWNvbuWbvuagh+WxleekuiDorabpk4MKICAgIHJlbmRlckRlZmF1bHQ6IGZ1bmN0aW9uIHJlbmRlckRlZmF1bHQoaCwgY2VsbFJhbmRlciwgcGFyYW1zKSB7CiAgICAgIHZhciBfcm93JGNoaWxkcmVuMTMsIF9yb3ckY2hpbGRyZW4xNCwgX3JvdyRjaGlsZHJlbjE1OwogICAgICB2YXIgcm93ID0gcGFyYW1zLnJvdywKICAgICAgICBjb2x1bW4gPSBwYXJhbXMuY29sdW1uLAogICAgICAgICR0YWJsZSA9IHBhcmFtcy4kdGFibGU7CiAgICAgIHJldHVybiBbaCgiZGl2IiwgewogICAgICAgICJjbGFzcyI6ICJ3YXJpbmctaWNvbi1yZW5kZXItd3JhcHBlciIsCiAgICAgICAgInN0eWxlIjogImFsZ2luOiBjZW50ZXIiCiAgICAgIH0sIFsoKChfcm93JGNoaWxkcmVuMTMgPSByb3cuY2hpbGRyZW4pID09PSBudWxsIHx8IF9yb3ckY2hpbGRyZW4xMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JvdyRjaGlsZHJlbjEzLmxlbmd0aCkgPCAxIHx8ICFyb3cuY2hpbGRyZW4pICYmIGgoImkiLCB7CiAgICAgICAgImNsYXNzIjogJ3Jlc3VsdC1pY29uIHJlc3VsdC15ZWxsb3ctYmVsbCcsCiAgICAgICAgInN0eWxlIjogIm1hcmdpbi1yaWdodDogMTBweDtsaW5lLWhlaWdodDozMnB4IgogICAgICB9KSwgJHRhYmxlLnRyZWVFeHBhbmRlZHMuaW5kZXhPZihyb3cpID09PSAtMSAmJiAoKF9yb3ckY2hpbGRyZW4xNCA9IHJvdy5jaGlsZHJlbikgPT09IG51bGwgfHwgX3JvdyRjaGlsZHJlbjE0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcm93JGNoaWxkcmVuMTQubGVuZ3RoKSA+IDAgJiYgaCgiaSIsIHsKICAgICAgICAiY2xhc3MiOiAncmVzdWx0LWljb24gcmVzdWx0LXllbGxvdy1iZWxsJywKICAgICAgICAic3R5bGUiOiAibWFyZ2luLXJpZ2h0OiAxMHB4O2xpbmUtaGVpZ2h0OjMycHgiCiAgICAgIH0pLCAkdGFibGUudHJlZUV4cGFuZGVkcy5pbmRleE9mKHJvdykgPiAtMSAmJiAoKF9yb3ckY2hpbGRyZW4xNSA9IHJvdy5jaGlsZHJlbikgPT09IG51bGwgfHwgX3JvdyRjaGlsZHJlbjE1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcm93JGNoaWxkcmVuMTUubGVuZ3RoKSA+IDAgJiYgaCgiaSIsIHsKICAgICAgICAiY2xhc3MiOiAncmVzdWx0LWljb24gcmVzdWx0LXllbGxvdy1iZWxsJywKICAgICAgICAic3R5bGUiOiAibWFyZ2luLXJpZ2h0OiAxMHB4O2xpbmUtaGVpZ2h0OjMycHgiCiAgICAgIH0pLCBoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJ3YXJpbmctaWNvbi1yZW5kZXItY29udGVudCIsCiAgICAgICAgInN0eWxlIjogIm92ZXJmbG93OiBoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcztmbGV4OjE7IgogICAgICB9LCBbcm93W2NvbHVtbi5wcm9wZXJ0eV0gfHwgMF0pXSldOwogICAgfQogIH0sCiAgJHZ4ZUljb242OiB7CiAgICAvLyDlop7liqBpY29u5Zu+5qCH5bGV56S6IOapmeiJsgogICAgcmVuZGVyRGVmYXVsdDogZnVuY3Rpb24gcmVuZGVyRGVmYXVsdChoLCBjZWxsUmFuZGVyLCBwYXJhbXMpIHsKICAgICAgdmFyIF9jZWxsUmFuZGVyJHByb3BzNywgX2NlbGxSYW5kZXIkcHJvcHM4LCBfcm93JGNoaWxkcmVuMTYsIF9yb3ckY2hpbGRyZW4xNywgX3JvdyRjaGlsZHJlbjE4OwogICAgICB2YXIgc2hvd1ZhbHVlID0gKChfY2VsbFJhbmRlciRwcm9wczcgPSBjZWxsUmFuZGVyLnByb3BzKSA9PT0gbnVsbCB8fCBfY2VsbFJhbmRlciRwcm9wczcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jZWxsUmFuZGVyJHByb3BzNy5zaG93VmFsdWUpICE9PSB1bmRlZmluZWQgPyAhISgoX2NlbGxSYW5kZXIkcHJvcHM4ID0gY2VsbFJhbmRlci5wcm9wcykgIT09IG51bGwgJiYgX2NlbGxSYW5kZXIkcHJvcHM4ICE9PSB2b2lkIDAgJiYgX2NlbGxSYW5kZXIkcHJvcHM4LnNob3dWYWx1ZSkgOiB0cnVlOwogICAgICB2YXIgcm93ID0gcGFyYW1zLnJvdywKICAgICAgICBjb2x1bW4gPSBwYXJhbXMuY29sdW1uLAogICAgICAgICR0YWJsZSA9IHBhcmFtcy4kdGFibGU7CiAgICAgIHJldHVybiBbaCgiZGl2IiwgewogICAgICAgICJjbGFzcyI6ICJ3YXJpbmctaWNvbi1yZW5kZXItd3JhcHBlciIsCiAgICAgICAgInN0eWxlIjogImFsZ2luOiBjZW50ZXIiCiAgICAgIH0sIFsoKChfcm93JGNoaWxkcmVuMTYgPSByb3cuY2hpbGRyZW4pID09PSBudWxsIHx8IF9yb3ckY2hpbGRyZW4xNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JvdyRjaGlsZHJlbjE2Lmxlbmd0aCkgPCAxIHx8ICFyb3cuY2hpbGRyZW4pICYmIGgoImkiLCB7CiAgICAgICAgImNsYXNzIjogJ3Jlc3VsdC1pY29uIHJlc3VsdC1vcmFuZ2UnLAogICAgICAgICJzdHlsZSI6ICJtYXJnaW4tcmlnaHQ6IDEwcHg7bGluZS1oZWlnaHQ6MzJweCIKICAgICAgfSksICR0YWJsZS50cmVlRXhwYW5kZWRzLmluZGV4T2Yocm93KSA9PT0gLTEgJiYgKChfcm93JGNoaWxkcmVuMTcgPSByb3cuY2hpbGRyZW4pID09PSBudWxsIHx8IF9yb3ckY2hpbGRyZW4xNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JvdyRjaGlsZHJlbjE3Lmxlbmd0aCkgPiAwICYmIGgoImkiLCB7CiAgICAgICAgImNsYXNzIjogJ3Jlc3VsdC1pY29uIHJlc3VsdC1vcmFuZ2UnLAogICAgICAgICJzdHlsZSI6ICJtYXJnaW4tcmlnaHQ6IDEwcHg7bGluZS1oZWlnaHQ6MzJweCIKICAgICAgfSksICR0YWJsZS50cmVlRXhwYW5kZWRzLmluZGV4T2Yocm93KSA+IC0xICYmICgoX3JvdyRjaGlsZHJlbjE4ID0gcm93LmNoaWxkcmVuKSA9PT0gbnVsbCB8fCBfcm93JGNoaWxkcmVuMTggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yb3ckY2hpbGRyZW4xOC5sZW5ndGgpID4gMCAmJiBoKCJpIiwgewogICAgICAgICJjbGFzcyI6ICdyZXN1bHQtaWNvbiByZXN1bHQtb3JhbmdlJywKICAgICAgICAic3R5bGUiOiAibWFyZ2luLXJpZ2h0OiAxMHB4O2xpbmUtaGVpZ2h0OjMycHgiCiAgICAgIH0pLCBzaG93VmFsdWUgJiYgaCgic3BhbiIsIHsKICAgICAgICAiY2xhc3MiOiAid2FyaW5nLWljb24tcmVuZGVyLWNvbnRlbnQiLAogICAgICAgICJzdHlsZSI6ICJvdmVyZmxvdzogaGlkZGVuO3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7ZmxleDoxOyIKICAgICAgfSwgW3Jvd1tjb2x1bW4ucHJvcGVydHldIHx8IDBdKV0pXTsKICAgIH0KICB9LAogICR2eGVJY29uNzogewogICAgLy8g5aKe5YqgaWNvbuWbvuagh+WxleekuiDok53oibIKICAgIHJlbmRlckRlZmF1bHQ6IGZ1bmN0aW9uIHJlbmRlckRlZmF1bHQoaCwgY2VsbFJhbmRlciwgcGFyYW1zKSB7CiAgICAgIHZhciBfY2VsbFJhbmRlciRwcm9wczksIF9jZWxsUmFuZGVyJHByb3BzMTAsIF9yb3ckY2hpbGRyZW4xOSwgX3JvdyRjaGlsZHJlbjIwLCBfcm93JGNoaWxkcmVuMjE7CiAgICAgIHZhciBzaG93VmFsdWUgPSAoKF9jZWxsUmFuZGVyJHByb3BzOSA9IGNlbGxSYW5kZXIucHJvcHMpID09PSBudWxsIHx8IF9jZWxsUmFuZGVyJHByb3BzOSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NlbGxSYW5kZXIkcHJvcHM5LnNob3dWYWx1ZSkgIT09IHVuZGVmaW5lZCA/ICEhKChfY2VsbFJhbmRlciRwcm9wczEwID0gY2VsbFJhbmRlci5wcm9wcykgIT09IG51bGwgJiYgX2NlbGxSYW5kZXIkcHJvcHMxMCAhPT0gdm9pZCAwICYmIF9jZWxsUmFuZGVyJHByb3BzMTAuc2hvd1ZhbHVlKSA6IHRydWU7CiAgICAgIHZhciByb3cgPSBwYXJhbXMucm93LAogICAgICAgIGNvbHVtbiA9IHBhcmFtcy5jb2x1bW4sCiAgICAgICAgJHRhYmxlID0gcGFyYW1zLiR0YWJsZTsKICAgICAgcmV0dXJuIFtoKCJkaXYiLCB7CiAgICAgICAgImNsYXNzIjogIndhcmluZy1pY29uLXJlbmRlci13cmFwcGVyIiwKICAgICAgICAic3R5bGUiOiAiYWxnaW46IGNlbnRlciIKICAgICAgfSwgWygoKF9yb3ckY2hpbGRyZW4xOSA9IHJvdy5jaGlsZHJlbikgPT09IG51bGwgfHwgX3JvdyRjaGlsZHJlbjE5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcm93JGNoaWxkcmVuMTkubGVuZ3RoKSA8IDEgfHwgIXJvdy5jaGlsZHJlbikgJiYgaCgiaSIsIHsKICAgICAgICAiY2xhc3MiOiAncmVzdWx0LWljb24gcmVzdWx0LWJsdWUnLAogICAgICAgICJzdHlsZSI6ICJtYXJnaW4tcmlnaHQ6IDEwcHg7bGluZS1oZWlnaHQ6MzJweCIKICAgICAgfSksICR0YWJsZS50cmVlRXhwYW5kZWRzLmluZGV4T2Yocm93KSA9PT0gLTEgJiYgKChfcm93JGNoaWxkcmVuMjAgPSByb3cuY2hpbGRyZW4pID09PSBudWxsIHx8IF9yb3ckY2hpbGRyZW4yMCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JvdyRjaGlsZHJlbjIwLmxlbmd0aCkgPiAwICYmIGgoImkiLCB7CiAgICAgICAgImNsYXNzIjogJ3Jlc3VsdC1pY29uIHJlc3VsdC1ibHVlJywKICAgICAgICAic3R5bGUiOiAibWFyZ2luLXJpZ2h0OiAxMHB4O2xpbmUtaGVpZ2h0OjMycHgiCiAgICAgIH0pLCAkdGFibGUudHJlZUV4cGFuZGVkcy5pbmRleE9mKHJvdykgPiAtMSAmJiAoKF9yb3ckY2hpbGRyZW4yMSA9IHJvdy5jaGlsZHJlbikgPT09IG51bGwgfHwgX3JvdyRjaGlsZHJlbjIxID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcm93JGNoaWxkcmVuMjEubGVuZ3RoKSA+IDAgJiYgaCgiaSIsIHsKICAgICAgICAiY2xhc3MiOiAncmVzdWx0LWljb24gcmVzdWx0LWJsdWUnLAogICAgICAgICJzdHlsZSI6ICJtYXJnaW4tcmlnaHQ6IDEwcHg7bGluZS1oZWlnaHQ6MzJweCIKICAgICAgfSksIHNob3dWYWx1ZSAmJiBoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJ3YXJpbmctaWNvbi1yZW5kZXItY29udGVudCIsCiAgICAgICAgInN0eWxlIjogIm92ZXJmbG93OiBoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpcztmbGV4OjE7IgogICAgICB9LCBbcm93W2NvbHVtbi5wcm9wZXJ0eV0gfHwgMF0pXSldOwogICAgfQogIH0sCiAgJHZ4ZUljb244OiB7CiAgICAvLyDlop7liqBpY29u5Zu+5qCH5bGV56S6IOeBsOiJsgogICAgcmVuZGVyRGVmYXVsdDogZnVuY3Rpb24gcmVuZGVyRGVmYXVsdChoLCBjZWxsUmFuZGVyLCBwYXJhbXMpIHsKICAgICAgdmFyIF9yb3ckY2hpbGRyZW4yMiwgX3JvdyRjaGlsZHJlbjIzLCBfcm93JGNoaWxkcmVuMjQ7CiAgICAgIHZhciByb3cgPSBwYXJhbXMucm93LAogICAgICAgIGNvbHVtbiA9IHBhcmFtcy5jb2x1bW4sCiAgICAgICAgJHRhYmxlID0gcGFyYW1zLiR0YWJsZTsKICAgICAgcmV0dXJuIFtoKCJkaXYiLCB7CiAgICAgICAgImNsYXNzIjogIndhcmluZy1pY29uLXJlbmRlci13cmFwcGVyIiwKICAgICAgICAic3R5bGUiOiAiYWxnaW46IGNlbnRlciIKICAgICAgfSwgWygoKF9yb3ckY2hpbGRyZW4yMiA9IHJvdy5jaGlsZHJlbikgPT09IG51bGwgfHwgX3JvdyRjaGlsZHJlbjIyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcm93JGNoaWxkcmVuMjIubGVuZ3RoKSA8IDEgfHwgIXJvdy5jaGlsZHJlbikgJiYgaCgiaSIsIHsKICAgICAgICAiY2xhc3MiOiAncmVzdWx0LWljb24gcmVzdWx0LWdyZXknLAogICAgICAgICJzdHlsZSI6ICJtYXJnaW4tcmlnaHQ6IDEwcHg7bGluZS1oZWlnaHQ6MzJweCIKICAgICAgfSksICR0YWJsZS50cmVlRXhwYW5kZWRzLmluZGV4T2Yocm93KSA9PT0gLTEgJiYgKChfcm93JGNoaWxkcmVuMjMgPSByb3cuY2hpbGRyZW4pID09PSBudWxsIHx8IF9yb3ckY2hpbGRyZW4yMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JvdyRjaGlsZHJlbjIzLmxlbmd0aCkgPiAwICYmIGgoImkiLCB7CiAgICAgICAgImNsYXNzIjogJ3Jlc3VsdC1pY29uIHJlc3VsdC1ncmV5JywKICAgICAgICAic3R5bGUiOiAibWFyZ2luLXJpZ2h0OiAxMHB4O2xpbmUtaGVpZ2h0OjMycHgiCiAgICAgIH0pLCAkdGFibGUudHJlZUV4cGFuZGVkcy5pbmRleE9mKHJvdykgPiAtMSAmJiAoKF9yb3ckY2hpbGRyZW4yNCA9IHJvdy5jaGlsZHJlbikgPT09IG51bGwgfHwgX3JvdyRjaGlsZHJlbjI0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcm93JGNoaWxkcmVuMjQubGVuZ3RoKSA+IDAgJiYgaCgiaSIsIHsKICAgICAgICAiY2xhc3MiOiAncmVzdWx0LWljb24gcmVzdWx0LWdyZXknLAogICAgICAgICJzdHlsZSI6ICJtYXJnaW4tcmlnaHQ6IDEwcHg7bGluZS1oZWlnaHQ6MzJweCIKICAgICAgfSksIGgoInNwYW4iLCB7CiAgICAgICAgImNsYXNzIjogIndhcmluZy1pY29uLXJlbmRlci1jb250ZW50IiwKICAgICAgICAic3R5bGUiOiAib3ZlcmZsb3c6IGhpZGRlbjt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO2ZsZXg6MTsiCiAgICAgIH0sIFtyb3dbY29sdW1uLnByb3BlcnR5XSB8fCAwXSldKV07CiAgICB9CiAgfSwKICAkdnhlSWNvbjU6IHsKICAgIC8vIOWinuWKoGljb27lm77moIflsZXnpLoKICAgIHJlbmRlckRlZmF1bHQ6IGZ1bmN0aW9uIHJlbmRlckRlZmF1bHQoaCwgY2VsbFJhbmRlciwgcGFyYW1zKSB7CiAgICAgIHZhciByb3cgPSBwYXJhbXMucm93LAogICAgICAgIGNvbHVtbiA9IHBhcmFtcy5jb2x1bW4sCiAgICAgICAgJHRhYmxlID0gcGFyYW1zLiR0YWJsZTsKICAgICAgcmV0dXJuIFtoKCJkaXYiLCBbcm93Lmhhc0NoaWxkID09PSBmYWxzZSAmJiBoKCJpIiwgewogICAgICAgICJjbGFzcyI6ICdlbC1pY29uLWRvY3VtZW50JywKICAgICAgICAic3R5bGUiOiAibWFyZ2luLXJpZ2h0OiAxMHB4O2xpbmUtaGVpZ2h0OjMycHgiCiAgICAgIH0pLCAkdGFibGUudHJlZUV4cGFuZGVkcy5pbmRleE9mKHJvdykgPT09IC0xICYmIHJvdy5oYXNDaGlsZCA9PT0gdHJ1ZSAmJiBoKCJpIiwgewogICAgICAgICJjbGFzcyI6ICdlbC1pY29uLWZvbGRlcicsCiAgICAgICAgInN0eWxlIjogIm1hcmdpbi1yaWdodDogMTBweDtsaW5lLWhlaWdodDozMnB4IgogICAgICB9KSwgJHRhYmxlLnRyZWVFeHBhbmRlZHMuaW5kZXhPZihyb3cpID4gLTEgJiYgcm93Lmhhc0NoaWxkID09PSB0cnVlICYmIGgoImkiLCB7CiAgICAgICAgImNsYXNzIjogJ2VsLWljb24tZm9sZGVyLW9wZW5lZCcsCiAgICAgICAgInN0eWxlIjogIm1hcmdpbi1yaWdodDogMTBweDtsaW5lLWhlaWdodDozMnB4IgogICAgICB9KSwgaCgic3BhbiIsIFtyb3dbY29sdW1uLnByb3BlcnR5XSB8fCAwXSldKV07CiAgICB9CiAgfSwKICAvLyDljZXlgLwKICAkdnhlUmF0aW86IHsKICAgIHJlbmRlckRlZmF1bHQ6IGZ1bmN0aW9uIHJlbmRlckRlZmF1bHQoaCwgY2VsbFJhbmRlciwgcGFyYW1zKSB7CiAgICAgIHZhciBfY29sdW1uJG93biwgX2NvbHVtbiRvd24kcHJvcHMsIF8kcGFyZW50JCRwYXJlbnQsIF8kcGFyZW50JCRwYXJlbnQkX3BybzsKICAgICAgdmFyIHJvdyA9IHBhcmFtcy5yb3csCiAgICAgICAgY29sdW1uID0gcGFyYW1zLmNvbHVtbiwKICAgICAgICAkcGFyZW50ID0gcGFyYW1zLiR0YWJsZS4kcGFyZW50OwogICAgICB2YXIgc2hvd1plcm8gPSAoY29sdW1uID09PSBudWxsIHx8IGNvbHVtbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9jb2x1bW4kb3duID0gY29sdW1uLm93bikgPT09IG51bGwgfHwgX2NvbHVtbiRvd24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfY29sdW1uJG93biRwcm9wcyA9IF9jb2x1bW4kb3duLnByb3BzKSA9PT0gbnVsbCB8fCBfY29sdW1uJG93biRwcm9wcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NvbHVtbiRvd24kcHJvcHMuc2hvd1plcm8pIHx8ICgkcGFyZW50ID09PSBudWxsIHx8ICRwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfJHBhcmVudCQkcGFyZW50ID0gJHBhcmVudC4kcGFyZW50KSA9PT0gbnVsbCB8fCBfJHBhcmVudCQkcGFyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoXyRwYXJlbnQkJHBhcmVudCRfcHJvID0gXyRwYXJlbnQkJHBhcmVudC5fcHJvcHMpID09PSBudWxsIHx8IF8kcGFyZW50JCRwYXJlbnQkX3BybyA9PT0gdm9pZCAwID8gdm9pZCAwIDogXyRwYXJlbnQkJHBhcmVudCRfcHJvLnNob3daZXJvKTsKICAgICAgdmFyIHZhbHVlID0gTnVtYmVyKHJvd1tjb2x1bW4ucHJvcGVydHldKSB8fCAwOwogICAgICB2YXIgWmVyb051bWJlciA9IDA7IC8vIOS4uuWQjue7reiuoeeul+WHuuadpeS4ujDnmoTlgLwg6aKE55WZ6YWN572uCiAgICAgIC8vIOiuvue9rui9rOaNouWQjueahOWAvOS+m+WvvOWHuuaJgOeUqAogICAgICByb3dbY29sdW1uLnByb3BlcnR5ICsgJ19fdmlld1JhdGlvJ10gPSB2YWx1ZSA+IDAgPyAiIi5jb25jYXQodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbHVlLnRvRml4ZWQoMSksICIlIikgOiBzaG93WmVybyA/ICIiLmNvbmNhdChaZXJvTnVtYmVyLnRvRml4ZWQoMSksICIlIikgOiAnJzsKICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgW3ZhbHVlID4gMCA/ICIiLmNvbmNhdCh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsdWUudG9GaXhlZCgxKSwgIiUiKSA6IHNob3daZXJvID8gIiIuY29uY2F0KFplcm9OdW1iZXIudG9GaXhlZCgxKSwgIiUiKSA6ICcnXSldOwogICAgfQogIH0sCiAgLy8g6YeR6aKd6IyD5Zu06L+H5ruk5riy5p+T5ZmoCiAgRmlsdGVyTnVtYmVyUmFuZ2U6IHsKICAgIC8vLyDkuI3mmL7npLrlupXpg6jmjInpkq7vvIzkvb/nlKjoh6rlrprkuYnnmoTmjInpkq4KICAgIGlzRm9vdGVyOiBmYWxzZSwKICAgIHJlbmRlckZpbHRlcjogZnVuY3Rpb24gcmVuZGVyRmlsdGVyKGgsIHJlbmRlck9wdHMsIHBhcmFtcykgewogICAgICByZXR1cm4gW2goJ0ZpbHRlck51bWJlclJhbmdlJywgewogICAgICAgIHByb3BzOiB7CiAgICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICAgIH0KICAgICAgfSldOwogICAgfSwKICAgIC8vIOetm+mAieaWueazlQogICAgZmlsdGVyTWV0aG9kOiBmdW5jdGlvbiBmaWx0ZXJNZXRob2QoX3JlZjE0MikgewogICAgICB2YXIgb3B0aW9uID0gX3JlZjE0Mi5vcHRpb24sCiAgICAgICAgcm93ID0gX3JlZjE0Mi5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjE0Mi5jb2x1bW47CiAgICAgIHZhciBfb3B0aW9uJGRhdGEgPSBvcHRpb24uZGF0YSwKICAgICAgICBtaW4gPSBfb3B0aW9uJGRhdGEubWluLAogICAgICAgIG1heCA9IF9vcHRpb24kZGF0YS5tYXg7CiAgICAgIHZhciBwcm9wZXJ0eSA9IGNvbHVtbi5wcm9wZXJ0eTsKICAgICAgdmFyIHNvcnRQcm9wZXJ0eSA9ICIiLmNvbmNhdChwcm9wZXJ0eSwgIl9fdmlld1NvcnQiKTsKICAgICAgdmFyIHZhbHVlID0gcm93W3NvcnRQcm9wZXJ0eV0gfHwgcm93W3Byb3BlcnR5XSB8fCAwOwogICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewogICAgICAgIHZhciBfdmFsdWU7CiAgICAgICAgdmFsdWUgPSBOdW1iZXIoKF92YWx1ZSA9IHZhbHVlKSA9PT0gbnVsbCB8fCBfdmFsdWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF92YWx1ZS5yZXBsYWNlKC8sL2csICcnKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG1pbiA8PSB2YWx1ZSAmJiB2YWx1ZSA8PSBtYXg7CiAgICB9LAogICAgLy8g6YeN572uCiAgICBmaWx0ZXJSZXNldE1ldGhvZDogZnVuY3Rpb24gZmlsdGVyUmVzZXRNZXRob2QoX3JlZjE0MykgewogICAgICB2YXIgb3B0aW9ucyA9IF9yZWYxNDMub3B0aW9uczsKICAgICAgb3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChvcHRpb24pIHsKICAgICAgICBvcHRpb24uZGF0YSA9IHsKICAgICAgICAgIG1pbjogJycsCiAgICAgICAgICBtYXg6ICcnCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9CiAgfQogIC8vICR2eGVUYWJsZUR5bmFtaWNTZWxlY3Q6IHsKICAvLyAgIC8vIOW6n+W8gwogIC8vICAgcmVuZGVyRWRpdChoLCB7IHByb3BzLCBvcHRpb25zIH0sIHsgcm93LCBjb2x1bW4gfSwgeyAkZXhjZWwsICRncmlkLCAkdGFibGUsICR0eXBlIH0pIHsKICAvLyAgICAgcm93Lm9wdGlvbnMgPSByb3cub3B0aW9ucyB8fCBbXQogIC8vICAgICByZXR1cm4gWwogIC8vICAgICAgIDx2eGUtc2VsZWN0IHYtbW9kZWw9e3Jvd1tjb2x1bW4ucHJvcGVydHldfSBwbGFjZWhvbGRlcj0i6K+36YCJ5oupIj4KICAvLyAgICAgICAgIHtyb3cub3B0aW9ucy5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7CiAgLy8gICAgICAgICAgIHJldHVybiBbCiAgLy8gICAgICAgICAgICAgPHZ4ZS1vcHRpb24KICAvLyAgICAgICAgICAgICAgIHZhbHVlPXtpdGVtLnZhbHVlfQogIC8vICAgICAgICAgICAgICAgbGFiZWw9e2l0ZW0ubGFiZWx9CiAgLy8gICAgICAgICAgICAgPjwvdnhlLW9wdGlvbj4KICAvLyAgICAgICAgICAgXQogIC8vICAgICAgICAgfSl9CiAgLy8gICAgICAgPC92eGUtc2VsZWN0PgogIC8vICAgICBdCiAgLy8gICB9LAogIC8vICAgcmVuZGVyRGVmYXVsdChoLCBjZWxsUmVuZGVyLCB7IHJvdywgY29sdW1uIH0sIGNvbnRleHQpIHsKICAvLyAgICAgcmV0dXJuIFs8c3Bhbj57cm93W2NvbHVtbi5wcm9wZXJ0eV19PC9zcGFuPl0KICAvLyAgIH0sCiAgLy8gICByZW5kZXJDZWxsKGgsIHJlbmRlck9wdHMsIHsgcm93LCBjb2x1bW4gfSkgewogIC8vICAgICByZXR1cm4gWzxzcGFuPntyb3dbY29sdW1uLnByb3BlcnR5XX08L3NwYW4+XQogIC8vICAgfQogIC8vIH0KfTsKLy8g5YWo5bGA5o+Q5L6bZm9ybeeJueaciea4suafk+WZqCAx57uE77yM5Li65YiG57uE5qCH6aKY5riy5p+T5Zmo77yIZGV2ZWxvcGluZ++8iQp2YXIgZGVmYXVsdEZvcm1SZW5kZXJlcnMgPSB7CiAgLy8g6KGo5Y2V54m55pyJ5YWo5bGA5riy5p+T5ZmoCiAgJHZ4ZUZvcm1Hcm91cFRpdGxlOiB7CiAgICByZW5kZXJJdGVtOiBmdW5jdGlvbiByZW5kZXJJdGVtKGgsIHJlbmRlck9wdHMsIF9yZWYxNDQpIHsKICAgICAgdmFyICRmb3JtID0gX3JlZjE0NC4kZm9ybSwKICAgICAgICBkYXRhID0gX3JlZjE0NC5kYXRhLAogICAgICAgIHByb3BlcnR5ID0gX3JlZjE0NC5wcm9wZXJ0eTsKICAgICAgdmFyIGdvb3VwVGl0bGUgPSAnJzsKICAgICAgJGZvcm0uaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICBpZiAoaXRlbS5maWVsZCA9PT0gcHJvcGVydHkpIHsKICAgICAgICAgIGl0ZW0uc3BhbiA9IDI0OwogICAgICAgICAgZ29vdXBUaXRsZSA9IGl0ZW0uZ3JvdXBUaXRsZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAvLyByZXR1cm4gWwogICAgICAvLyAgIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAtdGl0bGUiID4KICAgICAgLy8gICAgIDxpIGNsYXNzPSJmbi1pbmxpbmUiPjwvaT4KICAgICAgLy8gICAgIDxzcGFuIGNsYXNzPSJmbi1pbmxpbmUiPgogICAgICAvLyAgICAgICB7Z29vdXBUaXRsZX0KICAgICAgLy8gICAgIDwvc3Bhbj4KICAgICAgLy8gICAgIDxlbSBjbGFzcz0iZm4taW5saW5lIj48L2VtPgogICAgICAvLyAgIDwvZGl2PgogICAgICAvLyBdCiAgICAgIHJldHVybiBbaCgiQnNUaXRsZSIsIHsKICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAidHlwZSI6ICdsZWZ0JwogICAgICAgIH0KICAgICAgfSwgW2dvb3VwVGl0bGVdKV07CiAgICB9CiAgfSwKICAkZm9ybUNhbGN1bGF0ZVJlbmRlcjogewogICAgcmVuZGVySXRlbTogZnVuY3Rpb24gcmVuZGVySXRlbShoLCByZW5kZXJPcHRzLCBfcmVmMTQ1KSB7CiAgICAgIHZhciAkZm9ybSA9IF9yZWYxNDUuJGZvcm0sCiAgICAgICAgZGF0YSA9IF9yZWYxNDUuZGF0YSwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWYxNDUucHJvcGVydHk7CiAgICAgIHJldHVybiBkZWZhdWx0R2xvYmFsVXRpbHMuZm9ybUNhbGN1bGF0ZVJlbmRlcihoLCByZW5kZXJPcHRzLCB7CiAgICAgICAgJGZvcm06ICRmb3JtLAogICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5CiAgICAgIH0pOwogICAgfQogIH0sCiAgJGZvcm1Nb25leUlucHV0UmVuZGVyOiB7CiAgICAvLyDovpPlhaXmoYYKICAgIHJlbmRlckl0ZW06IGZ1bmN0aW9uIHJlbmRlckl0ZW0oaCwgcmVuZGVyT3B0cywgX3JlZjE0NikgewogICAgICB2YXIgJGZvcm0gPSBfcmVmMTQ2LiRmb3JtLAogICAgICAgIGRhdGEgPSBfcmVmMTQ2LmRhdGEsCiAgICAgICAgcHJvcGVydHkgPSBfcmVmMTQ2LnByb3BlcnR5OwogICAgICBkYXRhW3Byb3BlcnR5XSA9IChkYXRhW3Byb3BlcnR5XSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZHxJbmZpbml0eS9pZywgJycpOwogICAgICB2YXIgcHJvcHMgPSByZW5kZXJPcHRzLnByb3BzOwogICAgICBwcm9wcyA9IHByb3BzIHx8IHt9OwogICAgICBpZiAoJGZvcm0uJHBhcmVudC5lZGl0YWJsZSAhPT0gZmFsc2UgfHwgcHJvcHMuZWRpdGFibGUgIT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIFtoKCd2eGUtaW5wdXQnLCB7CiAgICAgICAgICByZWY6ICd2eGUtaW5wdXQnICsgcHJvcGVydHksCiAgICAgICAgICBwcm9wczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgdmFsdWU6IGRhdGFbcHJvcGVydHldLAogICAgICAgICAgICBzdGVwOiAxLAogICAgICAgICAgICBtaW46IDAuMDAKICAgICAgICAgIH0sIHByb3BzKSwge30sIHsKICAgICAgICAgICAgbWF4OiAxMDAwMDAwMDAwMDAwCiAgICAgICAgICB9KSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiBpbnB1dCh2YWx1ZSkgewogICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gdmFsdWU7CiAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogdmFsdWUsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgcmVuZGVyT3B0czogcmVuZGVyT3B0cwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSldOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciB2YWwgPSBpc05hTihwYXJzZUZsb2F0KGRhdGFbcHJvcGVydHldKSkgPyAwIDogcGFyc2VGbG9hdChkYXRhW3Byb3BlcnR5XSk7CiAgICAgICAgdmFsID0gdmFsLnRvRml4ZWQoMikudG9Mb2NhbGVTdHJpbmcoKTsKICAgICAgICB2YWwgPSB2YWwuc3BsaXQoJy4nKS5sZW5ndGggPT09IDEgPyB2YWwgKyAnLjAwJyA6IHZhbC5zcGxpdCgnLicpWzFdLmxlbmd0aCA9PT0gMSA/IHZhbCArICcwJyA6IHZhbDsKICAgICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgICAiY2xhc3MiOiAidGwgZm4taW5saW5lIiwKICAgICAgICAgICJwcm9wcyI6IF9vYmplY3RTcHJlYWQoe30sIHByb3BzKQogICAgICAgIH0sIFt2YWxdKV07CiAgICAgIH0KICAgIH0KICB9LAogICRmb3JtTW9uZXlUZXh0UmVuZGVyOiB7CiAgICAvLyDlup/lvIMKICAgIHJlbmRlckl0ZW06IGZ1bmN0aW9uIHJlbmRlckl0ZW0oaCwgcmVuZGVyT3B0cywgX3JlZjE0NywgY29udGV4dCkgewogICAgICB2YXIgZGF0YSA9IF9yZWYxNDcuZGF0YSwKICAgICAgICBjb2x1bW4gPSBfcmVmMTQ3LmNvbHVtbiwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWYxNDcucHJvcGVydHk7CiAgICAgIHZhciBwcm9wcyA9IHJlbmRlck9wdHMucHJvcHM7CiAgICAgIHByb3BzID0gcHJvcHMgfHwge307CiAgICAgIHZhciB2YWwgPSBpc05hTihwYXJzZUZsb2F0KGRhdGFbcHJvcGVydHldKSkgPyAwIDogcGFyc2VGbG9hdChkYXRhW3Byb3BlcnR5XSk7CiAgICAgIGRhdGFbcHJvcGVydHldID0gdmFsLnRvRml4ZWQoMik7CiAgICAgIC8vIGxldCBtb25leVVuaXQgPSBjb250ZXh0LiRncmlkLiRwYXJlbnQubW9uZXlVbml0ID8gY29udGV4dC4kZ3JpZC4kcGFyZW50Lm1vbmV5VW5pdCA6IDEKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtZXNjYXBlCiAgICAgIHZhbCA9IE51bWJlcih2YWwudG9GaXhlZCgyKSkudG9Mb2NhbGVTdHJpbmcoKTsKICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJ0bCIsCiAgICAgICAgInByb3BzIjogX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpCiAgICAgIH0sIFt2YWxdKV07CiAgICB9CiAgfSwKICAkZ3JvdXBUaXRsZTogewogICAgcmVuZGVySXRlbTogZnVuY3Rpb24gcmVuZGVySXRlbShoLCByZW5kZXJPcHRzLCBfcmVmMTQ4KSB7CiAgICAgIHZhciAkZm9ybSA9IF9yZWYxNDguJGZvcm0sCiAgICAgICAgZGF0YSA9IF9yZWYxNDguZGF0YSwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWYxNDgucHJvcGVydHk7CiAgICAgIHZhciBnb291cFRpdGxlID0gJyc7CiAgICAgICRmb3JtLml0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT09IHByb3BlcnR5KSB7CiAgICAgICAgICBpdGVtLnNwYW4gPSAyNDsKICAgICAgICAgIGdvb3VwVGl0bGUgPSBpdGVtLmdyb3VwVGl0bGU7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIFtoKCJkaXYiLCB7CiAgICAgICAgImNsYXNzIjogImZvcm0tZ3JvdXAtdGl0bGUiCiAgICAgIH0sIFtoKCJpIiwgewogICAgICAgICJjbGFzcyI6ICJmbi1pbmxpbmUiCiAgICAgIH0pLCBoKCJzcGFuIiwgewogICAgICAgICJjbGFzcyI6ICJmbi1pbmxpbmUiCiAgICAgIH0sIFtnb291cFRpdGxlXSksIGgoImVtIiwgewogICAgICAgICJjbGFzcyI6ICJmbi1pbmxpbmUiCiAgICAgIH0pXSldOwogICAgfQogIH0sCiAgJHZ4ZWxpbmthZ2VUZXh0OiB7CiAgICByZW5kZXJJdGVtOiBmdW5jdGlvbiByZW5kZXJJdGVtKGgsIHJlbmRlck9wdHMsIF9yZWYxNDkpIHsKICAgICAgdmFyICRmb3JtID0gX3JlZjE0OS4kZm9ybSwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWYxNDkucHJvcGVydHksCiAgICAgICAgZGF0YSA9IF9yZWYxNDkuZGF0YTsKICAgICAgdmFyIHByb3BzID0gcmVuZGVyT3B0cy5wcm9wczsKICAgICAgLy8gbGV0IHJlbmRlckRhdGFDYiA9ICdyZW5kZXJEYXRhQ2InCiAgICAgIC8vICRmb3JtLiRwYXJlbnQuZm9ybUl0ZW1zQ29uZmlnSW4uc29tZSgoaXRlbSkgPT4gewogICAgICAvLyAgIGlmIChpdGVtWydmaWVsZCddID09PSBwcm9wZXJ0eSkgewogICAgICAvLyAgICAgcmVuZGVyRGF0YUNiID0gaXRlbS5pdGVtUmVuZGVyICYmIGl0ZW0uaXRlbVJlbmRlci5yZW5kZXJEYXRhQ2IKICAgICAgLy8gICAgIHJldHVybiB0cnVlCiAgICAgIC8vICAgfQogICAgICAvLyB9KQogICAgICAvLyBkYXRhW3Byb3BlcnR5XSA9IHR5cGVvZiAocmVuZGVyRGF0YUNiKSA9PT0gJ2Z1bmN0aW9uJyA/IHJlbmRlckRhdGFDYihoLCB7IHByb3BzLCBuYW1lLCBvcHRpb25zIH0sIHsgJGZvcm0sIHByb3BlcnR5LCBkYXRhIH0pIDogZGF0YVtwcm9wZXJ0eV0KICAgICAgcHJvcHMgPSBwcm9wcyB8fCB7fTsKICAgICAgaWYgKCRmb3JtLiRwYXJlbnQuZWRpdGFibGUgIT09IGZhbHNlIHx8IHByb3BzLmVkaXRhYmxlICE9PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbaCgndnhlLXRleHRhcmVhJywgewogICAgICAgICAgcmVmOiAndnhlLXRleHRhcmVhJyArIHByb3BlcnR5LAogICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICB2YWx1ZTogZGF0YVtwcm9wZXJ0eV0KICAgICAgICAgIH0sIHByb3BzKSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiBpbnB1dCh2YWx1ZSkgewogICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gdmFsdWU7CiAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogdmFsdWUsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgcmVuZGVyT3B0czogcmVuZGVyT3B0cwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSldOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgICAgICJjbGFzcyI6ICJ0bCBmbi1pbmxpbmUiLAogICAgICAgICAgInByb3BzIjogX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpCiAgICAgICAgfSwgWyIgIiwgZGF0YVtwcm9wZXJ0eV0sICIgIl0pXTsKICAgICAgfQogICAgfQogIH0sCiAgJHZ4ZUZvcm1EYXlzOiB7CiAgICAvLyDlpKnmlbDmuLLmn5PlmajvvIzkuI3otrMwLjI15aSp5oyJMOiusO+8jOWkp+S6jjAuNzXlpKnmjIkx5aSp6K6w77yM5YW25LuW5oyJMC415aSp6K6wCiAgICByZW5kZXJJdGVtOiBmdW5jdGlvbiByZW5kZXJJdGVtKGgsIHJlbmRlck9wdHMsIF9yZWYxNTApIHsKICAgICAgdmFyICRmb3JtID0gX3JlZjE1MC4kZm9ybSwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWYxNTAucHJvcGVydHksCiAgICAgICAgZGF0YSA9IF9yZWYxNTAuZGF0YTsKICAgICAgdmFyIHByb3BzID0gcmVuZGVyT3B0cy5wcm9wczsKICAgICAgcHJvcHMgPSBwcm9wcyB8fCB7fTsKICAgICAgaWYgKCRmb3JtLiRwYXJlbnQuZWRpdGFibGUgIT09IGZhbHNlIHx8IHByb3BzLmVkaXRhYmxlICE9PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbaCgndnhlLWlucHV0JywgewogICAgICAgICAgcmVmOiAndnhlLWlucHV0JyArIHByb3BlcnR5LAogICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICBwbGFjZWhvbGRlcjogJ+ivt+i+k+WFpeWkqeaVsCcsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgICBjbGVhcmFibGU6IHRydWUsCiAgICAgICAgICAgIHZhbHVlOiBkYXRhW3Byb3BlcnR5XQogICAgICAgICAgfSwgcHJvcHMpLAogICAgICAgICAgb246IHsKICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7CiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGRhdGFbJ3RpbWVyXycgKyBwcm9wZXJ0eV0pOwogICAgICAgICAgICAgIGRhdGFbJ3RpbWVyXycgKyBwcm9wZXJ0eV0gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBxdWl0ZURheSA9IGRhdGFbcHJvcGVydHldICUgMTsKICAgICAgICAgICAgICAgIHF1aXRlRGF5ID0gcXVpdGVEYXkgPD0gMC4yNSA/IDAgOiBxdWl0ZURheSA+PSAwLjc1ID8gMSA6IDAuNTsKICAgICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gTWF0aC5mbG9vcihkYXRhW3Byb3BlcnR5XSAvIDEpICsgcXVpdGVEYXk7CiAgICAgICAgICAgICAgICBkYXRhW3Byb3BlcnR5XSA9IHZhbHVlOwogICAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICAgJGZvcm06ICRmb3JtLAogICAgICAgICAgICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHksCiAgICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogdmFsdWUsCiAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICAgIHJlbmRlck9wdHM6IHJlbmRlck9wdHMKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGRhdGFbJ3RpbWVyXycgKyBwcm9wZXJ0eV0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSldOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgICAgICJjbGFzcyI6ICJ0YyBmbi1pbmxpbmUiLAogICAgICAgICAgInByb3BzIjogX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpCiAgICAgICAgfSwgWyIgIiwgZGF0YVtwcm9wZXJ0eV0sICIgIl0pXTsKICAgICAgfQogICAgfQogIH0sCiAgJHZ4ZUZvcm1UaW1lOiB7CiAgICAvLyDlpKnmlbDmuLLmn5PlmajvvIzkuI3otrMwLjI15aSp5oyJMOiusO+8jOWkp+S6jjAuNzXlpKnmjIkx5aSp6K6w77yM5YW25LuW5oyJMC415aSp6K6wCiAgICByZW5kZXJJdGVtOiBmdW5jdGlvbiByZW5kZXJJdGVtKGgsIHJlbmRlck9wdHMsIF9yZWYxNTEpIHsKICAgICAgdmFyICRmb3JtID0gX3JlZjE1MS4kZm9ybSwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWYxNTEucHJvcGVydHksCiAgICAgICAgZGF0YSA9IF9yZWYxNTEuZGF0YTsKICAgICAgZGF0YVtwcm9wZXJ0eV0gPSAoZGF0YVtwcm9wZXJ0eV0gKyAnJykucmVwbGFjZSgvbnVsbHx1bmRlZmluZWQvaWcsICcnKTsKICAgICAgdmFyIHByb3BzID0gcmVuZGVyT3B0cy5wcm9wcywKICAgICAgICBmb3JtYXQgPSByZW5kZXJPcHRzLmZvcm1hdDsKICAgICAgZm9ybWF0ID0gZm9ybWF0IHx8ICdZWVlZLU1NLUREIGhoOm1tOnNzJzsKICAgICAgcHJvcHMgPSBwcm9wcyB8fCB7fTsKICAgICAgaWYgKCRmb3JtLiRwYXJlbnQuZWRpdGFibGUgIT09IGZhbHNlIHx8IHByb3BzLmVkaXRhYmxlICE9PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbaCgndnhlLWlucHV0JywgewogICAgICAgICAgcmVmOiAndnhlLWlucHV0JyArIHByb3BlcnR5LAogICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICBwbGFjZWhvbGRlcjogJ+ivt+mAieaLqeaXtumXtCcsCiAgICAgICAgICAgIHR5cGU6ICdkYXRlJywKICAgICAgICAgICAgY2xlYXJhYmxlOiB0cnVlLAogICAgICAgICAgICB2YWx1ZTogZGF0YVtwcm9wZXJ0eV0KICAgICAgICAgIH0sIHByb3BzKSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiBpbnB1dCh2YWx1ZSkgewogICAgICAgICAgICAgIGZvcm1hdCA9IGZvcm1hdCB8fCAnWVlZWS1NTS1ERCBoaDptbTpzcyc7CiAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZSA/IG5ldyBEYXRlKHZhbHVlKS5mb3JtYXQoZm9ybWF0KSA6ICcnOwogICAgICAgICAgICAgICRmb3JtLiRwYXJlbnQuaXRlbUNoYW5nZSh7CiAgICAgICAgICAgICAgICAkZm9ybTogJGZvcm0sCiAgICAgICAgICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHksCiAgICAgICAgICAgICAgICBpdGVtVmFsdWU6IHZhbHVlLAogICAgICAgICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgICAgICAgIHJlbmRlck9wdHM6IHJlbmRlck9wdHMKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pXTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgICAiY2xhc3MiOiAidGMgZm4taW5saW5lIiwKICAgICAgICAgICJwcm9wcyI6IF9vYmplY3RTcHJlYWQoe30sIHByb3BzKQogICAgICAgIH0sIFsiICIsIGRhdGFbcHJvcGVydHldLCAiICJdKV07CiAgICAgIH0KICAgIH0KICB9LAogICR2eGVGb3JtVGV4dDogewogICAgcmVuZGVySXRlbTogZnVuY3Rpb24gcmVuZGVySXRlbShoLCBfcmVmMTUyLCBfcmVmMTUzKSB7CiAgICAgIHZhciBwcm9wcyA9IF9yZWYxNTIucHJvcHMsCiAgICAgICAgbmFtZSA9IF9yZWYxNTIubmFtZSwKICAgICAgICBvcHRpb25zID0gX3JlZjE1Mi5vcHRpb25zOwogICAgICB2YXIgJGZvcm0gPSBfcmVmMTUzLiRmb3JtLAogICAgICAgIHByb3BlcnR5ID0gX3JlZjE1My5wcm9wZXJ0eSwKICAgICAgICBkYXRhID0gX3JlZjE1My5kYXRhOwogICAgICBpZiAoJGZvcm0uJHBhcmVudC5lZGl0YWJsZSAhPT0gZmFsc2UgfHwgcHJvcHMuZWRpdGFibGUgIT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIFtoKCd2eGUtdGV4dGFyZWEnLCB7CiAgICAgICAgICByZWY6ICd2eGUtdGV4dGFyZWEnICsgcHJvcGVydHksCiAgICAgICAgICBwcm9wczogX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgIHZhbHVlOiBkYXRhW3Byb3BlcnR5XQogICAgICAgICAgfSwgcHJvcHMpLAogICAgICAgICAgb246IHsKICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7CiAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgICAgICAgICAkZm9ybS4kcGFyZW50Lml0ZW1DaGFuZ2UoewogICAgICAgICAgICAgICAgJGZvcm06ICRmb3JtLAogICAgICAgICAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5LAogICAgICAgICAgICAgICAgaXRlbVZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pXTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gW2goInNwYW4iLCB7CiAgICAgICAgICAiY2xhc3MiOiAidGwgZm4taW5saW5lIiwKICAgICAgICAgICJwcm9wcyI6IF9vYmplY3RTcHJlYWQoe30sIHByb3BzKQogICAgICAgIH0sIFsiICIsIGRhdGFbcHJvcGVydHldLCAiICJdKV07CiAgICAgIH0KICAgIH0KICB9LAogICR2eGVGb3JtSW50ZXJ2YXI6IHsKICAgIC8vIOi+k+WFpeahhgogICAgLy8gewogICAgLy8gICBmaWVsZDogJ3ByZXZmaWVsZCNwcmV2ZmllbGQnLAogICAgLy8gICB0aXRsZTogJ+WQjeensCcsCiAgICAvLyAgIHNwYW46IDI0LAogICAgLy8gICBpdGVtUmVuZGVyOiB7CiAgICAvLyAgICAgbmFtZTogJyR2eGVGb3JtSW50ZXJ2YXInLAogICAgLy8gICAgIHByb3BzOiB7CiAgICAvLyAgICAgICBkaXNhYmxlZDogdHJ1ZSwKICAgIC8vICAgICAgIHR5cGU6ICd0ZXh0JywKICAgIC8vICAgICAgIHBsYWNlaG9sZGVyOiAn6K+36L6T5YWl5ZCN56ewJwogICAgLy8gICAgIH0KICAgIC8vICAgfQogICAgLy8gfSwKICAgIHJlbmRlckl0ZW06IGZ1bmN0aW9uIHJlbmRlckl0ZW0oaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7CiAgICAgIHZhciBwcm9wcyA9IHJlbmRlck9wdHMucHJvcHM7CiAgICAgIHZhciBwcm9wZXJ0eSA9IHBhcmFtcy5wcm9wZXJ0eSwKICAgICAgICBkYXRhID0gcGFyYW1zLmRhdGEsCiAgICAgICAgJGZvcm0gPSBwYXJhbXMuJGZvcm07CiAgICAgIHByb3BzID0gcHJvcHMgfHwge307CiAgICAgIGlmICgkZm9ybS4kcGFyZW50LmVkaXRhYmxlICE9PSBmYWxzZSB8fCBwcm9wcy5lZGl0YWJsZSAhPT0gZmFsc2UpIHsKICAgICAgICByZXR1cm4gW2goJ0VkaXRJbnRlcnZhcicsIHsKICAgICAgICAgIHJlZjogJ3Z4ZS1pbnB1dCcgKyBwcm9wZXJ0eSwKICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgIHBhcmFtczogcGFyYW1zLAogICAgICAgICAgICBwcm9wczogcHJvcHMKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICBpbnB1dDogZnVuY3Rpb24gaW5wdXQodmFsdWUpIHsKICAgICAgICAgICAgICAkZm9ybS4kcGFyZW50Lml0ZW1DaGFuZ2UoewogICAgICAgICAgICAgICAgJGZvcm06ICRmb3JtLAogICAgICAgICAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5LAogICAgICAgICAgICAgICAgaXRlbVZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgewogICAgICAgICAgImNsYXNzIjogInRsIGZuLWlubGluZSIsCiAgICAgICAgICAicHJvcHMiOiBfb2JqZWN0U3ByZWFkKHt9LCBwcm9wcykKICAgICAgICB9LCBbIiAiLCBkYXRhW3Byb3BlcnR5XSwgIiAiXSldOwogICAgICB9CiAgICB9CiAgfSwKICAkdnhlRm9ybUlucHV0OiB7CiAgICAvLyDovpPlhaXmoYYKICAgIC8vIHJlbmRlckRlZmF1bHQoaCwgY2VsbFJlbmRlciwgeyByb3csIGNvbHVtbiB9LCBjb250ZXh0KSB7CiAgICAvLyAgIHJldHVybiBbCiAgICAvLyAgICAgPHNwYW4gY2xhc3M9InRleHQiPgogICAgLy8gICAgICAge3Jvd1tjb2x1bW4ucHJvcGVydHldID09PSAxID8gJ+eUt+eUtycgOiAn5aWz5aWzJ30KICAgIC8vICAgICA8L3NwYW4+CiAgICAvLyAgIF0KICAgIC8vIH0sCiAgICByZW5kZXJJdGVtOiBmdW5jdGlvbiByZW5kZXJJdGVtKGgsIHJlbmRlck9wdHMsIF9yZWYxNTQpIHsKICAgICAgdmFyICRmb3JtID0gX3JlZjE1NC4kZm9ybSwKICAgICAgICBwcm9wZXJ0eSA9IF9yZWYxNTQucHJvcGVydHksCiAgICAgICAgZGF0YSA9IF9yZWYxNTQuZGF0YTsKICAgICAgZGF0YVtwcm9wZXJ0eV0gPSAoZGF0YVtwcm9wZXJ0eV0gKyAnJykucmVwbGFjZSgvbnVsbHx1bmRlZmluZWQvaWcsICcnKTsKICAgICAgdmFyIHByb3BzID0gcmVuZGVyT3B0cy5wcm9wczsKICAgICAgcHJvcHMgPSBwcm9wcyB8fCB7fTsKICAgICAgaWYgKCRmb3JtLiRwYXJlbnQuZWRpdGFibGUgIT09IGZhbHNlIHx8IHByb3BzLmVkaXRhYmxlICE9PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbaCgndnhlLWlucHV0JywgewogICAgICAgICAgcmVmOiAndnhlLWlucHV0JyArIHByb3BlcnR5LAogICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICB2YWx1ZTogZGF0YVtwcm9wZXJ0eV0KICAgICAgICAgIH0sIHByb3BzKSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiBpbnB1dCh2YWx1ZSkgewogICAgICAgICAgICAgIGRhdGFbcHJvcGVydHldID0gdmFsdWU7CiAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogdmFsdWUsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgcmVuZGVyT3B0czogcmVuZGVyT3B0cwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSldOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbaCgic3BhbiIsIHsKICAgICAgICAgICJjbGFzcyI6ICJ0bCBmbi1pbmxpbmUiLAogICAgICAgICAgInByb3BzIjogX29iamVjdFNwcmVhZCh7fSwgcHJvcHMpCiAgICAgICAgfSwgWyIgIiwgZGF0YVtwcm9wZXJ0eV0sICIgIl0pXTsKICAgICAgfQogICAgfQogIH0sCiAgJHZ4ZUZvcm1TZWxlY3Q6IHsKICAgIC8vIOS4i+aLiemAieaLqQogICAgcmVuZGVySXRlbTogZnVuY3Rpb24gcmVuZGVySXRlbShoLCByZW5kZXJPcHRzLCBfcmVmMTU1KSB7CiAgICAgIHZhciAkZm9ybSA9IF9yZWYxNTUuJGZvcm0sCiAgICAgICAgcHJvcGVydHkgPSBfcmVmMTU1LnByb3BlcnR5LAogICAgICAgIGRhdGEgPSBfcmVmMTU1LmRhdGE7CiAgICAgIHZhciBwcm9wcyA9IHJlbmRlck9wdHMucHJvcHMsCiAgICAgICAgb3B0aW9ucyA9IHJlbmRlck9wdHMub3B0aW9uczsKICAgICAgcHJvcHMgPSBwcm9wcyB8fCB7fTsKICAgICAgaWYgKCRmb3JtLiRwYXJlbnQuZWRpdGFibGUgIT09IGZhbHNlIHx8IHByb3BzLmVkaXRhYmxlICE9PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbaCgndnhlLXNlbGVjdCcsIHsKICAgICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgcmVmOiAndnhlLXNlbGVjdC0nICsgcHJvcGVydHksCiAgICAgICAgICAgIHZhbHVlOiBkYXRhW3Byb3BlcnR5XQogICAgICAgICAgfSwgcHJvcHMpLAogICAgICAgICAgb246IHsKICAgICAgICAgICAgY2hhbmdlOiBmdW5jdGlvbiBjaGFuZ2UoX3JlZjE1NikgewogICAgICAgICAgICAgIHZhciB2YWx1ZSA9IF9yZWYxNTYudmFsdWU7CiAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgICAgICAgICAkZm9ybS4kcGFyZW50Lml0ZW1DaGFuZ2UoewogICAgICAgICAgICAgICAgJGZvcm06ICRmb3JtLAogICAgICAgICAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5LAogICAgICAgICAgICAgICAgaXRlbVZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBvcHRpb25zLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGgoJ3Z4ZS1vcHRpb24nLCB7CiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0udmFsdWUsCiAgICAgICAgICAgICAgbGFiZWw6IGl0ZW0ubGFiZWwKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSkpXTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBsZXQgdmFsID0gJycKICAgICAgICAvLyBvcHRpb25zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgLy8gICBpZiAoZGF0YVtwcm9wZXJ0eV0gPT09IGl0ZW0udmFsdWUpIHsKICAgICAgICAvLyAgICAgdmFsID0gaXRlbS5sYWJlbAogICAgICAgIC8vICAgfQogICAgICAgIC8vIH0pCiAgICAgICAgLy8gcmV0dXJuIFsKICAgICAgICAvLyAgIDxzcGFuIGNsYXNzPSJ0bCBmbi1pbmxpbmUiPiB7dmFsfSA8L3NwYW4+CiAgICAgICAgLy8gXQogICAgICAgIHByb3BzLm11bHRpcGxlID0gcHJvcHMubXVsdGlwbGUgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogcHJvcHMubXVsdGlwbGU7CiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwgW107CiAgICAgICAgaWYgKHByb3BzLm11bHRpcGxlKSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBbXTsKICAgICAgICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgaWYgKGRhdGFbcHJvcGVydHldLmluZGV4T2YoaXRlbS52YWx1ZSkgPj0gMCkgewogICAgICAgICAgICAgIHZhbHVlLnB1c2goaXRlbS5sYWJlbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgZGF0YVtwcm9wZXJ0eSArICdfc2VsZWN0X3NvcnQnXSA9IHZhbHVlLmpvaW4oJywnKTsKICAgICAgICAgIHJldHVybiBbaCgic3BhbiIsIFtkYXRhW3Byb3BlcnR5ICsgJ19zZWxlY3Rfc29ydCddXSldOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgYXJyVmFsdWUgPSBvcHRpb25zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0udmFsdWUgPT09IGRhdGFbcHJvcGVydHldOwogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgX3ZhbHVlMiA9IGFyclZhbHVlWzBdID8gYXJyVmFsdWVbMF0ubGFiZWwgOiAnJzsKICAgICAgICAgIHJldHVybiBbaCgic3BhbiIsIFtfdmFsdWUyXSldOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgJHZ4ZUZvcm1SYWRpbzogewogICAgcmVuZGVySXRlbTogZnVuY3Rpb24gcmVuZGVySXRlbShoLCByZW5kZXJPcHRzLCBfcmVmMTU3KSB7CiAgICAgIHZhciAkZm9ybSA9IF9yZWYxNTcuJGZvcm0sCiAgICAgICAgcHJvcGVydHkgPSBfcmVmMTU3LnByb3BlcnR5LAogICAgICAgIGRhdGEgPSBfcmVmMTU3LmRhdGE7CiAgICAgIHZhciBwcm9wcyA9IHJlbmRlck9wdHMucHJvcHMsCiAgICAgICAgcHJvcHNDID0gcmVuZGVyT3B0cy5wcm9wc0MsCiAgICAgICAgb3B0aW9ucyA9IHJlbmRlck9wdHMub3B0aW9uczsKICAgICAgaWYgKCRmb3JtLiRwYXJlbnQuZWRpdGFibGUgIT09IGZhbHNlIHx8IHByb3BzLmVkaXRhYmxlICE9PSBmYWxzZSkgewogICAgICAgIHJldHVybiBbaCgndnhlLXJhZGlvLWdyb3VwJywgewogICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICB2YWx1ZTogZGF0YVtwcm9wZXJ0eV0KICAgICAgICAgIH0sIHByb3BzKSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIGNoYW5nZTogZnVuY3Rpb24gY2hhbmdlKF9yZWYxNTgpIHsKICAgICAgICAgICAgICB2YXIgJGV2ZW50ID0gX3JlZjE1OC4kZXZlbnQsCiAgICAgICAgICAgICAgICBsYWJlbCA9IF9yZWYxNTgubGFiZWw7CiAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSBsYWJlbDsKICAgICAgICAgICAgICAkZm9ybS4kcGFyZW50Lml0ZW1DaGFuZ2UoewogICAgICAgICAgICAgICAgJGZvcm06ICRmb3JtLAogICAgICAgICAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5LAogICAgICAgICAgICAgICAgaXRlbVZhbHVlOiBsYWJlbCwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgICAgICAgICByZW5kZXJPcHRzOiByZW5kZXJPcHRzCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBvcHRpb25zLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGgoJ3Z4ZS1yYWRpbycsIHsKICAgICAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgIGxhYmVsOiBpdGVtLnZhbHVlCiAgICAgICAgICAgIH0sIHByb3BzQykKICAgICAgICAgIH0sIGl0ZW0ubGFiZWwpOwogICAgICAgIH0pKV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHZhbHVlID0gJyc7CiAgICAgICAgb3B0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgICAgaWYgKGRhdGFbcHJvcGVydHldID09PSBpdGVtLnZhbHVlKSB7CiAgICAgICAgICAgIHZhbHVlID0gaXRlbS5sYWJlbDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gW2goInNwYW4iLCBbdmFsdWVdKV07CiAgICAgIH0KICAgIH0KICB9LAogICR2eGVGb3JtQ2hlY2tib3g6IHsKICAgIHJlbmRlckl0ZW06IGZ1bmN0aW9uIHJlbmRlckl0ZW0oaCwgcmVuZGVyT3B0cywgX3JlZjE1OSkgewogICAgICB2YXIgJGZvcm0gPSBfcmVmMTU5LiRmb3JtLAogICAgICAgIHByb3BlcnR5ID0gX3JlZjE1OS5wcm9wZXJ0eSwKICAgICAgICBkYXRhID0gX3JlZjE1OS5kYXRhOwogICAgICB2YXIgcHJvcHMgPSByZW5kZXJPcHRzLnByb3BzLAogICAgICAgIHByb3BzQyA9IHJlbmRlck9wdHMucHJvcHNDLAogICAgICAgIG9wdGlvbnMgPSByZW5kZXJPcHRzLm9wdGlvbnM7CiAgICAgIGRhdGFbcHJvcGVydHldID0gQXJyYXkuaXNBcnJheShkYXRhW3Byb3BlcnR5XSkgPyBkYXRhW3Byb3BlcnR5XSA6IFtdOwogICAgICBpZiAoJGZvcm0uJHBhcmVudC5lZGl0YWJsZSAhPT0gZmFsc2UgfHwgcHJvcHMuZWRpdGFibGUgIT09IGZhbHNlKSB7CiAgICAgICAgcmV0dXJuIFtoKCd2eGUtY2hlY2tib3gtZ3JvdXAnLCB7CiAgICAgICAgICBwcm9wczogX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgIHZhbHVlOiBkYXRhW3Byb3BlcnR5XQogICAgICAgICAgfSwgcHJvcHMpLAogICAgICAgICAgb246IHsKICAgICAgICAgICAgY2hhbmdlOiBmdW5jdGlvbiBjaGFuZ2UoX3JlZjE2MCkgewogICAgICAgICAgICAgIHZhciAkZXZlbnQgPSBfcmVmMTYwLiRldmVudCwKICAgICAgICAgICAgICAgIGNoZWNrZWQgPSBfcmVmMTYwLmNoZWNrZWQsCiAgICAgICAgICAgICAgICBjaGVja2xpc3QgPSBfcmVmMTYwLmNoZWNrbGlzdCwKICAgICAgICAgICAgICAgIGxhYmVsID0gX3JlZjE2MC5sYWJlbDsKICAgICAgICAgICAgICBkYXRhW3Byb3BlcnR5XSA9IGNoZWNrbGlzdDsKICAgICAgICAgICAgICAkZm9ybS4kcGFyZW50Lml0ZW1DaGFuZ2UoewogICAgICAgICAgICAgICAgJGZvcm06ICRmb3JtLAogICAgICAgICAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5LAogICAgICAgICAgICAgICAgaXRlbVZhbHVlOiBjaGVja2xpc3QsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgcmVuZGVyT3B0czogcmVuZGVyT3B0cwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgb3B0aW9ucy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBoKCd2eGUtY2hlY2tib3gnLCB7CiAgICAgICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgICBsYWJlbDogaXRlbS52YWx1ZQogICAgICAgICAgICB9LCBwcm9wc0MpCiAgICAgICAgICB9LCBpdGVtLmxhYmVsKTsKICAgICAgICB9KSldOwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGFbcHJvcGVydHldID0gQXJyYXkuaXNBcnJheShkYXRhW3Byb3BlcnR5XSkgPyBkYXRhW3Byb3BlcnR5XSA6IFtdOwogICAgICAgIHZhciB2YWx1ZSA9IFtdOwogICAgICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgIGlmIChkYXRhW3Byb3BlcnR5XS5pbmRleE9mKGl0ZW0udmFsdWUpID49IDApIHsKICAgICAgICAgICAgdmFsdWUucHVzaChpdGVtLmxhYmVsKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBkYXRhW3Byb3BlcnR5ICsgJ19jaGVja2JveF9zb3J0J10gPSB2YWx1ZS5qb2luKCcsJyk7CiAgICAgICAgcmV0dXJuIFtoKCJzcGFuIiwgW2RhdGFbcHJvcGVydHkgKyAnX2NoZWNrYm94X3NvcnQnXV0pXTsKICAgICAgfQogICAgfQogIH0sCiAgJGZvcm1UcmVlSW5wdXQ6IHsKICAgIC8vIGZvcm3ooajljZV0cmVlaW5wdXTljZXpgIkKICAgIHJlbmRlckl0ZW06IGZ1bmN0aW9uIHJlbmRlckl0ZW0oaCwgX3JlZjE2MSwgX3JlZjE2MikgewogICAgICB2YXIgcHJvcHMgPSBfcmVmMTYxLnByb3BzLAogICAgICAgIG9wdGlvbnMgPSBfcmVmMTYxLm9wdGlvbnM7CiAgICAgIHZhciAkZm9ybSA9IF9yZWYxNjIuJGZvcm0sCiAgICAgICAgcHJvcGVydHkgPSBfcmVmMTYyLnByb3BlcnR5LAogICAgICAgIGRhdGEgPSBfcmVmMTYyLmRhdGE7CiAgICAgIHByb3BzID0gcHJvcHMgfHwge307CiAgICAgIGlmICgkZm9ybS4kcGFyZW50LmVkaXRhYmxlICE9PSBmYWxzZSB8fCBwcm9wcy5lZGl0YWJsZSAhPT0gZmFsc2UpIHsKICAgICAgICBwcm9wc1sncHJlZml4J10gPSAiIi5jb25jYXQocHJvcGVydHkpOwogICAgICAgIHByb3BzWydvcGVuUXVlcnlTZWFjaCddID0gdHJ1ZTsKICAgICAgICB2YXIgdGltZVN0YW1wID0gK25ldyBEYXRlKCk7CiAgICAgICAgLy8g5aaC5p6c5paw5bu65rKh5pyJ5Yid5aeL5YC877yM6LWL5Yid5aeL5YC8CiAgICAgICAgZGF0YVtwcm9wZXJ0eSArICdpZCddID0gZGF0YVtwcm9wZXJ0eSArICdpZCddIHx8ICdpbml0SWQnICsgdGltZVN0YW1wOwogICAgICAgIGRhdGFbcHJvcGVydHkgKyAnY29kZSddID0gZGF0YVtwcm9wZXJ0eSArICdjb2RlJ10gfHwgJyAnOwogICAgICAgIGRhdGFbcHJvcGVydHkgKyAnbmFtZSddID0gZGF0YVtwcm9wZXJ0eSArICduYW1lJ10gfHwgJyAnOwogICAgICAgIGRhdGFbcHJvcGVydHldID0gZGF0YVtwcm9wZXJ0eSArICdpZCddICsgJyMjJyArIGRhdGFbcHJvcGVydHkgKyAnY29kZSddICsgJyMjJyArIGRhdGFbcHJvcGVydHkgKyAnbmFtZSddOwogICAgICAgIHJldHVybiBbaCgnQnNUcmVlSW5wdXQnLCB7CiAgICAgICAgICByZWY6ICdCc1RyZWVJbnB1dCcgKyBwcm9wZXJ0eSwKICAgICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgICAgZGF0YXM6IG9wdGlvbnMgfHwgW10sCiAgICAgICAgICAgIHZhbHVlOiBkYXRhW3Byb3BlcnR5XQogICAgICAgICAgfSwgcHJvcHMpLAogICAgICAgICAgb246IHsKICAgICAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uIGlucHV0KHZhbHVlKSB7CiAgICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgICAgICAgICB2YXIgdmFsdWVBcnIgPSBkYXRhW3Byb3BlcnR5XS5zcGxpdCgnIyMnKTsKICAgICAgICAgICAgICBkYXRhW3Byb3BlcnR5ICsgJ2lkJ10gPSB2YWx1ZUFyclswXTsKICAgICAgICAgICAgICBkYXRhW3Byb3BlcnR5ICsgJ2NvZGUnXSA9IHZhbHVlQXJyWzFdOwogICAgICAgICAgICAgIGRhdGFbcHJvcGVydHkgKyAnbmFtZSddID0gdmFsdWVBcnJbMl07CiAgICAgICAgICAgICAgJGZvcm0uJHBhcmVudC5pdGVtQ2hhbmdlKHsKICAgICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSwKICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZTogdmFsdWUsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgcmVuZGVyT3B0czogewogICAgICAgICAgICAgICAgICBwcm9wczogcHJvcHMsCiAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkYXRhW3Byb3BlcnR5ICsgJ190cmVlX3NvcnQnXSA9IHByb3BzLmZvcm1hdHRlciA9PT0gJyNjb2RlLSNuYW1lJyA/IGRhdGFbcHJvcGVydHkgKyAnY29kZSddICsgJy0nICsgZGF0YVtwcm9wZXJ0eSArICduYW1lJ10gOiBkYXRhW3Byb3BlcnR5ICsgJ25hbWUnXTsKICAgICAgICByZXR1cm4gW2goInNwYW4iLCBbZGF0YVtwcm9wZXJ0eSArICdfdHJlZV9zb3J0J11dKV07CiAgICAgIH0KICAgIH0KICB9LAogICRmb3JtVHJlZUlucHV0Q2hlY2s6IHsKICAgIC8vIGZvcm3ooajljZV0cmVlaW5wdXQg5aSa6YCJCiAgICByZW5kZXJJdGVtOiBmdW5jdGlvbiByZW5kZXJJdGVtKGgsIF9yZWYxNjMsIF9yZWYxNjQpIHsKICAgICAgdmFyIHByb3BzID0gX3JlZjE2My5wcm9wcywKICAgICAgICBvcHRpb25zID0gX3JlZjE2My5vcHRpb25zOwogICAgICB2YXIgJGZvcm0gPSBfcmVmMTY0LiRmb3JtLAogICAgICAgIHByb3BlcnR5ID0gX3JlZjE2NC5wcm9wZXJ0eSwKICAgICAgICBkYXRhID0gX3JlZjE2NC5kYXRhOwogICAgICBwcm9wc1sncHJlZml4J10gPSAiIi5jb25jYXQocHJvcGVydHkpOwogICAgICBwcm9wc1snb3BlblF1ZXJ5U2VhY2gnXSA9IHRydWU7CiAgICAgIHByb3BzWydzaG93Y2hlY2tib3gnXSA9IHRydWU7CiAgICAgIHZhciB0aW1lU3RhbXAgPSArbmV3IERhdGUoKTsKICAgICAgLy8g5aaC5p6c5paw5bu65rKh5pyJ5Yid5aeL5YC877yM6LWL5Yid5aeL5YC8CiAgICAgIGRhdGFbcHJvcGVydHkgKyAnaWQnXSA9IGRhdGFbcHJvcGVydHkgKyAnaWQnXSB8fCAnaW5pdElkJyArIHRpbWVTdGFtcDsKICAgICAgZGF0YVtwcm9wZXJ0eSArICdjb2RlJ10gPSBkYXRhW3Byb3BlcnR5ICsgJ2NvZGUnXSB8fCAnICc7CiAgICAgIGRhdGFbcHJvcGVydHkgKyAnbmFtZSddID0gZGF0YVtwcm9wZXJ0eSArICduYW1lJ10gfHwgJyAnOwogICAgICBpZiAoIWRhdGFbcHJvcGVydHkgKyAnbmFtZSddLnRyaW0oKSkgewogICAgICAgIGRhdGFbcHJvcGVydHldID0gZGF0YVtwcm9wZXJ0eSArICdpZCddICsgJyMjJyArIGRhdGFbcHJvcGVydHkgKyAnY29kZSddICsgJyMjJyArIGRhdGFbcHJvcGVydHkgKyAnbmFtZSddOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBpZHMgPSBkYXRhW3Byb3BlcnR5ICsgJ2lkJ10gJiYgZGF0YVtwcm9wZXJ0eSArICdpZCddLnNwbGl0KCcsJyk7CiAgICAgICAgdmFyIGNvZGVzID0gZGF0YVtwcm9wZXJ0eSArICdjb2RlJ10gJiYgZGF0YVtwcm9wZXJ0eSArICdjb2RlJ10uc3BsaXQoJywnKTsKICAgICAgICB2YXIgbmFtZXMgPSBkYXRhW3Byb3BlcnR5ICsgJ25hbWUnXSAmJiBkYXRhW3Byb3BlcnR5ICsgJ25hbWUnXS5zcGxpdCgnLCcpOwogICAgICAgIHZhciBsaW5lID0gJyc7CiAgICAgICAgaWYgKGlkcy5sZW5ndGggPT09IG5hbWVzLmxlbmd0aCkgewogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGlkcy5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICBsaW5lICs9ICIiLmNvbmNhdChpZHNbaV0sICIjIyIpLmNvbmNhdChjb2Rlc1tpXSwgIiMjIikuY29uY2F0KG5hbWVzW2ldKTsKICAgICAgICAgICAgaWYgKGkgPCBsZW4gLSAxKSB7CiAgICAgICAgICAgICAgbGluZSArPSAnLCc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ2Zyb206IGlkLG5hbWXmlbDph4/ljLnphY3kuI3kuIonKTsKICAgICAgICB9CiAgICAgICAgZGF0YVtwcm9wZXJ0eV0gPSBsaW5lOwogICAgICB9CiAgICAgIHJldHVybiBbaCgnQnNUcmVlSW5wdXQnLCB7CiAgICAgICAgcmVmOiAnQnNUcmVlSW5wdXQnICsgcHJvcGVydHksCiAgICAgICAgcHJvcHM6IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgZGF0YXM6IG9wdGlvbnMgfHwgW10sCiAgICAgICAgICB2YWx1ZTogZGF0YVtwcm9wZXJ0eV0KICAgICAgICB9LCBwcm9wcyksCiAgICAgICAgb246IHsKICAgICAgICAgIGlucHV0OiBmdW5jdGlvbiBpbnB1dCh2YWx1ZSkgewogICAgICAgICAgICBkYXRhW3Byb3BlcnR5XSA9IHZhbHVlOwogICAgICAgICAgICB2YXIgbm9kZXMgPSBkYXRhW3Byb3BlcnR5XS5zcGxpdCgnLCcpOwogICAgICAgICAgICB2YXIgaWQgPSAnJzsKICAgICAgICAgICAgdmFyIGNvZGUgPSAnJzsKICAgICAgICAgICAgdmFyIG5hbWUgPSAnJzsKICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfbGVuID0gbm9kZXMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHsKICAgICAgICAgICAgICB2YXIgaXRlbSA9IG5vZGVzW19pXTsKICAgICAgICAgICAgICBpZiAoIWl0ZW0pIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZCArPSBpdGVtLnNwbGl0KCcjIycpWzBdICsgJywnOwogICAgICAgICAgICAgIGNvZGUgKz0gaXRlbS5zcGxpdCgnIyMnKVsxXSArICcsJzsKICAgICAgICAgICAgICBuYW1lICs9IGl0ZW0uc3BsaXQoJyMjJylbMl0gKyAnLCc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWQgPSBpZC5zdWJzdHIoMCwgaWQubGVuZ3RoIC0gMSk7CiAgICAgICAgICAgIGNvZGUgPSBjb2RlLnN1YnN0cigwLCBjb2RlLmxlbmd0aCAtIDEpOwogICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHIoMCwgbmFtZS5sZW5ndGggLSAxKTsKICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eSArICdpZCddID0gaWQ7CiAgICAgICAgICAgIGRhdGFbcHJvcGVydHkgKyAnY29kZSddID0gY29kZTsKICAgICAgICAgICAgZGF0YVtwcm9wZXJ0eSArICduYW1lJ10gPSBuYW1lOwogICAgICAgICAgICAkZm9ybS4kcGFyZW50Lml0ZW1DaGFuZ2UoewogICAgICAgICAgICAgICRmb3JtOiAkZm9ybSwKICAgICAgICAgICAgICBwcm9wZXJ0eTogcHJvcGVydHksCiAgICAgICAgICAgICAgaXRlbVZhbHVlOiB2YWx1ZSwKICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgIHJlbmRlck9wdHM6IHsKICAgICAgICAgICAgICAgIHByb3BzOiBwcm9wcywKICAgICAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnMKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSldOwogICAgfQogIH0KfTsKLy8g5YWo5bGA5o+Q5L6b6L+H5ruk5ZmoIDTnu4TvvIzliIbliKvkuLrmlbDlgLzlnovmuLLmn5PlmajvvIzliIbnu4TlnovmlbDmja7muLLmn5PlmajvvIzmlofmnKzlnovov4fmu6TmuLLmn5PlmajvvIzkuIvmi4npgInmi6nlnovmlbDmja7ov4fmu6TlmajvvIjor4TmtYvlkoxkZXZlbG9waW5n77yJCnZhciB0YWJsZWZpbHRlclJlbmRlcmVycyA9IHsKICBGaWx0ZXJDb21wbGV4OiB7CiAgICAvLyDkuI3mmL7npLrlupXpg6jmjInpkq7vvIzkvb/nlKjoh6rlrprkuYnnmoTmjInpkq4KICAgIGlzRm9vdGVyOiBmYWxzZSwKICAgIC8vIOetm+mAieaooeadvwogICAgcmVuZGVyRmlsdGVyOiBmdW5jdGlvbiByZW5kZXJGaWx0ZXIoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7CiAgICAgIHJldHVybiBbaCgiRmlsdGVyQ29tcGxleCIsIHsKICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAicGFyYW1zIjogcGFyYW1zCiAgICAgICAgfQogICAgICB9KV07CiAgICB9LAogICAgLy8g6YeN572u5pWw5o2u5pa55rOVCiAgICBmaWx0ZXJSZXNldE1ldGhvZDogZnVuY3Rpb24gZmlsdGVyUmVzZXRNZXRob2QoX3JlZjE2NSkgewogICAgICB2YXIgb3B0aW9ucyA9IF9yZWYxNjUub3B0aW9ucywKICAgICAgICBjb2x1bW4gPSBfcmVmMTY1LmNvbHVtbjsKICAgICAgdmFyIF9jb2x1bW4kb3duMiA9IGNvbHVtbi5vd24sCiAgICAgICAgZWRpdFJlbmRlciA9IF9jb2x1bW4kb3duMi5lZGl0UmVuZGVyLAogICAgICAgIGNlbGxSZW5kZXIgPSBfY29sdW1uJG93bjIuY2VsbFJlbmRlcjsKICAgICAgdmFyIHJlbmRlciA9IGVkaXRSZW5kZXIgfHwgY2VsbFJlbmRlcjsKICAgICAgaWYgKHJlbmRlciAmJiBmaWx0ZXJUeXBlTWFwW3JlbmRlci5uYW1lXSkgewogICAgICAgIG9wdGlvbnNbMF0uZGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIGZpbHRlclR5cGVNYXBbcmVuZGVyLm5hbWVdLmZpbHRlcnMpOwogICAgICB9IGVsc2UgewogICAgICAgIG9wdGlvbnNbMF0uZGF0YSA9IHsKICAgICAgICAgIHR5cGU6ICdoYXMnLAogICAgICAgICAgaXNDYXNlOiBmYWxzZSwKICAgICAgICAgIHZhbHVlOiAnJywKICAgICAgICAgIGRhdGFUeXBlOiAnZmxvYXQnLAogICAgICAgICAgdmFsdWVndDogJycKICAgICAgICB9OwogICAgICB9CiAgICAgIC8vIG9wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4gewogICAgICAvLyAgIG9wdGlvbi5kYXRhID0geyB0eXBlOiAnaGFzJywgaXNDYXNlOiBmYWxzZSwgdmFsdWU6ICcnLCBkYXRhVHlwZTogJ2Zsb2F0JywgdmFsdWVndDogJycgfQogICAgICAvLyB9KQogICAgfSwKICAgIC8vIOetm+mAieaVsOaNruaWueazlQogICAgZmlsdGVyTWV0aG9kOiBmdW5jdGlvbiBmaWx0ZXJNZXRob2QoX3JlZjE2NikgewogICAgICB2YXIgb3B0aW9uID0gX3JlZjE2Ni5vcHRpb24sCiAgICAgICAgcm93ID0gX3JlZjE2Ni5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjE2Ni5jb2x1bW47CiAgICAgIHZhciBjZWxsVmFsdWUgPSByb3dbY29sdW1uLnByb3BlcnR5XTsKICAgICAgdmFyIF9vcHRpb24kZGF0YTIgPSBvcHRpb24uZGF0YSwKICAgICAgICB0eXBlID0gX29wdGlvbiRkYXRhMi50eXBlLAogICAgICAgIGlzQ2FzZSA9IF9vcHRpb24kZGF0YTIuaXNDYXNlLAogICAgICAgIHZhbHVlID0gX29wdGlvbiRkYXRhMi52YWx1ZSwKICAgICAgICB2YWx1ZWd0ID0gX29wdGlvbiRkYXRhMi52YWx1ZWd0LAogICAgICAgIGRhdGFUeXBlID0gX29wdGlvbiRkYXRhMi5kYXRhVHlwZSwKICAgICAgICBmb3JtYXQgPSBfb3B0aW9uJGRhdGEyLmZvcm1hdDsKICAgICAgaWYgKGNlbGxWYWx1ZSkgewogICAgICAgIGlmIChpc0Nhc2UpIHsKICAgICAgICAgIGNlbGxWYWx1ZSA9IGNlbGxWYWx1ZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoWydmbG9hdCcsICdudW1iZXInLCAnaW50ZWdlciddLmluZGV4T2YoZGF0YVR5cGUpID49IDApIHsKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgIGNhc2UgJ2hhcyc6CiAgICAgICAgICAgIHJldHVybiBTdHJpbmcoY2VsbFZhbHVlKS5pbmRleE9mKHZhbHVlKSA+IC0xOwogICAgICAgICAgY2FzZSAnZXEnOgogICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi8KICAgICAgICAgICAgaWYgKGlzQ2FzZSkgewogICAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWUgPT0gdmFsdWU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoY2VsbFZhbHVlKSA9PSBwYXJzZUZsb2F0KHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgY2FzZSAnZ3QnOgogICAgICAgICAgICByZXR1cm4gTnVtYmVyKGNlbGxWYWx1ZSkgPiBOdW1iZXIodmFsdWUpOwogICAgICAgICAgY2FzZSAnbHQnOgogICAgICAgICAgICByZXR1cm4gTnVtYmVyKHZhbHVlKSA+IE51bWJlcihjZWxsVmFsdWUpOwogICAgICAgICAgY2FzZSAnbHRndCc6CiAgICAgICAgICAgIHJldHVybiBOdW1iZXIoY2VsbFZhbHVlKSA+PSBOdW1iZXIodmFsdWUpICYmIE51bWJlcihjZWxsVmFsdWUpIDw9IE51bWJlcih2YWx1ZWd0KTsKICAgICAgICAgIGNhc2UgJ251bGwnOgogICAgICAgICAgICByZXR1cm4gKGNlbGxWYWx1ZSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZHxcaysvaWcsICcnKSA9PT0gJyc7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKFsnZGF0ZScsICd0aW1lJywgJ2RhdGV0aW1lJywgJ3dlZWsnLCAnbW9udGgnLCAneWVhciddLmluZGV4T2YoZGF0YVR5cGUpID49IDApIHsKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgIGNhc2UgJ2hhcyc6CiAgICAgICAgICAgIHJldHVybiBTdHJpbmcoY2VsbFZhbHVlKS5pbmRleE9mKHZhbHVlKSA+IC0xOwogICAgICAgICAgY2FzZSAnZXEnOgogICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi8KICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHZhbHVlKS5mb3JtYXQoZm9ybWF0KSA9PT0gY2VsbFZhbHVlOwogICAgICAgICAgY2FzZSAnZ3QnOgogICAgICAgICAgICByZXR1cm4gY2VsbFZhbHVlID4gbmV3IERhdGUodmFsdWUpLmZvcm1hdChmb3JtYXQpOwogICAgICAgICAgY2FzZSAnbHQnOgogICAgICAgICAgICByZXR1cm4gbmV3IERhdGUodmFsdWUpLmZvcm1hdChmb3JtYXQpID4gY2VsbFZhbHVlOwogICAgICAgICAgY2FzZSAnbHRndCc6CiAgICAgICAgICAgIHJldHVybiBjZWxsVmFsdWUgPj0gbmV3IERhdGUodmFsdWUpLmZvcm1hdChmb3JtYXQpICYmIGNlbGxWYWx1ZSA8PSBuZXcgRGF0ZSh2YWx1ZWd0KS5mb3JtYXQoZm9ybWF0KTsKICAgICAgICAgIGNhc2UgJ251bGwnOgogICAgICAgICAgICByZXR1cm4gKGNlbGxWYWx1ZSArICcnKS5yZXBsYWNlKC9udWxsfHVuZGVmaW5lZHxcaysvaWcsICcnKSA9PT0gJyc7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sCiAgRmlsdGVyQ29udGVudDogewogICAgLy8g5LiN5pi+56S65bqV6YOo5oyJ6ZKu77yM5L2/55So6Ieq5a6a5LmJ55qE5oyJ6ZKuCiAgICBpc0Zvb3RlcjogZmFsc2UsCiAgICAvLyDnrZvpgInmqKHmnb8KICAgIHJlbmRlckZpbHRlcjogZnVuY3Rpb24gcmVuZGVyRmlsdGVyKGgsIHJlbmRlck9wdHMsIHBhcmFtcykgewogICAgICByZXR1cm4gW2goImZpbHRlci1jb250ZW50IiwgewogICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICJwYXJhbXMiOiBwYXJhbXMKICAgICAgICB9CiAgICAgIH0pXTsKICAgIH0sCiAgICAvLyDph43nva7mlbDmja7mlrnms5UKICAgIGZpbHRlclJlc2V0TWV0aG9kOiBmdW5jdGlvbiBmaWx0ZXJSZXNldE1ldGhvZChfcmVmMTY3KSB7CiAgICAgIHZhciBvcHRpb25zID0gX3JlZjE2Ny5vcHRpb25zOwogICAgICBvcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKG9wdGlvbikgewogICAgICAgIG9wdGlvbi5kYXRhID0gewogICAgICAgICAgdmFsczogW10sCiAgICAgICAgICBzVmFsOiAnJwogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOetm+mAieaVsOaNruaWueazlQogICAgZmlsdGVyTWV0aG9kOiBmdW5jdGlvbiBmaWx0ZXJNZXRob2QoX3JlZjE2OCkgewogICAgICB2YXIgb3B0aW9uID0gX3JlZjE2OC5vcHRpb24sCiAgICAgICAgcm93ID0gX3JlZjE2OC5yb3csCiAgICAgICAgY29sdW1uID0gX3JlZjE2OC5jb2x1bW47CiAgICAgIHZhciB2YWxzID0gb3B0aW9uLmRhdGEudmFsczsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFscykgJiYgdmFscy5sZW5ndGgpIHsKICAgICAgICB2YXIgY2VsbFZhbHVlID0gcm93W2NvbHVtbi5wcm9wZXJ0eV07CiAgICAgICAgaWYgKFN0cmluZyhjZWxsVmFsdWUpLmluZGV4T2YoJyMjJykgPiAwKSB7CiAgICAgICAgICB2YXIgdmFsdWUgPSBjZWxsVmFsdWUuc3BsaXQoJyMjJyk7CiAgICAgICAgICB2YWx1ZS5zaGlmdCgpOwogICAgICAgICAgcmV0dXJuIGNlbGxWYWx1ZSA9PSB2YWx1ZS5qb2luKCctJyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB2YWxzLmluY2x1ZGVzKGNlbGxWYWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIC8vIGNvbnNvbGUubG9nKG9wdGlvbiwgcm93LCBjb2x1bW4sIHJvd1tjb2x1bW4ucHJvcGVydHldKQogICAgICAvLyBjb25zdCB7IHZhbHMgfSA9IG9wdGlvbi5kYXRhCiAgICAgIC8vIGNvbnN0IGNlbGxWYWx1ZSA9IHJvd1tjb2x1bW4ucHJvcGVydHldCiAgICAgIC8vIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqLwogICAgICAvLyByZXR1cm4gdmFscy5zb21lKHZhbCA9PiB7CiAgICAgIC8vICAgaWYgKGNlbGxWYWx1ZS5pbmRleE9mKCcjIycpID4gMCkgewogICAgICAvLyAgICAgbGV0IHZhbHVlID0gY2VsbFZhbHVlLnNwbGl0KCcjIycpCiAgICAgIC8vICAgICB2YWx1ZS5zaGlmdCgpCiAgICAgIC8vICAgICByZXR1cm4gdmFsID09IHZhbHVlLmpvaW4oJy0nKQogICAgICAvLyAgIH0gZWxzZSB7CiAgICAgIC8vICAgICBjb25zb2xlLmxvZyhvcHRpb24sIHJvdywgY29sdW1uLCB2YWwgPT0gY2VsbFZhbHVlKQogICAgICAvLyAgICAgcmV0dXJuIHZhbCA9PSBjZWxsVmFsdWUKICAgICAgLy8gICB9CiAgICAgIC8vICAgLy8gIHJldHVybiB2YWwgPT0gY2VsbFZhbHVlCiAgICAgIC8vIH0pCiAgICB9CiAgfSwKCiAgRmlsdGVySW5wdXQ6IHsKICAgIGlzRm9vdGVyOiBmYWxzZSwKICAgIC8vIOetm+mAieaooeadvwogICAgLy8gZmlsdGVyczogW3sgZGF0YTogJycgfV0sCiAgICAvLyBmaWx0ZXJSZW5kZXI6IHsgbmFtZTogJ0ZpbHRlcklucHV0JyB9LAogICAgcmVuZGVyRmlsdGVyOiBmdW5jdGlvbiByZW5kZXJGaWx0ZXIoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7CiAgICAgIHJldHVybiBbaCgiZmlsdGVyLWlucHV0IiwgewogICAgICAgICJhdHRycyI6IHsKICAgICAgICAgICJwYXJhbXMiOiBwYXJhbXMKICAgICAgICB9CiAgICAgIH0pXTsKICAgIH0sCiAgICAvLyDnrZvpgInmlrnms5UKICAgIGZpbHRlck1ldGhvZDogZnVuY3Rpb24gZmlsdGVyTWV0aG9kKF9yZWYxNjkpIHsKICAgICAgdmFyIG9wdGlvbiA9IF9yZWYxNjkub3B0aW9uLAogICAgICAgIHJvdyA9IF9yZWYxNjkucm93LAogICAgICAgIGNvbHVtbiA9IF9yZWYxNjkuY29sdW1uOwogICAgICB2YXIgZGF0YSA9IG9wdGlvbi5kYXRhOwogICAgICAvLyDluIPlsJTlgLzmkJzntKLov4fmu6Tml7blsIbmmK/lkozlkKbovazkuLox5ZKMMgogICAgICB2YXIgdmFsTWFwID0gewogICAgICAgICfmmK8nOiAnMScsCiAgICAgICAgJ+WQpic6ICcyJwogICAgICB9OwogICAgICBkYXRhID0gdmFsTWFwW2RhdGFdIHx8IGRhdGE7CiAgICAgIHZhciBjZWxsVmFsdWUgPSByb3dbY29sdW1uLnByb3BlcnR5XTsKICAgICAgdmFyIGZpZWxkU3RyID0gY29sdW1uLnByb3BlcnR5LnJlcGxhY2UoL05hbWUvLCAnJyk7CiAgICAgIC8vIOWkhOeQhuWIl+ihqCBjb2RlLW5hbWUg5b2i5byP5pi+56S66L+H5rukCiAgICAgIGlmIChjb2x1bW4uY2VsbFJlbmRlciAmJiBjb2x1bW4uY2VsbFJlbmRlci5uYW1lLmluY2x1ZGVzKCdfJCcpKSB7CiAgICAgICAgdmFyIGZpZWxkcyA9IGNvbHVtbi5jZWxsUmVuZGVyLm5hbWUuc3BsaXQoJ18kJyk7CiAgICAgICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgICAgICBjZWxsVmFsdWUgKz0gcm93W2ZpZWxkLnJlcGxhY2UoL1wkL2csICcnKV07CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAocm93WyIiLmNvbmNhdChmaWVsZFN0ciwgIkNvZGUiKV0pIHsKICAgICAgICBjZWxsVmFsdWUgKz0gcm93WyIiLmNvbmNhdChmaWVsZFN0ciwgIkNvZGUiKV07CiAgICAgIH0KICAgICAgcmV0dXJuIFN0cmluZyhjZWxsVmFsdWUpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihkYXRhLnRvTG93ZXJDYXNlKCkpID4gLTE7CiAgICB9CiAgfSwKICBGaWx0ZXJTZWxlY3Q6IHsKICAgIGlzRm9vdGVyOiBmYWxzZSwKICAgIC8vIOetm+mAieaooeadvwogICAgLy8gZmlsdGVyczogW3sgZGF0YTogJycgfV0sCiAgICAvLyBmaWx0ZXJSZW5kZXI6IHsgbmFtZTogJ0ZpbHRlcklucHV0JyB9LAogICAgcmVuZGVyRmlsdGVyOiBmdW5jdGlvbiByZW5kZXJGaWx0ZXIoaCwgcmVuZGVyT3B0cywgcGFyYW1zKSB7CiAgICAgIHJldHVybiBbaCgiZmlsdGVyLVNlbGVjdCIsIHsKICAgICAgICAiYXR0cnMiOiB7CiAgICAgICAgICAicmVuZGVyT3B0cyI6IHJlbmRlck9wdHMsCiAgICAgICAgICAicGFyYW1zIjogcGFyYW1zCiAgICAgICAgfQogICAgICB9KV07CiAgICB9LAogICAgZmlsdGVyUmVzZXRNZXRob2Q6IGZ1bmN0aW9uIGZpbHRlclJlc2V0TWV0aG9kKF9yZWYxNzApIHsKICAgICAgdmFyIG9wdGlvbnMgPSBfcmVmMTcwLm9wdGlvbnM7CiAgICAgIG9wdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAob3B0aW9uKSB7CiAgICAgICAgb3B0aW9uLmRhdGEgPSB7CiAgICAgICAgICB2YWxzOiBbXSwKICAgICAgICAgIHNWYWw6ICcnCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g562b6YCJ5pa55rOVCiAgICBmaWx0ZXJNZXRob2Q6IGZ1bmN0aW9uIGZpbHRlck1ldGhvZChfcmVmMTcxKSB7CiAgICAgIHZhciBvcHRpb24gPSBfcmVmMTcxLm9wdGlvbiwKICAgICAgICByb3cgPSBfcmVmMTcxLnJvdywKICAgICAgICBjb2x1bW4gPSBfcmVmMTcxLmNvbHVtbjsKICAgICAgdmFyIG9wdGlvbnMgPSBvcHRpb24ub3B0aW9ucywKICAgICAgICBkYXRhID0gb3B0aW9uLmRhdGE7CiAgICAgIHZhciB2YWxzID0gZGF0YS52YWxzOwogICAgICB2YXIgY2VsbFZhbHVlID0gcm93W2NvbHVtbi5wcm9wZXJ0eV07CiAgICAgIHZhciB2YWx1ZSA9IFtdOwogICAgICBvcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgaWYgKFN0cmluZyhjZWxsVmFsdWUpLmluZGV4T2YoaXRlbS52YWx1ZSkgPj0gMCkgewogICAgICAgICAgdmFsdWUucHVzaChpdGVtLmxhYmVsKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gdmFsdWUuc29tZShmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiB2YWxzLmluZGV4T2YoaXRlbSkgPj0gMDsKICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnQgZGVmYXVsdCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0UHVibGljUmVuZGVycyksIGRlZmF1bHRUYWJsZVJlbmRlcmVycyksIGRlZmF1bHRGb3JtUmVuZGVyZXJzKSwgdGFibGVmaWx0ZXJSZW5kZXJlcnMpOw=="},{"version":3,"names":["filterTypeMap","defaultGlobalUtils","calculateRender","h","_ref","_ref2","context","props","name","$columnIndex","$rowIndex","items","column","data","row","$seq","$table","$type","columnIndex","isEdit","level","rowIndex","seq","val","isNaN","parseFloat","property","toFixed","$grid","$parent","toolbarConfigInCopy","moneyInputSwich","disabledMoneyConversion","Number","toLocaleString","split","length","moneyUnit","_objectSpread","formCalculateRender","renderOpts","_ref3","$form","calclate","columns","key","rever","some","item","index","field","RegExp","test","formula","formulaItem","Array","isArray","children","keyC","reg","value","replace","eval","formatLabel","format","nodeData","valueKeys","regR","rowsKey","match","map","keyIndex","arr","forEach","push","join","debounceItemChange","debounce","delay","timer","cb","clearTimeout","setTimeout","obj","otheDataObj","indexkey","getleafChildrenList","result","arguments","undefined","self","deepCopy","me","newObj","_typeof","Object","Map","keys","mapV","mapK","set","Set","setV","setI","add","parseConditions","conditionsObj","defaultGloabalUtils","e","console","error","_eval","expresion","mergeContrainConfig","params","type","bsTable","_bsTable$calculateCon","calculateConstraintConfigIn","enabled","enabledType","calcAndConstraintItemCodeField","performColConstraint","performCellConstraint","constrainRowDataMap","curCellMap","options","assign","disabled","editable","queryparams","defaultPublicRenders","$vxeTree","renderDefault","_ref4","_ref5","_ref6","config","multiple","showField","isHump","fieldkeys","endsWith","multiplefieldkeys","cellViewFormat","$0","$1","$2","toUpperCase","idNameCodeMap","idArr","codeArr","nameArr","renderCell","_ref7","_ref8","_ref9","renderEdit","_renderOpts","formatOptions","renderOption","publicData","rowPublicData","renderData","_ref10","ref","treeData","isDropSelectTree","on","input","onNodeClick","_ref11","node","cellOptionCallBack","optionType","onNodeCheckClick","_ref12","nodes","renderItem","_ref13","_ref14","_defaultGlobalUtils$f","_defineProperty","_defaultGlobalUtils$f2","autoFocusDispatch","itemChange","itemValue","_ref15","limitCheckedEnd","_ref16","$vxeSelect","_ref17","_ref18","_ref17$props","arrValue","indexOf","label","_ref19","_ref20","_ref19$props","_renderOpts$props","placeholder","transfer","change","_ref21","viewValue","String","_ref22","_renderOpts$props2","_ref23","$vxeCheckbox","_ref24","_ref25","_ref24$props","_ref26","_ref27","_ref26$props","_ref28","_ref29","_ref28$props","_ref28$propsC","propsC","_ref30","$event","checked","checklist","_ref31","_renderOpts$props3","_renderOpts$propsC","_ref32","_ref33","$vxeInput","autofocus","_ref34","_ref35","_this","_ref34$props","callback","$$v","$set","_ref36","_ref37","_ref36$props","hiddenZero","parseInt","numValue","transToNumber","digits","_ref38","_ref39","_ref38$props","floatNumValue","_ref40","_renderOpts$props4","blur","_ref41","$vxeCalculate","_ref42","_ref43","_ref44","_ref45","$vxeMoney","_ref46","_ref47","_ref46$props","isRound","isRoundIn","showZero","hideEmptyValue","isEmptyValue","zero","accurateChuFa","transToNumberLocalString","zeroNum","showVal","_ref48","_ref49","_ref48$props","log","_split$","_renderOpts$props5","toolbarConfigIn","toString","tableConfigCp","globalConfig","moneyLimit","_props$min","min","_props$max","max","inputdigits","step","clearable","readonly","focus","inputStatus","window","event","currentTarget","keyup","_ref50","_ref51","valueLen","isTrue","transInputToNumber","accurateChengFa","oldValue","_ref52","_split$2","_v","_ref53","bsForm","_bsForm$constrainData","constrainDataMap","_renderOpts$props6","curConstrainDataMap","thousandsSymbolView","_props","_props$min2","_props$max2","_ref54","_ref55","inputing","_ref56","uneditableBorder","maxlength","_ref57","$vxeEditDownTextarea","cellRender","_ref58","getHighlightedFilterText","_ref59","_renderOpts2","_renderOpts2$props","_ref60","_ref61","_ref62","_renderOpts$props7","showWordCount","_ref63","_ref64","$vxeDays","_ref65","_ref66","quiteDay","Math","floor","_ref67","_ref68","_ref69","_ref70","_this2","_ref71","_ref72","$vxeTime","_ref73","_ref74","dateTime","date","substring","Date","getTime","_ref75","_ref76","_ref77","_ref78","_ref79","_ref80","disabledMethod","_ref81","isLimitMinYear","minYear","getFullYear","itemViewValue","$vxeRadio","_ref82","_ref83","_this3","_mergeJSXProps","_ref84","_ref85","_ref86","_ref87","_ref88","_ref89","_ref90","$vxeEditDownJson","_ref91","JSON","stringify","_ref92","$vxeIntervar","_ref93","propertyArr","_ref94","_ref95","constProps","_itemValue","valueArr","$vxeSwitch","_ref96","_ref97","_this4","includes","openSwitch","_ref98","_ref99","_this5","_ref100","_ref101","_this6","openLabel","closeLabel","openValue","closeValue","$vxeFormDays","_ref102","$vxeProgress","_ref103","_ref104","accurateFixed","_ref105","_ref106","_ref107","_ref108","$vxeEditDownConditions","_ref109","_ref110","_ref111","$vxeRowCellRenderer","_ref112","_ref113","_ref114","$vxeBasicInfoRenderer","_ref115","mode","curRendermap","tableRenderMap","render","publicRender","_ref116","_ref117","$vxeEditDownTerm","_ref118","_ref118$props","year","slice","month","day","concat","_renderOpts$props8","_ref119","_ref119$props","_ref120","_renderOpts$props9","$vxeNewMoney","_ref121","_ref122","_val","_val$toString$trim","_val2","_val2$toString","_val2$toString$trim","viewDigits","unit","trim","_ref123","_ref124","_val3","_val3$toString","_val3$toString$trim","_val4","_val4$toString","_val4$toString$trim","_ref125","_data$property","_data$property$toStri","_data$property$toStri2","$vxeNewInput","_ref126","_ref127","_this7","_ref128","_ref129","_ref130","_renderOpts$props10","_ref131","$vxeDateInput","_ref132","defaultTableRenderers","$vxeTableOptionSort","_ref133","_ref134","$excel","click","onOptionSortRowClick","$vxeTableHref","_ref135","_ref136","_ref137","$vxeTableContentTable","renderExpand","_ref138","propsN","contentTableConfig","height","tableColumnsConfig","childCols","tableData","childData","ProxyEvent","_context$$grid$$paren","arg","prototype","call","$emit","apply","ParentsParams","_toConsumableArray","$vxeNotData","renderEmpty","$vxeTableOptionRow","statusField","_props$options","disabledHandle","class","btnStatus","onOptionRowClick","code","_item$isAvailableObj","isAvailableObj","targetField","targetVal","valField","icon","color","$vxeTableCustomRender","$scopedSlots","attrs","own","customCellRender","$vxeHref","_ref139","_ref140","_ref141","$customIcon","renderProps","cellValue","currentOption","find","option","iconClass","iconStyle","fontSize","verticalAlign","showLabel","$vxeIcon","cellRander","_row$children","_row$children2","_row$children3","treeExpandeds","$vxeIcon1","_cellRander$props","_cellRander$props2","_row$children4","_row$children5","_row$children6","showValue","$vxeIcon2","_cellRander$props3","_cellRander$props4","_row$children7","_row$children8","_row$children9","$vxeIcon3","_cellRander$props5","_cellRander$props6","_row$children10","_row$children11","_row$children12","$vxeIcon4","_row$children13","_row$children14","_row$children15","$vxeIcon6","_cellRander$props7","_cellRander$props8","_row$children16","_row$children17","_row$children18","$vxeIcon7","_cellRander$props9","_cellRander$props10","_row$children19","_row$children20","_row$children21","$vxeIcon8","_row$children22","_row$children23","_row$children24","$vxeIcon5","hasChild","$vxeRatio","_column$own","_column$own$props","_$parent$$parent","_$parent$$parent$_pro","ZeroNumber","FilterNumberRange","isFooter","renderFilter","filterMethod","_ref142","_option$data","sortProperty","_value","filterResetMethod","_ref143","defaultFormRenderers","$vxeFormGroupTitle","_ref144","gooupTitle","span","groupTitle","$formCalculateRender","_ref145","$formMoneyInputRender","_ref146","$formMoneyTextRender","_ref147","$groupTitle","_ref148","$vxelinkageText","_ref149","_ref150","$vxeFormTime","_ref151","$vxeFormText","_ref152","_ref153","$vxeFormIntervar","$vxeFormInput","_ref154","$vxeFormSelect","_ref155","_ref156","filter","$vxeFormRadio","_ref157","_ref158","$vxeFormCheckbox","_ref159","_ref160","$formTreeInput","_ref161","_ref162","timeStamp","datas","formatter","$formTreeInputCheck","_ref163","_ref164","ids","codes","names","line","i","len","id","substr","tablefilterRenderers","FilterComplex","_ref165","_column$own2","editRender","filters","isCase","dataType","valuegt","_ref166","_option$data2","toLowerCase","FilterContent","_ref167","vals","sVal","_ref168","shift","FilterInput","_ref169","valMap","fieldStr","fields","FilterSelect","_ref170","_ref171"],"sources":["C:/Users/何小龙/Desktop/platformweb-fb/node_modules/@bszx/boss-ui/packages/Table/src/config/render/publicRender.js"],"sourcesContent":["/*\n * @Author: 轻语\n * @Date: 2021-11-08 14:44:58\n * @LastEditors: Comer\n * @LastEditTime: 2023-03-31 11:35:00\n * @Description:\n */\n/* eslint-disable no-eval */\nimport { filterTypeMap } from '../tableDefaultConfig'\n\n// 表格废弃原渲染同时计算改为计算后渲染，form仍然采用渲染实时计算。\nconst defaultGlobalUtils = {\n  calculateRender(h, { props, name }, { $columnIndex, $rowIndex, items, column, data, row, $seq, $table, $type, columnIndex, isEdit, level, rowIndex, seq }, context) {\n    props = props || {}\n    let val = isNaN(parseFloat(row[column.property])) ? '' : parseFloat(row[column.property])\n    if (val !== '') {\n      row[column.property] = val.toFixed(2)\n      if (!context.$grid.$parent.toolbarConfigInCopy.moneyInputSwich || context.$grid.$parent.toolbarConfigInCopy.disabledMoneyConversion) {\n        val = Number((val).toFixed(2)).toLocaleString()\n        val = val.split('.').length === 1 ? val + '.00' : (val.split('.')[1].length === 1 ? val + '0' : val)\n      } else {\n        let moneyUnit = context.$grid.$parent.moneyUnit ? context.$grid.$parent.moneyUnit : 1\n        val = Number((val / moneyUnit).toFixed(2)).toLocaleString()\n        val = val.split('.').length === 1 ? val + '.00' : (val.split('.')[1].length === 1 ? val + '0' : val)\n      }\n      row[column.property + '__viewSort'] = val\n      return [<span class=\"text block\" {...{ props }} >{val}</span>]\n    } else {\n      row[column.property + '__viewSort'] = ''\n      return [<span class=\"text block\" {...{ props }} ></span>]\n    }\n  },\n  formCalculateRender(h, renderOpts, { data, property, $form }, context) {\n    function calclate(columns, data, key) {\n      function rever(columns) {\n        columns.some((item, index) => {\n          if (item.field === key && new RegExp('({[a-zA-Z0-9_]*})', 'ig').test(item.formula)) {\n            formulaItem = item\n          }\n          if (!formulaItem && Array.isArray(item.children) && item.children.length) {\n            rever(item.children)\n          }\n        })\n      }\n      let formulaItem = false\n      rever(columns)\n      if (formulaItem) {\n        let formula = formulaItem.formula\n        for (let keyC in data) {\n          let reg = new RegExp('({' + keyC + '})', 'ig')\n          if (reg.test(formula)) {\n            calclate($form.items, data, keyC)\n            let value = (typeof (data[keyC]) === 'number' || typeof (data[keyC]) === 'string') ? data[keyC] : 0\n            formula = formula.replace(reg, isNaN(parseFloat(value)) ? 0 : parseFloat(value))\n          }\n        }\n        // eslint-disable-next-line no-eval\n        data[key] = parseFloat(eval(formula).toFixed(2))\n      }\n      return data[key]\n    }\n    calclate($form.items, data, property)\n    let val = isNaN(parseFloat(data[property])) ? 0 : parseFloat(data[property])\n    let moneyUnit = 1\n    val = Number((val / moneyUnit).toFixed(2)).toLocaleString()\n    // eslint-disable-next-line no-useless-escape\n    return [<span>{val}</span>]\n  },\n  formatLabel(format, nodeData, valueKeys) {\n    // 格式化显示label\n    let regR = new RegExp('({[a-zA-Z0-9_]*})', 'ig')\n    let rowsKey = (format.match(regR) || []).map((key, keyIndex) => {\n      return key.replace(/{|}/gi, '')\n    })\n    let arr = []\n    rowsKey.forEach((key, index) => {\n      if (key === (valueKeys[0] || 'code' || 'code')) {\n        nodeData[key] !== 'root' && nodeData[key] && arr.push(nodeData[key])\n      } else {\n        nodeData[key] && arr.push(nodeData[key])\n      }\n    })\n    return arr.join('-')\n  },\n  debounceItemChange: (function(debounce) {\n    return debounce(300)\n  })(function(delay) {\n  // 利用闭包保存定时器\n    let timer = null\n    return function(cb) {\n      // 在规定时间内再次触发会先清除定时器后再重设定时器\n      clearTimeout(timer)\n      timer = setTimeout(function() {\n        cb()\n      }, delay)\n    }\n  }),\n  format(format, obj, otheDataObj) {\n    let regR = new RegExp('({[a-zA-Z0-9_]*})', 'ig')\n    let rowsKey = (format.match(regR) || []).map((key, keyIndex) => {\n      return key.replace(/{|}/gi, '')\n    })\n    rowsKey.map((key, indexkey) => {\n      format = format.replace(new RegExp('{' + key + '}', 'ig'), obj[key] || (otheDataObj && otheDataObj[key]) || '')\n    })\n    return format\n  },\n  getleafChildrenList(data, result = []) {\n    let self = this\n    data.forEach((item, index) => {\n      if (Array.isArray(item.children) && item.children.length) {\n        self.getleafChildrenList(item.children, result)\n      } else {\n        result.push(item)\n      }\n    })\n    return result\n  },\n  deepCopy(obj) {\n    // 深拷贝通用方法\n    let me = this\n    let newObj = null\n    if (typeof obj !== 'object' || obj === null) {\n      newObj = obj\n    } else {\n      if (obj instanceof Array) {\n        newObj = obj.map((item, index) => {\n          return me.deepCopy(item)\n        })\n      } else if (obj instanceof Object) {\n        newObj = {}\n        for (let key in obj) {\n          newObj[key] = me.deepCopy(obj[key])\n        }\n      } else if (obj instanceof Map) {\n        newObj = new Map()\n        obj.keys().forEach((mapV, mapK) => {\n          newObj.set(mapK, me.deepCopy(mapV))\n        })\n      } else if (obj instanceof Set) {\n        newObj = new Map()\n        Set.forEach((setV, setI) => {\n          newObj.add(me.deepCopy(setV))\n        })\n      } else {\n      }\n      // eslint-disable-next-line no-proto\n      // newObj.__proto__ = obj.__proto__\n    }\n    return newObj\n  },\n  parseConditions(conditionsObj, data, otheDataObj = {}) {\n    conditionsObj = conditionsObj || {}\n    let result = {}\n    for (let key in conditionsObj) {\n      try {\n        result[key] = eval(defaultGloabalUtils.format(conditionsObj[key], data, otheDataObj))\n      } catch (e) {\n        console.error(e)\n        result[key] = ''\n      }\n    }\n    return result\n  },\n  eval(expresion, obj, otheDataObj) {\n    let regR = new RegExp('({[a-zA-Z0-9_]*})', 'ig')\n    let rowsKey = (expresion.match(regR) || []).map((key, keyIndex) => {\n      return key.replace(/{|}/gi, '')\n    })\n    rowsKey.map((key, indexkey) => {\n      expresion = expresion.replace(new RegExp('{' + key + '}', 'ig'), obj[key] || (otheDataObj && otheDataObj[key]) || '')\n    })\n    return eval(expresion)\n  },\n  mergeContrainConfig(renderOpts, params, context, type = 'table') { // 合并更新约束\n    if (type === 'table') {\n      let bsTable = context.$grid.$parent\n      let { enabled, enabledType, calcAndConstraintItemCodeField } = bsTable.calculateConstraintConfigIn\n      if (enabled && (enabledType.performColConstraint || enabledType.performCellConstraint)) {\n        // 更新渲染配置\n        let constrainRowDataMap = bsTable.constrainRowDataMap\n        let curCellMap = constrainRowDataMap[params.row[calcAndConstraintItemCodeField]] && constrainRowDataMap[params.row[calcAndConstraintItemCodeField]][params.column.property]\n        if (curCellMap) {\n          if (curCellMap.options) {\n            renderOpts.options = curCellMap.options\n          }\n          renderOpts.props = Object.assign(renderOpts.props, {\n            disabled: curCellMap.disabled || renderOpts.props.disabled,\n            editable: curCellMap.editable || renderOpts.props.editable,\n            queryparams: curCellMap.queryparams || renderOpts.props.queryparams\n          })\n        }\n        return renderOpts\n      } else {\n        return renderOpts\n      }\n    }\n  }\n}\n// 全局提供表格和form配套渲染器共 15 组，分别为： 新全局下拉树，文本数字输入，下拉选择，计算渲染器，金额输入，下拉文本框，天数，时间日期，单选，多选，间隔时间或数值选择输入渲染器，开关，进度条，条件渲染器。其中，条件渲染器（评测和developing）\nconst defaultPublicRenders = {\n  // 表格form全局渲染器\n  // 3组可多选\n  $vxeTree: {\n    // 全局树渲染器\n    renderDefault(h, { name, props }, { row, column }) {\n      let { multiple, format, showField, isHump, valueKeys } = (props && props.config) || { multiple: false, format: '{code}-{name}', showField: '', isHump: false }\n      valueKeys = valueKeys || ['code', 'name', 'id']\n      let fieldkeys = isHump ? ['Code', 'Name', 'Id'] : (column.property.endsWith('_') ? ['code', 'name', 'id'] : ['_code', '_name', '_id'])\n      let multiplefieldkeys = isHump ? ['Code__multiple', 'Name__multiple', 'Id__multiple', '__viewSort'] : (column.property.endsWith('_') ? ['code__multiple', 'name__multiple', 'id__multiple', '_viewSort'] : ['_code__multiple', '_name__multiple', '_id__multiple', '__viewSort'])\n      format = (props && props.cellViewFormat) || format || ('{' + valueKeys[0] + '}-{' + valueKeys[1] + '}')\n      if (showField) {\n        row[showField] = (row[showField] + '').replace(/null|undefined/ig, '')\n        row[column.property + multiplefieldkeys[3]] = row[showField]\n        return [<span class=\"text block\">{row[column.property + multiplefieldkeys[3]]}</span>]\n      } else {\n        let regR = new RegExp('({[a-zA-Z0-9_]*})', 'ig')\n        let rowsKey = format.match(regR).map((key, keyIndex) => {\n          return key.replace(/{|}/gi, '')\n        })\n        if (!multiple) {\n          row[column.property] = [row[column.property + fieldkeys[0]], row[column.property + fieldkeys[1]], row[column.property + fieldkeys[2]]].map((item, index) => {\n            return (item + '').replace(/null|undefined/ig, '')\n          }).join('##').replace('####', '')\n          let arr = []\n          rowsKey.map((key, indexkey) => {\n            if (key === 'code') {\n              (row[column.property + fieldkeys[0]] + '').replace(/null|undefined|root/ig, '') !== '' && arr.push(row[column.property + fieldkeys[0]])\n            } else {\n              key = isHump ? key.replace(/\\b(\\w)(\\w*)/g, function ($0, $1, $2) { return $1.toUpperCase() + $2 }) : (column.property.endsWith('_') ? key : ('_' + key));\n              (row[column.property + key] + '').replace(/null|undefined/ig, '') !== '' && arr.push(row[column.property + key])\n            }\n          })\n          row[column.property + multiplefieldkeys[3]] = row[column.property] === '' ? '' : arr.join('-')\n        } else {\n          let idNameCodeMap = {\n            idArr: (typeof (row[column.property + fieldkeys[2]]) === 'string' && (row[column.property + fieldkeys[2]]) !== '') ? row[column.property + fieldkeys[2]].split(',') : (Array.isArray(row[column.property + fieldkeys[2]]) ? row[column.property + fieldkeys[2]] : row[column.property + multiplefieldkeys[2]] ? row[column.property + multiplefieldkeys[2]] : []),\n            codeArr: (typeof (row[column.property + fieldkeys[0]]) === 'string' && (row[column.property + fieldkeys[0]]) !== '') ? row[column.property + fieldkeys[0]].split(',') : (Array.isArray(row[column.property + fieldkeys[0]]) ? row[column.property + fieldkeys[0]] : row[column.property + multiplefieldkeys[0]] ? row[column.property + multiplefieldkeys[0]] : []),\n            nameArr: (typeof (row[column.property + fieldkeys[1]]) === 'string' && (row[column.property + fieldkeys[1]]) !== '') ? row[column.property + fieldkeys[1]].split(',') : (Array.isArray(row[column.property + fieldkeys[1]]) ? row[column.property + fieldkeys[1]] : row[column.property + multiplefieldkeys[1]] ? row[column.property + multiplefieldkeys[1]] : [])\n          }\n          row[column.property] = (idNameCodeMap.nameArr.length || idNameCodeMap.codeArr.length) ? idNameCodeMap.codeArr.map((item, index) => {\n            return [idNameCodeMap.codeArr[index], idNameCodeMap.nameArr[index], idNameCodeMap.idArr[index]].map((item, index) => {\n              return (item + '').replace(/null|undefined/ig, '')\n            }).join('##').replace('####', '')\n          }).join(',') : ''\n          row[column.property + fieldkeys[2]] = row[column.property] === '' ? '' : idNameCodeMap.idArr.join(',')\n          row[column.property + fieldkeys[0]] = row[column.property] === '' ? '' : idNameCodeMap.codeArr.join(',')\n          row[column.property + fieldkeys[1]] = row[column.property] === '' ? '' : idNameCodeMap.nameArr.join(',')\n          row[column.property + multiplefieldkeys[2]] = row[column.property] === '' ? [] : idNameCodeMap.idArr\n          row[column.property + multiplefieldkeys[0]] = row[column.property] === '' ? [] : idNameCodeMap.codeArr\n          row[column.property + multiplefieldkeys[1]] = row[column.property] === '' ? [] : idNameCodeMap.nameArr\n          row[column.property + multiplefieldkeys[3]] = row[column.property] === '' ? '' : idNameCodeMap.codeArr.map((item, index) => {\n            let arr = []\n            rowsKey.map((key, indexkey) => {\n              if (key === 'code') {\n                idNameCodeMap[key + 'Arr'][index] !== 'root' && arr.push(idNameCodeMap[key + 'Arr'][index])\n              } else {\n                idNameCodeMap[key + 'Arr'][index] && arr.push(idNameCodeMap[key + 'Arr'][index])\n              }\n            })\n            return arr.join('-')\n          }).join(',')\n        }\n        return [<span class=\"text block\">{row[column.property + multiplefieldkeys[3]]}</span>]\n      }\n    },\n    renderCell(h, { name, props }, { row, column }) {\n      let { multiple, format, showField, isHump, valueKeys } = (props && props.config) || { multiple: false, format: '{code}-{name}', showField: '', isHump: false }\n      valueKeys = valueKeys || ['code', 'name', 'id']\n      let fieldkeys = isHump ? ['Code', 'Name', 'Id'] : (column.property.endsWith('_') ? ['code', 'name', 'id'] : ['_code', '_name', '_id'])\n      let multiplefieldkeys = isHump ? ['Code__multiple', 'Name__multiple', 'Id__multiple', '__viewSort'] : (column.property.endsWith('_') ? ['code__multiple', 'name__multiple', 'id__multiple', '_viewSort'] : ['_code__multiple', '_name__multiple', '_id__multiple', '__viewSort'])\n\n      format = (props && props.cellViewFormat) || format || ('{' + valueKeys[0] + '}-{' + valueKeys[1] + '}')\n      if (showField) {\n        row[showField] = (row[showField] + '').replace(/null|undefined/ig, '')\n        row[column.property + multiplefieldkeys[3]] = row[showField]\n        return [<span class=\"text block\">{row[column.property + multiplefieldkeys[3]]}</span>]\n      } else {\n        let regR = new RegExp('({[a-zA-Z0-9_]*})', 'ig')\n        let rowsKey = format.match(regR).map((key, keyIndex) => {\n          return key.replace(/{|}/gi, '')\n        })\n        if (!multiple) {\n          row[column.property] = [row[column.property + fieldkeys[0]], row[column.property + fieldkeys[1]], row[column.property + fieldkeys[2]]].map((item, index) => {\n            return (item + '').replace(/null|undefined/ig, '')\n          }).join('##').replace('####', '')\n          let arr = []\n          rowsKey.map((key, indexkey) => {\n            if (key === 'code') {\n              (row[column.property + fieldkeys[0]] + '').replace(/null|undefined|root/ig, '') !== '' && arr.push(row[column.property + fieldkeys[0]])\n            } else {\n              key = isHump ? key.replace(/\\b(\\w)(\\w*)/g, function ($0, $1, $2) { return $1.toUpperCase() + $2 }) : (column.property.endsWith('_') ? key : ('_' + key));\n              (row[column.property + key] + '').replace(/null|undefined/ig, '') !== '' && arr.push(row[column.property + key])\n            }\n          })\n          row[column.property + multiplefieldkeys[3]] = row[column.property] === '' ? '' : arr.join('-')\n        } else {\n          let idNameCodeMap = {\n            idArr: (typeof (row[column.property + fieldkeys[2]]) === 'string' && (row[column.property + fieldkeys[2]]) !== '') ? row[column.property + fieldkeys[2]].split(',') : (Array.isArray(row[column.property + fieldkeys[2]]) ? row[column.property + fieldkeys[2]] : []),\n            codeArr: (typeof (row[column.property + fieldkeys[0]]) === 'string' && (row[column.property + fieldkeys[0]]) !== '') ? row[column.property + fieldkeys[0]].split(',') : (Array.isArray(row[column.property + fieldkeys[0]]) ? row[column.property + fieldkeys[0]] : []),\n            nameArr: (typeof (row[column.property + fieldkeys[1]]) === 'string' && (row[column.property + fieldkeys[1]]) !== '') ? row[column.property + fieldkeys[1]].split(',') : (Array.isArray(row[column.property + fieldkeys[1]]) ? row[column.property + fieldkeys[1]] : [])\n          }\n          row[column.property] = (idNameCodeMap.nameArr.length || idNameCodeMap.codeArr.length) ? idNameCodeMap.codeArr.map((item, index) => {\n            return [idNameCodeMap.codeArr[index], idNameCodeMap.nameArr[index], idNameCodeMap.idArr[index]].map((item, index) => {\n              return (item + '').replace(/null|undefined/ig, '')\n            }).join('##').replace('####', '')\n          }).join(',') : ''\n          row[column.property + fieldkeys[2]] = row[column.property] === '' ? '' : idNameCodeMap.idArr.join(',')\n          row[column.property + fieldkeys[0]] = row[column.property] === '' ? '' : idNameCodeMap.codeArr.join(',')\n          row[column.property + fieldkeys[1]] = row[column.property] === '' ? '' : idNameCodeMap.nameArr.join(',')\n          row[column.property + multiplefieldkeys[2]] = row[column.property] === '' ? [] : idNameCodeMap.idArr\n          row[column.property + multiplefieldkeys[0]] = row[column.property] === '' ? [] : idNameCodeMap.codeArr\n          row[column.property + multiplefieldkeys[1]] = row[column.property] === '' ? [] : idNameCodeMap.nameArr\n          row[column.property + multiplefieldkeys[3]] = row[column.property] === '' ? '' : idNameCodeMap.codeArr.map((item, index) => {\n            let arr = []\n            rowsKey.map((key, indexkey) => {\n              if (key === 'code') {\n                idNameCodeMap[key + 'Arr'][index] !== 'root' && arr.push(idNameCodeMap[key + 'Arr'][index])\n              } else {\n                idNameCodeMap[key + 'Arr'][index] && arr.push(idNameCodeMap[key + 'Arr'][index])\n              }\n            })\n            return arr.join('-')\n          }).join(',')\n        }\n        return [<span class=\"text block\">{row[column.property + multiplefieldkeys[3]]}</span>]\n      }\n    },\n    renderEdit(h, renderOpts, params, context) {\n      renderOpts = defaultGloabalUtils.deepCopy(renderOpts)\n      let { props, options } = renderOpts\n      let { row, column } = params\n      let bsTable = context.$grid.$parent\n      let self = bsTable\n      if (props.formatOptions) { // 配置映射\n        props.options = props.options || {}\n        let renderOption = props.options[defaultGloabalUtils.format(props.formatOptions, row, self.publicData.rowPublicData)]\n        if (renderOption) {\n          Object.assign(props.config, renderOption.config)\n          props.queryparams = renderOption.queryparams || props.queryparams\n        }\n      }\n      renderOpts = defaultGloabalUtils.mergeContrainConfig(renderOpts, params, context)\n      let renderData = row\n      let { valueKeys, isHump } = (props && props.config) || { multiple: false, valueKeys: ['code', 'name', 'id'] }\n      let fieldkeys = isHump ? ['Code', 'Name', 'Id'] : (column.property.endsWith('_') ? ['code', 'name', 'id'] : ['_code', '_name', '_id'])\n      let multiplefieldkeys = isHump ? ['Code__multiple', 'Name__multiple', 'Id__multiple'] : (column.property.endsWith('_') ? ['code__multiple', 'name__multiple', 'id__multiple'] : ['_code__multiple', '_name__multiple', '_id__multiple'])\n      valueKeys = valueKeys || ['code', 'name', 'id']\n      return [\n        h('BsTree', {\n          props: {\n            ref: 'vxe-tree-' + column.property,\n            editable: true,\n            value: row[column.property],\n            ...props,\n            treeData: options || [],\n            isDropSelectTree: true\n          },\n          on: {\n            input: (value) => {\n              renderData[column.property] = value\n            },\n            onNodeClick({ node, treeData }) {\n              if (node !== null) {\n                renderData[column.property + fieldkeys[2]] = node[valueKeys[2]]\n                renderData[column.property + fieldkeys[0]] = node[valueKeys[0]]\n                renderData[column.property + fieldkeys[1]] = node[valueKeys[1]]\n              } else {\n                renderData[column.property + fieldkeys[2]] = ''\n                renderData[column.property + fieldkeys[0]] = ''\n                renderData[column.property + fieldkeys[1]] = ''\n              }\n              bsTable.cellOptionCallBack(params, { optionType: 'nodeClick', node, treeData })\n            },\n            onNodeCheckClick({ nodes, node, treeData, value }) {\n              renderData[column.property + multiplefieldkeys[2]] = nodes.map((item, index) => {\n                return item[valueKeys[2]] ? item[valueKeys[2]] : ''\n              })\n              renderData[column.property + multiplefieldkeys[0]] = nodes.map((item, index) => {\n                return item[valueKeys[0]] ? item[valueKeys[0]] : ''\n              })\n              renderData[column.property + multiplefieldkeys[1]] = nodes.map((item, index) => {\n                return item[valueKeys[1]] ? item[valueKeys[1]] : ''\n              })\n              renderData[column.property + fieldkeys[2]] = renderData[column.property + multiplefieldkeys[2]].join(',')\n              renderData[column.property + fieldkeys[0]] = renderData[column.property + multiplefieldkeys[0]].join(',')\n              renderData[column.property + fieldkeys[1]] = renderData[column.property + multiplefieldkeys[1]].join(',')\n              bsTable.cellOptionCallBack(params, { optionType: 'nodeCheckClick', node, nodes, treeData })\n            }\n          }\n        })\n      ]\n    },\n    renderItem(h, renderOpts, { $form, property, data }) {\n      let { props, options } = renderOpts\n      let renderData = data\n      let { multiple, isHump, valueKeys, format } = (props && props.config) || { format: '{code}-{name}', multiple: false, valueKeys: ['code', 'name', 'id'] }\n      valueKeys = valueKeys || ['code', 'name', 'id']\n      let fieldkeys = isHump ? ['Code', 'Name', 'Id'] : (property.endsWith('_') ? ['code', 'name', 'id'] : ['_code', '_name', '_id'])\n      let multiplefieldkeys = isHump ? ['Code__multiple', 'Name__multiple', 'Id__multiple', '__viewSort'] : (property.endsWith('_') ? ['code__multiple', 'name__multiple', 'id__multiple', '_viewSort'] : ['_code__multiple', '_name__multiple', '_id__multiple', '__viewSort'])\n      format = format || ('{' + valueKeys[0] + '}-{' + valueKeys[1] + '}')\n      if (!multiple) {\n        data[property] = [data[property + fieldkeys[0]], data[property + fieldkeys[1]], data[property + fieldkeys[2]]].map((item, index) => {\n          return (item + '').replace(/null|undefined/ig, '')\n        }).join('##').replace('####', '')\n        data[property + multiplefieldkeys[3]] = data[property] === '' ? '' : defaultGlobalUtils.formatLabel(format, {\n          [valueKeys[0]]: data[property + fieldkeys[0]],\n          [valueKeys[1]]: data[property + fieldkeys[1]],\n          [valueKeys[2]]: data[property + fieldkeys[2]]\n        }, valueKeys)\n      } else {\n        // 处理多选复现事出现循环引用问题\n        if (!data[property] && Array.isArray(data[property + multiplefieldkeys[2]]) && !data[property + multiplefieldkeys[2]].length) {\n          delete data[property + multiplefieldkeys[2]]\n        }\n        if (!data[property] && Array.isArray(data[property + multiplefieldkeys[0]]) && !data[property + multiplefieldkeys[0]].length) {\n          delete data[property + multiplefieldkeys[0]]\n        }\n        if (!data[property] && Array.isArray(data[property + multiplefieldkeys[1]]) && !data[property + multiplefieldkeys[1]].length) {\n          delete data[property + multiplefieldkeys[1]]\n        }\n        let idArr = (typeof (data[property + fieldkeys[2]]) === 'string' && data[property + fieldkeys[2]] !== '') ? data[property + fieldkeys[2]].split(',') : (Array.isArray(data[property + fieldkeys[2]]) ? data[property + fieldkeys[2]] : (Array.isArray(data[property + multiplefieldkeys[2]]) && data[property + multiplefieldkeys[2]].length > 0) ? data[property + multiplefieldkeys[2]] : [])\n        let codeArr = (typeof (data[property + fieldkeys[0]]) === 'string' && data[property + fieldkeys[0]] !== '') ? data[property + fieldkeys[0]].split(',') : (Array.isArray(data[property + fieldkeys[0]]) ? data[property + fieldkeys[0]] : (Array.isArray(data[property + multiplefieldkeys[0]]) && data[property + multiplefieldkeys[0]].length > 0) ? data[property + multiplefieldkeys[0]] : [])\n        let nameArr = (typeof (data[property + fieldkeys[1]]) === 'string' && data[property + fieldkeys[1]] !== '') ? data[property + fieldkeys[1]].split(',') : (Array.isArray(data[property + fieldkeys[1]]) ? data[property + fieldkeys[1]] : (Array.isArray(data[property + multiplefieldkeys[1]]) && data[property + multiplefieldkeys[1]].length > 0) ? data[property + multiplefieldkeys[1]] : [])\n        data[property] = (nameArr.length || codeArr.length) ? codeArr.map((item, index) => {\n          return [codeArr[index], nameArr[index], idArr[index]].map((item, index) => {\n            return (item + '').replace(/null|undefined/ig, '')\n          }).join('##').replace('####', '')\n        }).join(',') : ''\n        data[property + fieldkeys[2]] = data[property] === '' ? '' : idArr.join(',')\n        data[property + fieldkeys[0]] = data[property] === '' ? '' : codeArr.join(',')\n        data[property + fieldkeys[1]] = data[property] === '' ? '' : nameArr.join(',')\n        data[property + multiplefieldkeys[2]] = data[property] === '' ? [] : idArr\n        data[property + multiplefieldkeys[0]] = data[property] === '' ? [] : codeArr\n        data[property + multiplefieldkeys[1]] = data[property] === '' ? [] : nameArr\n        data[property + multiplefieldkeys[3]] = data[property] === '' ? '' : codeArr.map((item, index) => {\n          return defaultGlobalUtils.formatLabel(format, {\n            [valueKeys[0]]: codeArr[index],\n            [valueKeys[1]]: nameArr[index],\n            [valueKeys[2]]: idArr[index]\n          }, valueKeys)\n        }).join(',')\n      }\n      if ($form.$parent.editable !== false && props.editable !== false) {\n        return [\n          h('BsTree', {\n            props: {\n              ref: 'vxe-tree-' + property,\n              editable: true,\n              value: data[property],\n              ...props,\n              treeData: options || [],\n              isDropSelectTree: true\n            },\n            on: {\n              input: (value) => {\n                data[property] = value\n                // 聚焦向外分发事件\n                props?.autoFocusDispatch && $form.$parent.itemChange({ $form, property, itemValue: data[property], data, renderOpts, node: {}, treeData: [] })\n              },\n              onNodeClick({ node, treeData, value }) {\n                // limitCheckedEnd 标识只能选取末级\n                if (node !== null && (!props.limitCheckedEnd || (!node.children || (node.children && !node.children.length)))) {\n                  renderData[property + fieldkeys[2]] = node[valueKeys[2]]\n                  renderData[property + fieldkeys[0]] = node[valueKeys[0]]\n                  renderData[property + fieldkeys[1]] = node[valueKeys[1]]\n                } else {\n                  renderData[property + fieldkeys[2]] = (node && value) ? (data[property + fieldkeys[2]] || '') : ''\n                  renderData[property + fieldkeys[0]] = (node && value) ? (data[property + fieldkeys[0]] || '') : ''\n                  renderData[property + fieldkeys[1]] = (node && value) ? (data[property + fieldkeys[1]] || '') : ''\n                  value = ((node && value) && data[property]) || ''\n                }\n                renderData[property + multiplefieldkeys[3]] = value\n                $form.$parent.itemChange({ $form, property, itemValue: data[property], data, renderOpts, node, treeData })\n              },\n              onNodeCheckClick({ node, nodes, treeData, value }) {\n                renderData[property + multiplefieldkeys[2]] = nodes.map((item, index) => {\n                  return item[valueKeys[2]] ? item[valueKeys[2]] : ''\n                })\n                renderData[property + multiplefieldkeys[0]] = nodes.map((item, index) => {\n                  return item[valueKeys[0]] ? item[valueKeys[0]] : ''\n                })\n                renderData[property + multiplefieldkeys[1]] = nodes.map((item, index) => {\n                  return item[valueKeys[1]] ? item[valueKeys[1]] : ''\n                })\n                renderData[property + fieldkeys[2]] = renderData[property + multiplefieldkeys[2]].join(',')\n                renderData[property + fieldkeys[0]] = renderData[property + multiplefieldkeys[0]].join(',')\n                renderData[property + fieldkeys[1]] = renderData[property + multiplefieldkeys[1]].join(',')\n                data[property + multiplefieldkeys[3]] = value\n                $form.$parent.itemChange({ $form, property, itemValue: data[property], data, renderOpts, node, nodes, treeData })\n              }\n            }\n          })\n        ]\n      } else {\n        return [<span class=\"text block tl\">{data[property + multiplefieldkeys[3]]}</span>]\n      }\n    }\n  },\n  $vxeSelect: {\n    // 下拉选择\n    renderDefault(h, { props = {}, options }, { row, column }, context) {\n      row[column.property] = (row[column.property] + '').replace(/null|undefined/ig, '')\n      if (props.multiple) {\n        row[column.property + '__multiple'] = (row[column.property] === '') ? [] : row[column.property].split(',')\n        let arrValue = []\n        options.forEach((item, index) => {\n          if (row[column.property + '__multiple'].indexOf(item.value + '') >= 0) {\n            arrValue.push(item.label)\n          }\n        })\n        row[column.property + '__viewSort'] = arrValue.join(',')\n        return [<span>{row[column.property + '__viewSort']}</span>]\n      } else {\n        let arrValue = []\n        options.forEach((item, index) => {\n          if (row[column.property] + '' === item.value + '') {\n            arrValue.push(item.label)\n          }\n        })\n        row[column.property + '__viewSort'] = arrValue.join(',')\n        return [<span>{row[column.property + '__viewSort']}</span>]\n      }\n    },\n    renderCell(h, { props = {}, options }, { row, column }, context) {\n      row[column.property] = (row[column.property] + '').replace(/null|undefined/ig, '')\n      // // row[column.property] = typeof (row[column.property]) === 'string' ? row[column.property] : (Array.isArray(row[column.property]) ? row[column.property].join(',') : '')\n      if (props.multiple) {\n        row[column.property + '__multiple'] = (row[column.property] === '') ? [] : row[column.property].split(',')\n        let arrValue = []\n        options.forEach((item, index) => {\n          if (row[column.property + '__multiple'].indexOf(item.value + '') >= 0) {\n            arrValue.push(item.label)\n          }\n        })\n        row[column.property + '__viewSort'] = arrValue.join(',')\n        return [\n          <span>{row[column.property + '__viewSort']}</span>\n        ]\n      } else {\n        let arrValue = []\n        options.forEach((item, index) => {\n          if (row[column.property] + '' === item.value + '') {\n            arrValue.push(item.label)\n          }\n        })\n        row[column.property + '__viewSort'] = arrValue.join(',')\n        return [\n          <span>{row[column.property + '__viewSort']}</span>\n        ]\n      }\n    },\n    renderEdit(h, renderOpts, params, context) {\n      let { props = {}, options } = renderOpts\n      let { row, column } = params\n      let bsTable = context.$grid.$parent\n      row[column.property] = typeof (row[column.property]) === 'string' ? row[column.property] : (Array.isArray(row[column.property]) ? row[column.property].join(',') : '')\n      if (props.multiple) {\n        row[column.property + '__multiple'] = row[column.property + '__multiple'] = (row[column.property] === '') ? [] : row[column.property].split(',')\n      }\n      return [\n        h('vxe-select', {\n          props: {\n            ref: 'vxe-select-' + column.property,\n            value: props.multiple ? row[column.property + '__multiple'] : row[column.property],\n            placeholder: '请选择',\n            ...props,\n            transfer: true\n          },\n          on: {\n            change: ({ value }) => {\n              let arrValue = []\n              if (props.multiple) {\n                row[column.property + '__multiple'] = value\n                row[column.property] = value.join(',')\n                options.forEach((item, index) => {\n                  if (row[column.property + '__multiple'].indexOf(item.value + '') >= 0) {\n                    arrValue.push(item.label)\n                  }\n                })\n                bsTable.cellOptionCallBack(params, { optionType: 'select', multiple: props.multiple, value, viewValue: arrValue, field: column.property, renderOpts })\n              } else {\n                row[column.property] = value\n                options.forEach((item, index) => {\n                  if (row[column.property] + '' === item.value + '') {\n                    arrValue.push(item.label)\n                  }\n                })\n                bsTable.cellOptionCallBack(params, { optionType: 'select', multiple: props.multiple, value, viewValue: arrValue[0], field: column.property, renderOpts })\n              }\n            }\n          }\n        }, options.map(item => {\n          return h('vxe-option', {\n            props: {\n              value: String(item.value),\n              label: item.label\n            }\n          })\n        }))\n      ]\n    },\n    renderItem(h, renderOpts, { $form, property, data }) {\n      let { props = {}, options } = renderOpts\n      data[property] = (data[property] + '').replace(/null|undefined/ig, '')\n      // if (props.multiple) {\n      //   data[property + '__multiple'] = (data[property] === '') ? [] : data[property].split(',')\n      // }\n      if ($form.$parent.editable !== false && props.editable !== false) {\n        return [\n          h('vxe-select', {\n            props: {\n              ref: 'vxe-select-' + property,\n              value: props.multiple ? data[property + '__multiple'] : data[property],\n              placeholder: '请选择',\n              ...props,\n              transfer: true\n            },\n            on: {\n              change: ({ value }) => {\n                if (props.multiple) {\n                  data[property + '__multiple'] = value\n                  data[property] = value.join(',')\n                } else {\n                  data[property] = value\n                }\n                $form.$parent.itemChange({ $form, property, itemValue: data[property], data, renderOpts })\n              }\n            }\n          }, options.map(item => {\n            return [\n              h('vxe-option', {\n                props: {\n                  disabled: item.disabled,\n                  value: String(item.value),\n                  label: item.label\n                }\n              })\n            ]\n          }))\n        ]\n      } else {\n        data[property + '__multiple'] = (data[property] === '') ? [] : data[property].split(',')\n        let arrValue = []\n        options.forEach((item, index) => {\n          if (data[property + '__multiple'].indexOf(item.value + '') >= 0) {\n            arrValue.push(item.label)\n          }\n        })\n        data[property + '__viewSort'] = arrValue.join(',')\n        return [<span class=\"text block\">{data[property + '__viewSort']}</span>]\n      }\n    }\n  },\n  $vxeCheckbox: {\n    renderDefault(h, { options, props = {} }, { row, column }, context) {\n      row[column.property] = typeof (row[column.property]) === 'string' ? row[column.property] : (Array.isArray(row[column.property]) ? row[column.property].join(',') : '')\n      row[column.property + '__multiple'] = row[column.property].split(',')\n      let value = []\n      options.forEach((item, index) => {\n        item.value = item.value + ''\n        if (row[column.property + '__multiple'].indexOf() >= 0) {\n          value.push(item.label)\n        }\n      })\n      row[column.property + '__viewSort'] = value.join(',')\n      return [<span>{row[column.property + '__viewSort']}</span>]\n    },\n    renderCell(h, { options, props = {} }, { row, column }) {\n      row[column.property] = typeof (row[column.property]) === 'string' ? row[column.property] : (Array.isArray(row[column.property]) ? row[column.property].join(',') : '')\n      row[column.property + '__multiple'] = row[column.property].split(',')\n      let value = []\n      options.forEach((item, index) => {\n        item.value = item.value + ''\n        if (row[column.property + '__multiple'].indexOf(item.value + '') >= 0) {\n          value.push(item.label)\n        }\n      })\n      row[column.property + '__viewSort'] = value.join(',')\n      return [<span>{row[column.property + '__viewSort']}</span>]\n    },\n    renderEdit(h, { options, props = {}, propsC = {} }, { row, column }) {\n      row[column.property] = typeof (row[column.property]) === 'string' ? row[column.property] : (Array.isArray(row[column.property]) ? row[column.property].join(',') : '')\n      row[column.property + '__multiple'] = row[column.property].split(',')\n      // return [\n      //   <vxe-checkbox-group {...{ props }} v-model={row[column.property]} placeholder=\"请选择\">\n      //     {options.map((item, index) => {\n      //       return [\n      //         <vxe-checkbox\n      //           label={item.value}\n      //           { ...{ propsC } }\n      //         >1\n      //           {item.label}\n      //         </vxe-checkbox>\n      //       ]\n      //     })}\n      //   </vxe-checkbox-group>\n      // ]\n      return [\n        h('vxe-checkbox-group', {\n          props: {\n            value: row[column.property + '__multiple'],\n            ...props\n          },\n          on: {\n            change({ $event, checked, checklist, label }) {\n              row[column.property + '__multiple'] = checklist\n              row[column.property] = checklist.join(',')\n            }\n          }\n        }, options.map(item => {\n          return h('vxe-checkbox', {\n            props: {\n              disabled: item.disabled,\n              label: String(item.value),\n              ...propsC\n            }\n          }, item.label)\n        }))\n      ]\n    },\n    renderItem(h, renderOpts, { $form, property, data }) {\n      let { props = {}, propsC = {}, options } = renderOpts\n      // if (Array.isArray(data[property])) {\n      //   data[property + '__multiple'] = [...data[property]]\n      // } else if (typeof data[property] === 'string') {\n      //   data[property + '__multiple'] = data[property].split(',')\n      // } else {\n      //   data[property] = ''\n      //   data[property + '__multiple'] = []\n      // }\n      if ($form.$parent.editable !== false && props.editable !== false) {\n        return [\n          h('vxe-checkbox-group', {\n            props: {\n              value: data[property + '__multiple'],\n              ...props\n            },\n            on: {\n              change({ $event, checked, checklist, label }) {\n                data[property] = checklist.join(',')\n                $form.$parent.itemChange({ $form, property, itemValue: data[property], data, renderOpts })\n              }\n            }\n          }, options.map(item => {\n            return h('vxe-checkbox', {\n              props: {\n                disabled: item.disabled,\n                label: String(item.value),\n                ...propsC\n              }\n            }, item.label)\n          }))\n        ]\n      } else {\n        return [\n          h('vxe-checkbox-group', {\n            props: {\n              value: data[property + '__multiple'],\n              ...props\n            },\n            on: {\n              change({ $event, checked, checklist, label }) {\n                data[property] = checklist.join(',')\n                $form.$parent.itemChange({ $form, property, itemValue: checklist, data, renderOpts })\n              }\n            }\n          }, options.map(item => {\n            return h('vxe-checkbox', {\n              props: {\n                disabled: true,\n                label: String(item.value),\n                ...propsC\n              }\n            }, item.label)\n          }))\n        ]\n      }\n    }\n  },\n  // 单值\n  $vxeInput: {\n    // 输入框\n    autofocus: '.vxe-input--inner',\n    renderEdit(h, { props = {} }, { row, column }) {\n      props = Object.assign({ type: 'text', placeholder: '请输入' }, props || {})\n      return [\n        <vxe-input\n          v-model={row[column.property]}\n          placeholder=\"请输入\"\n          clearable\n          {...{ props }}\n          transfer={true}\n        ></vxe-input>\n        // <input class=\"my-cell\" text=\"text\" v-model={ row[column.property] } />\n      ]\n    },\n    renderCell(h, { props = {} }, { row, column }, context) {\n      let bsTable = context.$grid.$parent\n      const type = (props && props.type) || 'text'\n      const hiddenZero = (props && props.hiddenZero) || false\n      row[column.property] = (row[column.property] + '').replace(/null|undefined/ig, '')\n      switch (type) {\n        case 'integer':\n          row[column.property + '__viewSort'] = isNaN(parseInt(row[column.property])) ? '0' : parseInt(row[column.property])\n          break\n        case 'number':\n          let numValue = isNaN(parseFloat(row[column.property])) ? '0' : parseFloat(row[column.property])\n          row[column.property + '__viewSort'] = (+numValue === 0 && hiddenZero) ? '' : numValue\n          break\n        case 'float':\n          row[column.property + '__viewSort'] = bsTable.transToNumber(row[column.property], props.digits || 2)\n          break\n        default:\n          row[column.property + '__viewSort'] = row[column.property]\n      }\n      return [<span class=\"text block\">{row[column.property + '__viewSort']}</span>]\n    },\n    renderDefault(h, { props = {} }, { row, column }, context) {\n      let bsTable = context.$grid.$parent\n      const type = (props && props.type) || 'text'\n      const hiddenZero = (props && props.hiddenZero) || false\n      row[column.property] = (row[column.property] + '').replace(/null|undefined/ig, '')\n      switch (type) {\n        case 'integer':\n          row[column.property + '__viewSort'] = isNaN(parseInt(row[column.property])) ? '0' : parseInt(row[column.property])\n          break\n        case 'number':\n          let numValue = isNaN(parseFloat(row[column.property])) ? '0' : parseFloat(row[column.property])\n          row[column.property + '__viewSort'] = (+numValue === 0 && hiddenZero) ? '' : numValue\n          break\n        case 'float':\n          let floatNumValue = bsTable.transToNumber(row[column.property], props.digits || 2)\n          row[column.property + '__viewSort'] = (+floatNumValue === 0 && hiddenZero) ? '' : floatNumValue\n          break\n        default:\n          row[column.property + '__viewSort'] = row[column.property]\n      }\n      return [<span class=\"text block\">{row[column.property + '__viewSort']}</span>]\n    },\n    renderItem(h, renderOpts, { $form, property, data, item }) {\n      let { props = {} } = renderOpts\n      props = Object.assign({ type: 'text', placeholder: '请输入' }, props)\n      if ($form.$parent.editable !== false && props.editable !== false) {\n        return [\n          h('vxe-input', {\n            ref: 'vxe-input' + property,\n            props: {\n              value: data[property],\n              ...props,\n              transfer: true\n            },\n            on: {\n              input(value) {\n                data[property] = value\n              },\n              blur({ value }) {\n                data[property] = value\n                $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <span class=\"text block\"> {data[property]} </span>\n        ]\n      }\n    }\n  },\n  $vxeCalculate: {\n    // 计算列\n    // let row = {\n    //   a: 1,\n    //   b: 2,\n    //   c: 3\n    // }\n    // let formula = 'Math.pow({a}+{b},{c})'\n    // for (let k in row) {\n    // let reg = new RegExp('({' + k + '})', 'ig')\n    //   if (reg.test(formula)) {\n    //     formula = formula.replace(reg, row[k])\n    //   }\n    // }\n    // let calcResult = (new Function('console.log(formula);return eval(formula)'))()\n    renderDefault(h, renderOpts, { $columnIndex, $rowIndex, items, column, data, row, $seq, $table, $type, columnIndex, isEdit, level, rowIndex, seq }, context) {\n      return defaultGlobalUtils.calculateRender(h, renderOpts, { $columnIndex, $rowIndex, items, column, data, row, $seq, $table, $type, columnIndex, isEdit, level, rowIndex, seq }, context)\n    },\n    renderCell(h, renderOpts, { $columnIndex, $rowIndex, items, column, data, row, $seq, $table, $type, columnIndex, isEdit, level, rowIndex, seq }, context) {\n      return defaultGlobalUtils.calculateRender(h, renderOpts, { $columnIndex, $rowIndex, items, column, data, row, $seq, $table, $type, columnIndex, isEdit, level, rowIndex, seq }, context)\n    },\n    renderEdit(h, renderOpts, { $columnIndex, $rowIndex, items, column, data, row, $seq, $table, $type, columnIndex, isEdit, level, rowIndex, seq }, context) {\n      return defaultGlobalUtils.calculateRender(h, renderOpts, { $columnIndex, $rowIndex, items, column, data, row, $seq, $table, $type, columnIndex, isEdit, level, rowIndex, seq }, context)\n      // return [\n      //   <vxe-input\n      //     v-model={row[column.property]}\n      //     placeholder=\"自动计算\"\n      //     readonly\n      //     clearable\n      //   ></vxe-input>\n      // ]\n    },\n    renderItem(h, renderOpts, { $form, data, property }) {\n      return defaultGlobalUtils.formCalculateRender(h, renderOpts, { $form, data, property })\n    }\n  },\n  $vxeMoney: {\n    // 输入框\n    autofocus: '.vxe-input--inner',\n    renderDefault(h, { props = {} }, { row, column, $grid }, context) {\n      let bsTable = context.$grid.$parent\n      let moneyUnit = bsTable.moneyUnit ? bsTable.moneyUnit : 1\n      let isRound = bsTable.isRoundIn\n      let showZero = bsTable.showZero\n\n      // 不显示空数据（null，接口中可能返回null）\n      const hideEmptyValue = bsTable.hideEmptyValue\n      const isEmptyValue = row[column.property] === null\n      if (isEmptyValue && hideEmptyValue) {\n        return [<span class=\"text\"></span>]\n      }\n\n      let zero = bsTable.transToNumber('', props.digits || 2, isRound)\n      let val = bsTable.transToNumber(row[column.property], props.digits || 2, isRound)\n      // const digits = props.digits || (moneyUnit === 10000 ? 4 : 2) // 万元显示4位，元显示2位\n      let digits = props.digits || 2\n      // 显示整数处理\n      if (props.type === 'integer') {\n        digits = 0\n      }\n      if (val === zero && showZero) {\n        val = '0.00'\n      } else if (bsTable.toolbarConfigInCopy.moneyInputSwich) {\n        val = bsTable.transToNumber(bsTable.accurateChuFa(val, moneyUnit), digits, isRound)\n      } else { }\n      val = bsTable.transToNumberLocalString(val, digits, isRound)\n      let zeroNum = bsTable.transToNumber('', digits, isRound)\n      const showVal = val === zeroNum ? (showZero ? zeroNum : '') : val\n      row[column.property + '__viewSort'] = val\n      return [<span class=\"text\">{showVal}</span>]\n    },\n    renderCell(h, { props = {} }, { row, column, $grid }, context) {\n      let bsTable = context.$grid.$parent\n      let moneyUnit = bsTable.moneyUnit ? bsTable.moneyUnit : 1\n      let isRound = bsTable.isRoundIn\n      let showZero = bsTable.showZero\n\n      // 不显示空数据（null，接口中可能返回null）\n      const hideEmptyValue = bsTable.hideEmptyValue\n      console.log(bsTable.hideEmptyValue, row[column.property])\n      const isEmptyValue = row[column.property] === null\n      if (isEmptyValue && hideEmptyValue) {\n        return [<span class=\"text\"></span>]\n      }\n\n      let zero = bsTable.transToNumber('', props.digits || 2, isRound)\n      let val = bsTable.transToNumber(row[column.property], props.digits || 2, isRound)\n      // const digits = props.digits || (moneyUnit === 10000 ? 4 : 2) // 万元显示4位，元显示2位\n      let digits = props.digits || 2\n      // 显示整数处理\n      if (props.type === 'integer') {\n        digits = 0\n      }\n      if (val === zero && showZero) {\n        val = '0.00'\n      } else if (bsTable.toolbarConfigInCopy.moneyInputSwich) {\n        val = bsTable.transToNumber(bsTable.accurateChuFa(val, moneyUnit), digits, isRound)\n      } else { }\n\n      val = bsTable.transToNumberLocalString(val, digits, isRound)\n      let zeroNum = bsTable.transToNumber('', digits, isRound)\n      const showVal = val === zeroNum ? (showZero ? zeroNum : '') : val\n      row[column.property + '__viewSort'] = val\n\n      return [<span class=\"text\">{showVal}</span>]\n    },\n    renderEdit(h, renderOpts, params, context) {\n      let { props = {} } = renderOpts\n      let { row, column } = params\n      let bsTable = context.$grid.$parent\n      let moneyInputSwich = context.$grid.$parent.toolbarConfigIn ? context.$grid.$parent.toolbarConfigIn.moneyInputSwich : false\n      let moneyUnit = moneyInputSwich ? (context.$grid.$parent.moneyUnit ? context.$grid.$parent.moneyUnit : 1) : 1\n      let isRound = bsTable.isRoundIn\n      // 匹配如果为空时输入-号也可正常输入显示\n      let val = (row[column.property] === '-') ? '-' : ((row[column.property] + '').replace(/null|undefined|NaN/ig, '') / moneyUnit).toFixed(2).toString().replace('.', '') * moneyUnit / 100\n      // let val = (row[column.property] + '').replace(/null|undefined|NaN/ig, '')\n      let digits = bsTable.tableConfigCp.globalConfig.moneyLimit ? String(moneyUnit).length - 1 + 2 : 2\n      const { min = -9007199254740991, max = 9007199254740991 } = props\n      let inputdigits = props.inputdigits || digits || 2\n      // 输入整数处理, 限制只能输入整数\n      if (props.type === 'integer') {\n        inputdigits = 0\n        digits = 0\n      }\n      // row[column.property + '__moneySwitchinput'] = (val === '-' || val === '') ? (row[column.property + '__moneySwitchinput'] === '-' ? '-' : '') : bsTable.accurateChuFa(val, moneyUnit) + ''\n      // row[column.property + '__moneySwitchinput'] = (val === '-' || val === '') ? (row[column.property + '__moneySwitchinput'] === '-' ? '-' : '') : bsTable.accurateMaxFixed(bsTable.accurateChuFa(val, moneyUnit), digits) + ''\n      // 解决第二次编辑不能输入小数点的问题\n      if (!(row[column.property + '__moneySwitchinput'] && (row[column.property + '__moneySwitchinput'] + '').split('.')[1]?.length <= 0)) row[column.property + '__moneySwitchinput'] = (val === '-' || val === '') ? (row[column.property + '__moneySwitchinput'] === '-' ? '-' : '') : bsTable.accurateChuFa(val, moneyUnit).toString()\n      return [\n        h('vxe-input', {\n          ref: 'vxe-input' + column.property,\n          props: {\n            value: row[column.property + '__moneySwitchinput'],\n            step: 1,\n            min: -9007199254740991,\n            max: 9007199254740991,\n            clearable: true,\n            placeholder: '请输入',\n            digits: digits || 2,\n            ...props,\n            readonly: props.readonly || props.disabled,\n            type: 'text'\n          },\n          on: {\n            focus() {\n              renderOpts.inputStatus = true\n            },\n            input(value) {\n              // 因默认聚焦时值为0，输入-号后后不满足下面正则，会把-号丢失将前面-替换掉，导致聚焦时无法输入-号\n              value = value.replace(/^[0-9]?-/, '-')\n              var $event = window.event\n              // 限制只能输入整数\n              if (props.type === 'integer') {\n                $event.currentTarget.value = value.toString().match(/^-?[0-9]\\d*$/) || value.match(/-?/)\n              }\n            },\n            keyup({ value, $event }) {\n            },\n            change({ value, $event }) {\n              // const hasComma = value.split('.')[1]\n              const valueLen = (value.split('.')[1] || '').length\n              const isTrue = moneyUnit === 10000 ? valueLen <= (bsTable.tableConfigCp.globalConfig.moneyLimit ? 6 : 2) : valueLen <= 2 // 万元小数点后最多6位， 元小数点后最多2位\n              if (isTrue) {\n                value = bsTable.transInputToNumber($event.currentTarget.value)\n                $event.currentTarget.value = value\n                row[column.property + '__moneySwitchinput'] = value\n                if (renderOpts.inputStatus) {\n                  if (value > max) {\n                    value = max\n                  } else if (value < min) {\n                    value = min\n                  }\n                  row[column.property + '__moneySwitchinput'] = value\n                  $event.currentTarget.value = value\n                }\n                // 匹配如果为空时输入-号也可正常输入显示\n                row[column.property] = (value === '') ? '' : (value === '-') ? '-' : bsTable.accurateChengFa(value, moneyUnit)\n                // row[column.property] = (value === '-' || value === '') ? '' : bsTable.accurateChengFa(value, moneyUnit)\n              } else {\n                const oldValue = row[column.property + '__moneySwitchinput']\n                $event.currentTarget.value = oldValue\n                value = oldValue\n              }\n            },\n            blur({ value, $event }) {\n              let _v = value\n              // 匹配如果为空时输入-号也可正常输入显示，如只输入了符号失去焦点值需清空\n              if (value === '-') value = ''\n              if (value && (value + '').split('.')[1]?.length <= 0) _v = (value + '').replace('.', '')\n              renderOpts.inputStatus = false\n              value = bsTable.transInputToNumber(_v)\n              $event.currentTarget.value = value\n              row[column.property + '__moneySwitchinput'] = value\n              row[column.property] = bsTable.transToNumber(bsTable.accurateChengFa(row[column.property + '__moneySwitchinput'], moneyUnit), inputdigits, isRound)\n              bsTable.cellOptionCallBack(params, { optionType: 'input', value: row[column.property], field: column.property, renderOpts })\n            }\n          }\n        })\n      ]\n    },\n    renderItem(h, renderOpts, { $form, data, property }) {\n      let bsForm = $form.$parent\n      let { editable, itemChange, constrainDataMap = {} } = bsForm\n      let { props = {} } = renderOpts\n      let moneyInputSwich = bsForm.moneyInputSwich || false\n      let moneyUnit = moneyInputSwich ? (bsForm.moneyUnit || 1) : 1\n      let isRound = bsForm.isRound\n      let curConstrainDataMap = Object.assign({}, constrainDataMap[property] || {})\n      let inputdigits = 2\n      let digits = 2\n      if (curConstrainDataMap['value'] !== undefined) {\n        data[property] = String(curConstrainDataMap['value'])\n        delete curConstrainDataMap['value']\n      }\n      let val = (data[property] + '').replace(/null|undefined|NaN/ig, '')\n      props.inputdigits = String(moneyUnit).length - 1 + 2\n      props = Object.assign({ type: 'text', placeholder: '请输入' }, props, curConstrainDataMap)\n      // data[property + '__moneySwitchinput'] = bsForm.accurateChuFa((data[property] + '').replace(/null|undefined|NaN/ig, ''), moneyUnit) + ''\n      inputdigits = props.inputdigits || props.digits || 2\n      // 输入整数处理, 限制只能输入整数\n      if (props.type === 'integer') {\n        inputdigits = 0\n        digits = 0\n      }\n      if (props.thousandsSymbolView !== false) {\n        const { min = -9007199254740991, max = 9007199254740991 } = props\n        if (!renderOpts.inputStatus) {\n          data[property + '__moneySwitchinput'] = (val === '-' || val === '') ? (data[property + '__moneySwitchinput'] === '-' ? '-' : '') : bsForm.transToNumberLocalString(bsForm.accurateChuFa(val, moneyUnit), inputdigits)\n        }\n        if (editable !== false) {\n          return [\n            h('vxe-input', {\n              ref: 'vxe-input-' + property,\n              props: {\n                value: data[property + '__moneySwitchinput'],\n                ...props,\n                readonly: props.readonly,\n                disabled: props.disabled || props.editable === false,\n                type: 'text'\n              },\n              on: {\n                focus({ value, $event }) {\n                  renderOpts.inputStatus = true\n                  value = bsForm.transInputToNumber($event.currentTarget.value, inputdigits)\n                  data[property + '__moneySwitchinput'] = value\n                  $event.currentTarget.value = value\n                },\n                input(value) {\n                  var $event = window.event\n                  // 限制只能输入整数\n                  if (props.type === 'integer') {\n                    $event.currentTarget.value = value.toString().match(/^-?[0-9]\\d*$/) || value.match(/-?/)\n                  } else {\n                    // $event.currentTarget.value = value.toString().match(/^\\d+(?:\\.\\d{0,0})?/)\n                    value = bsForm.transInputToNumber($event.currentTarget.value, inputdigits)\n                    if (renderOpts.inputStatus) {\n                      if (value > max) {\n                        value = max\n                      } else if (value < min) {\n                        value = min\n                      }\n                      data[property + '__moneySwitchinput'] = value\n                      $event.currentTarget.value = value\n                    }\n                    data[property] = (value === '-' || value === '') ? '' : bsForm.accurateChengFa(data[property + '__moneySwitchinput'], moneyUnit)\n                  }\n                },\n                change({ value, $event }) {\n                  renderOpts.inputing = true\n                  $event = $event || window.event\n                  value = bsForm.transInputToNumber($event.currentTarget.value, inputdigits)\n                  if (renderOpts.inputStatus) {\n                    if (value > max) {\n                      value = max\n                    } else if (value < min) {\n                      value = min\n                    }\n                    data[property + '__moneySwitchinput'] = value\n                    $event.currentTarget.value = value\n                  }\n                  data[property] = (value === '-' || value === '') ? '' : bsForm.accurateChengFa(data[property + '__moneySwitchinput'], moneyUnit)\n                },\n                blur({ value, $event }) {\n                  if (renderOpts.inputing === true) {\n                    value = bsForm.transToNumber($event.currentTarget.value, inputdigits, isRound)\n                    data[property] = bsForm.accurateChengFa(value, moneyUnit)\n                    value = bsForm.transToNumberLocalString(value, digits)\n                    $event.currentTarget.value = value\n                    data[property + '__moneySwitchinput'] = value\n                    itemChange({ $form, property, itemValue: data[property], data, renderOpts })\n                  } else {\n                    value = bsForm.transToNumberLocalString(value, digits)\n                    $event.currentTarget.value = value\n                    data[property + '__moneySwitchinput'] = value\n                  }\n                  renderOpts.inputing = false\n                  renderOpts.inputStatus = false\n                }\n              }\n            })\n          ]\n        } else {\n          if ($form.$parent.uneditableBorder) {\n            return [<span class=\"text tl border-text\">{data[property + '__moneySwitchinput']}</span>]\n          } else {\n            return [<span class=\"text\">{data[property + '__moneySwitchinput']}</span>]\n          }\n        }\n      } else {\n        data[property + '__moneySwitchinput'] = (val === '-' || val === '') ? (data[property + '__moneySwitchinput'] === '' ? '' : '') : bsForm.accurateChuFa(val, moneyUnit) + ''\n        if (editable !== false && props.editable !== false) {\n          return [\n            h('vxe-input', {\n              ref: 'vxe-input' + property,\n              props: {\n                value: data[property + '__moneySwitchinput'],\n                step: 1,\n                maxlength: 14,\n                min: 0,\n                max: 1000000000000,\n                digits: props.digits || 2,\n                type: 'float',\n                ...props,\n                readonly: props.readonly,\n                disabled: props.disabled || props.editable === false\n              },\n              on: {\n                input(value, $event) {\n                  $event = $event || window.event\n                  value = bsForm.transInputToNumber($event.currentTarget.value)\n                  $event.currentTarget.value = value\n                  data[property + '__moneySwitchinput'] = value\n                  data[property] = (value === '-' || value === '') ? '' : bsForm.accurateChengFa(data[property + '__moneySwitchinput'], moneyUnit)\n                },\n                blur({ value }) {\n                  data[property + '__moneySwitchinput'] = value\n                  data[property] = bsForm.transToNumber(bsForm.accurateChengFa(data[property + '__moneySwitchinput'], moneyUnit), inputdigits, isRound)\n                  bsForm.itemChange({ $form, property, itemValue: data[property], data, renderOpts })\n                }\n              }\n            })\n          ]\n        } else {\n          if ($form.$parent.uneditableBorder) {\n            return [<span class=\"text tl border-text\">{ data[property + '__moneySwitchinput']}</span>]\n          } else {\n            return [<span class=\"text\">{ data[property + '__moneySwitchinput']}</span>]\n          }\n        }\n      }\n    }\n  },\n  $vxeEditDownTextarea: {\n    autofocus: '.vxe-input--inner',\n    renderDefault(h, cellRender, { row, column }, context) {\n      row[column.property] = (row[column.property] + '').replace(/null|undefined/ig, '')\n      row[column.property + '__viewSort'] = row[column.property]\n      return [<span class=\"text\">{context.$grid.$parent.getHighlightedFilterText(row[column.property + '__viewSort'])}</span>]\n    },\n    renderCell(h, cellRender, { row, column }, context) {\n      row[column.property] = (row[column.property] + '').replace(/null|undefined/ig, '')\n      row[column.property + '__viewSort'] = row[column.property]\n      return [<span class=\"text\">{context.$grid.$parent.getHighlightedFilterText(row[column.property + '__viewSort'])}</span>]\n    },\n    renderEdit(h, renderOpts, params, context) {\n      renderOpts = defaultGlobalUtils.deepCopy(renderOpts)\n      // renderOpts = defaultGlobalUtils.mergeContrainConfig(renderOpts, params, context)\n      let { props = {} } = renderOpts\n      let { column, row } = params\n      let bsTable = context.$grid.$parent\n      return [\n        h('edit-down-textarea', {\n          ref: 'vxe-edit-down-textarea' + column.property,\n          props: {\n            type: 'table',\n            clearable: true,\n            params: params,\n            props: props\n          },\n          on: {\n            change({ value }) {\n              row[column.property] = value\n            },\n            blur({ value, $event }) {\n              bsTable.cellOptionCallBack(params, { value, $event, renderOpts })\n            }\n          }\n        })\n      ]\n    },\n    renderItem(h, renderOpts, { $form, property, data }) {\n      const { props = {} } = renderOpts\n      if ($form.$parent.editable !== false && props.editable !== false) {\n        return [\n          h('vxe-textarea', {\n            ref: 'vxe-textarea' + property,\n            props: {\n              value: data[property] + '',\n              clearable: true,\n              ...props,\n              maxlength: props.maxlength || 1000,\n              showWordCount: true,\n              disabled: props.disabled\n            },\n            on: {\n              change({ value }) {\n                data[property] = value\n              },\n              blur({ value }) {\n                data[property] = value\n                $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n              }\n            }\n          })\n        ]\n      } else {\n        if ($form.$parent.uneditableBorder) {\n          return [<span class=\"text tl border-text\">{data[property]}</span>]\n        } else {\n          return [<span class=\"text\"> {data[property]} </span>]\n        }\n      }\n    }\n  },\n  $vxeDays: {\n    autofocus: '.vxe-input--inner',\n    // 天数渲染器，不足0.25天按0记，大于0.75天按1天记，其他按0.5天记\n    renderCell(h, { props }, { row, column }) {\n      let quiteDay = row[column.property] % 1\n      quiteDay = quiteDay <= 0.25 ? 0 : (quiteDay >= 0.75 ? 1 : 0.5)\n      row[column.property] = Math.floor(row[column.property] / 1) + quiteDay\n      row[column.property + '__viewSort'] = row[column.property]\n      return [<span>{row[column.property]}</span>]\n    },\n    renderDefault(h, { props }, { row, column }) {\n      let quiteDay = row[column.property] % 1\n      quiteDay = quiteDay <= 0.25 ? 0 : (quiteDay >= 0.75 ? 1 : 0.5)\n      row[column.property] = Math.floor(row[column.property] / 1) + quiteDay\n      row[column.property + '__viewSort'] = row[column.property]\n      return [<span>{row[column.property]}</span>]\n    },\n    renderEdit(h, { props }, { row, column }) {\n      return [\n        <vxe-input\n          placeholder = \"请输入天数\"\n          type=\"number\"\n          clearable\n          { ...{ props } }\n          v-model={row[column.property]}\n        ></vxe-input>\n      ]\n    },\n    renderItem(h, renderOpts, { $form, property, data, item }) {\n      let { props } = renderOpts\n      props = props || {}\n      if ($form.$parent.editable !== false && props.editable !== false) {\n        return [\n          h('vxe-input', {\n            ref: 'vxe-input' + property,\n            props: {\n              placeholder: '请输入天数',\n              type: 'number',\n              clearable: true,\n              value: data[property],\n              ...props\n            },\n            on: {\n              input(value) {\n                data[property] = value\n              },\n              blur({ value }) {\n                let quiteDay = data[property] % 1\n                quiteDay = quiteDay <= 0.25 ? 0 : (quiteDay >= 0.75 ? 1 : 0.5)\n                data[property] = Math.floor(data[property] / 1) + quiteDay\n                $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <span class=\"text block\"> {data[property]} </span>\n        ]\n      }\n    }\n  },\n  $vxeTime: {\n    autofocus: '.vxe-input--inner',\n    // 时间格式化渲染器\n    renderCell(h, { props }, { row, column }) {\n      props = props || {}\n      props.format = props.format || 'YYYY-MM-DD hh:mm:ss'\n      let dateTime = (row[column.property] + '').replace(/null|undefined/ig, '')\n      if (dateTime) {\n        let date = dateTime.length === 8 ? dateTime.substring(0, 4) + '-' + dateTime.substring(4, 6) + '-' + dateTime.substring(6, 8) : (dateTime.length === 14 ? dateTime.substring(0, 4) + '-' + dateTime.substring(4, 6) + '-' + dateTime.substring(6, 8) + ' ' + dateTime.substring(8, 10) + ':' + dateTime.substring(10, 12) + ':' + dateTime.substring(12, 14) : dateTime)\n        row[column.property + '__viewSort'] = isNaN(new Date(dateTime).getTime()) ? new Date(date).format(props.format) : new Date(dateTime).format(props.format)\n      } else {\n        row[column.property + '__viewSort'] = ''\n      }\n      return [<span>{ row[column.property + '__viewSort'] }</span>]\n    },\n    renderDefault(h, { props }, { row, column }) {\n      props = props || {}\n      props.format = props.format || 'YYYY-MM-DD hh:mm:ss'\n      let dateTime = (row[column.property] + '').replace(/null|undefined/ig, '')\n      if (dateTime) {\n        let date = dateTime.length === 8 ? dateTime.substring(0, 4) + '-' + dateTime.substring(4, 6) + '-' + dateTime.substring(6, 8) : (dateTime.length === 14 ? dateTime.substring(0, 4) + '-' + dateTime.substring(4, 6) + '-' + dateTime.substring(6, 8) + ' ' + dateTime.substring(8, 10) + ':' + dateTime.substring(10, 12) + ':' + dateTime.substring(12, 14) : dateTime)\n        row[column.property + '__viewSort'] = isNaN(new Date(dateTime).getTime()) ? new Date(date).format(props.format) : new Date(dateTime).format(props.format)\n      } else {\n        row[column.property + '__viewSort'] = ''\n      }\n      return [<span>{ row[column.property + '__viewSort'] }</span>]\n    },\n    renderEdit(h, { props }, { row, column }) {\n      return [\n        h('vxe-input', {\n          ref: 'vxe-input' + column.property,\n          props: {\n            placeholder: '请选择时间',\n            type: 'date',\n            clearable: true,\n            value: row[column.property + '__viewSort'],\n            ...props,\n            transfer: true\n          },\n          on: {\n            input(value) {\n              row[column.property + '__viewSort'] = value ? new Date(value).format(props.format) : ''\n              row[column.property] = row[column.property + '__viewSort']\n            },\n            blur({ value }) {\n              row[column.property + '__viewSort'] = value ? new Date(value).format(props.format) : ''\n              row[column.property] = row[column.property + '__viewSort']\n            }\n          }\n        })\n      ]\n    },\n    renderItem(h, renderOpts, { $form, property, data }) {\n      let { props } = renderOpts\n      props = props || {}\n      props.format = props.format || 'YYYY-MM-DD hh:mm:ss'\n      let dateTime = (data[property] + '').replace(/null|undefined/ig, '')\n      if (dateTime) {\n        let date = dateTime.length === 8 ? dateTime.substring(0, 4) + '-' + dateTime.substring(4, 6) + '-' + dateTime.substring(6, 8) : (dateTime.length === 14 ? dateTime.substring(0, 4) + '-' + dateTime.substring(4, 6) + '-' + dateTime.substring(6, 8) + ' ' + dateTime.substring(8, 10) + ':' + dateTime.substring(10, 12) + ':' + dateTime.substring(12, 14) : dateTime)\n        data[property + '__viewSort'] = isNaN(new Date(dateTime).getTime()) ? new Date(date).format(props.format) : new Date(dateTime).format(props.format)\n      } else {\n        data[property + '__viewSort'] = ''\n      }\n      if ($form.$parent.editable !== false && props.editable !== false) {\n        return [\n          h('vxe-input', {\n            ref: 'vxe-input' + property,\n            props: {\n              placeholder: '请选择时间',\n              type: 'date',\n              clearable: true,\n              value: data[property + '__viewSort'],\n              ...props,\n              transfer: true,\n              'disabled-method': ({ date }) => {\n                if (props.isLimitMinYear && props.minYear) {\n                  return Number(new Date(date).getFullYear()) < Number(props.minYear)\n                }\n                return false\n              }\n            },\n            on: {\n              input(value) {\n                data[property + '__viewSort'] = value ? new Date(value).format(props.format) : ''\n                // eslint-disable-next-line no-useless-escape\n                data[property] = data[property + '__viewSort']\n                // data[property] = data[property + '__viewSort'].replace(/[-\\/:\\s]/ig, '')\n                $form.$parent.itemChange({ $form, property, itemValue: data[property], itemViewValue: data[property + '__viewSort'], data, renderOpts })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <span class=\"text block\"> {data[property + '__viewSort']} </span>\n        ]\n      }\n    }\n  },\n  $vxeRadio: {\n    renderEdit(h, { options, props, propsC }, { row, column }) {\n      props = props || {}\n      propsC = propsC || {}\n      return [\n        <vxe-radio-group {...{ props }} v-model={row[column.property]} placeholder=\"请选择\">\n          {options.map((item, index) => {\n            return [\n              <vxe-radio\n                label={item.value}\n                { ...{ propsC } }\n              >\n                {item.label}\n              </vxe-radio>\n            ]\n          })}\n        </vxe-radio-group>\n      ]\n    },\n    renderDefault(h, { options, props }, { row, column }, context) {\n      let value = ''\n      options.forEach((item, index) => {\n        if (row[column.property] === item.value) {\n          value = item.label\n        }\n      })\n      row[column.property + '__viewSort'] = value\n      return [<span>{value}</span>]\n    },\n    renderCell(h, { options, props }, { row, column }) {\n      let value = ''\n      options.forEach((item, index) => {\n        if (row[column.property] === item.value) {\n          value = item.label\n        }\n      })\n      row[column.property + '__viewSort'] = value\n      return [<span>{value}</span>]\n    },\n    renderItem(h, renderOpts, { $form, property, data }) {\n      let { props, propsC, options } = renderOpts\n      if ($form.$parent.editable !== false && props.editable !== false) {\n        return [\n          h('vxe-radio-group', {\n            props: {\n              value: data[property],\n              ...props\n            },\n            on: {\n              change({ $event, label }) {\n                data[property] = label\n                $form.$parent.itemChange({ $form, property, itemValue: label, data, renderOpts })\n              }\n            }\n          }, options.map(item => {\n            return h('vxe-radio', {\n              props: {\n                disabled: item.disabled,\n                label: String(item.value),\n                ...propsC\n              }\n            }, item.label)\n          }))\n        ]\n      } else {\n        return [\n          h('vxe-radio-group', {\n            props: {\n              value: data[property],\n              ...props\n            },\n            on: {\n              change({ $event, label }) {\n                data[property] = label\n                $form.$parent.itemChange({ $form, property, itemValue: label, data, renderOpts })\n              }\n            }\n          }, options.map(item => {\n            return h('vxe-radio', {\n              props: {\n                disabled: true,\n                label: String(item.value),\n                ...propsC\n              }\n            }, item.label)\n          }))\n        ]\n      }\n    }\n  },\n  $vxeEditDownJson: {\n    autofocus: '.vxe-input--inner',\n    renderEdit(h, renderOpts, params) {\n      return [\n        <edit-down-json type={'table'} params={ params } ></edit-down-json>\n      ]\n    },\n    renderDefault(h, cellRender, { row, column }, context) {\n      let value = JSON.stringify(row[column.property])\n      row[column.property + '__viewSort'] = value\n      return [<span class=\"text block\">{value}</span>]\n    },\n    renderCell(h, cellRender, { row, column }, context) {\n      let value = JSON.stringify(row[column.property])\n      row[column.property + '__viewSort'] = value\n      return [<span class=\"text block\">{value}</span>]\n    },\n    renderItem(h, renderOpts, params) {\n      const { $form, property, data } = params\n      const { props } = renderOpts\n      if ($form.$parent.editable !== false && props.editable !== false) {\n        return [\n          h('edit-down-json', {\n            props: {\n              params: params\n            },\n            on: {\n              input(value) {\n                defaultGlobalUtils.debounceItemChange(() => {\n                  $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n                })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <edit-down-json type={'form'} params={ params }></edit-down-json>\n        ]\n      }\n    }\n  },\n  $vxeIntervar: {\n    autofocus: '.vxe-input--inner',\n    // 阶段选择 渲染器 基础版本\n    renderCell(h, { props }, params) {\n      const { row, column } = params\n      const propertyArr = column.property.split('##')\n      row[column.property] = row[propertyArr[0]] + '##' + row[propertyArr[1]]\n      row[column.property + '__viewSort'] = row[propertyArr[0]] + '至' + row[propertyArr[1]]\n      return [\n        <EditIntervarInput constProps = { props } params={ params } type='table' editable={false}></EditIntervarInput>\n      ]\n    },\n    renderDefault(h, { props }, params) {\n      const { row, column } = params\n      const propertyArr = column.property.split('##')\n      row[column.property] = row[propertyArr[0]] + '##' + row[propertyArr[1]]\n      row[column.property + '__viewSort'] = row[propertyArr[0]] + '至' + row[propertyArr[1]]\n      return [\n        <EditIntervarInput constProps={props} params={params} type='table' editable={false}></EditIntervarInput>\n      ]\n    },\n    renderEdit(h, { props }, params) {\n      return [\n        <EditIntervarInput constProps={props} params={params} type='table' editable={true}></EditIntervarInput>\n      ]\n    },\n    renderItem(h, renderOpts, params) {\n      const { $form, property, data } = params\n      const { props } = renderOpts\n      const propertyArr = property.split('##')\n      if ($form.$parent.editable !== false && props.editable !== false) {\n        return [\n          h('EditIntervarInput', {\n            props: {\n              value: data[property],\n              constProps: props,\n              params: params,\n              type: 'form',\n              editable: true\n            },\n            on: {\n              input(value) {\n                const valueArr = value.split('##')\n                $form.$parent.itemChange({\n                  $form,\n                  property,\n                  itemValue: {\n                    [propertyArr[0]]: valueArr[0],\n                    [propertyArr[1]]: valueArr[1]\n                  },\n                  data,\n                  renderOpts })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <EditIntervarInput constProps = { props } params={ params } type='form' editable={false}></EditIntervarInput>\n        ]\n      }\n    }\n  },\n  $vxeSwitch: {\n    // 开关\n    // props: {\n    //   options: [\n    //     { label: '是', value: 1 },\n    //     { label: '否', value: 0 }\n    //   ]\n    // }\n    renderCell(h, { props, options }, { row, column }) {\n      if (Object.keys(row).includes('openSwitch')) {\n        props = Object.assign({}, props, { disabled: !row.openSwitch })\n      }\n      return [\n        <vxe-switch v-model={row[column.property]} open-label={ options[0].label } close-label={ options[1].label } open-value={ options[0].value } close-value={ options[1].value } {...{ props }}></vxe-switch>\n        // <el-switch\n        //   {...{ props }}\n        //   active-text={ options[0].label }\n        //   inactive-text={ options[1].label }\n        //   v-model={row[column.property]}\n        //   active-color=\"#13ce66\"\n        //   active-value={ options[0].value }\n        //   inactive-value={ options[1].value }>\n        // </el-switch>\n      ]\n    },\n    renderDefault(h, { props, options }, { row, column }) {\n      if (Object.keys(row).includes('openSwitch')) {\n        props = Object.assign({}, props, { disabled: !row.openSwitch })\n      }\n      return [\n        <vxe-switch v-model={row[column.property]} open-label={ options[0].label } close-label={ options[1].label } open-value={ options[0].value } close-value={ options[1].value } {...{ props }}></vxe-switch>\n\n        // <el-switch\n        //   {...{ props }}\n        //   active-text={ options[0].label }\n        //   inactive-text={ options[1].label }\n        //   v-model={row[column.property]}\n        //   active-color=\"#13ce66\"\n        //   active-value={ options[0].value }\n        //   inactive-value={ options[1].value }>\n        // </el-switch>\n      ]\n    },\n    renderEdit(h, { props, options }, { row, column }) {\n      if (Object.keys(row).includes('openSwitch')) {\n        props = Object.assign({}, props, { disabled: !row.openSwitch })\n      }\n      return [\n        <vxe-switch v-model={row[column.property]} open-label={options[0].label} close-label={options[1].label} open-value={options[0].value} close-value={options[1].value} {...{ props } }></vxe-switch>\n        // <el-switch\n        //   {...{ props }}\n        //   active-text={ options[0].label }\n        //   inactive-text={ options[1].label }\n        //   v-model={row[column.property]}\n        //   active-color=\"#13ce66\"\n        //   active-value={ options[0].value }\n        //   inactive-value={ options[1].value }>\n        // </el-switch>\n      ]\n    },\n    renderItem(h, renderOpts, params) {\n      const { $form, property, data } = params\n      const { props } = renderOpts\n      const { options } = renderOpts\n      if ($form.$parent.editable !== false && props.editable !== false) {\n        return [\n          h('vxe-switch', {\n            props: {\n              value: data[property],\n              openLabel: options[0].label,\n              closeLabel: options[1].label,\n              openValue: options[0].value,\n              closeValue: options[1].value,\n              ...props\n            },\n            on: {\n              input(value) {\n                data[property] = value\n                $form.$parent.itemChange({\n                  $form,\n                  property,\n                  itemValue: value,\n                  data,\n                  renderOpts })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          h('vxe-switch', {\n            props: {\n              value: data[property],\n              openLabel: options[0].label,\n              closeLabel: options[1].label,\n              openValue: options[0].value,\n              closeValue: options[1].value,\n              disabled: true,\n              ...props\n            },\n            on: {\n              input(value) {\n              }\n            }\n          })\n        ]\n      }\n    }\n  },\n  $vxeFormDays: {\n    // 天数渲染器，不足0.25天按0记，大于0.75天按1天记，其他按0.5天记\n    renderItem(h, renderOpts, { $form, property, data }) {\n      let { props } = renderOpts\n      props = props || {}\n      if ($form.$parent.editable !== false || props.editable !== false) {\n        return [\n          h('vxe-input', {\n            ref: 'vxe-input' + property,\n            props: {\n              placeholder: '请输入天数',\n              type: 'number',\n              clearable: true,\n              value: data[property],\n              ...props\n            },\n            on: {\n              input(value) {\n                clearTimeout(data['timer_' + property])\n                data['timer_' + property] = setTimeout(() => {\n                  let quiteDay = data[property] % 1\n                  quiteDay = quiteDay <= 0.25 ? 0 : (quiteDay >= 0.75 ? 1 : 0.5)\n                  data[property] = Math.floor(data[property] / 1) + quiteDay\n                  data[property] = value\n                  $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n                  clearTimeout(data['timer_' + property])\n                })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <span class=\"tc fn-inline\" {...{ props }}> {data[property]} </span>\n        ]\n      }\n    }\n  },\n  $vxeProgress: {\n    // 进度条\n    renderCell(h, { props, options }, { row, column }, context) {\n      let bsTable = context.$grid.$parent\n      let val = parseFloat((row[column.property] + '').replace(/null|undefined|NaN|Infinity\\s+/ig, ''))\n      val = Number(bsTable.accurateFixed(isNaN(val) ? 0 : val, 2))\n      return [\n        <el-progress text-inside={true} stroke-width={20} percentage={val} style=\"line-height:30px\"></el-progress>\n      ]\n    },\n    renderDefault(h, { props, options }, { row, column }, context) {\n      let bsTable = context.$grid.$parent\n      let val = parseFloat((row[column.property] + '').replace(/null|undefined|NaN|Infinity\\s+/ig, ''))\n      val = Number(bsTable.accurateFixed(isNaN(val) ? 0 : val, 2))\n      return [\n        <el-progress text-inside={true} stroke-width={20} percentage={val} style=\"line-height:30px\"></el-progress>\n      ]\n    },\n    renderEdit(h, { props, options }, { row, column }, context) {\n      let bsTable = context.$grid.$parent\n      let val = parseFloat((row[column.property] + '').replace(/null|undefined|NaN|Infinity\\s+/ig, ''))\n      val = Number(bsTable.accurateFixed(isNaN(val) ? 0 : val, 2))\n      return [\n        <el-progress text-inside={true} stroke-width={20} percentage={val} style=\"line-height:30px\"></el-progress>\n      ]\n    },\n    renderItem(h, renderOpts, params) {\n      const { property, data, $form } = params\n      let value = parseFloat((data[property] + '').replace(/null|undefined|NaN|Infinity|\\s+/ig, ''))\n      value = Number($form.$parent.accurateFixed(isNaN(value) ? 0 : value, 2))\n      return [\n        <el-progress text-inside={true} stroke-width={20} percentage={value} style=\"line-height:30px\"></el-progress>\n      ]\n    }\n  },\n  $vxeEditDownConditions: {\n    autofocus: '.vxe-input--inner',\n    renderEdit(h, { name, options, props }, params) {\n      return [\n        <edit-down-conditions constProps={ props } params={ params } type='table'></edit-down-conditions>\n      ]\n    },\n    renderDefault(h, cellRender, { row, column }, context) {\n      row[column.property + '__viewSort'] = row[column.property]\n      return [<span class=\"text block\">{row[column.property]}</span>]\n    },\n    renderCell(h, cellRender, { row, column }, context) {\n      row[column.property + '__viewSort'] = row[column.property]\n      return [<span class=\"text block\">{row[column.property]}</span>]\n    },\n    renderItem(h, renderOpts, params) {\n      const { props } = renderOpts\n      const { $form, property, data } = params\n      if ($form.$parent.editable !== false && props.editable !== false) {\n        return [\n          h('edit-down-conditions', {\n            props: {\n              constProps: props,\n              params: params,\n              type: 'form'\n            },\n            on: {\n              input(value) {\n                $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <edit-down-conditions constProps={ props } params={ params } type='form'></edit-down-conditions>\n        ]\n      }\n    }\n  },\n  $vxeRowCellRenderer: {\n    // 列渲染器\n    renderCell(h, renderOpts, { row, column }, context) {\n      if (row[column.property + 'renderOpts'].name) {\n        return defaultPublicRenders[row[column.property + 'renderOpts'].name].renderCell(h, row[column.property + 'renderOpts'], { row, column }, context)\n      } else {\n        return defaultPublicRenders[renderOpts.name] ? defaultPublicRenders[renderOpts.name].renderCell(h, row[column.property + 'renderOpts'], { row, column }, context) : ''\n      }\n    },\n    renderEdit(h, renderOpts, { row, column }, context) {\n      if (row[column.property + 'renderOpts'].name) {\n        return defaultPublicRenders[row[column.property + 'renderOpts'].name].renderEdit(h, row[column.property + 'renderOpts'], { row, column }, context)\n      } else {\n        return defaultPublicRenders[renderOpts.name] ? defaultPublicRenders[renderOpts.name].renderEdit(h, row[column.property + 'renderOpts'], { row, column }, context) : ''\n      }\n    },\n    renderDefault(h, renderOpts, { row, column }, context) {\n      if (row[column.property + 'renderOpts'].name) {\n        return defaultPublicRenders[row[column.property + 'renderOpts'].name].renderDefault(h, row[column.property + 'renderOpts'], { row, column }, context)\n      } else {\n        return defaultPublicRenders[renderOpts.name] ? defaultPublicRenders[renderOpts.name].renderDefault(h, row[column.property + 'renderOpts'], { row, column }, context) : ''\n      }\n    }\n  },\n  $vxeBasicInfoRenderer: { // 基础信息渲染器\n    renderCell(h, renderOpts, { row, column }, context) {\n      let mode = context.$grid.$parent.$parent.mode\n      let curRendermap = context.$grid.$parent.$parent.tableRenderMap.map[row['mapid']]\n      let render = curRendermap.render\n      if (mode === 'edit') {\n        if (render && curRendermap.editable) {\n          return publicRender[render.name].renderEdit(h, render, { row, column }, context)\n        } else if (!render && curRendermap.editable) {\n          return publicRender['$vxeInput'].renderEdit(h, {}, { row, column }, context)\n        } else if (render && publicRender[render.name]) {\n          return publicRender[render.name].renderCell(h, render, { row, column }, context)\n        } else {\n          return publicRender['$vxeInput'].renderCell(h, {}, { row, column }, context)\n        }\n      } else {\n        if (render && publicRender[render.name]) {\n          return publicRender[render.name].renderCell(h, render, { row, column }, context)\n        } else {\n          return publicRender['$vxeInput'].renderCell(h, {}, { row, column }, context)\n        }\n      }\n    },\n    renderEdit(h, renderOpts, { row, column }, context) {\n      let mode = context.$grid.$parent.$parent.mode\n      let curRendermap = context.$grid.$parent.$parent.tableRenderMap.map[row['mapid']]\n      let render = curRendermap.render\n      if (mode !== 'detail') {\n        if (render && curRendermap.editable) {\n          return publicRender[render.name].renderEdit(h, render, { row, column }, context)\n        } else if (!render && curRendermap.editable) {\n          return publicRender['$vxeInput'].renderEdit(h, {}, { row, column }, context)\n        } else if (render && !curRendermap.editable) {\n          return publicRender[render.name].renderCell(h, render, { row, column }, context)\n        } else {\n          return publicRender['$vxeInput'].renderCell(h, {}, { row, column }, context)\n        }\n      } else {\n        if (render) {\n          return publicRender[render.name].renderCell(h, render, { row, column }, context)\n        } else {\n          publicRender['$vxeInput'].renderCell(h, {}, { row, column }, context)\n        }\n      }\n    },\n    renderDefault(h, renderOpts, { row, column }, context) {\n      let editable = context.$grid.$parent.$parent.mode\n      let curRendermap = context.$grid.$parent.$parent.tableRenderMap.map[row['mapid']]\n      let render = curRendermap.render\n      if (editable !== 'detail') {\n        if (render && editable && curRendermap.editable) {\n          return publicRender[render.name].renderEdit(h, render, { row, column }, context)\n        } else if (!render && curRendermap.editable) {\n          return publicRender['$vxeInput'].renderEdit(h, {}, { row, column }, context)\n        } else if (render) {\n          return publicRender[render.name].renderCell(h, render, { row, column }, context)\n        } else {\n          publicRender['$vxeInput'].renderCell(h, {}, { row, column }, context)\n        }\n      } else {\n        if (render) {\n          return publicRender[render.name].renderCell(h, render, { row, column }, context)\n        } else {\n          publicRender['$vxeInput'].renderCell(h, {}, { row, column }, context)\n        }\n      }\n    }\n  },\n  $vxeEditDownTerm: {\n    autofocus: '.vxe-input--inner',\n    renderDefault(h, { props = {} }, params) {\n      const { row, column } = params\n      const value = row[column.property] || ''\n      const year = value.slice(0, 2) || '0'\n      const month = value.slice(2, 4) || '0'\n      const day = value.slice(4, 6) || '0'\n      row[column.property + '__viewSort'] = `${year}年${month}月${day}天`\n      return [<span class=\"text block\">{row[column.property + '__viewSort']}</span>]\n    },\n    renderEdit(h, renderOpts, params, context) {\n      let { props = {} } = renderOpts\n      const { row, column } = params\n      let bsTable = context.$grid.$parent\n      return [\n        h('edit-down-term', {\n          props: {\n            editable: props.editable,\n            value: row[column.property],\n            ...props\n          },\n          on: {\n            input(value) {\n              row[column.property] = value\n              bsTable.cellOptionCallBack(params)\n            }\n          }\n        })\n      ]\n    },\n    renderCell(h, { props = {} }, params) {\n      const { row, column } = params\n      const value = row[column.property] || ''\n      const year = value.slice(0, 2) || '0'\n      const month = value.slice(2, 4) || '0'\n      const day = value.slice(4, 6) || '0'\n      row[column.property + '__viewSort'] = `${year}年${month}月${day}天`\n      return [<span class=\"text block\">{row[column.property + '__viewSort']}</span>]\n    },\n    renderItem(h, renderOpts, { $form, property, data }) {\n      const { props = {} } = renderOpts\n      if ($form.$parent.editable !== false && props.editable !== false) {\n        return [\n          h('edit-down-term', {\n            props: {\n              editable: props.editable,\n              value: data[property],\n              ...props\n            },\n            on: {\n              input(value) {\n                data[property] = value\n                $form.$parent.itemChange({ $form, property, itemValue: data[property], data })\n              }\n            }\n          })\n        ]\n      } else {\n        const value = data[property] || ''\n        const year = value.slice(0, 2) || '0'\n        const month = value.slice(2, 4) || '0'\n        const day = value.slice(4, 6) || '0'\n        return [\n          <span class=\"text block\" {...{ props }}>`${year}年${month}月${day}天`</span>\n        ]\n      }\n    }\n  },\n  $vxeNewMoney: {\n    // 输入框\n    autofocus: '.vxe-input--inner',\n    renderDefault(h, { props }, { row, column, $grid }, context) {\n      props = props || {}\n      let bsTable = context.$grid.$parent\n      let showZero = context.$grid.$parent.showZero\n      let viewDigits = 0\n      let val = isNaN(parseFloat(row[column.property])) ? '' : parseFloat(row[column.property])\n      if (props.unit === 2) {\n        val = isNaN(parseFloat(row[column.property])) ? '' : parseFloat(row[column.property])\n      } else if (props.unit === 1) {\n        if (val) {\n          val = Number((val).toFixed(2)).toLocaleString()\n          val = val.split('.').length === 1 ? val + '.00' : (val.split('.')[1].length === 1 ? val + '0' : val)\n          if (showZero) {\n            val = val === '0.00' ? '' : val\n          }\n        }\n      }\n      row[column.property + '__viewSort'] = val?.toString().trim()?.length > 0 ? bsTable.transToNumberLocalString(val, viewDigits) : ''\n      return [<span class=\"text\">{val?.toString()?.trim()?.length > 0 ? bsTable.transToNumberLocalString(val, viewDigits) : ''}</span>]\n    },\n    // renderEdit(h, { props }, { row, column, $grid }) {\n    //   // let val = isNaN(parseFloat(row[column.property])) ? '0.00' : parseFloat(row[column.property])\n    //   // row[column.property] = val\n    //   props = props || {}\n    //   // <vxe-input v-model=\"value504\" placeholder=\"小数间隔 2.3\" type=\"float\" step=\"2.3\" clearable></vxe-input>\n    //   return [\n    //     <vxe-input\n    //       v-model={row[column.property]}\n    //       step={ 1 }\n    //       type=\"float\"\n    //       min = { 0.00 }\n    //       {...{ props }}\n    //       max={999999999999999}\n    //       placeholder=\"请输入\"\n    //       clearable\n    //       disabled\n    //     ></vxe-input>\n    //     // <input class=\"my-cell\" text=\"text\" v-model={ row[column.property] } />\n    //   ]\n    // },\n    renderCell(h, { props }, { row, column, $grid }, context) {\n      props = props || {}\n      let bsTable = context.$grid.$parent\n      let val = isNaN(parseFloat(row[column.property])) ? '' : parseFloat(row[column.property])\n      let viewDigits = 0\n      let showZero = context.$grid.$parent.showZero\n      if (props.unit === 2) {\n      } else if (props.unit === 1) {\n        val = Number((val).toFixed(2)).toLocaleString()\n        val = val.split('.').length === 1 ? val + '.00' : (val.split('.')[1].length === 1 ? val + '0' : val)\n        if (showZero) {\n          val = val === '0.00' ? '' : val\n        }\n      }\n      row[column.property + '__viewSort'] = val?.toString()?.trim()?.length > 0 ? bsTable.transToNumberLocalString(val, viewDigits) : ''\n      return [<span class=\"text\">{val?.toString()?.trim()?.length > 0 ? bsTable.transToNumberLocalString(val, viewDigits) : ''}</span>]\n    },\n    renderItem(h, renderOpts, { $form, data, property }) {\n      let { props } = renderOpts\n      props = props || {}\n      if ($form.$parent.editable !== false) {\n        return [\n          h('vxe-input', {\n            ref: 'vxe-input' + property,\n            props: {\n              value: data[property],\n              step: 1,\n              min: 0.00,\n              ...props,\n              max: 1000000000000\n            },\n            on: {\n              input(value) {\n                data[property] = value\n                $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n              }\n            }\n          })\n        ]\n      } else {\n        let val = isNaN(parseFloat(data[property])) ? 0 : parseFloat(data[property])\n        data[property] = val.toFixed(2)\n        // let moneyUnit = context.$grid.$parent.moneyUnit ? context.$grid.$parent.moneyUnit : 1\n        // eslint-disable-next-line no-useless-escape\n        val = data[property]?.toString()?.trim()?.length > 0 ? Number(val.toFixed(2)).toLocaleString() : ''\n        return [<span class=\"tl\" >{val}</span>]\n      }\n    }\n  },\n  $vxeNewInput: {\n    // 输入框\n    autofocus: '.vxe-input--inner',\n    renderEdit(h, { props }, { row, column }) {\n      props = Object.assign({ type: 'text', placeholder: '请输入' }, props || {})\n      return [\n        <vxe-input\n          v-model={row[column.property]}\n          placeholder=\"可清除\"\n          clearable\n          {...{ props }}\n          transfer={true}\n        ></vxe-input>\n        // <input class=\"my-cell\" text=\"text\" v-model={ row[column.property] } />\n      ]\n    },\n    renderCell(h, cellRender, { row, column }, context) {\n      row[column.property] = (row[column.property] + '').replace(/null|undefined/ig, '')\n      row[column.property + '__viewSort'] = row[column.property]\n      return [<span class=\"text\">{row[column.property]}</span>]\n    },\n    renderDefault(h, cellRender, { row, column }, context) {\n      row[column.property] = (row[column.property] + '').replace(/null|undefined/ig, '')\n      row[column.property + '__viewSort'] = row[column.property]\n      return [<span class=\"text\">{row[column.property]}</span>]\n    },\n    renderItem(h, renderOpts, { $form, property, data, item }) {\n      let { props = {} } = renderOpts\n      props = Object.assign({ type: 'text', placeholder: '请输入' }, props)\n      if ($form.$parent.editable !== false && props.editable !== false) {\n        return [\n          h('vxe-input', {\n            ref: 'vxe-input' + property,\n            props: {\n              value: data[property],\n              ...props,\n              transfer: true\n            },\n            on: {\n              input(value) {\n                data[property] = value\n                $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n              },\n              blur({ value }) {\n                data[property] = value\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <span class=\"text block\"> {data[property]} </span>\n        ]\n      }\n    }\n  },\n  $vxeDateInput: {\n    renderItem(h, renderOpts, { $form, property, data }) {\n      data[property] = (data[property] + '').replace(/null|undefined/ig, '')\n      let { props } = renderOpts\n      props = props || {}\n      if ($form.$parent.editable !== false || props.editable !== false) {\n        return [\n          h('vxe-input', {\n            ref: 'vxe-input' + property,\n            props: {\n              value: data[property],\n              ...props\n            },\n            on: {\n              change(value) {\n                data[property] = value?.value\n                $form.$parent.itemChange({ $form, property, itemValue: value?.value, data, renderOpts })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <span class=\"tl fn-inline\" {...{ props }}> {data[property]} </span>\n        ]\n      }\n    }\n  }\n}\n// 全局提供表格特有渲染器 5组，分别为：手动排序渲染器，超链接渲染器，嵌套表渲染器，空数据渲染器，操作列渲染器。\n// 评测设计阶段渲染器1组，为动态项定制渲染器（评测和developing），\nconst defaultTableRenderers = {\n  // 表格特有全局渲染器\n  $vxeTableOptionSort: {\n    // 固定手动排序渲染\n    renderDefault(h, cellRender, { $columnIndex, $rowIndex, items, column, data, row, $seq, columnIndex, isEdit, level, rowIndex, seq }, { $excel, $grid, $table, $type }) {\n      let self = $grid.$parent\n      // <a class=\"optionRow\" href={row.link}>{'操作' + row[column.property]}</a>\n      return [\n        <div class=\"row-dragsort-option row-option-group\">\n          <a class=\"optionRow-upSort fn-inline\" onClick={() => self.onOptionSortRowClick({ row, column, $rowIndex, data, items, optionType: 'upSort' })}>上移</a>\n          <a class=\"optionRow-downSort fn-inline\" onClick={() => self.onOptionSortRowClick({ row, column, $rowIndex, data, items, optionType: 'downSort' })}>下移</a>\n          <a class=\"optionRow-topSort fn-inline\" onClick={() => self.onOptionSortRowClick({ row, column, $rowIndex, data, items, optionType: 'topSort' })}>置顶</a>\n          <a class=\"optionRow-bottomSort fn-inline\" onClick={() => self.onOptionSortRowClick({ row, column, $rowIndex, data, items, optionType: 'bottomSort' })}>置底</a>\n        </div>\n      ]\n    }\n  },\n  $vxeTableHref: {\n    // 文本渲染\n    renderCell(h, renderOpts, { row, column }) {\n      return [<span class=\"text href-a\"><a>{row[column.property]}</a></span>]\n    },\n    renderEdit(h, renderOpts, { row, column }) {\n      return [<span class=\"text href-a\"><a>{row[column.property]}</a></span>]\n    },\n    renderDefault(h, renderOpts, { row, column }) {\n      return [<span class=\"text href-a\"><a>{row[column.property]}</a></span>]\n    }\n  },\n  $vxeTableContentTable: {\n    renderExpand(h, { props }, params, context) {\n      // const tableConfig = {\n      //   globalConfig: { // 全局默认渲染列配置\n      //     // 全局配置\n      //     checkType: '',\n      //     seq: false\n      //   }\n      // }\n      // return [\n      //   <BsTable toolbarConfig={false} pagerConfig={false} tableConfig={ tableConfig } { ...{ props }} height=\"unset\" tableColumnsConfig={ row.childCols } tableData={ row.childData }></BsTable>\n      // ]\n      let { row } = params\n      let propsN = Object.assign({}, context.$grid.$parent.contentTableConfig, props)\n      return [\n        h('BsTable', {\n          props: {\n            ref: '',\n            ...propsN,\n            height: 'unset',\n            tableColumnsConfig: row.childCols,\n            tableData: row.childData\n          },\n          on: {\n            ProxyEvent() {\n              let arg = [...arguments]\n              context.$grid.$parent.$emit('ProxyEventContentTable', arg[0], Object.assign(arg[1], { ParentsParams: params }), ...arg.slice(2))\n            }\n          }\n        })\n      ]\n    }\n  },\n  $vxeNotData: {\n    // 空内容模板\n    renderEmpty(h, renderOpts) {\n      return [\n        <div>\n          <span>\n            <p>亲，没有更多数据了！</p>\n          </span>\n        </div>\n      ]\n    }\n  },\n  $vxeTableOptionRow: {\n    // 操作列渲染\n    renderDefault(h, renderOpts, params, context) {\n      let self = context.$grid.$parent\n      const { props } = renderOpts\n      const { row, column } = params\n      const { statusField, options = {} } = props\n      let renderOption = options[row[statusField] || column.field]\n      if (renderOption) {\n        return [\n          <div class=\"row-option row-option-group\">\n            {\n              renderOption.map((item, index) => {\n                if (item.type === 'button') {\n                  let disabled = false\n                  if (item.disabledHandle) {\n                    disabled = item.disabledHandle(row)\n                  }\n                  return <vxe-button class={item.class || ''} disabled={disabled} status={!disabled ? item.btnStatus : 'info'} size=\"mini\" on-click={() => self.onOptionRowClick({ row, column, optionType: item.code })}>{item.label}</vxe-button>\n                } else {\n                  return <a title={item.label} class={'fn-inline f14 ' + item.class || 'fn-inline f14'} status={item.btnStatus} onClick={() => self.onOptionRowClick({ row, column, optionType: item.code })}>{item.label}</a>\n                }\n              })\n            }\n          </div>\n        ]\n      } else {\n        renderOption = options['default']\n        if (renderOption) {\n          return [\n            <div class=\"row-option row-option-group\">\n              {\n                renderOption.map((item, index) => {\n                  if (item.type === 'button') {\n                    const { isAvailableObj = null } = item\n                    let disabled = false\n                    if (isAvailableObj) {\n                      if (isAvailableObj.targetField) {\n                        disabled = Number(row[isAvailableObj.targetField]) !== isAvailableObj.targetVal\n                      }\n                      // 只要目标字段有值，按钮就不可操作\n                      if (isAvailableObj.valField) {\n                        disabled = !['', null, 'null', undefined].includes(row[isAvailableObj.valField])\n                      }\n                      // 如果 isAvailableObj.disabled 为true， 优先处理isAvailableObj.disabled\n                      if (isAvailableObj.disabled) {\n                        disabled = isAvailableObj.disabled\n                      }\n                    }\n                    if (item.disabledHandle) {\n                      disabled = item.disabledHandle(row)\n                    }\n                    return <vxe-button class={item.class || ''} disabled={disabled} status={item.btnStatus} size=\"mini\" on-click={() => self.onOptionRowClick({ row, column, optionType: item.code })}>{item.label}</vxe-button>\n                  } else if (item.type === 'icon') {\n                    return <span style=\"display:inline-block;width:18px;height:18px;font-size:12px;margin:0 2px;cursor:pointer;\" on-click={() => self.onOptionRowClick({ row, column, optionType: item.code })}><i class={item.icon} style={item.color}></i></span>\n                  } else {\n                    return <a title={item.label} class={'fn-inline f14 ' + item.class || 'fn-inline f14'} status={item.btnStatus} onClick={() => self.onOptionRowClick({ row, column, optionType: item.code })}>{item.label}</a>\n                  }\n                })\n              }\n            </div>\n          ]\n        } else {\n          return ''\n        }\n      }\n    },\n    renderCell(h, renderOpts, params, context) {\n      let self = context.$grid.$parent\n      const { props } = renderOpts\n      const { row, column } = params\n      const { statusField, options } = props\n      let renderOption = options[row[statusField] || column.property]\n      if (renderOption) {\n        return [\n          <div class=\"row-option row-option-group\">\n            {\n              renderOption.map((item, index) => {\n                if (item.type === 'button') {\n                  let disabled = false\n                  if (item.disabledHandle) {\n                    disabled = item.disabledHandle(row)\n                  }\n                  return <vxe-button class={item.class || ''} disabled={disabled} status={item.btnStatus} on-click={() => self.onOptionRowClick({ row, column, optionType: item.code })}>{item.label}</vxe-button>\n                } else {\n                  return <a title={item.label} class={'fn-inline f14 ' + item.class || 'fn-inline f14'} status={item.btnStatus} onClick={() => self.onOptionRowClick({ row, column, optionType: item.code })}>{item.label}</a>\n                }\n              })\n            }\n          </div>\n        ]\n      } else {\n        renderOption = options['default']\n        if (renderOption) {\n          return [\n            <div class=\"row-option row-option-group\">\n              {\n                renderOption.map((item, index) => {\n                  if (item.type === 'button') {\n                    let disabled = false\n                    if (item.disabledHandle) {\n                      disabled = item.disabledHandle(row)\n                    }\n                    return <vxe-button class={item.class || ''} disabled={disabled} status={item.btnStatus} on-click={() => self.onOptionRowClick({ row, column, optionType: item.code })}>{item.label}</vxe-button>\n                  } else {\n                    return <a title={item.label} class={'fn-inline f14 ' + item.class || 'fn-inline f14'} status={item.btnStatus} onClick={() => self.onOptionRowClick({ row, column, optionType: item.code })}>{item.label}</a>\n                  }\n                })\n              }\n            </div>\n          ]\n        } else {\n          return ''\n        }\n      }\n    },\n    renderEdit(h, renderOpts, params, context) {\n      let self = context.$grid.$parent\n      const { props } = renderOpts\n      const { row, column } = params\n      const { statusField, options } = props\n      let renderOption = options[row[statusField] || column]\n      if (renderOption) {\n        return [\n          <div class=\"row-option row-option-group\">\n            {\n              renderOption.map((item, index) => {\n                if (item.type === 'button') {\n                  let disabled = false\n                  if (item.disabledHandle) {\n                    disabled = item.disabledHandle(row)\n                  }\n                  return <vxe-button class={item.class || ''} disabled={disabled} status={item.btnStatus} on-click={() => self.onOptionRowClick({ row, column, optionType: item.code })}>{item.label}</vxe-button>\n                } else {\n                  return <a title={item.label} class={'fn-inline f14 ' + item.class || 'fn-inline f14'} status={item.btnStatus} onClick={() => self.onOptionRowClick({ row, column, optionType: item.code })}>{item.label}</a>\n                }\n              })\n            }\n          </div>\n        ]\n      } else {\n        renderOption = options['default']\n        if (renderOption) {\n          return [\n            <div class=\"row-option row-option-group\">\n              {\n                renderOption.map((item, index) => {\n                  if (item.type === 'button') {\n                    return <vxe-button class={item.class || ''} status={item.btnStatus} on-click={() => self.onOptionRowClick({ row, column, optionType: item.code })}>{item.label}</vxe-button>\n                  } else {\n                    return <a title={item.label} class={'fn-inline f14 ' + item.class || 'fn-inline f14'} status={item.btnStatus} onClick={() => self.onOptionRowClick({ row, column, optionType: item.code })}>{item.label}</a>\n                  }\n                })\n              }\n            </div>\n          ]\n        } else {\n          return ''\n        }\n      }\n    }\n  },\n  $vxeTableCustomRender: {\n    // 通用自定义渲染（developing）\n    renderDefault(h, renderOpts, params, context) {\n      const { column } = params\n      // <template slot-scope=\"{ row, index }\" slot=\"dateNo\"></template>\n      return [\n        <div class=\"table-custom-render\">\n          <slot name={'CellDefaultSlot' + column.property } params={ params }></slot>\n        </div>\n      ]\n    },\n    renderCell(h, renderOpts, params, context) {\n      const { column } = params\n      // <template slot-scope=\"{ row, index }\" slot=\"dateNo\"></template>\n      const bsTable = context.$grid.$parent\n      let $scopedSlots = bsTable.$scopedSlots\n      if ($scopedSlots[column.field + 'SlotCell']) {\n        return h('div',\n          {\n            attrs: {\n              class: 'cell-custom'\n            }\n          },\n          $scopedSlots[column.field + 'SlotCell'](params, context)\n        )\n      } else if (typeof column.own.customCellRender === 'function') {\n        return h('div',\n          {\n            attrs: {\n              class: 'cell-custom'\n            }\n          },\n          column.own.customCellRender(h, renderOpts, params, context)\n        )\n      }\n    },\n    renderEdit(h, renderOpts, params, context) {\n      const { column } = params\n      // <template slot-scope=\"{ row, index }\" slot=\"dateNo\"></template>\n      return [\n        <div class=\"table-custom-render\">\n          <slot name={'CellEditSlot' + column.property } params={ params }></slot>\n        </div>\n      ]\n    },\n    renderItem(h, renderOpts, params, context) {\n      const { property } = params\n      // <template slot-scope=\"{ row, index }\" slot=\"dateNo\"></template>\n      return [\n        <div class=\"table-custom-render\">\n          <slot name={'itemSlot' + property } params={ params }></slot>\n        </div>\n      ]\n    }\n  },\n  $vxeHref: {\n    // 文本渲染\n    renderCell(h, renderOpts, { row, column }, context) {\n      // @click=\"bsTable.cellOptionCallBack(params, { optionType: 'input', value: row[column.property], field: column.property, renderOpts })\"\n      const bsTable = context.$grid.$parent\n      return [<span class=\"text\" style=\"color:#409eff;cursor:pointer;\" href=\"javascript:;\" on-click={() => bsTable.cellOptionCallBack(row, column)}>{row[column.property]}</span>]\n    },\n    renderEdit(h, renderOpts, { row, column }, context) {\n      const bsTable = context.$grid.$parent\n      return [<span class=\"text href-a\" style=\"color:#409eff;cursor:pointer;\" href=\"javascript:;\" on-click={() => bsTable.cellOptionCallBack(row, column)}>{row[column.property]}</span>]\n    },\n    renderDefault(h, renderOpts, { row, column }, context) {\n      const bsTable = context.$grid.$parent\n      return [<span class=\"text href-a\" style=\"color:#409eff;cursor:pointer;\" href=\"javascript:;\" on-click={() => bsTable.cellOptionCallBack(row, column)}>{row[column.property]}</span>]\n    }\n  },\n  $customIcon: {\n    // 增加icon图标展示\n    renderDefault(h, cellRender, params) {\n      const { renderProps, options, props } = cellRender\n      let { row, column } = params\n      const cellValue = row[column.property]\n      const currentOption = options.find(option => String(option.value) === String(cellValue))\n      if (renderProps?.render && typeof renderProps?.render === 'function') {\n        return renderProps.render(h, { row, column, cellRender, params })\n      } else if (currentOption?.iconClass) {\n        return [\n          <i class={currentOption?.iconClass} style={{ ...(currentOption?.iconStyle || {}), fontSize: '18px', verticalAlign: 'middle' }}></i>,\n          props?.showLabel ? <span style={{ ...(currentOption?.iconStyle || {}), verticalAlign: 'middle' }}>{currentOption?.label || currentOption?.value}</span> : ''\n        ]\n      } else {\n        return [\n          <span>{currentOption?.label || currentOption?.value}</span>\n        ]\n      }\n    }\n  },\n  $vxeIcon: {\n    // 增加icon图标展示\n    renderDefault(h, cellRander, params) {\n      let { row, column, $table } = params\n      return [\n        <div style=\"margin-left:10px;display:flex\">\n          { (row.children?.length < 1 || !row.children) && <i class='el-icon-document' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { $table.treeExpandeds.indexOf(row) === -1 && row.children?.length > 0 && <i class='el-icon-folder' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { $table.treeExpandeds.indexOf(row) > -1 && row.children?.length > 0 && <i class='el-icon-folder-opened' style=\"margin-right: 10px;line-height:32px\"></i>}\n          <span style=\"overflow: hidden;text-overflow:ellipsis;flex:1;\">{row[column.property] || 0}</span>\n        </div>\n      ]\n    }\n  },\n  $vxeIcon1: {\n    // 增加icon图标展示 红灯\n    renderDefault(h, cellRander, params) {\n      const showValue = cellRander.props?.showValue !== undefined ? !!cellRander.props?.showValue : true\n      let { row, column, $table } = params\n      return [\n        <div class=\"waring-icon-render-wrapper\" style=\"algin: center\">\n          { (row.children?.length < 1 || !row.children) && <i class='result-icon result-red' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { $table.treeExpandeds.indexOf(row) === -1 && row.children?.length > 0 && <i class='result-icon result-red' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { $table.treeExpandeds.indexOf(row) > -1 && row.children?.length > 0 && <i class='result-icon result-red' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { showValue && <span class=\"waring-icon-render-content\" style=\"overflow: hidden;text-overflow:ellipsis;flex:1;\">{row[column.property] || 0}</span>}\n        </div>\n      ]\n    }\n  },\n  $vxeIcon2: {\n    // 增加icon图标展示 黄灯\n    renderDefault(h, cellRander, params) {\n      const showValue = cellRander.props?.showValue !== undefined ? !!cellRander.props?.showValue : true\n      let { row, column, $table } = params\n      return [\n        <div class=\"waring-icon-render-wrapper\" style=\"algin: center\">\n          { (row.children?.length < 1 || !row.children) && <i class='result-icon result-yellow' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { $table.treeExpandeds.indexOf(row) === -1 && row.children?.length > 0 && <i class='result-icon result-yellow' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { $table.treeExpandeds.indexOf(row) > -1 && row.children?.length > 0 && <i class='result-icon result-yellow' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { showValue && <span class=\"waring-icon-render-content\" style=\"overflow: hidden;text-overflow:ellipsis;flex:1;\">{row[column.property] || 0}</span>}\n        </div>\n      ]\n    }\n  },\n  $vxeIcon3: {\n    // 增加icon图标展示 绿灯\n    renderDefault(h, cellRander, params) {\n      const showValue = cellRander.props?.showValue !== undefined ? !!cellRander.props?.showValue : true\n      let { row, column, $table } = params\n      return [\n        <div class=\"waring-icon-render-wrapper\" style=\"algin: center\">\n          { (row.children?.length < 1 || !row.children) && <i class='result-icon result-green' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { $table.treeExpandeds.indexOf(row) === -1 && row.children?.length > 0 && <i class='result-icon result-green' style=\"margin-right: 10px;line-height:32px\" />}\n          { $table.treeExpandeds.indexOf(row) > -1 && row.children?.length > 0 && <i class='result-icon result-green' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { showValue && <span class=\"waring-icon-render-content\" style=\"overflow: hidden;text-overflow:ellipsis;flex:1;\">{row[column.property] || 0}</span>}\n        </div>\n      ]\n    }\n  },\n  $vxeIcon4: {\n    // 增加icon图标展示 警铃\n    renderDefault(h, cellRander, params) {\n      let { row, column, $table } = params\n      return [\n        <div class=\"waring-icon-render-wrapper\" style=\"algin: center\">\n          { (row.children?.length < 1 || !row.children) && <i class='result-icon result-yellow-bell' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { $table.treeExpandeds.indexOf(row) === -1 && row.children?.length > 0 && <i class='result-icon result-yellow-bell' style=\"margin-right: 10px;line-height:32px\" />}\n          { $table.treeExpandeds.indexOf(row) > -1 && row.children?.length > 0 && <i class='result-icon result-yellow-bell' style=\"margin-right: 10px;line-height:32px\"></i>}\n          <span class=\"waring-icon-render-content\" style=\"overflow: hidden;text-overflow:ellipsis;flex:1;\">{row[column.property] || 0}</span>\n        </div>\n      ]\n    }\n  },\n  $vxeIcon6: {\n    // 增加icon图标展示 橙色\n    renderDefault(h, cellRander, params) {\n      const showValue = cellRander.props?.showValue !== undefined ? !!cellRander.props?.showValue : true\n      let { row, column, $table } = params\n      return [\n        <div class=\"waring-icon-render-wrapper\" style=\"algin: center\">\n          { (row.children?.length < 1 || !row.children) && <i class='result-icon result-orange' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { $table.treeExpandeds.indexOf(row) === -1 && row.children?.length > 0 && <i class='result-icon result-orange' style=\"margin-right: 10px;line-height:32px\" />}\n          { $table.treeExpandeds.indexOf(row) > -1 && row.children?.length > 0 && <i class='result-icon result-orange' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { showValue && <span class=\"waring-icon-render-content\" style=\"overflow: hidden;text-overflow:ellipsis;flex:1;\">{row[column.property] || 0}</span>}\n        </div>\n      ]\n    }\n  },\n  $vxeIcon7: {\n    // 增加icon图标展示 蓝色\n    renderDefault(h, cellRander, params) {\n      const showValue = cellRander.props?.showValue !== undefined ? !!cellRander.props?.showValue : true\n      let { row, column, $table } = params\n      return [\n        <div class=\"waring-icon-render-wrapper\" style=\"algin: center\">\n          { (row.children?.length < 1 || !row.children) && <i class='result-icon result-blue' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { $table.treeExpandeds.indexOf(row) === -1 && row.children?.length > 0 && <i class='result-icon result-blue' style=\"margin-right: 10px;line-height:32px\" />}\n          { $table.treeExpandeds.indexOf(row) > -1 && row.children?.length > 0 && <i class='result-icon result-blue' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { showValue && <span class=\"waring-icon-render-content\" style=\"overflow: hidden;text-overflow:ellipsis;flex:1;\">{row[column.property] || 0}</span>}\n        </div>\n      ]\n    }\n  },\n  $vxeIcon8: {\n    // 增加icon图标展示 灰色\n    renderDefault(h, cellRander, params) {\n      let { row, column, $table } = params\n      return [\n        <div class=\"waring-icon-render-wrapper\" style=\"algin: center\">\n          { (row.children?.length < 1 || !row.children) && <i class='result-icon result-grey' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { $table.treeExpandeds.indexOf(row) === -1 && row.children?.length > 0 && <i class='result-icon result-grey' style=\"margin-right: 10px;line-height:32px\" />}\n          { $table.treeExpandeds.indexOf(row) > -1 && row.children?.length > 0 && <i class='result-icon result-grey' style=\"margin-right: 10px;line-height:32px\"></i>}\n          <span class=\"waring-icon-render-content\" style=\"overflow: hidden;text-overflow:ellipsis;flex:1;\">{row[column.property] || 0}</span>\n        </div>\n      ]\n    }\n  },\n  $vxeIcon5: {\n    // 增加icon图标展示\n    renderDefault(h, cellRander, params) {\n      let { row, column, $table } = params\n      return [\n        <div>\n          { (row.hasChild === false) && <i class='el-icon-document' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { $table.treeExpandeds.indexOf(row) === -1 && row.hasChild === true && <i class='el-icon-folder' style=\"margin-right: 10px;line-height:32px\"></i>}\n          { $table.treeExpandeds.indexOf(row) > -1 && row.hasChild === true && <i class='el-icon-folder-opened' style=\"margin-right: 10px;line-height:32px\"></i>}\n          <span>{row[column.property] || 0}</span>\n        </div>\n      ]\n    }\n  },\n  // 单值\n  $vxeRatio: {\n    renderDefault(h, cellRander, params) {\n      let { row, column, $table: { $parent } } = params\n      const showZero = column?.own?.props?.showZero || $parent?.$parent?._props?.showZero\n      const value = Number(row[column.property]) || 0\n      const ZeroNumber = 0// 为后续计算出来为0的值 预留配置\n      // 设置转换后的值供导出所用\n      row[column.property + '__viewRatio'] = value > 0 ? `${value?.toFixed(1)}%` : showZero ? `${ZeroNumber.toFixed(1)}%` : ''\n      return [\n        <span>{value > 0 ? `${value?.toFixed(1)}%` : showZero ? `${ZeroNumber.toFixed(1)}%` : ''}</span>\n      ]\n    }\n  },\n  // 金额范围过滤渲染器\n  FilterNumberRange: {\n    /// 不显示底部按钮，使用自定义的按钮\n    isFooter: false,\n    renderFilter(h, renderOpts, params) {\n      return [\n        h('FilterNumberRange', {\n          props: {\n            params\n          }\n        })\n      ]\n    },\n    // 筛选方法\n    filterMethod({ option, row, column }) {\n      const { min, max } = option.data\n      const property = column.property\n      const sortProperty = `${property}__viewSort`\n\n      let value = row[sortProperty] || row[property] || 0\n      if (typeof value === 'string') {\n        value = Number(value?.replace(/,/g, ''))\n      }\n      return min <= value && value <= max\n    },\n    // 重置\n    filterResetMethod({ options }) {\n      options.forEach(option => {\n        option.data = { min: '', max: '' }\n      })\n    }\n  }\n  // $vxeTableDynamicSelect: {\n  //   // 废弃\n  //   renderEdit(h, { props, options }, { row, column }, { $excel, $grid, $table, $type }) {\n  //     row.options = row.options || []\n  //     return [\n  //       <vxe-select v-model={row[column.property]} placeholder=\"请选择\">\n  //         {row.options.map((item, index) => {\n  //           return [\n  //             <vxe-option\n  //               value={item.value}\n  //               label={item.label}\n  //             ></vxe-option>\n  //           ]\n  //         })}\n  //       </vxe-select>\n  //     ]\n  //   },\n  //   renderDefault(h, cellRender, { row, column }, context) {\n  //     return [<span>{row[column.property]}</span>]\n  //   },\n  //   renderCell(h, renderOpts, { row, column }) {\n  //     return [<span>{row[column.property]}</span>]\n  //   }\n  // }\n}\n// 全局提供form特有渲染器 1组，为分组标题渲染器（developing）\nconst defaultFormRenderers = {\n  // 表单特有全局渲染器\n  $vxeFormGroupTitle: {\n    renderItem(h, renderOpts, { $form, data, property }) {\n      let gooupTitle = ''\n      $form.items.forEach((item, index) => {\n        if (item.field === property) {\n          item.span = 24\n          gooupTitle = item.groupTitle\n        }\n      })\n      // return [\n      //   <div class=\"form-group-title\" >\n      //     <i class=\"fn-inline\"></i>\n      //     <span class=\"fn-inline\">\n      //       {gooupTitle}\n      //     </span>\n      //     <em class=\"fn-inline\"></em>\n      //   </div>\n      // ]\n      return [\n        <BsTitle type={'left'}>\n          {gooupTitle }\n        </BsTitle>\n      ]\n    }\n  },\n  $formCalculateRender: {\n    renderItem(h, renderOpts, { $form, data, property }) {\n      return defaultGlobalUtils.formCalculateRender(h, renderOpts, { $form, data, property })\n    }\n  },\n  $formMoneyInputRender: {\n    // 输入框\n    renderItem(h, renderOpts, { $form, data, property }) {\n      data[property] = (data[property] + '').replace(/null|undefined|Infinity/ig, '')\n      let { props } = renderOpts\n      props = props || {}\n      if ($form.$parent.editable !== false || props.editable !== false) {\n        return [\n          h('vxe-input', {\n            ref: 'vxe-input' + property,\n            props: {\n              value: data[property],\n              step: 1,\n              min: 0.00,\n              ...props,\n              max: 1000000000000\n            },\n            on: {\n              input(value) {\n                data[property] = value\n                $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n              }\n            }\n          })\n        ]\n      } else {\n        let val = isNaN(parseFloat(data[property])) ? 0 : parseFloat(data[property])\n        val = val.toFixed(2).toLocaleString()\n        val = val.split('.').length === 1 ? val + '.00' : (val.split('.')[1].length === 1 ? val + '0' : val)\n        return [<span class=\"tl fn-inline\" {...{ props }} >{val}</span>]\n      }\n    }\n  },\n  $formMoneyTextRender: {\n    // 废弃\n    renderItem(h, renderOpts, { data, column, property }, context) {\n      let { props } = renderOpts\n      props = props || {}\n      let val = isNaN(parseFloat(data[property])) ? 0 : parseFloat(data[property])\n      data[property] = val.toFixed(2)\n      // let moneyUnit = context.$grid.$parent.moneyUnit ? context.$grid.$parent.moneyUnit : 1\n      // eslint-disable-next-line no-useless-escape\n      val = Number(val.toFixed(2)).toLocaleString()\n      return [<span class=\"tl\" {...{ props }} >{val}</span>]\n    }\n  },\n  $groupTitle: {\n    renderItem(h, renderOpts, { $form, data, property }) {\n      let gooupTitle = ''\n      $form.items.forEach((item, index) => {\n        if (item.field === property) {\n          item.span = 24\n          gooupTitle = item.groupTitle\n        }\n      })\n      return [\n        <div class=\"form-group-title\" >\n          <i class=\"fn-inline\"></i>\n          <span class=\"fn-inline\">\n            {gooupTitle}\n          </span>\n          <em class=\"fn-inline\"></em>\n        </div>\n      ]\n    }\n  },\n  $vxelinkageText: {\n    renderItem(h, renderOpts, { $form, property, data }) {\n      let { props } = renderOpts\n      // let renderDataCb = 'renderDataCb'\n      // $form.$parent.formItemsConfigIn.some((item) => {\n      //   if (item['field'] === property) {\n      //     renderDataCb = item.itemRender && item.itemRender.renderDataCb\n      //     return true\n      //   }\n      // })\n      // data[property] = typeof (renderDataCb) === 'function' ? renderDataCb(h, { props, name, options }, { $form, property, data }) : data[property]\n      props = props || {}\n\n      if ($form.$parent.editable !== false || props.editable !== false) {\n        return [\n          h('vxe-textarea', {\n            ref: 'vxe-textarea' + property,\n            props: {\n              value: data[property],\n              ...props\n            },\n            on: {\n              input(value) {\n                data[property] = value\n                $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <span class=\"tl fn-inline\" {...{ props }}> {data[property]} </span>\n        ]\n      }\n    }\n  },\n  $vxeFormDays: {\n    // 天数渲染器，不足0.25天按0记，大于0.75天按1天记，其他按0.5天记\n    renderItem(h, renderOpts, { $form, property, data }) {\n      let { props } = renderOpts\n      props = props || {}\n      if ($form.$parent.editable !== false || props.editable !== false) {\n        return [\n          h('vxe-input', {\n            ref: 'vxe-input' + property,\n            props: {\n              placeholder: '请输入天数',\n              type: 'number',\n              clearable: true,\n              value: data[property],\n              ...props\n            },\n            on: {\n              input(value) {\n                clearTimeout(data['timer_' + property])\n                data['timer_' + property] = setTimeout(() => {\n                  let quiteDay = data[property] % 1\n                  quiteDay = quiteDay <= 0.25 ? 0 : (quiteDay >= 0.75 ? 1 : 0.5)\n                  data[property] = Math.floor(data[property] / 1) + quiteDay\n                  data[property] = value\n                  $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n                  clearTimeout(data['timer_' + property])\n                })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <span class=\"tc fn-inline\" {...{ props }}> {data[property]} </span>\n        ]\n      }\n    }\n  },\n  $vxeFormTime: {\n    // 天数渲染器，不足0.25天按0记，大于0.75天按1天记，其他按0.5天记\n    renderItem(h, renderOpts, { $form, property, data }) {\n      data[property] = (data[property] + '').replace(/null|undefined/ig, '')\n      let { props, format } = renderOpts\n      format = format || 'YYYY-MM-DD hh:mm:ss'\n      props = props || {}\n      if ($form.$parent.editable !== false || props.editable !== false) {\n        return [\n          h('vxe-input', {\n            ref: 'vxe-input' + property,\n            props: {\n              placeholder: '请选择时间',\n              type: 'date',\n              clearable: true,\n              value: data[property],\n              ...props\n            },\n            on: {\n              input(value) {\n                format = format || 'YYYY-MM-DD hh:mm:ss'\n                data[property] = value ? new Date(value).format(format) : ''\n                $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <span class=\"tc fn-inline\" {...{ props }}> {data[property]} </span>\n        ]\n      }\n    }\n  },\n  $vxeFormText: {\n    renderItem(h, { props, name, options }, { $form, property, data }) {\n      if ($form.$parent.editable !== false || props.editable !== false) {\n        return [\n          h('vxe-textarea', {\n            ref: 'vxe-textarea' + property,\n            props: {\n              value: data[property],\n              ...props\n            },\n            on: {\n              input(value) {\n                data[property] = value\n                $form.$parent.itemChange({ $form, property, itemValue: value, data })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <span class=\"tl fn-inline\" {...{ props }}> {data[property]} </span>\n        ]\n      }\n    }\n\n  },\n  $vxeFormIntervar: {\n    // 输入框\n    // {\n    //   field: 'prevfield#prevfield',\n    //   title: '名称',\n    //   span: 24,\n    //   itemRender: {\n    //     name: '$vxeFormIntervar',\n    //     props: {\n    //       disabled: true,\n    //       type: 'text',\n    //       placeholder: '请输入名称'\n    //     }\n    //   }\n    // },\n    renderItem(h, renderOpts, params) {\n      let { props } = renderOpts\n      const { property, data, $form } = params\n      props = props || {}\n      if ($form.$parent.editable !== false || props.editable !== false) {\n        return [\n          h('EditIntervar', {\n            ref: 'vxe-input' + property,\n            props: {\n              params,\n              props\n            },\n            on: {\n              input(value) {\n                $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <span class=\"tl fn-inline\" {...{ props }}> {data[property]} </span>\n        ]\n      }\n    }\n  },\n  $vxeFormInput: {\n    // 输入框\n    // renderDefault(h, cellRender, { row, column }, context) {\n    //   return [\n    //     <span class=\"text\">\n    //       {row[column.property] === 1 ? '男男' : '女女'}\n    //     </span>\n    //   ]\n    // },\n    renderItem(h, renderOpts, { $form, property, data }) {\n      data[property] = (data[property] + '').replace(/null|undefined/ig, '')\n      let { props } = renderOpts\n      props = props || {}\n      if ($form.$parent.editable !== false || props.editable !== false) {\n        return [\n          h('vxe-input', {\n            ref: 'vxe-input' + property,\n            props: {\n              value: data[property],\n              ...props\n            },\n            on: {\n              input(value) {\n                data[property] = value\n                $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n              }\n            }\n          })\n        ]\n      } else {\n        return [\n          <span class=\"tl fn-inline\" {...{ props }}> {data[property]} </span>\n        ]\n      }\n    }\n  },\n  $vxeFormSelect: {\n    // 下拉选择\n    renderItem(h, renderOpts, { $form, property, data }) {\n      let { props, options } = renderOpts\n      props = props || {}\n      if ($form.$parent.editable !== false || props.editable !== false) {\n        return [\n          h('vxe-select', {\n            props: {\n              ref: 'vxe-select-' + property,\n              value: data[property],\n              ...props\n            },\n            on: {\n              change: ({ value }) => {\n                data[property] = value\n                $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts })\n              }\n            }\n          }, options.map(item => {\n            return h('vxe-option', {\n              props: {\n                value: item.value,\n                label: item.label\n              }\n            })\n          })\n          )\n        ]\n      } else {\n        // let val = ''\n        // options.forEach((item, index) => {\n        //   if (data[property] === item.value) {\n        //     val = item.label\n        //   }\n        // })\n        // return [\n        //   <span class=\"tl fn-inline\"> {val} </span>\n        // ]\n        props.multiple = props.multiple === undefined ? false : props.multiple\n        options = options || []\n        if (props.multiple) {\n          let value = []\n          options.forEach((item, index) => {\n            if (data[property].indexOf(item.value) >= 0) {\n              value.push(item.label)\n            }\n          })\n          data[property + '_select_sort'] = value.join(',')\n          return [<span>{data[property + '_select_sort']}</span>]\n        } else {\n          let arrValue = options.filter((item, index) => {\n            return item.value === data[property]\n          })\n          let value = arrValue[0] ? arrValue[0].label : ''\n          return [<span>{value}</span>]\n        }\n      }\n    }\n  },\n  $vxeFormRadio: {\n    renderItem(h, renderOpts, { $form, property, data }) {\n      let { props, propsC, options } = renderOpts\n      if ($form.$parent.editable !== false || props.editable !== false) {\n        return [\n          h('vxe-radio-group', {\n            props: {\n              value: data[property],\n              ...props\n            },\n            on: {\n              change({ $event, label }) {\n                data[property] = label\n                $form.$parent.itemChange({ $form, property, itemValue: label, data, renderOpts })\n              }\n            }\n          }, options.map(item => {\n            return h('vxe-radio', {\n              props: {\n                label: item.value,\n                ...propsC\n              }\n            }, item.label)\n          }))\n        ]\n      } else {\n        let value = ''\n        options.forEach((item, index) => {\n          if (data[property] === item.value) {\n            value = item.label\n          }\n        })\n        return [<span>{value}</span>]\n      }\n    }\n  },\n  $vxeFormCheckbox: {\n    renderItem(h, renderOpts, { $form, property, data }) {\n      let { props, propsC, options } = renderOpts\n      data[property] = Array.isArray(data[property]) ? data[property] : []\n      if ($form.$parent.editable !== false || props.editable !== false) {\n        return [\n          h('vxe-checkbox-group', {\n            props: {\n              value: data[property],\n              ...props\n            },\n            on: {\n              change({ $event, checked, checklist, label }) {\n                data[property] = checklist\n                $form.$parent.itemChange({ $form, property, itemValue: checklist, data, renderOpts })\n              }\n            }\n          }, options.map(item => {\n            return h('vxe-checkbox', {\n              props: {\n                label: item.value,\n                ...propsC\n              }\n            }, item.label)\n          }))\n        ]\n      } else {\n        data[property] = Array.isArray(data[property]) ? data[property] : []\n        let value = []\n        options.forEach((item, index) => {\n          if (data[property].indexOf(item.value) >= 0) {\n            value.push(item.label)\n          }\n        })\n        data[property + '_checkbox_sort'] = value.join(',')\n        return [<span>{data[property + '_checkbox_sort']}</span>]\n      }\n    }\n  },\n  $formTreeInput: { // form表单treeinput单选\n    renderItem(h, { props, options }, { $form, property, data }) {\n      props = props || {}\n      if ($form.$parent.editable !== false || props.editable !== false) {\n        props['prefix'] = `${property}`\n        props['openQuerySeach'] = true\n        let timeStamp = +new Date()\n        // 如果新建没有初始值，赋初始值\n        data[property + 'id'] = data[property + 'id'] || 'initId' + timeStamp\n        data[property + 'code'] = data[property + 'code'] || ' '\n        data[property + 'name'] = data[property + 'name'] || ' '\n        data[property] = data[property + 'id'] + '##' + data[property + 'code'] + '##' + data[property + 'name']\n        return [\n          h('BsTreeInput', {\n            ref: 'BsTreeInput' + property,\n            props: {\n              datas: options || [],\n              value: data[property],\n              ...props\n            },\n            on: {\n              input(value) {\n                data[property] = value\n                const valueArr = data[property].split('##')\n                data[property + 'id'] = valueArr[0]\n                data[property + 'code'] = valueArr[1]\n                data[property + 'name'] = valueArr[2]\n                $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts: { props, options } })\n              }\n            }\n          })\n        ]\n      } else {\n        data[property + '_tree_sort'] = props.formatter === '#code-#name' ? data[property + 'code'] + '-' + data[property + 'name'] : data[property + 'name']\n        return [<span>{data[property + '_tree_sort']}</span>]\n      }\n    }\n  },\n  $formTreeInputCheck: { // form表单treeinput 多选\n    renderItem(h, { props, options }, { $form, property, data }) {\n      props['prefix'] = `${property}`\n      props['openQuerySeach'] = true\n      props['showcheckbox'] = true\n      let timeStamp = +new Date()\n      // 如果新建没有初始值，赋初始值\n      data[property + 'id'] = data[property + 'id'] || 'initId' + timeStamp\n      data[property + 'code'] = data[property + 'code'] || ' '\n      data[property + 'name'] = data[property + 'name'] || ' '\n      if (!data[property + 'name'].trim()) {\n        data[property] = data[property + 'id'] + '##' + data[property + 'code'] + '##' + data[property + 'name']\n      } else {\n        const ids = data[property + 'id'] && data[property + 'id'].split(',')\n        const codes = data[property + 'code'] && data[property + 'code'].split(',')\n        const names = data[property + 'name'] && data[property + 'name'].split(',')\n        let line = ''\n        if (ids.length === names.length) {\n          for (let i = 0, len = ids.length; i < len; i++) {\n            line += `${ids[i]}##${codes[i]}##${names[i]}`\n            if (i < len - 1) {\n              line += ','\n            }\n          }\n        } else {\n          console.log('from: id,name数量匹配不上')\n        }\n\n        data[property] = line\n      }\n\n      return [\n        h('BsTreeInput', {\n          ref: 'BsTreeInput' + property,\n          props: {\n            datas: options || [],\n            value: data[property],\n            ...props\n          },\n          on: {\n            input(value) {\n              data[property] = value\n              const nodes = data[property].split(',')\n              let id = ''; let code = ''; let name = ''\n              for (let i = 0, len = nodes.length; i < len; i++) {\n                let item = nodes[i]\n                if (!item) {\n                  continue\n                }\n                id += item.split('##')[0] + ','\n                code += item.split('##')[1] + ','\n                name += item.split('##')[2] + ','\n              }\n              id = id.substr(0, id.length - 1)\n              code = code.substr(0, code.length - 1)\n              name = name.substr(0, name.length - 1)\n              data[property + 'id'] = id\n              data[property + 'code'] = code\n              data[property + 'name'] = name\n              $form.$parent.itemChange({ $form, property, itemValue: value, data, renderOpts: { props, options } })\n            }\n          }\n        })\n      ]\n    }\n  }\n}\n// 全局提供过滤器 4组，分别为数值型渲染器，分组型数据渲染器，文本型过滤渲染器，下拉选择型数据过滤器（评测和developing）\nconst tablefilterRenderers = {\n  FilterComplex: {\n    // 不显示底部按钮，使用自定义的按钮\n    isFooter: false,\n    // 筛选模板\n    renderFilter(h, renderOpts, params) {\n      return [\n        <FilterComplex params = { params } ></FilterComplex>\n      ]\n    },\n    // 重置数据方法\n    filterResetMethod({ options, column }) {\n      const { editRender, cellRender } = column.own\n      let render = editRender || cellRender\n      if (render && filterTypeMap[render.name]) {\n        options[0].data = Object.assign({}, filterTypeMap[render.name].filters)\n      } else {\n        options[0].data = { type: 'has', isCase: false, value: '', dataType: 'float', valuegt: '' }\n      }\n      // options.forEach(option => {\n      //   option.data = { type: 'has', isCase: false, value: '', dataType: 'float', valuegt: '' }\n      // })\n    },\n    // 筛选数据方法\n    filterMethod({ option, row, column }) {\n      let cellValue = row[column.property]\n      let { type, isCase, value, valuegt, dataType, format } = option.data\n      if (cellValue) {\n        if (isCase) {\n          cellValue = cellValue.toLowerCase()\n          value = value.toLowerCase()\n        }\n      }\n      if (['float', 'number', 'integer'].indexOf(dataType) >= 0) {\n        switch (type) {\n          case 'has':\n            return String(cellValue).indexOf(value) > -1\n          case 'eq':\n          /* eslint-disable eqeqeq */\n            if (isCase) {\n              return cellValue == value\n            } else {\n              return parseFloat(cellValue) == parseFloat(value)\n            }\n          case 'gt':\n            return Number(cellValue) > Number(value)\n          case 'lt':\n            return Number(value) > Number(cellValue)\n          case 'ltgt':\n            return Number(cellValue) >= Number(value) && Number(cellValue) <= Number(valuegt)\n          case 'null':\n            return (cellValue + '').replace(/null|undefined|\\k+/ig, '') === ''\n        }\n      } else if (['date', 'time', 'datetime', 'week', 'month', 'year'].indexOf(dataType) >= 0) {\n        switch (type) {\n          case 'has':\n            return String(cellValue).indexOf(value) > -1\n          case 'eq':\n          /* eslint-disable eqeqeq */\n            return new Date(value).format(format) === cellValue\n          case 'gt':\n            return cellValue > new Date(value).format(format)\n          case 'lt':\n            return new Date(value).format(format) > cellValue\n          case 'ltgt':\n            return cellValue >= new Date(value).format(format) && cellValue <= new Date(valuegt).format(format)\n          case 'null':\n            return (cellValue + '').replace(/null|undefined|\\k+/ig, '') === ''\n        }\n      }\n      return true\n    }\n  },\n  FilterContent: {\n  // 不显示底部按钮，使用自定义的按钮\n    isFooter: false,\n    // 筛选模板\n    renderFilter (h, renderOpts, params) {\n      return [\n        <filter-content params={ params }></filter-content>\n      ]\n    },\n    // 重置数据方法\n    filterResetMethod ({ options }) {\n      options.forEach(option => {\n        option.data = { vals: [], sVal: '' }\n      })\n    },\n    // 筛选数据方法\n    filterMethod({ option, row, column }) {\n      const { vals } = option.data\n      if (Array.isArray(vals) && vals.length) {\n        const cellValue = row[column.property]\n        if (String(cellValue).indexOf('##') > 0) {\n          let value = cellValue.split('##')\n          value.shift()\n          return cellValue == value.join('-')\n        }\n        return vals.includes(cellValue)\n      } else {\n        return true\n      }\n\n      // console.log(option, row, column, row[column.property])\n      // const { vals } = option.data\n      // const cellValue = row[column.property]\n      // /* eslint-disable eqeqeq */\n      // return vals.some(val => {\n      //   if (cellValue.indexOf('##') > 0) {\n      //     let value = cellValue.split('##')\n      //     value.shift()\n      //     return val == value.join('-')\n      //   } else {\n      //     console.log(option, row, column, val == cellValue)\n      //     return val == cellValue\n      //   }\n      //   //  return val == cellValue\n      // })\n    }\n  },\n  FilterInput: {\n    isFooter: false,\n    // 筛选模板\n    // filters: [{ data: '' }],\n    // filterRender: { name: 'FilterInput' },\n    renderFilter(h, renderOpts, params) {\n      return [\n        <filter-input params={params}></filter-input>\n      ]\n    },\n    // 筛选方法\n    filterMethod({ option, row, column }) {\n      let { data } = option\n      // 布尔值搜索过滤时将是和否转为1和2\n      const valMap = {\n        '是': '1',\n        '否': '2'\n      }\n      data = valMap[data] || data\n      let cellValue = row[column.property]\n      let fieldStr = column.property.replace(/Name/, '')\n      // 处理列表 code-name 形式显示过滤\n      if (column.cellRender && column.cellRender.name.includes('_$')) {\n        let fields = column.cellRender.name.split('_$')\n        fields.forEach(field => {\n          cellValue += row[field.replace(/\\$/g, '')]\n        })\n      } else if (row[`${fieldStr}Code`]) {\n        cellValue += row[`${fieldStr}Code`]\n      }\n      return String(cellValue).toLowerCase().indexOf(data.toLowerCase()) > -1\n    }\n  },\n  FilterSelect: {\n    isFooter: false,\n    // 筛选模板\n    // filters: [{ data: '' }],\n    // filterRender: { name: 'FilterInput' },\n    renderFilter(h, renderOpts, params) {\n      return [\n        <filter-Select renderOpts={ renderOpts } params={params}></filter-Select>\n      ]\n    },\n    filterResetMethod({ options }) {\n      options.forEach(option => {\n        option.data = { vals: [], sVal: '' }\n      })\n    },\n    // 筛选方法\n    filterMethod({ option, row, column }) {\n      const { options, data } = option\n      const { vals } = data\n      let cellValue = row[column.property]\n      let value = []\n      options.forEach((item, index) => {\n        if (String(cellValue).indexOf(item.value) >= 0) {\n          value.push(item.label)\n        }\n      })\n      return value.some((item) => {\n        return vals.indexOf(item) >= 0\n      })\n    }\n  }\n}\nexport default {\n  ...defaultPublicRenders,\n  ...defaultTableRenderers,\n  ...defaultFormRenderers,\n  ...tablefilterRenderers\n}\n"],"mappings":"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"}]}