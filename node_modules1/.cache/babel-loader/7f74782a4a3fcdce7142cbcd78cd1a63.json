{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\directFund\\report\\js\\methods.js","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\directFund\\report\\js\\methods.js","mtime":1694505522417},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\babel.config.js","mtime":1694505520209},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvKSB7ICJAYmFiZWwvaGVscGVycyAtIHR5cGVvZiI7IHJldHVybiBfdHlwZW9mID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAobykgeyByZXR1cm4gdHlwZW9mIG87IH0gOiBmdW5jdGlvbiAobykgeyByZXR1cm4gbyAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBTeW1ib2wgJiYgby5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG8gIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvOyB9LCBfdHlwZW9mKG8pOyB9CmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9CmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsga2V5ID0gX3RvUHJvcGVydHlLZXkoa2V5KTsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9CmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykgeyB2YXIga2V5ID0gX3RvUHJpbWl0aXZlKGFyZywgInN0cmluZyIpOyByZXR1cm4gX3R5cGVvZihrZXkpID09PSAic3ltYm9sIiA/IGtleSA6IFN0cmluZyhrZXkpOyB9CmZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkgeyBpZiAoX3R5cGVvZihpbnB1dCkgIT09ICJvYmplY3QiIHx8IGlucHV0ID09PSBudWxsKSByZXR1cm4gaW5wdXQ7IHZhciBwcmltID0gaW5wdXRbU3ltYm9sLnRvUHJpbWl0aXZlXTsgaWYgKHByaW0gIT09IHVuZGVmaW5lZCkgeyB2YXIgcmVzID0gcHJpbS5jYWxsKGlucHV0LCBoaW50IHx8ICJkZWZhdWx0Iik7IGlmIChfdHlwZW9mKHJlcykgIT09ICJvYmplY3QiKSByZXR1cm4gcmVzOyB0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpOyB9IHJldHVybiAoaGludCA9PT0gInN0cmluZyIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTsgfQppbXBvcnQgZ2V0Q29uZkRhdGEgZnJvbSAnLi9jb25maWcuanMnOwppbXBvcnQgcmVwb3J0UXVlcnlBcGkgZnJvbSAnQC9hcGkvZnJhbWUvbWFpbi9kaXJlY3RGdW5kL2RmclJlcG9ydERhdGEvUmVwb3J0UXVlcnkuanMnOwovLyBpbXBvcnQgeyBnZXQsIHBvc3QsIGRlbCwgcHV0IH0gZnJvbSAnQC9hcGkvaHR0cCcKCi8qKg0KICog5Yid5aeL5YyW5pa55rOVDQogKi8KdmFyIGluaXRNZXRob2RzID0gewogIGluaXRDcmVhdGVkOiBmdW5jdGlvbiBpbml0Q3JlYXRlZChwYXJhbTUpIHsKICAgIHRoaXMuaW5pdENvbmZpZyhwYXJhbTUpOwogIH0sCiAgaW5pdE1vdW50ZWQ6IGZ1bmN0aW9uIGluaXRNb3VudGVkKCkgewogICAgdGhpcy5pbml0VGFibGVDb2x1bW5zKCk7CiAgICB2YXIgY3VyWWVhciA9IE51bWJlcih0aGlzLnVzZXJJbmZvLnllYXIpOwogICAgdGhpcy4kcmVmcy5ic1RhYmxlUmVmLmZvcm1TZWFyY2hEYXRhLnllYXIgPSBjdXJZZWFyOwogIH0sCiAgaW5pdENvbmZpZzogZnVuY3Rpb24gaW5pdENvbmZpZyhwYXJhbTUpIHsKICAgIHRoaXMuaW5pdFByb3ZpbmNlKHBhcmFtNSk7IC8vIOWIpOauteaYr+WQpuWMuuWOvwogICAgLy8g5Yy65YiS5qCRCiAgICB0aGlzLm1vZkRpdlRyZWVDb25maWcgPSBnZXRDb25mRGF0YSgnbGVmdFRyZWVDb25mJywgJ21vZkRpdlRyZWVDb25maWcnKTsKICAgIHRoaXMubW9mRGl2VHJlZVF1ZXJ5cGFyYW1zID0gZ2V0Q29uZkRhdGEoJ2xlZnRUcmVlQ29uZicsICdtb2ZEaXZUcmVlUXVlcnlwYXJhbXMnKTsKICAgIC8vIHRoaXMuYWdlbmN5VHJlZVF1ZXJ5cGFyYW1zLnJvbGVHdWlkID0gdGhpcy5jdXJOYXZNb2R1bGUucm9sZWd1aWQKICAgIHRoaXMubW9mRGl2VHJlZUZpbHRlclRleHQgPSBnZXRDb25mRGF0YSgnbGVmdFRyZWVDb25mJywgJ21vZkRpdlRyZWVGaWx0ZXJUZXh0Jyk7CiAgICB0aGlzLm1vZkRpdlRyZWVEYXRhID0gZ2V0Q29uZkRhdGEoJ2xlZnRUcmVlQ29uZicsICdtb2ZEaXZUcmVlRGF0YScpOwogICAgLy8g5oql6KGo5qCRCiAgICB0aGlzLmlucHV0VGFibGVUcmVlQ29uZmlnID0gZ2V0Q29uZkRhdGEoJ2xlZnRUcmVlQ29uZicsICdpbnB1dFRhYmxlVHJlZUNvbmZpZycpOwogICAgdGhpcy5pbnB1dFRhYmxlVHJlZVF1ZXJ5cGFyYW1zID0gZ2V0Q29uZkRhdGEoJ2xlZnRUcmVlQ29uZicsICdpbnB1dFRhYmxlVHJlZVF1ZXJ5cGFyYW1zJyk7CiAgICB0aGlzLmlucHV0VGFibGVUcmVlRmlsdGVyVGV4dCA9IGdldENvbmZEYXRhKCdsZWZ0VHJlZUNvbmYnLCAnaW5wdXRUYWJsZVRyZWVGaWx0ZXJUZXh0Jyk7CiAgICB0aGlzLmlucHV0VGFibGVUcmVlRGF0YSA9IGdldENvbmZEYXRhKCdsZWZ0VHJlZUNvbmYnLCAnaW5wdXRUYWJsZVRyZWVEYXRhJyk7CiAgICAvLyDooajmoLzphY3nva4KICAgIHRoaXMuZm9vdGVyQ29uZmlnID0gZ2V0Q29uZkRhdGEoJ3RhYmxlQ29uZicsICdmb290ZXJDb25maWcnKTsKICAgIHRoaXMucGFnZXJDb25maWcgPSBnZXRDb25mRGF0YSgndGFibGVDb25mJywgJ3BhZ2VyQ29uZmlnJyk7CiAgICB0aGlzLnRvb2xiYXJDb25maWcgPSBnZXRDb25mRGF0YSgndGFibGVDb25mJywgJ3Rvb2xiYXJDb25maWcnKTsKICAgIHZhciBjdXJZZWFyID0gTnVtYmVyKHRoaXMudXNlckluZm8ueWVhcik7CiAgICB0aGlzLnRvb2xiYXJDb25maWcueWVhcmxpc3QgPSBbY3VyWWVhciAtIDEsIGN1clllYXIsIGN1clllYXIgKyAxXTsKICAgIHRoaXMudGFibGVDb25maWcgPSBnZXRDb25mRGF0YSgndGFibGVDb25mJywgJ3RhYmxlQ29uZmlnJyk7CiAgICB0aGlzLnRhYmxlQ29sdW1uc0NvbmZpZyA9IGdldENvbmZEYXRhKCd0YWJsZUNvbmYnLCAndGFibGVDb2x1bW5zQ29uZmlnJyk7CiAgICB0aGlzLnRhYmxlRGF0YSA9IGdldENvbmZEYXRhKCd0YWJsZUNvbmYnLCAndGFibGVEYXRhJyk7CiAgICB0aGlzLmVkaXRSdWxlcyA9IGdldENvbmZEYXRhKCd0YWJsZUNvbmYnLCAnZWRpdFJ1bGVzJyk7CiAgICB0aGlzLnNldEJ1dHRvbnMoKTsKICB9LAogIGluaXRUYWJsZUNvbHVtbnM6IGZ1bmN0aW9uIGluaXRUYWJsZUNvbHVtbnMoKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9LAogIGluaXRUYWJsZVBhbmVsQnRuOiBmdW5jdGlvbiBpbml0VGFibGVQYW5lbEJ0bihrZXkpIHsKICAgIHRoaXMudGFiU3RhdHVzQnRuQ29uZmlnID0gZ2V0Q29uZkRhdGEoJ3N0YXR1czJidXR0b24nLCBrZXkpOwogIH0sCiAgaW5pdFByb3ZpbmNlOiBmdW5jdGlvbiBpbml0UHJvdmluY2UocGFyYW01KSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAvLyB0aGlzLmhhbmRsZUh0dHBNZXRob2QocmVwb3J0UXVlcnlBcGkuaXNBcmVhKCkpLnRoZW4oZGF0YSA9PiB7CiAgICAvLyAgIGlmIChkYXRhLmNvZGUgPT09ICcxMDAwMDAnKSB7CiAgICAvLyAgICAgaWYgKGRhdGEuZGF0YSkgewogICAgdmFyIG9iaiA9IHt9OwogICAgaWYgKHBhcmFtNS5pc1N1bW1hcnkgPT09ICcwJykgewogICAgICAvLyDmnKznuqfnvJbliLYKICAgICAgc2VsZi5wcm92aW5jZUZsYWcgPSB0cnVlOwogICAgICB0aGlzLmluaXRUYWJsZVBhbmVsQnRuKCdhcmVhVGFibGVQYW5lbENvbmZpZycpOwogICAgICBvYmouY29kZSA9ICdiZW5qaSc7CiAgICB9IGVsc2UgaWYgKHBhcmFtNS5pc1N1bW1hcnkgPT09ICcxJykgewogICAgICAvLyDmsYfmgLsKICAgICAgdGhpcy5pbml0VGFibGVQYW5lbEJ0bignc3VtVGFiU3RhdHVzQnRuQ29uZmlnJyk7CiAgICAgIG9iai5jb2RlID0gJ3N1bW1hcnknOwogICAgfSBlbHNlIGlmIChwYXJhbTUuaXNBY2NlcHQgPT09ICcxJykgewogICAgICAvLyDmjqXmlLYKICAgICAgdGhpcy5pbml0VGFibGVQYW5lbEJ0bignZGF0YUFjY2VwdFRhYlN0YXR1c0J0bkNvbmZpZycpOwogICAgICBvYmouY29kZSA9ICd1bkFjY2VwdCc7CiAgICB9IGVsc2UgaWYgKHBhcmFtNS5pc0F1ZGl0ID09PSAnMScgfHwgcGFyYW01LmlzQXVkaXQgPT09ICcyJykgewogICAgICAvLyDlrqHmoLgKICAgICAgdGhpcy5pbml0VGFibGVQYW5lbEJ0bignYXVkaXRUYWJTdGF0dXNCdG5Db25maWcnKTsKICAgICAgb2JqLmNvZGUgPSAndW5BdWRpdCc7CiAgICB9CiAgICB0aGlzLm9uVGFiUGFuZWx0YWJDbGljayhvYmopOwogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgIHNlbGYuJG1lc3NhZ2UuZXJyb3IoJ+WMuuWIkumFjee9ruS/oeaBr+WIneWni+WMluWksei0pSEnKQogICAgLy8gICB9CiAgICAvLyB9KQogIH0KfTsKCi8qKg0KICog55WM6Z2i5Lqk5LqS6YC76L6R5pa55rOVDQogKi8KdmFyIGludGVyZmFjZU1ldGhvZHMgPSB7CiAgb25UcmVlTG9hZGVkOiBmdW5jdGlvbiBvblRyZWVMb2FkZWQoX3JlZikgewogICAgdmFyIHRyZWUgPSBfcmVmLnRyZWUsCiAgICAgIHRyZWVEYXRhID0gX3JlZi50cmVlRGF0YTsKICB9LAogIG9uQWdlbmN5VHJlZU5vZGVDaGVja0NsaWNrOiBmdW5jdGlvbiBvbkFnZW5jeVRyZWVOb2RlQ2hlY2tDbGljayhfcmVmMikgewogICAgdmFyIG5vZGUgPSBfcmVmMi5ub2RlLAogICAgICBub2RlcyA9IF9yZWYyLm5vZGVzOwogICAgaWYgKG5vZGVzICYmIG5vZGVzLmxlbmd0aCA+IDApIHsKICAgICAgdGhpcy5hZ2VuY3lJZHMgPSBub2Rlcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5pZDsKICAgICAgfSk7CiAgICAgIHRoaXMuZ2V0U3BlY1RhYmxlRGF0YSgpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy50YWJsZURhdGEgPSBbXTsKICAgIH0KICB9LAogIG9uSW5wdXRUYWJsZVRyZWVOb2RlQ2hlY2tDbGljazogZnVuY3Rpb24gb25JbnB1dFRhYmxlVHJlZU5vZGVDaGVja0NsaWNrKF9yZWYzKSB7CiAgICB2YXIgbm9kZXMgPSBfcmVmMy5ub2RlczsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHZhciB0YWJsRGF0YU9iaiA9IHt9OwogICAgdmFyIHNlbGVjdEtleXMgPSBbXTsKICAgIGlmIChub2RlcyAmJiBub2Rlcy5sZW5ndGggPiAwKSB7CiAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICBpZiAobm9kZS5pc2xlYWYgfHwgbm9kZS5pc2xlYWYgPT09ICcxJykgewogICAgICAgICAgc2VsZi5jdXJyZXBvcnRndWlkID0gbm9kZS5pZDsKICAgICAgICAgIHNlbGYuY3VyVGFibGUgPSB7CiAgICAgICAgICAgIG5hbWU6IG5vZGUubGFiZWwKICAgICAgICAgIH07CiAgICAgICAgICB2YXIgdGFiRGF0YSA9IHsKICAgICAgICAgICAgbGFiZWw6IG5vZGUubGFiZWwsCiAgICAgICAgICAgIGlkOiBub2RlLmlkLAogICAgICAgICAgICB0YWJsZUNvbHVtbnM6IFtdCiAgICAgICAgICB9OwogICAgICAgICAgc2VsZWN0S2V5cy5wdXNoKG5vZGUuaWQpOwogICAgICAgICAgdGFibERhdGFPYmpbbm9kZS5pZF0gPSB0YWJEYXRhOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgdmFyIHB1c2hlZEtleXMgPSBbXTsKICAgICAgaWYgKHRoaXMudGFiRGF0YXMubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMudGFiRGF0YXMuZm9yRWFjaChmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgaWYgKHNlbGVjdEtleXMuaW5jbHVkZXMoZGF0YS5pZCkpIHsKICAgICAgICAgICAgcHVzaGVkS2V5cy5wdXNoKGRhdGEuaWQpOwogICAgICAgICAgICByZXN1bHQucHVzaChkYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICB2YXIgc2VsZWN0Tm9kZXMgPSBPYmplY3QudmFsdWVzKHRhYmxEYXRhT2JqKTsKICAgICAgaWYgKHNlbGVjdE5vZGVzLmxlbmd0aCA+IDApIHsKICAgICAgICBzZWxlY3ROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBpZiAoIXB1c2hlZEtleXMuaW5jbHVkZXMoZGF0YS5pZCkpIHsKICAgICAgICAgICAgcmVzdWx0LnB1c2goZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy50YWJEYXRhcyA9IHJlc3VsdDsKICAgICAgdGhpcy50YWJTZWxlY3QgPSByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdOwogICAgICB0aGlzLiRyZWZzLmJzVGFiLmN1clRhYlNlbGVjdCA9IHRoaXMudGFiU2VsZWN0OwogICAgICB0aGlzLmNsaWNrVGFiKHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV0pOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy50YWJEYXRhcyA9IFtdOwogICAgICB0aGlzLnRhYmxlQ29sdW1uc0NvbmZpZyA9IFtdOwogICAgICB0aGlzLmN1clRhYmxlID0gewogICAgICAgIG5hbWU6ICfor7fpgInmi6nmiqXooagnCiAgICAgIH07CiAgICAgIHRoaXMuY3VycmVwb3J0Z3VpZCA9ICcnOwogICAgfQogIH0sCiAgb25JbnB1dFRhYmxlVHJlZU5vZGVDaGVja0NoYW5nZTogZnVuY3Rpb24gb25JbnB1dFRhYmxlVHJlZU5vZGVDaGVja0NoYW5nZShfcmVmNCkgewogICAgdmFyIGNoZWNrZWQgPSBfcmVmNC5jaGVja2VkLAogICAgICBjaGlsZHJlbkNoZWNrZWQgPSBfcmVmNC5jaGlsZHJlbkNoZWNrZWQsCiAgICAgIG5vZGUgPSBfcmVmNC5ub2RlOwogIH0sCiAgY2xpY2tUYWI6IGZ1bmN0aW9uIGNsaWNrVGFiKG9iaiwgZmxhZykgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgaWYgKG9iaiAhPT0gdW5kZWZpbmVkICYmIG9iai5pZCkgewogICAgICB2YXIgdGFibGVOYW1lOwogICAgICBpZiAoc2VsZi5jdXJTdGF0dXNOdW0gPT09IDEgJiYgc2VsZi5tb2ZEaXZUcmVlQ2xpY2suY29kZSAhPT0gJycpIHsKICAgICAgICB0YWJsZU5hbWUgPSAnKCcgKyBzZWxmLm1vZkRpdlRyZWVDbGljay5jb2RlICsgJy0nICsgc2VsZi5tb2ZEaXZUcmVlQ2xpY2submFtZSArICcpJyArIG9iai5sYWJlbDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0YWJsZU5hbWUgPSBvYmoubGFiZWw7CiAgICAgIH0KICAgICAgdGhpcy5jdXJUYWJsZSA9IHsKICAgICAgICBuYW1lOiB0YWJsZU5hbWUKICAgICAgfTsKICAgICAgdGhpcy5jdXJyZXBvcnRndWlkID0gb2JqLmlkOwogICAgICB0aGlzLmN1cnJlcG9ydGNvZGUgPSBvYmouY29kZTsKICAgICAgdGhpcy5xdWVyeUJvc3NGaXNjYWxUYWJsZUNvbmZpZy5yZXBvcnRndWlkID0gb2JqLmlkOwogICAgICB0aGlzLmhhbmRsZUh0dHBNZXRob2QocmVwb3J0UXVlcnlBcGkucXVlcnlCb3NzRmlzY2FsVGFibGVDb25maWcob2JqLmlkKSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgc2VsZi50YWJsZUNvbHVtbnNDb25maWcgPSBzZWxmLmdldE5ld0RhdGFDb2x1bW5zKHJlcy5kYXRhLmNvbHVtbnMsIGZsYWcpOwogICAgICAgICAgc2VsZi5maWVsZFNpemUgPSBzZWxmLnRhYmxlQ29sdW1uc0NvbmZpZy5sZW5ndGg7CiAgICAgICAgICBzZWxmLmdldFNwZWNUYWJsZURhdGEoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy50YWJsZUNvbHVtbnNDb25maWcgPSBbXTsKICAgICAgdGhpcy50YWJsZURhdGEgPSBbXTsKICAgIH0KICB9LAogIC8vIOmAkuW9kuiwg+aVtOaVsOaNrue7k+aehAogIGdldE5ld0RhdGFDb2x1bW5zOiBmdW5jdGlvbiBnZXROZXdEYXRhQ29sdW1ucyhkYXRhQ29sdW1zLCB1c2VFZGl0KSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgZGF0YUNvbHVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgLy8gdGhpcy4kZGVsZXRlKGl0ZW0sICd3aWR0aCcpCiAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7CiAgICAgICAgLy8gaXRlbS5jaGlsZHJlbiA9IGl0ZW0uY2hpbGRyZW5zCiAgICAgICAgX3RoaXMuJGRlbGV0ZShpdGVtLCAnZmllbGQnKTsKICAgICAgICAvLyAgdGhpcy4kZGVsZXRlKGl0ZW0sICdjaGlsZHJlbnMnKQogICAgICAgIF90aGlzLmdldE5ld0RhdGFDb2x1bW5zKGl0ZW0uY2hpbGRyZW4pOwogICAgICB9IGVsc2UgewogICAgICAgIGl0ZW0ud2lkdGggPSAnZml0JzsKICAgICAgICBpdGVtLm1pbldpZHRoID0gJzIwMCc7CiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NlbGVjdCcpIHsKICAgICAgICAgIGl0ZW0uY2VsbFJlbmRlciA9IHsKICAgICAgICAgICAgbmFtZTogJyR2eGVTZWxlY3QnLAogICAgICAgICAgICBvcHRpb25zOiBmdW5jdGlvbiAoc3RyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHN0ci5zcGxpdCgnKycpLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLnNwbGl0KCcjJylbMF0sCiAgICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLnNwbGl0KCcjJylbMV0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0oaXRlbS5yZWZtb2RlbCkKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtb25leScpIHsKICAgICAgICAgIGl0ZW0uYWxpZ24gPSAncmlnaHQnOwogICAgICAgICAgaXRlbS5jb21iaW5lZFR5cGUgPSBbJ2F2ZXJhZ2UnLCAnc3ViVG90YWwnLCAndG90YWwnLCAndG90YWxBbGwnXTsKICAgICAgICAgIGl0ZW0uY2VsbFJlbmRlciA9IHsKICAgICAgICAgICAgbmFtZTogJyR2eGVNb25leScsCiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgdHlwZTogJ2Zsb2F0JwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgaWYgKHVzZUVkaXQpIHsKICAgICAgICAgICAgY29uc29sZS5sb2codXNlRWRpdCk7CiAgICAgICAgICAgIGl0ZW0uZWRpdFJlbmRlciA9IHsKICAgICAgICAgICAgICBuYW1lOiAnJHZ4ZU1vbmV5JywKICAgICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgICAgY2xlYXJhYmxlOiBmYWxzZSwKICAgICAgICAgICAgICAgIG1pbjogMCwKICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGl0ZW0uYWxpZ24gPSAnbGVmdCc7CiAgICAgICAgfQogICAgICAgIGlmIChpdGVtLmlzU2hvdyA9PT0gJ2ZhbHNlJykgewogICAgICAgICAgaXRlbS52aXNpYmxlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBpdGVtOwogICAgfSk7CiAgICByZXR1cm4gZGF0YUNvbHVtczsKICB9LAogIHNldEJ1dHRvbnM6IGZ1bmN0aW9uIHNldEJ1dHRvbnMoKSB7CiAgICB0aGlzLmJ1dHRvbkNvbmZpZyA9IFt7CiAgICAgIGNvZGU6ICd0b29sYmFyLXF1ZXJ5JywKICAgICAgbmFtZTogJ+afpeivoicsCiAgICAgIHN0YXR1czogJ3ByaW1hcnknLAogICAgICBjYWxsYmFjazogdGhpcy5nZXRTcGVjVGFibGVEYXRhCiAgICB9LCB7CiAgICAgIGNvZGU6ICd0b29sYmFyLWV4cG9ydCcsCiAgICAgIG5hbWU6ICflr7zlh7onLAogICAgICBjYWxsYmFjazogdGhpcy5nb3ZFeHBvcnQKICAgIH0KICAgIC8vIHsgY29kZTogJ3Rvb2xiYXItZXh0cmFjdCcsIG5hbWU6ICfmj5Dlj5YnLCBjYWxsYmFjazogdGhpcy5iYXRjaEV4cG9ydCB9LAogICAgLy8geyBjb2RlOiAndG9vbGJhci10YWJsZUNvbW1pdCcsIG5hbWU6ICfmj5DkuqQnLCBjYWxsYmFjazogdGhpcy50YWJsZUNvbW1pdCB9CiAgICBdOwogIH0sCiAgYWpheERhdGE6IGZ1bmN0aW9uIGFqYXhEYXRhKF9yZWY1KSB7CiAgICB2YXIgcGFyYW1zID0gX3JlZjUucGFyYW1zLAogICAgICBjdXJyZW50UGFnZSA9IF9yZWY1LmN1cnJlbnRQYWdlLAogICAgICBwYWdlU2l6ZSA9IF9yZWY1LnBhZ2VTaXplOwogICAgdGhpcy5nZXRUYWJsZURhdGFzKHBhcmFtcywgY3VycmVudFBhZ2UsIHBhZ2VTaXplKTsKICB9LAogIG9uVGFibGVUb29sYmFyQnRuQ2xpY2s6IGZ1bmN0aW9uIG9uVGFibGVUb29sYmFyQnRuQ2xpY2sob2JqLCAkdGhpcykgewogICAgaWYgKG9iai5jb2RlID09PSAncmVmcmVzaCcpIHsKICAgICAgdGhpcy5nZXRTcGVjVGFibGVEYXRhKCk7CiAgICB9CiAgfSwKICBvbklucHV0VGFibGVUcmVlTm9kZUNsaWNrOiBmdW5jdGlvbiBvbklucHV0VGFibGVUcmVlTm9kZUNsaWNrKF9yZWY2KSB7CiAgICB2YXIgbm9kZSA9IF9yZWY2Lm5vZGU7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICBpZiAoc2VsZi5lZGl0U3RhdHVzKSB7CiAgICAgIHRoaXMuJFhNb2RhbC5tZXNzYWdlKHsKICAgICAgICBzdGF0dXM6ICdlcnJvcicsCiAgICAgICAgbWVzc2FnZTogJ+ivt+WFiOmAgOWHuue8lui+keeKtuaAgeWGjei/m+ihjOaTjeS9nCcKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChzZWxmLmN1clN0YXR1c051bSA9PT0gMSAmJiBzZWxmLmN1ck1vZkRpdkNvZGUgPT09ICcnKSB7CiAgICAgIHNlbGYuY3VyTW9mRGl2Q29kZSA9IHNlbGYudXNlckluZm8ucHJvdmluY2U7CiAgICB9CiAgICB2YXIgdGFibERhdGFPYmogPSB7fTsKICAgIGlmIChub2RlLmlzbGVhZiB8fCBub2RlLmlzbGVhZiA9PT0gJzEnKSB7CiAgICAgIHNlbGYuY3VycmVwb3J0Z3VpZCA9IG5vZGUuaWQ7CiAgICAgIHNlbGYucmVwb3J0VGFibGVDbGlja05vZGUuaWQgPSBub2RlLmlkOwogICAgICBzZWxmLnJlcG9ydFRhYmxlQ2xpY2tOb2RlLm5hbWUgPSBub2RlLm5hbWU7CiAgICAgIHNlbGYuY3VyVGFibGUgPSB7CiAgICAgICAgbmFtZTogbm9kZS5sYWJlbAogICAgICB9OwogICAgICB2YXIgdGFiRGF0YSA9IHsKICAgICAgICBsYWJlbDogbm9kZS5sYWJlbCwKICAgICAgICBpZDogbm9kZS5pZCwKICAgICAgICBjb2RlOiBub2RlLmNvZGUsCiAgICAgICAgdGFibGVDb2x1bW5zOiBbXQogICAgICB9OwogICAgICB0YWJsRGF0YU9ialtub2RlLmlkXSA9IHRhYkRhdGE7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKICAgICAgdGhpcy50YWJEYXRhcyA9IHJlc3VsdDsKICAgICAgdGhpcy50YWJTZWxlY3QgPSB0YWJEYXRhOwogICAgICB0aGlzLiRyZWZzLmJzVGFiLmN1clRhYlNlbGVjdCA9IHRoaXMudGFiU2VsZWN0OwogICAgICB0aGlzLmNsaWNrVGFiKHRhYkRhdGEpOwogICAgfQogIH0sCiAgbW9mRGl2VHJlZU5vZGVDaGVja0NoYW5nZTogZnVuY3Rpb24gbW9mRGl2VHJlZU5vZGVDaGVja0NoYW5nZShfcmVmNykgewogICAgdmFyIGNoZWNrZWQgPSBfcmVmNy5jaGVja2VkLAogICAgICBjaGlsZHJlbkNoZWNrZWQgPSBfcmVmNy5jaGlsZHJlbkNoZWNrZWQsCiAgICAgIG5vZGUgPSBfcmVmNy5ub2RlOwogIH0sCiAgbW9mRGl2VHJlZU5vZGVDaGVja0NsaWNrOiBmdW5jdGlvbiBtb2ZEaXZUcmVlTm9kZUNoZWNrQ2xpY2soX3JlZjgpIHsKICAgIHZhciBub2RlcyA9IF9yZWY4Lm5vZGVzOwogIH0sCiAgbW9mRGl2VHJlZU5vZGVDbGljazogZnVuY3Rpb24gbW9mRGl2VHJlZU5vZGVDbGljayhfcmVmOSkgewogICAgdmFyIG5vZGUgPSBfcmVmOS5ub2RlOwogICAgaWYgKG5vZGUuY29kZS5pbmRleE9mKCc5OTAwMCcpID4gMCB8fCBub2RlLmlzbGVhZikgewogICAgICAvLyDmjpLpmaTovpbljLoKICAgICAgdGhpcy5jdXJNb2ZEaXZDb2RlID0gbm9kZS5jb2RlOwogICAgICB0aGlzLm1vZkRpdlRyZWVDbGljayA9IHsKICAgICAgICBjb2RlOiBub2RlLmNvZGUsCiAgICAgICAgbmFtZTogbm9kZS5uYW1lCiAgICAgIH07CiAgICB9CiAgICBpZiAobm9kZS5wYXJlbnRJZCA9PT0gJzAnKSB7CiAgICAgIHRoaXMuaXNBbGxQYXJlbnQgPSB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5pc0FsbFBhcmVudCA9IGZhbHNlOwogICAgfQogIH0KfTsKCi8qKg0KICog5pWw5o2u5pa55rOV77yIQUpBWO+8iQ0KICovCnZhciBkYXRhTWV0aG9kcyA9IHsKICBnZXRTcGVjVGFibGVEYXRhOiBmdW5jdGlvbiBnZXRTcGVjVGFibGVEYXRhKCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgLy8gaWYgKHRoaXMudGFiRGF0YXMubGVuZ3RoID09PSAwKSB7CiAgICAvLyAgIHRoaXMuJFhNb2RhbC5tZXNzYWdlKHsgc3RhdHVzOiAnd2FybmluZycsIG1lc3NhZ2U6ICfor7fpgInmi6nmiqXooagnIH0pCiAgICAvLyAgIHJldHVybgogICAgLy8gfQogICAgLy8gaWYgKCF0aGlzLmFnZW5jeUlkcyB8fCB0aGlzLmFnZW5jeUlkcy5sZW5ndGggPT09IDApIHsKICAgIC8vICAgdGhpcy4kWE1vZGFsLm1lc3NhZ2UoeyBzdGF0dXM6ICd3YXJuaW5nJywgbWVzc2FnZTogJ+ivt+mAieaLqeWNleS9jScgfSkKICAgIC8vICAgcmV0dXJuCiAgICAvLyB9CiAgICBzZWxmLmdldFRhYmxlRGF0YXMoe30sIDEsIDEwMDAwKTsKICB9LAogIGdldFRhYmxlRGF0YXM6IGZ1bmN0aW9uIGdldFRhYmxlRGF0YXMocGFyYW1zLCBjdXJyZW50UGFnZSwgcGFnZVNpemUpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHNlbGYucGFnZXJDb25maWcuY3VycmVudFBhZ2UgPSBjdXJyZW50UGFnZSB8fCAxOwogICAgc2VsZi5wYWdlckNvbmZpZy5wYWdlU2l6ZSA9IDEwMDAwOwogICAgdmFyIHllYXIgPSBwYXJhbXMueWVhciB8fCBzZWxmLnVzZXJJbmZvLnllYXI7CiAgICB2YXIgZmlsdGVyVmFsdWUgPSBwYXJhbXMuZmlsdGVyVmFsdWU7CiAgICBzZWxmLnF1ZXJ5Qm9zc0Rlc2lnblJlcG9ydERhdGEgPSBPYmplY3QuYXNzaWduKHRoaXMucXVlcnlCb3NzRGVzaWduUmVwb3J0RGF0YSwgewogICAgICB5ZWFyOiB5ZWFyLAogICAgICBmaWx0ZXJWYWx1ZTogZmlsdGVyVmFsdWUsCiAgICAgIGN1cnJlbnRQYWdlOiBjdXJyZW50UGFnZSwKICAgICAgcGFnZVNpemU6IHBhZ2VTaXplCiAgICB9KTsKICAgIHRoaXMucXVlcnlCb3NzRGVzaWduUmVwb3J0RGF0YS5yZXBvcnRJZCA9IHNlbGYuY3VycmVwb3J0Z3VpZDsKICAgIHRoaXMucXVlcnlCb3NzRGVzaWduUmVwb3J0RGF0YS5yZXBvcnRDb2RlID0gc2VsZi5jdXJyZXBvcnRjb2RlOwogICAgdGhpcy5xdWVyeUJvc3NEZXNpZ25SZXBvcnREYXRhLmZpZWxkU2l6ZSA9IHNlbGYuZmllbGRTaXplOwogICAgdGhpcy5xdWVyeUJvc3NEZXNpZ25SZXBvcnREYXRhLm1vZkRpdkNvZGUgPSBzZWxmLmN1ck1vZkRpdkNvZGU7CiAgICBpZiAoTnVtYmVyKHNlbGYuZmlzY2FsQ29uZmlnLmRhdGFUeXBlKSA+IDIpIHsKICAgICAgdGhpcy5xdWVyeUJvc3NEZXNpZ25SZXBvcnREYXRhLnF1ZXJ5Q29uZGl0aW9ucy53aGVyZVNxbCA9ICcgYW5kIGRhdGF0eXBlPjIgJzsKICAgIH0KICAgIHRoaXMucXVlcnlCb3NzRGVzaWduUmVwb3J0RGF0YS5zdGF0dXMgPSBzZWxmLmN1clN0YXR1c051bTsKICAgIHRoaXMucXVlcnlCb3NzRGVzaWduUmVwb3J0RGF0YS5zdW1tYXJ5VHlwZSA9IHNlbGYucGFyYW01LnN1bW1hcnlUeXBlOwogICAgLy8g6K6+572u5Yy65YiSCiAgICBzZWxmLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgIHNlbGYuaGFuZGxlSHR0cE1ldGhvZChyZXBvcnRRdWVyeUFwaS5nZXRTdW1tYXJ5VGFibGVEYXRhKHNlbGYucXVlcnlCb3NzRGVzaWduUmVwb3J0RGF0YSkpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgaWYgKGRhdGEpIHsKICAgICAgICB0cnkgewogICAgICAgICAgc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgc2VsZi5wYWdlckNvbmZpZy50b3RhbCA9IGRhdGEuZGF0YS50b3RhbDsKICAgICAgICAgIHZhciBkYXRhUmVzdWx0ID0gZGF0YS5kYXRhLmRhdGFMaXN0OwogICAgICAgICAgLy8gaWYgKGRhdGFSZXN1bHQgJiYgZGF0YVJlc3VsdC5sZW5ndGggPiAwICYmIGRhdGFSZXN1bHRbMF0uaXRlbWNvZGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgLy8gICBkYXRhUmVzdWx0LnNvcnQoKGEsIGIpID0+IGEuaXRlbWNvZGUubG9jYWxlQ29tcGFyZShiLml0ZW1jb2RlKSkKICAgICAgICAgIC8vIH0KICAgICAgICAgIC8vIOWIhue7hAogICAgICAgICAgLy8gdGhpcy5ncm91cExpc3QgPSB0aGlzLmdyb3VwQnkodGhpcy5kYXRhUmVzdWx0LCBmdW5jdGlvbihpdGVtKSB7CiAgICAgICAgICAvLyAgIHJldHVybiBbaXRlbS5lbGVUeXBlXQogICAgICAgICAgLy8gfSkKICAgICAgICAgIHZhciByZXNEYXQgPSBkYXRhUmVzdWx0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gaXRlbSAhPT0gbnVsbDsKICAgICAgICAgIH0pOwogICAgICAgICAgc2VsZi50YWJsZURhdGEgPSByZXNEYXQ7CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgc2VsZi50YWJsZURhdGEgPSBbXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VsZi50YWJsZURhdGEgPSBbXTsKICAgICAgfQogICAgfSk7CiAgfSwKICBncm91cEJ5OiBmdW5jdGlvbiBncm91cEJ5KGFycmF5LCBmKSB7CiAgICB2YXIgZ3JvdXBzID0ge307CiAgICBhcnJheS5mb3JFYWNoKGZ1bmN0aW9uIChvKSB7CiAgICAgIHZhciBncm91cCA9IEpTT04uc3RyaW5naWZ5KGYobykpOwogICAgICBncm91cHNbZ3JvdXBdID0gZ3JvdXBzW2dyb3VwXSB8fCBbXTsKICAgICAgZ3JvdXBzW2dyb3VwXS5wdXNoKG8pOwogICAgfSk7CiAgICByZXR1cm4gT2JqZWN0LmtleXMoZ3JvdXBzKS5tYXAoZnVuY3Rpb24gKGdyb3VwKSB7CiAgICAgIHJldHVybiBncm91cHNbZ3JvdXBdOwogICAgfSk7CiAgfSwKICBkb0VleHRyYWN0OiBmdW5jdGlvbiBkb0VleHRyYWN0KCkgewogICAgdmFyIHBhcmFtcyA9IHt9OwogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgaWYgKHNlbGYuY3VycmVwb3J0Z3VpZCA9PT0gJycpIHsKICAgICAgc2VsZi4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nmiqXooaghJyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHNlbGYuc2hvd0xvYWRpbmcgPSB0cnVlOwogICAgcGFyYW1zLnJlcG9ydGd1aWQgPSBzZWxmLmN1cnJlcG9ydGd1aWQ7CiAgICB2YXIgcXVlcnlDb25kaXRpb25zID0ge307CiAgICBxdWVyeUNvbmRpdGlvbnMuYWdlbmN5Z3VpZCA9ICcnOwogICAgcGFyYW1zLnF1ZXJ5Q29uZGl0aW9ucyA9IHF1ZXJ5Q29uZGl0aW9uczsKICAgIHBhcmFtcy5wYWdlU2l6ZSA9IHNlbGYucXVlcnlCb3NzRGVzaWduUmVwb3J0RGF0YS5wYWdlU2l6ZTsKICAgIHBhcmFtcy5jdXJyZW50UGFnZSA9IHNlbGYucXVlcnlCb3NzRGVzaWduUmVwb3J0RGF0YS5jdXJyZW50UGFnZTsKICAgIHNlbGYuaGFuZGxlSHR0cE1ldGhvZChyZXBvcnRRdWVyeUFwaS5xdWVyeUJvc3NEZXNpZ25SZXBvcnREYXRhKHBhcmFtcykpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgaWYgKGRhdGEpIHsKICAgICAgICB0cnkgewogICAgICAgICAgc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgc2VsZi5wYWdlckNvbmZpZy50b3RhbCA9IGRhdGEuZGF0YS50b3RhbDsKICAgICAgICAgIHZhciBkYXRhUmVzdWx0ID0gZGF0YS5kYXRhLmRhdGFMaXN0OwogICAgICAgICAgaWYgKGRhdGFSZXN1bHQgJiYgZGF0YVJlc3VsdC5sZW5ndGggPiAwICYmIGRhdGFSZXN1bHRbMF0uaXRlbWNvZGUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBkYXRhUmVzdWx0LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgICByZXR1cm4gYS5pdGVtY29kZS5sb2NhbGVDb21wYXJlKGIuaXRlbWNvZGUpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciByZXNEYXQgPSBkYXRhUmVzdWx0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gaXRlbSAhPT0gbnVsbDsKICAgICAgICAgIH0pOwogICAgICAgICAgc2VsZi50YWJsZURhdGEgPSByZXNEYXQ7CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgc2VsZi50YWJsZURhdGEgPSBbXTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VsZi50YWJsZURhdGEgPSBbXTsKICAgICAgfQogICAgfSk7CiAgfSwKICBkb0NvbW1pdDogZnVuY3Rpb24gZG9Db21taXQodHlwZSkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgaWYgKHNlbGYuY3VycmVwb3J0Z3VpZCA9PT0gJycpIHsKICAgICAgc2VsZi4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nmiqXooaghJyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHZhciBwYXJhbXMgPSB7fTsKICAgIHBhcmFtcy5yZXBvcnRJZCA9IHNlbGYuY3VycmVwb3J0Z3VpZDsKICAgIHBhcmFtcy5yZXBvcnRDb2RlID0gc2VsZi5jdXJyZXBvcnRjb2RlOwogICAgcGFyYW1zLmZpZWxkU2l6ZSA9IHNlbGYuZmllbGRTaXplOwogICAgcGFyYW1zLnR5cGUgPSB0eXBlOwogICAgaWYgKHR5cGUgPT09IDEpIHsKICAgICAgcGFyYW1zLnRhYmxlRGF0YSA9IHNlbGYuJHJlZnMuYnNUYWJsZVJlZi50YWJsZURhdGFJbjsKICAgICAgaWYgKCFwYXJhbXMudGFibGVEYXRhIHx8IHBhcmFtcy50YWJsZURhdGEubGVuZ3RoIDwgMSkgewogICAgICAgIHNlbGYuJG1lc3NhZ2Uud2FybmluZygn5oql6KGo5pWw5o2u5Li656m677yM5LiN5Y+v5L+d5a2YIScpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfQogICAgc2VsZi5oYW5kbGVIdHRwTWV0aG9kKHJlcG9ydFF1ZXJ5QXBpLmRvU2F2ZShwYXJhbXMpKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHNlbGYuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgaWYgKGRhdGEuY29kZSA9PT0gJzEwMDAwMCcpIHsKICAgICAgICBzZWxmLiRtZXNzYWdlLnN1Y2Nlc3MoKHR5cGUgPT09IDEgPyAn5L+d5a2YJyA6ICfmj5DkuqQnKSArICfmiJDlip8hJyk7CiAgICAgICAgc2VsZi5jYW5jZWxFZGl0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGRhdGEubWVzc2FnZSkgewogICAgICAgICAgc2VsZi4kbWVzc2FnZS5lcnJvcigodHlwZSA9PT0gMSA/ICfkv53lrZgnIDogJ+aPkOS6pCcpICsgJ+Wksei0pSEnICsgZGF0YS5tZXNzYWdlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2VsZi4kbWVzc2FnZS5lcnJvcigodHlwZSA9PT0gMSA/ICfkv53lrZgnIDogJ+aPkOS6pCcpICsgJ+Wksei0pSEnICsgZGF0YS5tc2cpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICBkb0F1ZGl0OiBmdW5jdGlvbiBkb0F1ZGl0KHR5cGUpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIGlmIChzZWxmLmN1cnJlcG9ydGd1aWQgPT09ICcnKSB7CiAgICAgIHNlbGYuJG1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup5oql6KGoIScpOwogICAgICByZXR1cm47CiAgICB9CiAgICB2YXIgcGFyYW1zID0ge307CiAgICB2YXIgY2hlY2tzID0gW107CiAgICBjaGVja3MucHVzaChzZWxmLnVzZXJJbmZvLnByb3ZpbmNlKTsKICAgIHBhcmFtcy5tb2ZEaXZDb2RlcyA9IGNoZWNrczsKICAgIHBhcmFtcy5hY3Rpb25UeXBlID0gdHlwZTsKICAgIHBhcmFtcy5yZXBvcnRJZCA9IHNlbGYuY3VycmVwb3J0Z3VpZDsKICAgIC8vIGlmICh0eXBlID09PSAxKSB7CiAgICAvLyAgIHBhcmFtcy50YWJsZURhdGEgPSBzZWxmLiRyZWZzLmJzVGFibGVSZWYudGFibGVEYXRhSW4KICAgIC8vICAgaWYgKCFwYXJhbXMudGFibGVEYXRhIHx8IHBhcmFtcy50YWJsZURhdGEubGVuZ3RoIDwgMSkgewogICAgLy8gICAgIHNlbGYuJG1lc3NhZ2Uud2FybmluZygn5oql6KGo5pWw5o2u5Li656m677yM5LiN5Y+v5L+d5a2YIScpCiAgICAvLyAgICAgcmV0dXJuCiAgICAvLyAgIH0KICAgIC8vIH0KICAgIHNlbGYuaGFuZGxlSHR0cE1ldGhvZChyZXBvcnRRdWVyeUFwaS5kb0F1ZGl0KHBhcmFtcykpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICBpZiAoZGF0YS5jb2RlID09PSAnMTAwMDAwJykgewogICAgICAgIHNlbGYuJG1lc3NhZ2Uuc3VjY2Vzcygn5pON5L2c5oiQ5YqfIScpOwogICAgICAgIHNlbGYuY2FuY2VsRWRpdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChkYXRhLm1lc3NhZ2UpIHsKICAgICAgICAgIHNlbGYuJG1lc3NhZ2UuZXJyb3IoJ+aTjeS9nOWksei0pSEnICsgZGF0YS5tZXNzYWdlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2VsZi4kbWVzc2FnZS5lcnJvcign5pON5L2c5aSx6LSlIScgKyBkYXRhLm1zZyk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHNlbGYuY2xpY2tUYWIoewogICAgICBpZDogc2VsZi5yZXBvcnRUYWJsZUNsaWNrTm9kZS5pZCwKICAgICAgbGFiZWw6IHNlbGYucmVwb3J0VGFibGVDbGlja05vZGUubmFtZQogICAgfSwgdHJ1ZSk7CiAgfSwKICBkb1N1bW1hcnk6IGZ1bmN0aW9uIGRvU3VtbWFyeSgpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIGlmIChzZWxmLmN1cnJlcG9ydGd1aWQgPT09ICcnKSB7CiAgICAgIHNlbGYuJG1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup5oql6KGoIScpOwogICAgICByZXR1cm47CiAgICB9CiAgICBzZWxmLmVkaXRTdGF0dXMgPSB0cnVlOwogICAgc2VsZi5pc1N1bSA9IHRydWU7CiAgICB0aGlzLiRyZWZzLmJzVGFiUGFuZWwuckJ1dHRvbnMgPSBbewogICAgICBjb2RlOiAnc3VtbWFyeS1zYXZlJywKICAgICAgbGFiZWw6ICfkv53lrZgnLAogICAgICBzdGF0dXM6ICdwcmltYXJ5JwogICAgfV07CiAgICAvLyDmmoLml7bms6jph4rmjokg55So5LqO5ryU56S6CiAgICBzZWxmLnNob3dMb2FkaW5nID0gdHJ1ZTsKICAgIC8vIHNlbGYuaGFuZGxlSHR0cE1ldGhvZChyZXBvcnRRdWVyeUFwaS5zdW1tYXJ5RGF0YShzZWxmLmN1cnJlcG9ydGd1aWQsIHNlbGYuZmllbGRTaXplLCBzZWxmLnBhcmFtNS5zdW1tYXJ5VHlwZSkpLnRoZW4oZGF0YSA9PiB7CiAgICBzZWxmLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAvLyAgIGlmIChkYXRhLmNvZGUgPT09ICcxMDAwMDAnKSB7CiAgICAvLyAgICAgbGV0IGRhdGFSZXN1bHQgPSBkYXRhLmRhdGEKICAgIC8vICAgICBpZiAoZGF0YVJlc3VsdCAmJiBkYXRhUmVzdWx0Lmxlbmd0aCA+IDAgJiYgZGF0YVJlc3VsdFswXS5pdGVtY29kZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAvLyAgICAgICBkYXRhUmVzdWx0LnNvcnQoKGEsIGIpID0+IGEuaXRlbWNvZGUubG9jYWxlQ29tcGFyZShiLml0ZW1jb2RlKSkKICAgIC8vICAgICB9CiAgICAvLyAgICAgc2VsZi50YWJsZURhdGEgPSBkYXRhUmVzdWx0CiAgICAvLyAgICAgc2VsZi5yZWZyZXNoVGFibGUyRWRpdCh0cnVlKQogICAgLy8gICB9IGVsc2UgewogICAgLy8gICAgIHNlbGYudGFibGVEYXRhID0gW10KICAgIC8vICAgICBpZiAoZGF0YS5tZXNzYWdlKSB7CiAgICAvLyAgICAgICBzZWxmLiRtZXNzYWdlLmVycm9yKCfmsYfmgLvlpLHotKUhJyArIGRhdGEubWVzc2FnZSkKICAgIC8vICAgICB9IGVsc2UgewogICAgLy8gICAgICAgc2VsZi4kbWVzc2FnZS5lcnJvcign5rGH5oC75aSx6LSlIScgKyBkYXRhLm1zZykKICAgIC8vICAgICB9CiAgICAvLyAgIH0KICAgIC8vIH0pCiAgfSwKICByZWZyZXNoVGFibGUyRWRpdDogZnVuY3Rpb24gcmVmcmVzaFRhYmxlMkVkaXQoZmxhZykgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgdGhpcy5oYW5kbGVIdHRwTWV0aG9kKHJlcG9ydFF1ZXJ5QXBpLnF1ZXJ5Qm9zc0Zpc2NhbFRhYmxlQ29uZmlnKHNlbGYuY3VycmVwb3J0Z3VpZCkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzKSB7CiAgICAgICAgc2VsZi50YWJsZUNvbHVtbnNDb25maWcgPSBzZWxmLmdldE5ld0RhdGFDb2x1bW5zKHJlcy5kYXRhLmNvbHVtbnMsIGZsYWcpOwogICAgICAgIHNlbGYuZmllbGRTaXplID0gc2VsZi50YWJsZUNvbHVtbnNDb25maWcubGVuZ3RoOwogICAgICB9CiAgICB9KTsKICB9LAogIHN1bW1tYXJ5U2F2ZTogZnVuY3Rpb24gc3VtbW1hcnlTYXZlKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICB2YXIgcGFyYW1zID0ge307CiAgICBwYXJhbXMucmVwb3J0SWQgPSBzZWxmLmN1cnJlcG9ydGd1aWQ7CiAgICBwYXJhbXMucmVwb3J0Q29kZSA9IHNlbGYuY3VycmVwb3J0Y29kZTsKICAgIHBhcmFtcy5maWVsZFNpemUgPSBzZWxmLmZpZWxkU2l6ZTsKICAgIHBhcmFtcy50YWJsZURhdGEgPSBzZWxmLiRyZWZzLmJzVGFibGVSZWYudGFibGVEYXRhSW47CiAgICBwYXJhbXMuc3VtbWFyeVR5cGUgPSBzZWxmLnBhcmFtNS5zdW1tYXJ5VHlwZTsKICAgIGlmICghcGFyYW1zLnRhYmxlRGF0YSB8fCBwYXJhbXMudGFibGVEYXRhLmxlbmd0aCA8IDEpIHsKICAgICAgc2VsZi4kbWVzc2FnZS53YXJuaW5nKCfmiqXooajmlbDmja7kuLrnqbrvvIzkuI3lj6/kv53lrZghJyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmIChzZWxmLmlzU3VtKSB7CiAgICAgIHZhciBtc2cgPSAn5rGH5oC75L+d5a2Y5ZCO5Lya6KaG55uW5oKo5Y6G5Y+y5bey57yW6L6R55qE5rGH5oC75pWw5o2u77yM5L2g56Gu5a6a6L+Z5qC35pON5L2c5LmIPyc7CiAgICAgIHRoaXMuJFhNb2RhbC5jb25maXJtKG1zZykudGhlbihmdW5jdGlvbiAodHlwZSkgewogICAgICAgIGlmICh0eXBlID09PSAnY29uZmlybScpIHsKICAgICAgICAgIHZhciBsb2FkaW5nID0gX3RoaXMyLiRsb2FkaW5nKHsKICAgICAgICAgICAgbG9jazogdHJ1ZSwKICAgICAgICAgICAgdGV4dDogJ+ato+WcqOWIoOmZpOS4rS4uLuivt+aCqOeojeWAmScsCiAgICAgICAgICAgIHNwaW5uZXI6ICdlbC1pY29uLWxvYWRpbmcnLAogICAgICAgICAgICBiYWNrZ3JvdW5kOiAncmdiYSgwLCAwLCAwLCAwLjcpJwogICAgICAgICAgfSk7CiAgICAgICAgICBzZWxmLmhhbmRsZUh0dHBNZXRob2QocmVwb3J0UXVlcnlBcGkuZG9TdW1tbWFyeVNhdmUocGFyYW1zKSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09PSAnMTAwMDAwJykgewogICAgICAgICAgICAgIGxvYWRpbmcuY2xvc2UoKTsKICAgICAgICAgICAgICBzZWxmLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/neWtmOaIkOWKnyEnKTsKICAgICAgICAgICAgICBzZWxmLnN1bW1hcnlDYW5jZWxFZGl0KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKGRhdGEubWVzc2FnZSkgewogICAgICAgICAgICAgICAgc2VsZi4kbWVzc2FnZS5lcnJvcign5L+d5a2Y5aSx6LSlIScgKyBkYXRhLm1lc3NhZ2UpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzZWxmLiRtZXNzYWdlLmVycm9yKCfkv53lrZjlpLHotKUhJyArIGRhdGEubXNnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgc2VsZi5zaG93TG9hZGluZyA9IHRydWU7CiAgICAgIHNlbGYuaGFuZGxlSHR0cE1ldGhvZChyZXBvcnRRdWVyeUFwaS5kb1N1bW1tYXJ5U2F2ZShwYXJhbXMpKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gJzEwMDAwMCcpIHsKICAgICAgICAgIHNlbGYuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHNlbGYuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+d5a2Y5oiQ5YqfIScpOwogICAgICAgICAgc2VsZi5zdW1tYXJ5Q2FuY2VsRWRpdCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoZGF0YS5tZXNzYWdlKSB7CiAgICAgICAgICAgIHNlbGYuJG1lc3NhZ2UuZXJyb3IoJ+S/neWtmOWksei0pSEnICsgZGF0YS5tZXNzYWdlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNlbGYuJG1lc3NhZ2UuZXJyb3IoJ+S/neWtmOWksei0pSEnICsgZGF0YS5tc2cpOwogICAgICAgICAgfQogICAgICAgICAgc2VsZi5zaG93TG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICB0b0VkaXRTdW1tYXJ5OiBmdW5jdGlvbiB0b0VkaXRTdW1tYXJ5KCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgaWYgKHNlbGYuY3VycmVwb3J0Z3VpZCA9PT0gJycpIHsKICAgICAgc2VsZi4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nmiqXooaghJyk7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHNlbGYuZWRpdFN0YXR1cyA9IHRydWU7CiAgICBzZWxmLmlzU3VtID0gZmFsc2U7CiAgICB0aGlzLiRyZWZzLmJzVGFiUGFuZWwuckJ1dHRvbnMgPSBbewogICAgICBjb2RlOiAnc3VtbWFyeS1zYXZlJywKICAgICAgbGFiZWw6ICfkv53lrZgnLAogICAgICBzdGF0dXM6ICdwcmltYXJ5JwogICAgfV07CiAgICBzZWxmLmNsaWNrVGFiKHsKICAgICAgaWQ6IHNlbGYucmVwb3J0VGFibGVDbGlja05vZGUuaWQsCiAgICAgIGxhYmVsOiBzZWxmLnJlcG9ydFRhYmxlQ2xpY2tOb2RlLm5hbWUKICAgIH0sIHRydWUpOwogIH0sCiAgZG9DdXJyZW50TGV2ZWxDb21taXQ6IGZ1bmN0aW9uIGRvQ3VycmVudExldmVsQ29tbWl0KCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgc2VsZi5oYW5kbGVIdHRwTWV0aG9kKHJlcG9ydFF1ZXJ5QXBpLmN1cnJlbnRMZXZlbENvbW1pdCh7CiAgICAgIG1lbnVHdWlkOiB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUuZ3VpZCwKICAgICAgbWVudU5hbWU6IHRoaXMuJHN0b3JlLnN0YXRlLmN1ck5hdk1vZHVsZS5uYW1lLAogICAgICByZXBvcnRJZDogc2VsZi5jdXJyZXBvcnRndWlkCiAgICB9KSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICBzZWxmLnNob3dMb2FkaW5nID0gZmFsc2U7CiAgICAgIGlmIChkYXRhLmNvZGUgPT09ICcxMDAwMDAnKSB7CiAgICAgICAgc2VsZi4kbWVzc2FnZS5zdWNjZXNzKCfmj5DkuqTmiJDlip8hJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGRhdGEubWVzc2FnZSkgewogICAgICAgICAgc2VsZi4kbWVzc2FnZS5lcnJvcign5o+Q5Lqk5aSx6LSlIScgKyBkYXRhLm1lc3NhZ2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxmLiRtZXNzYWdlLmVycm9yKCfmj5DkuqTlpLHotKUhJyArIGRhdGEubXNnKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgc2VsZi5jbGlja1RhYih7CiAgICAgIGlkOiBzZWxmLnJlcG9ydFRhYmxlQ2xpY2tOb2RlLmlkLAogICAgICBsYWJlbDogc2VsZi5yZXBvcnRUYWJsZUNsaWNrTm9kZS5uYW1lCiAgICB9LCB0cnVlKTsKICB9LAogIGRvQmFjazogZnVuY3Rpb24gZG9CYWNrKCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgc2VsZi5oYW5kbGVIdHRwTWV0aG9kKHJlcG9ydFF1ZXJ5QXBpLmN1cnJlbnRMZXZlbEJhY2sodGhpcy5jdXJTdGF0dXNOdW0pKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIHNlbGYuc2hvd0xvYWRpbmcgPSBmYWxzZTsKICAgICAgaWYgKGRhdGEuY29kZSA9PT0gJzEwMDAwMCcpIHsKICAgICAgICBzZWxmLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aSpOmUgOaIkOWKnyEnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoZGF0YS5tZXNzYWdlKSB7CiAgICAgICAgICBzZWxmLiRtZXNzYWdlLmVycm9yKCfmkqTplIDlpLHotKUhJyArIGRhdGEubWVzc2FnZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlbGYuJG1lc3NhZ2UuZXJyb3IoJ+aSpOmUgOWksei0pSEnICsgZGF0YS5tc2cpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgfSwKICBkb0V4cG9ydDogZnVuY3Rpb24gZG9FeHBvcnQoKSB7CiAgICB0aGlzLiRyZWZzLmJzVGFibGVSZWYudHJpZ2dlckV4cG9ydE9wdGlvbih7CiAgICAgIGZpbGVOYW1lOiB0aGlzLmN1clRhYmxlLm5hbWUKICAgIH0pOwogIH0KfTsKCi8qKg0KICog5qCh6aqM5pa55rOV77yI6KGo5Y2V44CB6KGo5qC877yJDQogKi8KdmFyIHZhbGlkYXRlTWV0aG9kcyA9IHsKICB2YWxpZGF0ZVRhYmxlRGF0YTogZnVuY3Rpb24gdmFsaWRhdGVUYWJsZURhdGEoKSB7CiAgICByZXR1cm4gdGhpcy4kcmVmcy5ic1RhYmxlUmVmLnZhbGlkYXRlKCk7CiAgfQp9Owp2YXIgdXRpbE1ldGhvZHMgPSB7CiAgaXNCbGFuazogZnVuY3Rpb24gaXNCbGFuayh2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09ICcnOwogIH0sCiAgaGFuZGxlSHR0cE1ldGhvZDogZnVuY3Rpb24gaGFuZGxlSHR0cE1ldGhvZChwcm9taXNlKSB7CiAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgIHZhciBuZWVkTG9hZGluZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICB2YXIgbWVzc2FnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdW5kZWZpbmVkOwogICAgdmFyIGxvYWRpbmcgPSB7CiAgICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHt9CiAgICB9OwogICAgaWYgKG5lZWRMb2FkaW5nKSB7CiAgICAgIGxvYWRpbmcgPSB0aGlzLiRsb2FkaW5nKHsKICAgICAgICBsb2NrOiB0cnVlLAogICAgICAgIHRleHQ6IG1lc3NhZ2UgfHwgJ+ato+WcqOivt+axguS4rScsCiAgICAgICAgc3Bpbm5lcjogJ2VsLWljb24tbG9hZGluZycsCiAgICAgICAgYmFja2dyb3VuZDogJ3JnYmEoMCwgMCwgMCwgMC43KScKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgIHJlc29sdmUocmVzKTsKICAgICAgICAgIC8vIGlmIChyZXMuY29kZSA9PT0gJzEwMDAwMCcpIHsKICAgICAgICAgIC8vICAgcmVzb2x2ZShyZXMuZGF0YSkKICAgICAgICAgIC8vIH0gZWxzZSB7CiAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKHJlcy5lcnJvckluZm9yKQogICAgICAgICAgLy8gICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgICAgICAgIC8vICAgICB0aGlzLiRYTW9kYWwubWVzc2FnZSh7IHN0YXR1czogJ2Vycm9yJywgbWVzc2FnZTogcmVzLmVycm9ySW5mb3IucmVzcG9uc2UuZGF0YS5tc2cgfSkKICAgICAgICAgIC8vICAgfSBlbHNlIGlmIChyZXMubXNnKSB7CiAgICAgICAgICAvLyAgICAgdGhpcy4kWE1vZGFsLm1lc3NhZ2UoeyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6IGDplJnor6/vvJpbJHtyZXMuY29kZX0tJHtyZXMubXNnfV1gIH0pCiAgICAgICAgICAvLyAgIH0gZWxzZSB7CiAgICAgICAgICAvLyAgICAgdGhpcy4kWE1vZGFsLm1lc3NhZ2UoeyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6ICfmnKrnn6XplJnor68nIH0pCiAgICAgICAgICAvLyAgIH0KICAgICAgICAgIC8vIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMzLiRYTW9kYWwubWVzc2FnZSh7CiAgICAgICAgICAgIHN0YXR1czogJ2Vycm9yJywKICAgICAgICAgICAgbWVzc2FnZTogJ+acjeWKoemUmeivr++8jOivt+afpeeci+aXpeW/lycKICAgICAgICAgIH0pOwogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICB9CiAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgbG9hZGluZy5jbG9zZSgpOwogICAgICAgIF90aGlzMy4kWE1vZGFsLm1lc3NhZ2UoewogICAgICAgICAgc3RhdHVzOiAnZXJyb3InLAogICAgICAgICAgbWVzc2FnZTogJ+e9kee7nOi/nuaOpeWksei0pe+8jOaIluWJjeerr+mAu+i+kemUmeivr+OAguivt+afpeeci+aXpeW/lycKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIHJlc29sdmUoZmFsc2UpOwogICAgICB9KTsKICAgIH0pOwogIH0KfTsKCi8vIOWvvOWHugp2YXIgZ2V0RXhwb3J0RGlhbG9nID0gewogIGdvdkV4cG9ydDogZnVuY3Rpb24gZ292RXhwb3J0KCkgewogICAgdGhpcy4kQnNGY1V0aWwuZ292QnVkZ2V0RXhwb3J0KHsKICAgICAgZXhwb3J0Q29uZmlnOiB7CiAgICAgICAgaGFzTW9mRGl2OiB0aGlzLnF1ZXJ5Qm9zc0Rlc2lnblJlcG9ydERhdGEuc3VtbWFyeUZsYWcsCiAgICAgICAgcmVwb3J0RmlsdGVTcWw6ICdhbmQgKGNvZGUgbGlrZSBcJzk5OSVcJyknLAogICAgICAgIGV4cG9ydFVybDogJ2Jpc0dvdmJ1ZGdldC9nb3ZGaXNjYWwvZ292U3VtbWFyeS9zdW1tYXJ5L2V4cG9ydCcsCiAgICAgICAgaXNTdW1tYXJ5OiB0aGlzLnF1ZXJ5Qm9zc0Rlc2lnblJlcG9ydERhdGEuc3VtbWFyeUZsYWcsCiAgICAgICAgZG93bjJ6aXA6IHRydWUKICAgICAgfSwKICAgICAgLy8g5a+85Ye656Gu6K6kCiAgICAgIGV4cG9ydFN1cmU6IGZ1bmN0aW9uIGV4cG9ydFN1cmUoY29uZmlnKSB7CiAgICAgICAgY29uc29sZS5sb2coY29uZmlnKTsKICAgICAgfSwKICAgICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7fQogICAgfSk7CiAgfQp9OwpleHBvcnQgdmFyIG15TWV0aG9kcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpbml0TWV0aG9kcyksIGludGVyZmFjZU1ldGhvZHMpLCBkYXRhTWV0aG9kcyksIHZhbGlkYXRlTWV0aG9kcyksIHV0aWxNZXRob2RzKSwgZ2V0RXhwb3J0RGlhbG9nKTs="},{"version":3,"names":["getConfData","reportQueryApi","initMethods","initCreated","param5","initConfig","initMounted","initTableColumns","curYear","Number","userInfo","year","$refs","bsTableRef","formSearchData","initProvince","mofDivTreeConfig","mofDivTreeQueryparams","mofDivTreeFilterText","mofDivTreeData","inputTableTreeConfig","inputTableTreeQueryparams","inputTableTreeFilterText","inputTableTreeData","footerConfig","pagerConfig","toolbarConfig","yearlist","tableConfig","tableColumnsConfig","tableData","editRules","setButtons","Promise","resolve","reject","initTablePanelBtn","key","tabStatusBtnConfig","self","obj","isSummary","provinceFlag","code","isAccept","isAudit","onTabPaneltabClick","interfaceMethods","onTreeLoaded","_ref","tree","treeData","onAgencyTreeNodeCheckClick","_ref2","node","nodes","length","agencyIds","map","item","id","getSpecTableData","onInputTableTreeNodeCheckClick","_ref3","tablDataObj","selectKeys","forEach","isleaf","curreportguid","curTable","name","label","tabData","tableColumns","push","result","pushedKeys","tabDatas","data","includes","selectNodes","Object","values","tabSelect","bsTab","curTabSelect","clickTab","onInputTableTreeNodeCheckChange","_ref4","checked","childrenChecked","flag","undefined","tableName","curStatusNum","mofDivTreeClick","curreportcode","queryBossFiscalTableConfig","reportguid","handleHttpMethod","then","res","getNewDataColumns","columns","fieldSize","dataColums","useEdit","_this","children","$delete","width","minWidth","type","cellRender","options","str","split","index","value","refmodel","align","combinedType","props","console","log","editRender","clearable","min","isShow","visible","buttonConfig","status","callback","govExport","ajaxData","_ref5","params","currentPage","pageSize","getTableDatas","onTableToolbarBtnClick","$this","onInputTableTreeNodeClick","_ref6","editStatus","$XModal","message","curMofDivCode","province","reportTableClickNode","mofDivTreeNodeCheckChange","_ref7","mofDivTreeNodeCheckClick","_ref8","mofDivTreeNodeClick","_ref9","indexOf","parentId","isAllParent","dataMethods","filterValue","queryBossDesignReportData","assign","reportId","reportCode","mofDivCode","fiscalConfig","dataType","queryConditions","whereSql","summaryType","showLoading","getSummaryTableData","total","dataResult","dataList","resDat","filter","err","groupBy","array","f","groups","o","group","JSON","stringify","keys","doEextract","$message","warning","agencyguid","itemcode","sort","a","b","localeCompare","doCommit","tableDataIn","doSave","success","cancelEdit","error","msg","doAudit","checks","mofDivCodes","actionType","doSummary","isSum","bsTabPanel","rButtons","refreshTable2Edit","summmarySave","_this2","confirm","loading","$loading","lock","text","spinner","background","doSummmarySave","close","summaryCancelEdit","toEditSummary","doCurrentLevelCommit","currentLevelCommit","menuGuid","$store","state","curNavModule","guid","menuName","doBack","currentLevelBack","doExport","triggerExportOption","fileName","validateMethods","validateTableData","validate","utilMethods","isBlank","promise","_this3","needLoading","arguments","catch","getExportDialog","$BsFcUtil","govBudgetExport","exportConfig","hasMofDiv","summaryFlag","reportFilteSql","exportUrl","down2zip","exportSure","config","cancel","myMethods","_objectSpread"],"sources":["C:/Users/何小龙/Desktop/platformweb-fb/src/views/main/directFund/report/js/methods.js"],"sourcesContent":["import getConfData from './config.js'\r\nimport reportQueryApi from '@/api/frame/main/directFund/dfrReportData/ReportQuery.js'\r\n// import { get, post, del, put } from '@/api/http'\r\n\r\n/**\r\n * 初始化方法\r\n */\r\nconst initMethods = {\r\n  initCreated(param5) {\r\n    this.initConfig(param5)\r\n  },\r\n  initMounted() {\r\n    this.initTableColumns()\r\n    let curYear = Number(this.userInfo.year)\r\n    this.$refs.bsTableRef.formSearchData.year = curYear\r\n  },\r\n  initConfig(param5) {\r\n    this.initProvince(param5)// 判段是否区县\r\n    // 区划树\r\n    this.mofDivTreeConfig = getConfData('leftTreeConf', 'mofDivTreeConfig')\r\n    this.mofDivTreeQueryparams = getConfData('leftTreeConf', 'mofDivTreeQueryparams')\r\n    // this.agencyTreeQueryparams.roleGuid = this.curNavModule.roleguid\r\n    this.mofDivTreeFilterText = getConfData('leftTreeConf', 'mofDivTreeFilterText')\r\n    this.mofDivTreeData = getConfData('leftTreeConf', 'mofDivTreeData')\r\n    // 报表树\r\n    this.inputTableTreeConfig = getConfData('leftTreeConf', 'inputTableTreeConfig')\r\n    this.inputTableTreeQueryparams = getConfData('leftTreeConf', 'inputTableTreeQueryparams')\r\n    this.inputTableTreeFilterText = getConfData('leftTreeConf', 'inputTableTreeFilterText')\r\n    this.inputTableTreeData = getConfData('leftTreeConf', 'inputTableTreeData')\r\n    // 表格配置\r\n    this.footerConfig = getConfData('tableConf', 'footerConfig')\r\n    this.pagerConfig = getConfData('tableConf', 'pagerConfig')\r\n    this.toolbarConfig = getConfData('tableConf', 'toolbarConfig')\r\n    let curYear = Number(this.userInfo.year)\r\n    this.toolbarConfig.yearlist = [curYear - 1, curYear, curYear + 1]\r\n    this.tableConfig = getConfData('tableConf', 'tableConfig')\r\n    this.tableColumnsConfig = getConfData('tableConf', 'tableColumnsConfig')\r\n    this.tableData = getConfData('tableConf', 'tableData')\r\n    this.editRules = getConfData('tableConf', 'editRules')\r\n    this.setButtons()\r\n  },\r\n  initTableColumns() {\r\n    return new Promise((resolve, reject) => {\r\n      resolve()\r\n    })\r\n  },\r\n  initTablePanelBtn(key) {\r\n    this.tabStatusBtnConfig = getConfData('status2button', key)\r\n  },\r\n  initProvince(param5) {\r\n    let self = this\r\n    // this.handleHttpMethod(reportQueryApi.isArea()).then(data => {\r\n    //   if (data.code === '100000') {\r\n    //     if (data.data) {\r\n    let obj = {}\r\n    if (param5.isSummary === '0') { // 本级编制\r\n      self.provinceFlag = true\r\n      this.initTablePanelBtn('areaTablePanelConfig')\r\n      obj.code = 'benji'\r\n    } else if (param5.isSummary === '1') { // 汇总\r\n      this.initTablePanelBtn('sumTabStatusBtnConfig')\r\n      obj.code = 'summary'\r\n    } else if (param5.isAccept === '1') { // 接收\r\n      this.initTablePanelBtn('dataAcceptTabStatusBtnConfig')\r\n      obj.code = 'unAccept'\r\n    } else if (param5.isAudit === '1' || param5.isAudit === '2') { // 审核\r\n      this.initTablePanelBtn('auditTabStatusBtnConfig')\r\n      obj.code = 'unAudit'\r\n    }\r\n    this.onTabPaneltabClick(obj)\r\n    //   } else {\r\n    //     self.$message.error('区划配置信息初始化失败!')\r\n    //   }\r\n    // })\r\n  }\r\n}\r\n\r\n/**\r\n * 界面交互逻辑方法\r\n */\r\nconst interfaceMethods = {\r\n  onTreeLoaded({ tree, treeData }) {\r\n  },\r\n  onAgencyTreeNodeCheckClick({ node, nodes }) {\r\n    if (nodes && nodes.length > 0) {\r\n      this.agencyIds = nodes.map(item => {\r\n        return item.id\r\n      })\r\n      this.getSpecTableData()\r\n    } else {\r\n      this.tableData = []\r\n    }\r\n  },\r\n  onInputTableTreeNodeCheckClick({ nodes }) {\r\n    let self = this\r\n    let tablDataObj = {}\r\n    let selectKeys = []\r\n    if (nodes && nodes.length > 0) {\r\n      nodes.forEach(node => {\r\n        if (node.isleaf || node.isleaf === '1') {\r\n          self.curreportguid = node.id\r\n          self.curTable = {\r\n            name: node.label\r\n          }\r\n          let tabData = {\r\n            label: node.label,\r\n            id: node.id,\r\n            tableColumns: []\r\n          }\r\n          selectKeys.push(node.id)\r\n          tablDataObj[node.id] = tabData\r\n        }\r\n      })\r\n      let result = []\r\n      let pushedKeys = []\r\n      if (this.tabDatas.length > 0) {\r\n        this.tabDatas.forEach(data => {\r\n          if (selectKeys.includes(data.id)) {\r\n            pushedKeys.push(data.id)\r\n            result.push(data)\r\n          }\r\n        })\r\n      }\r\n      let selectNodes = Object.values(tablDataObj)\r\n      if (selectNodes.length > 0) {\r\n        selectNodes.forEach(data => {\r\n          if (!pushedKeys.includes(data.id)) {\r\n            result.push(data)\r\n          }\r\n        })\r\n      }\r\n      this.tabDatas = result\r\n      this.tabSelect = result[result.length - 1]\r\n      this.$refs.bsTab.curTabSelect = this.tabSelect\r\n      this.clickTab(result[result.length - 1])\r\n    } else {\r\n      this.tabDatas = []\r\n      this.tableColumnsConfig = []\r\n      this.curTable = {\r\n        name: '请选择报表'\r\n      }\r\n      this.curreportguid = ''\r\n    }\r\n  },\r\n  onInputTableTreeNodeCheckChange({ checked, childrenChecked, node }) {\r\n  },\r\n  clickTab(obj, flag) {\r\n    let self = this\r\n    if (obj !== undefined && obj.id) {\r\n      let tableName\r\n      if (self.curStatusNum === 1 && self.mofDivTreeClick.code !== '') {\r\n        tableName = '(' + self.mofDivTreeClick.code + '-' + self.mofDivTreeClick.name + ')' + obj.label\r\n      } else {\r\n        tableName = obj.label\r\n      }\r\n      this.curTable = {\r\n        name: tableName\r\n      }\r\n      this.curreportguid = obj.id\r\n      this.curreportcode = obj.code\r\n      this.queryBossFiscalTableConfig.reportguid = obj.id\r\n      this.handleHttpMethod(reportQueryApi.queryBossFiscalTableConfig(obj.id)).then(res => {\r\n        if (res) {\r\n          self.tableColumnsConfig = self.getNewDataColumns(res.data.columns, flag)\r\n          self.fieldSize = self.tableColumnsConfig.length\r\n          self.getSpecTableData()\r\n        }\r\n      })\r\n    } else {\r\n      this.tableColumnsConfig = []\r\n      this.tableData = []\r\n    }\r\n  },\r\n  // 递归调整数据结构\r\n  getNewDataColumns(dataColums, useEdit) {\r\n    dataColums.map(item => {\r\n      // this.$delete(item, 'width')\r\n      if (item.children) {\r\n        // item.children = item.childrens\r\n        this.$delete(item, 'field')\r\n        //  this.$delete(item, 'childrens')\r\n        this.getNewDataColumns(item.children)\r\n      } else {\r\n        item.width = 'fit'\r\n        item.minWidth = '200'\r\n        if (item.type === 'select') {\r\n          item.cellRender = {\r\n            name: '$vxeSelect',\r\n            options: ((str) => {\r\n              return str.split('+').map((item, index) => {\r\n                return { value: item.split('#')[0], label: item.split('#')[1] }\r\n              })\r\n            })(item.refmodel)\r\n          }\r\n        }\r\n        if (item.type === 'money') {\r\n          item.align = 'right'\r\n          item.combinedType = ['average', 'subTotal', 'total', 'totalAll']\r\n          item.cellRender = {\r\n            name: '$vxeMoney',\r\n            props: {\r\n              type: 'float'\r\n            }\r\n          }\r\n          if (useEdit) {\r\n            console.log(useEdit)\r\n            item.editRender = {\r\n              name: '$vxeMoney',\r\n              props: {\r\n                clearable: false,\r\n                min: 0,\r\n                type: 'float'\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          item.align = 'left'\r\n        }\r\n        if (item.isShow === 'false') {\r\n          item.visible = false\r\n        }\r\n      }\r\n      return item\r\n    })\r\n    return dataColums\r\n  },\r\n  setButtons() {\r\n    this.buttonConfig = [\r\n      { code: 'toolbar-query', name: '查询', status: 'primary', callback: this.getSpecTableData },\r\n      { code: 'toolbar-export', name: '导出', callback: this.govExport }\r\n      // { code: 'toolbar-extract', name: '提取', callback: this.batchExport },\r\n      // { code: 'toolbar-tableCommit', name: '提交', callback: this.tableCommit }\r\n    ]\r\n  },\r\n  ajaxData({ params, currentPage, pageSize }) {\r\n    this.getTableDatas(params, currentPage, pageSize)\r\n  },\r\n  onTableToolbarBtnClick(obj, $this) {\r\n    if (obj.code === 'refresh') {\r\n      this.getSpecTableData()\r\n    }\r\n  },\r\n  onInputTableTreeNodeClick({ node }) {\r\n    let self = this\r\n    if (self.editStatus) {\r\n      this.$XModal.message({ status: 'error', message: '请先退出编辑状态再进行操作' })\r\n      return\r\n    }\r\n    if (self.curStatusNum === 1 && self.curMofDivCode === '') {\r\n      self.curMofDivCode = self.userInfo.province\r\n    }\r\n    let tablDataObj = {}\r\n    if (node.isleaf || node.isleaf === '1') {\r\n      self.curreportguid = node.id\r\n      self.reportTableClickNode.id = node.id\r\n      self.reportTableClickNode.name = node.name\r\n      self.curTable = {\r\n        name: node.label\r\n      }\r\n      let tabData = {\r\n        label: node.label,\r\n        id: node.id,\r\n        code: node.code,\r\n        tableColumns: []\r\n      }\r\n      tablDataObj[node.id] = tabData\r\n      let result = []\r\n      this.tabDatas = result\r\n      this.tabSelect = tabData\r\n      this.$refs.bsTab.curTabSelect = this.tabSelect\r\n      this.clickTab(tabData)\r\n    }\r\n  },\r\n  mofDivTreeNodeCheckChange({ checked, childrenChecked, node }) {\r\n  },\r\n  mofDivTreeNodeCheckClick({ nodes }) {\r\n  },\r\n  mofDivTreeNodeClick({ node }) {\r\n    if (node.code.indexOf('99000') > 0 || node.isleaf) { // 排除辖区\r\n      this.curMofDivCode = node.code\r\n      this.mofDivTreeClick = {\r\n        code: node.code,\r\n        name: node.name\r\n      }\r\n    }\r\n    if (node.parentId === '0') {\r\n      this.isAllParent = true\r\n    } else {\r\n      this.isAllParent = false\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * 数据方法（AJAX）\r\n */\r\nconst dataMethods = {\r\n  getSpecTableData() {\r\n    let self = this\r\n    // if (this.tabDatas.length === 0) {\r\n    //   this.$XModal.message({ status: 'warning', message: '请选择报表' })\r\n    //   return\r\n    // }\r\n    // if (!this.agencyIds || this.agencyIds.length === 0) {\r\n    //   this.$XModal.message({ status: 'warning', message: '请选择单位' })\r\n    //   return\r\n    // }\r\n    self.getTableDatas({}, 1, 10000)\r\n  },\r\n  getTableDatas(params, currentPage, pageSize) {\r\n    let self = this\r\n    self.pagerConfig.currentPage = currentPage || 1\r\n    self.pagerConfig.pageSize = 10000\r\n    let year = params.year || self.userInfo.year\r\n    let filterValue = params.filterValue\r\n    self.queryBossDesignReportData = Object.assign(this.queryBossDesignReportData, {\r\n      year,\r\n      filterValue,\r\n      currentPage,\r\n      pageSize\r\n    })\r\n    this.queryBossDesignReportData.reportId = self.curreportguid\r\n    this.queryBossDesignReportData.reportCode = self.curreportcode\r\n    this.queryBossDesignReportData.fieldSize = self.fieldSize\r\n    this.queryBossDesignReportData.mofDivCode = self.curMofDivCode\r\n    if (Number(self.fiscalConfig.dataType) > 2) {\r\n      this.queryBossDesignReportData.queryConditions.whereSql = ' and datatype>2 '\r\n    }\r\n    this.queryBossDesignReportData.status = self.curStatusNum\r\n    this.queryBossDesignReportData.summaryType = self.param5.summaryType\r\n    // 设置区划\r\n    self.showLoading = true\r\n    self.handleHttpMethod(reportQueryApi.getSummaryTableData(self.queryBossDesignReportData)).then(data => {\r\n      if (data) {\r\n        try {\r\n          self.showLoading = false\r\n          self.pagerConfig.total = data.data.total\r\n          let dataResult = data.data.dataList\r\n          // if (dataResult && dataResult.length > 0 && dataResult[0].itemcode !== undefined) {\r\n          //   dataResult.sort((a, b) => a.itemcode.localeCompare(b.itemcode))\r\n          // }\r\n          // 分组\r\n          // this.groupList = this.groupBy(this.dataResult, function(item) {\r\n          //   return [item.eleType]\r\n          // })\r\n          let resDat = dataResult.filter(item => { return item !== null })\r\n          self.tableData = resDat\r\n        } catch (err) {\r\n          console.log(err)\r\n          self.tableData = []\r\n        }\r\n      } else {\r\n        self.tableData = []\r\n      }\r\n    })\r\n  },\r\n  groupBy: function(array, f) {\r\n    let groups = {}\r\n    array.forEach(function(o) {\r\n      let group = JSON.stringify(f(o))\r\n      groups[group] = groups[group] || []\r\n      groups[group].push(o)\r\n    })\r\n    return Object.keys(groups).map(function(group) {\r\n      return groups[group]\r\n    })\r\n  },\r\n  doEextract() {\r\n    let params = {}\r\n    let self = this\r\n    if (self.curreportguid === '') {\r\n      self.$message.warning('请选择报表!')\r\n      return\r\n    }\r\n    self.showLoading = true\r\n    params.reportguid = self.curreportguid\r\n    let queryConditions = {}\r\n    queryConditions.agencyguid = ''\r\n    params.queryConditions = queryConditions\r\n    params.pageSize = self.queryBossDesignReportData.pageSize\r\n    params.currentPage = self.queryBossDesignReportData.currentPage\r\n    self.handleHttpMethod(reportQueryApi.queryBossDesignReportData(params)).then(data => {\r\n      if (data) {\r\n        try {\r\n          self.showLoading = false\r\n          self.pagerConfig.total = data.data.total\r\n          let dataResult = data.data.dataList\r\n          if (dataResult && dataResult.length > 0 && dataResult[0].itemcode !== undefined) {\r\n            dataResult.sort((a, b) => a.itemcode.localeCompare(b.itemcode))\r\n          }\r\n          let resDat = dataResult.filter(item => { return item !== null })\r\n          self.tableData = resDat\r\n        } catch (err) {\r\n          console.log(err)\r\n          self.tableData = []\r\n        }\r\n      } else {\r\n        self.tableData = []\r\n      }\r\n    })\r\n  },\r\n  doCommit(type) {\r\n    let self = this\r\n    if (self.curreportguid === '') {\r\n      self.$message.warning('请选择报表!')\r\n      return\r\n    }\r\n    let params = {}\r\n    params.reportId = self.curreportguid\r\n    params.reportCode = self.curreportcode\r\n    params.fieldSize = self.fieldSize\r\n    params.type = type\r\n    if (type === 1) {\r\n      params.tableData = self.$refs.bsTableRef.tableDataIn\r\n      if (!params.tableData || params.tableData.length < 1) {\r\n        self.$message.warning('报表数据为空，不可保存!')\r\n        return\r\n      }\r\n    }\r\n    self.handleHttpMethod(reportQueryApi.doSave(params)).then(data => {\r\n      self.showLoading = false\r\n      if (data.code === '100000') {\r\n        self.$message.success((type === 1 ? '保存' : '提交') + '成功!')\r\n        self.cancelEdit()\r\n      } else {\r\n        if (data.message) {\r\n          self.$message.error((type === 1 ? '保存' : '提交') + '失败!' + data.message)\r\n        } else {\r\n          self.$message.error((type === 1 ? '保存' : '提交') + '失败!' + data.msg)\r\n        }\r\n      }\r\n    })\r\n  },\r\n  doAudit(type) {\r\n    let self = this\r\n    if (self.curreportguid === '') {\r\n      self.$message.warning('请选择报表!')\r\n      return\r\n    }\r\n\r\n    let params = {}\r\n    let checks = []\r\n    checks.push(self.userInfo.province)\r\n    params.mofDivCodes = checks\r\n    params.actionType = type\r\n    params.reportId = self.curreportguid\r\n    // if (type === 1) {\r\n    //   params.tableData = self.$refs.bsTableRef.tableDataIn\r\n    //   if (!params.tableData || params.tableData.length < 1) {\r\n    //     self.$message.warning('报表数据为空，不可保存!')\r\n    //     return\r\n    //   }\r\n    // }\r\n    self.handleHttpMethod(reportQueryApi.doAudit(params)).then(data => {\r\n      self.showLoading = false\r\n      if (data.code === '100000') {\r\n        self.$message.success('操作成功!')\r\n        self.cancelEdit()\r\n      } else {\r\n        if (data.message) {\r\n          self.$message.error('操作失败!' + data.message)\r\n        } else {\r\n          self.$message.error('操作失败!' + data.msg)\r\n        }\r\n      }\r\n    })\r\n    self.clickTab({ id: self.reportTableClickNode.id, label: self.reportTableClickNode.name }, true)\r\n  },\r\n  doSummary() {\r\n    let self = this\r\n    if (self.curreportguid === '') {\r\n      self.$message.warning('请选择报表!')\r\n      return\r\n    }\r\n    self.editStatus = true\r\n    self.isSum = true\r\n    this.$refs.bsTabPanel.rButtons = [\r\n      {\r\n        code: 'summary-save',\r\n        label: '保存',\r\n        status: 'primary'\r\n      }]\r\n    // 暂时注释掉 用于演示\r\n    self.showLoading = true\r\n    // self.handleHttpMethod(reportQueryApi.summaryData(self.curreportguid, self.fieldSize, self.param5.summaryType)).then(data => {\r\n    self.showLoading = false\r\n    //   if (data.code === '100000') {\r\n    //     let dataResult = data.data\r\n    //     if (dataResult && dataResult.length > 0 && dataResult[0].itemcode !== undefined) {\r\n    //       dataResult.sort((a, b) => a.itemcode.localeCompare(b.itemcode))\r\n    //     }\r\n    //     self.tableData = dataResult\r\n    //     self.refreshTable2Edit(true)\r\n    //   } else {\r\n    //     self.tableData = []\r\n    //     if (data.message) {\r\n    //       self.$message.error('汇总失败!' + data.message)\r\n    //     } else {\r\n    //       self.$message.error('汇总失败!' + data.msg)\r\n    //     }\r\n    //   }\r\n    // })\r\n  },\r\n  refreshTable2Edit(flag) {\r\n    let self = this\r\n    this.handleHttpMethod(reportQueryApi.queryBossFiscalTableConfig(self.curreportguid)).then(res => {\r\n      if (res) {\r\n        self.tableColumnsConfig = self.getNewDataColumns(res.data.columns, flag)\r\n        self.fieldSize = self.tableColumnsConfig.length\r\n      }\r\n    })\r\n  },\r\n  summmarySave() {\r\n    let self = this\r\n    let params = {}\r\n    params.reportId = self.curreportguid\r\n    params.reportCode = self.curreportcode\r\n    params.fieldSize = self.fieldSize\r\n    params.tableData = self.$refs.bsTableRef.tableDataIn\r\n    params.summaryType = self.param5.summaryType\r\n    if (!params.tableData || params.tableData.length < 1) {\r\n      self.$message.warning('报表数据为空，不可保存!')\r\n      return\r\n    }\r\n    if (self.isSum) {\r\n      let msg = '汇总保存后会覆盖您历史已编辑的汇总数据，你确定这样操作么?'\r\n      this.$XModal.confirm(msg).then(type => {\r\n        if (type === 'confirm') {\r\n          let loading = this.$loading({\r\n            lock: true,\r\n            text: '正在删除中...请您稍候',\r\n            spinner: 'el-icon-loading',\r\n            background: 'rgba(0, 0, 0, 0.7)'\r\n          })\r\n          self.handleHttpMethod(reportQueryApi.doSummmarySave(params)).then(data => {\r\n            if (data.code === '100000') {\r\n              loading.close()\r\n              self.$message.success('保存成功!')\r\n              self.summaryCancelEdit()\r\n            } else {\r\n              if (data.message) {\r\n                self.$message.error('保存失败!' + data.message)\r\n              } else {\r\n                self.$message.error('保存失败!' + data.msg)\r\n              }\r\n              loading.close()\r\n            }\r\n          })\r\n        }\r\n      })\r\n    } else {\r\n      self.showLoading = true\r\n      self.handleHttpMethod(reportQueryApi.doSummmarySave(params)).then(data => {\r\n        if (data.code === '100000') {\r\n          self.showLoading = false\r\n          self.$message.success('保存成功!')\r\n          self.summaryCancelEdit()\r\n        } else {\r\n          if (data.message) {\r\n            self.$message.error('保存失败!' + data.message)\r\n          } else {\r\n            self.$message.error('保存失败!' + data.msg)\r\n          }\r\n          self.showLoading = false\r\n        }\r\n      })\r\n    }\r\n  },\r\n  toEditSummary() {\r\n    let self = this\r\n    if (self.curreportguid === '') {\r\n      self.$message.warning('请选择报表!')\r\n      return\r\n    }\r\n    self.editStatus = true\r\n    self.isSum = false\r\n    this.$refs.bsTabPanel.rButtons = [\r\n      {\r\n        code: 'summary-save',\r\n        label: '保存',\r\n        status: 'primary'\r\n      }]\r\n    self.clickTab({ id: self.reportTableClickNode.id, label: self.reportTableClickNode.name }, true)\r\n  },\r\n  doCurrentLevelCommit() {\r\n    let self = this\r\n    self.handleHttpMethod(reportQueryApi.currentLevelCommit({ menuGuid: this.$store.state.curNavModule.guid, menuName: this.$store.state.curNavModule.name, reportId: self.curreportguid })).then(data => {\r\n      self.showLoading = false\r\n      if (data.code === '100000') {\r\n        self.$message.success('提交成功!')\r\n      } else {\r\n        if (data.message) {\r\n          self.$message.error('提交失败!' + data.message)\r\n        } else {\r\n          self.$message.error('提交失败!' + data.msg)\r\n        }\r\n      }\r\n    })\r\n    self.clickTab({ id: self.reportTableClickNode.id, label: self.reportTableClickNode.name }, true)\r\n  },\r\n  doBack() {\r\n    let self = this\r\n    self.handleHttpMethod(reportQueryApi.currentLevelBack(this.curStatusNum)).then(data => {\r\n      self.showLoading = false\r\n      if (data.code === '100000') {\r\n        self.$message.success('撤销成功!')\r\n      } else {\r\n        if (data.message) {\r\n          self.$message.error('撤销失败!' + data.message)\r\n        } else {\r\n          self.$message.error('撤销失败!' + data.msg)\r\n        }\r\n      }\r\n    })\r\n  },\r\n  doExport() {\r\n    this.$refs.bsTableRef.triggerExportOption({ fileName: this.curTable.name })\r\n  }\r\n}\r\n\r\n/**\r\n * 校验方法（表单、表格）\r\n */\r\nconst validateMethods = {\r\n  validateTableData() {\r\n    return this.$refs.bsTableRef.validate()\r\n  }\r\n}\r\n\r\nconst utilMethods = {\r\n  isBlank(value) {\r\n    return (value === undefined || value === null || value === '')\r\n  },\r\n  handleHttpMethod(promise, needLoading = false, message) {\r\n    let loading = {\r\n      close: () => { }\r\n    }\r\n    if (needLoading) {\r\n      loading = this.$loading({\r\n        lock: true,\r\n        text: message || '正在请求中',\r\n        spinner: 'el-icon-loading',\r\n        background: 'rgba(0, 0, 0, 0.7)'\r\n      })\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n      promise.then(res => {\r\n        if (res) {\r\n          resolve(res)\r\n          // if (res.code === '100000') {\r\n          //   resolve(res.data)\r\n          // } else {\r\n          //   console.log(res.errorInfor)\r\n          //   if (res.code === 0) {\r\n          //     this.$XModal.message({ status: 'error', message: res.errorInfor.response.data.msg })\r\n          //   } else if (res.msg) {\r\n          //     this.$XModal.message({ status: 'error', message: `错误：[${res.code}-${res.msg}]` })\r\n          //   } else {\r\n          //     this.$XModal.message({ status: 'error', message: '未知错误' })\r\n          //   }\r\n          // }\r\n        } else {\r\n          this.$XModal.message({ status: 'error', message: '服务错误，请查看日志' })\r\n          console.log(res)\r\n        }\r\n        loading.close()\r\n        resolve(false)\r\n      }).catch(err => {\r\n        loading.close()\r\n        this.$XModal.message({ status: 'error', message: '网络连接失败，或前端逻辑错误。请查看日志' })\r\n        console.log(err)\r\n        resolve(false)\r\n      })\r\n    })\r\n  }\r\n}\r\n\r\n// 导出\r\nconst getExportDialog = {\r\n  govExport() {\r\n    this.$BsFcUtil.govBudgetExport({\r\n      exportConfig: {\r\n        hasMofDiv: this.queryBossDesignReportData.summaryFlag,\r\n        reportFilteSql: 'and (code like \\'999%\\')',\r\n        exportUrl: 'bisGovbudget/govFiscal/govSummary/summary/export',\r\n        isSummary: this.queryBossDesignReportData.summaryFlag,\r\n        down2zip: true\r\n      },\r\n      // 导出确认\r\n      exportSure(config) {\r\n        console.log(config)\r\n      },\r\n      cancel() {\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport const myMethods = {\r\n  ...initMethods,\r\n  ...interfaceMethods,\r\n  ...dataMethods,\r\n  ...validateMethods,\r\n  ...utilMethods,\r\n  ...getExportDialog\r\n}\r\n"],"mappings":"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"}]}