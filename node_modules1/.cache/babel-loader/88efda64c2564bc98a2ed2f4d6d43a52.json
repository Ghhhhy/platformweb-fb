{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\MointoringMatters\\threePublicExpensesTableEntry\\hooks\\useTable.js","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\MointoringMatters\\threePublicExpensesTableEntry\\hooks\\useTable.js","mtime":1694505522386},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\babel.config.js","mtime":1694505520209},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVmLCB1bnJlZiB9IGZyb20gJ0B2dWUvY29tcG9zaXRpb24tYXBpJzsKaW1wb3J0IHsgc3VtLCBmaWx0ZXJUcmVlLCB0b1RyZWVBcnJheSB9IGZyb20gJ3hlLXV0aWxzJzsKaW1wb3J0IHsgZ2VuZXJhdGVFZGl0b3JSdWxlcyB9IGZyb20gJy4uL3V0aWxzJzsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlVGFibGUoY3VycmVudENvbHVtbnMpIHsKICAvLyDnvJbovpHphY3nva4KICB2YXIgZWRpdENvbmZpZyA9IHJlZih7CiAgICB0cmlnZ2VyOiAnY2xpY2snLAogICAgZW5hYmxlZDogdHJ1ZSwKICAgIG1vZGU6ICdyb3cnLAogICAgc2hvd0ljb246IHRydWUsCiAgICBzaG93QXN0ZXJpc2s6IHRydWUsCiAgICBhY3RpdmVNZXRob2Q6IGZ1bmN0aW9uIGFjdGl2ZU1ldGhvZCgpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSk7CgogIC8qKg0KICAgKiDliqjmgIHorr7nva7ooajmoLzmmK/lkKbog73lpJ/nvJbovpENCiAgICogQHBhcmFtIGlzRWRpdG9yDQogICAqLwogIGZ1bmN0aW9uIHNldFRhYmxlRWRpdG9yU3RhdGUoKSB7CiAgICB2YXIgaXNFZGl0b3IgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRydWU7CiAgICBlZGl0Q29uZmlnLnZhbHVlLmFjdGl2ZU1ldGhvZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGlzRWRpdG9yOwogICAgfTsKICAgIGVkaXRDb25maWcudmFsdWUuc2hvd0ljb24gPSBpc0VkaXRvcjsKICAgIGVkaXRDb25maWcudmFsdWUuc2hvd0FzdGVyaXNrID0gaXNFZGl0b3I7CiAgfQoKICAvLyDmoKHpqozphY3nva7pobkKICB2YXIgdmFsaWRDb25maWcgPSByZWYoewogICAgYXV0b1BvczogdHJ1ZSwKICAgIHNob3dNZXNzYWdlOiB0cnVlCiAgfSk7CgogIC8vIOe8lui+keagoemqjOinhOWImQogIHZhciBlZGl0UnVsZXMgPSByZWYoZ2VuZXJhdGVFZGl0b3JSdWxlcyh1bnJlZihjdXJyZW50Q29sdW1ucykpKTsKCiAgLy8g6KGo5bC+5ZCI6K6h6KGMCiAgZnVuY3Rpb24gZm9vdGVyTWV0aG9kKF9yZWYpIHsKICAgIHZhciBjb2x1bW5zID0gX3JlZi5jb2x1bW5zLAogICAgICBkYXRhID0gX3JlZi5kYXRhOwogICAgcmV0dXJuIFtjb2x1bW5zID09PSBudWxsIHx8IGNvbHVtbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbHVtbnMubWFwKGZ1bmN0aW9uIChjb2x1bW4sIGNvbHVtbkluZGV4KSB7CiAgICAgIHZhciBfdG9UcmVlQXJyYXk7CiAgICAgIGlmIChjb2x1bW5JbmRleCA9PT0gMCkgewogICAgICAgIHJldHVybiAn5ZCI6K6hJzsKICAgICAgfQogICAgICB2YXIgdHJlZSA9IGZpbHRlclRyZWUoY29sdW1ucywgZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgX2l0ZW0kZWRpdFJlbmRlciwgX2l0ZW0kZWRpdFJlbmRlcjIsIF9pdGVtJGVkaXRSZW5kZXIyJHBybzsKICAgICAgICB2YXIgdHlwZXMgPSBbJ2Zsb2F0JywgJ2ludGVnZXInLCAnbnVtYmVyJ107CiAgICAgICAgcmV0dXJuICgoX2l0ZW0kZWRpdFJlbmRlciA9IGl0ZW0uZWRpdFJlbmRlcikgPT09IG51bGwgfHwgX2l0ZW0kZWRpdFJlbmRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2l0ZW0kZWRpdFJlbmRlci5uYW1lKSA9PT0gJyRpbnB1dCcgJiYgdHlwZXMuaW5jbHVkZXMoKF9pdGVtJGVkaXRSZW5kZXIyID0gaXRlbS5lZGl0UmVuZGVyKSA9PT0gbnVsbCB8fCBfaXRlbSRlZGl0UmVuZGVyMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9pdGVtJGVkaXRSZW5kZXIyJHBybyA9IF9pdGVtJGVkaXRSZW5kZXIyLnByb3BzKSA9PT0gbnVsbCB8fCBfaXRlbSRlZGl0UmVuZGVyMiRwcm8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJGVkaXRSZW5kZXIyJHByby50eXBlKTsKICAgICAgfSk7CiAgICAgIHZhciBhcnIgPSAoX3RvVHJlZUFycmF5ID0gdG9UcmVlQXJyYXkodHJlZSkpID09PSBudWxsIHx8IF90b1RyZWVBcnJheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RvVHJlZUFycmF5Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtLnByb3BlcnR5OwogICAgICB9KTsKICAgICAgaWYgKGFyci5pbmNsdWRlcyhjb2x1bW4ucHJvcGVydHkpKSB7CiAgICAgICAgcmV0dXJuIHN1bShkYXRhLCBjb2x1bW4ucHJvcGVydHkpOwogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfSldOwogIH0KICByZXR1cm4gewogICAgZWRpdENvbmZpZzogZWRpdENvbmZpZywKICAgIHZhbGlkQ29uZmlnOiB2YWxpZENvbmZpZywKICAgIGVkaXRSdWxlczogZWRpdFJ1bGVzLAogICAgc2V0VGFibGVFZGl0b3JTdGF0ZTogc2V0VGFibGVFZGl0b3JTdGF0ZSwKICAgIGZvb3Rlck1ldGhvZDogZm9vdGVyTWV0aG9kCiAgfTsKfQ=="},{"version":3,"names":["ref","unref","sum","filterTree","toTreeArray","generateEditorRules","useTable","currentColumns","editConfig","trigger","enabled","mode","showIcon","showAsterisk","activeMethod","setTableEditorState","isEditor","arguments","length","undefined","value","validConfig","autoPos","showMessage","editRules","footerMethod","_ref","columns","data","map","column","columnIndex","_toTreeArray","tree","item","_item$editRender","_item$editRender2","_item$editRender2$pro","types","editRender","name","includes","props","type","arr","property"],"sources":["C:/Users/何小龙/Desktop/platformweb-fb/src/views/main/MointoringMatters/threePublicExpensesTableEntry/hooks/useTable.js"],"sourcesContent":["import { ref, unref } from '@vue/composition-api'\r\nimport { sum, filterTree, toTreeArray } from 'xe-utils'\r\nimport { generateEditorRules } from '../utils'\r\n\r\nexport default function useTable(currentColumns) {\r\n  // 编辑配置\r\n  const editConfig = ref({\r\n    trigger: 'click',\r\n    enabled: true,\r\n    mode: 'row',\r\n    showIcon: true,\r\n    showAsterisk: true,\r\n    activeMethod: () => true\r\n  })\r\n\r\n  /**\r\n   * 动态设置表格是否能够编辑\r\n   * @param isEditor\r\n   */\r\n  function setTableEditorState(isEditor = true) {\r\n    editConfig.value.activeMethod = () => isEditor\r\n    editConfig.value.showIcon = isEditor\r\n    editConfig.value.showAsterisk = isEditor\r\n  }\r\n\r\n  // 校验配置项\r\n  const validConfig = ref({\r\n    autoPos: true,\r\n    showMessage: true\r\n  })\r\n\r\n  // 编辑校验规则\r\n  const editRules = ref(\r\n    generateEditorRules(unref(currentColumns))\r\n  )\r\n\r\n  // 表尾合计行\r\n  function footerMethod({ columns, data }) {\r\n    return [\r\n      columns?.map((column, columnIndex) => {\r\n        if (columnIndex === 0) {\r\n          return '合计'\r\n        }\r\n        const tree = filterTree(columns, item => {\r\n          const types = ['float', 'integer', 'number']\r\n          return item.editRender?.name === '$input' && types.includes(item.editRender?.props?.type)\r\n        })\r\n        const arr = toTreeArray(tree)?.map(item => item.property)\r\n        if (arr.includes(column.property)) {\r\n          return sum(data, column.property)\r\n        }\r\n        return null\r\n      })\r\n    ]\r\n  }\r\n\r\n  return {\r\n    editConfig,\r\n    validConfig,\r\n    editRules,\r\n    setTableEditorState,\r\n    footerMethod\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAASA,GAAG,EAAEC,KAAK,QAAQ,sBAAsB;AACjD,SAASC,GAAG,EAAEC,UAAU,EAAEC,WAAW,QAAQ,UAAU;AACvD,SAASC,mBAAmB,QAAQ,UAAU;AAE9C,eAAe,SAASC,QAAQA,CAACC,cAAc,EAAE;EAC/C;EACA,IAAMC,UAAU,GAAGR,GAAG,CAAC;IACrBS,OAAO,EAAE,OAAO;IAChBC,OAAO,EAAE,IAAI;IACbC,IAAI,EAAE,KAAK;IACXC,QAAQ,EAAE,IAAI;IACdC,YAAY,EAAE,IAAI;IAClBC,YAAY,EAAE,SAAAA,aAAA;MAAA,OAAM,IAAI;IAAA;EAC1B,CAAC,CAAC;;EAEF;AACF;AACA;AACA;EACE,SAASC,mBAAmBA,CAAA,EAAkB;IAAA,IAAjBC,QAAQ,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;IAC1CT,UAAU,CAACY,KAAK,CAACN,YAAY,GAAG;MAAA,OAAME,QAAQ;IAAA;IAC9CR,UAAU,CAACY,KAAK,CAACR,QAAQ,GAAGI,QAAQ;IACpCR,UAAU,CAACY,KAAK,CAACP,YAAY,GAAGG,QAAQ;EAC1C;;EAEA;EACA,IAAMK,WAAW,GAAGrB,GAAG,CAAC;IACtBsB,OAAO,EAAE,IAAI;IACbC,WAAW,EAAE;EACf,CAAC,CAAC;;EAEF;EACA,IAAMC,SAAS,GAAGxB,GAAG,CACnBK,mBAAmB,CAACJ,KAAK,CAACM,cAAc,CAAC,CAC3C,CAAC;;EAED;EACA,SAASkB,YAAYA,CAAAC,IAAA,EAAoB;IAAA,IAAjBC,OAAO,GAAAD,IAAA,CAAPC,OAAO;MAAEC,IAAI,GAAAF,IAAA,CAAJE,IAAI;IACnC,OAAO,CACLD,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEE,GAAG,CAAC,UAACC,MAAM,EAAEC,WAAW,EAAK;MAAA,IAAAC,YAAA;MACpC,IAAID,WAAW,KAAK,CAAC,EAAE;QACrB,OAAO,IAAI;MACb;MACA,IAAME,IAAI,GAAG9B,UAAU,CAACwB,OAAO,EAAE,UAAAO,IAAI,EAAI;QAAA,IAAAC,gBAAA,EAAAC,iBAAA,EAAAC,qBAAA;QACvC,IAAMC,KAAK,GAAG,CAAC,OAAO,EAAE,SAAS,EAAE,QAAQ,CAAC;QAC5C,OAAO,EAAAH,gBAAA,GAAAD,IAAI,CAACK,UAAU,cAAAJ,gBAAA,uBAAfA,gBAAA,CAAiBK,IAAI,MAAK,QAAQ,IAAIF,KAAK,CAACG,QAAQ,EAAAL,iBAAA,GAACF,IAAI,CAACK,UAAU,cAAAH,iBAAA,wBAAAC,qBAAA,GAAfD,iBAAA,CAAiBM,KAAK,cAAAL,qBAAA,uBAAtBA,qBAAA,CAAwBM,IAAI,CAAC;MAC3F,CAAC,CAAC;MACF,IAAMC,GAAG,IAAAZ,YAAA,GAAG5B,WAAW,CAAC6B,IAAI,CAAC,cAAAD,YAAA,uBAAjBA,YAAA,CAAmBH,GAAG,CAAC,UAAAK,IAAI;QAAA,OAAIA,IAAI,CAACW,QAAQ;MAAA,EAAC;MACzD,IAAID,GAAG,CAACH,QAAQ,CAACX,MAAM,CAACe,QAAQ,CAAC,EAAE;QACjC,OAAO3C,GAAG,CAAC0B,IAAI,EAAEE,MAAM,CAACe,QAAQ,CAAC;MACnC;MACA,OAAO,IAAI;IACb,CAAC,CAAC,CACH;EACH;EAEA,OAAO;IACLrC,UAAU,EAAVA,UAAU;IACVa,WAAW,EAAXA,WAAW;IACXG,SAAS,EAATA,SAAS;IACTT,mBAAmB,EAAnBA,mBAAmB;IACnBU,YAAY,EAAZA;EACF,CAAC;AACH"}]}