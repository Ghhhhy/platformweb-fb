{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\CardMenu\\cardMenu.vue?vue&type=style&index=0&id=5247828f&scoped=true&lang=scss&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\CardMenu\\cardMenu.vue","mtime":1694505521316},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5tYXNrYm94ew0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICBkaXNwbGF5OiBmbGV4Ow0KICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQouY29udGV4dENsYXNzew0KICB3aWR0aDogMTAwJTsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB0b3A6IDkwcHg7DQogIGJvdHRvbTogMDsNCn0NCiAgLmNhcmQtbWVudV9fY29udGVudHsNCiAgICAvLyB0ZXh0LWFsaWduOiBsZWZ0Ow0KICAgIC5jYXJkLW1lbnVfX2NhcmR7DQogICAgICBkaXNwbGF5OiBncmlkOw0KICAgICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQodmFyKC0tdG9wLWl0ZW0tbnVtcyksIDFmcik7DQogICAgICBncmlkLWNvbHVtbi1nYXA6IDI0cHg7DQogICAgICAucm93LWxhc3QtY2FyZHsNCiAgICAgICAgbWFyZ2luLXJpZ2h0OiAwcHg7DQogICAgICB9DQogICAgfQ0KICAgIC5jYXJkLW1lbnVfX2V4dGVuZHsNCiAgICAgIC8vIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgIC8vIG1pbi1oZWlnaHQ6IDEzOXB4Ow0KICAgICAgbWF4LWhlaWdodDogNDAwcHg7DQogICAgICBtYXJnaW46IDE2cHggMTBweCAwIDEwcHg7DQogICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOw0KICAgICAgYm9yZGVyLXJhZGl1czogMnB4Ow0KICAgICAgZGlzcGxheTogZ3JpZDsNCiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyOw0KICAgICAgLmFycm93ew0KICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgIHdpZHRoOiAwcHg7DQogICAgICAgIGhlaWdodDogMHB4Ow0KICAgICAgICBib3JkZXI6IDEycHggc29saWQgdHJhbnNwYXJlbnQ7DQogICAgICAgIGJvcmRlci1ib3R0b20tY29sb3I6ICNmZmY7DQogICAgICAgIHRvcDogLTIzcHg7DQogICAgICAgIGxlZnQ6IDM2cHg7DQogICAgICB9DQogICAgICAuYXJyb3ctbWlkZGxlew0KICAgICAgICBsZWZ0OiA0OCU7DQogICAgICAgIHJpZ2h0OiB1bnNldDsNCiAgICAgIH0NCiAgICAgIC5hcnJvdy1sZWZ0ew0KICAgICAgICBsZWZ0OiAzNnB4Ow0KICAgICAgICByaWdodDogdW5zZXQ7DQogICAgICB9DQogICAgICAuYXJyb3ctcmlnaHR7DQogICAgICAgIHJpZ2h0OiAzNnB4Ow0KICAgICAgICBsZWZ0OiB1bnNldDsNCiAgICAgIH0NCiAgICAgIC5leHRlbmQtY2hpbGR7DQogICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAvLyBtaW4taGVpZ2h0OiAxMzlweDsNCiAgICAgICAgbWF4LWhlaWdodDogNDAwcHg7DQogICAgICAgIG92ZXJmbG93OiBhdXRvOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0K"},{"version":3,"sources":["cardMenu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cardMenu.vue","sourceRoot":"src/components/CardMenu","sourcesContent":["<!-- 卡片菜单 -->\r\n<template>\r\n  <div ref=\"cardContent\" class=\"card-menu__content\">\r\n    <div v-for=\"(item, index) in uiCardMenu\" :key=\"index\" class=\"menu-panel\">\r\n      <div ref=\"cardMenu\" class=\"card-menu__card\" :style=\"{ width: cardWidth, 'margin-left': marginWidth, 'margin-right': marginWidth, '--top-item-nums': allowNumIn }\">\r\n        <Card\r\n          v-for=\"(card, idx) in item.cardMenu\"\r\n          :key=\"idx\"\r\n          :card-global=\"cardGlobal\"\r\n          :card-menu=\"card\"\r\n          :row-no=\"item.rowNo\"\r\n          :active-btn=\"activeBtn\"\r\n          :seq=\"item.cardMenu.length === allowNumIn ? (idx === 0 ? 'first' : ((idx + 1) === item.cardMenu.length ? 'end' : 'middle')) : 'first'\"\r\n          :class=\"(idx === item.cardMenu.length - 1 ) ? 'row-last-card' : ''\"\r\n          @generateCardBtns=\"preGenerateCardBtns\"\r\n        />\r\n      </div>\r\n      <div v-show=\"curExtend === item.rowNo\" ref=\"cardExtend\" class=\"card-menu__extend\" :style=\"{ width: extendWidth, 'margin-left': marginWidth, 'margin-right': marginWidth }\">\r\n        <div class=\"arrow\" :class=\"arrowDirectClass\"></div>\r\n        <div class=\"extend-child\">\r\n          <!--自定义待办-->\r\n          <MenuTodo v-if=\"currentBtn === 'agentItem'\" :card=\"cur\" />\r\n          <PoperExtend v-if=\"currentBtn === 'doneItem'\" v-loading=\"adLoading\" :card-btns=\"cardBtns\" :cur=\"cur\" :allow-num=\"allowNumIn\" />\r\n          <CardMenuTree v-if=\"currentBtn === 'funMenu'\" :data=\"menuTree\" />\r\n          <CardVideo v-if=\"currentBtn === 'oprateGuide'\" :card-btns=\"cardBtns\" :cur=\"cur\" :allow-num=\"allowNumIn\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Card from './card/card'\r\nimport CardMenuTree from './other/menuTree/index.vue'\r\nimport CardVideo from './other/video'\r\nimport PoperExtend from './poper/poper'\r\nimport MenuTodo from './other/menuTodo'\r\nimport data from './config/data'\r\nimport MenuModule from '@/api/frame/common/menu.js'\r\n\r\n// import databf from './config/databf'\r\n\r\nimport { extend } from './utils'\r\n// const CARDWIDTH = 476\r\n\r\nexport default {\r\n  name: 'CardMenu',\r\n  // mixins: [databf],\r\n  mixins: [data],\r\n  components: {\r\n    Card,\r\n    CardMenuTree,\r\n    CardVideo,\r\n    MenuTodo,\r\n    PoperExtend\r\n  },\r\n  props: {\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      adLoading: false,\r\n      uiCardMenu: {},\r\n      menuTree: {},\r\n      curExtend: false, // 当前展开的行\r\n      currentBtn: '', // 当前card上点击的按钮\r\n      currentCard: '', // 当前card模块\r\n      activeBtn: '',\r\n      extendWidth: '0px',\r\n      cardWidth: '0px',\r\n      marginWidth: '50px',\r\n      allowNumIn: 0,\r\n      arrowDirectClass: 'arrow-left'\r\n    }\r\n  },\r\n  computed: {\r\n    cur() {\r\n      return {\r\n        currentBtn: this.currentBtn,\r\n        currentCard: this.currentCard,\r\n        allowNum: this.allowNumIn,\r\n        arrowDirectClass: this.arrowDirectClass\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 生存配置项\r\n    generateConfig() {\r\n      // 1. 动态生成配置数据\r\n      this.generateCardMenu()\r\n      // 待办已办\r\n      // this.generateCardBtns()\r\n      // 1. 加载本地图片\r\n      this.getImageUrl()\r\n      // 3. 自适应缩放\r\n      this.resize()\r\n    },\r\n    preGenerateCardBtns(status, menus) {\r\n      this.adLoading = true\r\n      this.generateCardBtns(status, menus).then(() => {\r\n        this.adLoading = false\r\n      })\r\n    },\r\n    // card上按钮，事件回调\r\n    bsCardClickEvent(obj, $this) {\r\n      this.menuTree = {}\r\n      // 同一行的，同一个模块，同一按钮点击如果已经展开，第二次点击则收\r\n      const sysMenu = this.$store.state.systemMenu || []\r\n      let self = this\r\n      sysMenu.forEach(item => {\r\n        if (obj.type === item.guid) {\r\n          self.menuTree = item\r\n        }\r\n      })\r\n      // this.cardBtns[obj.type].funMenu = sysMenu.menu\r\n      if (this.curExtend === obj.rowNo && this.currentCard === obj.type && this.currentBtn === obj.code && this.curExtend) {\r\n        this.curExtend = false\r\n        this.activeBtn = ''\r\n        return\r\n      }\r\n      switch (obj.seq) {\r\n        case 'first':\r\n          this.arrowDirectClass = 'arrow-left'\r\n          break\r\n        case 'middle':\r\n          this.arrowDirectClass = 'arrow-middle'\r\n          break\r\n        case 'end':\r\n          this.arrowDirectClass = 'arrow-right'\r\n          break\r\n        default:\r\n          this.arrowDirectClass = 'arrow-left'\r\n      }\r\n      this.activeBtn = `${obj.type}-${obj.code}` // 激活的按钮，全局只有一个\r\n      this.curExtend = obj.rowNo\r\n      this.currentBtn = obj.code\r\n      this.currentCard = obj.type\r\n    },\r\n\r\n    // 展开面板，按钮回调\r\n    bsCardPoperClickEvent(obj, $this) {\r\n      console.log(56, '回调方式444', obj, $this.$options)\r\n      this.getRouter(obj)\r\n    },\r\n\r\n    getRouter(value) {\r\n      let arr = []\r\n      arr.push(value)\r\n      let valueNum = arr.slice(0, arr.length + 1)\r\n      if (valueNum[0].name === valueNum[0].f_FullName) {\r\n        this.onMenuSelectChange(value)\r\n      }\r\n    },\r\n    onMenuSelectChange(obj) {\r\n      let self = this\r\n      if (obj.param5 && obj.param5.indexOf('needcheck=true') >= 0) { // 需要校验编报是否已关闭\r\n        let params = {\r\n          menuguid: obj.guid,\r\n          appguid: obj.appid,\r\n          appid: obj.appsysid,\r\n          specroleguid: '',\r\n          roleguid: obj.roleguid }\r\n        MenuModule.getFbPageConfig(params).then(res => {\r\n          Object.assign(obj, res)\r\n          if (res.data.isbudgetbegin === 0 && res.data.datatype !== 8) {\r\n            self.$message('预算编报已关闭')\r\n          } else {\r\n            this.$store.commit('setCurMenuObj', obj)\r\n          }\r\n        })\r\n      } else {\r\n        this.$store.commit('setCurMenuObj', obj)\r\n      }\r\n    },\r\n    // 缩放\r\n    resize() {\r\n      let allowNum = 0\r\n      if (this.$refs.cardContent.offsetWidth >= '1440') {\r\n        allowNum = 4\r\n      } else {\r\n        allowNum = 3\r\n      }\r\n      let rows = []\r\n      let menus = {}\r\n      if (allowNum > 0) {\r\n        // 将一个数组，按照几个元素一起分寸多个子数组\r\n        for (let i = 0, len = this.cardMenu.length; i < len; i += allowNum) {\r\n          rows.push(this.cardMenu.slice(i, i + allowNum))\r\n        }\r\n\r\n        this.extendWidth = (this.$refs.cardContent.offsetWidth - 100) + 'px'\r\n        this.cardWidth = (this.$refs.cardContent.offsetWidth - 100) + 'px'\r\n        this.allowNumIn = allowNum\r\n      }\r\n\r\n      rows.map((item, index) => {\r\n        menus[`row${index + 1}`] = {\r\n          rowNo: `row${index + 1}`,\r\n          cardMenu: item\r\n        }\r\n      })\r\n\r\n      this.uiCardMenu = extend(true, {}, menus)\r\n    }\r\n  },\r\n  created() {\r\n\r\n  },\r\n  mounted() {\r\n    window.addEventListener('resize', this.resize)\r\n    this.generateConfig()\r\n  },\r\n  beforeDestroy() {\r\n    window.removeEventListener('resize', this.resize)\r\n  },\r\n  watch: {\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.maskbox{\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n}\r\n.contextClass{\r\n  width: 100%;\r\n  position: absolute;\r\n  top: 90px;\r\n  bottom: 0;\r\n}\r\n  .card-menu__content{\r\n    // text-align: left;\r\n    .card-menu__card{\r\n      display: grid;\r\n      grid-template-columns: repeat(var(--top-item-nums), 1fr);\r\n      grid-column-gap: 24px;\r\n      .row-last-card{\r\n        margin-right: 0px;\r\n      }\r\n    }\r\n    .card-menu__extend{\r\n      // position: relative;\r\n      // min-height: 139px;\r\n      max-height: 400px;\r\n      margin: 16px 10px 0 10px;\r\n      background: #ffffff;\r\n      border-radius: 2px;\r\n      display: grid;\r\n      grid-template-columns: 1fr;\r\n      .arrow{\r\n        position: absolute;\r\n        width: 0px;\r\n        height: 0px;\r\n        border: 12px solid transparent;\r\n        border-bottom-color: #fff;\r\n        top: -23px;\r\n        left: 36px;\r\n      }\r\n      .arrow-middle{\r\n        left: 48%;\r\n        right: unset;\r\n      }\r\n      .arrow-left{\r\n        left: 36px;\r\n        right: unset;\r\n      }\r\n      .arrow-right{\r\n        right: 36px;\r\n        left: unset;\r\n      }\r\n      .extend-child{\r\n        width: 100%;\r\n        // min-height: 139px;\r\n        max-height: 400px;\r\n        overflow: auto;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]}]}