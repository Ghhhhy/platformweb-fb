{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\common\\MenuList\\BsAppHeader.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\common\\MenuList\\BsAppHeader.vue","mtime":1694505521710},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi8qLkJzQXBwSGVhZGVyeyovDQovKiAgcG9zaXRpb246IGZpeGVkOyovDQovKiAgdG9wOiAwOyovDQovKiAgbGVmdDogMDsqLw0KLyogIHJpZ2h0OiAwOyovDQovKiAgei1pbmRleDogOTk5OTk7Ki8NCi8qfSovDQouZWwtaWNvbi16b29tLWluIHsNCiAgY3Vyc29yOiBoYW5kOw0KfQ0KLmF1dG8gew0KICB3aWR0aDogMTAwcHg7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCi5oZWFkZXItbmFtZSB7DQogIGZvbnQtc2l6ZTogMTNweDsNCiAgaGVpZ2h0OiA1MHB4Ow0KICBsaW5lLWhlaWdodDogNTBweDsNCn0NCi5sYXlvdXQtdGFibGUgew0KICB3aWR0aDogMTAwJTsNCiAgcGFkZGluZzogMDsNCiAgbWFyZ2luOiAwOw0KfQ0KLmxheW91dC10YWJsZSB0ciB7DQogIGhlaWdodDogNDBweDsNCiAgd2lkdGg6IDEwMCU7DQp9DQoubGF5b3V0LXRhYmxlIC5sYWJlbCB7DQogIHdpZHRoOiAxMDBweDsNCiAgdGV4dC1hbGlnbjogcmlnaHQ7DQp9DQoubGF5b3V0LXRhYmxlIC52eGUtaW5wdXQgew0KICB3aWR0aDogMjIwcHg7DQp9DQouY2VudGVyIHsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0KLmRpdmlkZXIgew0KICBoZWlnaHQ6IDE2cHg7DQogIHdpZHRoOiAxcHg7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYigyNTUsIDI1NSwgMjU1KTsNCiAgbWFyZ2luLWJvdHRvbTogLTNweDsNCn0NCi5lbC1wb3BwZXJbeC1wbGFjZW1lbnRePSdib3R0b20nXSB7DQogIG1hcmdpbi10b3A6IDVweCAhaW1wb3J0YW50Ow0KfQ0KLnNoSGVhZGVyIHsNCiAgd2lkdGg6IDEwMDBweCAhaW1wb3J0YW50DQp9DQoueG1IZWFkZXIgew0KICB3aWR0aDogNTgwcHggIWltcG9ydGFudA0KfQ0KaS5pY29uczpiZWZvcmUgew0KICBjb250ZW50OiAnJzsNCiAgaGVpZ2h0OiAxNHB4ICFpbXBvcnRhbnQ7DQogIHdpZHRoOiAxNHB4ICFpbXBvcnRhbnQ7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jaw0KfQ0KaS5pc3N1ZTpiZWZvcmUgew0KICBiYWNrZ3JvdW5kOiB1cmwoLi9pbWcvaXNzdWUuc3ZnKTsNCiAgYmFja2dyb3VuZC1zaXplOiAxMDAlIDEwMCU7DQp9DQppLmJiczo6YmVmb3JlIHsNCiAgYmFja2dyb3VuZDogdXJsKC4vaW1nL2xpbmsuc3ZnKTsNCiAgYmFja2dyb3VuZC1zaXplOiAxMDAlIDEwMCU7DQp9DQouaXNzdWVUZXh0IHsNCiAgY29sb3I6ICM2ZmU3OGQ7DQogIGN1cnNvcjogcG9pbnRlcjsNCn0NCi5pc3N1ZVRleHQ6aG92ZXIgew0KICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCn0NCg=="},{"version":3,"sources":["BsAppHeader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAigBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BsAppHeader.vue","sourceRoot":"src/components/common/MenuList","sourcesContent":["<-- author czb 导航栏-->\r\n<template>\r\n  <div>\r\n    <div>\r\n      <div class=\"BsAppHeader\">\r\n        <div class=\"MenuList-header flex\">\r\n          <div class=\"MenuList-header header-left flex\">\r\n            <div class=\"header-left header-left-title flex\">\r\n              <img src=\"./img/logo-new.png\" alt=\"\">\r\n              <!-- <div class=\"header-img\"></div>\r\n            <div class=\"header-title\">预算管理</div> -->\r\n            </div>\r\n            <!-- <div class=\"header-left header-left-menu flex\">\r\n            <div class=\"header-left-menu-list flex pointer\">\r\n              <LevelMenu @onMenuSelectChange=\"onMenuSelectChange\" />\r\n            </div>\r\n            <div class=\"header-left-menu-list flex pointer\">\r\n              <i class=\"el-icon-star-off icon\"></i>\r\n              <MyFavorite @onMenuSelectChange=\"onMenuSelectChange\" />\r\n            </div>\r\n          </div> -->\r\n            <!-- <div class=\"header-left header-left-search flex\" style=\"display:none\">\r\n              <div v-if=\"show\" class=\"header-left-search search-select flex\">\r\n                <select class=\"search-select\">\r\n                  <option value=\"菜单\">菜单</option>\r\n                  <option value=\"全部\">全部</option>\r\n                  <option value=\"列表\">列表</option>\r\n                </select>\r\n                <el-select\r\n                  v-model=\"value\"\r\n                  filterable\r\n                  placeholder=\"请选择\"\r\n                  size=\"mini\"\r\n                  @change=\"getData\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"(item,v) in searchData\"\r\n                    :key=\"v\"\r\n                    :label=\"item.label\"\r\n                    :value=\"item.value\"\r\n                    :menu=\"item\"\r\n                  />\r\n                </el-select>\r\n              </div>\r\n              <i @click=\"OnShowSelectSearch\"><img src=\"~@/assets/img/basic/search.svg\"> </i>\r\n            </div> -->\r\n          </div>\r\n          <div v-for=\"(it,ids) in menuData\" :key=\"ids\" :class=\"[province.slice(0, 2) === '31' ? 'shHeader' : 'xmHeader', 'MenuList-header header-right flex']\">\r\n            <div class=\"header-right-title flex\">\r\n              <!-- <i class=\"el-icon-position\"></i> -->\r\n              <div v-if=\"it.unit && (it.unit.length + unit.length < 10)\" class=\"header-marquee\">{{ it.unit }}&nbsp;{{ unit }}</div>\r\n              <el-tooltip v-else class=\"item\" effect=\"dark\" :content=\"it.unit + ' ' + unit\" placement=\"top-start\">\r\n                <div class=\"header-marquee\">{{ it.unit }}&nbsp;{{ unit }}</div>\r\n              </el-tooltip>\r\n            </div>\r\n            <div class=\"divider\"></div>\r\n            <!-- <div class=\"header-right-message flex pointer\" @click=\"isvisible = true\">\r\n              <i class=\"el-icon-chat-square icon\"></i>\r\n              <div class=\"header-right-detail\">{{ it.message }}</div>\r\n              <Chat v-if=\"isvisible\" @onClose=\"isvisible = false\" />\r\n            </div> -->\r\n            <el-dropdown class=\"search-select\" trigger=\"click\">\r\n              <div class=\"header-right-year flex pointer\" style=\"height: 50px\">\r\n                <span class=\"header-right-year-desc\">{{ year }}年\r\n                  <i class=\"ri-arrow-drop-down-line icon\"></i>\r\n                </span>\r\n              </div>\r\n              <el-dropdown-menu slot=\"dropdown\" class=\"yearUl\">\r\n                <el-dropdown-item v-for=\"(item,ite) in yearList\" :key=\"ite\" @click.native=\"chooseYear(item)\" v-text=\"item\" />\r\n              </el-dropdown-menu>\r\n            </el-dropdown>\r\n            <div class=\"divider\"></div>\r\n            <!--\r\n            <div class=\"header-right-block-plan flex\">\r\n              <div class=\"block-plan flex pointer\">\r\n                <i class=\"el-icon-position icon\"></i>\r\n                <div class=\"block-plan-desc\">{{ plan }}</div>\r\n              </div>\r\n              <div class=\"block-exit flex pointer\">\r\n                <i class=\"el-icon-s-custom icon\"></i>\r\n                <div class=\"block-plan-supper-user\" @click=\"showPop\">{{ name }}</div>\r\n              </div>\r\n            </div>-->\r\n            <!-- 区划 -->\r\n            <div class=\"header-right-block-plan flex\">\r\n              <div class=\"block-plan flex\">\r\n                <!-- <i class=\"el-icon-position icon\"></i> -->\r\n                <div class=\"block-plan-desc\">{{ plan }}</div>\r\n              </div>\r\n              <!--\r\n              <div class=\"block-exit flex pointer\">\r\n                <i class=\"el-icon-s-custom icon\"></i>\r\n                <div class=\"block-plan-supper-user\" @click=\"showPop\">{{ name }}</div>\r\n              </div>\r\n              -->\r\n            </div>\r\n            <!-- 上海-我要提问 -->\r\n            <div v-if=\"province.slice(0, 2) === '31'\" class=\"divider\"></div>\r\n            <div v-if=\"province.slice(0, 2) === '31'\" class=\"header-right-block-plan flex\">\r\n              <div class=\"block-plan flex\">\r\n                <i class=\"issue icons\" style=\"width: 14px; height: 14px;margin-right: 8px\"></i>\r\n                <div class=\"block-plan-desc issueText\" @click=\"handleIssue\">我要提问</div>\r\n              </div>\r\n            </div>\r\n            <!-- 上海-BBS论坛 -->\r\n            <div v-if=\"province.slice(0, 2) === '31'\" class=\"divider\"></div>\r\n            <div v-if=\"province.slice(0, 2) === '31'\" class=\"header-right-block-plan flex\" @click=\"handleBbs\">\r\n              <div class=\"block-plan flex\">\r\n                <i class=\"bbs icons\" style=\"width: 14px; height: 14px;margin-right: 8px\"></i>\r\n                <div class=\"block-plan-desc\">BBS论坛</div>\r\n              </div>\r\n            </div>\r\n            <!--用户-->\r\n            <div class=\"divider\"></div>\r\n            <i class=\"ri-user-5-fill head_message\"></i>\r\n            <el-dropdown class=\"search-select pointer\" trigger=\"click\" @command=\"handleCommand\">\r\n              <div class=\"auto\">\r\n                <div class=\"header-name\">{{ name }}\r\n                  <i class=\"ri-arrow-drop-down-line head_message\"></i>\r\n                </div>\r\n              </div>\r\n              <el-dropdown-menu slot=\"dropdown\">\r\n                <!-- <el-dropdown-item @click.native=\"openPwdDialog\">\r\n                  <p class=\"showPopup-exit\"><i class=\"ri-key-fill icon\"></i> 修改密码</p>\r\n                  <p class=\"showPopup-exit\"><i class=\"ri-key-fill icon\"></i> 退出登录</p>\r\n                </el-dropdown-item>\r\n                -->\r\n                <el-dropdown-item command=\"a\">修改密码</el-dropdown-item>\r\n                <el-dropdown-item command=\"b\">退出登录</el-dropdown-item>\r\n              </el-dropdown-menu>\r\n            </el-dropdown>\r\n            <!--            <div v-if=\"supportChrome\" style=\"margin:15px\" @click=\"darkMode = !darkMode\">-->\r\n            <!--              <el-tooltip content=\"切换日间/夜间模式\">-->\r\n            <!--                <i style=\"font-size:16px;cursor:pointer\" :class=\"darkMode ? 'ri-moon-clear-fill' : 'ri-sun-fill'\"></i>-->\r\n            <!--              </el-tooltip>-->\r\n            <!--            </div>-->\r\n            <div style=\"margin:15px\" @click=\"toggleFullScreen(undefined)\">\r\n              <el-tooltip content=\"切换全屏模式\">\r\n                <i style=\"font-size:16px;cursor:pointer\" :class=\"fullScreen ? 'ri-fullscreen-exit-line' : 'ri-fullscreen-line'\"></i>\r\n              </el-tooltip>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- <div v-if=\"showOn\" class=\"showPopup\"> -->\r\n        <!-- <p class=\"showPopup-exit\" @click=\"exitUser\"><i class=\"el-icon-switch-button icon\"></i> 安全退出</p> -->\r\n        <!-- <p class=\"showPopup-exit\"><i class=\"el-icon-setting icon\"></i> 修改密码</p> -->\r\n        <!-- </div> -->\r\n      </div>\r\n      <!--<div style=\"height: 9.5vh;\"></div>-->\r\n    </div>\r\n    <div>\r\n      <vxe-modal\r\n        ref=\"template\"\r\n        v-model=\"pwdVisible\"\r\n        title=\"修改密码\"\r\n        width=\"420px\"\r\n        height=\"260px\"\r\n        transfer\r\n        @close=\"cancelDialog\"\r\n      >\r\n        <div>\r\n          <vxe-form>\r\n            <table class=\"layout-table\">\r\n              <tr>\r\n                <td class=\"label\"><label>旧密码：</label></td>\r\n                <td><vxe-input v-model=\"oldPwd\" type=\"password\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td class=\"label\"><label>新密码：</label></td>\r\n                <td><vxe-input v-model=\"newPwd\" type=\"password\" /></td>\r\n              </tr>\r\n              <tr>\r\n                <td class=\"label\"><label>确认密码：</label></td>\r\n                <td><vxe-input v-model=\"confirmPwd\" type=\"password\" /></td>\r\n              </tr>\r\n            </table>\r\n          </vxe-form>\r\n        </div>\r\n        <div class=\"option-line-group center\">\r\n          <div class=\"fn-inline option-line-group-btn\">\r\n            <vxe-button status=\"primary\" :loading=\"audLoading\" @click=\"updatePwd\">确 认</vxe-button>\r\n            <vxe-button code=\"reset\" @click=\"cancelDialog\">返 回</vxe-button>\r\n          </div>\r\n        </div>\r\n      </vxe-modal>\r\n    </div>\r\n    <BBS\r\n      v-if=\"addDialogVisible\"\r\n      ref=\"bbsDialog\"\r\n      :dialog-visible.sync=\"addDialogVisible\"\r\n      title=\"BBS论坛\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MenuModule from '../../../api/frame/common/menu.js'\r\nimport store from '@/store/index'\r\nimport BBS from './children/BBS.vue'\r\n// import {\r\n//   enable as enableDarkMode,\r\n//   disable as disableDarkMode\r\n// } from 'darkreader'\r\n// import LevelMenu from './children/LevelMenu'\r\n// import MyFavorite from './children/MyFavorite'\r\n// import Chat from './children/Chat'\r\nimport { mapMutations } from 'vuex'\r\nconst serverGatewayMap = window.gloableToolFn.serverGatewayMap\r\nexport default {\r\n  name: 'MenuList',\r\n  components: {\r\n    // LevelMenu\r\n    // MyFavorite\r\n    // Chat\r\n    BBS\r\n  },\r\n  data () {\r\n    return {\r\n      // 是否开启暗黑模式\r\n      darkMode: false,\r\n      // 是否进入全屏\r\n      fullScreen: false,\r\n      // chrome是否支持\r\n      supportChrome: false,\r\n      // 控制消息弹框显隐\r\n      isvisible: false,\r\n      // 未读消息数\r\n      unreadNum: 0,\r\n      province: '',\r\n      name: '',\r\n      year: '',\r\n      unit: '',\r\n      plan: '',\r\n      show: false,\r\n      showOn: false,\r\n      searchData: [\r\n        // {\r\n        //   value: '选项1',\r\n        //   label: '单位信息审核(预算处)',\r\n        //   name: 'UnitinFomainTainAdd'\r\n        // }, {\r\n        //   value: '选项2',\r\n        //   label: '人员信息查看',\r\n        //   name: ''\r\n        // }\r\n      ],\r\n      yearList: [],\r\n      value: '',\r\n      ShowLevelMenu: false,\r\n      gloableUrl: serverGatewayMap.gloableUrl,\r\n      menuData: [{\r\n        allMenu: '全部导航',\r\n        favorite: '我的收藏',\r\n        unit: '所属单位:',\r\n        message: '消息',\r\n        year: '年度',\r\n        plan: '区划',\r\n        supperUser: '预算超级用户'\r\n      }],\r\n      pwdVisible: false,\r\n      oldPwd: '',\r\n      newPwd: '',\r\n      confirmPwd: '',\r\n      audLoading: false,\r\n      addDialogVisible: false\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  mounted () {\r\n    this.darkMode = localStorage.getItem('__boss__darkmode__') === 'true' || false\r\n    this.supportChrome = this.getChomeVersion()\r\n    this.getFoundData()\r\n    const userList = this.$store.getters.getuserInfo\r\n    this.year = userList.year\r\n    this.unit = userList.orgname || ''\r\n    this.plan = userList.admdivname\r\n    this.name = userList.name\r\n    this.province = userList.province\r\n    console.log('userList.app.yearSelect', userList.app.yearSelect)\r\n    // this.yearList = userList.app.yearSelect\r\n    this.yearList = userList.app.yearSelect\r\n  },\r\n  watch: {\r\n    darkMode: {\r\n      handler (newval) {\r\n        if (this.supportChrome) {\r\n          localStorage.setItem('__boss__darkmode__', newval)\r\n          if (newval) {\r\n            // enableDarkMode({\r\n            //   brightness: 100,\r\n            //   contrast: 90,\r\n            //   sepia: 10\r\n            // })\r\n          } else {\r\n            // disableDarkMode()\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations('basicInfo', ['clearBossTree']),\r\n    handleCommand (obj) {\r\n      if (obj === 'a') {\r\n        this.pwdVisible = true\r\n      } else if (obj === 'b') {\r\n        this.exitUser()\r\n        this.$router.push({\r\n          name: 'Login'\r\n        })\r\n      }\r\n    },\r\n    getChomeVersion () {\r\n      let arr = navigator.userAgent.split(' ')\r\n      let chromeVersion = false\r\n      for (let i = 0; i < arr.length; i++) {\r\n        if (/chrome/i.test(arr[i])) {\r\n          chromeVersion = arr[i]\r\n        }\r\n      }\r\n      if (chromeVersion) {\r\n        console.log(`当前Chorme版本${Number(chromeVersion.split('/')[1].split('.')[0])}`)\r\n        return Number(chromeVersion.split('/')[1].split('.')[0]) >= 70\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n    OnShowSelectSearch (e) {\r\n      // 点击搜索图标显示选择框以及搜索输入框\r\n      this.show = !this.show\r\n    },\r\n    onMenuSelectChange (obj) {\r\n      this.$emit('onMenuSelectChange', obj)\r\n    },\r\n    // 展示退出弹出框\r\n    showPop () {\r\n      this.showOn = !this.showOn\r\n    },\r\n    // 展示退出弹出框\r\n    async chooseYear (year) {\r\n      const { tokenid, appguid } = this.$store.getters.getLoginAuthentication\r\n      if (!tokenid) {\r\n        this.$router.push({\r\n          name: 'Login'\r\n        })\r\n      } else {\r\n        await this.$http\r\n          .get('mp-b-user-service/v1/user/app/message', { appguid: appguid, year: year })\r\n          .then((res) => {\r\n            if (typeof res === 'string') {\r\n              res = JSON.parse(res)\r\n            }\r\n            if (res.rscode === '118000') {\r\n              this.$router.push({\r\n                name: 'Login'\r\n              })\r\n            } else {\r\n              this.$store.commit('setUserInfo', res.data)\r\n              this.$store.dispatch('asyncUserRoles')\r\n              location.reload()\r\n              // this.$router.push({\r\n              //   name: 'Main',\r\n              //   params: {\r\n              //     userInfo: res.data\r\n              //   }\r\n              // })\r\n            }\r\n          })\r\n          .catch((e) => {\r\n            console.log(e)\r\n            this.$router.push({\r\n              name: 'Login'\r\n            })\r\n          })\r\n      }\r\n    },\r\n    // 退出\r\n    exitUser () {\r\n      this.clearUserData()\r\n      if (this.gloableUrl.isLoginOutToPortal) {\r\n        window.location.href = this.gloableUrl.portalLoginUrl\r\n      } else {\r\n        window.location.href = +window.location.pathname\r\n      }\r\n      // window.location.reload()\r\n      // this.$router.push({\r\n      //   name: 'Login'\r\n      // })\r\n    },\r\n    // 清空用户缓存数据\r\n    clearUserData () {\r\n      // 清除localStorage数据\r\n      this.$store.commit('setLoginAuthentication', {})\r\n      // 清除store中数据\r\n      this.$store.commit('setCurNavModule', {})\r\n      this.clearBossTree()\r\n    },\r\n    // 菜单搜索\r\n    getNewDataColumns (dataColums) {\r\n      dataColums.map(item => {\r\n        // this.$delete(item, 'width')\r\n        if (item.children) {\r\n          this.getNewDataColumns(item.children)\r\n        } else {\r\n          let obj = {\r\n            value: '选项' + (this.searchData.length + 1),\r\n            label: item.f_FullName,\r\n            name: item.remark\r\n          }\r\n          Object.assign(item, obj)\r\n          this.searchData.push(item)\r\n          // console.log(this.searchData, 'searchData')\r\n        }\r\n        return item\r\n      })\r\n      return dataColums\r\n    },\r\n    getFoundData () {\r\n      // 递归调整数据结构\r\n      MenuModule.getMenuInfo().then(res => {\r\n        this.getNewDataColumns(res)\r\n      }).catch()\r\n    },\r\n    getData (value) {\r\n      const valueNum = value.slice(2, value.length + 1)\r\n      this.searchData[valueNum].name = this.searchData[valueNum].label\r\n      this.$emit('onMenuSelectChange', this.searchData[valueNum])\r\n      this.show = !this.show\r\n    },\r\n    openPwdDialog () {\r\n      this.pwdVisible = true\r\n    },\r\n    toggleFullScreen (isFullscreen) {\r\n      isFullscreen = isFullscreen === undefined ? !(document.fullScreen || document.mozFullScreen || document.webkitIsFullScreen) : isFullscreen\r\n      this.fullScreen = isFullscreen\r\n      let de = document.documentElement\r\n      if (isFullscreen) { // 进入全屏,多重短路表达式\r\n        if (de.requestFullscreen) {\r\n          de.requestFullscreen()\r\n        } else if (de.mozRequestFullScreen) {\r\n          de.mozRequestFullScreen()\r\n        } else if (de.webkitRequestFullScreen) {\r\n          de.webkitRequestFullScreen()\r\n        }\r\n      } else { // 退出全屏,三目运算符\r\n        de = document\r\n        if (de.exitFullscreen) {\r\n          de.exitFullscreen()\r\n        } else if (de.mozCancelFullScreen) {\r\n          de.mozCancelFullScreen()\r\n        } else if (de.webkitExitFullscreen) {\r\n          de.webkitExitFullscreen()\r\n        }\r\n      }\r\n    },\r\n    async updatePwd () {\r\n      /*\r\n      if (!(/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/ig.test(this.oldPwd))) {\r\n        this.$XModal.message({ status: 'error', message: '旧密码长度必须是8位，只能是数字加字母！' })\r\n        return\r\n      }\r\n      if (!(/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/ig.test(this.newPwd))) {\r\n        this.$XModal.message({ status: 'error', message: '新密码长度必须是8位，只能是数字加字母！' })\r\n        return\r\n      }\r\n      if (!(/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$/ig.test(this.confirmPwd))) {\r\n        this.$XModal.message({ status: 'error', message: '确认密码长度必须是8位，只能是数字加字母！' })\r\n        return\r\n      }\r\n      **/\r\n      if (this.oldPwd === this.newPwd) {\r\n        this.$XModal.message({ status: 'error', message: '旧密码与新密码一致，无需修改！' })\r\n        return\r\n      }\r\n      if (this.newPwd !== this.confirmPwd) {\r\n        this.$XModal.message({ status: 'error', message: '新密码与确认密码不一致，请重新输入！' })\r\n        return\r\n      }\r\n      let self = this\r\n      await this.$http\r\n        .post('mp-b-user-service/v1/users/action/modifypwd', { oldPassword: this.oldPwd, newPassword: this.newPwd })\r\n        .then((res) => {\r\n          if (typeof res === 'string') {\r\n            res = JSON.parse(res)\r\n          }\r\n          if (res.rscode === '100000') {\r\n            self.pwdVisible = false\r\n            this.$XModal.message({ status: 'success', message: res.result })\r\n            location.reload()\r\n          } else {\r\n            this.$XModal.message({ status: 'error', message: res.result })\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          console.log(e)\r\n        })\r\n    },\r\n    cancelDialog () {\r\n      this.pwdVisible = false\r\n    },\r\n    handleIssue() {\r\n      console.log(window.gloableToolFn, 'window.gloableToolFn.getIssueUrl()')\r\n      let url = window.gloableToolFn?.getIssueUrl || 'https://yth.czj.sh.cegn.cn/itsm/src/login/loginShczj.html'\r\n      window.open(`${url}?tokenid=${store.getters.getLoginAuthentication.tokenid}&appguid=${store.getters.getLoginAuthentication.appguid}`)\r\n    },\r\n    handleBbs() {\r\n      this.addDialogVisible = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n/*.BsAppHeader{*/\r\n/*  position: fixed;*/\r\n/*  top: 0;*/\r\n/*  left: 0;*/\r\n/*  right: 0;*/\r\n/*  z-index: 99999;*/\r\n/*}*/\r\n.el-icon-zoom-in {\r\n  cursor: hand;\r\n}\r\n.auto {\r\n  width: 100px;\r\n  text-align: center;\r\n}\r\n.header-name {\r\n  font-size: 13px;\r\n  height: 50px;\r\n  line-height: 50px;\r\n}\r\n.layout-table {\r\n  width: 100%;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n.layout-table tr {\r\n  height: 40px;\r\n  width: 100%;\r\n}\r\n.layout-table .label {\r\n  width: 100px;\r\n  text-align: right;\r\n}\r\n.layout-table .vxe-input {\r\n  width: 220px;\r\n}\r\n.center {\r\n  text-align: center;\r\n}\r\n.divider {\r\n  height: 16px;\r\n  width: 1px;\r\n  background-color: rgb(255, 255, 255);\r\n  margin-bottom: -3px;\r\n}\r\n.el-popper[x-placement^='bottom'] {\r\n  margin-top: 5px !important;\r\n}\r\n.shHeader {\r\n  width: 1000px !important\r\n}\r\n.xmHeader {\r\n  width: 580px !important\r\n}\r\ni.icons:before {\r\n  content: '';\r\n  height: 14px !important;\r\n  width: 14px !important;\r\n  display: inline-block\r\n}\r\ni.issue:before {\r\n  background: url(./img/issue.svg);\r\n  background-size: 100% 100%;\r\n}\r\ni.bbs::before {\r\n  background: url(./img/link.svg);\r\n  background-size: 100% 100%;\r\n}\r\n.issueText {\r\n  color: #6fe78d;\r\n  cursor: pointer;\r\n}\r\n.issueText:hover {\r\n  text-decoration: underline;\r\n}\r\n</style>\r\n"]}]}