{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\directFund\\report\\ReportPreviewDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\directFund\\report\\ReportPreviewDialog.vue","mtime":1694505522417},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgcmVzb2x2ZVJlc3VsdCBmcm9tICdAL3V0aWxzL3Jlc3VsdC5qcycNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnUmVwb3J0UHJldmlld0RpYWxvZycsDQogIHByb3BzOiB7DQogICAgZGlhbG9nVmlzaWJsZTogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgIH0sDQogICAgY3VyUmVwb3J0SWQ6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiAxDQogICAgICB9DQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB0YWJsZUNvbHM6IFtdLA0KICAgICAgdGFibGVEYXRhOiBbXQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC4uLnJlc29sdmVSZXN1bHQsDQogICAgc2hvd0xvYWRpbmcoKSB7DQogICAgICByZXR1cm4gdGhpcy4kbG9hZGluZyh7DQogICAgICAgIGxvY2s6IHRydWUsDQogICAgICAgIHRleHQ6ICfmraPlnKjliqDovb3kuK0uLi7or7fmgqjnqI3lkI4nLA0KICAgICAgICBzcGlubmVyOiAnZWwtaWNvbi1sb2FkaW5nJywNCiAgICAgICAgYmFja2dyb3VuZDogJ3JnYmEoMCwgMCwgMCwgMC43KScNCiAgICAgIH0pDQogICAgfSwNCiAgICBjZWxsU3R5bGUocm93LCBjb2x1bW4sIHJvd0luZGV4LCBjb2x1bW5JbmRleCkgew0KICAgICAgLy8gY29uc29sZS5sb2cocm93LmNvbHVtbi5wcm9wZXJ0eSA9PT0gJ2F1ZGl0RmxhZycpDQogICAgICBpZiAocm93LnJvdy5hdWRpdEZsYWcgPT09IDEpIHsNCiAgICAgICAgcmV0dXJuICdjb2xvcjpncmVlbiFpbXBvcnRhbnQ7Jw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuICdjb2xvcjpyZWQhaW1wb3J0YW50OycNCiAgICAgIH0NCiAgICB9LA0KICAgIHByZXZpZXdSZXBvcnQoKSB7DQogICAgICBpZiAodGhpcy5jdXJSZXBvcnRJZCkgew0KICAgICAgICB0aGlzLmxvYWRpbmdQYWdlID0gdGhpcy5zaG93TG9hZGluZygpDQogICAgICAgIHRoaXMuJGh0dHAuZ2V0KCdiaXNSZXBvcnQvcXVlcnlCb3NzRmlzY2FsVGFibGVDb25maWc/cmVwb3J0Z3VpZD0nICsgdGhpcy5jdXJSZXBvcnRJZCkudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMucmVzb2x2ZVJlc3VsdChkYXRhID0+IHsNCiAgICAgICAgICAgIHRoaXMudGFibGVDb2xzID0gZGF0YS5jb2x1bW5zDQogICAgICAgICAgfSwgcmVzKQ0KICAgICAgICAgIGxldCBwYXJhbXMgPSB7fQ0KICAgICAgICAgIHBhcmFtcy5yZXBvcnRndWlkID0gdGhpcy5jdXJSZXBvcnRJZA0KICAgICAgICAgIGxldCBxdWVyeUNvbmRpdGlvbnMgPSB7fQ0KICAgICAgICAgIHF1ZXJ5Q29uZGl0aW9ucy5hZ2VuY3lndWlkID0gJycNCiAgICAgICAgICBwYXJhbXMucXVlcnlDb25kaXRpb25zID0gcXVlcnlDb25kaXRpb25zDQogICAgICAgICAgLy8gcGFyYW1zLnBhZ2VTaXplID0gc2VsZi5xdWVyeUJvc3NEZXNpZ25SZXBvcnREYXRhLnBhZ2VTaXplDQogICAgICAgICAgLy8gcGFyYW1zLmN1cnJlbnRQYWdlID0gc2VsZi5xdWVyeUJvc3NEZXNpZ25SZXBvcnREYXRhLmN1cnJlbnRQYWdlDQogICAgICAgICAgdGhpcy4kaHR0cC5wb3N0KCdiaXNSZXBvcnQvcXVlcnlCb3NzRGVzaWduUmVwb3J0RGF0YScsIHBhcmFtcykudGhlbihkYXRhID0+IHsNCiAgICAgICAgICAgIHRoaXMubG9hZGluZ1BhZ2UuY2xvc2UoKQ0KICAgICAgICAgICAgaWYgKGRhdGEpIHsNCiAgICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBsZXQgZGF0YVJlc3VsdCA9IGRhdGEuZGF0YS5kYXRhTGlzdA0KICAgICAgICAgICAgICAgIGlmIChkYXRhUmVzdWx0ICYmIGRhdGFSZXN1bHQubGVuZ3RoID4gMCAmJiBkYXRhUmVzdWx0WzBdLml0ZW1jb2RlICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAgICAgIGRhdGFSZXN1bHQuc29ydCgoYSwgYikgPT4gYS5pdGVtY29kZS5sb2NhbGVDb21wYXJlKGIuaXRlbWNvZGUpKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBsZXQgcmVzRGF0ID0gZGF0YVJlc3VsdC5maWx0ZXIoaXRlbSA9PiB7IHJldHVybiBpdGVtICE9PSBudWxsIH0pDQogICAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXNEYXQNCiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gW10NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBbXQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0pLmNhdGNoKGUgPT4gew0KICAgICAgICAgIHRoaXMuJFhNb2RhbC5tZXNzYWdlKHsgc3RhdHVzOiAnZXJyb3InLCBtZXNzYWdlOiAn6aKE6KeI5oql6KGo5aSx6LSlJyArIGUgfSkNCiAgICAgICAgICB0aGlzLmxvYWRpbmdQYWdlLmNsb3NlKCkNCiAgICAgICAgfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMudGFibGVDb2xzID0gW10NCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSBbXQ0KICAgICAgfQ0KICAgIH0sDQogICAgY2xvc2VEaWFsb2coKSB7DQogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6ZGlhbG9nVmlzaWJsZScsIGZhbHNlKQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLnByZXZpZXdSZXBvcnQoKQ0KICB9LA0KICB3YXRjaDogew0KICAgIGRpYWxvZ1Zpc2libGU6IHsNCiAgICAgIGhhbmRsZXIobmV3dmFsKSB7DQogICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpkaWFsb2dWaXNpYmxlJywgbmV3dmFsKQ0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9LA0KICAgIGdvdkJ1ZGdldFN0YXR1czogew0KICAgICAgaGFuZGxlcihuZXdWYWx1ZSwgb2xkVmFsdWUpIHsNCiAgICAgICAgY29uc29sZShuZXdWYWx1ZSwgb2xkVmFsdWUpDQogICAgICAgIGlmIChuZXdWYWx1ZSAmIG9sZFZhbHVlKSB7DQogICAgICAgICAgdGhpcy5nb3ZCdWRnZXRTdGF0dXMgPSBuZXdWYWx1ZQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQoNCn0NCg=="},{"version":3,"sources":["ReportPreviewDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"ReportPreviewDialog.vue","sourceRoot":"src/views/main/directFund/report","sourcesContent":["<template>\r\n  <vxe-modal\r\n    ref=\"checkAuditDialog\"\r\n    v-model=\"dialogVisible\"\r\n    resize\r\n    width=\"90%\"\r\n    height=\"80%\"\r\n    :position=\"{ top: '5%',left: '5%' }\"\r\n    transfer\r\n    title=\"预览\"\r\n    @close=\"closeDialog\"\r\n  >\r\n    <div style=\"height:calc(100% - 50px)\">\r\n      <BsTable\r\n        ref=\"bsTableRef\"\r\n        :table-columns-config=\"tableCols\"\r\n        :table-data=\"tableData\"\r\n        :toolbar-config=\"false\"\r\n        :pager-config=\"false\"\r\n        :cell-style=\"cellStyle\"\r\n      />\r\n    </div>\r\n  </vxe-modal>\r\n</template>\r\n\r\n<script>\r\nimport resolveResult from '@/utils/result.js'\r\n\r\nexport default {\r\n  name: 'ReportPreviewDialog',\r\n  props: {\r\n    dialogVisible: {\r\n      type: Boolean,\r\n      default() {\r\n        return false\r\n      }\r\n    },\r\n    curReportId: {\r\n      type: String,\r\n      default() {\r\n        return 1\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      tableCols: [],\r\n      tableData: []\r\n    }\r\n  },\r\n  methods: {\r\n    ...resolveResult,\r\n    showLoading() {\r\n      return this.$loading({\r\n        lock: true,\r\n        text: '正在加载中...请您稍后',\r\n        spinner: 'el-icon-loading',\r\n        background: 'rgba(0, 0, 0, 0.7)'\r\n      })\r\n    },\r\n    cellStyle(row, column, rowIndex, columnIndex) {\r\n      // console.log(row.column.property === 'auditFlag')\r\n      if (row.row.auditFlag === 1) {\r\n        return 'color:green!important;'\r\n      } else {\r\n        return 'color:red!important;'\r\n      }\r\n    },\r\n    previewReport() {\r\n      if (this.curReportId) {\r\n        this.loadingPage = this.showLoading()\r\n        this.$http.get('bisReport/queryBossFiscalTableConfig?reportguid=' + this.curReportId).then(res => {\r\n          this.resolveResult(data => {\r\n            this.tableCols = data.columns\r\n          }, res)\r\n          let params = {}\r\n          params.reportguid = this.curReportId\r\n          let queryConditions = {}\r\n          queryConditions.agencyguid = ''\r\n          params.queryConditions = queryConditions\r\n          // params.pageSize = self.queryBossDesignReportData.pageSize\r\n          // params.currentPage = self.queryBossDesignReportData.currentPage\r\n          this.$http.post('bisReport/queryBossDesignReportData', params).then(data => {\r\n            this.loadingPage.close()\r\n            if (data) {\r\n              try {\r\n                let dataResult = data.data.dataList\r\n                if (dataResult && dataResult.length > 0 && dataResult[0].itemcode !== undefined) {\r\n                  dataResult.sort((a, b) => a.itemcode.localeCompare(b.itemcode))\r\n                }\r\n                let resDat = dataResult.filter(item => { return item !== null })\r\n                this.tableData = resDat\r\n              } catch (err) {\r\n                console.log(err)\r\n                this.tableData = []\r\n              }\r\n            } else {\r\n              this.tableData = []\r\n            }\r\n          })\r\n        }).catch(e => {\r\n          this.$XModal.message({ status: 'error', message: '预览报表失败' + e })\r\n          this.loadingPage.close()\r\n        })\r\n      } else {\r\n        this.tableCols = []\r\n        this.tableData = []\r\n      }\r\n    },\r\n    closeDialog() {\r\n      this.$emit('update:dialogVisible', false)\r\n    }\r\n  },\r\n  mounted() {\r\n    this.previewReport()\r\n  },\r\n  watch: {\r\n    dialogVisible: {\r\n      handler(newval) {\r\n        this.$emit('update:dialogVisible', newval)\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    },\r\n    govBudgetStatus: {\r\n      handler(newValue, oldValue) {\r\n        console(newValue, oldValue)\r\n        if (newValue & oldValue) {\r\n          this.govBudgetStatus = newValue\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n"]}]}