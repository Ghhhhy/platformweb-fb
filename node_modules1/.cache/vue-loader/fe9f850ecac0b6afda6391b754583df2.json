{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\platformReport\\platformReport\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\platformReport\\platformReport\\index.vue","mtime":1694505522873},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdQbGF0Rm9ybVJlcG9ydCcsDQogIHByb3BzOiB7DQogICAgZWRpdGFibGU6IHsNCiAgICAgIGRlZmF1bHQ6IHRydWUsDQogICAgICB0eXBlOiBCb29sZWFuDQogICAgfSwNCiAgICByZXBvcnRQYXJhbXM6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiB7DQoNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgaXNsb2FkOiB7DQogICAgICBkZWZhdWx0OiBmYWxzZSwNCiAgICAgIHR5cGU6IEJvb2xlYW4NCiAgICB9LA0KICAgIGV4cG9ydExvYWRpbmc6IHsNCiAgICAgIGRlZmF1bHQ6IGZhbHNlLA0KICAgICAgdHlwZTogQm9vbGVhbg0KICAgIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgYnVzaW5lc3NDb250ZXh0OiB7DQogICAgICAgIHRva2VuOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldExvZ2luQXV0aGVudGljYXRpb24udG9rZW5pZA0KICAgICAgfSwNCiAgICAgIGlmUmVuZGVyUmVwb3J0OiB0cnVlLA0KICAgICAgY29kZTogJycsDQogICAgICBwYXJhbXNPYmo6ICcnDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLyoqDQogICAgICogQGRlc2NyaXB0aW9uOiBpbml0UGFyYW1z5pa55rOV6L+b6KGM5oql6KGo5YaF5a655pu/5o2i5ZKM5pCc57Si5p2h5Lu25Yid5aeL5YC86K6+572uDQogICAgICog5L6L5aaC6K6+6K6h56uv5oql6KGo6K6+572u5LqG5Y2g5L2N56ymICN7Y2l0eX0s562J5b6F5bqU55So56uv5riy5p+T5a6M5oiQ5ZCOZXhjZWzlhoXlrrnlkKvmnIkje2NpdHl955qE5Y2g5L2N56ymIOWwhuabv+aNouaIkCfnpo/lu7rnnIEn77yMDQogICAgICog5aaC5p6c5pCc57Si5p2h5Lu255qE5YWz6ZSu5a2X6K6+572u5oiQY2l0eSDvvIzmkJzntKLmnaHku7bnmoTpu5jorqTlgLzkvJrlj5jmiJAn56aP5bu655yBJw0KICAgICAqIEBwYXJhbSB7Kn0gcGFyYW1zDQogICAgICogQHJldHVybiB7Kn0NCiAgICAgKi8NCiAgICBiYXRjaEV4cG9ydEV4Y2VsKGV4Y2VsUGFyYW1zKSB7DQogICAgICB0aGlzLiRyZWZzLnJlcG9ydFZpZXcuYmF0Y2hFeHBvcnRFeGNlbChleGNlbFBhcmFtcykgLy8g6YCJ5Lit5oql6KGo5om56YeP5a+85Ye65oiQRXhjZWwNCiAgICB9LA0KICAgIGJhdGNoRXhwb3J0UERGKGV4Y2VsUGFyYW1zKSB7DQogICAgICB0aGlzLiRyZWZzLnJlcG9ydFZpZXcuYmF0Y2hFeHBvcnRQREYoZXhjZWxQYXJhbXMpIC8vIOmAieS4reaKpeihqOaJuemHj+WvvOWHuuaIkFBERg0KICAgIH0sDQogICAgZXhwb3J0Q3VycmVudEV4Y2VsKCkgew0KICAgICAgdGhpcy4kcmVmcy5yZXBvcnRWaWV3LmV4cG9ydEV4Y2VsKCkgLy8g5b2T5YmN5oql6KGo5a+85Ye65oiQRXhjZWwNCiAgICB9LA0KICAgIGV4cG9ydEN1cnJlbnRQREYoKSB7DQogICAgICB0aGlzLiRyZWZzLnJlcG9ydFZpZXcuZXhwb3J0UERGKCkgLy8g5b2T5YmN5oql6KGo5a+85Ye65oiQUERGDQogICAgfSwNCiAgICBwcmludCgpIHsNCiAgICAgIHRoaXMuJHJlZnMucmVwb3J0Vmlldy5wcmludCgpIC8vIOaJk+WNsOW9k+WJjeaKpeihqA0KICAgIH0sDQogICAgYmF0Y2hQcmludChkcmFmdExpc3QpIHsNCiAgICAgIHRoaXMuJHJlZnMucmVwb3J0Vmlldy5iYXRjaFByaW50KGRyYWZ0TGlzdCkgLy8g5omT5Y2w5b2T5YmN5oql6KGoDQogICAgfSwNCiAgICBzdWJtaXQoKSB7DQogICAgICBjb25zb2xlLmxvZyg4MiwgdGhpcy4kcmVmcy5yZXBvcnRWaWV3LmdldEV4Y2VsRGF0YSgpKQ0KICAgICAgcmV0dXJuIHRoaXMuJHJlZnMucmVwb3J0Vmlldy5nZXRTdWJtaXRGaWxsRGF0YSgpIC8vIOaPkOS6pOWJjeiwg+eUqOaKpeihqOaPkuS7tueahA0KICAgIH0sDQogICAgZ2V0RXhjZWxEYXRhKCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHJlZnMucmVwb3J0Vmlldy5nZXRFeGNlbERhdGEoKQ0KICAgIH0sDQogICAgZW5jb2RlRXhjZWxQYXNzd29yZChwYXNzd29yZCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHJlZnMucmVwb3J0Vmlldy5leGNlbFBhc3N3b3JkRW5jb2RlKHBhc3N3b3JkKQ0KICAgIH0sDQogICAgaW5pdFBhcmFtcyhwYXJhbXMpIHsNCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsNCiAgICAgICAgbGV0IHBhcmFtc1RlbXAgPSB7IC4uLnRoaXMucGFyYW1zT2JqIH0NCiAgICAgICAgY29uc29sZS5sb2coJ+W9k+WJjeaKpeihqOWPguaVsOS4uu+8micsIHBhcmFtc1RlbXApDQogICAgICAgIE9iamVjdC5rZXlzKHBhcmFtcykubWFwKGtleSA9PiB7DQogICAgICAgICAgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMucGFyYW1zT2JqLCBrZXkpKSB7DQogICAgICAgICAgICBwYXJhbXNUZW1wW2tleV0gPSB0aGlzLnBhcmFtc09ialtrZXldDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICByZXNvbHZlKHBhcmFtc1RlbXApDQogICAgICB9KQ0KICAgIH0sDQogICAgc2VhcmNoRGF0YSgpIHsNCiAgICAgIHRoaXMuJHJlZnMucmVwb3J0X3ZpZXcuc2VhcmNoRGF0YSh0aGlzLnBhcmFtc09iaikgLy8g5p+l6K+i5b2T5YmN5oql6KGo5pWw5o2uDQogICAgfSwNCiAgICAvKioNCiAgICAgKiBAZGVzY3JpcHRpb246IOaKpeihqOWPguaVsOWPmOS6hu+8jOWIt+aWsOaKpeihqOaVsOaNrg0KICAgICAqIEBwYXJhbSB7Kn0NCiAgICAgKiBAcmV0dXJuIHsqfQ0KICAgICAqLw0KICAgIHJlZnJlc2hSZXBvcnQoKSB7DQogICAgICBjb25zdCB7IGNvZGUsIHBhcmFtc09iaiB9ID0gdGhpcy5yZXBvcnRQYXJhbXMNCiAgICAgIHRoaXMuY29kZSA9IGNvZGUNCiAgICAgIHRoaXMucGFyYW1zT2JqID0gcGFyYW1zT2JqDQogICAgICAvLyB0aGlzLnNlYXJjaERhdGEoKQ0KICAgIH0sDQogICAgcGFyZW50Q2FsbFNlYXJjaCgpIHsNCiAgICAgIHRoaXMucmVmcmVzaFJlcG9ydCgpDQogICAgICB0aGlzLmlmUmVuZGVyUmVwb3J0ID0gZmFsc2UNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy5pZlJlbmRlclJlcG9ydCA9IHRydWUNCiAgICAgIH0pDQogICAgfSwNCiAgICAvKioNCiAgICAgICog6Iul5peg5p2D6ZmQ5o6n5Yi277yM5YiZ5o+S5Lu25Lit5LiN6ZyA6KaB57uR5a6a6K+l5pa55rOVDQogICAgICAqIOiuvue9ruS4muWKoeS4iuS4i+aWh+S/oeaBr2J1c2luZXNzQ29udGV4dA0KICAgICAgKiDkuIrkuIvmlofkv6Hmga/kvJrlnKjmlbDmja7ojrflj5bml7bkvKDpgJLnu5nlupTnlKjlkI7nq6/ov5vooYzmnYPpmZDmjqfliLYgKiovDQogICAgaW5pdEJ1c2luZXNzQ29udGV4dCgpIHsNCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsNCiAgICAgICAgcmVzb2x2ZSh0aGlzLmJ1c2luZXNzQ29udGV4dCkNCiAgICAgIH0pDQogICAgfSwNCiAgICBnZXRJbnN0YW5jZSgpIHsNCiAgICAgIGxldCBzZWxmID0gdGhpcw0KICAgICAgdmFyIFhzaGVldCA9IHdpbmRvdy5ib3NzSlMuWHNoZWV0DQogICAgICByZXR1cm4gWHNoZWV0LmdldEluc3RhbmNlKHsNCiAgICAgICAgY29uZmlnOiB7DQogICAgICAgICAgYXBwSWQ6IHNlbGYuJHN0b3JlLnN0YXRlLmxvZ2luQXV0aGVudGljYXRpb24uYXBwZ3VpZCB8fCAnZ292LWFpbXMnDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBwcmludFBkZihvcHRpb25zKSB7DQogICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLmdldEluc3RhbmNlKCkNCiAgICAgIGxldCBleHBvcnRQYWdlcyA9IGluc3RhbmNlLnByaW50aW5nU2hlZXRSZXF1ZXN0KG9wdGlvbnMpDQogICAgICBsZXQgX3RoaXMgPSB0aGlzDQogICAgICBleHBvcnRQYWdlcw0KICAgICAgICAuZG9uZShmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICAgIF90aGlzLiRyZWZzLnJlcG9ydHZpZXcuYmF0Y2hQcmludERvbmUoKQ0KICAgICAgICAgIGNvbnNvbGUubG9nKCdwcmludCBwZGYgc3VjY2VzcycsIGRhdGEpDQogICAgICAgIH0pDQogICAgICAgIC5mYWlsKGZ1bmN0aW9uIChvYmopIHsNCiAgICAgICAgICBfdGhpcy4kcmVmcy5yZXBvcnR2aWV3LmJhdGNoUHJpbnRGYWlsKCkNCiAgICAgICAgICBjb25zb2xlLmxvZygncHJpbnQgcGRmIGVycm9yJywgb2JqKQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgZXhwb3J0RXhjZWwob3B0aW9ucykgew0KICAgICAgbGV0IGluc3RhbmNlID0gdGhpcy5nZXRJbnN0YW5jZSgpDQogICAgICBsZXQgZXhwb3J0UGFnZXMgPSBpbnN0YW5jZS5wcmludGluZ1NoZWV0UmVxdWVzdChvcHRpb25zKQ0KICAgICAgbGV0IF90aGlzID0gdGhpcw0KICAgICAgZXhwb3J0UGFnZXMNCiAgICAgICAgLmRvbmUoZnVuY3Rpb24gKGRhdGEpIHsNCiAgICAgICAgICBfdGhpcy4kcmVmcy5yZXBvcnRWaWV3LmV4cG9ydEV4Y2VsRG9uZSgpDQogICAgICAgICAgY29uc29sZS5sb2coJ2ltZyBwcmludCBzdWNjZXNzJywgZGF0YSkNCiAgICAgICAgfSkNCiAgICAgICAgLmZhaWwoZnVuY3Rpb24gKG9iaikgew0KICAgICAgICAgIF90aGlzLiRyZWZzLnJlcG9ydFZpZXcuZXhwb3J0RXhjZWxGYWlsKCkNCiAgICAgICAgICBjb25zb2xlLmxvZygnZXhwb3J0IGV4Y2VsIGVycm9yJywgb2JqKQ0KICAgICAgICB9KQ0KICAgIH0sDQogICAgZ2V0cmVwb3J0UGFyYW1zKCkgew0KICAgICAgbGV0IHBhcmFtc09iaiA9IHt9DQogICAgICBjb25zdCB7IGNvZGUsIGNpdHkgfSA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0TWVudVBhcmFtczUNCiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycw0KICAgICAgbGV0IHBhcmFtID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRNZW51UGFyYW1zNS5wYXJhbXNPYmoNCiAgICAgIGlmIChwYXJhbSkgew0KICAgICAgICBwYXJhbSA9IHBhcmFtLnN1YnN0cigxKSAvLyDliKDpmaTnrKzkuIDkuKrlrZfnrKYNCiAgICAgICAgcGFyYW0gPSBwYXJhbS5zdWJzdHIoMCwgcGFyYW0ubGVuZ3RoIC0gMSkgLy8g5Yig6Zmk5pyA5ZCO5LiA5a2X56ymDQogICAgICAgIGxldCBhcnIgPSBwYXJhbS5zcGxpdCgnLCcpDQogICAgICAgIGFyci5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgICAgaWYgKCFpdGVtLnNwbGl0KCc6JylbMF0pIHsNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgIH0NCiAgICAgICAgICBwYXJhbXNPYmpbaXRlbS5zcGxpdCgnOicpWzBdXSA9IGl0ZW0uc3BsaXQoJzonKVsxXQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgICAgcGFyYW1zT2JqWydmaXNjYWxfeWVhciddID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ueWVhcg0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgY29kZSwNCiAgICAgICAgY2l0eSwNCiAgICAgICAgcGFyYW1zT2JqDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucmVwb3J0UGFyYW1zLmNvZGUsIDg5KQ0KICAgIC8vIGlmICh0aGlzLnJlcG9ydFBhcmFtcy5jb2RlKSB7DQogICAgLy8gICB0aGlzLnJlZnJlc2hSZXBvcnQoKQ0KICAgIC8vIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICByZXBvcnRQYXJhbXM6IHsNCiAgICAgIC8vIOafpeivouWPguaVsA0KICAgICAgaGFuZGxlcihuZXdWYWwsIG9sZFZhbCkgew0KICAgICAgICBjb25zb2xlLmxvZyghbmV3VmFsLmNvZGUsIDUwMTQ0KQ0KICAgICAgICBpZiAoIW5ld1ZhbC5jb2RlKSB7DQogICAgICAgICAgdGhpcy5pZlJlbmRlclJlcG9ydCA9IGZhbHNlDQogICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIH0NCiAgICAgICAgLy8gaWYgKG5ld1ZhbCAmJiBvbGRWYWwgJiYgSlNPTi5zdHJpbmdmeShuZXdWYWwpID09PSBKU09OLnN0cmluZ2Z5KG9sZFZhbCkpIHsNCiAgICAgICAgLy8gICB0aGlzLmlmUmVuZGVyUmVwb3J0ID0gZmFsc2UNCiAgICAgICAgLy8gICByZXR1cm4gZmFsc2UNCiAgICAgICAgLy8gfXt9DQogICAgICAgIGlmICh0aGlzLmlzbG9hZCkgew0KICAgICAgICAgIHRoaXMucmVmcmVzaFJlcG9ydCgpDQogICAgICAgICAgLy8gdGhpcy5pZlJlbmRlclJlcG9ydCA9IGZhbHNlDQogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgdGhpcy5pZlJlbmRlclJlcG9ydCA9IHRydWUNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgZGVlcDogdHJ1ZSwNCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQ0KICAgIH0sDQogICAgZWRpdGFibGU6IHsNCiAgICAgIGhhbmRsZXIobmV3VmFsLCBvbGRWYWwpIHsNCiAgICAgICAgdGhpcy5wYXJlbnRDYWxsU2VhcmNoKCkNCiAgICAgIH0sDQogICAgICBkZWVwOiB0cnVlLA0KICAgICAgaW1tZWRpYXRlOiB0cnVlDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHdpbmRvdy5ib3NzSlMuaW5pdCAmJiB3aW5kb3cuYm9zc0pTLmluaXQoKQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/platformReport/platformReport","sourcesContent":["<!--\r\n * @Author: Comer\r\n * @Mail: xinlai@bosssoft.com.cn\r\n * @Date: 2021-12-16 10:22:56\r\n * @LastEditors: 罗景丹 luojingdan@bosssoft.com.cn\r\n * @LastEditTime: 2023-05-24 17:24:19\r\n * @Description:\r\n-->\r\n<template>\r\n  <ReportView\r\n    v-if=\"ifRenderReport\"\r\n    ref=\"reportView\"\r\n    class=\"platfromreport\"\r\n    :codes=\"code\"\r\n    :editable=\"editable\"\r\n    :init-params=\"initParams\"\r\n    :init-business-context=\"initBusinessContext\"\r\n    :enable-row-readable-authority=\"true\"\r\n    @export-excel=\"exportExcel\"\r\n    @print-pdf=\"printPdf\"\r\n  />\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'PlatFormReport',\r\n  props: {\r\n    editable: {\r\n      default: true,\r\n      type: Boolean\r\n    },\r\n    reportParams: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n\r\n        }\r\n      }\r\n    },\r\n    isload: {\r\n      default: false,\r\n      type: Boolean\r\n    },\r\n    exportLoading: {\r\n      default: false,\r\n      type: Boolean\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      businessContext: {\r\n        token: this.$store.getters.getLoginAuthentication.tokenid\r\n      },\r\n      ifRenderReport: true,\r\n      code: '',\r\n      paramsObj: ''\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    /**\r\n     * @description: initParams方法进行报表内容替换和搜索条件初始值设置\r\n     * 例如设计端报表设置了占位符 #{city},等待应用端渲染完成后excel内容含有#{city}的占位符 将替换成'福建省'，\r\n     * 如果搜索条件的关键字设置成city ，搜索条件的默认值会变成'福建省'\r\n     * @param {*} params\r\n     * @return {*}\r\n     */\r\n    batchExportExcel(excelParams) {\r\n      this.$refs.reportView.batchExportExcel(excelParams) // 选中报表批量导出成Excel\r\n    },\r\n    batchExportPDF(excelParams) {\r\n      this.$refs.reportView.batchExportPDF(excelParams) // 选中报表批量导出成PDF\r\n    },\r\n    exportCurrentExcel() {\r\n      this.$refs.reportView.exportExcel() // 当前报表导出成Excel\r\n    },\r\n    exportCurrentPDF() {\r\n      this.$refs.reportView.exportPDF() // 当前报表导出成PDF\r\n    },\r\n    print() {\r\n      this.$refs.reportView.print() // 打印当前报表\r\n    },\r\n    batchPrint(draftList) {\r\n      this.$refs.reportView.batchPrint(draftList) // 打印当前报表\r\n    },\r\n    submit() {\r\n      console.log(82, this.$refs.reportView.getExcelData())\r\n      return this.$refs.reportView.getSubmitFillData() // 提交前调用报表插件的\r\n    },\r\n    getExcelData() {\r\n      return this.$refs.reportView.getExcelData()\r\n    },\r\n    encodeExcelPassword(password) {\r\n      return this.$refs.reportView.excelPasswordEncode(password)\r\n    },\r\n    initParams(params) {\r\n      return new Promise(resolve => {\r\n        let paramsTemp = { ...this.paramsObj }\r\n        console.log('当前报表参数为：', paramsTemp)\r\n        Object.keys(params).map(key => {\r\n          if (Object.hasOwnProperty.call(this.paramsObj, key)) {\r\n            paramsTemp[key] = this.paramsObj[key]\r\n          }\r\n        })\r\n        resolve(paramsTemp)\r\n      })\r\n    },\r\n    searchData() {\r\n      this.$refs.report_view.searchData(this.paramsObj) // 查询当前报表数据\r\n    },\r\n    /**\r\n     * @description: 报表参数变了，刷新报表数据\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    refreshReport() {\r\n      const { code, paramsObj } = this.reportParams\r\n      this.code = code\r\n      this.paramsObj = paramsObj\r\n      // this.searchData()\r\n    },\r\n    parentCallSearch() {\r\n      this.refreshReport()\r\n      this.ifRenderReport = false\r\n      this.$nextTick(() => {\r\n        this.ifRenderReport = true\r\n      })\r\n    },\r\n    /**\r\n      * 若无权限控制，则插件中不需要绑定该方法\r\n      * 设置业务上下文信息businessContext\r\n      * 上下文信息会在数据获取时传递给应用后端进行权限控制 **/\r\n    initBusinessContext() {\r\n      return new Promise(resolve => {\r\n        resolve(this.businessContext)\r\n      })\r\n    },\r\n    getInstance() {\r\n      let self = this\r\n      var Xsheet = window.bossJS.Xsheet\r\n      return Xsheet.getInstance({\r\n        config: {\r\n          appId: self.$store.state.loginAuthentication.appguid || 'gov-aims'\r\n        }\r\n      })\r\n    },\r\n    printPdf(options) {\r\n      let instance = this.getInstance()\r\n      let exportPages = instance.printingSheetRequest(options)\r\n      let _this = this\r\n      exportPages\r\n        .done(function (data) {\r\n          _this.$refs.reportview.batchPrintDone()\r\n          console.log('print pdf success', data)\r\n        })\r\n        .fail(function (obj) {\r\n          _this.$refs.reportview.batchPrintFail()\r\n          console.log('print pdf error', obj)\r\n        })\r\n    },\r\n    exportExcel(options) {\r\n      let instance = this.getInstance()\r\n      let exportPages = instance.printingSheetRequest(options)\r\n      let _this = this\r\n      exportPages\r\n        .done(function (data) {\r\n          _this.$refs.reportView.exportExcelDone()\r\n          console.log('img print success', data)\r\n        })\r\n        .fail(function (obj) {\r\n          _this.$refs.reportView.exportExcelFail()\r\n          console.log('export excel error', obj)\r\n        })\r\n    },\r\n    getreportParams() {\r\n      let paramsObj = {}\r\n      const { code, city } = this.$store.getters.getMenuParams5\r\n      // eslint-disable-next-line no-unused-vars\r\n      let param = this.$store.getters.getMenuParams5.paramsObj\r\n      if (param) {\r\n        param = param.substr(1) // 删除第一个字符\r\n        param = param.substr(0, param.length - 1) // 删除最后一字符\r\n        let arr = param.split(',')\r\n        arr.map((item, index) => {\r\n          if (!item.split(':')[0]) {\r\n            return\r\n          }\r\n          paramsObj[item.split(':')[0]] = item.split(':')[1]\r\n        })\r\n      }\r\n      paramsObj['fiscal_year'] = this.$store.state.userInfo.year\r\n      return {\r\n        code,\r\n        city,\r\n        paramsObj\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    // console.log(this.reportParams.code, 89)\r\n    // if (this.reportParams.code) {\r\n    //   this.refreshReport()\r\n    // }\r\n  },\r\n  watch: {\r\n    reportParams: {\r\n      // 查询参数\r\n      handler(newVal, oldVal) {\r\n        console.log(!newVal.code, 50144)\r\n        if (!newVal.code) {\r\n          this.ifRenderReport = false\r\n          return false\r\n        }\r\n        // if (newVal && oldVal && JSON.stringfy(newVal) === JSON.stringfy(oldVal)) {\r\n        //   this.ifRenderReport = false\r\n        //   return false\r\n        // }{}\r\n        if (this.isload) {\r\n          this.refreshReport()\r\n          // this.ifRenderReport = false\r\n          this.$nextTick(() => {\r\n            this.ifRenderReport = true\r\n          })\r\n        }\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    },\r\n    editable: {\r\n      handler(newVal, oldVal) {\r\n        this.parentCallSearch()\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  },\r\n  mounted() {\r\n    window.bossJS.init && window.bossJS.init()\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.platfromreport /deep/ input {\r\n  vertical-align: inherit;\r\n}\r\n\r\n.platfromreport /deep/ .el-icon-arrow-down:before {\r\n  color: #606266\r\n}\r\n</style>\r\n"]}]}