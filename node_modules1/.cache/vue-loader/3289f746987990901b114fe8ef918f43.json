{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\warningOverview\\components\\RuleScroll.vue?vue&type=style&index=0&id=6f04ade8&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\warningOverview\\components\\RuleScroll.vue","mtime":1694576524801},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5ydWxlLXN3aXBlci10aXRsZSB7DQogIHBhZGRpbmc6IDE2cHggMjJweDsNCiAgZm9udC1zaXplOiAxNnB4Ow0KICBjb2xvcjogIzU5NTk1OTsNCiAgbGluZS1oZWlnaHQ6IDI2cHg7DQogIGZvbnQtd2VpZ2h0OiBib2xkOw0KICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KfQ0KLnJ1bGUtc3dpcGVyLWNvbnRhaW5lciB7DQogIGhlaWdodDogMjQwcHg7DQogIHdpZHRoOiAxMDAlOw0KICBwYWRkaW5nOiAwIDI0cHg7DQogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQoNCiAgLnJ1bGUtc3dpcGVyLXNsaWRlIHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIGhlaWdodDogNDhweCAhaW1wb3J0YW50Ow0KICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTBlMGUwOw0KICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQoNCiAgICAmOmxhc3QtY2hpbGQgew0KICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlMGUwZTA7DQogICAgfQ0KDQogICAgLnJ1bGUtY29udGVudCB7DQogICAgICB3aWR0aDogMzYycHg7DQogICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOw0KICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgY29sb3I6ICMyRTMxMzM7DQogICAgfQ0KDQogICAgLnJpZ2h0LXRpbWUgew0KICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgY29sb3I6ICM4QTkyOTk7DQogICAgfQ0KICB9DQp9DQoNCi5ydWxlLWhhbmRsZS1jb250YWluZXIgew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQoNCiAgLnJ1bGUtY3VycmVudC1zeW1ib2wgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB0b3A6IDA7DQogICAgbGVmdDogMDsNCiAgICBoZWlnaHQ6IDQ4cHg7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgIzJBOEJGRDsNCg0KICAgICY6OmFmdGVyIHsNCiAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgICAgIHdpZHRoOiAwOw0KICAgICAgaGVpZ2h0OiAwOw0KICAgICAgbWFyZ2luLWxlZnQ6IDJweDsNCiAgICAgIGJvcmRlcjogNnB4IHNvbGlkIHRyYW5zcGFyZW50Ow0KICAgICAgYm9yZGVyLWxlZnQtY29sb3I6ICMyQThCRkQ7DQogICAgICBjb250ZW50OiAnJzsNCiAgICB9DQogIH0NCn0NCg0KLnJ1bGVTeW1ib2xTaG93LWxlYXZlLCAucnVsZVN5bWJvbFNob3ctZW50ZXItdG8gew0KICBvcGFjaXR5OiAxOw0KICB0cmFuc2Zvcm06IHNjYWxlKDEpOw0KICB0cmFuc2l0aW9uOiBhbGwgMC4xczsNCn0NCi5ydWxlU3ltYm9sU2hvdy1sZWF2ZS10bywgLnJ1bGVTeW1ib2xTaG93LWVudGVyIHsNCiAgb3BhY2l0eTogMDsNCiAgdHJhbnNmb3JtOiBzY2FsZSgwKTsNCiAgdHJhbnNpdGlvbjogYWxsIDAuMnM7DQp9DQo="},{"version":3,"sources":["RuleScroll.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RuleScroll.vue","sourceRoot":"src/views/main/warningOverview/components","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"f20 rule-swiper-title\">实时触发规则滚动显示图</div>\r\n    <div v-if=\"!news.length\">\r\n      <BsEmpty />\r\n    </div>\r\n    <div\r\n      v-else\r\n      class=\"rule-handle-container\"\r\n      @mouseenter=\"swiperEnterHandle\"\r\n      @mouseleave=\"swiperLeaveHandle\"\r\n    >\r\n      <transition name=\"ruleSymbolShow\">\r\n        <div\r\n          v-show=\"showRuleCurrentSymbol\"\r\n          class=\"rule-current-symbol\"\r\n        >\r\n        </div>\r\n      </transition>\r\n      <div class=\"swiper-container swiper-no-swiping rule-swiper-container\">\r\n        <div class=\"swiper-wrapper\">\r\n          <div\r\n            v-for=\"(item, index) in news\"\r\n            :key=\"index\"\r\n            class=\"swiper-slide rule-swiper-slide\"\r\n          >\r\n            <el-tooltip class=\"item\" effect=\"light\" :content=\"`${item.fiRuleCode || item.firulecode}-${item.fiRuleName || item.firulename}`\" placement=\"top-start\">\r\n              <div class=\"rule-content\">{{ item.fiRuleCode || item.firulecode }}-{{ item.fiRuleName || item.firulename }}</div>\r\n            </el-tooltip>\r\n            <div class=\"right-time\">\r\n              <span>{{ item.createTime }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref, unref, onMounted, onBeforeUnmount, watch, nextTick } from '@vue/composition-api'\r\nimport Swiper from 'swiper'\r\n\r\nimport { getLatestData } from '@/api/frame/main/warningOverview'\r\n\r\nexport default defineComponent({\r\n  setup() {\r\n    // 规则列表数据\r\n    const news = ref([])\r\n\r\n    // 定时器\r\n    let timer = null\r\n    // 间隔\r\n    const interval = 60000 * 5\r\n\r\n    const getLatestDataHandle = async () => {\r\n      const { data } = await getLatestData()\r\n      news.value = data || []\r\n      timer = setInterval(async () => {\r\n        const { data } = await getLatestData()\r\n        news.value = data || []\r\n      }, interval)\r\n    }\r\n\r\n    // 是否显示当前规则的图标\r\n    const showRuleCurrentSymbol = ref(true)\r\n\r\n    // swiper实例\r\n    let swiperInstance = null\r\n\r\n    // swiper参数配置\r\n    const swiperOption = {\r\n      direction: 'vertical',\r\n      height: 240,\r\n      slidesPerView: 5,\r\n      // 循环切换\r\n      loop: {\r\n        loop: true,\r\n        loopedSlides: 7\r\n      },\r\n      // 自动切换\r\n      autoplay: {\r\n        delay: 2000,\r\n        disableOnInteraction: false\r\n      },\r\n      effects: {\r\n        effect: 'fade'\r\n      },\r\n      // 切换速度\r\n      speed: 400,\r\n      touches: {\r\n        simulateTouch: false\r\n      },\r\n      observer: true,\r\n      observeParents: true,\r\n      // 监听时间\r\n      on: {\r\n        slideChangeTransitionStart() {\r\n          showRuleCurrentSymbol.value = false\r\n        },\r\n        slideChangeTransitionEnd() {\r\n          showRuleCurrentSymbol.value = true\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * 初始化swiper\r\n     */\r\n    const initSwiper = () => {\r\n      nextTick(() => {\r\n        swiperInstance = new Swiper('.rule-swiper-container', swiperOption)\r\n      })\r\n    }\r\n\r\n    /**\r\n     * 鼠标移入 => 暂停swiper\r\n     */\r\n    const swiperEnterHandle = () => {\r\n      swiperInstance?.autoplay?.stop()\r\n    }\r\n    /**\r\n     * 鼠标移出 => 开启swiper\r\n     */\r\n    const swiperLeaveHandle = () => {\r\n      swiperInstance?.autoplay?.start()\r\n    }\r\n\r\n    /**\r\n     * 禁止swiper\r\n     */\r\n    const disableSwiper = () => {\r\n      swiperOption.loop = false\r\n      swiperOption.autoplay = false\r\n      swiperOption.enabled = false\r\n      initSwiper()\r\n    }\r\n\r\n    /**\r\n     * 启用swiper\r\n     */\r\n    const enableSwiper = () => {\r\n      swiperOption.loop = { loop: true, loopedSlides: 7 }\r\n      swiperOption.autoplay = { delay: 2000, disableOnInteraction: false }\r\n      swiperOption.enabled = true\r\n      initSwiper()\r\n    }\r\n\r\n    /**\r\n     * 更像swiper\r\n     */\r\n    const updateSwiper = () => {\r\n      unref(news)?.length <= 5 ? disableSwiper() : enableSwiper()\r\n    }\r\n\r\n    watch(news, () => {\r\n      updateSwiper()\r\n    }, { deep: true })\r\n\r\n    onMounted(() => {\r\n      getLatestDataHandle()\r\n    })\r\n\r\n    onBeforeUnmount(() => {\r\n      timer && clearInterval(timer)\r\n    })\r\n\r\n    return {\r\n      news,\r\n      showRuleCurrentSymbol,\r\n      swiperEnterHandle,\r\n      swiperLeaveHandle\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.rule-swiper-title {\r\n  padding: 16px 22px;\r\n  font-size: 16px;\r\n  color: #595959;\r\n  line-height: 26px;\r\n  font-weight: bold;\r\n  box-sizing: border-box;\r\n}\r\n.rule-swiper-container {\r\n  height: 240px;\r\n  width: 100%;\r\n  padding: 0 24px;\r\n  box-sizing: border-box;\r\n\r\n  .rule-swiper-slide {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    height: 48px !important;\r\n    border-top: 1px solid #e0e0e0;\r\n    box-sizing: border-box;\r\n\r\n    &:last-child {\r\n      border-bottom: 1px solid #e0e0e0;\r\n    }\r\n\r\n    .rule-content {\r\n      width: 362px;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n      font-size: 14px;\r\n      color: #2E3133;\r\n    }\r\n\r\n    .right-time {\r\n      font-size: 12px;\r\n      color: #8A9299;\r\n    }\r\n  }\r\n}\r\n\r\n.rule-handle-container {\r\n  position: relative;\r\n\r\n  .rule-current-symbol {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    height: 48px;\r\n    display: flex;\r\n    align-items: center;\r\n    border-left: 4px solid #2A8BFD;\r\n\r\n    &::after {\r\n      display: inline-block;\r\n      width: 0;\r\n      height: 0;\r\n      margin-left: 2px;\r\n      border: 6px solid transparent;\r\n      border-left-color: #2A8BFD;\r\n      content: '';\r\n    }\r\n  }\r\n}\r\n\r\n.ruleSymbolShow-leave, .ruleSymbolShow-enter-to {\r\n  opacity: 1;\r\n  transform: scale(1);\r\n  transition: all 0.1s;\r\n}\r\n.ruleSymbolShow-leave-to, .ruleSymbolShow-enter {\r\n  opacity: 0;\r\n  transform: scale(0);\r\n  transition: all 0.2s;\r\n}\r\n</style>\r\n"]}]}