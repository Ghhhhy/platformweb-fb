{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\MointoringMatters\\SystemLevelRules\\children\\addDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\MointoringMatters\\SystemLevelRules\\children\\addDialog.vue","mtime":1695716045194},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBwcm9jb25mIH0gZnJvbSAnLi4vU3lzdGVtTGV2ZWxSdWxlcy5qcycNCmltcG9ydCBIdHRwTW9kdWxlIGZyb20gJ0AvYXBpL2ZyYW1lL21haW4vTW9uaXRvcmluZy9sZXZlbFJ1bGVzLmpzJw0KaW1wb3J0IHF1ZXJ5VHJlZWRFbGVtZW50QnlDb2RlTWl4aW4gZnJvbSAnQC9taXhpbi9xdWVyeVRyZWVkRWxlbWVudEJ5Q29kZS5qcycNCmltcG9ydCBmdW5jdGlvblNlbGVjdE1peGluIGZyb20gJ0AvbWl4aW4vZnVuY3Rpb25TZWxlY3RNaXhpbi5qcycNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnQWRkRGlhbG9nJywNCiAgbWl4aW5zOiBbcXVlcnlUcmVlZEVsZW1lbnRCeUNvZGVNaXhpbiwgZnVuY3Rpb25TZWxlY3RNaXhpbl0sDQogIGNvbXBvbmVudHM6IHt9LA0KICBjb21wdXRlZDogew0KICAgIGN1ck5hdk1vZHVsZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUNCiAgICB9LA0KICAgIHRvb2xiYXJDb25maWcoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBkaXNhYmxlZE1vbmV5Q29udmVyc2lvbjogZmFsc2UsDQogICAgICAgIG1vbmV5Q29udmVyc2lvbjogZmFsc2UsIC8vIOaYr+WQpuaciemHkeminei9rOaNog0KICAgICAgICBpbXBvcnQ6IGZhbHNlLA0KICAgICAgICBjaGVja1R5cGU6IHRoaXMudGl0bGUgIT09ICfmn6XnnIvor6bmg4UnLA0KICAgICAgICByZWZyZXNoOiB0aGlzLnRpdGxlICE9PSAn5p+l55yL6K+m5oOFJw0KICAgICAgfQ0KICAgIH0sDQogICAgZ2xvYmFsQ29uZmlnKCkgew0KICAgICAgbGV0IGNvbmZpZyA9IHsgLy8g5YWo5bGA6buY6K6k5riy5p+T5YiX6YWN572uDQogICAgICAgIC8vIOWFqOWxgOmFjee9rg0KICAgICAgICBjaGVja1R5cGU6ICcnLCAvLyBoYXNDaGVja2JveCDlj6/pgInlgLwgJyd8fGNoZWNrYm94fHxyYWRpbw0KICAgICAgICBzZXE6IGZhbHNlIC8vIOW6j+WPt+WIlw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMudGl0bGUgPT09ICfmn6XnnIvor6bmg4UnKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgLi4uY29uZmlnLA0KICAgICAgICAgIC4uLnRoaXMudGFibGVDb25maWcNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIHRoaXMudGFibGVDb25maWcNCiAgICB9DQogIH0sDQogIHByb3BzOiB7DQogICAgdGl0bGU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICcnDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICByZWZsZXNoS2V5OiBEYXRlLm5vdygpLA0KICAgICAgc3VibWl0TG9hZGluZzogZmFsc2UsDQogICAgICB0cmVlRGF0YTogW10sDQogICAgICBlZGl0Q29uZmlnOiB7DQogICAgICAgIHRyaWdnZXI6ICdkYmxjbGljaycsDQogICAgICAgIG1vZGU6ICdjZWxsJw0KICAgICAgfSwNCiAgICAgIHN4OiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmlzU3gsDQogICAgICBkaXNhYmxlZDogZmFsc2UsDQoNCiAgICAgIGVkaXRSdWxlc0luOiB7DQogICAgICAgIHBhcmFtOiBbeyByZXF1aXJlZDogdHJ1ZSwgdHlwZTogJ2Zsb2F0JywgdHJpZ2dlcjogJ2NoYW5nZScsIG1lc3NhZ2U6ICfor7fovpPlhaXop4TliJnlrprkuYnnmoTlj4LmlbDlgLwnIH1dDQogICAgICB9LA0KICAgICAgYnV0dG9uQ29uZmlnOiB7DQogICAgICAgIC8vIHRhYmxl5bel5YW35qCP6YWN572uDQogICAgICAgIGRpc2FibGVkTW9uZXlDb252ZXJzaW9uOiBmYWxzZSwNCiAgICAgICAgbW9uZXlDb252ZXJzaW9uOiBmYWxzZSAvLyDmmK/lkKbmnInph5Hpop3ovazmjaINCiAgICAgICAgLy8gYnV0dG9uczogWw0KICAgICAgICAvLyAgIHsgY29kZTogJ3N1cmUnLCBuYW1lOiAn56Gu5a6aJywgc3RhdHVzOiAncHJpbWFyeScsIGNhbGxiYWNrOiB0aGlzLnN1cmVCdXR0b24gfQ0KICAgICAgICAvLyBdDQogICAgICB9LA0KICAgICAgdGVtcE5vZGVzOiBbXSwNCiAgICAgIHJlZ3VsYXRpb25Nb2RlbE5hbWU6ICcnLA0KICAgICAgcmVndWxhdGlvbk1vZGVsQ29kZTogJycsDQogICAgICB0YWJsZUxvYWRpbmc6IGZhbHNlLA0KICAgICAgbW9uaXRvclRhYmxlQ29sdW1uc0NvbmZpZzogcHJvY29uZi5tb25pdG9yU2V0VGFibGVDb2x1bW5zQ29uZmlnLA0KICAgICAgb3BlcmF0aW9uVGFibGVEYXRhOiBbXSwNCiAgICAgIHRhYmJ0bjogWyfmqKHmnb/kv6Hmga8nLCAn6KeE5YiZ5a6a5LmJJywgJ+eZveWQjeWNlScsICfnlJ/mlYjojIPlm7QnXSwNCiAgICAgIHJ1bGVTZXRTaG93OiB0cnVlLA0KICAgICAgcnVsZURlc1Nob3c6IGZhbHNlLA0KICAgICAgYXBwU2V0U2hvdzogZmFsc2UsDQogICAgICBlZmZlY3RpdmVTaG93OiBmYWxzZSwNCiAgICAgIGFjdGl2ZUluZGV4OiAwLA0KICAgICAgY3JUZW1wbGF0ZTogJycsDQogICAgICBtb25pdG9yUnVsZU5hbWU6ICcnLA0KICAgICAgcmVndWxhdGlvblR5cGU6ICcnLA0KICAgICAgcXVodWE6ICcnLA0KICAgICAgbW91bnRUYWJsZUNvbHVtbnNDb25maWc6IHByb2NvbmYubW91bnRUYWJsZUNvbHVtbnNDb25maWcsDQogICAgICBtb3VudFRhYmxlRGF0YTogW10sDQogICAgICAvLyBCc1F1ZXJ5IOafpeivouagjw0KICAgICAgcXVlcnlDb25maWc6IHByb2NvbmYuc2V0aGlnaFF1ZXJ5Q29uZmlnLA0KICAgICAgc2VhcmNoRGF0YUxpc3Q6IHByb2NvbmYuc2V0aGlnaFF1ZXJ5RGF0YSwNCiAgICAgIC8vIHRhYmxlIOmFjee9rg0KICAgICAgdGFibGVDb25maWc6IHsNCiAgICAgICAgcmVuZGVyZXJzOiB7DQogICAgICAgICAgLy8g57yW6L6RIOmZhOS7tiDmk43kvZzml6Xlv5cNCiAgICAgICAgICAkcGF5Vm91Y2hlcklucHV0R2xvYWJsZU9wdGlvblJvdzogcHJvY29uZi5nbG9hYmxlT3B0aW9uUm93DQogICAgICAgIH0sDQogICAgICAgIG1ldGhvZHM6IHsNCiAgICAgICAgICBvbk9wdGlvblJvd0NsaWNrOiB0aGlzLm9uT3B0aW9uUm93Q2xpY2sNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGJ1c2luZXNzTW9kdWxlOiAnJywNCiAgICAgIGJ1c2luZXNzTW9kdWxlb3B0aW9uczogWw0KICAgICAgICB7IHZhbHVlOiAnMScsIGxhYmVsOiAnNjEwMDAwMDAwLemZleilv+ecgeacrOe6pycgfSwNCiAgICAgICAgeyB2YWx1ZTogJzInLCBsYWJlbDogJzYxMDEwMDAwMC3opb/lronluILmnKznuqcnIH0sDQogICAgICAgIHsgdmFsdWU6ICczJywgbGFiZWw6ICc2MTAxMDIwMDAt5paw5Z+O5Yy65pys57qnJyB9LA0KICAgICAgICB7IHZhbHVlOiAnNCcsIGxhYmVsOiAnNjEwMTAyOTk4LeaWsOWfjuWMuui+luWMuicgfQ0KICAgICAgXSwNCiAgICAgIGJ1c2luZXNzRnVuY3Rpb246ICcnLA0KICAgICAgYnVzaW5lc3NGdW5jdGlvbm9wdGlvbnM6IFsNCiAgICAgICAgeyB2YWx1ZTogJzEnLCBsYWJlbDogJzAwMDAwMS3pooTnrpflpITpooTnlZknIH0sDQogICAgICAgIHsgdmFsdWU6ICcyJywgbGFiZWw6ICcwMDEwMDEt55yB57qn6LSi5pS/5LiT6aG56LWE6YeRJyB9LA0KICAgICAgICB7IHZhbHVlOiAnMycsIGxhYmVsOiAnNjEwMTAyMDAwLeaWsOWfjuWMuuacrOe6pycgfSwNCiAgICAgICAgeyB2YWx1ZTogJzQnLCBsYWJlbDogJzYxMDEwMjk5OC3mlrDln47ljLrovpbljLonIH0NCiAgICAgIF0sDQogICAgICB3YXJuaW5nTGV2ZWw6IDEsDQogICAgICB3YXJuaW5nTGV2ZWxvcHRpb25zOiB0aGlzLiRzdG9yZS5zdGF0ZS53YXJuSW5mby53YXJuTGV2ZWxPcHRpb25zLA0KICAgICAgaGFuZGxlVHlwZTogMSwNCiAgICAgIGhhbmRsZVR5cGVvcHRpb25zOiB0aGlzLiRzdG9yZS5zdGF0ZS53YXJuSW5mby53YXJuQ29udHJvbFR5cGVPcHRpb25zLA0KICAgICAgdHJpZ2dlckNsYXNzOiAxLA0KICAgICAgdHJpZ2dlckNsYXNzb3B0aW9uczogWw0KICAgICAgICB7IHZhbHVlOiAxLCBsYWJlbDogJ+WunuaXtuinpuWPkScgfSwNCiAgICAgICAgeyB2YWx1ZTogMiwgbGFiZWw6ICflrprml7bop6blj5EnIH0NCiAgICAgIF0sDQogICAgICBpc0VuYWJsZTogMCwNCiAgICAgIGlzRW5hYmxlb3B0aW9uczogWw0KICAgICAgICB7IHZhbHVlOiAwLCBsYWJlbDogJ+WQpicgfSwNCiAgICAgICAgeyB2YWx1ZTogMSwgbGFiZWw6ICfmmK8nIH0NCiAgICAgIF0sDQogICAgICBydWxlRmxhZzogMSwNCiAgICAgIHJ1bGVGbGFnT3B0aW9uczogWw0KICAgICAgICB7IHZhbHVlOiAwLCBsYWJlbDogJ+aIlicgfSwNCiAgICAgICAgeyB2YWx1ZTogMSwgbGFiZWw6ICfkuJQnIH0NCiAgICAgIF0sDQogICAgICB3YXJuTG9jYXRpb246IDMsDQogICAgICB3YXJuTG9jYXRpb25PcHRpb25zOiBbDQogICAgICAgIHsgdmFsdWU6IDEsIGxhYmVsOiAn6Zeo5oi3JyB9LA0KICAgICAgICB7IHZhbHVlOiAyLCBsYWJlbDogJ+aguOeulycgfSwNCiAgICAgICAgeyB2YWx1ZTogMywgbGFiZWw6ICfkuI3mj5DnpLonIH0NCiAgICAgIF0sDQogICAgICB3YXJuVHlwZTogJycsDQogICAgICB3YXJuVHlwZU9wdGlvbnM6IFsNCiAgICAgICAgeyB2YWx1ZTogJzEnLCBsYWJlbDogJ+a1geWQkScgfSwNCiAgICAgICAgeyB2YWx1ZTogJzInLCBsYWJlbDogJ+a1gemAnycgfSwNCiAgICAgICAgeyB2YWx1ZTogJzMnLCBsYWJlbDogJ+a1gemHjycgfSwNCiAgICAgICAgeyB2YWx1ZTogJzQnLCBsYWJlbDogJ+WFtuS7licgfQ0KICAgICAgXSwNCiAgICAgIHVwbG9hZEZpbGU6ICcnLA0KICAgICAgdXBsb2FkRmlsZU9wdGlvbnM6IFsNCiAgICAgICAgeyB2YWx1ZTogJzEnLCBsYWJlbDogJ+aYrycgfSwNCiAgICAgICAgeyB2YWx1ZTogJzAnLCBsYWJlbDogJ+WQpicgfQ0KICAgICAgXSwNCiAgICAgIHJlZ3VsYXRpb25DbGFzczogJycsDQogICAgICByZWd1bGF0aW9uQ2xhc3NOYW1lOiAnJywNCiAgICAgIHJlZ3VsYXRpb25DbGFzc29wdGlvbnM6IFsNCiAgICAgICAgLy8geyB2YWx1ZTogMSwgbGFiZWw6ICfnm7Tovr7otYTph5Hnm5Hmjqfop4TliJknIH0sDQogICAgICAgIC8vIHsgdmFsdWU6IDIsIGxhYmVsOiAn5aSn6aKd5pSv5LuY55uR5o6nJyB9LA0KICAgICAgICAvLyB7IHZhbHVlOiAzLCBsYWJlbDogJ+WQjOaIt+WQjei9rOi0picgfSwNCiAgICAgICAgLy8geyB2YWx1ZTogNCwgbGFiZWw6ICflt6XotYTmlK/lh7rnm7jlhbPop4TliJknIH0sDQogICAgICAgIC8vIHsgdmFsdWU6IDUsIGxhYmVsOiAn5pSv5Ye65LiN6KeE6IyDJyB9LA0KICAgICAgICAvLyB7IHZhbHVlOiA2LCBsYWJlbDogJ+aUr+S7mOS/oeaBr+S4jeinhOiMgycgfSwNCiAgICAgICAgLy8geyB2YWx1ZTogNywgbGFiZWw6ICfnpoHmraLkvb/nlKjnp5Hnm64nIH0sDQogICAgICAgIC8vIHsgdmFsdWU6IDgsIGxhYmVsOiAn6LWE6YeR55So6YCU5L2/55So5LiN6KeE6IyDJyB9LA0KICAgICAgICAvLyB7IHZhbHVlOiA5LCBsYWJlbDogJ+WFtuS7luinhOWImScgfSwNCiAgICAgICAgLy8geyB2YWx1ZTogMTAsIGxhYmVsOiAn5Z+656GA6LSi5Yqh5L+h5oGvJyB9LA0KICAgICAgICAvLyB7IHZhbHVlOiAxMSwgbGFiZWw6ICfkurrlkZjnsbvop4TliJknIH0sDQogICAgICAgIC8vIHsgdmFsdWU6IDEyLCBsYWJlbDogJ+acn+WIneWPiuS9v+eUqOmihOitpuinhOWImScgfSwNCiAgICAgICAgLy8geyB2YWx1ZTogMTMsIGxhYmVsOiAn5Yet6K+B57G76KeE5YiZJyB9LA0KICAgICAgICAvLyB7IHZhbHVlOiAxNCwgbGFiZWw6ICflhbbku5bnsbvop4TliJknIH0sDQogICAgICAgIC8vIHsgdmFsdWU6IDE1LCBsYWJlbDogJ+WIhuaekOexu+inhOWImScgfQ0KICAgICAgXSwNCiAgICAgIGZpUnVsZVR5cGVDb2RlOiAnJywNCiAgICAgIGZpUnVsZVR5cGVOYW1lOiAnJywNCiAgICAgIGZpUnVsZVR5cGVDb2RlTmFtZTogJycsDQogICAgICBwb2xpY2llc05hbWU6ICcnLA0KICAgICAgcG9saWNpZXNEZXNjcmlwdGlvbjogJycsDQogICAgICBmaVJ1bGVEZXNjOiAnJywNCiAgICAgIGltcGxEZXNjOiAnJywNCiAgICAgIGRpYWxvZ1Zpc2libGU6IHRydWUsDQogICAgICBhZGRMb2FkaW5nOiBmYWxzZSwNCiAgICAgIHRva2VuOiAnJywNCiAgICAgIHNjb3BlOiBbXSwNCiAgICAgIGlzQ29udGludWl0eTogZmFsc2UsDQogICAgICAvLyDmlofku7bkuIrkvKDnm7jlhbPlj4LmlbANCiAgICAgIGZpbGVMaXN0OiBbXSwNCiAgICAgIGZpbGVEYXRhOiBbXSwNCiAgICAgIGZpbGVEYXRhQmFrRGVsOiBbXSwNCiAgICAgIGF0dGFjaG1lbnRJZDogJycsDQogICAgICBzaG93Ym94OiBmYWxzZSwNCiAgICAgIGJ1c2luZXNzU3lzdGVtQ29kZTogJycsDQogICAgICBidXNpbmVzc1N5c3RlbU5hbWU6ICcnLA0KICAgICAgYnVzaW5lc3NTeXN0ZW1Db2Rlb3B0aW9uczogW10sDQogICAgICBidXNpbmVzc01vZHVsZUNvZGU6ICcnLA0KICAgICAgYnVzaW5lc3NNb2R1bGVOYW1lOiAnJywNCiAgICAgIGJ1c2luZXNzTW9kdWxlQ29kZW9wdGlvbnM6IFtdLA0KICAgICAgYnVzaW5lc3NGdW5jdGlvbkNvZGU6IFtdLA0KICAgICAgYnVzaW5lc3NGdW5jdGlvbk5hbWU6IFtdLA0KICAgICAgYnVzaW5lc3NGdW5jdGlvbkNvZGVvcHRpb25zOiBbXSwNCiAgICAgIGRlcGFydG1lbnRDb2RlOiAnJywNCiAgICAgIGRlcGFydG1lbnROYW1lOiAnJywNCiAgICAgIGRlcGFydG1lbnRDb2Rlb3B0aW9uczogW10sDQogICAgICBTeXNwYXJlbnRJZDogMCwNCiAgICAgIE1vZHBhcmVudElkOiAwLA0KICAgICAgZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZTogcHJvY29uZi5mb3JtSXRlbXNDb25maWdNZXNzYWdlLA0KICAgICAgcGF5bWVudExlbjogMCwNCiAgICAgIHBheW1lbnREYXRhOiBbXSwNCiAgICAgIGZvcm1EYXRhczogew0KICAgICAgICBwYXltZW50OiAnJywNCiAgICAgICAgdXNlRGVzOiAnJywNCiAgICAgICAgcGF5ZWVBY2N0Tm86ICcnLA0KICAgICAgICBwYXllZUFjY3ROYW1lOiAnJywNCiAgICAgICAgZGVzOiAnJywNCiAgICAgICAgYmFzaXM6ICcnDQogICAgICB9LA0KICAgICAgZm9ybVZhbGlkYXRpb25Db25maWdNZXNzYWdlOiBwcm9jb25mLmZvcm1WYWxpZGF0aW9uQ29uZmlnTWVzc2FnZQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGZvcm1JdGVtQ2hhbmdlKG9iaikgew0KICAgICAgaWYgKG9iai5wcm9wZXJ0eSA9PT0gJ3BheW1lbnQnKSB7DQogICAgICAgIGxldCBkYXRhID0gb2JqLml0ZW1WYWx1ZSA/IG9iai5pdGVtVmFsdWUuc3BsaXQoJywnKS5zbGljZSgxKSA6IFtdDQogICAgICAgIGxldCBjb250ZW50ID0gdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlWzBdLml0ZW1SZW5kZXIub3B0aW9ucw0KICAgICAgICB0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2Uuc3BsaWNlKDEsIHRoaXMucGF5bWVudExlbikNCiAgICAgICAgaWYgKHRoaXMucGF5bWVudERhdGEpIHsNCiAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPCB0aGlzLnBheW1lbnRMZW4pIHsNCiAgICAgICAgICAgIHRoaXMucGF5bWVudERhdGEuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgaWYgKGRhdGEuaW5kZXhPZihpdGVtKSA9PT0gLTEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhc1t0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2VbMF0uaXRlbVJlbmRlci5vcHRpb25zW2l0ZW1dLm5hbWUgKyAnX192aWV3U29ydCddID0gJycNCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhc1t0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2VbMF0uaXRlbVJlbmRlci5vcHRpb25zW2l0ZW1dLm5hbWUgKyAnY29kZSddID0gJycNCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhc1t0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2VbMF0uaXRlbVJlbmRlci5vcHRpb25zW2l0ZW1dLm5hbWUgKyAnY29kZV9fbXVsdGlwbGUnXSA9IFtdDQogICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXNbdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlWzBdLml0ZW1SZW5kZXIub3B0aW9uc1tpdGVtXS5uYW1lICsgJ2lkJ10gPSAnJw0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGFzW3RoaXMuZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZVswXS5pdGVtUmVuZGVyLm9wdGlvbnNbaXRlbV0ubmFtZSArICdpZF9fbXVsdGlwbGUnXSA9IFtdDQogICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXNbdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlWzBdLml0ZW1SZW5kZXIub3B0aW9uc1tpdGVtXS5uYW1lICsgJ25hbWUnXSA9ICcnDQogICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXNbdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlWzBdLml0ZW1SZW5kZXIub3B0aW9uc1tpdGVtXS5uYW1lICsgJ25hbWVfX211bHRpcGxlJ10gPSBbXQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnBheW1lbnREYXRhID0gZGF0YQ0KICAgICAgICB0aGlzLnBheW1lbnRMZW4gPSBkYXRhLmxlbmd0aA0KICAgICAgICBsZXQgZGF0YXMgPSB7fQ0KICAgICAgICBkYXRhLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgICAgaWYgKGl0ZW0gPT09ICcxJykgew0KICAgICAgICAgICAgZGF0YXMgPSB0aGlzLmNyZWF0ZVBybyhjb250ZW50W2l0ZW1dLCBmYWxzZSkNCiAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0pIHsNCiAgICAgICAgICAgIGRhdGFzID0gdGhpcy5jcmVhdGVPYmooY29udGVudFtpdGVtXSwgZmFsc2UpDQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZS5zcGxpY2UoMSArIGluZGV4LCAwLCBkYXRhcykNCiAgICAgICAgfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuZm9ybURhdGFzID0gT2JqZWN0LmFzc2lnbih0aGlzLmZvcm1EYXRhcywgb2JqLmRhdGEpDQogICAgICB9DQogICAgfSwNCiAgICBjcmVhdGVQcm8ob2JqLCBkaXNhYmxlZCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgaW5zZXJ0TWFyazogb2JqLmxhYmVsLA0KICAgICAgICBpc05ldzogdHJ1ZSwNCiAgICAgICAgdGl0bGU6IG9iai5sYWJlbCwNCiAgICAgICAgZmllbGQ6IG9iai5uYW1lLA0KICAgICAgICBhbGlnbjogJ2xlZnQnLA0KICAgICAgICB0aXRsZV9fdmlld1NvcnQ6IG9iai5sYWJlbCwNCiAgICAgICAgZmllbGRfX3ZpZXdTb3J0OiBvYmoubmFtZSwNCiAgICAgICAgbmFtZTogJyR2eGVUcmVlJywNCiAgICAgICAgaXRlbVJlbmRlcjogew0KICAgICAgICAgIG5hbWU6ICckdnhlVHJlZScsDQogICAgICAgICAgb3B0aW9uczogW10sDQogICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgIGNvbmZpZzogew0KICAgICAgICAgICAgICB0cmVlUHJvcHM6IHsNCiAgICAgICAgICAgICAgICBsYWJlbEZvcm1hdDogJ3tjb2RlfS17bmFtZX0nLA0KICAgICAgICAgICAgICAgIG5vZGVLZXk6ICdjb2RlJywNCiAgICAgICAgICAgICAgICBsYWJlbDogJ25hbWUnLA0KICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nIC8vIOWtkOe6p+Wtl+auteWQjQ0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogYOivt+mAieaLqSR7b2JqLmxhYmVsfWAsDQogICAgICAgICAgICAgIG11bHRpcGxlOiB0cnVlLA0KICAgICAgICAgICAgICBkaXNhYmxlZCwNCiAgICAgICAgICAgICAgaXNsZWFmOiBmYWxzZSwNCiAgICAgICAgICAgICAgYXhpb3NDb25maWc6IHsNCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywNCiAgICAgICAgICAgICAgICB1cmw6ICdsYXJnZS1tb25pdG9yLXBsYXRmb3JtL2xtcC9lbGVtZW50UXVlcnkvZWxlbWVudHRyZWUnLA0KICAgICAgICAgICAgICAgIHN1Y2Nlc3NDb2RlOiAnMDAwMDAwJywgLy8g5oiQ5YqfY29kZQ0KICAgICAgICAgICAgICAgIHN0YXR1c0ZpZWxkOiAnY29kZScNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIHF1ZXJ5cGFyYW1zOiB7DQogICAgICAgICAgICAgIGNvbmRpdGlvbjogJycsDQogICAgICAgICAgICAgIGVsZW1lbnRDb2RlOiAncHJvJywNCiAgICAgICAgICAgICAgeWVhcjogdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ueWVhciwNCiAgICAgICAgICAgICAgcHJvdmluY2U6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLnByb3ZpbmNlLA0KICAgICAgICAgICAgICBsaW1pdDogMjAwMCwNCiAgICAgICAgICAgICAgb2Zmc2V0OiAxDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBjcmVhdGVPYmoob2JqLCBkaXNhYmxlZCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgaW5zZXJ0TWFyazogb2JqLmxhYmVsLA0KICAgICAgICBpc05ldzogdHJ1ZSwNCiAgICAgICAgdGl0bGU6IG9iai5sYWJlbCwNCiAgICAgICAgZmllbGQ6IG9iai5uYW1lLA0KICAgICAgICBhbGlnbjogJ2xlZnQnLA0KICAgICAgICB0aXRsZV9fdmlld1NvcnQ6IG9iai5sYWJlbCwNCiAgICAgICAgZmllbGRfX3ZpZXdTb3J0OiBvYmoubmFtZSwNCiAgICAgICAgbmFtZTogJyR2eGVUcmVlJywNCiAgICAgICAgaXRlbVJlbmRlcjogew0KICAgICAgICAgIG5hbWU6ICckdnhlVHJlZScsDQogICAgICAgICAgb3B0aW9uczogW10sDQogICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgIGNvbmZpZzogew0KICAgICAgICAgICAgICB0cmVlUHJvcHM6IHsNCiAgICAgICAgICAgICAgICBub2RlS2V5OiAnaWQnLA0KICAgICAgICAgICAgICAgIGxhYmVsOiAne25hbWV9JywNCiAgICAgICAgICAgICAgICBsYWJlbEZvcm1hdDogJ3tjb2RlfS17bmFtZX0nLA0KICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nIC8vIOWtkOe6p+Wtl+auteWQjQ0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogYOivt+mAieaLqSR7b2JqLmxhYmVsfWAsDQogICAgICAgICAgICAgIGRpc2FibGVkLA0KICAgICAgICAgICAgICBtdWx0aXBsZTogdHJ1ZSwNCiAgICAgICAgICAgICAgaXNsZWFmOiBmYWxzZSwNCiAgICAgICAgICAgICAgYXhpb3NDb25maWc6IHsNCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywNCiAgICAgICAgICAgICAgICAvLyB1cmw6IGBtcC1iLWJhc2VkYXRhLXNlcnZpY2UvdjIvZWxldmFsdWVzZXQvdmlldy9qc3RyZWVkYXRhLyR7b2JqLnVybEN9YA0KICAgICAgICAgICAgICAgIHVybDogJ2xhcmdlLW1vbml0b3ItcGxhdGZvcm0vbG1wL2VsZW1lbnRRdWVyeS9lbGVtZW50dHJlZScsDQogICAgICAgICAgICAgICAgc3VjY2Vzc0NvZGU6ICcwMDAwMDAnLCAvLyDmiJDlip9jb2RlDQogICAgICAgICAgICAgICAgc3RhdHVzRmllbGQ6ICdjb2RlJw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgcXVlcnlwYXJhbXM6IHsNCiAgICAgICAgICAgICAgZWxlbWVudENvZGU6IG9iai51cmxDLA0KICAgICAgICAgICAgICBkYXRlOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby55ZWFyLA0KICAgICAgICAgICAgICB0b2tlbmlkOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldExvZ2luQXV0aGVudGljYXRpb24udG9rZW5pZCwNCiAgICAgICAgICAgICAgYXBwZ3VpZDogJ2FwYWFzJywNCiAgICAgICAgICAgICAgeWVhcjogdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ueWVhciwNCiAgICAgICAgICAgICAgbW9mRGl2Q29kZTogdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ucHJvdmluY2UsDQogICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHt9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBjaG9vc2VXYXJuaW5nTGV2ZWwodmFsKSB7DQogICAgICBpZiAodmFsID09PSAxKSB7DQogICAgICAgIHRoaXMuaGFuZGxlVHlwZSA9IDENCiAgICAgIH0gZWxzZSBpZiAodmFsID09PSAyKSB7DQogICAgICAgIHRoaXMuaGFuZGxlVHlwZSA9IDINCiAgICAgIH0gZWxzZSBpZiAodmFsID09PSAzKSB7DQogICAgICAgIHRoaXMuaGFuZGxlVHlwZSA9IDMNCiAgICAgIH0gZWxzZSBpZiAodmFsID09PSA0KSB7DQogICAgICAgIHRoaXMuaGFuZGxlVHlwZSA9IDQNCiAgICAgIH0gZWxzZSBpZiAodmFsID09PSA1KSB7DQogICAgICAgIHRoaXMuaGFuZGxlVHlwZSA9IDUNCiAgICAgIH0NCiAgICB9LA0KICAgIGNob29zZWhhbmRsZVR5cGUodmFsKSB7DQogICAgICBpZiAodmFsID09PSAxKSB7DQogICAgICAgIHRoaXMud2FybmluZ0xldmVsID0gMQ0KICAgICAgfSBlbHNlIGlmICh2YWwgPT09IDIpIHsNCiAgICAgICAgdGhpcy53YXJuaW5nTGV2ZWwgPSAyDQogICAgICB9IGVsc2UgaWYgKHZhbCA9PT0gMykgew0KICAgICAgICB0aGlzLndhcm5pbmdMZXZlbCA9IDMNCiAgICAgIH0gZWxzZSBpZiAodmFsID09PSA0KSB7DQogICAgICAgIHRoaXMud2FybmluZ0xldmVsID0gNA0KICAgICAgfSBlbHNlIGlmICh2YWwgPT09IDUpIHsNCiAgICAgICAgdGhpcy53YXJuaW5nTGV2ZWwgPSA1DQogICAgICB9DQogICAgfSwNCiAgICBjaG9vc2VUcmlnZ2VyQ2xhc3ModmFsKSB7DQogICAgICBpZiAodmFsID09PSAyKSB7DQogICAgICAgIHRoaXMud2FybmluZ0xldmVsID0gNQ0KICAgICAgICB0aGlzLmhhbmRsZVR5cGUgPSA1DQogICAgICB9DQogICAgICBpZiAodmFsID09PSAxKSB7DQogICAgICAgIHRoaXMud2FybmluZ0xldmVsID0gMQ0KICAgICAgICB0aGlzLmhhbmRsZVR5cGUgPSAxDQogICAgICB9DQogICAgfSwNCiAgICBzdXJlQnV0dG9uKCkgew0KICAgICAgbGV0IHRoYXQgPSB0aGlzDQogICAgICB0aGF0Lm1vdW50VGFibGVEYXRhID0gW10NCiAgICAgIGxldCBkYXRhcyA9IHRoaXMuJHJlZnMubW9uaXRvclRhYmxlUmVmLmdldFNlbGVjdGlvbkRhdGEoKQ0KICAgICAgaWYgKGRhdGFzLmxlbmd0aCAhPT0gMSkgew0KICAgICAgICB0aGlzLiRYTW9kYWwubWVzc2FnZSh7IHN0YXR1czogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn6K+36YCJ5oup5LiA5p2h5pWw5o2u5pWw5o2u77yBJyB9KQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGNvbnNvbGUubG9nKGRhdGFzKQ0KICAgICAgdGhpcy5jclRlbXBsYXRlID0gZGF0YXNbMF0ucnVsZVRlbXBsYXRlTmFtZQ0KICAgICAgdGhpcy5idXNpbmVzc01vZHVsZSA9IGRhdGFzWzBdLmJ1c2luZXNzTW9kdWxlTmFtZQ0KICAgICAgdGhpcy5idXNpbmVzc0Z1bmN0aW9uID0gZGF0YXNbMF0uYnVzaW5lc3NGdW5jdGlvbk5hbWUNCiAgICAgIHRoaXMucmVndWxhdGlvbk1vZGVsQ29kZSA9IGRhdGFzWzBdLnJ1bGVUZW1wbGF0ZUNvZGUNCiAgICAgIHRoaXMuZmlSdWxlVHlwZUNvZGUgPSBkYXRhc1swXS5maVJ1bGVUeXBlQ29kZQ0KICAgICAgdGhpcy5maVJ1bGVUeXBlTmFtZSA9IGRhdGFzWzBdLmZpUnVsZVR5cGVOYW1lDQogICAgICBpZiAoZGF0YXNbMF0uZmlSdWxlVHlwZUNvZGUgJiYgZGF0YXNbMF0uZmlSdWxlVHlwZU5hbWUpIHsNCiAgICAgICAgdGhpcy5maVJ1bGVUeXBlQ29kZU5hbWUgPSAoKGRhdGFzWzBdLmZpUnVsZVR5cGVDb2RlICsgJycpLnNsaWNlKDAsIDEpID09PSAnMScgPyAn5Lit5aSuJyA6ICflnLDmlrknKSArICctJyArIGRhdGFzWzBdLmZpUnVsZVR5cGVOYW1lDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmZpUnVsZVR5cGVDb2RlTmFtZSA9ICcnDQogICAgICB9DQogICAgICAvLyB0aGlzLnJlZ3VsYXRpb25Nb2RlbE5hbWUgPSBkYXRhc1swXQ0KICAgICAgdGhpcy5ydWxlU2V0U2hvdyA9IGZhbHNlDQogICAgICB0aGlzLnJ1bGVEZXNTaG93ID0gdHJ1ZQ0KICAgICAgdGhpcy5hcHBTZXRTaG93ID0gZmFsc2UNCiAgICAgIHRoaXMuZWZmZWN0aXZlU2hvdyA9IGZhbHNlDQogICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gMQ0KICAgICAgdGhpcy5idXNpbmVzc1N5c3RlbUNvZGUgPSBkYXRhc1swXS5idXNpbmVzc1N5c3RlbUNvZGUNCiAgICAgIHRoaXMuY2hhbmdlU3lzQ29kZSh0aGlzLmJ1c2luZXNzU3lzdGVtQ29kZSkNCg0KICAgICAgdGhpcy5idXNpbmVzc01vZHVsZUNvZGUgPSBkYXRhc1swXS5idXNpbmVzc01vZHVsZUNvZGUNCiAgICAgIHRoaXMuY2hhbmdlTW9kQ29kZSh0aGlzLmJ1c2luZXNzTW9kdWxlQ29kZSkNCiAgICAgIGxldCBkYXRhczEgPSB0aGlzLiRyZWZzLm1vdW50VGFibGVSZWYuZ2V0U2VsZWN0aW9uRGF0YSgpDQogICAgICBjb25zb2xlLmxvZyhkYXRhczEpDQogICAgICBIdHRwTW9kdWxlLmdldFRlbXBsYXRlQnlDb2RlKHsgcnVsZVRlbXBsYXRlQ29kZTogZGF0YXNbMF0ucnVsZVRlbXBsYXRlQ29kZSB9KS50aGVuKHJlcyA9PiB7DQogICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAwMDAwMCcpIHsNCiAgICAgICAgICByZXMuZGF0YS5mdW5jdGlvbkluZm9MaXN0LmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICBsZXQgdGVtcE9iaiA9IHsNCiAgICAgICAgICAgICAgZnVuY3Rpb25OYW1lOiAnJywNCiAgICAgICAgICAgICAgZnVuY3Rpb25Db2RlOiAnJywNCiAgICAgICAgICAgICAgZnVuY3Rpb25QYXJhbWV0ZXI6ICcnLA0KICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsDQogICAgICAgICAgICAgIHJlbGF0aW9uOiAnMScsDQogICAgICAgICAgICAgIHBhcmFtVHlwZTogJzEnLA0KICAgICAgICAgICAgICBwYXJhbTogJycNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRlbXBPYmouZnVuY3Rpb25QYXJhbWV0ZXIgPSBpdGVtLmZ1bmN0aW9uUGFyYW1ldGVyDQogICAgICAgICAgICB0ZW1wT2JqLmRlc2NyaXB0aW9uID0gaXRlbS5kZXNjcmlwdGlvbg0KICAgICAgICAgICAgdGVtcE9iai5mdW5jdGlvbk5hbWUgPSBpdGVtLmZ1bmN0aW9uTmFtZQ0KICAgICAgICAgICAgdGVtcE9iai5mdW5jdGlvbkNvZGUgPSBpdGVtLmZ1bmN0aW9uQ29kZQ0KICAgICAgICAgICAgdGhhdC5tb3VudFRhYmxlRGF0YS5wdXNoKHRlbXBPYmopDQogICAgICAgICAgfSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGF0LiRtZXNzYWdlLndhcm5pbmcoJ+WKoOi9veWksei0pScpDQogICAgICAgIH0NCiAgICAgICAgdGhhdC50YWJsZUxvYWRpbmcgPSBmYWxzZQ0KICAgICAgfSkNCiAgICAgIGNvbnNvbGUubG9nKGRhdGFzKQ0KICAgIH0sDQogICAgY2FuY2VsQnV0dG9uKCkgeyBjb25zb2xlLmxvZygn5Y+W5raIJywgdGhpcy4kc3RvcmUuc3RhdGUuY3VyTmF2TW9kdWxlLmZfRnVsbE5hbWUuc3Vic3RyaW5nKDAsIDMpKSB9LA0KICAgIC8vIHRhYuWIh+aNog0KICAgIHRhYkNsaWNrKGluZGV4KSB7DQogICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gaW5kZXgNCiAgICAgIGlmICh0aGlzLmFjdGl2ZUluZGV4ID09PSAwKSB7DQogICAgICAgIHRoaXMucnVsZVNldFNob3cgPSB0cnVlDQogICAgICAgIHRoaXMucnVsZURlc1Nob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLmFwcFNldFNob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLmVmZmVjdGl2ZVNob3cgPSBmYWxzZQ0KICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZUluZGV4ID09PSAxKSB7DQogICAgICAgIHRoaXMucnVsZVNldFNob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLnJ1bGVEZXNTaG93ID0gdHJ1ZQ0KICAgICAgICB0aGlzLmFwcFNldFNob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLmVmZmVjdGl2ZVNob3cgPSBmYWxzZQ0KICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZUluZGV4ID09PSAyKSB7DQogICAgICAgIHRoaXMucnVsZVNldFNob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLnJ1bGVEZXNTaG93ID0gZmFsc2UNCiAgICAgICAgdGhpcy5hcHBTZXRTaG93ID0gdHJ1ZQ0KICAgICAgICB0aGlzLmVmZmVjdGl2ZVNob3cgPSBmYWxzZQ0KICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZUluZGV4ID09PSAzKSB7DQogICAgICAgIHRoaXMucnVsZVNldFNob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLnJ1bGVEZXNTaG93ID0gZmFsc2UNCiAgICAgICAgdGhpcy5hcHBTZXRTaG93ID0gZmFsc2UNCiAgICAgICAgdGhpcy5lZmZlY3RpdmVTaG93ID0gdHJ1ZQ0KICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZUluZGV4ID09PSA0KSB7DQogICAgICAgIHRoaXMucnVsZVNldFNob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLnJ1bGVEZXNTaG93ID0gZmFsc2UNCiAgICAgICAgdGhpcy5hcHBTZXRTaG93ID0gZmFsc2UNCiAgICAgICAgdGhpcy5lZmZlY3RpdmVTaG93ID0gZmFsc2UNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldFRhYmxlRGF0YSh2YWwpIHsNCiAgICAgIGxldCB0aGF0ID0gdGhpcw0KICAgICAgY29uc29sZS5sb2coJ2dldFRhYmxlRGF0YScsIHRoYXQuc2VhcmNoRGF0YUxpc3QpDQogICAgICB0aGF0LnRhYmxlTG9hZGluZyA9IHRydWUNCiAgICAgIGxldCBwYXJhbSA9IHsNCiAgICAgICAgcGFnZTogMSwNCiAgICAgICAgcGFnZVNpemU6IDUwMCwNCiAgICAgICAgLi4udGhhdC5zZWFyY2hEYXRhTGlzdA0KICAgICAgfQ0KICAgICAgSHR0cE1vZHVsZS5nZXRQYWdlUXVlcnkocGFyYW0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMDAwMDAwJyAmJiByZXMuZGF0YS5yZXN1bHRzKSB7DQogICAgICAgICAgdGhhdC5vcGVyYXRpb25UYWJsZURhdGEgPSByZXMuZGF0YS5yZXN1bHRzDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhhdC4kbWVzc2FnZS53YXJuaW5nKCfliqDovb3lpLHotKUnKQ0KICAgICAgICB9DQogICAgICAgIHRoYXQudGFibGVMb2FkaW5nID0gZmFsc2UNCiAgICAgIH0pDQogICAgfSwNCiAgICBvbk5vZGVDaGVja0NsaWNrKGRhdGEpIHsNCiAgICAgIGNvbnNvbGUubG9nKGRhdGEubm9kZXMpDQogICAgICBsZXQgYXJyID0gW10NCg0KICAgICAgbGV0IHJlZ3VsYXRpb25UeXBlID0gdGhpcy4kc3RvcmUuc3RhdGUuY3VyTmF2TW9kdWxlLmZfRnVsbE5hbWUuc3Vic3RyaW5nKDAsIDMpDQogICAgICBpZiAocmVndWxhdGlvblR5cGUgPT09ICfns7vnu5/nuqcnKSB7DQogICAgICAgIGRhdGEubm9kZXMuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICBpZiAoaXRlbS5pc2xlYWYpIHsNCiAgICAgICAgICAgIGxldCBvYmogPSB7DQogICAgICAgICAgICAgIG1vZkRpdkNvZGU6ICcnLA0KICAgICAgICAgICAgICBhZ2VuY3lDb2RlOiAnJywNCiAgICAgICAgICAgICAgbW9mRGl2OiAnJw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgb2JqLm1vZkRpdklkID0gaXRlbS5pZA0KICAgICAgICAgICAgb2JqLm1vZkRpdkNvZGUgPSBpdGVtLmNvZGUNCiAgICAgICAgICAgIGFyci5wdXNoKG9iaikNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9IGVsc2UgaWYgKHJlZ3VsYXRpb25UeXBlID09PSAn6YOo6Zeo57qnJykgew0KICAgICAgICBkYXRhLm5vZGVzLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgaWYgKGl0ZW0uaXNsZWFmKSB7DQogICAgICAgICAgICBsZXQgb2JqID0gew0KICAgICAgICAgICAgICBtb2ZEaXZDb2RlOiAnJywNCiAgICAgICAgICAgICAgYWdlbmN5Q29kZTogJycNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG9iai5tb2ZEaXZJZCA9IGl0ZW0uaWQNCiAgICAgICAgICAgIG9iai5hZ2VuY3lDb2RlID0gaXRlbS5jb2RlDQogICAgICAgICAgICBhcnIucHVzaChvYmopDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfSBlbHNlIGlmIChyZWd1bGF0aW9uVHlwZSA9PT0gJ+i0ouaUv+e6pycpIHsNCiAgICAgICAgZGF0YS5ub2Rlcy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgIGlmIChpdGVtLmlzbGVhZikgew0KICAgICAgICAgICAgbGV0IG9iaiA9IHsNCiAgICAgICAgICAgICAgbW9mRGl2Q29kZTogJycsDQogICAgICAgICAgICAgIGFnZW5jeUNvZGU6ICcnDQogICAgICAgICAgICB9DQogICAgICAgICAgICBvYmoubW9mRGl2SWQgPSBpdGVtLmlkDQogICAgICAgICAgICBvYmouYWdlbmN5Q29kZSA9IGl0ZW0uY29kZQ0KICAgICAgICAgICAgYXJyLnB1c2gob2JqKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIGNvbnNvbGUubG9nKCdhcnInLCBhcnIpDQogICAgICB0aGlzLnNjb3BlID0gYXJyDQogICAgfSwNCiAgICBnZXRDaGlsZHJlbk5ld0RhdGEoZGF0YXMpIHsNCiAgICAgIGxldCB0aGF0ID0gdGhpcw0KICAgICAgZGF0YXMuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaXRlbS5sYWJlbCA9IGl0ZW0ubmFtZQ0KICAgICAgICAvLyBpdGVtLmNvZGUgPSBpdGVtLmlkDQogICAgICAgIC8vIGl0ZW0uZ3VpZCA9IGl0ZW0uaWQNCiAgICAgICAgLy8gaXRlbS5uYW1lID0gaXRlbS50ZXh0IHx8IGl0ZW0ubmFtZQ0KICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbikgew0KICAgICAgICAgIHRoYXQuZ2V0Q2hpbGRyZW5OZXdEYXRhKGl0ZW0uY2hpbGRyZW4pDQogICAgICAgIH0NCiAgICAgIH0pDQoNCiAgICAgIHJldHVybiBkYXRhcw0KICAgIH0sDQogICAgc2VhcmNoKG9iaikgew0KICAgICAgY29uc29sZS5sb2cob2JqKQ0KICAgICAgdGhpcy5zZWFyY2hEYXRhTGlzdC5ydWxlVGVtcGxhdGVOYW1lID0gb2JqLnJ1bGVUZW1wbGF0ZU5hbWUNCiAgICAgIHRoaXMuc2VhcmNoRGF0YUxpc3QuYnVzaW5lc3NTeXN0ZW1Db2RlID0gb2JqLmJ1c2luZXNzU3lzdGVtX2NvZGUNCiAgICAgIHRoaXMuc2VhcmNoRGF0YUxpc3QuYnVzaW5lc3NNb2R1bGVDb2RlID0gb2JqLmJ1c2luZXNzTW9kdWxlX2NvZGUNCiAgICAgIHRoaXMuc2VhcmNoRGF0YUxpc3QuYnVzaW5lc3NGdW5jdGlvbkNvZGUgPSBvYmouYnVzaW5lc3NGdW5jdGlvbl9jb2RlDQoNCiAgICAgIHRoaXMuc2VhcmNoRGF0YUxpc3QuYnVzaW5lc3NNb2R1bGVOYW1lID0gb2JqLmJ1c2luZXNzTW9kdWxlTmFtZQ0KICAgICAgdGhpcy5zZWFyY2hEYXRhTGlzdC5idXNpbmVzc1N5c3RlbU5hbWUgPSBvYmouYnVzaW5lc3NTeXN0ZW1OYW1lDQogICAgICB0aGlzLnNlYXJjaERhdGFMaXN0LmJ1c2luZXNzRnVuY3Rpb25OYW1lID0gb2JqLmJ1c2luZXNzRnVuY3Rpb25OYW1lDQogICAgICB0aGlzLmdldFRhYmxlRGF0YSgpDQogICAgfSwNCiAgICAvLyDpq5jnuqfmn6Xor6LkuIvmi4nmoYYNCiAgICBpdGVtQ2hhbmdlKG9iaiwgZm9ybSkgew0KICAgICAgY29uc29sZS5sb2cob2JqLCBmb3JtKQ0KICAgICAgaWYgKG9iai5wcm9wZXJ0eSA9PT0gJ2J1c2luZXNzU3lzdGVtJykgew0KICAgICAgICB0aGlzLmdldEJ1c2luZXNzTW9kZWxDb2RlRGF0YXMoeyBidXNpbmVzc1R5cGU6ICcyJywgcGFyZW50SWQ6IG9iai5ub2RlLmlkIH0pDQogICAgICB9DQogICAgICBpZiAob2JqLnByb3BlcnR5ID09PSAnYnVzaW5lc3NNb2R1bGUnKSB7DQogICAgICAgIHRoaXMuZ2V0QnVzaW5lc3NNb2RlbENvZGVEYXRhcyh7IGJ1c2luZXNzVHlwZTogJzMnLCBwYXJlbnRJZDogb2JqLm5vZGUuaWQgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldENoaWxkcmVuRGF0YShkYXRhcykgew0KICAgICAgbGV0IHRoYXQgPSB0aGlzDQogICAgICBkYXRhcy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBpdGVtLmNvZGUgPSBpdGVtLmlkDQogICAgICAgIGl0ZW0ubmFtZSA9IGl0ZW0uYnVzaW5lc3NOYW1lDQogICAgICAgIGl0ZW0ubGFiZWwgPSBpdGVtLmlkICsgJy0nICsgaXRlbS5idXNpbmVzc05hbWUNCiAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHsNCiAgICAgICAgICB0aGF0LmdldENoaWxkcmVuRGF0YShpdGVtLmNoaWxkcmVuKQ0KICAgICAgICB9DQogICAgICB9KQ0KDQogICAgICByZXR1cm4gZGF0YXMNCiAgICB9LA0KICAgIC8vIC8vIOiOt+WPluS4muWKoeaooeWdlw0KICAgIGdldEJ1c2luZXNzTW9kZWxDb2RlRGF0YXModmFsKSB7DQogICAgICBsZXQgdGhhdCA9IHRoaXMNCiAgICAgIEh0dHBNb2R1bGUuZ2V0QnVzaW5lc3NUcmVlRGF0YSh2YWwpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMDAwMDAwJyAmJiByZXMuZGF0YS5yZXN1bHRzKSB7DQogICAgICAgICAgbGV0IHRyZWVSZXNkYXRhID0gdGhhdC5nZXRDaGlsZHJlbkRhdGEocmVzLmRhdGEucmVzdWx0cykNCiAgICAgICAgICBjb25zdCByZXN1bHQgPSBbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIGlkOiAncm9vdCcsDQogICAgICAgICAgICAgIGxhYmVsOiAn5YWo6YOoJywNCiAgICAgICAgICAgICAgY29kZTogJ3Jvb3QnLA0KICAgICAgICAgICAgICBuYW1lOiAn5YWo6YOoJywNCiAgICAgICAgICAgICAgaXNsZWFmOiAnMCcsDQogICAgICAgICAgICAgIGNoaWxkcmVuOiB0cmVlUmVzZGF0YQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIF0NCiAgICAgICAgICBpZiAodmFsLmJ1c2luZXNzVHlwZSA9PT0gJzEnKSB7DQogICAgICAgICAgICB0aGF0LnF1ZXJ5Q29uZmlnLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgIGlmIChpdGVtLmZpZWxkID09PSAnYnVzaW5lc3NTeXN0ZW0nKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdCcsIHJlc3VsdCkNCiAgICAgICAgICAgICAgICBpdGVtLml0ZW1SZW5kZXIub3B0aW9ucyA9IHJlc3VsdA0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0gZWxzZSBpZiAodmFsLmJ1c2luZXNzVHlwZSA9PT0gJzInKSB7DQogICAgICAgICAgICB0aGF0LnF1ZXJ5Q29uZmlnLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgIGlmIChpdGVtLmZpZWxkID09PSAnYnVzaW5lc3NNb2R1bGUnKSB7DQogICAgICAgICAgICAgICAgaXRlbS5pdGVtUmVuZGVyLm9wdGlvbnMgPSByZXN1bHQNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9IGVsc2UgaWYgKHZhbC5idXNpbmVzc1R5cGUgPT09ICczJykgew0KICAgICAgICAgICAgdGhhdC5xdWVyeUNvbmZpZy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICBpZiAoaXRlbS5maWVsZCA9PT0gJ2J1c2luZXNzRnVuY3Rpb24nKSB7DQogICAgICAgICAgICAgICAgaXRlbS5pdGVtUmVuZGVyLm9wdGlvbnMgPSByZXN1bHQNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhhdC4kbWVzc2FnZS53YXJuaW5nKCfliqDovb3lpLHotKUnKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgcmVzZXRGb3JtRGF0YUxpc3RNZXNzYWdlKCkgew0KICAgICAgbGV0IHBheW1lbnRzQXJyID0gWydtb25pdG9yZScsICdhZ2VuY3lfY29kZScsICdwcm9fbmFtZScsICdiZ3RfdHlwZV9jb2RlJywgJ2JndF9zb3VyY2VfY29kZScsICdnb3ZfYmd0X2Vjb19jb2RlJywgJ2V4cF9mdW5jX2NvZGUnLCAnY29yX2JndF9kb2Nfbm9fbmFtZSddDQogICAgICBwYXltZW50c0Fyci5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICB0aGlzLmZvcm1EYXRhc1tpdGVtICsgJ19fdmlld1NvcnQnXSA9ICcnDQogICAgICAgIHRoaXMuZm9ybURhdGFzW2l0ZW0gKyAnY29kZSddID0gJycNCiAgICAgICAgdGhpcy5mb3JtRGF0YXNbaXRlbSArICdjb2RlX19tdWx0aXBsZSddID0gW10NCiAgICAgICAgdGhpcy5mb3JtRGF0YXNbaXRlbSArICdpZCddID0gJycNCiAgICAgICAgdGhpcy5mb3JtRGF0YXNbaXRlbSArICdpZF9fbXVsdGlwbGUnXSA9IFtdDQogICAgICAgIHRoaXMuZm9ybURhdGFzW2l0ZW0gKyAnbmFtZSddID0gJycNCiAgICAgICAgdGhpcy5mb3JtRGF0YXNbaXRlbSArICduYW1lX19tdWx0aXBsZSddID0gW10NCiAgICAgIH0pDQogICAgICB0aGlzLmZvcm1EYXRhcy5wYXltZW50ID0gW10NCiAgICAgIHRoaXMuZm9ybURhdGFzLnBheW1lbnRfX211bHRpcGxlID0gW10NCiAgICAgIHRoaXMuZm9ybURhdGFzLmFnZW5jeV9jb2RlID0gW10NCiAgICAgIHRoaXMuZm9ybURhdGFzLnByb19uYW1lID0gW10NCiAgICAgIHRoaXMuZm9ybURhdGFzLmdvdl9iZ3RfZWNvX2NvZGUgPSBbXQ0KICAgICAgdGhpcy5mb3JtRGF0YXMuZXhwX2Z1bmNfY29kZSA9IFtdDQogICAgICB0aGlzLmZvcm1EYXRhcy5jb3JfYmd0X2RvY19ub19uYW1lID0gW10NCiAgICAgIHRoaXMuZm9ybURhdGFzLmRlcF9iZ3RfZWNvX2NvZGUgPSBbXQ0KICAgIH0sDQogICAgZGlhbG9nQ2xvc2UoKSB7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLnBheW1lbnRMZW4pDQogICAgICB0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2Uuc3BsaWNlKDEsIHRoaXMucGF5bWVudExlbikNCiAgICAgIHRoaXMucGF5bWVudExlbiA9IDANCiAgICAgIGxldCBmb3JtID0gdGhpcy4kcmVmcy5tZXNzYWdlRm9ybQ0KICAgICAgZm9ybS5jbGVhclZhbGlkYXRlKCkNCiAgICAgIHRoaXMucmVzZXRGb3JtRGF0YUxpc3RNZXNzYWdlKCkNCiAgICAgIHRoaXMuZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBpdGVtLml0ZW1SZW5kZXIucHJvcHMuZGlzYWJsZWQgPSBmYWxzZQ0KICAgICAgfSkNCiAgICAgIHRoaXMuJHBhcmVudC5kaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICAgIHRoaXMuJHBhcmVudC5kaWFsb2dWaXNpYmxlUnVsZXMgPSBmYWxzZQ0KICAgICAgdGhpcy4kcGFyZW50Py5xdWVyeVRhYmxlRGF0YXM/LigpDQogICAgICAvLyDph43nva4NCiAgICAgIHRoaXMuc2VhcmNoRGF0YUxpc3QucnVsZVRlbXBsYXRlTmFtZSA9ICcnDQogICAgICB0aGlzLnNlYXJjaERhdGFMaXN0LmJ1c2luZXNzU3lzdGVtTmFtZSA9ICcnDQogICAgICB0aGlzLnNlYXJjaERhdGFMaXN0LmJ1c2luZXNzTW9kdWxlTmFtZSA9ICcnDQogICAgfSwNCiAgICAvLyDlpITnkIblrZfnrKbkuLINCiAgICBkZWFsd2l0aFN0cihzdHIpIHsNCiAgICAgIGxldCByZXN1bHQgPSAnJw0KICAgICAgaWYgKHN0cikgew0KICAgICAgICBpZiAoc3RyLnN1YnN0cmluZyhzdHIubGVuZ3RoIC0gNykgPT09ICcwMDAwMDAwJykgew0KICAgICAgICAgIHJlc3VsdCA9ICc2MScNCiAgICAgICAgfSBlbHNlIGlmIChzdHIuc3Vic3RyaW5nKHN0ci5sZW5ndGggLSA1KSA9PT0gJzAwMDAwJykgew0KICAgICAgICAgIHJlc3VsdCA9IHN0ci5zdWJzdHJpbmcoMCwgNCkNCiAgICAgICAgfSBlbHNlIGlmIChzdHIuc3Vic3RyaW5nKHN0ci5sZW5ndGggLSAzKSA9PT0gJzAwMCcpIHsNCiAgICAgICAgICByZXN1bHQgPSBzdHIuc3Vic3RyaW5nKDAsIDYpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmVzdWx0ID0gc3RyDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHJlc3VsdA0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0Q2hlY2tEYXRhKGRhdGFBcnIsIGRhdGEpIHsNCiAgICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaWYgKGl0ZW0uaXNsZWFmID09PSAnMScpIHsNCiAgICAgICAgICBsZXQgb2JqID0gew0KICAgICAgICAgICAgbW9mRGl2Q29kZTogJycsDQogICAgICAgICAgICBhZ2VuY3lDb2RlOiAnJywNCiAgICAgICAgICAgIG1vZkRpdjogJycNCiAgICAgICAgICB9DQogICAgICAgICAgb2JqLm1vZkRpdklkID0gaXRlbS5jb2RlDQogICAgICAgICAgb2JqLm1vZkRpdkNvZGUgPSBpdGVtLm5hbWUuc3BsaXQoJy0nKVswXQ0KICAgICAgICAgIGRhdGFBcnIucHVzaChvYmopDQogICAgICAgIH0NCiAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHsNCiAgICAgICAgICB0aGlzLmdldENoZWNrRGF0YShkYXRhQXJyLCBpdGVtLmNoaWxkcmVuKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0UHJvdmluY2UoZGF0YSkgew0KICAgICAgZGF0YS5jaGlsZHJlbi5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBpZiAoaXRlbS5wcm92aW5jZSA9PT0gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ucHJvdmluY2UpIHsNCiAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ucHJvdmluY2UgPT09ICc2MTAwMDAwMDAnKSB7DQogICAgICAgICAgICBsZXQgYXJyID0gW10NCiAgICAgICAgICAgIGFyci5wdXNoKGRhdGEpDQogICAgICAgICAgICB0aGlzLnRyZWVEYXRhID0gdGhpcy5nZXRDaGlsZHJlbk5ld0RhdGEoYXJyKQ0KICAgICAgICAgICAgbGV0IGRhdGFBcnIgPSBbXQ0KICAgICAgICAgICAgdGhpcy5nZXRDaGVja0RhdGEoZGF0YUFyciwgdGhpcy50cmVlRGF0YSkNCiAgICAgICAgICAgIHRoaXMuc2NvcGUgPSBkYXRhQXJyDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGxldCBhcnIgPSBbXQ0KICAgICAgICAgICAgYXJyLnB1c2goaXRlbSkNCiAgICAgICAgICAgIHRoaXMudHJlZURhdGEgPSB0aGlzLmdldENoaWxkcmVuTmV3RGF0YShhcnIpDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7DQogICAgICAgICAgICAvLyBsZXQgYXJyID0gW10NCiAgICAgICAgICAgIC8vIGFyci5wdXNoKGl0ZW0pDQogICAgICAgICAgICB0aGlzLmdldFByb3ZpbmNlKGl0ZW0pDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0Q2hpbGRyZW5OZXdEYXRhMShkYXRhcykgew0KICAgICAgbGV0IHRoYXQgPSB0aGlzDQogICAgICBkYXRhcy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBpdGVtLmxhYmVsID0gaXRlbS5uYW1lDQogICAgICAgIGl0ZW0uY29kZSA9IGl0ZW0uaWQNCiAgICAgICAgaXRlbS5ndWlkID0gaXRlbS5pZA0KICAgICAgICAvLyBpdGVtLm5hbWUgPSBpdGVtLnRleHQNCiAgICAgICAgaXRlbS5kaXNhYmxlZCA9IHRydWUNCiAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHsNCiAgICAgICAgICB0aGF0LmdldENoaWxkcmVuTmV3RGF0YTEoaXRlbS5jaGlsZHJlbikNCiAgICAgICAgfQ0KICAgICAgfSkNCg0KICAgICAgcmV0dXJuIGRhdGFzDQogICAgfSwNCiAgICAvLyDojrflj5bnlJ/mlYjojIPlm7QNCiAgICBnZXRXaGVyZVRyZWUoKSB7DQogICAgICB0aGlzLmRlZmF1bHRDaGVja2VkS2V5cyA9IFtdDQogICAgICAvLyBsZXQgdGhhdCA9IHRoaXMNCiAgICAgIGxldCByZXN1bHQgPSB0aGlzLmRlYWx3aXRoU3RyKHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLnByb3ZpbmNlKQ0KICAgICAgLy8gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ub3JnQ29kZQ0KICAgICAgbGV0IHBhcmFtID0gew0KICAgICAgICB3aGVyZXNxbDogJ2FuZCBjb2RlIGxpa2UgXCcnICsgcmVzdWx0ICsgJyVcJycsDQogICAgICAgIGVsZW1lbnRDb2RlOiAnYWRtZGl2JywNCiAgICAgICAgLy8gZWxlbWVudENvZGU6ICdBR0VOQ1knLA0KICAgICAgICB5ZWFyOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby55ZWFyLA0KICAgICAgICBwcm92aW5jZTogdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ucHJvdmluY2UNCiAgICAgIH0NCiAgICAgIGxldCByZWd1bGF0aW9uVHlwZSA9IHRoaXMuJHN0b3JlLnN0YXRlLmN1ck5hdk1vZHVsZS5mX0Z1bGxOYW1lPy5zdWJzdHJpbmcoMCwgMykNCiAgICAgIGlmIChyZWd1bGF0aW9uVHlwZSA9PT0gJ+mDqOmXqOe6pycpIHsNCiAgICAgICAgcGFyYW0uZWxlbWVudENvZGUgPSAnREVQQVJUTUVOVCcNCiAgICAgICAgcGFyYW0ud2hlcmVzcWwgPSAnYW5kIGNvZGUgbGlrZSBcJycgKyB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby5vcmdjb2RlICsgJyVcJycNCiAgICAgIH0NCiAgICAgIGlmIChyZWd1bGF0aW9uVHlwZSA9PT0gJ+i0ouaUv+e6pycpIHsNCiAgICAgICAgcGFyYW0uZWxlbWVudENvZGUgPSAnQUdFTkNZJw0KICAgICAgICBwYXJhbS53aGVyZXNxbCA9ICdhbmQgcHJvdmluY2UgPScgKyB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby5wcm92aW5jZQ0KICAgICAgfQ0KICAgICAgSHR0cE1vZHVsZS5nZXRUcmVld2hlcmUocGFyYW0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgLy8gY29uc29sZS5sb2coJ3RoYXQuZ2V0Q2hpbGRyZW5OZXdEYXRhKHJlcy5kYXRhKScsIHRoYXQuZ2V0Q2hpbGRyZW5OZXdEYXRhKHJlcy5kYXRhKSkNCiAgICAgICAgLy8gdGhpcy50cmVlRGF0YSA9IHRoaXMuZ2V0Q2hpbGRyZW5OZXdEYXRhKHJlcy5kYXRhKQ0KICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSwgcmVndWxhdGlvblR5cGUpDQogICAgICAgIGlmIChyZWd1bGF0aW9uVHlwZSA9PT0gJ+mDqOmXqOe6pycgfHwgcmVndWxhdGlvblR5cGUgPT09ICfotKLmlL/nuqcnKSB7DQogICAgICAgICAgLy8gbGV0IHRyZWVSZXNkYXRhID0gdGhpcy5nZXRDaGlsZHJlbk5ld0RhdGExKHJlcy5kYXRhKQ0KICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgaWQ6ICdyb290JywNCiAgICAgICAgICAgICAgbGFiZWw6ICflhajpg6gnLA0KICAgICAgICAgICAgICBjb2RlOiAncm9vdCcsDQogICAgICAgICAgICAgIGlzbGVhZjogJzAnLA0KICAgICAgICAgICAgICBkaXNhYmxlZDogdGhpcy4kcGFyZW50LmRpYWxvZ1RpdGxlID09PSAn5p+l55yL6K+m5oOFJywNCiAgICAgICAgICAgICAgbmFtZTogJ+WFqOmDqCcsDQogICAgICAgICAgICAgIGNoaWxkcmVuOiB0aGlzLiRwYXJlbnQuZGlhbG9nVGl0bGUgPT09ICfmn6XnnIvor6bmg4UnID8gdGhpcy5nZXRDaGlsZHJlbk5ld0RhdGExKHJlcy5kYXRhKSA6IHRoaXMuZ2V0Q2hpbGRyZW5OZXdEYXRhKHJlcy5kYXRhKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIF0NCiAgICAgICAgICB0aGlzLnRyZWVEYXRhID0gcmVzdWx0DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy50cmVlRGF0YSA9IHRoaXMuJHBhcmVudC5kaWFsb2dUaXRsZSA9PT0gJ+afpeeci+ivpuaDhScgPyB0aGlzLmdldENoaWxkcmVuTmV3RGF0YTEocmVzLmRhdGEpIDogdGhpcy5nZXRDaGlsZHJlbk5ld0RhdGEocmVzLmRhdGEpDQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMuJHBhcmVudC5kaWFsb2dUaXRsZSAhPT0gJ+aWsOWinicpIHsNCiAgICAgICAgICBsZXQgdGVtcEFyciA9IFtdDQogICAgICAgICAgLy8gbGV0IHJlZ3VsYXRpb25UeXBlID0gdGhpcy4kc3RvcmUuc3RhdGUuY3VyTmF2TW9kdWxlLmZfRnVsbE5hbWUuc3Vic3RyaW5nKDAsIDMpDQogICAgICAgICAgdGhpcy4kcGFyZW50LkRldGFpbERhdGEucmVndWxhdGlvblNjb3BlPy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgbGV0IHN0ciA9IGl0ZW0ubW9mRGl2SWQudG9TdHJpbmcoKQ0KICAgICAgICAgICAgLy8gaWYgKHJlZ3VsYXRpb25UeXBlID09PSAn6YOo6Zeo57qnJykgew0KICAgICAgICAgICAgLy8gICBzdHIgPSBpdGVtLm1vZkRpdklkLnRvU3RyaW5nKCkNCiAgICAgICAgICAgIC8vIH0gZWxzZSB7DQogICAgICAgICAgICAvLyAgIHN0ciA9IGl0ZW0ubW9mRGl2SWQudG9TdHJpbmcoKQ0KICAgICAgICAgICAgLy8gfQ0KICAgICAgICAgICAgdGVtcEFyci5wdXNoKHN0cikNCiAgICAgICAgICB9KQ0KDQogICAgICAgICAgLy8gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucmVndWxhdGlvblNjb3BlLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgLy8gICBsZXQgc3RyID0gaXRlbS5tb2ZEaXZDb2RlLnRvU3RyaW5nKCkNCiAgICAgICAgICAvLyAgIHRlbXBBcnIucHVzaChzdHIpDQogICAgICAgICAgLy8gfSkNCiAgICAgICAgICBjb25zb2xlLmxvZyh0ZW1wQXJyKQ0KICAgICAgICAgIHRoaXMuJHJlZnMucmlnaHRUcmVlLnRyZWVPcHRpb25GbigpLnNldENoZWNrZWRLZXlzKHRlbXBBcnIpDQogICAgICAgICAgdGhpcy5kZWZhdWx0Q2hlY2tlZEtleXMgPSB0ZW1wQXJyDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgbGV0IHRlbXBBcnIgPSBbXQ0KICAgICAgICAgIHRlbXBBcnIucHVzaCgncm9vdCcpDQogICAgICAgICAgbGV0IGFyciA9IFtdDQogICAgICAgICAgdGhpcy5zY29wZSA9IHRoaXMuZ2V0QXJyKHRoaXMudHJlZURhdGEsIGFycikNCiAgICAgICAgICBpZiAocmVndWxhdGlvblR5cGUgPT09ICfpg6jpl6jnuqcnKSB7DQogICAgICAgICAgICBhcnIgPSBbXQ0KICAgICAgICAgICAgdGhpcy5zY29wZSA9IHRoaXMuZ2V0QXJyKHRoaXMudHJlZURhdGEsIGFycikNCiAgICAgICAgICB9IGVsc2UgaWYgKHJlZ3VsYXRpb25UeXBlID09PSAn6LSi5pS/57qnJykgew0KICAgICAgICAgICAgYXJyID0gW10NCiAgICAgICAgICAgIHRoaXMuc2NvcGUgPSB0aGlzLmdldEFycjEodGhpcy50cmVlRGF0YSwgYXJyKQ0KICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5zY29wZSkNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgbGV0IGRhdGFBcnIgPSBbXQ0KICAgICAgICAgICAgdGhpcy5zY29wZS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICBsZXQgc3RyID0gJycNCiAgICAgICAgICAgICAgaWYgKHJlZ3VsYXRpb25UeXBlICE9PSAn57O757uf57qnJykgew0KICAgICAgICAgICAgICAgIHN0ciA9IGl0ZW0uYWdlbmN5SWQudG9TdHJpbmcoKQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHN0ciA9IGl0ZW0ubW9mRGl2SWQudG9TdHJpbmcoKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGRhdGFBcnIucHVzaChzdHIpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgdGhpcy4kcmVmcy5yaWdodFRyZWUudHJlZU9wdGlvbkZuKCkuc2V0Q2hlY2tlZEtleXMoZGF0YUFycikNCiAgICAgICAgICAgIHRoaXMuZGVmYXVsdENoZWNrZWRLZXlzID0gZGF0YUFycg0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBnZXRBcnIoZGF0YSwgYXJyKSB7DQogICAgICBkYXRhLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGlmIChpdGVtLmlzbGVhZikgew0KICAgICAgICAgIGxldCBvYmogPSB7DQogICAgICAgICAgICBtb2ZEaXZDb2RlOiBpdGVtLmNvZGUsDQogICAgICAgICAgICBhZ2VuY3lDb2RlOiAnJywNCiAgICAgICAgICAgIG1vZkRpdklkOiBpdGVtLmlkDQogICAgICAgICAgfQ0KICAgICAgICAgIG9iai5hZ2VuY3lJZCA9IGl0ZW0uY29kZQ0KICAgICAgICAgIG9iai5hZ2VuY3lDb2RlID0gaXRlbS5jb2RlDQogICAgICAgICAgYXJyLnB1c2gob2JqKQ0KICAgICAgICB9DQogICAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7DQogICAgICAgICAgdGhpcy5nZXRBcnIoaXRlbS5jaGlsZHJlbiwgYXJyKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgcmV0dXJuIGFycg0KICAgIH0sDQogICAgZ2V0QXJyMShkYXRhLCBhcnIpIHsNCiAgICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaWYgKGl0ZW0uaXNsZWFmKSB7DQogICAgICAgICAgbGV0IG9iaiA9IHsNCiAgICAgICAgICAgIG1vZkRpdkNvZGU6ICcnLA0KICAgICAgICAgICAgYWdlbmN5Q29kZTogJycsDQogICAgICAgICAgICBtb2ZEaXZJZDogaXRlbS5pZA0KICAgICAgICAgIH0NCiAgICAgICAgICBvYmouYWdlbmN5SWQgPSBpdGVtLmlkDQogICAgICAgICAgb2JqLmFnZW5jeUNvZGUgPSBpdGVtLmNvZGUNCiAgICAgICAgICBhcnIucHVzaChvYmopDQogICAgICAgIH0NCiAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHsNCiAgICAgICAgICB0aGlzLmdldEFycjEoaXRlbS5jaGlsZHJlbiwgYXJyKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgcmV0dXJuIGFycg0KICAgIH0sDQogICAgLy8g5L+d5a2Y5paw5aKe55qE6K6h5YiS5L+h5oGvDQogICAgZG9JbnNlcnQoKSB7DQogICAgICAvLyDmoKHpqozliKTmlq0NCiAgICAgIGxldCBkYXRhcyA9IHRoaXMuJHJlZnMubW9uaXRvclRhYmxlUmVmLmdldFNlbGVjdGlvbkRhdGEoKQ0KICAgICAgaWYgKHRoaXMuJHBhcmVudC5kaWFsb2dUaXRsZSAhPT0gJ+S/ruaUuScgJiYgdGhpcy4kcGFyZW50LmRpYWxvZ1RpdGxlICE9PSAn5aSN5Yi2JyAmJiBkYXRhcy5sZW5ndGggIT09IDEpIHsNCiAgICAgICAgdGhpcy4kWE1vZGFsLm1lc3NhZ2UoeyBzdGF0dXM6ICd3YXJuaW5nJywgbWVzc2FnZTogJ+ivt+mAieaLqeS4gOadoeaooeadv+S/oeaBr++8gScgfSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICAvLyBpZiAodGhpcy5mb3JtRGF0YXMucGF5bWVudCA9PT0gJycpIHsNCiAgICAgIC8vICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nln7rnoYDopoHntKAnKQ0KICAgICAgLy8gICByZXR1cm4NCiAgICAgIC8vIH0NCiAgICAgIC8vIGlmICh0aGlzLmZvcm1EYXRhcy5wYXllZUFjY3ROYW1lID09PSAnJykgew0KICAgICAgLy8gICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+i+k+WFpeaUtuasvuS6uuWQjeensCcpDQogICAgICAvLyAgIHJldHVybg0KICAgICAgLy8gfQ0KICAgICAgLy8gaWYgKHRoaXMuZm9ybURhdGFzLnBheWVlQWNjdE5vID09PSAnJykgew0KICAgICAgLy8gICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+i+k+WFpeaUtuasvuS6uui0puWPtycpDQogICAgICAvLyAgIHJldHVybg0KICAgICAgLy8gfQ0KICAgICAgLy8gaWYgKHRoaXMuZm9ybURhdGFzLnVzZURlcyA9PT0gJycpIHsNCiAgICAgIC8vICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fovpPlhaXotYTph5HnlKjpgJQnKQ0KICAgICAgLy8gICByZXR1cm4NCiAgICAgIC8vIH0NCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZm9ybURhdGFzKQ0KICAgICAgLy8gbGV0IGlzR28gPSB0cnVlDQogICAgICAvLyB0aGlzLmZvcm1EYXRhcy5wYXltZW50LnNwbGl0KCcsJykuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgIC8vICAgaWYgKCF0aGlzLmZvcm1EYXRhc1t0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2VbMF0uaXRlbVJlbmRlci5vcHRpb25zW2l0ZW1dLm5hbWVdKSB7DQogICAgICAvLyAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6knICsgdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlWzBdLml0ZW1SZW5kZXIub3B0aW9uc1tpdGVtXS5sYWJlbCkNCiAgICAgIC8vICAgICBpc0dvID0gZmFsc2UNCiAgICAgIC8vICAgfQ0KICAgICAgLy8gfSkNCiAgICAgIC8vIGlmIChpc0dvID09PSBmYWxzZSkgew0KICAgICAgLy8gICByZXR1cm4NCiAgICAgIC8vIH0NCiAgICAgIGlmICghdGhpcy5tb25pdG9yUnVsZU5hbWUpIHsNCiAgICAgICAgdGhpcy4kWE1vZGFsLm1lc3NhZ2UoeyBzdGF0dXM6ICd3YXJuaW5nJywgbWVzc2FnZTogJ+ivt+i+k+WFpeinhOWImeWQjeensO+8gScgfSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQoNCiAgICAgIGlmICh0aGlzLmJ1c2luZXNzU3lzdGVtQ29kZSA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup5Lia5Yqh57O757ufJykNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBpZiAodGhpcy5idXNpbmVzc1N5c3RlbU5hbWUgPT09IG51bGwpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nkuJrliqHns7vnu58nKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmJ1c2luZXNzTW9kdWxlQ29kZSA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup5Lia5Yqh5qih5Z2XJykNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBpZiAoIXRoaXMuZmlSdWxlRGVzYykgew0KICAgICAgICB0aGlzLiRYTW9kYWwubWVzc2FnZSh7IHN0YXR1czogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn6K+35aGr5YaZ6KeE5YiZ5o+P6L+w77yBJyB9KQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlmICghdGhpcy5pbXBsRGVzYykgew0KICAgICAgICB0aGlzLiRYTW9kYWwubWVzc2FnZSh7IHN0YXR1czogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn6K+35aGr5YaZ6KeE5YiZ5L6d5o2u77yBJyB9KQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmJ1c2luZXNzTW9kdWxlTmFtZSA9PT0gbnVsbCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeS4muWKoeaooeWdlycpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMudHJpZ2dlckNsYXNzID09PSAxICYmICh0aGlzLmJ1c2luZXNzRnVuY3Rpb25Db2RlID09PSB1bmRlZmluZWQgfHwgdGhpcy5idXNpbmVzc0Z1bmN0aW9uQ29kZS5sZW5ndGggPT09IDApKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup5Lia5Yqh6I+c5Y2VJykNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICAvLyBpZiAodGhpcy5idXNpbmVzc0Z1bmN0aW9uTmFtZSA9PT0gbnVsbCkgew0KICAgICAgLy8gICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeS4muWKoeiPnOWNlScpDQogICAgICAvLyAgIHJldHVybg0KICAgICAgLy8gfQ0KICAgICAgaWYgKHRoaXMucnVsZUZsYWcgIT09IDAgJiYgIXRoaXMucnVsZUZsYWcpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nlh73mlbDpgLvovpEnKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIC8vIGlmICh0aGlzLndhcm5Mb2NhdGlvbikgew0KICAgICAgLy8gICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeaPkOmGkuS9jee9ricpDQogICAgICAvLyAgIHJldHVybg0KICAgICAgLy8gfQ0KICAgICAgaWYgKCF0aGlzLnBvbGljaWVzRGVzY3JpcHRpb24pIHsNCiAgICAgICAgdGhpcy4kWE1vZGFsLm1lc3NhZ2UoeyBzdGF0dXM6ICd3YXJuaW5nJywgbWVzc2FnZTogJ+ivt+mAieaLqemihOitpuaPkOekuu+8gScgfSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBjb25zb2xlLmxvZygndGhpcy5tb25pdG9yUnVsZU5hbWUubGVuZ3RoJywgdGhpcy5tb25pdG9yUnVsZU5hbWUubGVuZ3RoKQ0KICAgICAgaWYgKHRoaXMubW9uaXRvclJ1bGVOYW1lLmxlbmd0aCA+IDEyMCkgew0KICAgICAgICB0aGlzLiRYTW9kYWwubWVzc2FnZSh7IHN0YXR1czogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn6KeE5YiZ5ZCN56ew6ZW/5bqm5bqU5bCP5LqO562J5LqOMTIw5L2NJyB9KQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLnBvbGljaWVzRGVzY3JpcHRpb24ubGVuZ3RoID4gMjAwKSB7DQogICAgICAgIHRoaXMuJFhNb2RhbC5tZXNzYWdlKHsgc3RhdHVzOiAnd2FybmluZycsIG1lc3NhZ2U6ICfpooTorabmj5DnpLrplb/luqblupTlsI/kuo7nrYnkuo4yMDDkvY0nIH0pDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLmNyVGVtcGxhdGUpIHsNCiAgICAgICAgdGhpcy4kWE1vZGFsLm1lc3NhZ2UoeyBzdGF0dXM6ICd3YXJuaW5nJywgbWVzc2FnZTogJ+ivt+i+k+WFpeaooeadv+WQjeensCcgfSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBpZiAoIXRoaXMuYnVzaW5lc3NTeXN0ZW1Db2RlKSB7DQogICAgICAgIHRoaXMuJFhNb2RhbC5tZXNzYWdlKHsgc3RhdHVzOiAnd2FybmluZycsIG1lc3NhZ2U6ICfor7fpgInmi6nkuJrliqHns7vnu58nIH0pDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLmJ1c2luZXNzTW9kdWxlQ29kZSkgew0KICAgICAgICB0aGlzLiRYTW9kYWwubWVzc2FnZSh7IHN0YXR1czogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn6K+36YCJ5oup5Lia5Yqh5qih5Z2XJyB9KQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIC8vIGlmICghdGhpcy5idXNpbmVzc0Z1bmN0aW9uQ29kZSAmJiB0aGlzLnRyaWdnZXJDbGFzcyA9PT0gMSkgew0KICAgICAgLy8gICB0aGlzLiRYTW9kYWwubWVzc2FnZSh7IHN0YXR1czogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn6K+36YCJ5oup5Lia5Yqh6I+c5Y2VJyB9KQ0KICAgICAgLy8gICByZXR1cm4NCiAgICAgIC8vIH0NCiAgICAgIGlmICghdGhpcy5tb25pdG9yUnVsZU5hbWUpIHsNCiAgICAgICAgdGhpcy4kWE1vZGFsLm1lc3NhZ2UoeyBzdGF0dXM6ICd3YXJuaW5nJywgbWVzc2FnZTogJ+ivt+i+k+WFpeebkeaOp+inhOWImeWQjeensCcgfSkNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBpZiAoIXRoaXMucmVndWxhdGlvbkNsYXNzKSB7DQogICAgICAgIHRoaXMuJFhNb2RhbC5tZXNzYWdlKHsgc3RhdHVzOiAnd2FybmluZycsIG1lc3NhZ2U6ICfor7fpgInmi6nnm5HmjqfkuLvpopgnIH0pDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLndhcm5pbmdMZXZlbCkgew0KICAgICAgICB0aGlzLiRYTW9kYWwubWVzc2FnZSh7IHN0YXR1czogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn6K+36YCJ5oup6aKE6K2m57qn5YirJyB9KQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlmICghdGhpcy5oYW5kbGVUeXBlKSB7DQogICAgICAgIHRoaXMuJFhNb2RhbC5tZXNzYWdlKHsgc3RhdHVzOiAnd2FybmluZycsIG1lc3NhZ2U6ICfor7fpgInmi6nlpITnkIbmlrnlvI8nIH0pDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLnRyaWdnZXJDbGFzcykgew0KICAgICAgICB0aGlzLiRYTW9kYWwubWVzc2FnZSh7IHN0YXR1czogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn6K+36YCJ5oup6Kem5Y+R57G75Z6LJyB9KQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIC8vIGlmICghdGhpcy53YXJuTG9jYXRpb24pIHsNCiAgICAgIC8vICAgdGhpcy4kWE1vZGFsLm1lc3NhZ2UoeyBzdGF0dXM6ICd3YXJuaW5nJywgbWVzc2FnZTogJ+ivt+mAieaLqeaPkOmGkuS9jee9ricgfSkNCiAgICAgIC8vICAgcmV0dXJuDQogICAgICAvLyB9DQogICAgICAvLyBpZiAoIXRoaXMud2FyblR5cGUpIHsNCiAgICAgIC8vICAgdGhpcy4kWE1vZGFsLm1lc3NhZ2UoeyBzdGF0dXM6ICd3YXJuaW5nJywgbWVzc2FnZTogJ+ivt+mAieaLqemihOitpuexu+WIqycgfSkNCiAgICAgIC8vICAgcmV0dXJuDQogICAgICAvLyB9DQogICAgICAvLyBpZiAoIXRoaXMudXBsb2FkRmlsZSkgew0KICAgICAgLy8gICB0aGlzLiRYTW9kYWwubWVzc2FnZSh7IHN0YXR1czogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn6K+36YCJ5oup5piv5ZCm5LiK5Lyg6ZmE5Lu2JyB9KQ0KICAgICAgLy8gICByZXR1cm4NCiAgICAgIC8vIH0NCiAgICAgIGlmICghdGhpcy5zY29wZT8ubGVuZ3RoKSB7DQogICAgICAgIHRoaXMuJFhNb2RhbC5tZXNzYWdlKHsgc3RhdHVzOiAnd2FybmluZycsIG1lc3NhZ2U6ICfor7fpgInmi6nnlJ/mlYjojIPlm7QnIH0pDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgdGhpcy4kcmVmcy5tb3VudFRhYmxlUmVmLnZhbGlkYXRlKCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGlmIChPYmplY3Qua2V5cyhyZXMpLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICBsZXQgZXJyb3JzID0gT2JqZWN0LnZhbHVlcyhyZXMpDQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcnJvcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoeyB0eXBlOiAnd2FybmluZycsIG1lc3NhZ2U6IGVycm9yc1tpXVswXS5ydWxlLm1lc3NhZ2UgfSkNCiAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIGxldCB0aGF0ID0gdGhpcw0KICAgICAgbGV0IGRhdGFzMSA9IHRoaXMuJHJlZnMubW91bnRUYWJsZVJlZi5nZXRQdXJlVGFibGVEYXRhKCkuZnVsbERhdGENCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YXMxLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmIChkYXRhczFbaV0ucGFyYW0gPT09IG51bGwgfHwgZGF0YXMxW2ldLnBhcmFtID09PSAnJykgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoeyB0eXBlOiAnd2FybmluZycsIG1lc3NhZ2U6ICfmqKHmnb/vvJonICsgZGF0YXMxW2ldLmZ1bmN0aW9uTmFtZSArICcg5Y+C5pWw5YC85Li656m6JyB9KQ0KICAgICAgICAgIHJldHVybg0KICAgICAgICB9DQogICAgICB9DQogICAgICBsZXQgcmVndWxhdGlvblR5cGUgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUuZl9GdWxsTmFtZT8uc3Vic3RyaW5nKDAsIDMpDQogICAgICBjb25zb2xlLmxvZyh0aGF0LnNjb3BlKQ0KICAgICAgbGV0IGlzRnVsbCA9IDANCiAgICAgIGlmIChyZWd1bGF0aW9uVHlwZSA9PT0gJ+ezu+e7n+e6pycpIHsNCiAgICAgICAgcmVndWxhdGlvblR5cGUgPSAnMScNCiAgICAgICAgaWYgKHRoYXQuc2NvcGUubGVuZ3RoID09PSAyNzcpIHsNCiAgICAgICAgICBpc0Z1bGwgPSAxDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAocmVndWxhdGlvblR5cGUgPT09ICfpg6jpl6jnuqcnKSB7DQogICAgICAgIHJlZ3VsYXRpb25UeXBlID0gJzMnDQogICAgICB9IGVsc2UgaWYgKHJlZ3VsYXRpb25UeXBlID09PSAn6LSi5pS/57qnJykgew0KICAgICAgICByZWd1bGF0aW9uVHlwZSA9ICcyJw0KICAgICAgICBpZiAodGhhdC5zY29wZS5sZW5ndGggPT09IDI1MzYpIHsNCiAgICAgICAgICBpc0Z1bGwgPSAxDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGxldCBydWxlSWQgPSAnJw0KICAgICAgbGV0IHJ1bGVOYW1lID0gJycNCiAgICAgIGlmICh0aGF0LnJlZ3VsYXRpb25DbGFzcykgew0KICAgICAgICBsZXQgdmFsQXJyID0gdGhhdC5yZWd1bGF0aW9uQ2xhc3Muc3BsaXQoJy0nKQ0KICAgICAgICBydWxlTmFtZSA9IHZhbEFyclsxXQ0KICAgICAgICBydWxlSWQgPSB2YWxBcnJbMF0NCiAgICAgIH0NCiAgICAgIGNvbnNvbGUubG9nKHRoaXMucmVndWxhdGlvbkNsYXNzKQ0KICAgICAgbGV0IGZvcm1EYXRhcyA9IHRoaXMuJHJlZnMubWVzc2FnZUZvcm0uZm9ybURhdGFMaXN0SW4NCiAgICAgIGxldCBwYXJhbSA9IHsNCiAgICAgICAgJ3JlZ3VsYXRpb25DbGFzcyc6IHJ1bGVJZCwNCiAgICAgICAgJ3JlZ3VsYXRpb25DbGFzc05hbWUnOiBydWxlTmFtZSwNCiAgICAgICAgJ3RyaWdnZXJDbGFzcyc6IHRoYXQudHJpZ2dlckNsYXNzLA0KICAgICAgICAnYnVzaW5lc3NTeXN0ZW1Db2RlJzogdGhhdC5idXNpbmVzc1N5c3RlbUNvZGUsDQogICAgICAgICdidXNpbmVzc1N5c3RlbU5hbWUnOiB0aGF0LmJ1c2luZXNzU3lzdGVtTmFtZSwNCiAgICAgICAgJ2J1c2luZXNzTW9kdWxlQ29kZSc6IHRoYXQuYnVzaW5lc3NNb2R1bGVDb2RlLA0KICAgICAgICAnYnVzaW5lc3NNb2R1bGVOYW1lJzogdGhhdC5idXNpbmVzc01vZHVsZU5hbWUsDQogICAgICAgICdmaVJ1bGVUeXBlQ29kZSc6IHRoYXQuZmlSdWxlVHlwZUNvZGUsDQogICAgICAgICdmaVJ1bGVUeXBlTmFtZSc6IHRoYXQuZmlSdWxlVHlwZU5hbWUsDQogICAgICAgICdtZW51SWRMaXN0JzogdGhhdC5idXNpbmVzc0Z1bmN0aW9uQ29kZS50b1N0cmluZygpLCAvLyDlpJroj5zljZUNCiAgICAgICAgJ21lbnVOYW1lTGlzdCc6IHRoYXQuYnVzaW5lc3NGdW5jdGlvbk5hbWUudG9TdHJpbmcoKSwNCiAgICAgICAgLy8gJ2J1c2luZXNzRnVuY3Rpb25Db2RlJzogdGhhdC5idXNpbmVzc0Z1bmN0aW9uQ29kZSwNCiAgICAgICAgJ2RlcGFydG1lbnRDb2RlJzogdGhhdC5kZXBhcnRtZW50Q29kZSwNCiAgICAgICAgJ2RlcGFydG1lbnROYW1lJzogdGhhdC5kZXBhcnRtZW50TmFtZSwNCiAgICAgICAgLy8gJ2J1c2luZXNzRnVuY3Rpb25OYW1lJzogdGhhdC5idXNpbmVzc0Z1bmN0aW9uTmFtZSwNCiAgICAgICAgJ3JlZ3VsYXRpb25OYW1lJzogdGhhdC5tb25pdG9yUnVsZU5hbWUsIC8vIOinhOWImeWQjeensA0KICAgICAgICAncmVndWxhdGlvblR5cGUnOiByZWd1bGF0aW9uVHlwZSwgLy8g6KeE5YiZ57G75Z6L77yaMS7ns7vnu5/nuqcgIDIu6LSi5pS/57qnICAzLumDqOmXqOe6pw0KICAgICAgICAnd2FybmluZ0xldmVsJzogdGhhdC53YXJuaW5nTGV2ZWwsIC8vIOmihOitpue6p+WIqw0KICAgICAgICAnaGFuZGxlVHlwZSc6IHRoYXQuaGFuZGxlVHlwZSwgLy8g5aSE55CG5pa55byPDQogICAgICAgICdyZWd1bGF0aW9uTW9kZWxDb2RlJzogdGhhdC5yZWd1bGF0aW9uTW9kZWxDb2RlLCAvLyDmqKHmnb/nvJbnoIENCiAgICAgICAgJ3JlZ3VsYXRpb25Nb2RlbE5hbWUnOiB0aGF0LmNyVGVtcGxhdGUsIC8vIOaooeadv+WQjeensA0KICAgICAgICAnd2FybmluZ1RpcHMnOiB0aGF0LnBvbGljaWVzRGVzY3JpcHRpb24sIC8vIOmihOitpuaPkOekug0KICAgICAgICBmaVJ1bGVEZXNjOiB0aGF0LmZpUnVsZURlc2MsDQogICAgICAgIGltcGxEZXNjOiB0aGF0LmltcGxEZXNjLA0KICAgICAgICAncmVndWxhdGlvblN0YXR1cyc6IHRoaXMuJHBhcmVudC5yZWd1bGF0aW9uU3RhdHVzLCAvLyDop4TliJnnirbmgIHvvJoxLuaWsOWiniAgMi7pgIHlrqEgIDMu5a6h5qC4DQogICAgICAgICdyZWd1bGF0aW9uQ29uZmlnJzogZGF0YXMxLA0KICAgICAgICAncmVndWxhdGlvblNjb3BlJzogdGhhdC5zY29wZSwgLy8g6KeE5YiZ55Sf5pWI6IyD5Zu0e21vZkRpdkNvZGU6ICcnLCBhbmdlbmN5Q29kZTogJyd9DQogICAgICAgIG1lbnVOYW1lOiB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUubmFtZSwNCiAgICAgICAgJ3J1bGVGbGFnJzogdGhhdC5ydWxlRmxhZywNCiAgICAgICAgJ3dhcm5Mb2NhdGlvbic6IHRoYXQud2FybkxvY2F0aW9uLA0KICAgICAgICBpc0Z1bGw6IGlzRnVsbCwNCiAgICAgICAgcnVsZUVsZW1lbnQ6IHsNCiAgICAgICAgICBwYXltZW50OiBmb3JtRGF0YXMucGF5bWVudCwNCiAgICAgICAgICBhZ2VuY3lDb2RlOiBmb3JtRGF0YXMuYWdlbmN5X2NvZGUsDQogICAgICAgICAgYWdlbmN5TmFtZTogZm9ybURhdGFzLmFnZW5jeV9uYW1lLA0KICAgICAgICAgIHByb0NvZGU6IGZvcm1EYXRhcy5wcm9fY29kZSwNCiAgICAgICAgICBwcm9OYW1lOiBmb3JtRGF0YXMucHJvX25hbWUsDQogICAgICAgICAgZ292Qmd0RWNvQ29kZTogZm9ybURhdGFzLmdvdl9iZ3RfZWNvX2NvZGUsDQogICAgICAgICAgZ292Qmd0RWNvTmFtZTogZm9ybURhdGFzLmdvdl9iZ3RfZWNvX25hbWUsDQogICAgICAgICAgZXhwRnVuQ29kZTogZm9ybURhdGFzLmV4cF9mdW5jX2NvZGUsDQogICAgICAgICAgZXhwRnVuTmFtZTogZm9ybURhdGFzLmV4cF9mdW5jX25hbWUsDQogICAgICAgICAgZGVwQmd0RWNvQ29kZTogZm9ybURhdGFzLmRlcF9iZ3RfZWNvX2NvZGUsDQogICAgICAgICAgZGVwQmd0RWNvTmFtZTogZm9ybURhdGFzLmRlcF9iZ3RfZWNvX25hbWUsDQogICAgICAgICAgY29yQmd0RG9jTm9OYW1lOiBmb3JtRGF0YXMuY29yX2JndF9kb2Nfbm9fbmFtZSwNCiAgICAgICAgICBjb3JCZ3REb2NOb0NvZGU6IGZvcm1EYXRhcy5jb3JfYmd0X2RvY19ub19jb2RlLA0KICAgICAgICAgIHBheWVlQWNjdE5hbWU6IGZvcm1EYXRhcy5wYXllZUFjY3ROYW1lLA0KICAgICAgICAgIHBheWVlQWNjdE5vOiBmb3JtRGF0YXMucGF5ZWVBY2N0Tm8sDQogICAgICAgICAgdXNlRGVzOiBmb3JtRGF0YXMudXNlRGVzLA0KICAgICAgICAgIGRlczogZm9ybURhdGFzLmRlcywNCiAgICAgICAgICBiYXNpczogZm9ybURhdGFzLmJhc2lzDQogICAgICAgIH0sDQogICAgICAgIHdhcm5UeXBlOiB0aGlzLndhcm5UeXBlLCAvLyDpooTorabnsbvliKsNCiAgICAgICAgdXBsb2FkRmlsZTogdGhpcy51cGxvYWRGaWxlIC8vIOaYr+WQpuS4iuS8oOmZhOS7tg0KICAgICAgfQ0KICAgICAgdGhpcy5zdWJtaXRMb2FkaW5nID0gdHJ1ZQ0KICAgICAgaWYgKHRoaXMuJHBhcmVudC5kaWFsb2dUaXRsZSA9PT0gJ+S/ruaUuScpIHsNCiAgICAgICAgY29uc29sZS5sb2codGhpcy5mb3JtRGF0YXMpDQogICAgICAgIHBhcmFtLnJlZ3VsYXRpb25Db2RlID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucmVndWxhdGlvbkNvZGUNCiAgICAgICAgSHR0cE1vZHVsZS51cGRhdGVEYXRhKHBhcmFtKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMDAwMDAwJykgew0KICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJykNCiAgICAgICAgICAgIHRoaXMuZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZS5zcGxpY2UoMSwgdGhpcy5wYXltZW50TGVuKQ0KICAgICAgICAgICAgdGhpcy5wYXltZW50TGVuID0gMA0KICAgICAgICAgICAgbGV0IGZvcm0gPSB0aGlzLiRyZWZzLm1lc3NhZ2VGb3JtDQogICAgICAgICAgICBmb3JtLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgICAgICAgdGhpcy5yZXNldEZvcm1EYXRhTGlzdE1lc3NhZ2UoKQ0KICAgICAgICAgICAgdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgIGl0ZW0uaXRlbVJlbmRlci5wcm9wcy5kaXNhYmxlZCA9IGZhbHNlDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgdGhhdC4kcGFyZW50LmRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICAgICAgdGhpcy4kcGFyZW50LmRpYWxvZ1Zpc2libGVSdWxlcyA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLiRwYXJlbnQucXVlcnlUYWJsZURhdGFzKCkNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSkNCiAgICAgICAgICB9DQogICAgICAgIH0pLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgLy8gdGhhdC4kcGFyZW50LmRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgSHR0cE1vZHVsZS5hZGREYXRhKHBhcmFtKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMDAwMDAwJykgew0KICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2Uuc3VjY2Vzcygn5paw5aKe5oiQ5YqfJykNCiAgICAgICAgICAgIHRoaXMuZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZS5zcGxpY2UoMSwgdGhpcy5wYXltZW50TGVuKQ0KICAgICAgICAgICAgdGhpcy5wYXltZW50TGVuID0gMA0KICAgICAgICAgICAgbGV0IGZvcm0gPSB0aGlzLiRyZWZzLm1lc3NhZ2VGb3JtDQogICAgICAgICAgICBmb3JtLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgICAgICAgdGhpcy5yZXNldEZvcm1EYXRhTGlzdE1lc3NhZ2UoKQ0KICAgICAgICAgICAgdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgIGl0ZW0uaXRlbVJlbmRlci5wcm9wcy5kaXNhYmxlZCA9IGZhbHNlDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgdGhhdC4kcGFyZW50LmRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICAgICAgdGhpcy4kcGFyZW50LmRpYWxvZ1Zpc2libGVSdWxlcyA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLiRwYXJlbnQucXVlcnlUYWJsZURhdGFzKCkNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSkNCiAgICAgICAgICB9DQogICAgICAgIH0pLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgIHRoaXMuc3VibWl0TG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgLy8gdGhhdC4kcGFyZW50LmRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g6YCJ5oup5Lia5Yqh57O757ufDQogICAgY2hhbmdlU3lzQ29kZSh2YWwpIHsNCiAgICAgIGNvbnNvbGUubG9nKHZhbCkNCiAgICAgIHRoaXMuU3lzcGFyZW50SWQgPSB2YWwNCiAgICAgIC8vIHRoaXMuYnVzaW5lc3NNb2R1bGVDb2RlID0gJycNCiAgICAgIGxldCBidXNOYW1lID0gdGhpcy5idXNpbmVzc1N5c3RlbUNvZGVvcHRpb25zLmZpbmQoaXRlbSA9PiB7DQogICAgICAgIHJldHVybiBpdGVtLmlkID09PSB2YWwNCiAgICAgIH0pDQogICAgICB0aGlzLmJ1c2luZXNzU3lzdGVtTmFtZSA9IGJ1c05hbWUuYnVzaW5lc3NOYW1lDQogICAgICB0aGlzLmdldE1vZExpc3RzKCkNCiAgICB9LA0KICAgIC8vIOmAieaLqeS4muWKoeaooeWdlw0KICAgIGNoYW5nZU1vZENvZGUodmFsKSB7DQogICAgICB0aGlzLk1vZHBhcmVudElkID0gdmFsDQogICAgICB0aGlzLmJ1c2luZXNzRnVuY3Rpb25Db2RlTW9kYWwgPSAnJw0KICAgICAgdGhpcy4kcmVmcy5idXNpbmVzc0Z1bmN0aW9uQ29kZU1vZGFsUmVmLnJlc2V0Py4oKQ0KICAgICAgbGV0IGJ1c05hbWUgPSB0aGlzLmJ1c2luZXNzTW9kdWxlQ29kZW9wdGlvbnMuZmluZChpdGVtID0+IHsNCiAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT09IHZhbA0KICAgICAgfSkNCiAgICAgIHRoaXMuYnVzaW5lc3NNb2R1bGVOYW1lID0gYnVzTmFtZS5idXNpbmVzc05hbWUNCiAgICAgIC8vIHRoaXMuZ2V0RnVuTGlzdHMoKQ0KICAgIH0sDQogICAgY2hhbmdlRnVuQ29kZSh2YWwpIHsNCiAgICAgIGNvbnNvbGUubG9nKHZhbCkNCiAgICAgIHRoaXMuYnVzaW5lc3NGdW5jdGlvbkNvZGUgPSB2YWwNCiAgICAgIHRoaXMuYnVzaW5lc3NGdW5jdGlvbk5hbWUgPSB0aGlzLmJ1c2luZXNzRnVuY3Rpb25Db2Rlb3B0aW9ucw0KICAgICAgICA/LmZpbHRlcihpdGVtID0+IHsNCiAgICAgICAgICByZXR1cm4gdGhpcy5idXNpbmVzc0Z1bmN0aW9uQ29kZS5pbmNsdWRlcyhpdGVtLmd1aWQpDQogICAgICAgIH0pDQogICAgICAgID8ubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKQ0KICAgICAgLy8gbGV0IGJ1c05hbWUgPSB0aGlzLmJ1c2luZXNzRnVuY3Rpb25Db2Rlb3B0aW9ucy5maW5kKGl0ZW0gPT4gew0KICAgICAgLy8gICByZXR1cm4gaXRlbS5pZCA9PT0gdmFsDQogICAgICAvLyB9KQ0KICAgICAgLy8gdGhpcy5idXNpbmVzc0Z1bmN0aW9uTmFtZSA9IGJ1c05hbWUuYnVzaW5lc3NOYW1lDQogICAgICAvLyBsZXQgYnVzTmFtZSA9IFtdDQogICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IHZhbC5sZW5ndGg7IGkrKykgew0KICAgICAgLy8gICBidXNOYW1lLnB1c2godGhpcy5idXNpbmVzc0Z1bmN0aW9uQ29kZW9wdGlvbnMuZmluZChpdGVtID0+IHsNCiAgICAgIC8vICAgICByZXR1cm4gaXRlbS5pZCA9PT0gdmFsW2ldDQogICAgICAvLyAgIH0pKQ0KICAgICAgLy8gfQ0KICAgICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCBidXNOYW1lLmxlbmd0aDsgaSsrKSB7DQogICAgICAvLyAgIHRoaXMuYnVzaW5lc3NGdW5jdGlvbk5hbWUucHVzaChidXNOYW1lW2ldLmJ1c2luZXNzTmFtZSkNCiAgICAgIC8vIH0NCiAgICB9LA0KICAgIC8vIOS4muWKoeezu+e7n+S4i+aLieagkQ0KICAgIGdldFN5c0xpc3RzKCkgew0KICAgICAgY29uc3QgcGFyYW0gPSB7DQogICAgICAgIGJ1c2luZXNzVHlwZTogMSwNCiAgICAgICAgcGFyZW50SWQ6IDANCiAgICAgIH0NCiAgICAgIHRoaXMuYWRkTG9hZGluZyA9IHRydWUNCiAgICAgIEh0dHBNb2R1bGUuZ2V0YnVzTGlzdHMocGFyYW0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5hZGRMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMDAwMDAwJykgew0KICAgICAgICAgIHRoaXMuYnVzaW5lc3NTeXN0ZW1Db2Rlb3B0aW9ucyA9IHJlcy5kYXRhLnJlc3VsdHMNCiAgICAgICAgICBpZiAodGhpcy4kcGFyZW50LmRpYWxvZ1RpdGxlID09PSAn5paw5aKeJykgew0KICAgICAgICAgICAgdGhpcy5idXNpbmVzc1N5c3RlbUNvZGUgPSAnMScNCiAgICAgICAgICAgIHRoaXMuY2hhbmdlU3lzQ29kZSh0aGlzLmJ1c2luZXNzU3lzdGVtQ29kZSkNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOS4muWKoeaooeWdl+S4i+aLieagkQ0KICAgIGdldE1vZExpc3RzKCkgew0KICAgICAgY29uc3QgcGFyYW0gPSB7DQogICAgICAgIGJ1c2luZXNzVHlwZTogMiwNCiAgICAgICAgcGFyZW50SWQ6IHRoaXMuU3lzcGFyZW50SWQNCiAgICAgIH0NCiAgICAgIHRoaXMuYWRkTG9hZGluZyA9IHRydWUNCiAgICAgIEh0dHBNb2R1bGUuZ2V0YnVzTGlzdHMocGFyYW0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5hZGRMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMDAwMDAwJykgew0KICAgICAgICAgIHRoaXMuYnVzaW5lc3NNb2R1bGVDb2Rlb3B0aW9ucyA9IHJlcy5kYXRhLnJlc3VsdHMNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5Lia5Yqh6I+c5Y2V5LiL5ouJ5qCRDQogICAgZ2V0RnVuTGlzdHMoKSB7DQogICAgICBjb25zdCBwYXJhbSA9IHsNCiAgICAgICAgYnVzaW5lc3NUeXBlOiAzLA0KICAgICAgICBwYXJlbnRJZDogdGhpcy5Nb2RwYXJlbnRJZA0KICAgICAgfQ0KICAgICAgdGhpcy5hZGRMb2FkaW5nID0gdHJ1ZQ0KICAgICAgSHR0cE1vZHVsZS5nZXRidXNMaXN0cyhwYXJhbSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLmFkZExvYWRpbmcgPSBmYWxzZQ0KICAgICAgICB0aGlzLmJ1c2luZXNzRnVuY3Rpb25Db2Rlb3B0aW9ucyA9IHJlcy5kYXRhLnJlc3VsdHMNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDkuLvnrqHpg6jpl6jkuIvmi4nmoJENCiAgICBnZXREZXBMaXN0cygpIHsNCiAgICAgIGNvbnN0IHBhcmFtID0gew0KICAgICAgICBidXNpbmVzc1R5cGU6IDQsDQogICAgICAgIHBhcmVudElkOiAwDQogICAgICB9DQogICAgICB0aGlzLmFkZExvYWRpbmcgPSB0cnVlDQogICAgICBIdHRwTW9kdWxlLmdldGJ1c0xpc3RzKHBhcmFtKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuYWRkTG9hZGluZyA9IGZhbHNlDQogICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAwMDAwMCcpIHsNCiAgICAgICAgICB0aGlzLmRlcGFydG1lbnRDb2Rlb3B0aW9ucyA9IHJlcy5kYXRhLnJlc3VsdHMNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0UmVndWxhdGlvbkNoaWxkcmVuRGF0YShkYXRhcykgew0KICAgICAgbGV0IHRoYXQgPSB0aGlzDQogICAgICBkYXRhcy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAvLyBpdGVtLmNvZGUgPSBpdGVtLmNvZGUNCiAgICAgICAgaXRlbS5uYW1lID0gaXRlbS5ydWxlTmFtZQ0KICAgICAgICBpdGVtLmxhYmVsID0gaXRlbS5jb2RlICsgJy0nICsgaXRlbS5ydWxlTmFtZQ0KICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7DQogICAgICAgICAgdGhhdC5nZXRSZWd1bGF0aW9uQ2hpbGRyZW5EYXRhKGl0ZW0uY2hpbGRyZW4pDQogICAgICAgICAgaXRlbS5sZWFmID0gZmFsc2UNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpdGVtLmxlYWYgPSB0cnVlDQogICAgICAgIH0NCiAgICAgIH0pDQoNCiAgICAgIHJldHVybiBkYXRhcw0KICAgIH0sDQogICAgc2VsZWN0UnVsZSh2YWwpIHsNCiAgICAgIGxldCB2YWxBcnIgPSB2YWwuc3BsaXQoJyMjJykNCiAgICAgIHRoaXMucmVndWxhdGlvbkNsYXNzTmFtZSA9IHZhbEFyclsyXQ0KICAgICAgLy8gdGhpcy5yZWd1bGF0aW9uQ2xhc3MgPSB2YWxBcnJbMF0NCiAgICAgIC8vIGxldCBidXNOYW1lID0gdGhpcy5yZWd1bGF0aW9uQ2xhc3NvcHRpb25zLmZpbmQoaXRlbSA9PiB7DQogICAgICAvLyAgIHJldHVybiBpdGVtLmlkID09PSB2YWwNCiAgICAgIC8vIH0pDQogICAgICAvLyB0aGlzLnJlZ3VsYXRpb25DbGFzc05hbWUgPSBidXNOYW1lLnJlZ3VsYXRpb25DbGFzc05hbWUNCiAgICAgIC8vIHRoaXMucmVndWxhdGlvbkNsYXNzID0gYnVzTmFtZS5yZWd1bGF0aW9uQ2xhc3MNCiAgICB9LA0KICAgIHJlZ3VsYXRpb25Ob2RlQ2xpY2soeyBub2RlIH0pIHsNCiAgICAgIGlmIChub2RlLmNoaWxkcmVuPy5sZW5ndGgpIHsNCiAgICAgICAgdGhpcy5yZWd1bGF0aW9uQ2xhc3MgPSAnJw0KICAgICAgICB0aGlzLiRyZWZzLnJlZ3VsYXRpb25UcmVlUmVmLnRyZWVPcHRpb25WYWx1ZSA9ICcnDQogICAgICAgIHRoaXMuJFhNb2RhbC5tZXNzYWdlKHsgc3RhdHVzOiAnd2FybmluZycsIG1lc3NhZ2U6ICfor6XoioLngrnkuI3lj6/pgInmi6nvvIzor7fpgInmi6nlj7blrZDoioLngrknIH0pDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgdGhpcy5yZWd1bGF0aW9uQ2xhc3MgPSBub2RlLmNvZGUgKyAnLScgKyBub2RlLm5hbWUNCiAgICB9LA0KICAgIGdldFJlZ3VsYXRpb24oKSB7DQogICAgICBIdHRwTW9kdWxlLmdldFRyZWUoMCkudGhlbihyZXMgPT4gew0KICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwMDAwMDAnKSB7DQogICAgICAgICAgdGhpcy4kWEVVdGlscy5lYWNoVHJlZShyZXMuZGF0YSwgaXRlbSA9PiB7DQogICAgICAgICAgICBpdGVtLm5hbWUgPSBpdGVtLnJ1bGVOYW1lDQogICAgICAgICAgICBpdGVtLmRpc2FibGVkID0gISFpdGVtLmNoaWxkcmVuPy5sZW5ndGgNCiAgICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMucmVndWxhdGlvbkNsYXNzb3B0aW9ucyA9IHJlcy5kYXRhDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiL5ouJ5qCR5Yqg6L295aSx6LSlJykNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIG9uVG9vbGJhckJ0bkNsaWNrKHsgY29udGV4dCwgdGFibGUsIGNvZGUgfSkgew0KICAgICAgc3dpdGNoIChjb2RlKSB7DQogICAgICAgIC8vIOWIt+aWsA0KICAgICAgICBjYXNlICdyZWZyZXNoJzoNCiAgICAgICAgICB0aGlzLnJlZnJlc2goKQ0KICAgICAgICAgIGJyZWFrDQogICAgICB9DQogICAgfSwNCiAgICAvLyDliLfmlrDmjInpkq4g5Yi35paw5p+l6K+i5qCP77yM5o+Q56S65Yi35pawIHRhYmxlIOaVsOaNrg0KICAgIHJlZnJlc2goKSB7DQogICAgICB0aGlzLmdldFRhYmxlRGF0YSgpDQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIC8vIGJ1c2luZXNzU3lzdGVtQ29kZSh2YWwpIHsNCiAgICAvLyAgIGNvbnNvbGUubG9nKHZhbCkNCiAgICAvLyAgIHRoaXMuU3lzcGFyZW50SWQgPSB2YWwNCiAgICAvLyAgIHRoaXMuYnVzaW5lc3NNb2R1bGVDb2RlID0gJycNCiAgICAvLyAgIGxldCBidXNOYW1lID0gdGhpcy5idXNpbmVzc1N5c3RlbUNvZGVvcHRpb25zLmZpbmQoaXRlbSA9PiB7DQogICAgLy8gICAgIHJldHVybiBpdGVtLmlkID09PSB2YWwNCiAgICAvLyAgIH0pDQogICAgLy8gICB0aGlzLmJ1c2luZXNzU3lzdGVtTmFtZSA9IGJ1c05hbWUuYnVzaW5lc3NOYW1lDQogICAgLy8gICBjb25zdCBwYXJhbSA9IHsNCiAgICAvLyAgICAgYnVzaW5lc3NUeXBlOiAyLA0KICAgIC8vICAgICBwYXJlbnRJZDogdGhpcy5TeXNwYXJlbnRJZA0KICAgIC8vICAgfQ0KICAgIC8vICAgY29uc29sZS5sb2cocGFyYW0pDQogICAgLy8gICB0aGlzLmFkZExvYWRpbmcgPSB0cnVlDQogICAgLy8gICBIdHRwTW9kdWxlLmdldGJ1c0xpc3RzKHBhcmFtKS50aGVuKHJlcyA9PiB7DQogICAgLy8gICAgIHRoaXMuYWRkTG9hZGluZyA9IGZhbHNlDQogICAgLy8gICAgIGlmIChyZXMuY29kZSA9PT0gJzAwMDAwMCcpIHsNCiAgICAvLyAgICAgICB0aGlzLmJ1c2luZXNzTW9kdWxlQ29kZW9wdGlvbnMgPSByZXMuZGF0YS5yZXN1bHRzDQogICAgLy8gICAgIH0gZWxzZSB7DQogICAgLy8gICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSkNCiAgICAvLyAgICAgfQ0KICAgIC8vICAgfSkNCiAgICAvLyB9DQogIH0sDQogIG1vdW50ZWQoKSB7DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgY29uc29sZS5sb2codGhpcy4kcGFyZW50LkRldGFpbERhdGEpDQogICAgdGhpcy5nZXRXaGVyZVRyZWUoKQ0KICAgIGlmICh0aGlzLiRwYXJlbnQuZGlhbG9nVGl0bGUgPT09ICfmlrDlop4nKSB7DQogICAgICB0aGlzLmdldEJ1c2luZXNzTW9kZWxDb2RlRGF0YXMoeyBidXNpbmVzc1R5cGU6ICcxJywgcGFyZW50SWQ6IDAgfSkNCiAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCkNCiAgICAgIC8vIOebtOi+vui1hOmHkeaWsOWinuinhOWImQ0KICAgICAgdGhpcy4kcGFyZW50LmRpYWxvZ1Zpc2libGVSdWxlcyAmJiAodGhpcy5yZWd1bGF0aW9uQ2xhc3MgPSAnMDkt55u06L6+6LWE6YeRJykNCiAgICB9IGVsc2UgaWYgKHRoaXMuJHBhcmVudC5kaWFsb2dUaXRsZSA9PT0gJ+afpeeci+ivpuaDhScpIHsNCiAgICAgIHRoaXMud2FyblR5cGUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS53YXJuVHlwZQ0KICAgICAgdGhpcy51cGxvYWRGaWxlID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGE/LnVwbG9hZEZpbGUNCg0KICAgICAgdGhpcy5ydWxlU2V0U2hvdyA9IGZhbHNlDQogICAgICB0aGlzLnJ1bGVEZXNTaG93ID0gdHJ1ZQ0KICAgICAgdGhpcy5hcHBTZXRTaG93ID0gZmFsc2UNCiAgICAgIHRoaXMuZWZmZWN0aXZlU2hvdyA9IGZhbHNlDQogICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gMQ0KICAgICAgdGhpcy5tb25pdG9yUnVsZU5hbWUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5yZWd1bGF0aW9uTmFtZQ0KICAgICAgdGhpcy53YXJuaW5nTGV2ZWwgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS53YXJuaW5nTGV2ZWwNCiAgICAgIC8vIHRoaXMucmVndWxhdGlvbkNsYXNzID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucmVndWxhdGlvbkNsYXNzDQogICAgICB0aGlzLmdldFJlZ3VsYXRpb24oKQ0KICAgICAgdGhpcy5yZWd1bGF0aW9uQ2xhc3MgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5yZWd1bGF0aW9uQ2xhc3MgKyAnLScgKyB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5yZWd1bGF0aW9uQ2xhc3NOYW1lDQogICAgICB0aGlzLnRyaWdnZXJDbGFzcyA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLnRyaWdnZXJDbGFzcw0KICAgICAgdGhpcy5oYW5kbGVUeXBlID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEuaGFuZGxlVHlwZQ0KICAgICAgdGhpcy5vcGVyYXRpb25UYWJsZURhdGEgPSBbdGhpcy4kcGFyZW50LkRldGFpbERhdGEucnVsZVRlbXBsYXRlXQ0KDQogICAgICB0aGlzLmNyVGVtcGxhdGUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlVGVtcGxhdGUucnVsZVRlbXBsYXRlTmFtZQ0KICAgICAgLy8gdGhpcy5idXNpbmVzc01vZHVsZSA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLnJ1bGVUZW1wbGF0ZS5idXNpbmVzc01vZHVsZU5hbWUNCiAgICAgIC8vIHRoaXMuYnVzaW5lc3NGdW5jdGlvbiA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLnJ1bGVUZW1wbGF0ZS5idXNpbmVzc0Z1bmN0aW9uTmFtZQ0KICAgICAgdGhpcy5idXNpbmVzc1N5c3RlbUNvZGUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5idXNpbmVzc1N5c3RlbUNvZGUgKyAnJw0KICAgICAgdGhpcy5TeXNwYXJlbnRJZCA9IHRoaXMuYnVzaW5lc3NTeXN0ZW1Db2RlDQogICAgICB0aGlzLmdldE1vZExpc3RzKCkNCiAgICAgIHRoaXMuYnVzaW5lc3NNb2R1bGVDb2RlID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEuYnVzaW5lc3NNb2R1bGVDb2RlICsgJycNCiAgICAgIHRoaXMuTW9kcGFyZW50SWQgPSB0aGlzLmJ1c2luZXNzTW9kdWxlQ29kZQ0KDQogICAgICAvLyB0aGlzLmdldEZ1bkxpc3RzKCkNCiAgICAgIC8vIHRoaXMuYnVzaW5lc3NGdW5jdGlvbkNvZGUucHVzaChwYXJzZUludCh0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5idXNpbmVzc0Z1bmN0aW9uQ29kZSkpDQogICAgICAvLyB0aGlzLmJ1c2luZXNzRnVuY3Rpb25Db2RlID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEubWVudUlkTGlzdC5zcGxpdCgnLCcpDQogICAgICB0aGlzLmJ1c2luZXNzU3lzdGVtTmFtZSA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLmJ1c2luZXNzU3lzdGVtTmFtZQ0KICAgICAgdGhpcy5idXNpbmVzc01vZHVsZU5hbWUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5idXNpbmVzc01vZHVsZU5hbWUNCiAgICAgIHRoaXMuZmlSdWxlVHlwZUNvZGUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlVGVtcGxhdGUuZmlSdWxlVHlwZUNvZGUNCiAgICAgIHRoaXMuZmlSdWxlVHlwZU5hbWUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlVGVtcGxhdGUuZmlSdWxlVHlwZU5hbWUNCiAgICAgIGlmICh0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlVGVtcGxhdGUuZmlSdWxlVHlwZUNvZGUgJiYgdGhpcy4kcGFyZW50LkRldGFpbERhdGEucnVsZVRlbXBsYXRlLmZpUnVsZVR5cGVOYW1lKSB7DQogICAgICAgIHRoaXMuZmlSdWxlVHlwZUNvZGVOYW1lID0gKCh0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlVGVtcGxhdGUuZmlSdWxlVHlwZUNvZGUgKyAnJykuc2xpY2UoMCwgMSkgPT09ICcxJyA/ICfkuK3lpK4nIDogJ+WcsOaWuScpICsgJy0nICsgdGhpcy4kcGFyZW50LkRldGFpbERhdGEucnVsZVRlbXBsYXRlLmZpUnVsZVR5cGVOYW1lDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmZpUnVsZVR5cGVDb2RlTmFtZSA9ICcnDQogICAgICB9DQogICAgICAvLyB0aGlzLmJ1c2luZXNzRnVuY3Rpb25OYW1lLnB1c2godGhpcy4kcGFyZW50LkRldGFpbERhdGEuYnVzaW5lc3NGdW5jdGlvbk5hbWUpDQogICAgICAvLyB0aGlzLmJ1c2luZXNzRnVuY3Rpb25OYW1lID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEubWVudU5hbWVMaXN0DQogICAgICB0aGlzLnJlZ3VsYXRpb25Nb2RlbENvZGUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlVGVtcGxhdGVDb2RlDQogICAgICB0aGlzLm1vdW50VGFibGVEYXRhID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucmVndWxhdGlvbkNvbmZpZw0KICAgICAgdGhpcy5ydWxlRmxhZyA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLnJ1bGVGbGFnDQogICAgICB0aGlzLndhcm5Mb2NhdGlvbiA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLndhcm5Mb2NhdGlvbg0KICAgICAgdGhpcy5wb2xpY2llc0Rlc2NyaXB0aW9uID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEud2FybmluZ1RpcHMNCiAgICAgIHRoaXMuZmlSdWxlRGVzYyA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLmZpUnVsZURlc2MNCiAgICAgIHRoaXMuaW1wbERlc2MgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5pbXBsRGVzYw0KICAgICAgLy8g5LiN5Y+v57yW6L6RDQogICAgICAvLyB0aGlzLmJ1dHRvbkNvbmZpZyA9IHt9DQogICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZQ0KICAgICAgdGhpcy5lZGl0Q29uZmlnID0gZmFsc2UNCiAgICB9IGVsc2UgaWYgKHRoaXMuJHBhcmVudC5kaWFsb2dUaXRsZSA9PT0gJ+S/ruaUuScgfHwgdGhpcy4kcGFyZW50LmRpYWxvZ1RpdGxlID09PSAn5aSN5Yi2Jykgew0KICAgICAgdGhpcy53YXJuVHlwZSA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLndhcm5UeXBlDQogICAgICB0aGlzLnVwbG9hZEZpbGUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS51cGxvYWRGaWxlDQogICAgICB0aGlzLnJ1bGVGbGFnID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucnVsZUZsYWcNCiAgICAgIHRoaXMud2FybkxvY2F0aW9uID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEud2FybkxvY2F0aW9uDQogICAgICB0aGlzLm1vbml0b3JSdWxlTmFtZSA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLnJlZ3VsYXRpb25OYW1lDQogICAgICB0aGlzLndhcm5pbmdMZXZlbCA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLndhcm5pbmdMZXZlbA0KICAgICAgdGhpcy5yZWd1bGF0aW9uTW9kZWxOYW1lID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucmVndWxhdGlvbk1vZGVsTmFtZQ0KICAgICAgLy8gdGhpcy5yZWd1bGF0aW9uQ2xhc3MgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5yZWd1bGF0aW9uQ2xhc3MNCiAgICAgIHRoaXMuZ2V0UmVndWxhdGlvbigpDQogICAgICB0aGlzLnJlZ3VsYXRpb25DbGFzcyA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLnJlZ3VsYXRpb25DbGFzcyArICctJyArIHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLnJlZ3VsYXRpb25DbGFzc05hbWUNCiAgICAgIHRoaXMudHJpZ2dlckNsYXNzID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEudHJpZ2dlckNsYXNzDQogICAgICB0aGlzLmhhbmRsZVR5cGUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5oYW5kbGVUeXBlDQogICAgICB0aGlzLm9wZXJhdGlvblRhYmxlRGF0YSA9IFt0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlVGVtcGxhdGVdDQoNCiAgICAgIHRoaXMuY3JUZW1wbGF0ZSA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLnJ1bGVUZW1wbGF0ZS5ydWxlVGVtcGxhdGVOYW1lDQogICAgICAvLyB0aGlzLmJ1c2luZXNzTW9kdWxlID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucnVsZVRlbXBsYXRlLmJ1c2luZXNzTW9kdWxlTmFtZQ0KICAgICAgLy8gdGhpcy5idXNpbmVzc0Z1bmN0aW9uID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucnVsZVRlbXBsYXRlLmJ1c2luZXNzRnVuY3Rpb25OYW1lDQogICAgICB0aGlzLmJ1c2luZXNzU3lzdGVtQ29kZSA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLmJ1c2luZXNzU3lzdGVtQ29kZSArICcnDQogICAgICB0aGlzLlN5c3BhcmVudElkID0gdGhpcy5idXNpbmVzc1N5c3RlbUNvZGUNCiAgICAgIHRoaXMuZ2V0TW9kTGlzdHMoKQ0KICAgICAgdGhpcy5idXNpbmVzc01vZHVsZUNvZGUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5idXNpbmVzc01vZHVsZUNvZGUgKyAnJw0KICAgICAgdGhpcy5Nb2RwYXJlbnRJZCA9IHRoaXMuYnVzaW5lc3NNb2R1bGVDb2RlDQoNCiAgICAgIC8vIHRoaXMuZ2V0RnVuTGlzdHMoKQ0KICAgICAgLy8gdGhpcy5idXNpbmVzc0Z1bmN0aW9uQ29kZS5wdXNoKHBhcnNlSW50KHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLmJ1c2luZXNzRnVuY3Rpb25Db2RlKSkNCiAgICAgIC8vIHRoaXMuYnVzaW5lc3NGdW5jdGlvbkNvZGUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5tZW51SWRMaXN0LnNwbGl0KCcsJykNCiAgICAgIHRoaXMuYnVzaW5lc3NTeXN0ZW1OYW1lID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEuYnVzaW5lc3NTeXN0ZW1OYW1lDQogICAgICB0aGlzLmJ1c2luZXNzTW9kdWxlTmFtZSA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLmJ1c2luZXNzTW9kdWxlTmFtZQ0KICAgICAgLy8gdGhpcy5idXNpbmVzc0Z1bmN0aW9uTmFtZS5wdXNoKHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLmJ1c2luZXNzRnVuY3Rpb25OYW1lKQ0KICAgICAgLy8gdGhpcy5idXNpbmVzc0Z1bmN0aW9uTmFtZSA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLm1lbnVOYW1lTGlzdA0KICAgICAgdGhpcy5yZWd1bGF0aW9uTW9kZWxDb2RlID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucmVndWxhdGlvbk1vZGVsQ29kZQ0KICAgICAgdGhpcy5tb3VudFRhYmxlRGF0YSA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLnJlZ3VsYXRpb25Db25maWcNCiAgICAgIHRoaXMuZmlSdWxlVHlwZUNvZGUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlVGVtcGxhdGUuZmlSdWxlVHlwZUNvZGUNCiAgICAgIHRoaXMuZmlSdWxlVHlwZU5hbWUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlVGVtcGxhdGUuZmlSdWxlVHlwZU5hbWUNCiAgICAgIGlmICh0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlVGVtcGxhdGUuZmlSdWxlVHlwZUNvZGUgJiYgdGhpcy4kcGFyZW50LkRldGFpbERhdGEucnVsZVRlbXBsYXRlLmZpUnVsZVR5cGVOYW1lKSB7DQogICAgICAgIHRoaXMuZmlSdWxlVHlwZUNvZGVOYW1lID0gKCh0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlVGVtcGxhdGUuZmlSdWxlVHlwZUNvZGUgKyAnJykuc2xpY2UoMCwgMSkgPT09ICcxJyA/ICfkuK3lpK4nIDogJ+WcsOaWuScpICsgJy0nICsgdGhpcy4kcGFyZW50LkRldGFpbERhdGEucnVsZVRlbXBsYXRlLmZpUnVsZVR5cGVOYW1lDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmZpUnVsZVR5cGVDb2RlTmFtZSA9ICcnDQogICAgICB9DQogICAgICB0aGlzLnBvbGljaWVzRGVzY3JpcHRpb24gPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS53YXJuaW5nVGlwcw0KICAgICAgdGhpcy5maVJ1bGVEZXNjID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEuZmlSdWxlRGVzYw0KICAgICAgdGhpcy5pbXBsRGVzYyA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLmltcGxEZXNjDQogICAgICB0aGlzLnNjb3BlID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucmVndWxhdGlvblNjb3BlDQogICAgfQ0KICAgIGlmICh0aGlzLiRwYXJlbnQuZGlhbG9nVGl0bGUgIT09ICfmlrDlop4nKSB7DQogICAgICBpZiAodGhpcy4kcGFyZW50LmZvcm1EYXRhcykgew0KICAgICAgICB0aGlzLmZvcm1EYXRhcyA9IHRoaXMuJHBhcmVudC5mb3JtRGF0YXMNCiAgICAgICAgaWYgKHRoaXMuZm9ybURhdGFzLnBheW1lbnQgJiYgdGhpcy5mb3JtRGF0YXMucGF5bWVudCAhPT0gJycpIHsNCiAgICAgICAgICB0aGlzLmZvcm1EYXRhcy5wYXltZW50X19tdWx0aXBsZSA9IHRoaXMuZm9ybURhdGFzLnBheW1lbnQuc3BsaXQoJywnKS5zbGljZSgxKQ0KICAgICAgICAgIHRoaXMucGF5bWVudExlbiA9IHRoaXMuZm9ybURhdGFzLnBheW1lbnRfX211bHRpcGxlLmxlbmd0aA0KICAgICAgICAgIHRoaXMuZm9ybURhdGFzLnBheW1lbnRfX211bHRpcGxlLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgICAgICBsZXQgZGF0YXMgPSB7fQ0KICAgICAgICAgICAgaWYgKGl0ZW0gPT09ICcxJykgew0KICAgICAgICAgICAgICBkYXRhcyA9IHRoaXMuJHBhcmVudC5kaWFsb2dUaXRsZSA9PT0gJ+afpeeci+ivpuaDhScgPyB0aGlzLmNyZWF0ZVBybyh0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2VbMF0uaXRlbVJlbmRlci5vcHRpb25zW2l0ZW1dLCB0cnVlKSA6IHRoaXMuY3JlYXRlUHJvKHRoaXMuZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZVswXS5pdGVtUmVuZGVyLm9wdGlvbnNbaXRlbV0sIGZhbHNlKQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgZGF0YXMgPSB0aGlzLiRwYXJlbnQuZGlhbG9nVGl0bGUgPT09ICfmn6XnnIvor6bmg4UnID8gdGhpcy5jcmVhdGVPYmoodGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlWzBdLml0ZW1SZW5kZXIub3B0aW9uc1tpdGVtXSwgdHJ1ZSkgOiB0aGlzLmNyZWF0ZU9iaih0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2VbMF0uaXRlbVJlbmRlci5vcHRpb25zW2l0ZW1dLCBmYWxzZSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZS5zcGxpY2UoMSArIGluZGV4LCAwLCBkYXRhcykNCiAgICAgICAgICAgIGlmICh0aGlzLiRwYXJlbnQuZGlhbG9nVGl0bGUgPT09ICfmn6XnnIvor6bmg4UnKSB7DQogICAgICAgICAgICAgIHRoaXMuZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgIGl0ZW0uaXRlbVJlbmRlci5wcm9wcy5kaXNhYmxlZCA9IHRydWUNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMuZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICAgIGl0ZW0uaXRlbVJlbmRlci5wcm9wcy5kaXNhYmxlZCA9IGZhbHNlDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyB0aGlzLmZvcm1EYXRhcy5hZ2VuY3lfY29kZSA9ICcwMDAsMDAwMDAxLDAwMDAwMicNCiAgICAgICAgICAgIC8vIHRoaXMuZm9ybURhdGFzLmFnZW5jeV9uYW1lID0gJ+mihOeul+WkhOmihOeVmSzpooTnrpflpITpooTnlZksdGVzdOWNleS9jeaWsOWinicNCiAgICAgICAgICAgIHRoaXMuZm9ybURhdGFzLmFnZW5jeV9jb2RlID0gdGhpcy5mb3JtRGF0YXMuYWdlbmN5Q29kZQ0KICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXMuYWdlbmN5X25hbWUgPSB0aGlzLmZvcm1EYXRhcy5hZ2VuY3lOYW1lDQogICAgICAgICAgICB0aGlzLmZvcm1EYXRhcy5wcm9fY29kZSA9IHRoaXMuZm9ybURhdGFzLnByb0NvZGUNCiAgICAgICAgICAgIHRoaXMuZm9ybURhdGFzLnByb19uYW1lID0gdGhpcy5mb3JtRGF0YXMucHJvTmFtZQ0KICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXMuZXhwX2Z1bmNfY29kZSA9IHRoaXMuZm9ybURhdGFzLmV4cEZ1bkNvZGUNCiAgICAgICAgICAgIHRoaXMuZm9ybURhdGFzLmV4cF9mdW5jX25hbWUgPSB0aGlzLmZvcm1EYXRhcy5leHBGdW5OYW1lDQogICAgICAgICAgICB0aGlzLmZvcm1EYXRhcy5kZXBfYmd0X2Vjb19jb2RlID0gdGhpcy5mb3JtRGF0YXMuZGVwQmd0RWNvQ29kZQ0KICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXMuZGVwX2JndF9lY29fbmFtZSA9IHRoaXMuZm9ybURhdGFzLmRlcEJndEVjb05hbWUNCiAgICAgICAgICAgIHRoaXMuZm9ybURhdGFzLmdvdl9iZ3RfZWNvX2NvZGUgPSB0aGlzLmZvcm1EYXRhcy5nb3ZCZ3RFY29Db2RlDQogICAgICAgICAgICB0aGlzLmZvcm1EYXRhcy5nb3ZfYmd0X2Vjb19uYW1lID0gdGhpcy5mb3JtRGF0YXMuZ292Qmd0RWNvTmFtZQ0KICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXMuY29yX2JndF9kb2Nfbm9fY29kZSA9IHRoaXMuZm9ybURhdGFzLmNvckJndERvY05vQ29kZQ0KICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXMuY29yX2JndF9kb2Nfbm9fbmFtZSA9IHRoaXMuZm9ybURhdGFzLmNvckJndERvY05vTmFtZQ0KICAgICAgICAgIC8vIHRoaXMuZm9ybURhdGFzLmFnZW5jeV9jb2RlX2lkID0gJzUyMDhGRTQ5MzJGMzRFMjdCMEEzMUJEREUyRDAyNzZBJw0KICAgICAgICAgIC8vIGxldCBmb3JtRGF0YVBhcmFtcyA9IHRoaXMuZm9ybURhdGFzW3RoaXMuZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZVswXS5pdGVtUmVuZGVyLm9wdGlvbnNbaXRlbV0ubmFtZV0uc3BsaXQoJywnKQ0KICAgICAgICAgIC8vIGxldCBwYXJhbXNDb2RlcyA9ICcnDQogICAgICAgICAgLy8gbGV0IHBhcmFtc05hbWVzID0gJycNCiAgICAgICAgICAvLyBmb3JtRGF0YVBhcmFtcy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgIC8vICAgaXRlbSA9IGl0ZW0uc3BsaXQoJy0nKQ0KICAgICAgICAgIC8vICAgcGFyYW1zQ29kZXMgKz0gaXRlbVswXQ0KICAgICAgICAgIC8vICAgcGFyYW1zTmFtZXMgKz0gaXRlbVsxXQ0KICAgICAgICAgIC8vIH0pDQogICAgICAgICAgLy8gdGhpcy5mb3JtRGF0YXNbdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlWzBdLml0ZW1SZW5kZXIub3B0aW9uc1tpdGVtXS5uYW1lICsgJ2NvZGUnXSA9IHBhcmFtc0NvZGVzDQogICAgICAgICAgLy8gdGhpcy5mb3JtRGF0YXNbdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlWzBdLml0ZW1SZW5kZXIub3B0aW9uc1tpdGVtXS5uYW1lICsgJ25hbWUnXSA9IHBhcmFtc05hbWVzDQogICAgICAgICAgfSkNCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmZvcm1EYXRhcykNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBpZiAodGhpcy4kcGFyZW50LmRpYWxvZ1RpdGxlID09PSAn5p+l55yL6K+m5oOFJykgew0KICAgICAgdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGl0ZW0uaXRlbVJlbmRlci5wcm9wcy5kaXNhYmxlZCA9IHRydWUNCiAgICAgIH0pDQogICAgfQ0KICAgIHRoaXMucmVndWxhdGlvblR5cGUgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUuZl9GdWxsTmFtZT8uc3Vic3RyaW5nKDAsIDMpDQogICAgdGhpcy5nZXRTeXNMaXN0cygpDQogICAgdGhpcy5nZXREZXBMaXN0cygpDQogICAgdGhpcy5nZXRSZWd1bGF0aW9uKCkNCiAgfQ0KfQ0K"},{"version":3,"sources":["addDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6kBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addDialog.vue","sourceRoot":"src/views/main/MointoringMatters/SystemLevelRules/children","sourcesContent":["<!--单位用款申请(按计划)录入新增页面弹框-->\r\n<template>\r\n  <vxe-modal\r\n    v-model=\"dialogVisible\"\r\n    :title=\"title\"\r\n    width=\"96%\"\r\n    height=\"90%\"\r\n    :show-footer=\"false\"\r\n    @close=\"dialogClose\"\r\n  >\r\n    <div style=\"width:100%;height:45px;float:left;\">\r\n      <div v-for=\"(item,index) in tabbtn\" :key=\"index\" class=\"setbtn\">\r\n        <div :id=\"index\" class=\"tabone\" :class=\"activeIndex === index ? 'tabone1' : ''\" @click=\"tabClick(index)\">\r\n          {{ item }}\r\n        </div>\r\n      </div>\r\n      <div v-show=\"!disabled\" style=\"width:100%;height: 80px;margin:0 15px\">\r\n        <div type=\"flex\" justify=\"end\">\r\n          <div style=\"width:100%\">\r\n            <vxe-button\r\n              id=\"savebutton\"\r\n              v-deClick\r\n              :loading=\"submitLoading\"\r\n              style=\"float:right;margin-right:35px\"\r\n              status=\"primary\"\r\n              @click=\"doInsert\"\r\n            >保存</vxe-button>\r\n            <vxe-button style=\"float:right;margin-right:20px\" @click=\"dialogClose\">取消</vxe-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--模板信息-->\r\n    <div v-show=\"ruleSetShow\" class=\"payVoucherInput\" style=\"margin-top:50px;\">\r\n      <div v-loading=\"addLoading\" class=\"body\">\r\n        <div v-show=\"!disabled\" class=\"main-query\">\r\n          <BsQuery\r\n            ref=\"queryFrom\"\r\n            :query-form-item-config=\"queryConfig\"\r\n            :query-form-data.sync=\"searchDataList\"\r\n            @onSearchClick=\"search\"\r\n            @itemChange=\"itemChange\"\r\n          />\r\n        </div>\r\n        <div class=\"header-table\" style=\"margin-top:15px;\">\r\n          <BsTable\r\n            ref=\"monitorTableRef\"\r\n            height=\"400px\"\r\n            :loading=\"tableLoading\"\r\n            :footer-config=\"{ showFooter: false }\"\r\n            :table-columns-config=\"monitorTableColumnsConfig\"\r\n            :table-data=\"operationTableData\"\r\n            :table-config=\"globalConfig\"\r\n            :toolbar-config=\"toolbarConfig\"\r\n            :pager-config=\"false\"\r\n            @onToolbarBtnClick=\"onToolbarBtnClick\"\r\n          >\r\n            <template v-slot:toolbarSlots>\r\n              <div class=\"table-toolbar-left\">\r\n                <!-- <div\r\n                  v-if=\"leftVisible === false\"\r\n                  class=\"table-toolbar-contro-leftvisible\"\r\n                  @click=\"leftVisible = true\"\r\n                ></div> -->\r\n                <div class=\"table-toolbar-left-title\">\r\n                  <span class=\"fn-inline\">{{ curTable.name }}</span>\r\n                  <i class=\"fn-inline\"></i>\r\n                </div>\r\n              </div>\r\n              <div style=\"float:right\">\r\n                <span v-for=\"item of buttonConfig\" :key=\"item.code\">\r\n                  <vxe-button :key=\"item.code\" :content=\"item.name\" :status=\"item.status || 'default'\" @click=\"item.callback\" />\r\n                </span>\r\n              </div>\r\n            </template>\r\n          </BsTable>\r\n        </div>\r\n      </div>\r\n      <div v-show=\"!disabled\" slot=\"footer\" style=\"width:100%;height: 80px;margin:0 15px\">\r\n        <div v-if=\"showbox\" id=\"bigbox\"></div>\r\n        <el-divider style=\"color:#E7EBF0\" />\r\n        <div type=\"flex\" justify=\"end\">\r\n          <div style=\"width:100%\">\r\n            <vxe-button id=\"savebutton\" style=\"float:right;margin-right:20px\" status=\"primary\" @click=\"sureButton\">确定</vxe-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--规则定义-->\r\n    <div v-show=\"ruleDesShow\" class=\"payVoucherInput\" style=\"margin-top:50px;\">\r\n      <div>\r\n        <div>\r\n          <el-row>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;引用模板</div>\r\n                    <el-input\r\n                      v-model=\"crTemplate\"\r\n                      :disabled=\"true\"\r\n                      placeholder=\"请输入模板名称\"\r\n                      style=\"width:45%\"\r\n                    />\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;业务系统</div>\r\n                    <el-select\r\n                      v-model=\"businessSystemCode\"\r\n                      :disabled=\"true\"\r\n                      placeholder=\"请选择业务系统\"\r\n                      style=\"width:45%\"\r\n                      @change=\"changeSysCode\"\r\n                    >\r\n                      <el-option\r\n                        v-for=\"item in businessSystemCodeoptions\"\r\n                        :key=\"item.id\"\r\n                        :label=\"item.businessName\"\r\n                        :value=\"item.id\"\r\n                      />\r\n                    </el-select>\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;业务模块</div>\r\n                    <el-select\r\n                      v-model=\"businessModuleCode\"\r\n                      :disabled=\"true\"\r\n                      placeholder=\"请选择业务模块\"\r\n                      style=\"width:45%\"\r\n                      @change=\"changeModCode\"\r\n                    >\r\n                      <el-option\r\n                        v-for=\"item in businessModuleCodeoptions\"\r\n                        :key=\"item.id\"\r\n                        :label=\"item.businessName\"\r\n                        :value=\"item.id\"\r\n                      />\r\n                    </el-select>\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font v-show=\"triggerClass !== 2\" color=\"red\">*</font>&nbsp;业务菜单</div>\r\n                    <!--<el-select-->\r\n                    <!--  v-model=\"businessFunctionCode\"-->\r\n                    <!--  :disabled=\"disabled\"-->\r\n                    <!--  multiple=\"true\"-->\r\n                    <!--  placeholder=\"请选择业务菜单\"-->\r\n                    <!--  style=\"width:45%\"-->\r\n                    <!--  @change=\"changeFunCode\"-->\r\n                    <!--&gt;-->\r\n                    <!--  <el-option-->\r\n                    <!--    v-for=\"item in businessFunctionCodeoptions\"-->\r\n                    <!--    :key=\"item.id\"-->\r\n                    <!--    :label=\"item.businessName\"-->\r\n                    <!--    :value=\"item.id\"-->\r\n                    <!--  />-->\r\n                    <!--</el-select>-->\r\n                    <BsTree\r\n                      ref=\"businessFunctionCodeModalRef\"\r\n                      :key=\"refleshKey\"\r\n                      v-model=\"businessFunctionCodeModal\"\r\n                      :is-drop-select-tree=\"true\"\r\n                      :editable=\"true\"\r\n                      :tree-data=\"businessFunctionTreeData\"\r\n                      :default-checked-keys=\"businessFunctionCode\"\r\n                      v-bind=\"{ config: { ...businessFunctionTreeConfig, disabled } }\"\r\n                      class=\"businessFunctionTree\"\r\n                      style=\"display: inline-block;\"\r\n                    />\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;监控规则名称</div>\r\n                    <el-input\r\n                      v-model=\"monitorRuleName\"\r\n                      :disabled=\"disabled\"\r\n                      placeholder=\"请输入监控规则名称\"\r\n                      style=\"width:45%\"\r\n                    />\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;规则类型</div>\r\n                    <el-input\r\n                      v-model=\"fiRuleTypeCodeName\"\r\n                      :disabled=\"true\"\r\n                      placeholder=\"规则类型\"\r\n                      style=\"width:45%\"\r\n                    />\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;监控主题</div>\r\n                    <BsTree\r\n                      ref=\"regulationTreeRef\"\r\n                      v-model=\"regulationClass\"\r\n                      :is-drop-select-tree=\"true\"\r\n                      :editable=\"true\"\r\n                      :tree-data=\"regulationClassoptions\"\r\n                      :config=\"{ disabled: disabled,treeProps: { nodeKey: 'code', label: 'name',children: 'children' } }\"\r\n\r\n                      class=\"businessFunctionTree\"\r\n                      style=\"display: inline-block;\"\r\n                      @onNodeClick=\"regulationNodeClick\"\r\n                    />\r\n                    <!-- <el-select\r\n                      v-model=\"regulationClass\"\r\n                      :disabled=\"disabled || $parent.dialogVisibleRules\"\r\n                      placeholder=\"请选择监控主题\"\r\n                      style=\"width:45%\"\r\n                      @change=\"selectRule\"\r\n                    >\r\n                      <el-option\r\n                        v-for=\"item in regulationClassoptions\"\r\n                        :key=\"item.id\"\r\n                        :label=\"item.regulationName\"\r\n                        :value=\"item.regulationName\"\r\n                      />\r\n                    </el-select> -->\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;预警级别</div>\r\n                    <el-select\r\n                      v-model=\"warningLevel\"\r\n                      :disabled=\"disabled\"\r\n                      placeholder=\"请选择预警级别\"\r\n                      style=\"width:45%\"\r\n                      @change=\"chooseWarningLevel\"\r\n                    >\r\n                      <el-option\r\n                        v-for=\"item in warningLeveloptions\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                      />\r\n                    </el-select>\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;处理方式</div>\r\n                    <el-select\r\n                      v-model=\"handleType\"\r\n                      :disabled=\"true\"\r\n                      placeholder=\"请选择处理方式\"\r\n                      style=\"width:45%\"\r\n                      @change=\"choosehandleType\"\r\n                    >\r\n                      <el-option\r\n                        v-for=\"item in handleTypeoptions\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                      />\r\n                    </el-select>\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;触发类型</div>\r\n                    <el-select\r\n                      v-model=\"triggerClass\"\r\n                      :disabled=\"disabled\"\r\n                      placeholder=\"请选择触发类型\"\r\n                      style=\"width:45%\"\r\n                      @change=\"chooseTriggerClass\"\r\n                    >\r\n                      <el-option\r\n                        v-for=\"item in triggerClassoptions\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                      />\r\n                    </el-select>\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;函数逻辑关系</div>\r\n                    <el-select\r\n                      v-model=\"ruleFlag\"\r\n                      :disabled=\"disabled\"\r\n                      placeholder=\"请选择函数逻辑关系\"\r\n                      style=\"width:45%\"\r\n                    >\r\n                      <el-option\r\n                        v-for=\"item in ruleFlagOptions\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                      />\r\n                    </el-select>\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n            <el-col v-if=\"sx\" :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;提醒位置</div>\r\n                    <el-select\r\n                      v-model=\"warnLocation\"\r\n                      :disabled=\"disabled\"\r\n                      placeholder=\"请选择提醒位置\"\r\n                      style=\"width:45%\"\r\n                    >\r\n                      <el-option\r\n                        v-for=\"item in warnLocationOptions\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                      />\r\n                    </el-select>\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\">预警类别</div>\r\n                    <el-select\r\n                      v-model=\"warnType\"\r\n                      :disabled=\"disabled\"\r\n                      placeholder=\"请选择预警类别\"\r\n                      style=\"width:45%\"\r\n                    >\r\n                      <el-option\r\n                        v-for=\"item in warnTypeOptions\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                      />\r\n                    </el-select>\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\">是否必传附件</div>\r\n                    <el-select\r\n                      v-model=\"uploadFile\"\r\n                      :disabled=\"disabled\"\r\n                      placeholder=\"请选择是否必传附件\"\r\n                      style=\"width:45%\"\r\n                    >\r\n                      <el-option\r\n                        v-for=\"item in uploadFileOptions\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                      />\r\n                    </el-select>\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row>\r\n            <el-col :span=\"24\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;预警提示</div>\r\n                    <el-input\r\n                      v-model=\"policiesDescription\"\r\n                      type=\"textarea\"\r\n                      :disabled=\"disabled\"\r\n                      :rows=\"2\"\r\n                      :maxlength=\"200\"\r\n                      placeholder=\"请填写预警提示\"\r\n                      style=\" width:90%\"\r\n                    />\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row>\r\n            <el-col :span=\"24\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;规则描述</div>\r\n                    <el-input\r\n                      v-model=\"fiRuleDesc\"\r\n                      type=\"textarea\"\r\n                      :disabled=\"disabled\"\r\n                      :rows=\"2\"\r\n                      placeholder=\"请填写规则描述\"\r\n                      style=\" width:90%\"\r\n                    />\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n          </el-row>\r\n          <el-row>\r\n            <el-col :span=\"24\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;规则依据</div>\r\n                    <el-input\r\n                      v-model=\"implDesc\"\r\n                      type=\"textarea\"\r\n                      :disabled=\"disabled\"\r\n                      :rows=\"2\"\r\n                      placeholder=\"请填写规则依据\"\r\n                      style=\" width:90%\"\r\n                    />\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n      </div>\r\n      <div style=\"margin-bottom: 10px; color: red\">\r\n        <p>注意：</p>\r\n        <p>1.【主管部门】和【业务处室】默认全部，不进行处室过滤，只有少数规则需要根据处室过滤权限时才使用此字段 ！</p>\r\n        <p>2.预警级别与处理方式对应关系统一为：{{ $store.state.warnInfo.warnLevelOptions.map(item => `${item.label}（${item.warnTips}）`).join('、') }}</p>\r\n        <p>3.触发类型中“实时触发”指的是事中监控，“定时触发”指的是事后监控，定时触发需要设置触发时间和频率才能生效，比如：每月1次，定时触发的监控规则【处理方式】必须选择“记录”。</p>\r\n      </div>\r\n      <div class=\"header-table\">\r\n        <BsTable\r\n          ref=\"mountTableRef\"\r\n          height=\"300px\"\r\n          :table-global-config=\"{ showOverflow: false }\"\r\n          :footer-config=\"{ showFooter: false }\"\r\n          :edit-config=\"editConfig\"\r\n          :edit-rules=\"editRulesIn\"\r\n          :table-columns-config=\"mountTableColumnsConfig\"\r\n          :table-data=\"mountTableData\"\r\n          :toolbar-config=\"false\"\r\n          :pager-config=\"false\"\r\n        >\r\n          <template\r\n            v-slot:column-editParam=\"{ row, column }\"\r\n          >\r\n            <div class=\"custom-cell\" style=\"font-size: 14px\">\r\n              <div v-if=\"row.paramType !== '5'\">\r\n                <vxe-input v-model=\"row.param\" />\r\n              </div>\r\n              <div v-else>\r\n                <vxe-select\r\n                  v-model=\"row.param\"\r\n                  :options=\"functionSelectOptions\"\r\n                  :option-props=\"{ label: 'value', value: 'regId' }\"\r\n                  :placeholder=\"column.title\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <template\r\n            v-slot:column-defaultParam=\"{ row }\"\r\n          >\r\n            <span>{{ getFunctionLabel(row.param) }}</span>\r\n          </template>\r\n        </BsTable>\r\n      </div>\r\n    </div>\r\n    <!--应用设置-->\r\n    <div v-show=\"appSetShow\" class=\"payVoucherInput\" style=\"margin-top:50px;\">\r\n      <BsForm\r\n        ref=\"messageForm\"\r\n        :is-editable=\"true\"\r\n        :form-items-config=\"formItemsConfigMessage\"\r\n        :form-data-list.sync=\"formDatas\"\r\n        :form-validation-config=\"formValidationConfigMessage\"\r\n        @itemChange=\"formItemChange\"\r\n      />\r\n      <div style=\"margin-bottom: 10px; color: red; margin-top:100px\">\r\n        <p>注意：</p>\r\n        <p>1.当收款人名称和资金用途的关键字为多个时，请使用英文逗号“,”隔开进行填写，例如：楼阁修建,高尔夫球场,名画；</p>\r\n        <p>2.若业务数据满足上述条件任意一项就跳过该规则校验，即不预警</p>\r\n      </div>\r\n    </div>\r\n    <!--生效范围-->\r\n    <div v-show=\"effectiveShow\" class=\"payVoucherInput\" style=\"margin-top:50px;\">\r\n      <el-row>\r\n        <el-col :span=\"12\">\r\n          <el-container>\r\n            <el-main width=\"100%\">\r\n              <el-row>\r\n                <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;管理级次</div>\r\n                <el-input\r\n                  v-model=\"regulationType\"\r\n                  :disabled=\"true\"\r\n                  placeholder=\"请输入管理级次\"\r\n                  style=\"width:45%\"\r\n                />\r\n              </el-row>\r\n            </el-main>\r\n          </el-container>\r\n        </el-col>\r\n      </el-row>\r\n      <div>\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-container>\r\n              <el-main width=\"100%\">\r\n                <el-row>\r\n                  <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;生效范围</div>\r\n                  <BsTree\r\n                    ref=\"rightTree\"\r\n                    style=\"height: calc(100% - 100px)\"\r\n                    :tree-data=\"treeData\"\r\n                    :config=\"{ multiple: true, rootName: '全部', disabled: false, treeProps: { nodeKey: 'id', label: 'name',children: 'children' ,id: 'id' } }\"\r\n                    :default-checked-keys=\"defaultCheckedKeys\"\r\n                    @onNodeCheckClick=\"onNodeCheckClick\"\r\n                  />\r\n                </el-row>\r\n              </el-main>\r\n            </el-container>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n      <!-- <div v-show=\"!disabled\" slot=\"footer\" style=\"width:100%;height: 80px;margin:0 15px\">\r\n        <div v-if=\"showbox\" id=\"bigbox\"></div>\r\n        <el-divider style=\"color:#E7EBF0\" />\r\n        <div type=\"flex\" justify=\"end\">\r\n          <div style=\"width:100%\">\r\n            <el-button id=\"savebutton\" :loading=\"submitLoading\" style=\"float:right;margin-right:20px\" type=\"primary\" @click=\"doInsert\">确定</el-button>\r\n            <el-button style=\"float:right;margin-right:20px\" @click=\"dialogClose\">取消</el-button>\r\n          </div>\r\n        </div>\r\n      </div> -->\r\n    </div>\r\n  </vxe-modal>\r\n</template>\r\n<script>\r\nimport { proconf } from '../SystemLevelRules.js'\r\nimport HttpModule from '@/api/frame/main/Monitoring/levelRules.js'\r\nimport queryTreedElementByCodeMixin from '@/mixin/queryTreedElementByCode.js'\r\nimport functionSelectMixin from '@/mixin/functionSelectMixin.js'\r\n\r\nexport default {\r\n  name: 'AddDialog',\r\n  mixins: [queryTreedElementByCodeMixin, functionSelectMixin],\r\n  components: {},\r\n  computed: {\r\n    curNavModule() {\r\n      return this.$store.state.curNavModule\r\n    },\r\n    toolbarConfig() {\r\n      return {\r\n        disabledMoneyConversion: false,\r\n        moneyConversion: false, // 是否有金额转换\r\n        import: false,\r\n        checkType: this.title !== '查看详情',\r\n        refresh: this.title !== '查看详情'\r\n      }\r\n    },\r\n    globalConfig() {\r\n      let config = { // 全局默认渲染列配置\r\n        // 全局配置\r\n        checkType: '', // hasCheckbox 可选值 ''||checkbox||radio\r\n        seq: false // 序号列\r\n      }\r\n      if (this.title === '查看详情') {\r\n        return {\r\n          ...config,\r\n          ...this.tableConfig\r\n        }\r\n      }\r\n      return this.tableConfig\r\n    }\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      refleshKey: Date.now(),\r\n      submitLoading: false,\r\n      treeData: [],\r\n      editConfig: {\r\n        trigger: 'dblclick',\r\n        mode: 'cell'\r\n      },\r\n      sx: this.$store.getters.isSx,\r\n      disabled: false,\r\n\r\n      editRulesIn: {\r\n        param: [{ required: true, type: 'float', trigger: 'change', message: '请输入规则定义的参数值' }]\r\n      },\r\n      buttonConfig: {\r\n        // table工具栏配置\r\n        disabledMoneyConversion: false,\r\n        moneyConversion: false // 是否有金额转换\r\n        // buttons: [\r\n        //   { code: 'sure', name: '确定', status: 'primary', callback: this.sureButton }\r\n        // ]\r\n      },\r\n      tempNodes: [],\r\n      regulationModelName: '',\r\n      regulationModelCode: '',\r\n      tableLoading: false,\r\n      monitorTableColumnsConfig: proconf.monitorSetTableColumnsConfig,\r\n      operationTableData: [],\r\n      tabbtn: ['模板信息', '规则定义', '白名单', '生效范围'],\r\n      ruleSetShow: true,\r\n      ruleDesShow: false,\r\n      appSetShow: false,\r\n      effectiveShow: false,\r\n      activeIndex: 0,\r\n      crTemplate: '',\r\n      monitorRuleName: '',\r\n      regulationType: '',\r\n      quhua: '',\r\n      mountTableColumnsConfig: proconf.mountTableColumnsConfig,\r\n      mountTableData: [],\r\n      // BsQuery 查询栏\r\n      queryConfig: proconf.sethighQueryConfig,\r\n      searchDataList: proconf.sethighQueryData,\r\n      // table 配置\r\n      tableConfig: {\r\n        renderers: {\r\n          // 编辑 附件 操作日志\r\n          $payVoucherInputGloableOptionRow: proconf.gloableOptionRow\r\n        },\r\n        methods: {\r\n          onOptionRowClick: this.onOptionRowClick\r\n        }\r\n      },\r\n      businessModule: '',\r\n      businessModuleoptions: [\r\n        { value: '1', label: '610000000-陕西省本级' },\r\n        { value: '2', label: '610100000-西安市本级' },\r\n        { value: '3', label: '610102000-新城区本级' },\r\n        { value: '4', label: '610102998-新城区辖区' }\r\n      ],\r\n      businessFunction: '',\r\n      businessFunctionoptions: [\r\n        { value: '1', label: '000001-预算处预留' },\r\n        { value: '2', label: '001001-省级财政专项资金' },\r\n        { value: '3', label: '610102000-新城区本级' },\r\n        { value: '4', label: '610102998-新城区辖区' }\r\n      ],\r\n      warningLevel: 1,\r\n      warningLeveloptions: this.$store.state.warnInfo.warnLevelOptions,\r\n      handleType: 1,\r\n      handleTypeoptions: this.$store.state.warnInfo.warnControlTypeOptions,\r\n      triggerClass: 1,\r\n      triggerClassoptions: [\r\n        { value: 1, label: '实时触发' },\r\n        { value: 2, label: '定时触发' }\r\n      ],\r\n      isEnable: 0,\r\n      isEnableoptions: [\r\n        { value: 0, label: '否' },\r\n        { value: 1, label: '是' }\r\n      ],\r\n      ruleFlag: 1,\r\n      ruleFlagOptions: [\r\n        { value: 0, label: '或' },\r\n        { value: 1, label: '且' }\r\n      ],\r\n      warnLocation: 3,\r\n      warnLocationOptions: [\r\n        { value: 1, label: '门户' },\r\n        { value: 2, label: '核算' },\r\n        { value: 3, label: '不提示' }\r\n      ],\r\n      warnType: '',\r\n      warnTypeOptions: [\r\n        { value: '1', label: '流向' },\r\n        { value: '2', label: '流速' },\r\n        { value: '3', label: '流量' },\r\n        { value: '4', label: '其他' }\r\n      ],\r\n      uploadFile: '',\r\n      uploadFileOptions: [\r\n        { value: '1', label: '是' },\r\n        { value: '0', label: '否' }\r\n      ],\r\n      regulationClass: '',\r\n      regulationClassName: '',\r\n      regulationClassoptions: [\r\n        // { value: 1, label: '直达资金监控规则' },\r\n        // { value: 2, label: '大额支付监控' },\r\n        // { value: 3, label: '同户名转账' },\r\n        // { value: 4, label: '工资支出相关规则' },\r\n        // { value: 5, label: '支出不规范' },\r\n        // { value: 6, label: '支付信息不规范' },\r\n        // { value: 7, label: '禁止使用科目' },\r\n        // { value: 8, label: '资金用途使用不规范' },\r\n        // { value: 9, label: '其他规则' },\r\n        // { value: 10, label: '基础财务信息' },\r\n        // { value: 11, label: '人员类规则' },\r\n        // { value: 12, label: '期初及使用预警规则' },\r\n        // { value: 13, label: '凭证类规则' },\r\n        // { value: 14, label: '其他类规则' },\r\n        // { value: 15, label: '分析类规则' }\r\n      ],\r\n      fiRuleTypeCode: '',\r\n      fiRuleTypeName: '',\r\n      fiRuleTypeCodeName: '',\r\n      policiesName: '',\r\n      policiesDescription: '',\r\n      fiRuleDesc: '',\r\n      implDesc: '',\r\n      dialogVisible: true,\r\n      addLoading: false,\r\n      token: '',\r\n      scope: [],\r\n      isContinuity: false,\r\n      // 文件上传相关参数\r\n      fileList: [],\r\n      fileData: [],\r\n      fileDataBakDel: [],\r\n      attachmentId: '',\r\n      showbox: false,\r\n      businessSystemCode: '',\r\n      businessSystemName: '',\r\n      businessSystemCodeoptions: [],\r\n      businessModuleCode: '',\r\n      businessModuleName: '',\r\n      businessModuleCodeoptions: [],\r\n      businessFunctionCode: [],\r\n      businessFunctionName: [],\r\n      businessFunctionCodeoptions: [],\r\n      departmentCode: '',\r\n      departmentName: '',\r\n      departmentCodeoptions: [],\r\n      SysparentId: 0,\r\n      ModparentId: 0,\r\n      formItemsConfigMessage: proconf.formItemsConfigMessage,\r\n      paymentLen: 0,\r\n      paymentData: [],\r\n      formDatas: {\r\n        payment: '',\r\n        useDes: '',\r\n        payeeAcctNo: '',\r\n        payeeAcctName: '',\r\n        des: '',\r\n        basis: ''\r\n      },\r\n      formValidationConfigMessage: proconf.formValidationConfigMessage\r\n    }\r\n  },\r\n  methods: {\r\n    formItemChange(obj) {\r\n      if (obj.property === 'payment') {\r\n        let data = obj.itemValue ? obj.itemValue.split(',').slice(1) : []\r\n        let content = this.formItemsConfigMessage[0].itemRender.options\r\n        this.formItemsConfigMessage.splice(1, this.paymentLen)\r\n        if (this.paymentData) {\r\n          if (data.length < this.paymentLen) {\r\n            this.paymentData.forEach(item => {\r\n              if (data.indexOf(item) === -1) {\r\n                this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + '__viewSort'] = ''\r\n                this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'code'] = ''\r\n                this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'code__multiple'] = []\r\n                this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'id'] = ''\r\n                this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'id__multiple'] = []\r\n                this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'name'] = ''\r\n                this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'name__multiple'] = []\r\n              }\r\n            })\r\n          }\r\n        }\r\n        this.paymentData = data\r\n        this.paymentLen = data.length\r\n        let datas = {}\r\n        data.forEach((item, index) => {\r\n          if (item === '1') {\r\n            datas = this.createPro(content[item], false)\r\n          } else if (item) {\r\n            datas = this.createObj(content[item], false)\r\n          }\r\n          this.formItemsConfigMessage.splice(1 + index, 0, datas)\r\n        })\r\n      } else {\r\n        this.formDatas = Object.assign(this.formDatas, obj.data)\r\n      }\r\n    },\r\n    createPro(obj, disabled) {\r\n      return {\r\n        insertMark: obj.label,\r\n        isNew: true,\r\n        title: obj.label,\r\n        field: obj.name,\r\n        align: 'left',\r\n        title__viewSort: obj.label,\r\n        field__viewSort: obj.name,\r\n        name: '$vxeTree',\r\n        itemRender: {\r\n          name: '$vxeTree',\r\n          options: [],\r\n          props: {\r\n            config: {\r\n              treeProps: {\r\n                labelFormat: '{code}-{name}',\r\n                nodeKey: 'code',\r\n                label: 'name',\r\n                children: 'children' // 子级字段名\r\n              },\r\n              placeholder: `请选择${obj.label}`,\r\n              multiple: true,\r\n              disabled,\r\n              isleaf: false,\r\n              axiosConfig: {\r\n                method: 'post',\r\n                url: 'large-monitor-platform/lmp/elementQuery/elementtree',\r\n                successCode: '000000', // 成功code\r\n                statusField: 'code'\r\n              }\r\n            },\r\n            queryparams: {\r\n              condition: '',\r\n              elementCode: 'pro',\r\n              year: this.$store.state.userInfo.year,\r\n              province: this.$store.state.userInfo.province,\r\n              limit: 2000,\r\n              offset: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    createObj(obj, disabled) {\r\n      return {\r\n        insertMark: obj.label,\r\n        isNew: true,\r\n        title: obj.label,\r\n        field: obj.name,\r\n        align: 'left',\r\n        title__viewSort: obj.label,\r\n        field__viewSort: obj.name,\r\n        name: '$vxeTree',\r\n        itemRender: {\r\n          name: '$vxeTree',\r\n          options: [],\r\n          props: {\r\n            config: {\r\n              treeProps: {\r\n                nodeKey: 'id',\r\n                label: '{name}',\r\n                labelFormat: '{code}-{name}',\r\n                children: 'children' // 子级字段名\r\n              },\r\n              placeholder: `请选择${obj.label}`,\r\n              disabled,\r\n              multiple: true,\r\n              isleaf: false,\r\n              axiosConfig: {\r\n                method: 'post',\r\n                // url: `mp-b-basedata-service/v2/elevalueset/view/jstreedata/${obj.urlC}`\r\n                url: 'large-monitor-platform/lmp/elementQuery/elementtree',\r\n                successCode: '000000', // 成功code\r\n                statusField: 'code'\r\n              }\r\n            },\r\n            queryparams: {\r\n              elementCode: obj.urlC,\r\n              date: this.$store.state.userInfo.year,\r\n              tokenid: this.$store.getters.getLoginAuthentication.tokenid,\r\n              appguid: 'apaas',\r\n              year: this.$store.state.userInfo.year,\r\n              mofDivCode: this.$store.state.userInfo.province,\r\n              parameters: {}\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    chooseWarningLevel(val) {\r\n      if (val === 1) {\r\n        this.handleType = 1\r\n      } else if (val === 2) {\r\n        this.handleType = 2\r\n      } else if (val === 3) {\r\n        this.handleType = 3\r\n      } else if (val === 4) {\r\n        this.handleType = 4\r\n      } else if (val === 5) {\r\n        this.handleType = 5\r\n      }\r\n    },\r\n    choosehandleType(val) {\r\n      if (val === 1) {\r\n        this.warningLevel = 1\r\n      } else if (val === 2) {\r\n        this.warningLevel = 2\r\n      } else if (val === 3) {\r\n        this.warningLevel = 3\r\n      } else if (val === 4) {\r\n        this.warningLevel = 4\r\n      } else if (val === 5) {\r\n        this.warningLevel = 5\r\n      }\r\n    },\r\n    chooseTriggerClass(val) {\r\n      if (val === 2) {\r\n        this.warningLevel = 5\r\n        this.handleType = 5\r\n      }\r\n      if (val === 1) {\r\n        this.warningLevel = 1\r\n        this.handleType = 1\r\n      }\r\n    },\r\n    sureButton() {\r\n      let that = this\r\n      that.mountTableData = []\r\n      let datas = this.$refs.monitorTableRef.getSelectionData()\r\n      if (datas.length !== 1) {\r\n        this.$XModal.message({ status: 'warning', message: '请选择一条数据数据！' })\r\n        return\r\n      }\r\n      console.log(datas)\r\n      this.crTemplate = datas[0].ruleTemplateName\r\n      this.businessModule = datas[0].businessModuleName\r\n      this.businessFunction = datas[0].businessFunctionName\r\n      this.regulationModelCode = datas[0].ruleTemplateCode\r\n      this.fiRuleTypeCode = datas[0].fiRuleTypeCode\r\n      this.fiRuleTypeName = datas[0].fiRuleTypeName\r\n      if (datas[0].fiRuleTypeCode && datas[0].fiRuleTypeName) {\r\n        this.fiRuleTypeCodeName = ((datas[0].fiRuleTypeCode + '').slice(0, 1) === '1' ? '中央' : '地方') + '-' + datas[0].fiRuleTypeName\r\n      } else {\r\n        this.fiRuleTypeCodeName = ''\r\n      }\r\n      // this.regulationModelName = datas[0]\r\n      this.ruleSetShow = false\r\n      this.ruleDesShow = true\r\n      this.appSetShow = false\r\n      this.effectiveShow = false\r\n      this.activeIndex = 1\r\n      this.businessSystemCode = datas[0].businessSystemCode\r\n      this.changeSysCode(this.businessSystemCode)\r\n\r\n      this.businessModuleCode = datas[0].businessModuleCode\r\n      this.changeModCode(this.businessModuleCode)\r\n      let datas1 = this.$refs.mountTableRef.getSelectionData()\r\n      console.log(datas1)\r\n      HttpModule.getTemplateByCode({ ruleTemplateCode: datas[0].ruleTemplateCode }).then(res => {\r\n        if (res.code === '000000') {\r\n          res.data.functionInfoList.forEach(item => {\r\n            let tempObj = {\r\n              functionName: '',\r\n              functionCode: '',\r\n              functionParameter: '',\r\n              description: '',\r\n              relation: '1',\r\n              paramType: '1',\r\n              param: ''\r\n            }\r\n            tempObj.functionParameter = item.functionParameter\r\n            tempObj.description = item.description\r\n            tempObj.functionName = item.functionName\r\n            tempObj.functionCode = item.functionCode\r\n            that.mountTableData.push(tempObj)\r\n          })\r\n        } else {\r\n          that.$message.warning('加载失败')\r\n        }\r\n        that.tableLoading = false\r\n      })\r\n      console.log(datas)\r\n    },\r\n    cancelButton() { console.log('取消', this.$store.state.curNavModule.f_FullName.substring(0, 3)) },\r\n    // tab切换\r\n    tabClick(index) {\r\n      this.activeIndex = index\r\n      if (this.activeIndex === 0) {\r\n        this.ruleSetShow = true\r\n        this.ruleDesShow = false\r\n        this.appSetShow = false\r\n        this.effectiveShow = false\r\n      } else if (this.activeIndex === 1) {\r\n        this.ruleSetShow = false\r\n        this.ruleDesShow = true\r\n        this.appSetShow = false\r\n        this.effectiveShow = false\r\n      } else if (this.activeIndex === 2) {\r\n        this.ruleSetShow = false\r\n        this.ruleDesShow = false\r\n        this.appSetShow = true\r\n        this.effectiveShow = false\r\n      } else if (this.activeIndex === 3) {\r\n        this.ruleSetShow = false\r\n        this.ruleDesShow = false\r\n        this.appSetShow = false\r\n        this.effectiveShow = true\r\n      } else if (this.activeIndex === 4) {\r\n        this.ruleSetShow = false\r\n        this.ruleDesShow = false\r\n        this.appSetShow = false\r\n        this.effectiveShow = false\r\n      }\r\n    },\r\n    getTableData(val) {\r\n      let that = this\r\n      console.log('getTableData', that.searchDataList)\r\n      that.tableLoading = true\r\n      let param = {\r\n        page: 1,\r\n        pageSize: 500,\r\n        ...that.searchDataList\r\n      }\r\n      HttpModule.getPageQuery(param).then(res => {\r\n        if (res.code === '000000' && res.data.results) {\r\n          that.operationTableData = res.data.results\r\n        } else {\r\n          that.$message.warning('加载失败')\r\n        }\r\n        that.tableLoading = false\r\n      })\r\n    },\r\n    onNodeCheckClick(data) {\r\n      console.log(data.nodes)\r\n      let arr = []\r\n\r\n      let regulationType = this.$store.state.curNavModule.f_FullName.substring(0, 3)\r\n      if (regulationType === '系统级') {\r\n        data.nodes.forEach(item => {\r\n          if (item.isleaf) {\r\n            let obj = {\r\n              mofDivCode: '',\r\n              agencyCode: '',\r\n              mofDiv: ''\r\n            }\r\n            obj.mofDivId = item.id\r\n            obj.mofDivCode = item.code\r\n            arr.push(obj)\r\n          }\r\n        })\r\n      } else if (regulationType === '部门级') {\r\n        data.nodes.forEach(item => {\r\n          if (item.isleaf) {\r\n            let obj = {\r\n              mofDivCode: '',\r\n              agencyCode: ''\r\n            }\r\n            obj.mofDivId = item.id\r\n            obj.agencyCode = item.code\r\n            arr.push(obj)\r\n          }\r\n        })\r\n      } else if (regulationType === '财政级') {\r\n        data.nodes.forEach(item => {\r\n          if (item.isleaf) {\r\n            let obj = {\r\n              mofDivCode: '',\r\n              agencyCode: ''\r\n            }\r\n            obj.mofDivId = item.id\r\n            obj.agencyCode = item.code\r\n            arr.push(obj)\r\n          }\r\n        })\r\n      }\r\n      console.log('arr', arr)\r\n      this.scope = arr\r\n    },\r\n    getChildrenNewData(datas) {\r\n      let that = this\r\n      datas.forEach(item => {\r\n        item.label = item.name\r\n        // item.code = item.id\r\n        // item.guid = item.id\r\n        // item.name = item.text || item.name\r\n        if (item.children) {\r\n          that.getChildrenNewData(item.children)\r\n        }\r\n      })\r\n\r\n      return datas\r\n    },\r\n    search(obj) {\r\n      console.log(obj)\r\n      this.searchDataList.ruleTemplateName = obj.ruleTemplateName\r\n      this.searchDataList.businessSystemCode = obj.businessSystem_code\r\n      this.searchDataList.businessModuleCode = obj.businessModule_code\r\n      this.searchDataList.businessFunctionCode = obj.businessFunction_code\r\n\r\n      this.searchDataList.businessModuleName = obj.businessModuleName\r\n      this.searchDataList.businessSystemName = obj.businessSystemName\r\n      this.searchDataList.businessFunctionName = obj.businessFunctionName\r\n      this.getTableData()\r\n    },\r\n    // 高级查询下拉框\r\n    itemChange(obj, form) {\r\n      console.log(obj, form)\r\n      if (obj.property === 'businessSystem') {\r\n        this.getBusinessModelCodeDatas({ businessType: '2', parentId: obj.node.id })\r\n      }\r\n      if (obj.property === 'businessModule') {\r\n        this.getBusinessModelCodeDatas({ businessType: '3', parentId: obj.node.id })\r\n      }\r\n    },\r\n    getChildrenData(datas) {\r\n      let that = this\r\n      datas.forEach(item => {\r\n        item.code = item.id\r\n        item.name = item.businessName\r\n        item.label = item.id + '-' + item.businessName\r\n        if (item.children) {\r\n          that.getChildrenData(item.children)\r\n        }\r\n      })\r\n\r\n      return datas\r\n    },\r\n    // // 获取业务模块\r\n    getBusinessModelCodeDatas(val) {\r\n      let that = this\r\n      HttpModule.getBusinessTreeData(val).then(res => {\r\n        if (res.code === '000000' && res.data.results) {\r\n          let treeResdata = that.getChildrenData(res.data.results)\r\n          const result = [\r\n            {\r\n              id: 'root',\r\n              label: '全部',\r\n              code: 'root',\r\n              name: '全部',\r\n              isleaf: '0',\r\n              children: treeResdata\r\n            }\r\n          ]\r\n          if (val.businessType === '1') {\r\n            that.queryConfig.forEach(item => {\r\n              if (item.field === 'businessSystem') {\r\n                console.log('result', result)\r\n                item.itemRender.options = result\r\n              }\r\n            })\r\n          } else if (val.businessType === '2') {\r\n            that.queryConfig.forEach(item => {\r\n              if (item.field === 'businessModule') {\r\n                item.itemRender.options = result\r\n              }\r\n            })\r\n          } else if (val.businessType === '3') {\r\n            that.queryConfig.forEach(item => {\r\n              if (item.field === 'businessFunction') {\r\n                item.itemRender.options = result\r\n              }\r\n            })\r\n          }\r\n        } else {\r\n          that.$message.warning('加载失败')\r\n        }\r\n      })\r\n    },\r\n    resetFormDataListMessage() {\r\n      let paymentsArr = ['monitore', 'agency_code', 'pro_name', 'bgt_type_code', 'bgt_source_code', 'gov_bgt_eco_code', 'exp_func_code', 'cor_bgt_doc_no_name']\r\n      paymentsArr.forEach(item => {\r\n        this.formDatas[item + '__viewSort'] = ''\r\n        this.formDatas[item + 'code'] = ''\r\n        this.formDatas[item + 'code__multiple'] = []\r\n        this.formDatas[item + 'id'] = ''\r\n        this.formDatas[item + 'id__multiple'] = []\r\n        this.formDatas[item + 'name'] = ''\r\n        this.formDatas[item + 'name__multiple'] = []\r\n      })\r\n      this.formDatas.payment = []\r\n      this.formDatas.payment__multiple = []\r\n      this.formDatas.agency_code = []\r\n      this.formDatas.pro_name = []\r\n      this.formDatas.gov_bgt_eco_code = []\r\n      this.formDatas.exp_func_code = []\r\n      this.formDatas.cor_bgt_doc_no_name = []\r\n      this.formDatas.dep_bgt_eco_code = []\r\n    },\r\n    dialogClose() {\r\n      console.log(this.paymentLen)\r\n      this.formItemsConfigMessage.splice(1, this.paymentLen)\r\n      this.paymentLen = 0\r\n      let form = this.$refs.messageForm\r\n      form.clearValidate()\r\n      this.resetFormDataListMessage()\r\n      this.formItemsConfigMessage.forEach(item => {\r\n        item.itemRender.props.disabled = false\r\n      })\r\n      this.$parent.dialogVisible = false\r\n      this.$parent.dialogVisibleRules = false\r\n      this.$parent?.queryTableDatas?.()\r\n      // 重置\r\n      this.searchDataList.ruleTemplateName = ''\r\n      this.searchDataList.businessSystemName = ''\r\n      this.searchDataList.businessModuleName = ''\r\n    },\r\n    // 处理字符串\r\n    dealwithStr(str) {\r\n      let result = ''\r\n      if (str) {\r\n        if (str.substring(str.length - 7) === '0000000') {\r\n          result = '61'\r\n        } else if (str.substring(str.length - 5) === '00000') {\r\n          result = str.substring(0, 4)\r\n        } else if (str.substring(str.length - 3) === '000') {\r\n          result = str.substring(0, 6)\r\n        } else {\r\n          result = str\r\n        }\r\n        return result\r\n      }\r\n    },\r\n    getCheckData(dataArr, data) {\r\n      data.forEach(item => {\r\n        if (item.isleaf === '1') {\r\n          let obj = {\r\n            mofDivCode: '',\r\n            agencyCode: '',\r\n            mofDiv: ''\r\n          }\r\n          obj.mofDivId = item.code\r\n          obj.mofDivCode = item.name.split('-')[0]\r\n          dataArr.push(obj)\r\n        }\r\n        if (item.children) {\r\n          this.getCheckData(dataArr, item.children)\r\n        }\r\n      })\r\n    },\r\n    getProvince(data) {\r\n      data.children.forEach(item => {\r\n        if (item.province === this.$store.state.userInfo.province) {\r\n          if (this.$store.state.userInfo.province === '610000000') {\r\n            let arr = []\r\n            arr.push(data)\r\n            this.treeData = this.getChildrenNewData(arr)\r\n            let dataArr = []\r\n            this.getCheckData(dataArr, this.treeData)\r\n            this.scope = dataArr\r\n          } else {\r\n            let arr = []\r\n            arr.push(item)\r\n            this.treeData = this.getChildrenNewData(arr)\r\n          }\r\n        } else {\r\n          if (item.children) {\r\n            // let arr = []\r\n            // arr.push(item)\r\n            this.getProvince(item)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    getChildrenNewData1(datas) {\r\n      let that = this\r\n      datas.forEach(item => {\r\n        item.label = item.name\r\n        item.code = item.id\r\n        item.guid = item.id\r\n        // item.name = item.text\r\n        item.disabled = true\r\n        if (item.children) {\r\n          that.getChildrenNewData1(item.children)\r\n        }\r\n      })\r\n\r\n      return datas\r\n    },\r\n    // 获取生效范围\r\n    getWhereTree() {\r\n      this.defaultCheckedKeys = []\r\n      // let that = this\r\n      let result = this.dealwithStr(this.$store.state.userInfo.province)\r\n      // this.$store.state.userInfo.orgCode\r\n      let param = {\r\n        wheresql: 'and code like \\'' + result + '%\\'',\r\n        elementCode: 'admdiv',\r\n        // elementCode: 'AGENCY',\r\n        year: this.$store.state.userInfo.year,\r\n        province: this.$store.state.userInfo.province\r\n      }\r\n      let regulationType = this.$store.state.curNavModule.f_FullName?.substring(0, 3)\r\n      if (regulationType === '部门级') {\r\n        param.elementCode = 'DEPARTMENT'\r\n        param.wheresql = 'and code like \\'' + this.$store.state.userInfo.orgcode + '%\\''\r\n      }\r\n      if (regulationType === '财政级') {\r\n        param.elementCode = 'AGENCY'\r\n        param.wheresql = 'and province =' + this.$store.state.userInfo.province\r\n      }\r\n      HttpModule.getTreewhere(param).then(res => {\r\n        // console.log('that.getChildrenNewData(res.data)', that.getChildrenNewData(res.data))\r\n        // this.treeData = this.getChildrenNewData(res.data)\r\n        console.log(res.data, regulationType)\r\n        if (regulationType === '部门级' || regulationType === '财政级') {\r\n          // let treeResdata = this.getChildrenNewData1(res.data)\r\n          const result = [\r\n            {\r\n              id: 'root',\r\n              label: '全部',\r\n              code: 'root',\r\n              isleaf: '0',\r\n              disabled: this.$parent.dialogTitle === '查看详情',\r\n              name: '全部',\r\n              children: this.$parent.dialogTitle === '查看详情' ? this.getChildrenNewData1(res.data) : this.getChildrenNewData(res.data)\r\n            }\r\n          ]\r\n          this.treeData = result\r\n        } else {\r\n          this.treeData = this.$parent.dialogTitle === '查看详情' ? this.getChildrenNewData1(res.data) : this.getChildrenNewData(res.data)\r\n        }\r\n        if (this.$parent.dialogTitle !== '新增') {\r\n          let tempArr = []\r\n          // let regulationType = this.$store.state.curNavModule.f_FullName.substring(0, 3)\r\n          this.$parent.DetailData.regulationScope?.forEach(item => {\r\n            let str = item.mofDivId.toString()\r\n            // if (regulationType === '部门级') {\r\n            //   str = item.mofDivId.toString()\r\n            // } else {\r\n            //   str = item.mofDivId.toString()\r\n            // }\r\n            tempArr.push(str)\r\n          })\r\n\r\n          // this.$parent.DetailData.regulationScope.forEach(item => {\r\n          //   let str = item.mofDivCode.toString()\r\n          //   tempArr.push(str)\r\n          // })\r\n          console.log(tempArr)\r\n          this.$refs.rightTree.treeOptionFn().setCheckedKeys(tempArr)\r\n          this.defaultCheckedKeys = tempArr\r\n        } else {\r\n          let tempArr = []\r\n          tempArr.push('root')\r\n          let arr = []\r\n          this.scope = this.getArr(this.treeData, arr)\r\n          if (regulationType === '部门级') {\r\n            arr = []\r\n            this.scope = this.getArr(this.treeData, arr)\r\n          } else if (regulationType === '财政级') {\r\n            arr = []\r\n            this.scope = this.getArr1(this.treeData, arr)\r\n            console.log(this.scope)\r\n          }\r\n          this.$nextTick(() => {\r\n            let dataArr = []\r\n            this.scope.forEach(item => {\r\n              let str = ''\r\n              if (regulationType !== '系统级') {\r\n                str = item.agencyId.toString()\r\n              } else {\r\n                str = item.mofDivId.toString()\r\n              }\r\n              dataArr.push(str)\r\n            })\r\n            this.$refs.rightTree.treeOptionFn().setCheckedKeys(dataArr)\r\n            this.defaultCheckedKeys = dataArr\r\n          })\r\n        }\r\n      })\r\n    },\r\n    getArr(data, arr) {\r\n      data.forEach(item => {\r\n        if (item.isleaf) {\r\n          let obj = {\r\n            mofDivCode: item.code,\r\n            agencyCode: '',\r\n            mofDivId: item.id\r\n          }\r\n          obj.agencyId = item.code\r\n          obj.agencyCode = item.code\r\n          arr.push(obj)\r\n        }\r\n        if (item.children) {\r\n          this.getArr(item.children, arr)\r\n        }\r\n      })\r\n      return arr\r\n    },\r\n    getArr1(data, arr) {\r\n      data.forEach(item => {\r\n        if (item.isleaf) {\r\n          let obj = {\r\n            mofDivCode: '',\r\n            agencyCode: '',\r\n            mofDivId: item.id\r\n          }\r\n          obj.agencyId = item.id\r\n          obj.agencyCode = item.code\r\n          arr.push(obj)\r\n        }\r\n        if (item.children) {\r\n          this.getArr1(item.children, arr)\r\n        }\r\n      })\r\n      return arr\r\n    },\r\n    // 保存新增的计划信息\r\n    doInsert() {\r\n      // 校验判断\r\n      let datas = this.$refs.monitorTableRef.getSelectionData()\r\n      if (this.$parent.dialogTitle !== '修改' && this.$parent.dialogTitle !== '复制' && datas.length !== 1) {\r\n        this.$XModal.message({ status: 'warning', message: '请选择一条模板信息！' })\r\n        return\r\n      }\r\n      // if (this.formDatas.payment === '') {\r\n      //   this.$message.warning('请选择基础要素')\r\n      //   return\r\n      // }\r\n      // if (this.formDatas.payeeAcctName === '') {\r\n      //   this.$message.warning('请输入收款人名称')\r\n      //   return\r\n      // }\r\n      // if (this.formDatas.payeeAcctNo === '') {\r\n      //   this.$message.warning('请输入收款人账号')\r\n      //   return\r\n      // }\r\n      // if (this.formDatas.useDes === '') {\r\n      //   this.$message.warning('请输入资金用途')\r\n      //   return\r\n      // }\r\n      // console.log(this.formDatas)\r\n      // let isGo = true\r\n      // this.formDatas.payment.split(',').forEach(item => {\r\n      //   if (!this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name]) {\r\n      //     this.$message.warning('请选择' + this.formItemsConfigMessage[0].itemRender.options[item].label)\r\n      //     isGo = false\r\n      //   }\r\n      // })\r\n      // if (isGo === false) {\r\n      //   return\r\n      // }\r\n      if (!this.monitorRuleName) {\r\n        this.$XModal.message({ status: 'warning', message: '请输入规则名称！' })\r\n        return\r\n      }\r\n\r\n      if (this.businessSystemCode === undefined) {\r\n        this.$message.warning('请选择业务系统')\r\n        return\r\n      }\r\n      if (this.businessSystemName === null) {\r\n        this.$message.warning('请选择业务系统')\r\n        return\r\n      }\r\n      if (this.businessModuleCode === undefined) {\r\n        this.$message.warning('请选择业务模块')\r\n        return\r\n      }\r\n      if (!this.fiRuleDesc) {\r\n        this.$XModal.message({ status: 'warning', message: '请填写规则描述！' })\r\n        return\r\n      }\r\n      if (!this.implDesc) {\r\n        this.$XModal.message({ status: 'warning', message: '请填写规则依据！' })\r\n        return\r\n      }\r\n      if (this.businessModuleName === null) {\r\n        this.$message.warning('请选择业务模块')\r\n        return\r\n      }\r\n      if (this.triggerClass === 1 && (this.businessFunctionCode === undefined || this.businessFunctionCode.length === 0)) {\r\n        this.$message.warning('请选择业务菜单')\r\n        return\r\n      }\r\n      // if (this.businessFunctionName === null) {\r\n      //   this.$message.warning('请选择业务菜单')\r\n      //   return\r\n      // }\r\n      if (this.ruleFlag !== 0 && !this.ruleFlag) {\r\n        this.$message.warning('请选择函数逻辑')\r\n        return\r\n      }\r\n      // if (this.warnLocation) {\r\n      //   this.$message.warning('请选择提醒位置')\r\n      //   return\r\n      // }\r\n      if (!this.policiesDescription) {\r\n        this.$XModal.message({ status: 'warning', message: '请选择预警提示！' })\r\n        return\r\n      }\r\n      console.log('this.monitorRuleName.length', this.monitorRuleName.length)\r\n      if (this.monitorRuleName.length > 120) {\r\n        this.$XModal.message({ status: 'warning', message: '规则名称长度应小于等于120位' })\r\n        return\r\n      }\r\n      if (this.policiesDescription.length > 200) {\r\n        this.$XModal.message({ status: 'warning', message: '预警提示长度应小于等于200位' })\r\n        return\r\n      }\r\n      if (!this.crTemplate) {\r\n        this.$XModal.message({ status: 'warning', message: '请输入模板名称' })\r\n        return\r\n      }\r\n      if (!this.businessSystemCode) {\r\n        this.$XModal.message({ status: 'warning', message: '请选择业务系统' })\r\n        return\r\n      }\r\n      if (!this.businessModuleCode) {\r\n        this.$XModal.message({ status: 'warning', message: '请选择业务模块' })\r\n        return\r\n      }\r\n      // if (!this.businessFunctionCode && this.triggerClass === 1) {\r\n      //   this.$XModal.message({ status: 'warning', message: '请选择业务菜单' })\r\n      //   return\r\n      // }\r\n      if (!this.monitorRuleName) {\r\n        this.$XModal.message({ status: 'warning', message: '请输入监控规则名称' })\r\n        return\r\n      }\r\n      if (!this.regulationClass) {\r\n        this.$XModal.message({ status: 'warning', message: '请选择监控主题' })\r\n        return\r\n      }\r\n      if (!this.warningLevel) {\r\n        this.$XModal.message({ status: 'warning', message: '请选择预警级别' })\r\n        return\r\n      }\r\n      if (!this.handleType) {\r\n        this.$XModal.message({ status: 'warning', message: '请选择处理方式' })\r\n        return\r\n      }\r\n      if (!this.triggerClass) {\r\n        this.$XModal.message({ status: 'warning', message: '请选择触发类型' })\r\n        return\r\n      }\r\n      // if (!this.warnLocation) {\r\n      //   this.$XModal.message({ status: 'warning', message: '请选择提醒位置' })\r\n      //   return\r\n      // }\r\n      // if (!this.warnType) {\r\n      //   this.$XModal.message({ status: 'warning', message: '请选择预警类别' })\r\n      //   return\r\n      // }\r\n      // if (!this.uploadFile) {\r\n      //   this.$XModal.message({ status: 'warning', message: '请选择是否上传附件' })\r\n      //   return\r\n      // }\r\n      if (!this.scope?.length) {\r\n        this.$XModal.message({ status: 'warning', message: '请选择生效范围' })\r\n        return\r\n      }\r\n      this.$refs.mountTableRef.validate().then((res) => {\r\n        if (Object.keys(res).length > 0) {\r\n          let errors = Object.values(res)\r\n          for (let i = 0; i < errors.length; i++) {\r\n            this.$message({ type: 'warning', message: errors[i][0].rule.message })\r\n            return\r\n          }\r\n        }\r\n      })\r\n      let that = this\r\n      let datas1 = this.$refs.mountTableRef.getPureTableData().fullData\r\n      for (let i = 0; i < datas1.length; i++) {\r\n        if (datas1[i].param === null || datas1[i].param === '') {\r\n          this.$message({ type: 'warning', message: '模板：' + datas1[i].functionName + ' 参数值为空' })\r\n          return\r\n        }\r\n      }\r\n      let regulationType = this.$store.state.curNavModule.f_FullName?.substring(0, 3)\r\n      console.log(that.scope)\r\n      let isFull = 0\r\n      if (regulationType === '系统级') {\r\n        regulationType = '1'\r\n        if (that.scope.length === 277) {\r\n          isFull = 1\r\n        }\r\n      } else if (regulationType === '部门级') {\r\n        regulationType = '3'\r\n      } else if (regulationType === '财政级') {\r\n        regulationType = '2'\r\n        if (that.scope.length === 2536) {\r\n          isFull = 1\r\n        }\r\n      }\r\n      let ruleId = ''\r\n      let ruleName = ''\r\n      if (that.regulationClass) {\r\n        let valArr = that.regulationClass.split('-')\r\n        ruleName = valArr[1]\r\n        ruleId = valArr[0]\r\n      }\r\n      console.log(this.regulationClass)\r\n      let formDatas = this.$refs.messageForm.formDataListIn\r\n      let param = {\r\n        'regulationClass': ruleId,\r\n        'regulationClassName': ruleName,\r\n        'triggerClass': that.triggerClass,\r\n        'businessSystemCode': that.businessSystemCode,\r\n        'businessSystemName': that.businessSystemName,\r\n        'businessModuleCode': that.businessModuleCode,\r\n        'businessModuleName': that.businessModuleName,\r\n        'fiRuleTypeCode': that.fiRuleTypeCode,\r\n        'fiRuleTypeName': that.fiRuleTypeName,\r\n        'menuIdList': that.businessFunctionCode.toString(), // 多菜单\r\n        'menuNameList': that.businessFunctionName.toString(),\r\n        // 'businessFunctionCode': that.businessFunctionCode,\r\n        'departmentCode': that.departmentCode,\r\n        'departmentName': that.departmentName,\r\n        // 'businessFunctionName': that.businessFunctionName,\r\n        'regulationName': that.monitorRuleName, // 规则名称\r\n        'regulationType': regulationType, // 规则类型：1.系统级  2.财政级  3.部门级\r\n        'warningLevel': that.warningLevel, // 预警级别\r\n        'handleType': that.handleType, // 处理方式\r\n        'regulationModelCode': that.regulationModelCode, // 模板编码\r\n        'regulationModelName': that.crTemplate, // 模板名称\r\n        'warningTips': that.policiesDescription, // 预警提示\r\n        fiRuleDesc: that.fiRuleDesc,\r\n        implDesc: that.implDesc,\r\n        'regulationStatus': this.$parent.regulationStatus, // 规则状态：1.新增  2.送审  3.审核\r\n        'regulationConfig': datas1,\r\n        'regulationScope': that.scope, // 规则生效范围{mofDivCode: '', angencyCode: ''}\r\n        menuName: this.$store.state.curNavModule.name,\r\n        'ruleFlag': that.ruleFlag,\r\n        'warnLocation': that.warnLocation,\r\n        isFull: isFull,\r\n        ruleElement: {\r\n          payment: formDatas.payment,\r\n          agencyCode: formDatas.agency_code,\r\n          agencyName: formDatas.agency_name,\r\n          proCode: formDatas.pro_code,\r\n          proName: formDatas.pro_name,\r\n          govBgtEcoCode: formDatas.gov_bgt_eco_code,\r\n          govBgtEcoName: formDatas.gov_bgt_eco_name,\r\n          expFunCode: formDatas.exp_func_code,\r\n          expFunName: formDatas.exp_func_name,\r\n          depBgtEcoCode: formDatas.dep_bgt_eco_code,\r\n          depBgtEcoName: formDatas.dep_bgt_eco_name,\r\n          corBgtDocNoName: formDatas.cor_bgt_doc_no_name,\r\n          corBgtDocNoCode: formDatas.cor_bgt_doc_no_code,\r\n          payeeAcctName: formDatas.payeeAcctName,\r\n          payeeAcctNo: formDatas.payeeAcctNo,\r\n          useDes: formDatas.useDes,\r\n          des: formDatas.des,\r\n          basis: formDatas.basis\r\n        },\r\n        warnType: this.warnType, // 预警类别\r\n        uploadFile: this.uploadFile // 是否上传附件\r\n      }\r\n      this.submitLoading = true\r\n      if (this.$parent.dialogTitle === '修改') {\r\n        console.log(this.formDatas)\r\n        param.regulationCode = this.$parent.DetailData.regulationCode\r\n        HttpModule.updateData(param).then(res => {\r\n          if (res.code === '000000') {\r\n            this.dialogVisible = false\r\n            that.$message.success('修改成功')\r\n            this.formItemsConfigMessage.splice(1, this.paymentLen)\r\n            this.paymentLen = 0\r\n            let form = this.$refs.messageForm\r\n            form.clearValidate()\r\n            this.resetFormDataListMessage()\r\n            this.formItemsConfigMessage.forEach(item => {\r\n              item.itemRender.props.disabled = false\r\n            })\r\n            that.$parent.dialogVisible = false\r\n            this.$parent.dialogVisibleRules = false\r\n            this.$parent.queryTableDatas()\r\n          } else {\r\n            that.$message.error(res.message)\r\n          }\r\n        }).finally(() => {\r\n          this.submitLoading = false\r\n          // that.$parent.dialogVisible = false\r\n        })\r\n      } else {\r\n        HttpModule.addData(param).then(res => {\r\n          if (res.code === '000000') {\r\n            this.dialogVisible = false\r\n            that.$message.success('新增成功')\r\n            this.formItemsConfigMessage.splice(1, this.paymentLen)\r\n            this.paymentLen = 0\r\n            let form = this.$refs.messageForm\r\n            form.clearValidate()\r\n            this.resetFormDataListMessage()\r\n            this.formItemsConfigMessage.forEach(item => {\r\n              item.itemRender.props.disabled = false\r\n            })\r\n            that.$parent.dialogVisible = false\r\n            this.$parent.dialogVisibleRules = false\r\n            this.$parent.queryTableDatas()\r\n          } else {\r\n            that.$message.error(res.message)\r\n          }\r\n        }).finally(() => {\r\n          this.submitLoading = false\r\n          // that.$parent.dialogVisible = false\r\n        })\r\n      }\r\n    },\r\n    // 选择业务系统\r\n    changeSysCode(val) {\r\n      console.log(val)\r\n      this.SysparentId = val\r\n      // this.businessModuleCode = ''\r\n      let busName = this.businessSystemCodeoptions.find(item => {\r\n        return item.id === val\r\n      })\r\n      this.businessSystemName = busName.businessName\r\n      this.getModLists()\r\n    },\r\n    // 选择业务模块\r\n    changeModCode(val) {\r\n      this.ModparentId = val\r\n      this.businessFunctionCodeModal = ''\r\n      this.$refs.businessFunctionCodeModalRef.reset?.()\r\n      let busName = this.businessModuleCodeoptions.find(item => {\r\n        return item.id === val\r\n      })\r\n      this.businessModuleName = busName.businessName\r\n      // this.getFunLists()\r\n    },\r\n    changeFunCode(val) {\r\n      console.log(val)\r\n      this.businessFunctionCode = val\r\n      this.businessFunctionName = this.businessFunctionCodeoptions\r\n        ?.filter(item => {\r\n          return this.businessFunctionCode.includes(item.guid)\r\n        })\r\n        ?.map(item => item.name)\r\n      // let busName = this.businessFunctionCodeoptions.find(item => {\r\n      //   return item.id === val\r\n      // })\r\n      // this.businessFunctionName = busName.businessName\r\n      // let busName = []\r\n      // for (let i = 0; i < val.length; i++) {\r\n      //   busName.push(this.businessFunctionCodeoptions.find(item => {\r\n      //     return item.id === val[i]\r\n      //   }))\r\n      // }\r\n      // for (let i = 0; i < busName.length; i++) {\r\n      //   this.businessFunctionName.push(busName[i].businessName)\r\n      // }\r\n    },\r\n    // 业务系统下拉树\r\n    getSysLists() {\r\n      const param = {\r\n        businessType: 1,\r\n        parentId: 0\r\n      }\r\n      this.addLoading = true\r\n      HttpModule.getbusLists(param).then(res => {\r\n        this.addLoading = false\r\n        if (res.code === '000000') {\r\n          this.businessSystemCodeoptions = res.data.results\r\n          if (this.$parent.dialogTitle === '新增') {\r\n            this.businessSystemCode = '1'\r\n            this.changeSysCode(this.businessSystemCode)\r\n          }\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    // 业务模块下拉树\r\n    getModLists() {\r\n      const param = {\r\n        businessType: 2,\r\n        parentId: this.SysparentId\r\n      }\r\n      this.addLoading = true\r\n      HttpModule.getbusLists(param).then(res => {\r\n        this.addLoading = false\r\n        if (res.code === '000000') {\r\n          this.businessModuleCodeoptions = res.data.results\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    // 业务菜单下拉树\r\n    getFunLists() {\r\n      const param = {\r\n        businessType: 3,\r\n        parentId: this.ModparentId\r\n      }\r\n      this.addLoading = true\r\n      HttpModule.getbusLists(param).then(res => {\r\n        this.addLoading = false\r\n        this.businessFunctionCodeoptions = res.data.results\r\n      })\r\n    },\r\n    // 主管部门下拉树\r\n    getDepLists() {\r\n      const param = {\r\n        businessType: 4,\r\n        parentId: 0\r\n      }\r\n      this.addLoading = true\r\n      HttpModule.getbusLists(param).then(res => {\r\n        this.addLoading = false\r\n        if (res.code === '000000') {\r\n          this.departmentCodeoptions = res.data.results\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    getRegulationChildrenData(datas) {\r\n      let that = this\r\n      datas.forEach(item => {\r\n        // item.code = item.code\r\n        item.name = item.ruleName\r\n        item.label = item.code + '-' + item.ruleName\r\n        if (item.children.length > 0) {\r\n          that.getRegulationChildrenData(item.children)\r\n          item.leaf = false\r\n        } else {\r\n          item.leaf = true\r\n        }\r\n      })\r\n\r\n      return datas\r\n    },\r\n    selectRule(val) {\r\n      let valArr = val.split('##')\r\n      this.regulationClassName = valArr[2]\r\n      // this.regulationClass = valArr[0]\r\n      // let busName = this.regulationClassoptions.find(item => {\r\n      //   return item.id === val\r\n      // })\r\n      // this.regulationClassName = busName.regulationClassName\r\n      // this.regulationClass = busName.regulationClass\r\n    },\r\n    regulationNodeClick({ node }) {\r\n      if (node.children?.length) {\r\n        this.regulationClass = ''\r\n        this.$refs.regulationTreeRef.treeOptionValue = ''\r\n        this.$XModal.message({ status: 'warning', message: '该节点不可选择，请选择叶子节点' })\r\n        return\r\n      }\r\n      this.regulationClass = node.code + '-' + node.name\r\n    },\r\n    getRegulation() {\r\n      HttpModule.getTree(0).then(res => {\r\n        if (res.code === '000000') {\r\n          this.$XEUtils.eachTree(res.data, item => {\r\n            item.name = item.ruleName\r\n            item.disabled = !!item.children?.length\r\n          })\r\n          this.regulationClassoptions = res.data\r\n        } else {\r\n          this.$message.error('下拉树加载失败')\r\n        }\r\n      })\r\n    },\r\n    onToolbarBtnClick({ context, table, code }) {\r\n      switch (code) {\r\n        // 刷新\r\n        case 'refresh':\r\n          this.refresh()\r\n          break\r\n      }\r\n    },\r\n    // 刷新按钮 刷新查询栏，提示刷新 table 数据\r\n    refresh() {\r\n      this.getTableData()\r\n    }\r\n  },\r\n  watch: {\r\n    // businessSystemCode(val) {\r\n    //   console.log(val)\r\n    //   this.SysparentId = val\r\n    //   this.businessModuleCode = ''\r\n    //   let busName = this.businessSystemCodeoptions.find(item => {\r\n    //     return item.id === val\r\n    //   })\r\n    //   this.businessSystemName = busName.businessName\r\n    //   const param = {\r\n    //     businessType: 2,\r\n    //     parentId: this.SysparentId\r\n    //   }\r\n    //   console.log(param)\r\n    //   this.addLoading = true\r\n    //   HttpModule.getbusLists(param).then(res => {\r\n    //     this.addLoading = false\r\n    //     if (res.code === '000000') {\r\n    //       this.businessModuleCodeoptions = res.data.results\r\n    //     } else {\r\n    //       this.$message.error(res.message)\r\n    //     }\r\n    //   })\r\n    // }\r\n  },\r\n  mounted() {\r\n  },\r\n  created() {\r\n    console.log(this.$parent.DetailData)\r\n    this.getWhereTree()\r\n    if (this.$parent.dialogTitle === '新增') {\r\n      this.getBusinessModelCodeDatas({ businessType: '1', parentId: 0 })\r\n      this.getTableData()\r\n      // 直达资金新增规则\r\n      this.$parent.dialogVisibleRules && (this.regulationClass = '09-直达资金')\r\n    } else if (this.$parent.dialogTitle === '查看详情') {\r\n      this.warnType = this.$parent.DetailData.warnType\r\n      this.uploadFile = this.$parent.DetailData?.uploadFile\r\n\r\n      this.ruleSetShow = false\r\n      this.ruleDesShow = true\r\n      this.appSetShow = false\r\n      this.effectiveShow = false\r\n      this.activeIndex = 1\r\n      this.monitorRuleName = this.$parent.DetailData.regulationName\r\n      this.warningLevel = this.$parent.DetailData.warningLevel\r\n      // this.regulationClass = this.$parent.DetailData.regulationClass\r\n      this.getRegulation()\r\n      this.regulationClass = this.$parent.DetailData.regulationClass + '-' + this.$parent.DetailData.regulationClassName\r\n      this.triggerClass = this.$parent.DetailData.triggerClass\r\n      this.handleType = this.$parent.DetailData.handleType\r\n      this.operationTableData = [this.$parent.DetailData.ruleTemplate]\r\n\r\n      this.crTemplate = this.$parent.DetailData.ruleTemplate.ruleTemplateName\r\n      // this.businessModule = this.$parent.DetailData.ruleTemplate.businessModuleName\r\n      // this.businessFunction = this.$parent.DetailData.ruleTemplate.businessFunctionName\r\n      this.businessSystemCode = this.$parent.DetailData.businessSystemCode + ''\r\n      this.SysparentId = this.businessSystemCode\r\n      this.getModLists()\r\n      this.businessModuleCode = this.$parent.DetailData.businessModuleCode + ''\r\n      this.ModparentId = this.businessModuleCode\r\n\r\n      // this.getFunLists()\r\n      // this.businessFunctionCode.push(parseInt(this.$parent.DetailData.businessFunctionCode))\r\n      // this.businessFunctionCode = this.$parent.DetailData.menuIdList.split(',')\r\n      this.businessSystemName = this.$parent.DetailData.businessSystemName\r\n      this.businessModuleName = this.$parent.DetailData.businessModuleName\r\n      this.fiRuleTypeCode = this.$parent.DetailData.ruleTemplate.fiRuleTypeCode\r\n      this.fiRuleTypeName = this.$parent.DetailData.ruleTemplate.fiRuleTypeName\r\n      if (this.$parent.DetailData.ruleTemplate.fiRuleTypeCode && this.$parent.DetailData.ruleTemplate.fiRuleTypeName) {\r\n        this.fiRuleTypeCodeName = ((this.$parent.DetailData.ruleTemplate.fiRuleTypeCode + '').slice(0, 1) === '1' ? '中央' : '地方') + '-' + this.$parent.DetailData.ruleTemplate.fiRuleTypeName\r\n      } else {\r\n        this.fiRuleTypeCodeName = ''\r\n      }\r\n      // this.businessFunctionName.push(this.$parent.DetailData.businessFunctionName)\r\n      // this.businessFunctionName = this.$parent.DetailData.menuNameList\r\n      this.regulationModelCode = this.$parent.DetailData.ruleTemplateCode\r\n      this.mountTableData = this.$parent.DetailData.regulationConfig\r\n      this.ruleFlag = this.$parent.DetailData.ruleFlag\r\n      this.warnLocation = this.$parent.DetailData.warnLocation\r\n      this.policiesDescription = this.$parent.DetailData.warningTips\r\n      this.fiRuleDesc = this.$parent.DetailData.fiRuleDesc\r\n      this.implDesc = this.$parent.DetailData.implDesc\r\n      // 不可编辑\r\n      // this.buttonConfig = {}\r\n      this.disabled = true\r\n      this.editConfig = false\r\n    } else if (this.$parent.dialogTitle === '修改' || this.$parent.dialogTitle === '复制') {\r\n      this.warnType = this.$parent.DetailData.warnType\r\n      this.uploadFile = this.$parent.DetailData.uploadFile\r\n      this.ruleFlag = this.$parent.DetailData.ruleFlag\r\n      this.warnLocation = this.$parent.DetailData.warnLocation\r\n      this.monitorRuleName = this.$parent.DetailData.regulationName\r\n      this.warningLevel = this.$parent.DetailData.warningLevel\r\n      this.regulationModelName = this.$parent.DetailData.regulationModelName\r\n      // this.regulationClass = this.$parent.DetailData.regulationClass\r\n      this.getRegulation()\r\n      this.regulationClass = this.$parent.DetailData.regulationClass + '-' + this.$parent.DetailData.regulationClassName\r\n      this.triggerClass = this.$parent.DetailData.triggerClass\r\n      this.handleType = this.$parent.DetailData.handleType\r\n      this.operationTableData = [this.$parent.DetailData.ruleTemplate]\r\n\r\n      this.crTemplate = this.$parent.DetailData.ruleTemplate.ruleTemplateName\r\n      // this.businessModule = this.$parent.DetailData.ruleTemplate.businessModuleName\r\n      // this.businessFunction = this.$parent.DetailData.ruleTemplate.businessFunctionName\r\n      this.businessSystemCode = this.$parent.DetailData.businessSystemCode + ''\r\n      this.SysparentId = this.businessSystemCode\r\n      this.getModLists()\r\n      this.businessModuleCode = this.$parent.DetailData.businessModuleCode + ''\r\n      this.ModparentId = this.businessModuleCode\r\n\r\n      // this.getFunLists()\r\n      // this.businessFunctionCode.push(parseInt(this.$parent.DetailData.businessFunctionCode))\r\n      // this.businessFunctionCode = this.$parent.DetailData.menuIdList.split(',')\r\n      this.businessSystemName = this.$parent.DetailData.businessSystemName\r\n      this.businessModuleName = this.$parent.DetailData.businessModuleName\r\n      // this.businessFunctionName.push(this.$parent.DetailData.businessFunctionName)\r\n      // this.businessFunctionName = this.$parent.DetailData.menuNameList\r\n      this.regulationModelCode = this.$parent.DetailData.regulationModelCode\r\n      this.mountTableData = this.$parent.DetailData.regulationConfig\r\n      this.fiRuleTypeCode = this.$parent.DetailData.ruleTemplate.fiRuleTypeCode\r\n      this.fiRuleTypeName = this.$parent.DetailData.ruleTemplate.fiRuleTypeName\r\n      if (this.$parent.DetailData.ruleTemplate.fiRuleTypeCode && this.$parent.DetailData.ruleTemplate.fiRuleTypeName) {\r\n        this.fiRuleTypeCodeName = ((this.$parent.DetailData.ruleTemplate.fiRuleTypeCode + '').slice(0, 1) === '1' ? '中央' : '地方') + '-' + this.$parent.DetailData.ruleTemplate.fiRuleTypeName\r\n      } else {\r\n        this.fiRuleTypeCodeName = ''\r\n      }\r\n      this.policiesDescription = this.$parent.DetailData.warningTips\r\n      this.fiRuleDesc = this.$parent.DetailData.fiRuleDesc\r\n      this.implDesc = this.$parent.DetailData.implDesc\r\n      this.scope = this.$parent.DetailData.regulationScope\r\n    }\r\n    if (this.$parent.dialogTitle !== '新增') {\r\n      if (this.$parent.formDatas) {\r\n        this.formDatas = this.$parent.formDatas\r\n        if (this.formDatas.payment && this.formDatas.payment !== '') {\r\n          this.formDatas.payment__multiple = this.formDatas.payment.split(',').slice(1)\r\n          this.paymentLen = this.formDatas.payment__multiple.length\r\n          this.formDatas.payment__multiple.forEach((item, index) => {\r\n            let datas = {}\r\n            if (item === '1') {\r\n              datas = this.$parent.dialogTitle === '查看详情' ? this.createPro(this.formItemsConfigMessage[0].itemRender.options[item], true) : this.createPro(this.formItemsConfigMessage[0].itemRender.options[item], false)\r\n            } else {\r\n              datas = this.$parent.dialogTitle === '查看详情' ? this.createObj(this.formItemsConfigMessage[0].itemRender.options[item], true) : this.createObj(this.formItemsConfigMessage[0].itemRender.options[item], false)\r\n            }\r\n            this.formItemsConfigMessage.splice(1 + index, 0, datas)\r\n            if (this.$parent.dialogTitle === '查看详情') {\r\n              this.formItemsConfigMessage.forEach(item => {\r\n                item.itemRender.props.disabled = true\r\n              })\r\n            } else {\r\n              this.formItemsConfigMessage.forEach(item => {\r\n                item.itemRender.props.disabled = false\r\n              })\r\n            }\r\n            // this.formDatas.agency_code = '000,000001,000002'\r\n            // this.formDatas.agency_name = '预算处预留,预算处预留,test单位新增'\r\n            this.formDatas.agency_code = this.formDatas.agencyCode\r\n            this.formDatas.agency_name = this.formDatas.agencyName\r\n            this.formDatas.pro_code = this.formDatas.proCode\r\n            this.formDatas.pro_name = this.formDatas.proName\r\n            this.formDatas.exp_func_code = this.formDatas.expFunCode\r\n            this.formDatas.exp_func_name = this.formDatas.expFunName\r\n            this.formDatas.dep_bgt_eco_code = this.formDatas.depBgtEcoCode\r\n            this.formDatas.dep_bgt_eco_name = this.formDatas.depBgtEcoName\r\n            this.formDatas.gov_bgt_eco_code = this.formDatas.govBgtEcoCode\r\n            this.formDatas.gov_bgt_eco_name = this.formDatas.govBgtEcoName\r\n            this.formDatas.cor_bgt_doc_no_code = this.formDatas.corBgtDocNoCode\r\n            this.formDatas.cor_bgt_doc_no_name = this.formDatas.corBgtDocNoName\r\n          // this.formDatas.agency_code_id = '5208FE4932F34E27B0A31BDDE2D0276A'\r\n          // let formDataParams = this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name].split(',')\r\n          // let paramsCodes = ''\r\n          // let paramsNames = ''\r\n          // formDataParams.forEach(item => {\r\n          //   item = item.split('-')\r\n          //   paramsCodes += item[0]\r\n          //   paramsNames += item[1]\r\n          // })\r\n          // this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'code'] = paramsCodes\r\n          // this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'name'] = paramsNames\r\n          })\r\n          console.log(this.formDatas)\r\n        }\r\n      }\r\n    }\r\n    if (this.$parent.dialogTitle === '查看详情') {\r\n      this.formItemsConfigMessage.forEach(item => {\r\n        item.itemRender.props.disabled = true\r\n      })\r\n    }\r\n    this.regulationType = this.$store.state.curNavModule.f_FullName?.substring(0, 3)\r\n    this.getSysLists()\r\n    this.getDepLists()\r\n    this.getRegulation()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .payVoucherInput {\r\n    margin: 15px;\r\n    .el-card {\r\n      margin-top: 0\r\n    }\r\n  }\r\n  .setbtn{\r\n    width:100px;\r\n    height:45px;\r\n    float:left;\r\n    margin-right:20px;\r\n  }\r\n  .tabone{\r\n    width:100px;\r\n    height:40px;\r\n    text-align:center;\r\n    line-height:40px;\r\n    float:left;\r\n    border:1px solid #ccc;\r\n    border-radius:4px;\r\n  }\r\n  .tabone1{\r\n    width:100px;\r\n    height:40px;\r\n    text-align:center;\r\n    line-height:40px;\r\n    float:left;\r\n    border:1px solid #ccc;\r\n    background-color:#f2f2f2;\r\n    border-radius:4px;\r\n  }\r\n  .vxe-modal--wrapper .vxe-modal--box {\r\n    z-index: 0;\r\n  }\r\n  #bigbox {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: white;\r\n    z-index: 10;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    opacity: .3;\r\n  }\r\n  .el-row-item .font-set-small .hline{\r\n    width:72px;\r\n  }\r\n  .vxe-toolbar{\r\n    .vxe-button--wrapper{\r\n      display:flex;\r\n    }\r\n  }\r\n\r\n</style>\r\n<style lang=\"scss\">\r\n.vue-recycle-scroller.ready.direction-vertical{\r\n  min-width: 350px;\r\n}\r\n</style>\r\n"]}]}