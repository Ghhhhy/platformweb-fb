{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\MointoringMatters\\MonitoringRuleTemplateLibraryManagement\\children\\addDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\MointoringMatters\\MonitoringRuleTemplateLibraryManagement\\children\\addDialog.vue","mtime":1694576524382},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBwcm9jb25mIH0gZnJvbSAnLi4vTW9uaXRvcmluZ1J1bGVUZW1wbGF0ZUxpYnJhcnlNYW5hZ2VtZW50LmpzJw0KaW1wb3J0IEh0dHBNb2R1bGUgZnJvbSAnQC9hcGkvZnJhbWUvbWFpbi9Nb25pdG9yaW5nL01vbml0b3JpbmdSdWxlLmpzJw0KaW1wb3J0IEh0dHBNb2R1bGUxIGZyb20gJ0AvYXBpL2ZyYW1lL21haW4vTW9uaXRvcmluZy9EZWNsYXJhdGlvbi5qcycNCmltcG9ydCBIdHRwTW9kdWxlMiBmcm9tICdAL2FwaS9mcmFtZS9tYWluL01vbml0b3JpbmcvTW9uaXRvcmluZy5qcycNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0FkZERpYWxvZycsDQogIGNvbXBvbmVudHM6IHt9LA0KICBjb21wdXRlZDogew0KICAgIGN1ck5hdk1vZHVsZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgZGVjbGFyZVF1ZXJ5Q29maWcoKSB7DQogICAgICB0aGlzLmdldERlY2xhcmVTZWFyY2hEYXRhTGlzdCgpDQogICAgfSwNCiAgICBxdWVyeUNvbmZpZygpIHsNCiAgICAgIHRoaXMuZ2V0U2VhcmNoRGF0YUxpc3QoKQ0KICAgIH0sDQogICAgZnVuY3F1ZXJ5Q29uZmlnKCkgew0KICAgICAgdGhpcy5nZXRGdW5TZWFyY2hEYXRhTGlzdCgpDQogICAgfQ0KICB9LA0KICBwcm9wczogew0KICAgIHRpdGxlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAnJw0KICAgIH0sDQogICAgcnVsZVRlbXBsYXRlQ29kZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJycNCiAgICB9LA0KICAgIGZ1bmN0aW9uQ29kZUxpc3Q6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIFtdDQogICAgICB9DQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBjaGVja2JveENvbmZpZzogew0KICAgICAgICBjaGVja0FsbDogdHJ1ZQ0KICAgICAgfSwNCiAgICAgIGNvbmRpdGlvbjoge30sDQogICAgICBmdW5jb25kaXRpb246IHt9LA0KICAgICAgdGFiYnRuOiBbJ+ebkeaOp+S6i+mhueaMguaOpScsICfop4TliJnmqKHmnb/mlrDlop4nLCAn5re75Yqg5oyC5o6l5Ye95pWwJ10sDQogICAgICBhY3RpdmVJbmRleDogMCwNCiAgICAgIG1vbml0b3JTaG93OiB0cnVlLA0KICAgICAgcnVsZXNTaG93OiBmYWxzZSwNCiAgICAgIGZ1bmNTaG93OiBmYWxzZSwNCiAgICAgIG1vdW50dGFibGVDb25maWc6IHsNCiAgICAgICAgcmVuZGVyZXJzOiB7DQogICAgICAgICAgLy8g57yW6L6RIOmZhOS7tiDmk43kvZzml6Xlv5cNCiAgICAgICAgICAkcGF5Vm91Y2hlcklucHV0R2xvYWJsZU9wdGlvblJvdzogcHJvY29uZi5nbG9hYmxlT3B0aW9uUm93MQ0KICAgICAgICB9LA0KICAgICAgICBtZXRob2RzOiB7DQogICAgICAgICAgb25PcHRpb25Sb3dDbGljazogdGhpcy5vbk9wdGlvblJvd0NsaWNrDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBtb3VudFRhYmxlQ29sdW1uc0NvbmZpZzogcHJvY29uZi5tb3VudFRhYmxlQ29sdW1uc0NvbmZpZywNCiAgICAgIG1vdW50VGFibGVEYXRhOiBbXSwNCiAgICAgIC8vIEJzUXVlcnkg5p+l6K+i5qCPDQogICAgICBxdWVyeUNvbmZpZzogcHJvY29uZi5oaWdoUXVlcnlDb25maWcsDQogICAgICBzZWFyY2hEYXRhTGlzdDogcHJvY29uZi5oaWdoUXVlcnlEYXRhLA0KICAgICAgZGVjbGFyZVNlYXJjaERhdGFMaXN0OiBwcm9jb25mLmRlY2xhcmVRdWVyeURhdGEsDQogICAgICBkZWNsYXJlUXVlcnlDb2ZpZzogcHJvY29uZi5kZWNsYXJlUXVlcnlDb2ZpZywNCiAgICAgIGZ1bmNxdWVyeUNvbmZpZzogcHJvY29uZi5mdW5jaGlnaFF1ZXJ5Q29uZmlnLA0KICAgICAgZnVuY3NlYXJjaERhdGFMaXN0OiBwcm9jb25mLmZ1bmNoaWdoUXVlcnlEYXRhLA0KICAgICAgLy8gdGFibGUg6YWN572uDQogICAgICB0YWJsZUNvbmZpZzogew0KICAgICAgICByZW5kZXJlcnM6IHsNCiAgICAgICAgICAvLyDnvJbovpEg6ZmE5Lu2IOaTjeS9nOaXpeW/lw0KICAgICAgICAgICRnbG9hYmxlT3B0aW9uUm93OiBwcm9jb25mLmdsb2FibGVPcHRpb25Sb3cNCiAgICAgICAgfSwNCiAgICAgICAgbWV0aG9kczogew0KICAgICAgICAgIG9uT3B0aW9uUm93Q2xpY2s6IHRoaXMub25PcHRpb25Sb3dDbGljaw0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgbW9uaXRvclRhYmxlQ29sdW1uc0NvbmZpZzogcHJvY29uZi5tb25pdG9yVGFibGVDb2x1bW5zQ29uZmlnLA0KICAgICAgb3BlcmF0aW9uVGFibGVEYXRhOiBbXSwNCiAgICAgIGRlY2xhcmVUYXJnZXQ6ICcnLA0KICAgICAgcnVsZVRlbXBsYXRlTmFtZTogJycsDQogICAgICBidXNpbmVzc1N5c3RlbUNvZGU6ICcnLA0KICAgICAgYnVzaW5lc3NTeXN0ZW1OYW1lOiAnJywNCiAgICAgIGJ1c2luZXNzU3lzdGVtQ29kZW9wdGlvbnM6IFtdLA0KICAgICAgYnVzaW5lc3NNb2R1bGVDb2RlOiAnJywNCiAgICAgIGJ1c2luZXNzTW9kdWxlTmFtZTogJycsDQogICAgICBidXNpbmVzc01vZHVsZUNvZGVvcHRpb25zOiBbXSwNCiAgICAgIGJ1c2luZXNzRnVuY3Rpb25Db2RlOiAnJywNCiAgICAgIGJ1c2luZXNzRnVuY3Rpb25OYW1lOiAnJywNCiAgICAgIGJ1c2luZXNzRnVuY3Rpb25Db2Rlb3B0aW9uczogW10sDQogICAgICBwb2xpY2llc05hbWU6ICcnLA0KICAgICAgcnVsZVJlbWFyazogJycsDQogICAgICBydWxlQWNjb3JkOiAnJywNCiAgICAgIGRpYWxvZ1Zpc2libGU6IHRydWUsDQogICAgICBhZGRMb2FkaW5nOiBmYWxzZSwNCiAgICAgIHRva2VuOiAnJywNCiAgICAgIGlzQ29udGludWl0eTogZmFsc2UsDQogICAgICAvLyDmlofku7bkuIrkvKDnm7jlhbPlj4LmlbANCiAgICAgIGZpbGVMaXN0OiBbXSwNCiAgICAgIGZpbGVEYXRhOiBbXSwNCiAgICAgIGZpbGVEYXRhQmFrRGVsOiBbXSwNCiAgICAgIGF0dGFjaG1lbnRJZDogJycsDQogICAgICBzaG93Ym94OiBmYWxzZSwNCiAgICAgIG1haW5QYWdlckNvbmZpZzogew0KICAgICAgICB0b3RhbDogMSwNCiAgICAgICAgY3VycmVudFBhZ2U6IDEsDQogICAgICAgIHBhZ2VTaXplOiAyMA0KICAgICAgfSwNCiAgICAgIEZ1bm1haW5QYWdlckNvbmZpZzogew0KICAgICAgICB0b3RhbDogMCwNCiAgICAgICAgY3VycmVudFBhZ2U6IDEsDQogICAgICAgIHBhZ2VTaXplOiAyMA0KICAgICAgfSwNCiAgICAgIFN5c3BhcmVudElkOiAwLA0KICAgICAgTW9kcGFyZW50SWQ6IDAsDQogICAgICBmdW5jdGlvblZpc2libGU6IGZhbHNlLA0KICAgICAgZnVuY3Rpb25UYWJsZURhdGE6IFtdLA0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIG9wZXJhdGlvblZpc2libGU6IGZhbHNlLA0KICAgICAgYnV0dG9uTmFtZTogJ+S/ruaUuScsDQogICAgICBpc1Nob3dCdXR0b246IHRydWUsDQogICAgICBkaXNhYmxlZDogZmFsc2UsDQogICAgICBzaG93RGlhbG9nVmlldzogZmFsc2UsDQogICAgICBmaVJ1bGVUeXBlTGlzdDogWw0KICAgICAgICB7IGlkOiAnMScsDQogICAgICAgICAgbGFiZWw6ICfkuK3lpK7nm5Hmjqfop4TliJknLA0KICAgICAgICAgIGNoaWxkcmVuOiBbDQogICAgICAgICAgICB7IGlkOiAnMTEnLCBsYWJlbDogJ+S4reWkri3pgJrnlKjnsbvnm5Hmjqfop4TliJknIH0sDQogICAgICAgICAgICB7IGlkOiAnMTInLCBsYWJlbDogJ+S4reWkri3kuJPpobnnsbvnm5Hmjqfop4TliJknIH0sDQogICAgICAgICAgICB7IGlkOiAnMTknLCBsYWJlbDogJ+S4reWkri3lhbbku5bnm5Hmjqfop4TliJknIH0NCiAgICAgICAgICBdDQogICAgICAgIH0sDQogICAgICAgIHsgaWQ6ICcyJywNCiAgICAgICAgICBsYWJlbDogJ+WcsOaWueebkeaOp+inhOWImScsDQogICAgICAgICAgY2hpbGRyZW46IFsNCiAgICAgICAgICAgIHsgaWQ6ICcyMScsIGxhYmVsOiAn5Zyw5pa5LemAmueUqOexu+ebkeaOp+inhOWImScgfSwNCiAgICAgICAgICAgIHsgaWQ6ICcyMicsIGxhYmVsOiAn5Zyw5pa5LeS4k+mhueexu+ebkeaOp+inhOWImScgfSwNCiAgICAgICAgICAgIHsgaWQ6ICcyOScsIGxhYmVsOiAn5Zyw5pa5LeWFtuS7luebkeaOp+inhOWImScgfQ0KICAgICAgICAgIF0NCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIGZpUnVsZVR5cGVDb2RlOiAnJywNCiAgICAgIGZpUnVsZVR5cGVOYW1lOiAnJywNCiAgICAgIHNlbGVjdFZhbDogJycsDQogICAgICBzZWxlY3ROYW1lOiAnJywNCiAgICAgIGZpUnVsZVR5cGVWYWx1ZTogJycNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDooajmoLzljZXlhYPooYzljZXlh7sNCiAgICBjZWxsQ2xpY2sob2JqLCBjb250ZXh0LCBlKSB7DQogICAgICAvLyBjb25zb2xlLmxvZygn5Y+C5pWwJywgLi4uYXJndW1lbnRzKQ0KICAgICAgbGV0IGtleSA9IG9iai5jb2x1bW4ucHJvcGVydHkNCiAgICAgIGNvbnNvbGUubG9nKGtleSwgb2JqLnJvdykNCiAgICAgIHN3aXRjaCAoa2V5KSB7DQogICAgICAgIC8vIOeUs+ivt+e8luWPtw0KICAgICAgICBjYXNlICdmdW5jdGlvblBhcmFtZXRlcic6DQogICAgICAgICAgdGhpcy5zaG93UGFyYW1ldGVyKG9iai5yb3cpDQogICAgICAgICAgYnJlYWsNCiAgICAgIH0NCiAgICB9LA0KICAgIHNob3dQYXJhbWV0ZXIocm93KSB7DQogICAgICB0aGlzLmZ1bmN0aW9uUGFyYW1ldGVyID0gcm93LmZ1bmN0aW9uUGFyYW1ldGVyDQogICAgICB0aGlzLnNob3dEaWFsb2dWaWV3ID0gdHJ1ZQ0KICAgIH0sDQogICAgZ2V0RGVjbGFyZVNlYXJjaERhdGFMaXN0KCkgew0KICAgIH0sDQogICAgZ2V0RnVuU2VhcmNoRGF0YUxpc3QoKSB7DQogICAgICAvLyDkuIvmi4nmoJENCiAgICAgIGxldCBzZWFyY2hEYXRhT2JqID0ge30NCiAgICAgIHRoaXMuZnVuY3F1ZXJ5Q29uZmlnLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGlmIChpdGVtLml0ZW1SZW5kZXIubmFtZSA9PT0gJyRmb3JtVHJlZUlucHV0JyB8fCBpdGVtLml0ZW1SZW5kZXIubmFtZSA9PT0gJyR2eGVUcmVlJykgew0KICAgICAgICAgIGlmIChpdGVtLmZpZWxkKSB7DQogICAgICAgICAgICBzZWFyY2hEYXRhT2JqW2l0ZW0uZmllbGQgKyAnY29kZSddID0gJycNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKGl0ZW0uZmllbGQpIHsNCiAgICAgICAgICAgIHNlYXJjaERhdGFPYmpbaXRlbS5maWVsZF0gPSAnJw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHRoaXMuZnVuY3NlYXJjaERhdGFMaXN0ID0gc2VhcmNoRGF0YU9iag0KICAgIH0sDQogICAgLy8g5Yid5aeL5YyW6auY57qn5p+l6K+i5Y+C5pWwY29uZGl0aW9uDQogICAgZ2V0RnVuQ29uZGl0aW9uTGlzdCgpIHsNCiAgICAgIGxldCBjb25kaXRpb24gPSB7fQ0KICAgICAgdGhpcy5mdW5jcXVlcnlDb25maWcuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaWYgKGl0ZW0uaXRlbVJlbmRlci5uYW1lID09PSAnJGZvcm1UcmVlSW5wdXQnIHx8IGl0ZW0uaXRlbVJlbmRlci5uYW1lID09PSAnJHZ4ZVRyZWUnKSB7DQogICAgICAgICAgaWYgKGl0ZW0uZmllbGQpIHsNCiAgICAgICAgICAgIGlmIChpdGVtLmZpZWxkID09PSAnY29yX2JndF9kb2Nfbm9fJykgew0KICAgICAgICAgICAgICBjb25kaXRpb25baXRlbS5maWVsZCArICduYW1lJ10gPSBbXQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgY29uZGl0aW9uW2l0ZW0uZmllbGQgKyAnY29kZSddID0gW10NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKGl0ZW0uZmllbGQpIHsNCiAgICAgICAgICAgIGNvbmRpdGlvbltpdGVtLmZpZWxkXSA9IFtdDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgcmV0dXJuIGNvbmRpdGlvbg0KICAgIH0sDQogICAgc2VhcmNoRGVjbGFyZSh2YWwpIHsNCiAgICAgIGNvbnNvbGUubG9nKHZhbCkNCiAgICAgIHRoaXMuZGVjbGFyZU5hbWUgPSB2YWwuZGVjbGFyZU5hbWUNCiAgICAgIHRoaXMuY3JlYXRlUGVyc29uTmFtZSA9IHZhbC5jcmVhdGVQZXJzb25OYW1lDQogICAgICB0aGlzLm1vZkRpdk5hbWUgPSB2YWwubW9mRGl2TmFtZQ0KICAgICAgdGhpcy5tYW5hZ2VNb2ZOYW1lID0gdmFsLm1hbmFnZU1vZk5hbWUNCiAgICAgIHRoaXMubG9hZE1vbml0b3IoKQ0KICAgIH0sDQogICAgLy8g5pCc57SiDQogICAgc2VhcmNoRnVuKHZhbCkgew0KICAgICAgY29uc29sZS5sb2codmFsKQ0KICAgICAgdGhpcy5mdW5jc2VhcmNoRGF0YUxpc3QgPSB2YWwNCiAgICAgIGxldCBjb25kaXRpb24gPSB0aGlzLmdldEZ1bkNvbmRpdGlvbkxpc3QoKQ0KICAgICAgZm9yIChsZXQga2V5IGluIGNvbmRpdGlvbikgew0KICAgICAgICBpZiAoDQogICAgICAgICAgKHRoaXMuZnVuY3NlYXJjaERhdGFMaXN0W2tleV0gIT09IHVuZGVmaW5lZCkgJg0KICAgICAgICAgICh0aGlzLmZ1bmNzZWFyY2hEYXRhTGlzdFtrZXldICE9PSBudWxsKQ0KICAgICAgICApIHsNCiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLmZ1bmNzZWFyY2hEYXRhTGlzdFtrZXldKSkgew0KICAgICAgICAgICAgY29uZGl0aW9uW2tleV0gPSB0aGlzLmZ1bmNzZWFyY2hEYXRhTGlzdFtrZXldDQogICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgKHRoaXMuZnVuY3NlYXJjaERhdGFMaXN0W2tleV0pID09PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgaWYgKHRoaXMuZnVuY3NlYXJjaERhdGFMaXN0W2tleV0udHJpbSgpICE9PSAnJykgew0KICAgICAgICAgICAgICB0aGlzLmZ1bmNzZWFyY2hEYXRhTGlzdFtrZXldLnNwbGl0KCcsJykuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICBjb25kaXRpb25ba2V5XS5wdXNoKGl0ZW0pDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAodGhpcy5mdW5jc2VhcmNoRGF0YUxpc3QuZnVuY3Rpb25UeXBlICYmIHRoaXMuZnVuY3NlYXJjaERhdGFMaXN0LmZ1bmN0aW9uVHlwZS50cmltKCkgIT09ICcnKSB7DQogICAgICAgIGNvbmRpdGlvbi5mdW5jdGlvblR5cGUgPSB0aGlzLmZ1bmNzZWFyY2hEYXRhTGlzdC5mdW5jdGlvblR5cGUNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmZ1bmNzZWFyY2hEYXRhTGlzdC5mdW5jdGlvbk5hbWUgJiYgdGhpcy5mdW5jc2VhcmNoRGF0YUxpc3QuZnVuY3Rpb25OYW1lLnRyaW0oKSAhPT0gJycpIHsNCiAgICAgICAgY29uZGl0aW9uLmZ1bmN0aW9uTmFtZSA9IHRoaXMuZnVuY3NlYXJjaERhdGFMaXN0LmZ1bmN0aW9uTmFtZQ0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuZnVuY3NlYXJjaERhdGFMaXN0LmZ1bmN0aW9uUGFyYW1ldGVyICYmIHRoaXMuZnVuY3NlYXJjaERhdGFMaXN0LmZ1bmN0aW9uUGFyYW1ldGVyLnRyaW0oKSAhPT0gJycpIHsNCiAgICAgICAgY29uZGl0aW9uLmZ1bmN0aW9uUGFyYW1ldGVyID0gdGhpcy5mdW5jc2VhcmNoRGF0YUxpc3QuZnVuY3Rpb25QYXJhbWV0ZXINCiAgICAgIH0NCiAgICAgIHRoaXMuZnVuY29uZGl0aW9uID0gY29uZGl0aW9uDQogICAgICB0aGlzLmxvYWRGdW5Nb25pdG9yKCkNCiAgICB9LA0KICAgIC8vIOWIneWni+WMlumrmOe6p+afpeivomRhdGENCiAgICBnZXRTZWFyY2hEYXRhTGlzdCgpIHsNCiAgICAgIC8vIOS4i+aLieagkQ0KICAgICAgbGV0IHNlYXJjaERhdGFPYmogPSB7fQ0KICAgICAgdGhpcy5xdWVyeUNvbmZpZy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBpZiAoaXRlbS5pdGVtUmVuZGVyLm5hbWUgPT09ICckZm9ybVRyZWVJbnB1dCcgfHwgaXRlbS5pdGVtUmVuZGVyLm5hbWUgPT09ICckdnhlVHJlZScpIHsNCiAgICAgICAgICBpZiAoaXRlbS5maWVsZCkgew0KICAgICAgICAgICAgc2VhcmNoRGF0YU9ialtpdGVtLmZpZWxkICsgJ2NvZGUnXSA9ICcnDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChpdGVtLmZpZWxkKSB7DQogICAgICAgICAgICBzZWFyY2hEYXRhT2JqW2l0ZW0uZmllbGRdID0gJycNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICB0aGlzLnNlYXJjaERhdGFMaXN0ID0gc2VhcmNoRGF0YU9iag0KICAgIH0sDQogICAgLy8g5Yid5aeL5YyW6auY57qn5p+l6K+i5Y+C5pWwY29uZGl0aW9uDQogICAgZ2V0Q29uZGl0aW9uTGlzdCgpIHsNCiAgICAgIGxldCBjb25kaXRpb24gPSB7fQ0KICAgICAgdGhpcy5xdWVyeUNvbmZpZy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBpZiAoaXRlbS5pdGVtUmVuZGVyLm5hbWUgPT09ICckZm9ybVRyZWVJbnB1dCcgfHwgaXRlbS5pdGVtUmVuZGVyLm5hbWUgPT09ICckdnhlVHJlZScpIHsNCiAgICAgICAgICBpZiAoaXRlbS5maWVsZCkgew0KICAgICAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT09ICdjb3JfYmd0X2RvY19ub18nKSB7DQogICAgICAgICAgICAgIGNvbmRpdGlvbltpdGVtLmZpZWxkICsgJ25hbWUnXSA9IFtdDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBjb25kaXRpb25baXRlbS5maWVsZCArICdjb2RlJ10gPSBbXQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAoaXRlbS5maWVsZCkgew0KICAgICAgICAgICAgY29uZGl0aW9uW2l0ZW0uZmllbGRdID0gW10NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICByZXR1cm4gY29uZGl0aW9uDQogICAgfSwNCiAgICAvLyDmkJzntKINCiAgICBzZWFyY2godmFsKSB7DQogICAgICBjb25zb2xlLmxvZyh2YWwpDQogICAgICB0aGlzLnNlYXJjaERhdGFMaXN0ID0gdmFsDQogICAgICBsZXQgY29uZGl0aW9uID0gdGhpcy5nZXRDb25kaXRpb25MaXN0KCkNCiAgICAgIGZvciAobGV0IGtleSBpbiBjb25kaXRpb24pIHsNCiAgICAgICAgaWYgKA0KICAgICAgICAgICh0aGlzLnNlYXJjaERhdGFMaXN0W2tleV0gIT09IHVuZGVmaW5lZCkgJg0KICAgICAgICAgICh0aGlzLnNlYXJjaERhdGFMaXN0W2tleV0gIT09IG51bGwpDQogICAgICAgICkgew0KICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuc2VhcmNoRGF0YUxpc3Rba2V5XSkpIHsNCiAgICAgICAgICAgIGNvbmRpdGlvbltrZXldID0gdGhpcy5zZWFyY2hEYXRhTGlzdFtrZXldDQogICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgKHRoaXMuc2VhcmNoRGF0YUxpc3Rba2V5XSkgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICBpZiAodGhpcy5zZWFyY2hEYXRhTGlzdFtrZXldLnRyaW0oKSAhPT0gJycpIHsNCiAgICAgICAgICAgICAgdGhpcy5zZWFyY2hEYXRhTGlzdFtrZXldLnNwbGl0KCcsJykuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgICBjb25kaXRpb25ba2V5XS5wdXNoKGl0ZW0pDQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAodGhpcy5zZWFyY2hEYXRhTGlzdC5kZWNsYXJlTmFtZSAmJiB0aGlzLnNlYXJjaERhdGFMaXN0LmRlY2xhcmVOYW1lLnRyaW0oKSAhPT0gJycpIHsNCiAgICAgICAgY29uZGl0aW9uLmRlY2xhcmVOYW1lID0gdGhpcy5zZWFyY2hEYXRhTGlzdC5kZWNsYXJlTmFtZQ0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuc2VhcmNoRGF0YUxpc3QuY3JlYXRlUGVyc29uTmFtZSAmJiB0aGlzLnNlYXJjaERhdGFMaXN0LmNyZWF0ZVBlcnNvbk5hbWUudHJpbSgpICE9PSAnJykgew0KICAgICAgICBjb25kaXRpb24uY3JlYXRlUGVyc29uTmFtZSA9IHRoaXMuc2VhcmNoRGF0YUxpc3QuY3JlYXRlUGVyc29uTmFtZQ0KICAgICAgfQ0KICAgICAgdGhpcy5jb25kaXRpb24gPSBjb25kaXRpb24NCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuY29uZGl0aW9uKQ0KICAgICAgdGhpcy5sb2FkTW9uaXRvcigpDQogICAgfSwNCiAgICAvLyB0YWLliIfmjaINCiAgICB0YWJDbGljayhpbmRleCkgew0KICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IGluZGV4DQogICAgICBpZiAodGhpcy5hY3RpdmVJbmRleCA9PT0gMCkgew0KICAgICAgICB0aGlzLm1vbml0b3JTaG93ID0gdHJ1ZQ0KICAgICAgICB0aGlzLnJ1bGVzU2hvdyA9IGZhbHNlDQogICAgICAgIHRoaXMuZnVuY1Nob3cgPSBmYWxzZQ0KICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZUluZGV4ID09PSAxKSB7DQogICAgICAgIHRoaXMubW9uaXRvclNob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLnJ1bGVzU2hvdyA9IHRydWUNCiAgICAgICAgdGhpcy5mdW5jU2hvdyA9IGZhbHNlDQogICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0aXZlSW5kZXggPT09IDIpIHsNCiAgICAgICAgdGhpcy5tb25pdG9yU2hvdyA9IGZhbHNlDQogICAgICAgIHRoaXMucnVsZXNTaG93ID0gZmFsc2UNCiAgICAgICAgdGhpcy5mdW5jU2hvdyA9IHRydWUNCiAgICAgIH0NCiAgICB9LA0KICAgIGFqYXhGdW5UYWJsZURhdGEoeyBwYXJhbXMsIGN1cnJlbnRQYWdlLCBwYWdlU2l6ZSB9KSB7DQogICAgICB0aGlzLkZ1bm1haW5QYWdlckNvbmZpZy5jdXJyZW50UGFnZSA9IGN1cnJlbnRQYWdlDQogICAgICB0aGlzLkZ1bm1haW5QYWdlckNvbmZpZy5wYWdlU2l6ZSA9IHBhZ2VTaXplDQogICAgICB0aGlzLmxvYWRGdW5Nb25pdG9yKCkNCiAgICB9LA0KICAgIC8vIOaMguaOpeWHveaVsOWIl+ihqA0KICAgIGxvYWRGdW5Nb25pdG9yKCkgew0KICAgICAgY29uc3QgcGFyYW0gPSB7DQogICAgICAgIHBhZ2U6IHRoaXMuRnVubWFpblBhZ2VyQ29uZmlnLmN1cnJlbnRQYWdlLCAvLyDpobXnoIENCiAgICAgICAgcGFnZVNpemU6IDEwMDAsDQogICAgICAgIGZ1bmN0aW9uTmFtZTogdGhpcy5mdW5jb25kaXRpb24uZnVuY3Rpb25OYW1lID8gdGhpcy5mdW5jb25kaXRpb24uZnVuY3Rpb25OYW1lLnRvU3RyaW5nKCkgOiAnJywNCiAgICAgICAgZnVuY3Rpb25UeXBlOiB0aGlzLmZ1bmNvbmRpdGlvbi5mdW5jdGlvblR5cGUgPyB0aGlzLmZ1bmNvbmRpdGlvbi5mdW5jdGlvblR5cGUudG9TdHJpbmcoKSA6ICcnLA0KICAgICAgICBmdW5jdGlvblBhcmFtZXRlcjogdGhpcy5mdW5jb25kaXRpb24uZnVuY3Rpb25QYXJhbWV0ZXIgPyB0aGlzLmZ1bmNvbmRpdGlvbi5mdW5jdGlvblBhcmFtZXRlci50b1N0cmluZygpIDogJycNCiAgICAgIH0NCiAgICAgIHRoaXMuYWRkTG9hZGluZyA9IHRydWUNCiAgICAgIEh0dHBNb2R1bGUyLnF1ZXJ5VGFibGVEYXRhcyhwYXJhbSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLmFkZExvYWRpbmcgPSBmYWxzZQ0KICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwMDAwMDAnKSB7DQogICAgICAgICAgLy8gdGhpcy5tb3VudFRhYmxlRGF0YSA9IHJlcy5kYXRhLnJlc3VsdHMNCiAgICAgICAgICB0aGlzLmZ1bmN0aW9uVGFibGVEYXRhID0gcmVzLmRhdGEucmVzdWx0cw0KICAgICAgICAgIHRoaXMuRnVubWFpblBhZ2VyQ29uZmlnLnRvdGFsID0gcmVzLmRhdGEudG90YWxDb3VudA0KICAgICAgICAgIGlmICh0aGlzLnRpdGxlID09PSAn5L+u5pS5JyB8fCB0aGlzLnRpdGxlID09PSAn5aSN5Yi2Jykgew0KICAgICAgICAgICAgdGhpcy5mdW5jdGlvblRhYmxlRGF0YS5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtLmZ1bmN0aW9uQ29kZSkNCiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZ1bmN0aW9uQ29kZUxpc3QubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICBpZiAoaXRlbS5mdW5jdGlvbkNvZGUgPT09IHRoaXMuZnVuY3Rpb25Db2RlTGlzdFtpXSkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5tb3VudFRhYmxlRGF0YS5wdXNoKGl0ZW0pDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5mdW5jdGlvbkNvZGVMaXN0KQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgYWpheFRhYmxlRGF0YSh7IHBhcmFtcywgY3VycmVudFBhZ2UsIHBhZ2VTaXplIH0pIHsNCiAgICAgIHRoaXMubWFpblBhZ2VyQ29uZmlnLmN1cnJlbnRQYWdlID0gY3VycmVudFBhZ2UNCiAgICAgIHRoaXMubWFpblBhZ2VyQ29uZmlnLnBhZ2VTaXplID0gcGFnZVNpemUNCiAgICAgIHRoaXMubG9hZE1vbml0b3IoKQ0KICAgIH0sDQogICAgLy8g55uR5o6n5LqL6aG55oyC5o6lDQogICAgbG9hZE1vbml0b3IoKSB7DQogICAgICBjb25zdCBwYXJhbSA9IHsNCiAgICAgICAgcGFnZTogdGhpcy5tYWluUGFnZXJDb25maWcuY3VycmVudFBhZ2UsIC8vIOmhteeggQ0KICAgICAgICBwYWdlU2l6ZTogdGhpcy5tYWluUGFnZXJDb25maWcucGFnZVNpemUsIC8vIOavj+mhteadoeaVsA0KICAgICAgICBkZWNsYXJlTmFtZTogdGhpcy5kZWNsYXJlTmFtZSwNCiAgICAgICAgbW9mRGl2TmFtZTogdGhpcy5tb2ZEaXZOYW1lLA0KICAgICAgICBtYW5hZ2VNb2ZOYW1lOiB0aGlzLm1hbmFnZU1vZk5hbWUsDQogICAgICAgIGNyZWF0ZVBlcnNvbk5hbWU6IHRoaXMuY3JlYXRlUGVyc29uTmFtZSA/IHRoaXMuY3JlYXRlUGVyc29uTmFtZS50b1N0cmluZygpIDogJycsDQogICAgICAgIGFnZW5jeUNvZGVzOiBbXSwNCiAgICAgICAgbWFuYWdlTW9mQ29kZXM6IHRoaXMubWFuYWdlTW9mQ29kZXMsDQogICAgICAgIG1vZkRpdkNvZGVzOiBbXSwNCiAgICAgICAgbWVudUlkOiB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUuZ3VpZCwNCiAgICAgICAgZmxvd1N0YXR1czogJycNCiAgICAgIH0NCiAgICAgIHRoaXMuYWRkTG9hZGluZyA9IHRydWUNCiAgICAgIEh0dHBNb2R1bGUxLnF1ZXJ5VGFibGVEYXRhcyhwYXJhbSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLmFkZExvYWRpbmcgPSBmYWxzZQ0KICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwMDAwMDAnKSB7DQogICAgICAgICAgdGhpcy5vcGVyYXRpb25UYWJsZURhdGEgPSByZXMuZGF0YS5yZXN1bHRzDQogICAgICAgICAgdGhpcy5tYWluUGFnZXJDb25maWcudG90YWwgPSByZXMuZGF0YS50b3RhbENvdW50DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOmAieaLqeS4muWKoeezu+e7nw0KICAgIGNoYW5nZVN5c0NvZGUodmFsKSB7DQogICAgICBjb25zb2xlLmxvZyh2YWwpDQogICAgICB0aGlzLlN5c3BhcmVudElkID0gdmFsDQogICAgICB0aGlzLmJ1c2luZXNzTW9kdWxlQ29kZSA9ICcnDQogICAgICBsZXQgYnVzTmFtZSA9IHRoaXMuYnVzaW5lc3NTeXN0ZW1Db2Rlb3B0aW9ucy5maW5kKGl0ZW0gPT4gew0KICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gdmFsDQogICAgICB9KQ0KICAgICAgdGhpcy5idXNpbmVzc1N5c3RlbU5hbWUgPSBidXNOYW1lLmJ1c2luZXNzTmFtZQ0KICAgICAgdGhpcy5nZXRNb2RMaXN0cygpDQogICAgfSwNCiAgICAvLyDpgInmi6nkuJrliqHmqKHlnZcNCiAgICBjaGFuZ2VNb2RDb2RlKHZhbCkgew0KICAgICAgY29uc29sZS5sb2codmFsKQ0KICAgICAgdGhpcy5Nb2RwYXJlbnRJZCA9IHZhbA0KICAgICAgdGhpcy5idXNpbmVzc0Z1bmN0aW9uQ29kZSA9ICcnDQogICAgICBsZXQgYnVzTmFtZSA9IHRoaXMuYnVzaW5lc3NNb2R1bGVDb2Rlb3B0aW9ucy5maW5kKGl0ZW0gPT4gew0KICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gdmFsDQogICAgICB9KQ0KICAgICAgdGhpcy5idXNpbmVzc01vZHVsZU5hbWUgPSBidXNOYW1lLmJ1c2luZXNzTmFtZQ0KICAgICAgdGhpcy5nZXRGdW5MaXN0cygpDQogICAgfSwNCiAgICBjaGFuZ2VGdW5Db2RlKHZhbCkgew0KICAgICAgY29uc29sZS5sb2codmFsKQ0KICAgICAgdGhpcy5idXNpbmVzc0Z1bmN0aW9uQ29kZSA9IHZhbA0KICAgICAgbGV0IGJ1c05hbWUgPSB0aGlzLmJ1c2luZXNzRnVuY3Rpb25Db2Rlb3B0aW9ucy5maW5kKGl0ZW0gPT4gew0KICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gdmFsDQogICAgICB9KQ0KICAgICAgdGhpcy5idXNpbmVzc0Z1bmN0aW9uTmFtZSA9IGJ1c05hbWUuYnVzaW5lc3NOYW1lDQogICAgfSwNCiAgICAvLyDkuJrliqHns7vnu5/kuIvmi4nmoJENCiAgICBnZXRTeXNMaXN0cygpIHsNCiAgICAgIGNvbnN0IHBhcmFtID0gew0KICAgICAgICBidXNpbmVzc1R5cGU6IDEsDQogICAgICAgIHBhcmVudElkOiAwDQogICAgICB9DQogICAgICB0aGlzLmFkZExvYWRpbmcgPSB0cnVlDQogICAgICBIdHRwTW9kdWxlLmdldGJ1c0xpc3RzKHBhcmFtKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuYWRkTG9hZGluZyA9IGZhbHNlDQogICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAwMDAwMCcpIHsNCiAgICAgICAgICB0aGlzLmJ1c2luZXNzU3lzdGVtQ29kZW9wdGlvbnMgPSByZXMuZGF0YS5yZXN1bHRzDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOS4muWKoeaooeWdl+S4i+aLieagkQ0KICAgIGdldE1vZExpc3RzKCkgew0KICAgICAgY29uc3QgcGFyYW0gPSB7DQogICAgICAgIGJ1c2luZXNzVHlwZTogMiwNCiAgICAgICAgcGFyZW50SWQ6IHRoaXMuU3lzcGFyZW50SWQNCiAgICAgIH0NCiAgICAgIHRoaXMuYWRkTG9hZGluZyA9IHRydWUNCiAgICAgIEh0dHBNb2R1bGUuZ2V0YnVzTGlzdHMocGFyYW0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5hZGRMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMDAwMDAwJykgew0KICAgICAgICAgIHRoaXMuYnVzaW5lc3NNb2R1bGVDb2Rlb3B0aW9ucyA9IHJlcy5kYXRhLnJlc3VsdHMNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5Lia5Yqh5Yqf6IO95LiL5ouJ5qCRDQogICAgZ2V0RnVuTGlzdHMoKSB7DQogICAgICBjb25zdCBwYXJhbSA9IHsNCiAgICAgICAgYnVzaW5lc3NUeXBlOiAzLA0KICAgICAgICBwYXJlbnRJZDogdGhpcy5Nb2RwYXJlbnRJZA0KICAgICAgfQ0KICAgICAgdGhpcy5hZGRMb2FkaW5nID0gdHJ1ZQ0KICAgICAgSHR0cE1vZHVsZS5nZXRidXNMaXN0cyhwYXJhbSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLmFkZExvYWRpbmcgPSBmYWxzZQ0KICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwMDAwMDAnKSB7DQogICAgICAgICAgdGhpcy5idXNpbmVzc0Z1bmN0aW9uQ29kZW9wdGlvbnMgPSByZXMuZGF0YS5yZXN1bHRzDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIHRhYmxlIOWPs+S+p+aTjeS9nOaMiemSrg0KICAgIG9uT3B0aW9uUm93Q2xpY2soeyByb3csIG9wdGlvblR5cGUgfSwgY29udGV4dCkgew0KICAgICAgLy8gY29uc29sZS5sb2coY29udGV4dC4kcGFyZW50LiRwYXJlbnQuJHBhcmVudCkNCiAgICAgIGNvbnNvbGUubG9nKHJvdy5hdHRhY2htZW50X2lkKQ0KICAgICAgc3dpdGNoIChvcHRpb25UeXBlKSB7DQogICAgICAgIC8vIOWIoOmZpA0KICAgICAgICBjYXNlICdkZWxNb3VudCc6DQogICAgICAgICAgdGhpcy5jbGlja0FkZEJ0bihyb3cpDQogICAgICAgICAgYnJlYWsNCiAgICAgICAgZGVmYXVsdDoNCiAgICAgIH0NCiAgICB9LA0KICAgIGRpYWxvZ0Nsb3NlKCkgew0KICAgICAgdGhpcy4kcGFyZW50LmRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgdGhpcy4kcGFyZW50LnF1ZXJ5VGFibGVEYXRhcygpDQogICAgfSwNCiAgICAvLyDkv67mlLnlm57mmL4NCiAgICBzaG93SW5mbygpIHsNCiAgICAgIGlmICh0aGlzLnRpdGxlID09PSAn5paw5aKeJykgew0KICAgICAgICB0aGlzLmF0dGFjaG1lbnRJZCA9IHRoaXMuJFRvb2xGbi51dGlsRm4uZ2V0VXVpZCgpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgLy8gdGhpcy5sb2FkTW9uaXRvcigpDQogICAgICBsZXQgcGFyYW1zID0gew0KICAgICAgICBydWxlVGVtcGxhdGVDb2RlOiB0aGlzLnJ1bGVUZW1wbGF0ZUNvZGUNCiAgICAgIH0NCiAgICAgIEh0dHBNb2R1bGUuZ2V0RGV0YWlsKHBhcmFtcykudGhlbihyZXMgPT4gew0KICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwMDAwMDAnKSB7DQogICAgICAgICAgdGhpcy5ydWxlVGVtcGxhdGVOYW1lID0gcmVzLmRhdGEucnVsZVRlbXBsYXRlTmFtZQ0KICAgICAgICAgIHRoaXMucnVsZVJlbWFyayA9IHJlcy5kYXRhLnJ1bGVSZW1hcmsNCiAgICAgICAgICB0aGlzLnJ1bGVBY2NvcmQgPSByZXMuZGF0YS5ydWxlQWNjb3JkDQogICAgICAgICAgdGhpcy5maVJ1bGVUeXBlVmFsdWUgPSBTdHJpbmcocmVzLmRhdGEuZmlSdWxlVHlwZUNvZGUpDQogICAgICAgICAgdGhpcy5maVJ1bGVUeXBlQ29kZSA9IHJlcy5kYXRhLmZpUnVsZVR5cGVDb2RlDQogICAgICAgICAgdGhpcy5maVJ1bGVUeXBlTmFtZSA9IHJlcy5kYXRhLmZpUnVsZVR5cGVOYW1lDQogICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgICAgdGhpcy4kcmVmcy50cmVlLnNldFRyZWVEYXRhKCkNCiAgICAgICAgICB9KQ0KICAgICAgICAgIGlmIChyZXMuZGF0YS5kZWNsYXJlSW5mby5kZWNsYXJlQ29kZSkgew0KICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBbcmVzLmRhdGEuZGVjbGFyZUluZm9dDQogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLiRyZWZzLm9wZXJhdGlvblRhYmxlUmVmKQ0KICAgICAgICAgICAgdGhpcy4kcmVmcy5vcGVyYXRpb25UYWJsZVJlZi5oYW5kbGVDaGVja2JveENoYW5nZSh0aGlzLnRhYmxlRGF0YSkNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5mdW5jdGlvbkNvZGVMaXN0ID0gcmVzLmRhdGEuZnVuY3Rpb25Db2RlTGlzdA0KICAgICAgICAgIHRoaXMubG9hZEZ1bk1vbml0b3IoKQ0KICAgICAgICAgIHRoaXMuZ2V0TW9kTGlzdHMoKQ0KICAgICAgICAgIHRoaXMuZ2V0RnVuTGlzdHMoKQ0KICAgICAgICAgIHRoaXMubW91bnRUYWJsZURhdGEgPSByZXMuZGF0YS5mdW5jdGlvbkluZm9MaXN0Ly8g6K+m5oOF5b6X5pe25YCZ5Y+WZnVuY3Rpb25JbmZvTGlzdA0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBhZGQoKSB7DQogICAgICB0aGlzLmZ1bmN0aW9uVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIGFkZE9wZXJhdGlvbigpIHsNCiAgICAgIHRoaXMub3BlcmF0aW9uVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIGZ1bmN0aW9uQ2xvc2UoKSB7DQogICAgICB0aGlzLmZ1bmN0aW9uVmlzaWJsZSA9IGZhbHNlDQogICAgfSwNCiAgICBvcGVyYXRpb25DbG9zZSgpIHsNCiAgICAgIHRoaXMub3BlcmF0aW9uVmlzaWJsZSA9IGZhbHNlDQogICAgfSwNCiAgICBmdW5jdGlvblN1cmUoKSB7DQogICAgICBsZXQgc2VsZWN0aW9uID0gdGhpcy4kcmVmcy5mdW5jdGlvblRhYmxlUmVmLmdldFNlbGVjdGlvbkRhdGEoKQ0KICAgICAgaWYgKHNlbGVjdGlvbi5sZW5ndGggPT09IDApIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nmlbDmja4nKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIHRoaXMuZnVuY3Rpb25WaXNpYmxlID0gZmFsc2UNCiAgICAgIGlmICh0aGlzLm1vdW50VGFibGVEYXRhLmxlbmd0aCA+IDApIHsNCiAgICAgICAgc2VsZWN0aW9uLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgbGV0IGJvb2wgPSB0cnVlDQogICAgICAgICAgdGhpcy5tb3VudFRhYmxlRGF0YS5mb3JFYWNoKGl0ID0+IHsNCiAgICAgICAgICAgIGlmIChpdGVtLmZ1bmN0aW9uQ29kZSA9PT0gaXQuZnVuY3Rpb25Db2RlKSB7DQogICAgICAgICAgICAgIGJvb2wgPSBmYWxzZQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgICAgaWYgKGJvb2wpIHsNCiAgICAgICAgICAgIHRoaXMubW91bnRUYWJsZURhdGEucHVzaChpdGVtKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMubW91bnRUYWJsZURhdGEgPSBzZWxlY3Rpb24NCiAgICAgIH0NCiAgICB9LA0KICAgIG9wZXJhdGlvblN1cmUoKSB7DQogICAgICBsZXQgc2VsZWN0aW9uID0gdGhpcy4kcmVmcy50YWJsZVJlZi5nZXRTZWxlY3Rpb25EYXRhKCkNCiAgICAgIGlmIChzZWxlY3Rpb24ubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup5pWw5o2uJykNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBpZiAoc2VsZWN0aW9uLmxlbmd0aCA+IDEpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCflj6rog73pgInmi6nkuIDmnaHmlbDmja4nKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIHRoaXMub3BlcmF0aW9uQ2xvc2UoKQ0KICAgICAgdGhpcy50YWJsZURhdGEgPSBzZWxlY3Rpb24NCiAgICAgIHRoaXMucnVsZUFjY29yZCA9IHNlbGVjdGlvblswXS5ydWxlQWNjb3JkDQogICAgfSwNCiAgICBkZWxldGVEYXRhKCkgew0KICAgICAgbGV0IHNlbGVjdGlvbiA9IHRoaXMuJHJlZnMubW91bnRUYWJsZVJlZi5nZXRTZWxlY3Rpb25EYXRhKCkNCiAgICAgIGlmIChzZWxlY3Rpb24ubGVuZ3RoID09PSAwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup5pWw5o2uJykNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICB0aGlzLiRjb25maXJtKCfmmK/lkKbliKDpmaTpgInkuK3mlbDmja7vvJ8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICBzZWxlY3Rpb24uZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICB0aGlzLm1vdW50VGFibGVEYXRhLmZvckVhY2goKGl0LCBpbmRleCkgPT4gew0KICAgICAgICAgICAgaWYgKGl0ZW0uZnVuY3Rpb25Db2RlID09PSBpdC5mdW5jdGlvbkNvZGUpIHsNCiAgICAgICAgICAgICAgdGhpcy4kcmVmcy5tb3VudFRhYmxlUmVmLiRyZWZzLnhHcmlkLnJlbW92ZUNoZWNrYm94Um93KGl0ZW0pDQogICAgICAgICAgICAgIHRoaXMubW91bnRUYWJsZURhdGEuc3BsaWNlKGluZGV4LCAxKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHJlZnMubW91bnRUYWJsZVJlZikNCiAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgdHlwZTogJ2luZm8nLA0KICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtognDQogICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0sDQogICAgZGVsZXRlT3BlcmF0aW9uKCkgew0KICAgICAgbGV0IHNlbGVjdGlvbiA9IHRoaXMuJHJlZnMub3BlcmF0aW9uVGFibGVSZWYuZ2V0U2VsZWN0aW9uRGF0YSgpDQogICAgICBpZiAoc2VsZWN0aW9uLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeaVsOaNricpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu5a6a5Yig6Zmk6YCJ5Lit5pWw5o2uID8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IFtdDQogICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdpbmZvJywNCiAgICAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raIJw0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOS/neWtmA0KICAgIGRvSW5zZXJ0KCkgew0KICAgICAgbGV0IHNlbGVjdGlvbiA9IHRoaXMuJHJlZnMub3BlcmF0aW9uVGFibGVSZWYuZ2V0U2VsZWN0aW9uRGF0YSgpDQogICAgICAvLyBpZiAodGhpcy50aXRsZSA9PT0gJ+S/ruaUuScpIHsNCiAgICAgIC8vICAgc2VsZWN0aW9uID0gdGhpcy5vcGVyYXRpb25UYWJsZURhdGENCiAgICAgIC8vIH0NCiAgICAgIGlmIChzZWxlY3Rpb24ubGVuZ3RoID4gMSkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeS4gOadoeebkeaOp+S6i+mhuScpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMucnVsZVRlbXBsYXRlTmFtZSA9PT0gJycpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fovpPlhaXop4TliJnmqKHmnb/lkI3np7AnKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmZpUnVsZVR5cGVDb2RlID09PSB1bmRlZmluZWQpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nop4TliJnnsbvlnosnKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIC8vIGlmICh0aGlzLmJ1c2luZXNzU3lzdGVtQ29kZSA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAvLyAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup5Lia5Yqh57O757ufJykNCiAgICAgIC8vICAgcmV0dXJuDQogICAgICAvLyB9DQogICAgICAvLyBpZiAodGhpcy5idXNpbmVzc1N5c3RlbU5hbWUgPT09IG51bGwpIHsNCiAgICAgIC8vICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nkuJrliqHns7vnu58nKQ0KICAgICAgLy8gICByZXR1cm4NCiAgICAgIC8vIH0NCiAgICAgIC8vIGlmICh0aGlzLmJ1c2luZXNzTW9kdWxlQ29kZSA9PT0gdW5kZWZpbmVkKSB7DQogICAgICAvLyAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup5Lia5Yqh5qih5Z2XJykNCiAgICAgIC8vICAgcmV0dXJuDQogICAgICAvLyB9DQogICAgICAvLyBpZiAodGhpcy5idXNpbmVzc01vZHVsZU5hbWUgPT09IG51bGwpIHsNCiAgICAgIC8vICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nkuJrliqHmqKHlnZcnKQ0KICAgICAgLy8gICByZXR1cm4NCiAgICAgIC8vIH0NCiAgICAgIC8vIGlmICh0aGlzLmJ1c2luZXNzRnVuY3Rpb25Db2RlID09PSB1bmRlZmluZWQpIHsNCiAgICAgIC8vICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fpgInmi6nkuJrliqHlip/og70nKQ0KICAgICAgLy8gICByZXR1cm4NCiAgICAgIC8vIH0NCiAgICAgIC8vIGlmICh0aGlzLmJ1c2luZXNzRnVuY3Rpb25OYW1lID09PSBudWxsKSB7DQogICAgICAvLyAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup5Lia5Yqh5Yqf6IO9JykNCiAgICAgIC8vICAgcmV0dXJuDQogICAgICAvLyB9DQogICAgICBpZiAodGhpcy5ydWxlUmVtYXJrID09PSAnJykgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+i+k+WFpeinhOWImeivtOaYjicpDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMucnVsZUFjY29yZCA9PT0gJycpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fovpPlhaXop4TliJnkvp3mja4nKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGxldCBmdW5TZWxlY3Rpb24gPSB0aGlzLiRyZWZzLm1vdW50VGFibGVSZWYuZ2V0U2VsZWN0aW9uRGF0YSgpDQogICAgICBpZiAodGhpcy50aXRsZSA9PT0gJ+S/ruaUuScpIHsNCiAgICAgICAgZnVuU2VsZWN0aW9uID0gdGhpcy5tb3VudFRhYmxlRGF0YQ0KICAgICAgfQ0KICAgICAgaWYgKGZ1blNlbGVjdGlvbi5sZW5ndGggPCAxKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup5oyC5o6l5Ye95pWwJykNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBpZiAodGhpcy5ydWxlVGVtcGxhdGVOYW1lLmxlbmd0aCA+IDIwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6KeE5YiZ5qih5p2/5ZCN56ew6ZW/5bqm5bqU5bCP5LqO562J5LqOMjDkvY0nKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLnJ1bGVSZW1hcmsubGVuZ3RoID4gMTAwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6KeE5YiZ6K+05piO6ZW/5bqm5bqU5bCP5LqO562J5LqOMTAw5L2NJykNCiAgICAgICAgcmV0dXJuDQogICAgICB9DQogICAgICBsZXQgZnVuY3Rpb25Db2RlcyA9IFtdDQogICAgICBsZXQgYnVzaW5lc3NTeXN0ZW1OYW1lcyA9IFtdDQogICAgICBsZXQgYnVzaW5lc3NNb2R1bGVOYW1lcyA9IFtdDQogICAgICBsZXQgYnVzaW5lc3NTeXN0ZW1Db2RlcyA9IFtdDQogICAgICBsZXQgYnVzaW5lc3NNb2R1bGVDb2RlcyA9IFtdDQogICAgICBmdW5TZWxlY3Rpb24uZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgZnVuY3Rpb25Db2Rlcy5wdXNoKGl0ZW0uZnVuY3Rpb25Db2RlKQ0KICAgICAgICBidXNpbmVzc1N5c3RlbU5hbWVzLnB1c2goaXRlbS5idXNpbmVzc1N5c3RlbU5hbWUpDQogICAgICAgIGJ1c2luZXNzTW9kdWxlTmFtZXMucHVzaChpdGVtLmJ1c2luZXNzTW9kdWxlTmFtZSkNCiAgICAgICAgYnVzaW5lc3NTeXN0ZW1Db2Rlcy5wdXNoKGl0ZW0uYnVzaW5lc3NTeXN0ZW1Db2RlKQ0KICAgICAgICBidXNpbmVzc01vZHVsZUNvZGVzLnB1c2goaXRlbS5idXNpbmVzc01vZHVsZUNvZGUpDQogICAgICB9KQ0KICAgICAgbGV0IHJlcGxhY2VTdHIgPSAnJw0KICAgICAgaWYgKHRoaXMuZmlSdWxlVHlwZU5hbWUuaW5kZXhPZign5Lit5aSuLScpICE9PSAtMSkgew0KICAgICAgICByZXBsYWNlU3RyID0gJ+S4reWkri0nDQogICAgICB9IGVsc2UgaWYgKHRoaXMuZmlSdWxlVHlwZU5hbWUuaW5kZXhPZign5Zyw5pa5LScpICE9PSAtMSkgew0KICAgICAgICByZXBsYWNlU3RyID0gJ+WcsOaWuS0nDQogICAgICB9DQogICAgICBpZiAodGhpcy50aXRsZSA9PT0gJ+aWsOWinicgfHwgdGhpcy50aXRsZSA9PT0gJ+WkjeWIticpIHsNCiAgICAgICAgbGV0IHBhcmFtcyA9IHt9DQogICAgICAgIGlmIChzZWxlY3Rpb24ubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgcGFyYW1zID0gew0KICAgICAgICAgICAgJ3J1bGVUZW1wbGF0ZU5hbWUnOiB0aGlzLnJ1bGVUZW1wbGF0ZU5hbWUsDQogICAgICAgICAgICAncnVsZVJlbWFyayc6IHRoaXMucnVsZVJlbWFyaywNCiAgICAgICAgICAgICdydWxlQWNjb3JkJzogdGhpcy5ydWxlQWNjb3JkLA0KICAgICAgICAgICAgJ2Z1bmN0aW9uQ29kZUxpc3QnOiBmdW5jdGlvbkNvZGVzLA0KICAgICAgICAgICAgJ2J1c2luZXNzU3lzdGVtTmFtZSc6IGJ1c2luZXNzU3lzdGVtTmFtZXNbMF0sDQogICAgICAgICAgICAnYnVzaW5lc3NNb2R1bGVOYW1lJzogYnVzaW5lc3NNb2R1bGVOYW1lc1swXSwNCiAgICAgICAgICAgICdidXNpbmVzc1N5c3RlbUNvZGUnOiBidXNpbmVzc1N5c3RlbUNvZGVzWzBdLA0KICAgICAgICAgICAgJ2J1c2luZXNzTW9kdWxlQ29kZSc6IGJ1c2luZXNzTW9kdWxlQ29kZXNbMF0sDQogICAgICAgICAgICAnZmlSdWxlVHlwZUNvZGUnOiB0aGlzLmZpUnVsZVR5cGVDb2RlLA0KICAgICAgICAgICAgJ2ZpUnVsZVR5cGVOYW1lJzogdGhpcy5maVJ1bGVUeXBlTmFtZS5yZXBsYWNlKHJlcGxhY2VTdHIsICcnKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBwYXJhbXMgPSB7DQogICAgICAgICAgICAnZGVjbGFyZUNvZGUnOiBzZWxlY3Rpb25bMF0uZGVjbGFyZUNvZGUsDQogICAgICAgICAgICAncnVsZVRlbXBsYXRlTmFtZSc6IHRoaXMucnVsZVRlbXBsYXRlTmFtZSwNCiAgICAgICAgICAgICdydWxlUmVtYXJrJzogdGhpcy5ydWxlUmVtYXJrLA0KICAgICAgICAgICAgJ3J1bGVBY2NvcmQnOiB0aGlzLnJ1bGVBY2NvcmQsDQogICAgICAgICAgICAnZnVuY3Rpb25Db2RlTGlzdCc6IGZ1bmN0aW9uQ29kZXMsDQogICAgICAgICAgICAnYnVzaW5lc3NTeXN0ZW1OYW1lJzogYnVzaW5lc3NTeXN0ZW1OYW1lc1swXSwNCiAgICAgICAgICAgICdidXNpbmVzc01vZHVsZU5hbWUnOiBidXNpbmVzc01vZHVsZU5hbWVzWzBdLA0KICAgICAgICAgICAgJ2J1c2luZXNzU3lzdGVtQ29kZSc6IGJ1c2luZXNzU3lzdGVtQ29kZXNbMF0sDQogICAgICAgICAgICAnYnVzaW5lc3NNb2R1bGVDb2RlJzogYnVzaW5lc3NNb2R1bGVDb2Rlc1swXSwNCiAgICAgICAgICAgIG1lbnVOYW1lOiB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUubmFtZSwNCiAgICAgICAgICAgICdmaVJ1bGVUeXBlQ29kZSc6IHRoaXMuZmlSdWxlVHlwZUNvZGUsDQogICAgICAgICAgICAnZmlSdWxlVHlwZU5hbWUnOiB0aGlzLmZpUnVsZVR5cGVOYW1lLnJlcGxhY2UocmVwbGFjZVN0ciwgJycpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIEh0dHBNb2R1bGUuYWRkVGVtcGxhdGUocGFyYW1zKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMDAwMDAwJykgew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmlrDlop7miJDlip8nKQ0KICAgICAgICAgICAgdGhpcy4kcGFyZW50LmRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICAgICAgdGhpcy4kcGFyZW50LnF1ZXJ5VGFibGVEYXRhcygpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbGV0IHBhcmFtcyA9IHt9DQogICAgICAgIGlmIChzZWxlY3Rpb24ubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgcGFyYW1zID0gew0KICAgICAgICAgICAgcnVsZVRlbXBsYXRlQ29kZTogdGhpcy5ydWxlVGVtcGxhdGVDb2RlLA0KICAgICAgICAgICAgJ3J1bGVUZW1wbGF0ZU5hbWUnOiB0aGlzLnJ1bGVUZW1wbGF0ZU5hbWUsDQogICAgICAgICAgICAncnVsZVJlbWFyayc6IHRoaXMucnVsZVJlbWFyaywNCiAgICAgICAgICAgICdydWxlQWNjb3JkJzogdGhpcy5ydWxlQWNjb3JkLA0KICAgICAgICAgICAgJ2Z1bmN0aW9uQ29kZUxpc3QnOiBmdW5jdGlvbkNvZGVzLA0KICAgICAgICAgICAgJ2ZpUnVsZVR5cGVDb2RlJzogdGhpcy5maVJ1bGVUeXBlQ29kZSwNCiAgICAgICAgICAgICdmaVJ1bGVUeXBlTmFtZSc6IHRoaXMuZmlSdWxlVHlwZU5hbWUucmVwbGFjZShyZXBsYWNlU3RyLCAnJykNCg0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBwYXJhbXMgPSB7DQogICAgICAgICAgICBydWxlVGVtcGxhdGVDb2RlOiB0aGlzLnJ1bGVUZW1wbGF0ZUNvZGUsDQogICAgICAgICAgICAnZGVjbGFyZUNvZGUnOiBzZWxlY3Rpb25bMF0uZGVjbGFyZUNvZGUsDQogICAgICAgICAgICAncnVsZVRlbXBsYXRlTmFtZSc6IHRoaXMucnVsZVRlbXBsYXRlTmFtZSwNCiAgICAgICAgICAgICdydWxlUmVtYXJrJzogdGhpcy5ydWxlUmVtYXJrLA0KICAgICAgICAgICAgJ3J1bGVBY2NvcmQnOiB0aGlzLnJ1bGVBY2NvcmQsDQogICAgICAgICAgICAnZnVuY3Rpb25Db2RlTGlzdCc6IGZ1bmN0aW9uQ29kZXMsDQogICAgICAgICAgICAnZmlSdWxlVHlwZUNvZGUnOiB0aGlzLmZpUnVsZVR5cGVDb2RlLA0KICAgICAgICAgICAgJ2ZpUnVsZVR5cGVOYW1lJzogdGhpcy5maVJ1bGVUeXBlTmFtZS5yZXBsYWNlKHJlcGxhY2VTdHIsICcnKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBIdHRwTW9kdWxlLmNoYW5nZVRlbXBsYXRlKHBhcmFtcykudGhlbihyZXMgPT4gew0KICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAwMDAwMCcpIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5YqfJykNCiAgICAgICAgICAgIHRoaXMuJHBhcmVudC5kaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuJHBhcmVudC5xdWVyeVRhYmxlRGF0YXMoKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIHNldEZpUnVsZVR5cGUodmFsKSB7DQogICAgICBsZXQgdmFsQXJyID0gdmFsLnNwbGl0KCcjIycpDQogICAgICB0aGlzLmZpUnVsZVR5cGVOYW1lID0gdmFsQXJyWzJdDQogICAgICB0aGlzLmZpUnVsZVR5cGVDb2RlID0gTnVtYmVyKHZhbEFyclswXSkNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5zaG93SW5mbygpDQogICAgaWYgKHRoaXMudGl0bGUgPT09ICfmlrDlop4nKSB7DQogICAgICAvLyB0aGlzLmNoZWNrYm94Q29uZmlnLmNoZWNrQWxsID0gZmFsc2UNCiAgICAgIHRoaXMuYnV0dG9uTmFtZSA9ICfmt7vliqAnDQogICAgICB0aGlzLmxvYWRGdW5Nb25pdG9yKCkNCiAgICB9DQogICAgaWYgKHRoaXMudGl0bGUgPT09ICfmn6XnnIvor6bmg4UnKSB7DQogICAgICB0aGlzLnRhYmJ0biA9IFsn55uR5o6n5LqL6aG55L+h5oGvJywgJ+inhOWImeaooeadv+S/oeaBrycsICfmjILmjqXlh73mlbDkv6Hmga8nXQ0KICAgICAgdGhpcy5pc1Nob3dCdXR0b24gPSBmYWxzZQ0KICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWUNCiAgICB9DQogICAgdGhpcy5sb2FkTW9uaXRvcigpDQogICAgdGhpcy5nZXRTeXNMaXN0cygpDQogICAgLy8gdGhpcy5nZXRNb2RMaXN0cygpDQogICAgLy8gdGhpcy5nZXRGdW5MaXN0cygpDQogIH0NCn0NCg=="},{"version":3,"sources":["addDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addDialog.vue","sourceRoot":"src/views/main/MointoringMatters/MonitoringRuleTemplateLibraryManagement/children","sourcesContent":["<!--监控规则模板库新增页面弹框-->\r\n<template>\r\n  <div>\r\n    <vxe-modal\r\n      v-model=\"dialogVisible\"\r\n      :title=\"title\"\r\n      width=\"96%\"\r\n      height=\"90%\"\r\n      :show-footer=\"false\"\r\n      @close=\"dialogClose\"\r\n    >\r\n      <div style=\"width:100%;height:45px;float:left;\">\r\n        <div v-for=\"(item,index) in tabbtn\" :key=\"index\" class=\"setbtn\">\r\n          <div :id=\"index\" class=\"tabone\" :class=\"activeIndex === index ? 'tabone1' : ''\" @click=\"tabClick(index)\">\r\n            {{ item }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!--监控事项挂接-->\r\n      <div v-show=\"monitorShow\" class=\"payVoucherInput\" style=\"margin-top:50px;\">\r\n        <div v-show=\"isShowButton\" style=\"width:100%;height: 80px;margin:0 15px\">\r\n          <div v-if=\"showbox\" id=\"bigbox\"></div>\r\n          <el-divider style=\"color:#E7EBF0\" />\r\n          <div type=\"flex\" justify=\"end\">\r\n            <div style=\"width:100%\">\r\n              <vxe-button id=\"savebutton\" style=\"float:right;margin-right:20px\" status=\"primary\" @click=\"addOperation\">{{ buttonName }}</vxe-button>\r\n              <vxe-button style=\"float:right;margin-right:20px\" @click=\"deleteOperation\">删除</vxe-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div v-loading=\"addLoading\" class=\"body\">\r\n          <div class=\"header-table\">\r\n            <BsTable\r\n              ref=\"operationTableRef\"\r\n              height=\"450px\"\r\n              :footer-config=\"{ showFooter: false }\"\r\n              :checkbox-config=\"checkboxConfig\"\r\n              :table-columns-config=\"monitorTableColumnsConfig\"\r\n              :table-data=\"tableData\"\r\n              :table-config=\"tableConfig\"\r\n              :toolbar-config=\"false\"\r\n              :pager-config=\"false\"\r\n              @ajaxData=\"ajaxTableData\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!--规则模板新增-->\r\n      <div v-show=\"rulesShow\" class=\"payVoucherInput\" style=\"margin-top:50px;\">\r\n        <div>\r\n          <div>\r\n            <el-row>\r\n              <el-col :span=\"12\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;规则模板名称</div>\r\n                      <el-input\r\n                        v-model=\"ruleTemplateName\"\r\n                        :disabled=\"disabled\"\r\n                        placeholder=\"请输入规则模板名称\"\r\n                        style=\"width:45%\"\r\n                      />\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;规则类型</div>\r\n                      <BsTreeInput\r\n                        ref=\"tree\"\r\n                        v-model=\"fiRuleTypeValue\"\r\n                        :datas=\"fiRuleTypeList\"\r\n                        :isleaf=\"true\"\r\n                        style=\"width:45%\"\r\n                        formatter=\"#name\"\r\n                        :open-format-label=\"true\"\r\n                        @input=\"setFiRuleType\"\r\n                      />\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"12\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;规则依据</div>\r\n                      <el-input\r\n                        v-model=\"ruleAccord\"\r\n                        :disabled=\"disabled\"\r\n                        type=\"textarea\"\r\n                        :rows=\"3\"\r\n                        placeholder=\"请输入规则依据\"\r\n                        style=\" width:45%\"\r\n                      />\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;模板说明</div>\r\n                      <el-input\r\n                        v-model=\"ruleRemark\"\r\n                        :disabled=\"disabled\"\r\n                        type=\"textarea\"\r\n                        :rows=\"3\"\r\n                        placeholder=\"请输入模板说明\"\r\n                        style=\" width:45%\"\r\n                      />\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n            </el-row>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!--添加挂接函数-->\r\n      <div v-show=\"funcShow\" class=\"payVoucherInput\" style=\"margin-top:50px;\">\r\n        <div v-show=\"isShowButton\" style=\"width:100%;height: 80px;margin:0 15px\">\r\n          <div v-if=\"showbox\" id=\"bigbox\"></div>\r\n          <el-divider style=\"color:#E7EBF0\" />\r\n          <div type=\"flex\" justify=\"end\">\r\n            <div style=\"width:100%\">\r\n              <vxe-button id=\"savebutton\" style=\"float:right;margin-right:20px\" status=\"primary\" @click=\"add\">添加</vxe-button>\r\n              <vxe-button style=\"float:right;margin-right:20px\" @click=\"deleteData\">删除</vxe-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div v-loading=\"addLoading\" class=\"header-table\">\r\n          <BsTable\r\n            ref=\"mountTableRef\"\r\n            height=\"400px\"\r\n            :checkbox-config=\"checkboxConfig\"\r\n            :footer-config=\"{ showFooter: false }\"\r\n            :table-columns-config=\"mountTableColumnsConfig\"\r\n            :table-data=\"mountTableData\"\r\n            :table-config=\"mounttableConfig\"\r\n            :toolbar-config=\"false\"\r\n            :pager-config=\"false\"\r\n            @ajaxData=\"ajaxFunTableData\"\r\n          />\r\n        </div>\r\n        <div slot=\"footer\" style=\"width:100%;height: 80px;margin:0 15px\">\r\n          <div v-if=\"showbox\" id=\"bigbox\"></div>\r\n          <el-divider style=\"color:#E7EBF0\" />\r\n          <div type=\"flex\" justify=\"end\">\r\n            <div style=\"width:100%\">\r\n              <vxe-button v-show=\"isShowButton\" id=\"savebutton\" style=\"float:right;margin-right:20px\" status=\"primary\" @click=\"doInsert\">保存</vxe-button>\r\n              <vxe-button style=\"float:right;margin-right:20px\" @click=\"dialogClose\">取消</vxe-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </vxe-modal>\r\n    <vxe-modal\r\n      v-model=\"functionVisible\"\r\n      v-loading=\"addLoading\"\r\n      title=\"挂接函数\"\r\n      width=\"96%\"\r\n      height=\"90%\"\r\n      :show-footer=\"false\"\r\n      @close=\"functionClose\"\r\n    >\r\n      <div class=\"main-query\">\r\n        <BsQuery\r\n          ref=\"funcqueryFrom\"\r\n          :query-form-item-config=\"funcqueryConfig\"\r\n          :query-form-data=\"funcsearchDataList\"\r\n          @onSearchClick=\"searchFun\"\r\n        />\r\n      </div>\r\n      <div v-loading=\"addLoading\" class=\"header-table\">\r\n        <BsTable\r\n          ref=\"functionTableRef\"\r\n          height=\"400px\"\r\n          :footer-config=\"{ showFooter: false }\"\r\n          :table-columns-config=\"mountTableColumnsConfig\"\r\n          :table-data=\"functionTableData\"\r\n          :table-config=\"mounttableConfig\"\r\n          :toolbar-config=\"false\"\r\n          :pager-config=\"false\"\r\n          @ajaxData=\"ajaxFunTableData\"\r\n          @cellClick=\"cellClick\"\r\n        />\r\n      </div>\r\n      <div style=\"width:100%;height: 80px;margin:0 15px\">\r\n        <el-divider style=\"color:#E7EBF0\" />\r\n        <div type=\"flex\" justify=\"end\">\r\n          <div style=\"width:100%\">\r\n            <vxe-button id=\"savebutton\" style=\"float:right;margin-right:20px\" status=\"primary\" @click=\"functionSure\">确定</vxe-button>\r\n            <vxe-button style=\"float:right;margin-right:20px\" @click=\"functionClose\">取消</vxe-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </vxe-modal>\r\n    <vxe-modal\r\n      v-model=\"operationVisible\"\r\n      v-loading=\"addLoading\"\r\n      title=\"事项挂接\"\r\n      width=\"96%\"\r\n      height=\"90%\"\r\n      :show-footer=\"false\"\r\n      @close=\"operationClose\"\r\n    >\r\n      <div class=\"main-query\">\r\n        <BsQuery\r\n          ref=\"declareQueryFrom\"\r\n          :query-form-item-config=\"declareQueryCofig\"\r\n          :query-form-data=\"declareSearchDataList\"\r\n          @onSearchClick=\"searchDeclare\"\r\n        />\r\n      </div>\r\n      <div class=\"header-table\">\r\n        <BsTable\r\n          ref=\"tableRef\"\r\n          height=\"450px\"\r\n          :footer-config=\"{ showFooter: false }\"\r\n          :table-columns-config=\"monitorTableColumnsConfig\"\r\n          :table-data=\"operationTableData\"\r\n          :table-config=\"tableConfig\"\r\n          :toolbar-config=\"false\"\r\n          :pager-config=\"mainPagerConfig\"\r\n          @ajaxData=\"ajaxTableData\"\r\n        />\r\n      </div>\r\n      <div style=\"width:100%;height: 80px;margin:0 15px\">\r\n        <el-divider style=\"color:#E7EBF0\" />\r\n        <div type=\"flex\" justify=\"end\">\r\n          <div style=\"width:100%\">\r\n            <vxe-button id=\"savebutton\" style=\"float:right;margin-right:20px\" status=\"primary\" @click=\"operationSure\">确定</vxe-button>\r\n            <vxe-button style=\"float:right;margin-right:20px\" @click=\"operationClose\">取消</vxe-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </vxe-modal>\r\n    <BsDialog\r\n      :visible.sync=\"showDialogView\"\r\n      :show-header=\"true\"\r\n      :show-footer=\"false\"\r\n      :show-close=\"true\"\r\n      :close-destory=\"true\"\r\n      title=\"函数参数\"\r\n      width=\"60%\"\r\n    >\r\n      <div slot=\"context\" v-loading=\"false\">\r\n        {{ functionParameter }}\r\n      </div>\r\n    </BsDialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { proconf } from '../MonitoringRuleTemplateLibraryManagement.js'\r\nimport HttpModule from '@/api/frame/main/Monitoring/MonitoringRule.js'\r\nimport HttpModule1 from '@/api/frame/main/Monitoring/Declaration.js'\r\nimport HttpModule2 from '@/api/frame/main/Monitoring/Monitoring.js'\r\nexport default {\r\n  name: 'AddDialog',\r\n  components: {},\r\n  computed: {\r\n    curNavModule() {\r\n      return this.$store.state.curNavModule\r\n    }\r\n  },\r\n  watch: {\r\n    declareQueryCofig() {\r\n      this.getDeclareSearchDataList()\r\n    },\r\n    queryConfig() {\r\n      this.getSearchDataList()\r\n    },\r\n    funcqueryConfig() {\r\n      this.getFunSearchDataList()\r\n    }\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    ruleTemplateCode: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    functionCodeList: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      checkboxConfig: {\r\n        checkAll: true\r\n      },\r\n      condition: {},\r\n      funcondition: {},\r\n      tabbtn: ['监控事项挂接', '规则模板新增', '添加挂接函数'],\r\n      activeIndex: 0,\r\n      monitorShow: true,\r\n      rulesShow: false,\r\n      funcShow: false,\r\n      mounttableConfig: {\r\n        renderers: {\r\n          // 编辑 附件 操作日志\r\n          $payVoucherInputGloableOptionRow: proconf.gloableOptionRow1\r\n        },\r\n        methods: {\r\n          onOptionRowClick: this.onOptionRowClick\r\n        }\r\n      },\r\n      mountTableColumnsConfig: proconf.mountTableColumnsConfig,\r\n      mountTableData: [],\r\n      // BsQuery 查询栏\r\n      queryConfig: proconf.highQueryConfig,\r\n      searchDataList: proconf.highQueryData,\r\n      declareSearchDataList: proconf.declareQueryData,\r\n      declareQueryCofig: proconf.declareQueryCofig,\r\n      funcqueryConfig: proconf.funchighQueryConfig,\r\n      funcsearchDataList: proconf.funchighQueryData,\r\n      // table 配置\r\n      tableConfig: {\r\n        renderers: {\r\n          // 编辑 附件 操作日志\r\n          $gloableOptionRow: proconf.gloableOptionRow\r\n        },\r\n        methods: {\r\n          onOptionRowClick: this.onOptionRowClick\r\n        }\r\n      },\r\n      monitorTableColumnsConfig: proconf.monitorTableColumnsConfig,\r\n      operationTableData: [],\r\n      declareTarget: '',\r\n      ruleTemplateName: '',\r\n      businessSystemCode: '',\r\n      businessSystemName: '',\r\n      businessSystemCodeoptions: [],\r\n      businessModuleCode: '',\r\n      businessModuleName: '',\r\n      businessModuleCodeoptions: [],\r\n      businessFunctionCode: '',\r\n      businessFunctionName: '',\r\n      businessFunctionCodeoptions: [],\r\n      policiesName: '',\r\n      ruleRemark: '',\r\n      ruleAccord: '',\r\n      dialogVisible: true,\r\n      addLoading: false,\r\n      token: '',\r\n      isContinuity: false,\r\n      // 文件上传相关参数\r\n      fileList: [],\r\n      fileData: [],\r\n      fileDataBakDel: [],\r\n      attachmentId: '',\r\n      showbox: false,\r\n      mainPagerConfig: {\r\n        total: 1,\r\n        currentPage: 1,\r\n        pageSize: 20\r\n      },\r\n      FunmainPagerConfig: {\r\n        total: 0,\r\n        currentPage: 1,\r\n        pageSize: 20\r\n      },\r\n      SysparentId: 0,\r\n      ModparentId: 0,\r\n      functionVisible: false,\r\n      functionTableData: [],\r\n      tableData: [],\r\n      operationVisible: false,\r\n      buttonName: '修改',\r\n      isShowButton: true,\r\n      disabled: false,\r\n      showDialogView: false,\r\n      fiRuleTypeList: [\r\n        { id: '1',\r\n          label: '中央监控规则',\r\n          children: [\r\n            { id: '11', label: '中央-通用类监控规则' },\r\n            { id: '12', label: '中央-专项类监控规则' },\r\n            { id: '19', label: '中央-其他监控规则' }\r\n          ]\r\n        },\r\n        { id: '2',\r\n          label: '地方监控规则',\r\n          children: [\r\n            { id: '21', label: '地方-通用类监控规则' },\r\n            { id: '22', label: '地方-专项类监控规则' },\r\n            { id: '29', label: '地方-其他监控规则' }\r\n          ]\r\n        }\r\n      ],\r\n      fiRuleTypeCode: '',\r\n      fiRuleTypeName: '',\r\n      selectVal: '',\r\n      selectName: '',\r\n      fiRuleTypeValue: ''\r\n    }\r\n  },\r\n  methods: {\r\n    // 表格单元行单击\r\n    cellClick(obj, context, e) {\r\n      // console.log('参数', ...arguments)\r\n      let key = obj.column.property\r\n      console.log(key, obj.row)\r\n      switch (key) {\r\n        // 申请编号\r\n        case 'functionParameter':\r\n          this.showParameter(obj.row)\r\n          break\r\n      }\r\n    },\r\n    showParameter(row) {\r\n      this.functionParameter = row.functionParameter\r\n      this.showDialogView = true\r\n    },\r\n    getDeclareSearchDataList() {\r\n    },\r\n    getFunSearchDataList() {\r\n      // 下拉树\r\n      let searchDataObj = {}\r\n      this.funcqueryConfig.forEach(item => {\r\n        if (item.itemRender.name === '$formTreeInput' || item.itemRender.name === '$vxeTree') {\r\n          if (item.field) {\r\n            searchDataObj[item.field + 'code'] = ''\r\n          }\r\n        } else {\r\n          if (item.field) {\r\n            searchDataObj[item.field] = ''\r\n          }\r\n        }\r\n      })\r\n      this.funcsearchDataList = searchDataObj\r\n    },\r\n    // 初始化高级查询参数condition\r\n    getFunConditionList() {\r\n      let condition = {}\r\n      this.funcqueryConfig.forEach(item => {\r\n        if (item.itemRender.name === '$formTreeInput' || item.itemRender.name === '$vxeTree') {\r\n          if (item.field) {\r\n            if (item.field === 'cor_bgt_doc_no_') {\r\n              condition[item.field + 'name'] = []\r\n            } else {\r\n              condition[item.field + 'code'] = []\r\n            }\r\n          }\r\n        } else {\r\n          if (item.field) {\r\n            condition[item.field] = []\r\n          }\r\n        }\r\n      })\r\n      return condition\r\n    },\r\n    searchDeclare(val) {\r\n      console.log(val)\r\n      this.declareName = val.declareName\r\n      this.createPersonName = val.createPersonName\r\n      this.mofDivName = val.mofDivName\r\n      this.manageMofName = val.manageMofName\r\n      this.loadMonitor()\r\n    },\r\n    // 搜索\r\n    searchFun(val) {\r\n      console.log(val)\r\n      this.funcsearchDataList = val\r\n      let condition = this.getFunConditionList()\r\n      for (let key in condition) {\r\n        if (\r\n          (this.funcsearchDataList[key] !== undefined) &\r\n          (this.funcsearchDataList[key] !== null)\r\n        ) {\r\n          if (Array.isArray(this.funcsearchDataList[key])) {\r\n            condition[key] = this.funcsearchDataList[key]\r\n          } else if (typeof (this.funcsearchDataList[key]) === 'string') {\r\n            if (this.funcsearchDataList[key].trim() !== '') {\r\n              this.funcsearchDataList[key].split(',').forEach(item => {\r\n                condition[key].push(item)\r\n              })\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (this.funcsearchDataList.functionType && this.funcsearchDataList.functionType.trim() !== '') {\r\n        condition.functionType = this.funcsearchDataList.functionType\r\n      }\r\n      if (this.funcsearchDataList.functionName && this.funcsearchDataList.functionName.trim() !== '') {\r\n        condition.functionName = this.funcsearchDataList.functionName\r\n      }\r\n      if (this.funcsearchDataList.functionParameter && this.funcsearchDataList.functionParameter.trim() !== '') {\r\n        condition.functionParameter = this.funcsearchDataList.functionParameter\r\n      }\r\n      this.funcondition = condition\r\n      this.loadFunMonitor()\r\n    },\r\n    // 初始化高级查询data\r\n    getSearchDataList() {\r\n      // 下拉树\r\n      let searchDataObj = {}\r\n      this.queryConfig.forEach(item => {\r\n        if (item.itemRender.name === '$formTreeInput' || item.itemRender.name === '$vxeTree') {\r\n          if (item.field) {\r\n            searchDataObj[item.field + 'code'] = ''\r\n          }\r\n        } else {\r\n          if (item.field) {\r\n            searchDataObj[item.field] = ''\r\n          }\r\n        }\r\n      })\r\n      this.searchDataList = searchDataObj\r\n    },\r\n    // 初始化高级查询参数condition\r\n    getConditionList() {\r\n      let condition = {}\r\n      this.queryConfig.forEach(item => {\r\n        if (item.itemRender.name === '$formTreeInput' || item.itemRender.name === '$vxeTree') {\r\n          if (item.field) {\r\n            if (item.field === 'cor_bgt_doc_no_') {\r\n              condition[item.field + 'name'] = []\r\n            } else {\r\n              condition[item.field + 'code'] = []\r\n            }\r\n          }\r\n        } else {\r\n          if (item.field) {\r\n            condition[item.field] = []\r\n          }\r\n        }\r\n      })\r\n      return condition\r\n    },\r\n    // 搜索\r\n    search(val) {\r\n      console.log(val)\r\n      this.searchDataList = val\r\n      let condition = this.getConditionList()\r\n      for (let key in condition) {\r\n        if (\r\n          (this.searchDataList[key] !== undefined) &\r\n          (this.searchDataList[key] !== null)\r\n        ) {\r\n          if (Array.isArray(this.searchDataList[key])) {\r\n            condition[key] = this.searchDataList[key]\r\n          } else if (typeof (this.searchDataList[key]) === 'string') {\r\n            if (this.searchDataList[key].trim() !== '') {\r\n              this.searchDataList[key].split(',').forEach(item => {\r\n                condition[key].push(item)\r\n              })\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (this.searchDataList.declareName && this.searchDataList.declareName.trim() !== '') {\r\n        condition.declareName = this.searchDataList.declareName\r\n      }\r\n      if (this.searchDataList.createPersonName && this.searchDataList.createPersonName.trim() !== '') {\r\n        condition.createPersonName = this.searchDataList.createPersonName\r\n      }\r\n      this.condition = condition\r\n      console.log(this.condition)\r\n      this.loadMonitor()\r\n    },\r\n    // tab切换\r\n    tabClick(index) {\r\n      this.activeIndex = index\r\n      if (this.activeIndex === 0) {\r\n        this.monitorShow = true\r\n        this.rulesShow = false\r\n        this.funcShow = false\r\n      } else if (this.activeIndex === 1) {\r\n        this.monitorShow = false\r\n        this.rulesShow = true\r\n        this.funcShow = false\r\n      } else if (this.activeIndex === 2) {\r\n        this.monitorShow = false\r\n        this.rulesShow = false\r\n        this.funcShow = true\r\n      }\r\n    },\r\n    ajaxFunTableData({ params, currentPage, pageSize }) {\r\n      this.FunmainPagerConfig.currentPage = currentPage\r\n      this.FunmainPagerConfig.pageSize = pageSize\r\n      this.loadFunMonitor()\r\n    },\r\n    // 挂接函数列表\r\n    loadFunMonitor() {\r\n      const param = {\r\n        page: this.FunmainPagerConfig.currentPage, // 页码\r\n        pageSize: 1000,\r\n        functionName: this.funcondition.functionName ? this.funcondition.functionName.toString() : '',\r\n        functionType: this.funcondition.functionType ? this.funcondition.functionType.toString() : '',\r\n        functionParameter: this.funcondition.functionParameter ? this.funcondition.functionParameter.toString() : ''\r\n      }\r\n      this.addLoading = true\r\n      HttpModule2.queryTableDatas(param).then(res => {\r\n        this.addLoading = false\r\n        if (res.code === '000000') {\r\n          // this.mountTableData = res.data.results\r\n          this.functionTableData = res.data.results\r\n          this.FunmainPagerConfig.total = res.data.totalCount\r\n          if (this.title === '修改' || this.title === '复制') {\r\n            this.functionTableData.forEach(item => {\r\n              console.log(item.functionCode)\r\n              for (let i = 0; i < this.functionCodeList.length; i++) {\r\n                if (item.functionCode === this.functionCodeList[i]) {\r\n                  this.mountTableData.push(item)\r\n                }\r\n              }\r\n            })\r\n            console.log(this.functionCodeList)\r\n          }\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    ajaxTableData({ params, currentPage, pageSize }) {\r\n      this.mainPagerConfig.currentPage = currentPage\r\n      this.mainPagerConfig.pageSize = pageSize\r\n      this.loadMonitor()\r\n    },\r\n    // 监控事项挂接\r\n    loadMonitor() {\r\n      const param = {\r\n        page: this.mainPagerConfig.currentPage, // 页码\r\n        pageSize: this.mainPagerConfig.pageSize, // 每页条数\r\n        declareName: this.declareName,\r\n        mofDivName: this.mofDivName,\r\n        manageMofName: this.manageMofName,\r\n        createPersonName: this.createPersonName ? this.createPersonName.toString() : '',\r\n        agencyCodes: [],\r\n        manageMofCodes: this.manageMofCodes,\r\n        mofDivCodes: [],\r\n        menuId: this.$store.state.curNavModule.guid,\r\n        flowStatus: ''\r\n      }\r\n      this.addLoading = true\r\n      HttpModule1.queryTableDatas(param).then(res => {\r\n        this.addLoading = false\r\n        if (res.code === '000000') {\r\n          this.operationTableData = res.data.results\r\n          this.mainPagerConfig.total = res.data.totalCount\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    // 选择业务系统\r\n    changeSysCode(val) {\r\n      console.log(val)\r\n      this.SysparentId = val\r\n      this.businessModuleCode = ''\r\n      let busName = this.businessSystemCodeoptions.find(item => {\r\n        return item.id === val\r\n      })\r\n      this.businessSystemName = busName.businessName\r\n      this.getModLists()\r\n    },\r\n    // 选择业务模块\r\n    changeModCode(val) {\r\n      console.log(val)\r\n      this.ModparentId = val\r\n      this.businessFunctionCode = ''\r\n      let busName = this.businessModuleCodeoptions.find(item => {\r\n        return item.id === val\r\n      })\r\n      this.businessModuleName = busName.businessName\r\n      this.getFunLists()\r\n    },\r\n    changeFunCode(val) {\r\n      console.log(val)\r\n      this.businessFunctionCode = val\r\n      let busName = this.businessFunctionCodeoptions.find(item => {\r\n        return item.id === val\r\n      })\r\n      this.businessFunctionName = busName.businessName\r\n    },\r\n    // 业务系统下拉树\r\n    getSysLists() {\r\n      const param = {\r\n        businessType: 1,\r\n        parentId: 0\r\n      }\r\n      this.addLoading = true\r\n      HttpModule.getbusLists(param).then(res => {\r\n        this.addLoading = false\r\n        if (res.code === '000000') {\r\n          this.businessSystemCodeoptions = res.data.results\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    // 业务模块下拉树\r\n    getModLists() {\r\n      const param = {\r\n        businessType: 2,\r\n        parentId: this.SysparentId\r\n      }\r\n      this.addLoading = true\r\n      HttpModule.getbusLists(param).then(res => {\r\n        this.addLoading = false\r\n        if (res.code === '000000') {\r\n          this.businessModuleCodeoptions = res.data.results\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    // 业务功能下拉树\r\n    getFunLists() {\r\n      const param = {\r\n        businessType: 3,\r\n        parentId: this.ModparentId\r\n      }\r\n      this.addLoading = true\r\n      HttpModule.getbusLists(param).then(res => {\r\n        this.addLoading = false\r\n        if (res.code === '000000') {\r\n          this.businessFunctionCodeoptions = res.data.results\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    // table 右侧操作按钮\r\n    onOptionRowClick({ row, optionType }, context) {\r\n      // console.log(context.$parent.$parent.$parent)\r\n      console.log(row.attachment_id)\r\n      switch (optionType) {\r\n        // 删除\r\n        case 'delMount':\r\n          this.clickAddBtn(row)\r\n          break\r\n        default:\r\n      }\r\n    },\r\n    dialogClose() {\r\n      this.$parent.dialogVisible = false\r\n      this.$parent.queryTableDatas()\r\n    },\r\n    // 修改回显\r\n    showInfo() {\r\n      if (this.title === '新增') {\r\n        this.attachmentId = this.$ToolFn.utilFn.getUuid()\r\n        return\r\n      }\r\n      // this.loadMonitor()\r\n      let params = {\r\n        ruleTemplateCode: this.ruleTemplateCode\r\n      }\r\n      HttpModule.getDetail(params).then(res => {\r\n        if (res.code === '000000') {\r\n          this.ruleTemplateName = res.data.ruleTemplateName\r\n          this.ruleRemark = res.data.ruleRemark\r\n          this.ruleAccord = res.data.ruleAccord\r\n          this.fiRuleTypeValue = String(res.data.fiRuleTypeCode)\r\n          this.fiRuleTypeCode = res.data.fiRuleTypeCode\r\n          this.fiRuleTypeName = res.data.fiRuleTypeName\r\n          this.$nextTick(() => {\r\n            this.$refs.tree.setTreeData()\r\n          })\r\n          if (res.data.declareInfo.declareCode) {\r\n            this.tableData = [res.data.declareInfo]\r\n            console.log(this.$refs.operationTableRef)\r\n            this.$refs.operationTableRef.handleCheckboxChange(this.tableData)\r\n          }\r\n          this.functionCodeList = res.data.functionCodeList\r\n          this.loadFunMonitor()\r\n          this.getModLists()\r\n          this.getFunLists()\r\n          this.mountTableData = res.data.functionInfoList// 详情得时候取functionInfoList\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    add() {\r\n      this.functionVisible = true\r\n    },\r\n    addOperation() {\r\n      this.operationVisible = true\r\n    },\r\n    functionClose() {\r\n      this.functionVisible = false\r\n    },\r\n    operationClose() {\r\n      this.operationVisible = false\r\n    },\r\n    functionSure() {\r\n      let selection = this.$refs.functionTableRef.getSelectionData()\r\n      if (selection.length === 0) {\r\n        this.$message.warning('请选择数据')\r\n        return\r\n      }\r\n      this.functionVisible = false\r\n      if (this.mountTableData.length > 0) {\r\n        selection.forEach(item => {\r\n          let bool = true\r\n          this.mountTableData.forEach(it => {\r\n            if (item.functionCode === it.functionCode) {\r\n              bool = false\r\n            }\r\n          })\r\n          if (bool) {\r\n            this.mountTableData.push(item)\r\n          }\r\n        })\r\n      } else {\r\n        this.mountTableData = selection\r\n      }\r\n    },\r\n    operationSure() {\r\n      let selection = this.$refs.tableRef.getSelectionData()\r\n      if (selection.length === 0) {\r\n        this.$message.warning('请选择数据')\r\n        return\r\n      }\r\n      if (selection.length > 1) {\r\n        this.$message.warning('只能选择一条数据')\r\n        return\r\n      }\r\n      this.operationClose()\r\n      this.tableData = selection\r\n      this.ruleAccord = selection[0].ruleAccord\r\n    },\r\n    deleteData() {\r\n      let selection = this.$refs.mountTableRef.getSelectionData()\r\n      if (selection.length === 0) {\r\n        this.$message.warning('请选择数据')\r\n        return\r\n      }\r\n      this.$confirm('是否删除选中数据？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        selection.forEach(item => {\r\n          this.mountTableData.forEach((it, index) => {\r\n            if (item.functionCode === it.functionCode) {\r\n              this.$refs.mountTableRef.$refs.xGrid.removeCheckboxRow(item)\r\n              this.mountTableData.splice(index, 1)\r\n            }\r\n          })\r\n        })\r\n        console.log(this.$refs.mountTableRef)\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消'\r\n        })\r\n      })\r\n    },\r\n    deleteOperation() {\r\n      let selection = this.$refs.operationTableRef.getSelectionData()\r\n      if (selection.length === 0) {\r\n        this.$message.warning('请选择数据')\r\n        return\r\n      }\r\n      this.$confirm('是否确定删除选中数据 ?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.tableData = []\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消'\r\n        })\r\n      })\r\n    },\r\n    // 保存\r\n    doInsert() {\r\n      let selection = this.$refs.operationTableRef.getSelectionData()\r\n      // if (this.title === '修改') {\r\n      //   selection = this.operationTableData\r\n      // }\r\n      if (selection.length > 1) {\r\n        this.$message.warning('请选择一条监控事项')\r\n        return\r\n      }\r\n      if (this.ruleTemplateName === '') {\r\n        this.$message.warning('请输入规则模板名称')\r\n        return\r\n      }\r\n      if (this.fiRuleTypeCode === undefined) {\r\n        this.$message.warning('请选择规则类型')\r\n        return\r\n      }\r\n      // if (this.businessSystemCode === undefined) {\r\n      //   this.$message.warning('请选择业务系统')\r\n      //   return\r\n      // }\r\n      // if (this.businessSystemName === null) {\r\n      //   this.$message.warning('请选择业务系统')\r\n      //   return\r\n      // }\r\n      // if (this.businessModuleCode === undefined) {\r\n      //   this.$message.warning('请选择业务模块')\r\n      //   return\r\n      // }\r\n      // if (this.businessModuleName === null) {\r\n      //   this.$message.warning('请选择业务模块')\r\n      //   return\r\n      // }\r\n      // if (this.businessFunctionCode === undefined) {\r\n      //   this.$message.warning('请选择业务功能')\r\n      //   return\r\n      // }\r\n      // if (this.businessFunctionName === null) {\r\n      //   this.$message.warning('请选择业务功能')\r\n      //   return\r\n      // }\r\n      if (this.ruleRemark === '') {\r\n        this.$message.warning('请输入规则说明')\r\n        return\r\n      }\r\n      if (this.ruleAccord === '') {\r\n        this.$message.warning('请输入规则依据')\r\n        return\r\n      }\r\n      let funSelection = this.$refs.mountTableRef.getSelectionData()\r\n      if (this.title === '修改') {\r\n        funSelection = this.mountTableData\r\n      }\r\n      if (funSelection.length < 1) {\r\n        this.$message.warning('请选择挂接函数')\r\n        return\r\n      }\r\n      if (this.ruleTemplateName.length > 20) {\r\n        this.$message.warning('规则模板名称长度应小于等于20位')\r\n        return\r\n      }\r\n      if (this.ruleRemark.length > 100) {\r\n        this.$message.warning('规则说明长度应小于等于100位')\r\n        return\r\n      }\r\n      let functionCodes = []\r\n      let businessSystemNames = []\r\n      let businessModuleNames = []\r\n      let businessSystemCodes = []\r\n      let businessModuleCodes = []\r\n      funSelection.forEach(item => {\r\n        functionCodes.push(item.functionCode)\r\n        businessSystemNames.push(item.businessSystemName)\r\n        businessModuleNames.push(item.businessModuleName)\r\n        businessSystemCodes.push(item.businessSystemCode)\r\n        businessModuleCodes.push(item.businessModuleCode)\r\n      })\r\n      let replaceStr = ''\r\n      if (this.fiRuleTypeName.indexOf('中央-') !== -1) {\r\n        replaceStr = '中央-'\r\n      } else if (this.fiRuleTypeName.indexOf('地方-') !== -1) {\r\n        replaceStr = '地方-'\r\n      }\r\n      if (this.title === '新增' || this.title === '复制') {\r\n        let params = {}\r\n        if (selection.length === 0) {\r\n          params = {\r\n            'ruleTemplateName': this.ruleTemplateName,\r\n            'ruleRemark': this.ruleRemark,\r\n            'ruleAccord': this.ruleAccord,\r\n            'functionCodeList': functionCodes,\r\n            'businessSystemName': businessSystemNames[0],\r\n            'businessModuleName': businessModuleNames[0],\r\n            'businessSystemCode': businessSystemCodes[0],\r\n            'businessModuleCode': businessModuleCodes[0],\r\n            'fiRuleTypeCode': this.fiRuleTypeCode,\r\n            'fiRuleTypeName': this.fiRuleTypeName.replace(replaceStr, '')\r\n          }\r\n        } else {\r\n          params = {\r\n            'declareCode': selection[0].declareCode,\r\n            'ruleTemplateName': this.ruleTemplateName,\r\n            'ruleRemark': this.ruleRemark,\r\n            'ruleAccord': this.ruleAccord,\r\n            'functionCodeList': functionCodes,\r\n            'businessSystemName': businessSystemNames[0],\r\n            'businessModuleName': businessModuleNames[0],\r\n            'businessSystemCode': businessSystemCodes[0],\r\n            'businessModuleCode': businessModuleCodes[0],\r\n            menuName: this.$store.state.curNavModule.name,\r\n            'fiRuleTypeCode': this.fiRuleTypeCode,\r\n            'fiRuleTypeName': this.fiRuleTypeName.replace(replaceStr, '')\r\n          }\r\n        }\r\n        HttpModule.addTemplate(params).then(res => {\r\n          if (res.code === '000000') {\r\n            this.$message.success('新增成功')\r\n            this.$parent.dialogVisible = false\r\n            this.$parent.queryTableDatas()\r\n          } else {\r\n            this.$message.error(res.message)\r\n          }\r\n        })\r\n      } else {\r\n        let params = {}\r\n        if (selection.length === 0) {\r\n          params = {\r\n            ruleTemplateCode: this.ruleTemplateCode,\r\n            'ruleTemplateName': this.ruleTemplateName,\r\n            'ruleRemark': this.ruleRemark,\r\n            'ruleAccord': this.ruleAccord,\r\n            'functionCodeList': functionCodes,\r\n            'fiRuleTypeCode': this.fiRuleTypeCode,\r\n            'fiRuleTypeName': this.fiRuleTypeName.replace(replaceStr, '')\r\n\r\n          }\r\n        } else {\r\n          params = {\r\n            ruleTemplateCode: this.ruleTemplateCode,\r\n            'declareCode': selection[0].declareCode,\r\n            'ruleTemplateName': this.ruleTemplateName,\r\n            'ruleRemark': this.ruleRemark,\r\n            'ruleAccord': this.ruleAccord,\r\n            'functionCodeList': functionCodes,\r\n            'fiRuleTypeCode': this.fiRuleTypeCode,\r\n            'fiRuleTypeName': this.fiRuleTypeName.replace(replaceStr, '')\r\n          }\r\n        }\r\n        HttpModule.changeTemplate(params).then(res => {\r\n          if (res.code === '000000') {\r\n            this.$message.success('修改成功')\r\n            this.$parent.dialogVisible = false\r\n            this.$parent.queryTableDatas()\r\n          } else {\r\n            this.$message.error(res.message)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    setFiRuleType(val) {\r\n      let valArr = val.split('##')\r\n      this.fiRuleTypeName = valArr[2]\r\n      this.fiRuleTypeCode = Number(valArr[0])\r\n    }\r\n  },\r\n  created() {\r\n    this.showInfo()\r\n    if (this.title === '新增') {\r\n      // this.checkboxConfig.checkAll = false\r\n      this.buttonName = '添加'\r\n      this.loadFunMonitor()\r\n    }\r\n    if (this.title === '查看详情') {\r\n      this.tabbtn = ['监控事项信息', '规则模板信息', '挂接函数信息']\r\n      this.isShowButton = false\r\n      this.disabled = true\r\n    }\r\n    this.loadMonitor()\r\n    this.getSysLists()\r\n    // this.getModLists()\r\n    // this.getFunLists()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n  .payVoucherInput {\r\n    margin: 15px;\r\n    .el-card {\r\n      margin-top: 0\r\n    }\r\n  }\r\n  .setbtn{\r\n    width:100px;\r\n    height:45px;\r\n    float:left;\r\n    margin-right:20px;\r\n  }\r\n  .tabone{\r\n    width:100px;\r\n    height:40px;\r\n    text-align:center;\r\n    line-height:40px;\r\n    float:left;\r\n    border:1px solid #ccc;\r\n    border-radius:4px;\r\n  }\r\n  .tabone1{\r\n    width:100px;\r\n    height:40px;\r\n    text-align:center;\r\n    line-height:40px;\r\n    float:left;\r\n    border:1px solid #ccc;\r\n    background-color:#f2f2f2;\r\n    border-radius:4px;\r\n  }\r\n  .vxe-modal--wrapper .vxe-modal--box {\r\n    z-index: 0;\r\n  }\r\n  #bigbox {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: white;\r\n    z-index: 10;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    opacity: .3;\r\n  }\r\n  .el-row-item .font-set-small .hline{\r\n    width:72px;\r\n  }\r\n</style>\r\n"]}]}