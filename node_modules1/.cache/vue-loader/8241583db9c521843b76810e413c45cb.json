{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\statisticAnalysis\\common\\components\\HandlingOfViolationsModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\statisticAnalysis\\common\\components\\HandlingOfViolationsModal.vue","mtime":1694505522826},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIHJlZiwgaW5qZWN0IH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknDQppbXBvcnQgdXNlVGFibGUgZnJvbSAnQC9ob29rcy91c2VUYWJsZScNCmltcG9ydCB7IHVzZU1vZGFsLCB1c2VNb2RhbElubmVyIH0gZnJvbSAnQC9ob29rcy91c2VNb2RhbC9pbmRleCcNCmltcG9ydCBIYW5kbGluZ09mVmlvbGF0aW9uc0RldGFpbE1vZGFsIGZyb20gJy4vSGFuZGxpbmdPZlZpb2xhdGlvbnNEZXRhaWxNb2RhbCcNCmltcG9ydCB7IHF1ZXJ5QXVkaXRUYWJsZSB9IGZyb20gJ0AvYXBpL2ZyYW1lL21haW4vc3RhdGlzdGljQW5hbHlzaXMvcnVsZXNTdGF0aXN0aWMuanMnDQppbXBvcnQgeyBjZWxsQ3Vyc29yVW5kZXJsaW5lQ2xhc3NOYW1lIH0gZnJvbSAnLi4vbW9kZWwvZGF0YScNCmltcG9ydCB7IHRyYW5zSnNvbjEsIHRyYW5zSnNvbjMgfSBmcm9tICdAL3V0aWxzL3BhcmFtcy5qcycNCmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJw0KaW1wb3J0IHsNCiAgZ2V0UnVsZU5hbWVDb2x1bW4sDQogIGdldENvbnRyb2xUeXBlQ29sdW1uLA0KICBnZXRTdGF0dXNDb2RlQ29sdW1uLA0KICBnZXRXYXJuaW5nQ29kZUNvbHVtbiwNCiAgZ2V0Q3JlYXRlVGltZUNvbHVtbiwNCiAgZ2V0QWdlbmN5TmFtZUNvbHVtbiwNCiAgZ2V0RGVwdE5hbWVDb2x1bW4sDQogIGdldE1hbmFnZU1vZkRlcE5hbWVDb2x1bW4sDQogIGdldEJ1c2luZXNzTm9Db2x1bW4sDQogIGdldEF1ZGl0RGVzY3JpcHRpb25Db2x1bW4sDQogIGdldElzRGlyQ29sdW1uLA0KICBnZXRBbW91bnRDb2x1bW4NCn0gZnJvbSAnQC92aWV3cy9tYWluL2hhbmRsaW5nT2ZWaW9sYXRpb25zL21vZGVsL2RhdGEuanMnDQoNCmNvbnN0IG1vZGVsID0gew0KICBwcm9wOiAndmFsdWUnLA0KICBldmVudDogJ2NoYW5nZUhPVklubmVyVmlzaWJsZScNCn0NCmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7DQogIGNvbXBvbmVudHM6IHsNCiAgICBIYW5kbGluZ09mVmlvbGF0aW9uc0RldGFpbE1vZGFsDQogIH0sDQogIHByb3BzOiB7DQogICAgLy8g5pi+6ZqQDQogICAgW21vZGVsLnByb3BdOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UNCiAgICB9LA0KICAgIC8vIOWLvumAieihjA0KICAgIGN1cnJlbnRSb3c6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQ6ICgpID0+ICh7fSkNCiAgICB9DQogIH0sDQogIG1vZGVsLA0KICBzZXR1cChwcm9wcywgeyBlbWl0IH0pIHsNCiAgICAvKioNCiAgICAgKiDlvLnnqpflhoXpg6jnirbmgIENCiAgICAgKiAqLw0KICAgIGNvbnN0IHsgdmlzaWJsZSB9ID0gdXNlTW9kYWxJbm5lcihwcm9wcywgZW1pdCwgbW9kZWwpDQoNCiAgICAvLyDlpITnkIbljZXlvLnnqpcNCiAgICBjb25zdCBbaE9WRGV0YWlsTW9kZWwsIGNoYW5nZUhPVkRldGFpbE1vZGVsVmlzaWJsZV0gPSB1c2VNb2RhbCgpDQoNCiAgICAvLyDor6bmg4Xlj4zlh7vooYwNCiAgICAvKmVzbGludC1kaXNhYmxlKi8NCiAgICBjb25zdCBkZXRhaWxDdXJyZW50Um93ID0gcmVmKG51bGwpDQogICAgLy8g5qC557uE5Lu25pa55rOVIGxvYWRCc0NvbmZpZyjliqjmgIHooajmoLzphY3nva7or7fmsYLmlrnms5UpDQogICAgY29uc3QgbG9hZEJzQ29uZmlnID0gaW5qZWN0KCdsb2FkQnNDb25maWcnKQ0KICAgIC8qKg0KICAgICAqIOWKqOaAgeihqOagvOmFjee9rg0KICAgICAqICovDQogICAgbGV0IGNvbHVtbnNTUyA9IHJlZihbXSkNCiAgICBhc3luYyBmdW5jdGlvbiBsb2FkQ29uZmlnKGlkKSB7DQogICAgICBsZXQgcGFyYW1zID0gew0KICAgICAgICB0YWJsZUlkOiB7DQogICAgICAgICAgaWQ6IGlkLA0KICAgICAgICAgIGZpc2NhbHllYXI6IHN0b3JlLnN0YXRlLnVzZXJJbmZvLnllYXIsDQogICAgICAgICAgbW9mX2Rpdl9jb2RlOiBzdG9yZS5zdGF0ZS51c2VySW5mby5wcm92aW5jZSwNCiAgICAgICAgICBtZW51Z3VpZDogc3RvcmUuc3RhdGUuY3VyTmF2TW9kdWxlLmd1aWQNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgbGV0IGNvbmZpZ0RhdGEgPSBhd2FpdCBsb2FkQnNDb25maWcocGFyYW1zKQ0KICAgICAgcmV0dXJuIGNvbmZpZ0RhdGEuaXRlbXNDb25maWcNCiAgICB9DQogICAgLyoqDQogICAgICrliKTmlq3kvb/nlKjmnKzlnLDphY3nva58fOWKqOaAgemFjee9rg0KICAgICAqICovDQogICAgaWYgKHRyYW5zSnNvbjMoc3RvcmUuc3RhdGUuY3VyTmF2TW9kdWxlLnBhcmFtNSkgJiYgdHJhbnNKc29uMyhzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUucGFyYW01KS5pc0NvbmZpZ1RhYmxlID09PSAnMScpIHsNCiAgICAgIGxvYWRDb25maWcoJ1RhYmxlMzAxJykudGhlbihyZXMgPT4gew0KICAgICAgICBjb2x1bW5zU1MudmFsdWUgPSByZXMNCiAgICAgIH0pDQogICAgfSBlbHNlIHsNCiAgICAgIGNvbHVtbnNTUy52YWx1ZSA9ICBbDQogICAgICAgIGdldFJ1bGVOYW1lQ29sdW1uKCksDQogICAgICAgIGdldENvbnRyb2xUeXBlQ29sdW1uKCksDQogICAgICAgIGdldFN0YXR1c0NvZGVDb2x1bW4oKSwNCiAgICAgICAgZ2V0V2FybmluZ0NvZGVDb2x1bW4oKSwNCiAgICAgICAgZ2V0Q3JlYXRlVGltZUNvbHVtbigpLA0KICAgICAgICBnZXRBZ2VuY3lOYW1lQ29sdW1uKCksDQogICAgICAgIGdldERlcHROYW1lQ29sdW1uKCksDQogICAgICAgIGdldE1hbmFnZU1vZkRlcE5hbWVDb2x1bW4oKSwNCiAgICAgICAgZ2V0QnVzaW5lc3NOb0NvbHVtbigpLA0KICAgICAgICBnZXRBbW91bnRDb2x1bW4oKSwNCiAgICAgICAgZ2V0QXVkaXREZXNjcmlwdGlvbkNvbHVtbigpLA0KICAgICAgICBnZXRJc0RpckNvbHVtbigpDQogICAgICBdDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6KGo5qC8DQogICAgICogKi8NCiAgICBjb25zdCBbDQogICAgICB7DQogICAgICAgIGNvbHVtbnMsDQogICAgICAgIHRhYmxlVG9vbGJhckNvbmZpZywNCiAgICAgICAgdGFibGVDb25maWcsDQogICAgICAgIHRhYmxlRGF0YSwNCiAgICAgICAgcmVzZXRGZXRjaFRhYmxlRGF0YSwNCiAgICAgICAgdGFibGVMb2FkaW5nU3RhdGUsDQogICAgICAgIHBhZ2VyQ2hhbmdlLA0KICAgICAgICBwYWdlckNvbmZpZywNCiAgICAgICAgb25Ub29sYmFyQnRuQ2xpY2sNCiAgICAgIH0sDQogICAgICByZWdpc3RlclRhYmxlDQogICAgXSA9IHVzZVRhYmxlKHsNCiAgICAgIGZldGNoOiBxdWVyeUF1ZGl0VGFibGUsDQogICAgICBiZWZvcmVGZXRjaDogcGFyYW1zID0+IHsNCiAgICAgICAgY29uc3QgeyBmaVJ1bGVDb2RlLCBhZ2VuY3lDb2RlLCB0eXBlIH0gPSBwcm9wcy5jdXJyZW50Um93DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgLi4ucGFyYW1zLA0KICAgICAgICAgIGZpUnVsZUNvZGUsDQogICAgICAgICAgYWdlbmN5Q29kZSwNCiAgICAgICAgICBmaVJ1bGVOYW1lOiBwcm9wcy5jdXJyZW50Um93LnJ1bGVOYW1lLA0KICAgICAgICAgIG1vZkRpdkNvZGU6cHJvcHMuY3VycmVudFJvdy5tb2ZEaXZDb2RlLA0KICAgICAgICAgIHBhcmFtQ29kZTogdHJhbnNKc29uMShzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUucGFyYW01IHx8ICcnKT8ucGFyYW1Db2RlLA0KICAgICAgICAgIGlzRmlsdGVyQnlQZXJtOiB0cmFuc0pzb24xKHN0b3JlLnN0YXRlLmN1ck5hdk1vZHVsZS5wYXJhbTUgfHwgJycpPy5pc0ZpbHRlckJ5UGVybSwNCiAgICAgICAgICB0eXBlDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBjb2x1bW5zOiBjb2x1bW5zU1MsDQogICAgICBkYXRhS2V5OiAnZGF0YS5yZXN1bHRzJw0KICAgIH0pDQoNCiAgICAvKioNCiAgICAgKiDlj4zlh7vljZXlhYPmoLwNCiAgICAgKiAqLw0KICAgIGZ1bmN0aW9uIGNlbGxEYmxjbGljayh7IHJvdyB9KSB7DQogICAgICBkZXRhaWxDdXJyZW50Um93LnZhbHVlID0gcm93DQogICAgICBjaGFuZ2VIT1ZEZXRhaWxNb2RlbFZpc2libGUodHJ1ZSkNCiAgICB9DQoNCiAgICByZXR1cm4gew0KICAgICAgdmlzaWJsZSwNCiAgICAgIGhPVkRldGFpbE1vZGVsLA0KDQogICAgICBjZWxsRGJsY2xpY2ssDQogICAgICBkZXRhaWxDdXJyZW50Um93LA0KICAgICAgY29sdW1ucywNCiAgICAgIHJlZ2lzdGVyVGFibGUsDQogICAgICB0YWJsZUNvbmZpZywNCiAgICAgIHRhYmxlRGF0YSwNCiAgICAgIHRhYmxlTG9hZGluZ1N0YXRlLA0KICAgICAgcGFnZXJDb25maWcsDQogICAgICB0YWJsZVRvb2xiYXJDb25maWcsDQogICAgICBvblRvb2xiYXJCdG5DbGljaywNCiAgICAgIHBhZ2VyQ2hhbmdlLA0KICAgICAgcmVzZXRGZXRjaFRhYmxlRGF0YSwNCg0KICAgICAgY2VsbEN1cnNvclVuZGVybGluZUNsYXNzTmFtZQ0KICAgIH0NCiAgfQ0KfSkNCg=="},{"version":3,"sources":["HandlingOfViolationsModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"HandlingOfViolationsModal.vue","sourceRoot":"src/views/main/statisticAnalysis/common/components","sourcesContent":["<template>\r\n  <vxe-modal\r\n    v-model=\"visible\"\r\n    :destroy-on-close=\"true\"\r\n    title=\"查看详情\"\r\n    width=\"85%\"\r\n    height=\"85%\"\r\n    resize\r\n    show-footer\r\n  >\r\n    <template #footer>\r\n      <vxe-button size=\"small\" @click=\"visible = false\">返回</vxe-button>\r\n      <vxe-button size=\"small\" @click=\"$emit('closeAll')\">关闭</vxe-button>\r\n    </template>\r\n    <div style=\"height: calc(100% - 4px)\">\r\n      <div style=\"height: 100%\">\r\n        <BsTable\r\n          :loading=\"tableLoadingState\"\r\n          :table-config=\"tableConfig\"\r\n          :table-columns-config=\"columns\"\r\n          :table-data=\"tableData\"\r\n          :toolbar-config=\"tableToolbarConfig\"\r\n          :pager-config=\"pagerConfig\"\r\n          size=\"medium\"\r\n          :cell-class-name=\"obj => cellCursorUnderlineClassName(obj, ['warningCode'])\"\r\n          @register=\"registerTable\"\r\n          @ajaxData=\"pagerChange\"\r\n          @onToolbarBtnClick=\"onToolbarBtnClick\"\r\n          @cellDblclick=\"cellDblclick\"\r\n        >\r\n          <template v-slot:toolbarSlots>\r\n            <bs-table-title title=\"监控处理单\" />\r\n          </template>\r\n        </BsTable>\r\n      </div>\r\n    </div>\r\n    <HandlingOfViolationsDetailModal\r\n      v-if=\"hOVDetailModel\"\r\n      v-model=\"hOVDetailModel\"\r\n      :checked-records=\"[detailCurrentRow]\"\r\n      v-on=\"$listeners\"\r\n    />\r\n  </vxe-modal>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref, inject } from '@vue/composition-api'\r\nimport useTable from '@/hooks/useTable'\r\nimport { useModal, useModalInner } from '@/hooks/useModal/index'\r\nimport HandlingOfViolationsDetailModal from './HandlingOfViolationsDetailModal'\r\nimport { queryAuditTable } from '@/api/frame/main/statisticAnalysis/rulesStatistic.js'\r\nimport { cellCursorUnderlineClassName } from '../model/data'\r\nimport { transJson1, transJson3 } from '@/utils/params.js'\r\nimport store from '@/store'\r\nimport {\r\n  getRuleNameColumn,\r\n  getControlTypeColumn,\r\n  getStatusCodeColumn,\r\n  getWarningCodeColumn,\r\n  getCreateTimeColumn,\r\n  getAgencyNameColumn,\r\n  getDeptNameColumn,\r\n  getManageMofDepNameColumn,\r\n  getBusinessNoColumn,\r\n  getAuditDescriptionColumn,\r\n  getIsDirColumn,\r\n  getAmountColumn\r\n} from '@/views/main/handlingOfViolations/model/data.js'\r\n\r\nconst model = {\r\n  prop: 'value',\r\n  event: 'changeHOVInnerVisible'\r\n}\r\nexport default defineComponent({\r\n  components: {\r\n    HandlingOfViolationsDetailModal\r\n  },\r\n  props: {\r\n    // 显隐\r\n    [model.prop]: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 勾选行\r\n    currentRow: {\r\n      type: Object,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  model,\r\n  setup(props, { emit }) {\r\n    /**\r\n     * 弹窗内部状态\r\n     * */\r\n    const { visible } = useModalInner(props, emit, model)\r\n\r\n    // 处理单弹窗\r\n    const [hOVDetailModel, changeHOVDetailModelVisible] = useModal()\r\n\r\n    // 详情双击行\r\n    /*eslint-disable*/\r\n    const detailCurrentRow = ref(null)\r\n    // 根组件方法 loadBsConfig(动态表格配置请求方法)\r\n    const loadBsConfig = inject('loadBsConfig')\r\n    /**\r\n     * 动态表格配置\r\n     * */\r\n    let columnsSS = ref([])\r\n    async function loadConfig(id) {\r\n      let params = {\r\n        tableId: {\r\n          id: id,\r\n          fiscalyear: store.state.userInfo.year,\r\n          mof_div_code: store.state.userInfo.province,\r\n          menuguid: store.state.curNavModule.guid\r\n        }\r\n      }\r\n      let configData = await loadBsConfig(params)\r\n      return configData.itemsConfig\r\n    }\r\n    /**\r\n     *判断使用本地配置||动态配置\r\n     * */\r\n    if (transJson3(store.state.curNavModule.param5) && transJson3(store.state.curNavModule.param5).isConfigTable === '1') {\r\n      loadConfig('Table301').then(res => {\r\n        columnsSS.value = res\r\n      })\r\n    } else {\r\n      columnsSS.value =  [\r\n        getRuleNameColumn(),\r\n        getControlTypeColumn(),\r\n        getStatusCodeColumn(),\r\n        getWarningCodeColumn(),\r\n        getCreateTimeColumn(),\r\n        getAgencyNameColumn(),\r\n        getDeptNameColumn(),\r\n        getManageMofDepNameColumn(),\r\n        getBusinessNoColumn(),\r\n        getAmountColumn(),\r\n        getAuditDescriptionColumn(),\r\n        getIsDirColumn()\r\n      ]\r\n    }\r\n\r\n    /**\r\n     * 表格\r\n     * */\r\n    const [\r\n      {\r\n        columns,\r\n        tableToolbarConfig,\r\n        tableConfig,\r\n        tableData,\r\n        resetFetchTableData,\r\n        tableLoadingState,\r\n        pagerChange,\r\n        pagerConfig,\r\n        onToolbarBtnClick\r\n      },\r\n      registerTable\r\n    ] = useTable({\r\n      fetch: queryAuditTable,\r\n      beforeFetch: params => {\r\n        const { fiRuleCode, agencyCode, type } = props.currentRow\r\n        return {\r\n          ...params,\r\n          fiRuleCode,\r\n          agencyCode,\r\n          fiRuleName: props.currentRow.ruleName,\r\n          mofDivCode:props.currentRow.mofDivCode,\r\n          paramCode: transJson1(store.state.curNavModule.param5 || '')?.paramCode,\r\n          isFilterByPerm: transJson1(store.state.curNavModule.param5 || '')?.isFilterByPerm,\r\n          type\r\n        }\r\n      },\r\n      columns: columnsSS,\r\n      dataKey: 'data.results'\r\n    })\r\n\r\n    /**\r\n     * 双击单元格\r\n     * */\r\n    function cellDblclick({ row }) {\r\n      detailCurrentRow.value = row\r\n      changeHOVDetailModelVisible(true)\r\n    }\r\n\r\n    return {\r\n      visible,\r\n      hOVDetailModel,\r\n\r\n      cellDblclick,\r\n      detailCurrentRow,\r\n      columns,\r\n      registerTable,\r\n      tableConfig,\r\n      tableData,\r\n      tableLoadingState,\r\n      pagerConfig,\r\n      tableToolbarConfig,\r\n      onToolbarBtnClick,\r\n      pagerChange,\r\n      resetFetchTableData,\r\n\r\n      cellCursorUnderlineClassName\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n"]}]}