{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\Index.vue","mtime":1694576524301},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgTWVudU1vZHVsZSBmcm9tICdAL2FwaS9mcmFtZS9jb21tb24vbWVudS5qcycNCmltcG9ydCBHbG9iYWxTZXR0aW5nIGZyb20gJ0Avdmlld3MvbWFpbi9HbG9iYWxTZXR0aW5nJw0KaW1wb3J0IHsgZ2VuZXJhdGVEZWZhdWx0V2F0ZXJQcmludCB9IGZyb20gJ0AvaGIvd2F0ZXJNYXJrLmpzJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnTWFpbicsDQogIGNvbXBvbmVudHM6IHsNCiAgICBHbG9iYWxTZXR0aW5nDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxlZnROYXZXaWR0aDogMCwNCiAgICAgIHRhYkNsYXNzOiAnbW9kZWwyJywNCiAgICAgIGlzSW5pdGVkOiBmYWxzZSwNCiAgICAgIGlzU2hvd0hlYWRlcjogdHJ1ZSwNCiAgICAgIGhvbWVTaG93VHlwZTogJ0hvbWUtY2FyZCcsDQogICAgICBpZnJhbWVTcmM6ICcnLA0KICAgICAgaXNDb2xsZWN0OiBmYWxzZSwNCiAgICAgIGRkZG93bjogdHJ1ZSwNCiAgICAgIGlmcm91dGVyYWN0aXZlOiB0cnVlLA0KICAgICAgaW5jbHVkZWRDb21wb25lbnRzOiBbXSwNCiAgICAgIGV4Y2x1ZGVkQ29tcG9uZW50czogW10sDQogICAgICB0YWJMaXN0OiBbDQogICAgICAgIHsNCiAgICAgICAgICBjb2RlOiAnSG9tZScsDQogICAgICAgICAgbmFtZTogJ+mmlumhtScsDQogICAgICAgICAgdXJsOiAnSG9tZScsDQogICAgICAgICAgZ3VpZDogJ0hvbWVDYXJkJywNCiAgICAgICAgICBub0NsZWFyOiB0cnVlDQogICAgICAgIH0NCiAgICAgIF0sDQogICAgICB0YWJMaXN0Q3A6IFsNCiAgICAgICAgLy8gICB7DQogICAgICAgIC8vICAgY29kZTogJ0Zvcm1UZW1wbGF0ZScsDQogICAgICAgIC8vICAgbmFtZTogJ+aooeeJiCcsDQogICAgICAgIC8vICAgdXJsOiAnRm9ybVRlbXBsYXRlJw0KICAgICAgICAvLyB9DQogICAgICBdLA0KICAgICAgdmFsdWU6ICcnLA0KICAgICAgZGVmYXVsdEFjdGl2ZU1lbnU6IHsNCiAgICAgICAgY29kZTogJ0hvbWUnLA0KICAgICAgICBuYW1lOiAn6aaW6aG1JywNCiAgICAgICAgdXJsOiAnSG9tZScsDQogICAgICAgIGd1aWQ6ICdIb21lJywNCiAgICAgICAgbm9DbGVhcjogdHJ1ZQ0KICAgICAgfSwNCiAgICAgIHNob3dUeXBlOiAncm91dGVyJywNCiAgICAgIG1lbnVEYXRhOiBbXSwNCiAgICAgIGxpc3Q6IFtdDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KICAgIGtleSgpIHsNCiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5uYW1lICE9PSB1bmRlZmluZWQgPyB0aGlzLiRyb3V0ZS5uYW1lICsgK25ldyBEYXRlKCkgOiB0aGlzLiRyb3V0ZSArICtuZXcgRGF0ZSgpDQogICAgfSwNCiAgICBjdXJSb3V0ZVRhYk9iaigpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJOYXZSb3V0ZQ0KICAgIH0sDQogICAgbG9naW5BdXRoZW50aWNhdGlvbigpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5sb2dpbkF1dGhlbnRpY2F0aW9uDQogICAgfSwNCiAgICB1c2VySW5mbygpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbw0KICAgIH0sDQogICAgY3VyTWVudU9iaigpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJNZW51T2JqDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaXNJZnJhbWUoKSB7DQogICAgICByZXR1cm4gd2luZG93LnNlbGYgIT09IHdpbmRvdy50b3ANCiAgICB9LA0KICAgIGdldERhdGFUeXBlKG9iaikgew0KICAgICAgLy8g6I635Y+W5pWw5o2u57G75Z6LDQogICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikuc2xpY2UoOCwgLTEpDQogICAgfSwNCiAgICBkZWVwQ29weShvYmopIHsgLy8g5rex5ou36LSd6YCa55So5pa55rOVDQogICAgICB0cnkgew0KICAgICAgICBsZXQgbWUgPSB0aGlzDQogICAgICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHJldHVybiBvYmoNCiAgICAgICAgbGV0IG5ld09iaiA9IG9iaiBpbnN0YW5jZW9mIEFycmF5ID8gW10gOiB7fQ0KICAgICAgICBmb3IgKGxldCBrZXkgaW4gb2JqKSB7DQogICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7DQogICAgICAgICAgICBuZXdPYmpba2V5XSA9IHR5cGVvZiBvYmpba2V5XSA9PT0gJ29iamVjdCcgPyBtZS5kZWVwQ29weShvYmpba2V5XSkgOiBvYmpba2V5XQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gbmV3T2JqDQogICAgICB9IGNhdGNoIChlKSB7DQogICAgICB9DQogICAgfSwNCiAgICBnZXRJbmRleG9mKGFyciwgdmFsdWUsIGtleSkgew0KICAgICAgLy8g5oyJa2V55YC86I635Y+W57Si5byVDQogICAgICBsZXQgaW5kZXhPZiA9IC0xDQogICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIC0xDQogICAgICBsZXQgc29tZW9mID0gYXJyLnNvbWUoKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgIGluZGV4T2YgPSBpbmRleA0KICAgICAgICByZXR1cm4gaXRlbVtrZXldID09PSB2YWx1ZQ0KICAgICAgfSkNCiAgICAgIGlmIChzb21lb2YpIHsNCiAgICAgICAgcmV0dXJuIGluZGV4T2YNCiAgICAgIH0NCiAgICAgIHJldHVybiAtMQ0KICAgIH0sDQogICAgYXJydW5pcXVlKGFyciwga2V5KSB7DQogICAgICAvLyDmlbDnu4Tljrvph40NCiAgICAgIGxldCB0ZW1wID0gW10NCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGxldCBpbmRleG9mID0gdGhpcy5nZXRJbmRleG9mKHRlbXAsIGFycltpXSwgJ2tleScpDQogICAgICAgIGlmIChpbmRleG9mID09PSAtMSkgew0KICAgICAgICAgIHRlbXAucHVzaChhcnJbaV0pDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiB0ZW1wDQogICAgfSwNCiAgICBvbkZpeGVkTmF2Q2hhbmdlKGlzRml4ZWROYXYsIG5hdldpZHRoKSB7DQogICAgICBpZiAoaXNGaXhlZE5hdikgew0KICAgICAgICB0aGlzLmxlZnROYXZXaWR0aCA9IG5hdldpZHRoDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmxlZnROYXZXaWR0aCA9IDANCiAgICAgIH0NCiAgICB9LA0KICAgIHJlZ2lzdFRhYkNvbXMob2JqKSB7DQogICAgICAvLyDms6jlhozot6/nlLENCiAgICAgIGlmICh0aGlzLnZhbHVlICE9PSBvYmoudXJsKSB7DQogICAgICAgIGlmICh0aGlzLmdldERhdGFUeXBlKG9iaikgPT09ICdPYmplY3QnICYmIG9iai5jb2RlKSB7DQogICAgICAgICAgbGV0IGluZGV4T2YgPSB0aGlzLmdldEluZGV4b2YodGhpcy50YWJMaXN0Q3AsIG9iai51cmwsICd1cmwnKQ0KICAgICAgICAgIGlmIChpbmRleE9mID09PSAtMSkgew0KICAgICAgICAgICAgdGhpcy50YWJMaXN0Q3AucHVzaChvYmopDQogICAgICAgICAgICB0aGlzLnRhYkxpc3QgPSB0aGlzLmRlZXBDb3B5KHRoaXMudGFiTGlzdENwKQ0KICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG9iai51cmwNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy50YWJMaXN0ID0gdGhpcy5kZWVwQ29weSh0aGlzLnRhYkxpc3RDcCkNCiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBvYmoudXJsDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLm9uUmVmcmVzaENsaWNrKG9iai51cmwpDQogICAgICB9DQogICAgfSwNCiAgICByZWdpc3RJbmNsdWRlZENvbXBvbmVudHModmFsdWUpIHsNCiAgICAgIGxldCBzZWxmID0gdGhpcw0KICAgICAgaWYgKHRoaXMuaW5jbHVkZWRDb21wb25lbnRzLmluZGV4T2YodmFsdWUpID09PSAtMSkgew0KICAgICAgICB0aGlzLmluY2x1ZGVkQ29tcG9uZW50cyA9IHRoaXMudGFiTGlzdENwLm1hcCgoaXRlbSwgaW5kZXgpID0+IHsNCiAgICAgICAgICByZXR1cm4gaXRlbS51cmwNCiAgICAgICAgfSkuZmlsdGVyKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICAgIGlmIChpdGVtID09PSBzZWxmLiRyb3V0ZS5uYW1lKSB7DQogICAgICAgICAgICByZXR1cm4gc2VsZi4kcm91dGUubWV0YS5rZWVwQWxpdmUNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIGl0ZW0NCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmluY2x1ZGVkQ29tcG9uZW50cyA9IHRoaXMudGFiTGlzdENwLm1hcCgoaXRlbSwgaW5kZXgpID0+IHsNCiAgICAgICAgICByZXR1cm4gaXRlbS51cmwNCiAgICAgICAgfSkuZmlsdGVyKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICAgIGlmIChpdGVtID09PSBzZWxmLiRyb3V0ZS5uYW1lKSB7DQogICAgICAgICAgICByZXR1cm4gc2VsZi4kcm91dGUubWV0YS5rZWVwQWxpdmUNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIGl0ZW0NCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9DQogICAgICBpZiAoIXRoaXMuJHJvdXRlLm1ldGEua2VlcEFsaXZlKSB7DQogICAgICAgIHRoaXMuZXhjbHVkZWRDb21wb25lbnRzLnB1c2goc2VsZi4kcm91dGUubmFtZSkNCiAgICAgICAgdGhpcy5leGNsdWRlZENvbXBvbmVudHMgPSBbLi4ubmV3IFNldCh0aGlzLmV4Y2x1ZGVkQ29tcG9uZW50cyldDQogICAgICB9DQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmluY2x1ZGVkQ29tcG9uZW50cykNCiAgICB9LA0KICAgIHRhYlRhYnModmFsdWUpIHsNCiAgICAgIGlmICh2YWx1ZSAhPT0gJycpIHsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMuZ2V0RGF0YVR5cGUodGhpcy5jdXJSb3V0ZVRhYk9iaikgPT09ICdPYmplY3QnICYmDQogICAgICAgICAgdGhpcy5jdXJSb3V0ZVRhYk9iai51cmwgIT09IHZhbHVlDQogICAgICAgICkgew0KICAgICAgICAgIGxldCBpbmRleE9mID0gdGhpcy5nZXRJbmRleG9mKHRoaXMudGFiTGlzdENwLCB2YWx1ZSwgJ3VybCcpDQoNCiAgICAgICAgICBpZiAod2luZG93LnNlbGYgPT09IHdpbmRvdy50b3ApIHsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q3VyTmF2TW9kdWxlJywgdGhpcy50YWJMaXN0Q3BbaW5kZXhPZl0pDQogICAgICAgICAgfQ0KICAgICAgICAgIC8vIGlmIChpbmRleE9mID09PSAtMSkgew0KICAgICAgICAgIC8vICAgdGhpcy5vblJlZnJlc2hDbGljaygpDQogICAgICAgICAgLy8gfQ0KICAgICAgICB9DQogICAgICAgIGlmICh2YWx1ZSA9PT0gJ0hvbWUnKSB7DQogICAgICAgICAgdGhpcy5yb3V0ZXJUb0hvbWUodGhpcy5ob21lU2hvd1R5cGUpDQogICAgICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goDQogICAgICAgICAgLy8gICB7DQogICAgICAgICAgLy8gICAgIG5hbWU6IHZhbHVlLA0KICAgICAgICAgIC8vICAgICBwYXJhbXM6IHsNCiAgICAgICAgICAvLyAgICAgICBob21lU2hvd1R5cGU6IHRoaXMuaG9tZVNob3dUeXBlLA0KICAgICAgICAgIC8vICAgICAgIGN1ck5hdk1vZHVsZTogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDdXJOYXZNb2R1bGUNCiAgICAgICAgICAvLyAgICAgfQ0KICAgICAgICAgIC8vICAgfQ0KICAgICAgICAgIC8vICkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAvLyB0aGlzLmlzU2hvd0hlYWRlciA9IGZhbHNlDQogICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoJy5odG1sJykgPj0gMCB8fCB2YWx1ZS5pbmRleE9mKCdodHRwOicpID49IDAgfHwgdmFsdWUuaW5kZXhPZignaHR0cHMnKSA+PSAwKSB7DQogICAgICAgICAgICB0aGlzLmlmcmFtZVNyYyA9IHZhbHVlLmluZGV4T2YoJz8nKSA+PSAwID8gdmFsdWUgKyAnJmJvc3Nzb2Z0VG9rZW5pZD0nICsgdGhpcy4kc3RvcmUuc3RhdGUubG9naW5BdXRoZW50aWNhdGlvbi50b2tlbmlkIDogdmFsdWUgKyAnP2Jvc3Nzb2Z0VG9rZW5pZD0nICsgdGhpcy4kc3RvcmUuc3RhdGUubG9naW5BdXRoZW50aWNhdGlvbi50b2tlbmlkDQogICAgICAgICAgICB0aGlzLnNob3dUeXBlID0gJ2lmcmFtZScNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5zaG93VHlwZSA9ICdyb3V0ZXInDQogICAgICAgICAgICB0aGlzLmlmcmFtZVNyYyA9ICcnDQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgNCiAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHBhdGg6IHZhbHVlLA0KICAgICAgICAgICAgICAgIHBhcmFtczogew0KICAgICAgICAgICAgICAgICAgY3VyTmF2TW9kdWxlOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldEN1ck5hdk1vZHVsZQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgLy8gICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIC8vICAgfSkNCiAgICAgICAgLy8gfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIHJvdXRlclRvSG9tZShob21lU2hvd1R5cGUpIHsNCiAgICAgIGlmICh3aW5kb3cuc2VsZiAhPT0gd2luZG93LnRvcCkgcmV0dXJuDQogICAgICBpZiAoaG9tZVNob3dUeXBlID09PSAnSG9tZS1jYXJkJykgew0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgICAgbmFtZTogJ0hvbWVDYXJkJywNCiAgICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICAgIGhvbWVTaG93VHlwZTogaG9tZVNob3dUeXBlLA0KICAgICAgICAgICAgY3VyTmF2TW9kdWxlOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldEN1ck5hdk1vZHVsZQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIGlmIChob21lU2hvd1R5cGUgPT09ICdIb21lLWRlZmF1bHQnKSB7DQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgICBuYW1lOiAnSG9tZScsDQogICAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgICBob21lU2hvd1R5cGU6IGhvbWVTaG93VHlwZSwNCiAgICAgICAgICAgIGN1ck5hdk1vZHVsZTogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDdXJOYXZNb2R1bGUNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBvblJlZnJlc2hDbGljayhvYmopIHsNCiAgICAgIGxldCBzZWxmID0gdGhpcw0KICAgICAgc2VsZi4kcmVmcy5rZWVwQWxpdmUuZGVzdHJveSh0aGlzLiRyb3V0ZS5uYW1lKQ0KICAgICAgLy8gc2VsZi51cGRhdGVJZnJhbWVOb2RlKHRoaXMuJHJvdXRlLnVybCwgdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDdXJOYXZNb2R1bC5jb2RlLCAnZGVzdG9yeScpDQogICAgICBzZWxmLmlmcm91dGVyYWN0aXZlID0gZmFsc2UNCiAgICAgIHNlbGYuJG5leHRUaWNrKHZtID0+IHsNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgc2VsZi5pZnJvdXRlcmFjdGl2ZSA9IHRydWUNCiAgICAgICAgfSwgMTAwKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIG9uVGFiTGlzdENoYW5nZSh0YWJMaXN0KSB7DQogICAgICB0aGlzLmxpc3QgPSB0YWJMaXN0DQogICAgICB0aGlzLnRhYkxpc3RDcCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGFiTGlzdCkpDQogICAgICB0aGlzLnJlZ2lzdEluY2x1ZGVkQ29tcG9uZW50cygpDQogICAgfSwNCiAgICBjaGFuZ2VIb21lU2hvd1R5cGUoaG9tZVNob3dUeXBlKSB7DQogICAgICBpZiAodGhpcy52YWx1ZSA9PT0gJ0hvbWUnKSB7DQogICAgICAgIHRoaXMucm91dGVyVG9Ib21lKGhvbWVTaG93VHlwZSkNCiAgICAgIH0NCiAgICB9LA0KICAgIG9uTWVudVNlbGVjdENoYW5nZShvYmopIHsNCiAgICAgIGxldCBzZWxmID0gdGhpcw0KICAgICAgaWYgKG9iai5wYXJhbTUgJiYgb2JqLnBhcmFtNS5pbmRleE9mKCduZWVkY2hlY2s9dHJ1ZScpID49IDApIHsgLy8g6ZyA6KaB5qCh6aqM57yW5oql5piv5ZCm5bey5YWz6ZetDQogICAgICAgIGxldCBwYXJhbXMgPSB7DQogICAgICAgICAgbWVudWd1aWQ6IG9iai5ndWlkLA0KICAgICAgICAgIGFwcGd1aWQ6IG9iai5hcHBpZCwNCiAgICAgICAgICBhcHBpZDogb2JqLmFwcHN5c2lkLA0KICAgICAgICAgIHNwZWNyb2xlZ3VpZDogJycsDQogICAgICAgICAgcm9sZWd1aWQ6IG9iai5yb2xlZ3VpZCB9DQogICAgICAgIE1lbnVNb2R1bGUuZ2V0RmJQYWdlQ29uZmlnKHBhcmFtcykudGhlbihyZXMgPT4gew0KICAgICAgICAgIE9iamVjdC5hc3NpZ24ob2JqLCByZXMpDQogICAgICAgICAgaWYgKHJlcy5kYXRhLmlzYnVkZ2V0YmVnaW4gPT09IDAgJiYgcmVzLmRhdGEuZGF0YXR5cGUgIT09IDgpIHsNCiAgICAgICAgICAgIHNlbGYuJG1lc3NhZ2UoJ+mihOeul+e8luaKpeW3suWFs+mXrScpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q3VyTWVudU9iaicsIG9iaikNCiAgICAgICAgICAgIC8vIHRoaXMucmVnaXN0VGFiQ29tcyhvYmopDQogICAgICAgICAgfQ0KICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpDQogICAgICAgICAgc2VsZi4kZXJyb3IoJ2Vycm9yJykNCiAgICAgICAgfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHNlbGYuJHJlZnMua2VlcEFsaXZlLmRlc3Ryb3kob2JqLnVybCkNCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRDdXJNZW51T2JqJywgb2JqKQ0KICAgICAgICAvLyB0aGlzLnJlZ2lzdFRhYkNvbXMob2JqKQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8g54K55Ye75pS26JeP5oyJ6ZKu5LqL5Lu2DQogICAgb25Db2xsZWN0Q2xpY2soaXNDdXJOYXZDb2xsZWN0KSB7DQogICAgICB0aGlzLmlzQ29sbGVjdCA9ICFpc0N1ck5hdkNvbGxlY3QNCiAgICAgIGxldCBzZWxmID0gdGhpcw0KICAgICAgbGV0IHVzZXJJbmZvID0gc2VsZi4kc3RvcmUuc3RhdGUudXNlckluZm8NCiAgICAgIGxldCBtZW51SW5mbyA9IHNlbGYuJHN0b3JlLnN0YXRlLmN1ck5hdk1vZHVsZQ0KICAgICAgaWYgKCFpc0N1ck5hdkNvbGxlY3QpIHsNCiAgICAgICAgbGV0IHBhcmFtID0gew0KICAgICAgICAgIG1lbnVndWlkOiBbeyBtZW51Z3VpZDogbWVudUluZm8uZ3VpZCwgcm9sZWd1aWQ6IG1lbnVJbmZvLnJvbGVndWlkIH1dLA0KICAgICAgICAgIHVzZXJndWlkOiB1c2VySW5mby5ndWlkLA0KICAgICAgICAgIHllYXI6IHVzZXJJbmZvLnllYXIsDQogICAgICAgICAgcHJvdmluY2U6IHVzZXJJbmZvLnByb3ZpbmNlLA0KICAgICAgICAgIGFwcGd1aWQ6IHVzZXJJbmZvLmFwcC5ndWlkDQogICAgICAgIH0NCiAgICAgICAgTWVudU1vZHVsZS5zYXZlQ29sbGVjdGlvbk1lbnUocGFyYW0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICB2YXIgcmVzdWx0ID0gSlNPTi5wYXJzZShyZXMpDQogICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQucmVzdWx0KSB7DQogICAgICAgICAgICBzZWxmLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1zZywNCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBzZWxmLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1zZywNCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxldCBwYXJhbSA9IHsNCiAgICAgICAgICBtZW51Z3VpZDogW3sgbWVudWd1aWQ6IG1lbnVJbmZvLmd1aWQsIHJvbGVndWlkOiBtZW51SW5mby5yb2xlZ3VpZCB9XSwNCiAgICAgICAgICByb2xlZ3VpZDogbWVudUluZm8ucm9sZWd1aWQsDQogICAgICAgICAgdXNlcmd1aWQ6IHVzZXJJbmZvLmd1aWQsDQogICAgICAgICAgeWVhcjogdXNlckluZm8ueWVhciwNCiAgICAgICAgICBwcm92aW5jZTogdXNlckluZm8ucHJvdmluY2UsDQogICAgICAgICAgYXBwZ3VpZDogdXNlckluZm8uYXBwLmd1aWQNCiAgICAgICAgfQ0KICAgICAgICBNZW51TW9kdWxlLnJlbW92ZUNvbGxlY3Rpb25NZW51KHBhcmFtKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdmFyIHJlc3VsdCA9IEpTT04ucGFyc2UocmVzKQ0KICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnJlc3VsdCkgew0KICAgICAgICAgICAgc2VsZi4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tc2csDQogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgc2VsZi4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tc2csDQogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICB1cGRhdGVVcmwodXJsKSB7DQogICAgICBsZXQgdG9rZW5pZCA9IHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0TG9naW5BdXRoZW50aWNhdGlvbi50b2tlbmlkDQogICAgICBsZXQgcm9sZWd1aWQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUucm9sZWd1aWQNCiAgICAgIGxldCBtZW51SWQgPSB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUuZ3VpZA0KICAgICAgbGV0IHVzZXJJbmZvID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8NCiAgICAgIGlmICh1cmwuaW5kZXhPZignLmNwdCcpID09PSAtMSkgew0KICAgICAgICB1cmwgPSB1cmwgKyAnLmNwdCcNCiAgICAgIH0NCiAgICAgIHVybCA9IHdpbmRvdy5nbG9hYmxlVG9vbEZuLmdldFJlcG9ydFVybCgpICsgdXJsICsNCiAgICAgICAgJyZ4PTEnICsgJyZtZW51Z3VpZD0nICsgbWVudUlkICsNCiAgICAgICAgJyZyb2xlZ3VpZD0nICsgcm9sZWd1aWQgKyAnJnRva2VuaWQ9JyArIHRva2VuaWQgKyAnJnVzZXJndWlkPScgKyB1c2VySW5mby5ndWlkICsgJyZmaXNjYWxfeWVhcj0nICsgdXNlckluZm8ueWVhciArICcmbW9mX2Rpdl9jb2RlPScgKyB1c2VySW5mby5wcm92aW5jZQ0KICAgICAgcmV0dXJuIHVybA0KICAgIH0sDQoNCiAgICAvLyDmmK/lkKbmlLbol48NCiAgICBpc0NvbGxlY3Rpb24oKSB7DQogICAgICBsZXQgc2VsZiA9IHRoaXMNCiAgICAgIC8vIGxldCB1c2VySW5mbyA9IHNlbGYuJHN0b3JlLnN0YXRlLnVzZXJJbmZvDQogICAgICBsZXQgbWVudUluZm8gPSBzZWxmLiRzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUNCiAgICAgIGxldCBwYXJhbSA9IHsNCiAgICAgICAgbWVudWd1aWQ6IG1lbnVJbmZvLmd1aWQsDQogICAgICAgIHJvbGVndWlkOiBtZW51SW5mby5yb2xlZ3VpZCB8fCBzZWxmLnVzZXJJbmZvLmd1aWQsDQogICAgICAgIHVzZXJndWlkOiBzZWxmLnVzZXJJbmZvLmd1aWQsDQogICAgICAgIHllYXI6IHNlbGYudXNlckluZm8ueWVhciwNCiAgICAgICAgcHJvdmluY2U6IHNlbGYudXNlckluZm8ucHJvdmluY2UsDQogICAgICAgIGFwcGd1aWQ6IHNlbGYudXNlckluZm8uYXBwLmd1aWQNCiAgICAgIH0NCiAgICAgIE1lbnVNb2R1bGUuaXNDb2xsZWN0aW9uTWVudShwYXJhbSkudGhlbihyZXMgPT4gew0KICAgICAgICB2YXIgcmVzdWx0ID0gbnVsbA0KICAgICAgICB0cnkgew0KICAgICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UocmVzKQ0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAgIHJlc3VsdCA9IHJlcw0KICAgICAgICB9DQogICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LnJlc3VsdCkgew0KICAgICAgICAgIHRoaXMuaXNDb2xsZWN0ID0gdHJ1ZQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuaXNDb2xsZWN0ID0gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGdldE9iakJ5TmVzdGVkSW5kZXgoYXJyLCBuZXN0ZWRJZCkgew0KICAgICAgLy8g6I635Y+W6YCJ5Lit6I+c5Y2V55qE5pWw5o2u5rqQDQogICAgICBsZXQgbmVzdEFyciA9IG5lc3RlZElkLnNwbGl0KCdfJykNCiAgICAgIGxldCBvYmogPSB7fQ0KICAgICAgbmVzdEFyci5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICBpZiAoaW5kZXggPT09IDApIHsNCiAgICAgICAgICBvYmogPSBhcnJbcGFyc2VJbnQoaXRlbSldDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgb2JqID0gb2JqLmNoaWxkcmVuW3BhcnNlSW50KGl0ZW0pXQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgcmV0dXJuIG9iag0KICAgIH0sDQogICAgZ2V0TWVudXMoKSB7DQogICAgICAvLyDkuInnuqfoj5zljZXor7fmsYINCiAgICAgIGxldCBzZWxmID0gdGhpcw0KICAgICAgTWVudU1vZHVsZS5nZXRNZW51SW5mbygpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAvLyB0aGlzLm5hdk1lbnVEYXRhWzBdLmNoaWxkcmVuID0gcmVzDQogICAgICAgIC8vIHRoaXMubWVudURhdGEgPSB0aGlzLm5hdk1lbnVEYXRhDQogICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlcykpIHsNCiAgICAgICAgICBpZiAocmVzLmxlbmd0aCkgew0KICAgICAgICAgICAgc2VsZi5tZW51RGF0YSA9IHJlcw0KICAgICAgICAgICAgdGhpcy5hZGREeW5hbWljUm91dGluZ1JvdXRlKHRoaXMucmVjdXJzaXZlQ2hhbmdlVXJsKHJlcykpDQogICAgICAgICAgICB0aGlzLm9uTWVudVNlbGVjdENoYW5nZSh0aGlzLmRlZmF1bHRBY3RpdmVNZW51KQ0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRTeXN0ZW1NZW51JywgcmVzKSAvLyDlsIboj5zljZXlrZjlgqjliLBzdG9yZQ0KICAgICAgICAgICAgLy8g5qC55o2u6I+c5Y2V5L+h5oGv6I635Y+W5b6F5YqeDQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndG9kb0luZm8vZ2V0TWVudU1hcFRvZG9JbmZvJywgcmVzIHx8IFtdKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAvLyB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIC8vICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLA0KICAgICAgICAgICAgLy8gICBtZXNzYWdlOiAn5b2T5YmN55So5oi3Jw0KICAgICAgICAgICAgLy8gfSkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICByZWN1cnNpdmVDaGFuZ2VVcmwoZGF0YSwgcmV1c2VSb3V0cyA9IFtdKSB7DQogICAgICAvLyDpgJLlvZLojrflj5bliqjmgIHlpI3nlKjot6/nlLENCiAgICAgIC8vIHRoaXMuYWRkRHluYW1pY1JvdXRpbmdSb3V0ZSh0aGlzLnJlY3Vyc2l2ZUNoYW5nZVVybChyZXMpKQ0KICAgICAgbGV0IHNlbGYgPSB0aGlzDQogICAgICBkYXRhLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0uY2hpbGRyZW4pICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoKSB7DQogICAgICAgICAgc2VsZi5yZWN1cnNpdmVDaGFuZ2VVcmwoaXRlbS5jaGlsZHJlbiwgcmV1c2VSb3V0cykNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAoaXRlbS51cmwuaW5kZXhPZigncGF5MCcpICE9PSAtMSB8fCBpdGVtLnVybC5pbmRleE9mKCdwYXkxJykgIT09IC0xIHx8IGl0ZW0udXJsLmluZGV4T2YoJ3BheTInKSAhPT0gLTEgfHwgaXRlbS51cmwuaW5kZXhPZignLmNwdCcpICE9PSAtMSkgew0KICAgICAgICAgICAgaXRlbS51cmwgPSB0aGlzLnVwZGF0ZVVybChpdGVtLnVybCkNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKGl0ZW0udXJsICYmIGl0ZW0udXJsLmluZGV4T2YoJ1JldXNlUm91dGUnKSA+PSAwKSB7DQogICAgICAgICAgICBpdGVtLnV1Y29kZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDAwMCkNCiAgICAgICAgICAgIHJldXNlUm91dHMucHVzaChPYmplY3QuYXNzaWduKHt9LCBpdGVtKSkNCiAgICAgICAgICAgIGl0ZW0udXJsID0gaXRlbS51dWNvZGUgKyBpdGVtLnVybA0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHJldHVybiByZXVzZVJvdXRzDQogICAgfSwNCiAgICBhZGREeW5hbWljUm91dGluZ1JvdXRlKHJldXNlUm91dHMpIHsNCiAgICAgIGxldCByb3V0ZSA9IHRoaXMuJHJvdXRlci5vcHRpb25zLnJvdXRlcw0KICAgICAgbGV0IG1haW5Sb3V0ZSA9IHt9DQogICAgICByb3V0ZS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICBpZiAoaXRlbS5uYW1lID09PSAnTWFpbicpIHsNCiAgICAgICAgICBtYWluUm91dGUgPSBpdGVtDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICBsZXQgbWFpbkFkZFJvdXRlID0gW10NCiAgICAgIG1haW5Sb3V0ZS5jaGlsZHJlbi5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICByZXVzZVJvdXRzLmZvckVhY2goKHJpdGVtLCByaW5kZXgpID0+IHsNCiAgICAgICAgICBpZiAoaXRlbS5uYW1lID09PSByaXRlbS51cmwucmVwbGFjZSgnUmV1c2VSb3V0ZScsICcnKSkgew0KICAgICAgICAgICAgbWFpbkFkZFJvdXRlLnB1c2goew0KICAgICAgICAgICAgICBwYXRoOiBgLyR7cml0ZW0udXVjb2RlfSR7cml0ZW0udXJsfWAsDQogICAgICAgICAgICAgIG5hbWU6IGAke3JpdGVtLmNvZGV9JHtyaXRlbS51cmx9YCwNCiAgICAgICAgICAgICAgY29tcG9uZW50OiBpdGVtLmNvbXBvbmVudCwNCiAgICAgICAgICAgICAgbWV0YTogew0KICAgICAgICAgICAgICAgIGtlZXBBbGl2ZTogdHJ1ZSwNCiAgICAgICAgICAgICAgICByZXF1aXJlQXV0aDogdHJ1ZQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgICBtYWluUm91dGUuY2hpbGRyZW4gPSBtYWluQWRkUm91dGUNCiAgICAgIC8vIG1haW5Sb3V0ZS5jaGlsZHJlbiA9IG1haW5Sb3V0ZS5jaGlsZHJlbi5jb25jYXQobWFpbkFkZFJvdXRlKQ0KICAgICAgdGhpcy4kcm91dGVyLmFkZFJvdXRlKG1haW5Sb3V0ZSkNCiAgICAgIHRoaXMuJHJvdXRlci5vcHRpb25zLnJvdXRlcyA9IHJvdXRlDQogICAgfSwNCiAgICBzaG93SGVhZGVyKCkgew0KICAgICAgLy8gdGhpcy5pc1Nob3dIZWFkZXIgPSB0cnVlDQogICAgfSwNCiAgICBjb250b3JIZWFkZXJTaG93KCkgew0KICAgICAgaWYgKHRoaXMudmFsdWUgIT09ICdIb21lJykgew0KICAgICAgICAvLyB0aGlzLmlzU2hvd0hlYWRlciA9IGZhbHNlDQogICAgICB9DQogICAgfSwNCiAgICBvblF1aWNrTmF2Q2xpY2sob2JqKSB7DQogICAgICB0aGlzLm9uTWVudVNlbGVjdENoYW5nZShvYmopDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuaXNJbml0ZWQgPSB0cnVlDQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgZnVuY3Rpb24gKCkgew0KICAgICAgd2luZG93Lmhpc3RvcnkuZm9yd2FyZCgpDQogICAgfSkNCiAgICB0aGlzLmdldE1lbnVzKCkNCiAgICBpZiAod2luZG93Lmdsb2FibGVUb29sRm4uZW5hYmxlV2F0ZXJNYXJrKSB7DQogICAgICBsZXQgeyB1c2VySW5mbywgbG9naW5EYXRhIH0gPSB0aGlzLiRzdG9yZS5zdGF0ZQ0KICAgICAgZ2VuZXJhdGVEZWZhdWx0V2F0ZXJQcmludCh1c2VySW5mby5jb2RlLCBsb2dpbkRhdGEpDQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICAgIGN1ck1lbnVPYmo6IHsNCiAgICAgIGhhbmRsZXIobmV3VmFsdWUpIHsNCiAgICAgICAgbGV0IGN1cktlZXBBbGl2ZSA9IHRoaXMudGFiTGlzdENwLmZpbmQoaXRlbSA9PiBpdGVtLnVybCA9PT0gbmV3VmFsdWUudXJsKQ0KICAgICAgICBpZiAoY3VyS2VlcEFsaXZlKSB7DQogICAgICAgICAgT2JqZWN0LmFzc2lnbihjdXJLZWVwQWxpdmUsIG5ld1ZhbHVlKQ0KICAgICAgICB9DQogICAgICAgIGlmIChuZXdWYWx1ZSAmJiBPYmplY3Qua2V5cyhuZXdWYWx1ZSkubGVuZ3RoKSB7DQogICAgICAgICAgdGhpcy5yZWdpc3RUYWJDb21zKG5ld1ZhbHVlLCB0cnVlKQ0KICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q3VyTWVudU9iaicsIHt9KQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgZGVlcDogdHJ1ZSwNCiAgICAgIGltbWVkaWF0ZTogZmFsc2UNCiAgICB9LA0KICAgIGhvbWVTaG93VHlwZTogew0KICAgICAgaGFuZGxlcihuZXdWYWx1ZSkgew0KICAgICAgICB0aGlzLmNoYW5nZUhvbWVTaG93VHlwZShuZXdWYWx1ZSkNCiAgICAgIH0sDQogICAgICBpbW1lZGlhdGU6IGZhbHNlDQogICAgfSwNCiAgICB2YWx1ZTogew0KICAgICAgaGFuZGxlcihuZXdWYWx1ZSkgew0KICAgICAgICB0aGlzLnRhYlRhYnMobmV3VmFsdWUpDQogICAgICAgIHRoaXMuaXNDb2xsZWN0aW9uKCkNCiAgICAgIH0sDQogICAgICBkZWVwOiB0cnVlLA0KICAgICAgaW1tZWRpYXRlOiBmYWxzZQ0KICAgIH0sDQogICAgJyRyb3V0ZScodG8sIGZyb20pIHsNCiAgICAgIC8qKiDliJ3lp4vljJblhbbku5bmlbDmja4gKi8NCiAgICAgIHRoaXMucmVnaXN0SW5jbHVkZWRDb21wb25lbnRzKHRvLm5hbWUpDQogICAgfSwNCiAgICBpc1Nob3dIZWFkZXI6IHsNCiAgICAgIGhhbmRsZXIobmV3VmFsdWUpIHsNCiAgICAgICAgaWYgKG5ld1ZhbHVlKSB7DQogICAgICAgICAgdGhpcy50YWJDbGFzcyA9ICdtb2RlbDInDQogICAgICAgICAgY29uc29sZS5sb2cobmV3VmFsdWUsIHRoaXMudGFiQ2xhc3MpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy50YWJDbGFzcyA9ICdtb2RlbDIgbW9kZWwzJw0KICAgICAgICAgIGNvbnNvbGUubG9nKG5ld1ZhbHVlLCB0aGlzLnRhYkNsYXNzKQ0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgZGVlcDogdHJ1ZSwNCiAgICAgIGltbWVkaWF0ZWx5OiB0cnVlDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/views/main","sourcesContent":["<template>\r\n  <div class=\"boss-main app-main\">\r\n    <div v-if=\"!isIframe()\" class=\"app-main-header-line\" @mouseenter=\"showHeader($event)\"></div>\r\n    <div v-if=\"!isIframe()\" class=\"app-main-header\" :class=\"isShowHeader ? isInited ? 'show' : '' : 'hide'\" @mouseleave=\"contorHeaderShow($event)\">\r\n      <BsAppHeader :default-active-menu=\"defaultActiveMenu\" @onMenuSelectChange=\"onMenuSelectChange\" />\r\n    </div>\r\n    <div class=\"app-main-body\">\r\n      <div v-if=\"!isIframe()\" class=\"app-main-body-tab-router\" :style=\"{ 'background': isShowHeader ? '#fff' : 'var(--primary-color)' }\">\r\n        <BsTabKeepRouter\r\n          v-model=\"value\"\r\n          :tab-class=\"tabClass\"\r\n          :is-show-header=\"isShowHeader\"\r\n          :is-collect=\"isCollect\"\r\n          :tab-list=\"tabList\"\r\n          @onRefreshClick=\"onRefreshClick\"\r\n          @onTabListChange=\"onTabListChange\"\r\n          @onCollectClick=\"onCollectClick\"\r\n        >\r\n          <!--<template v-slot:tabKeepRouter-right>-->\r\n          <!--  <div class=\"tab-home-showtyle\">-->\r\n          <!--    <label style=\"margin-bottom:4px;\" :style=\"{ 'color': isShowHeader ? '#333' : '#fff' }\" class=\"fn-inline\">{{ homeShowType === 'Home-card' ? '卡片版' : '默认版' }}</label>-->\r\n          <!--    <span class=\"fn-inline\">-->\r\n          <!--      <vxe-switch-->\r\n          <!--        v-model=\"homeShowType\"-->\r\n          <!--        size=\"mini\"-->\r\n          <!--        on-label=\"是\"-->\r\n          <!--        on-value=\"Home-card\"-->\r\n          <!--        off-label=\"否\"-->\r\n          <!--        off-value=\"Home-default\"-->\r\n          <!--      />-->\r\n          <!--    </span>-->\r\n          <!--  </div>-->\r\n          <!--</template>-->\r\n        </BsTabKeepRouter>\r\n      </div>\r\n      <div v-show=\"showType === 'router'\" class=\"main-modulebox-contain\" :style=\"{ height: isIframe() ? 'calc(100% - 8px) !important' : '', 'marginLeft': leftNavWidth + 'px' }\">\r\n        <BsKeepAlive ref=\"keepAlive\" :include=\"includedComponents\">\r\n          <router-view v-if=\"$route.meta.keepAlive && ifrouteractive \" :key=\"$route.name\" />\r\n        </BsKeepAlive>\r\n        <router-view v-if=\"!$route.meta.keepAlive && ifrouteractive\" :key=\"$route.name\" />\r\n      </div>\r\n      <div v-show=\"showType === 'iframe'\" class=\"main-modulebox-contain\" :style=\"{ 'marginLeft': leftNavWidth + 'px' }\">\r\n        <iframe\r\n          frameborder=\"0\"\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          scrolling=\"y\"\r\n          :src=\"iframeSrc\"\r\n        ></iframe>\r\n      </div>\r\n      <div v-if=\"!isIframe()\" class=\"main-modulebox-quick-nav\" :class=\"isShowHeader ? 'top60' : 'top0'\">\r\n        <BsQuickNav :nav-data=\"menuData\" @onNavClick=\"onQuickNavClick\" @fixedNavChange=\"onFixedNavChange\" />\r\n      </div>\r\n      <GlobalSetting />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MenuModule from '@/api/frame/common/menu.js'\r\nimport GlobalSetting from '@/views/main/GlobalSetting'\r\nimport { generateDefaultWaterPrint } from '@/hb/waterMark.js'\r\nexport default {\r\n  name: 'Main',\r\n  components: {\r\n    GlobalSetting\r\n  },\r\n  data() {\r\n    return {\r\n      leftNavWidth: 0,\r\n      tabClass: 'model2',\r\n      isInited: false,\r\n      isShowHeader: true,\r\n      homeShowType: 'Home-card',\r\n      iframeSrc: '',\r\n      isCollect: false,\r\n      dddown: true,\r\n      ifrouteractive: true,\r\n      includedComponents: [],\r\n      excludedComponents: [],\r\n      tabList: [\r\n        {\r\n          code: 'Home',\r\n          name: '首页',\r\n          url: 'Home',\r\n          guid: 'HomeCard',\r\n          noClear: true\r\n        }\r\n      ],\r\n      tabListCp: [\r\n        //   {\r\n        //   code: 'FormTemplate',\r\n        //   name: '模版',\r\n        //   url: 'FormTemplate'\r\n        // }\r\n      ],\r\n      value: '',\r\n      defaultActiveMenu: {\r\n        code: 'Home',\r\n        name: '首页',\r\n        url: 'Home',\r\n        guid: 'Home',\r\n        noClear: true\r\n      },\r\n      showType: 'router',\r\n      menuData: [],\r\n      list: []\r\n    }\r\n  },\r\n  computed: {\r\n    key() {\r\n      return this.$route.name !== undefined ? this.$route.name + +new Date() : this.$route + +new Date()\r\n    },\r\n    curRouteTabObj() {\r\n      return this.$store.state.curNavRoute\r\n    },\r\n    loginAuthentication() {\r\n      return this.$store.state.loginAuthentication\r\n    },\r\n    userInfo() {\r\n      return this.$store.state.userInfo\r\n    },\r\n    curMenuObj() {\r\n      return this.$store.state.curMenuObj\r\n    }\r\n  },\r\n  methods: {\r\n    isIframe() {\r\n      return window.self !== window.top\r\n    },\r\n    getDataType(obj) {\r\n      // 获取数据类型\r\n      return Object.prototype.toString.call(obj).slice(8, -1)\r\n    },\r\n    deepCopy(obj) { // 深拷贝通用方法\r\n      try {\r\n        let me = this\r\n        if (typeof obj !== 'object' || obj === null) return obj\r\n        let newObj = obj instanceof Array ? [] : {}\r\n        for (let key in obj) {\r\n          if (obj.hasOwnProperty(key)) {\r\n            newObj[key] = typeof obj[key] === 'object' ? me.deepCopy(obj[key]) : obj[key]\r\n          }\r\n        }\r\n        return newObj\r\n      } catch (e) {\r\n      }\r\n    },\r\n    getIndexof(arr, value, key) {\r\n      // 按key值获取索引\r\n      let indexOf = -1\r\n      if (!Array.isArray(arr)) return -1\r\n      let someof = arr.some((item, index) => {\r\n        indexOf = index\r\n        return item[key] === value\r\n      })\r\n      if (someof) {\r\n        return indexOf\r\n      }\r\n      return -1\r\n    },\r\n    arrunique(arr, key) {\r\n      // 数组去重\r\n      let temp = []\r\n      for (let i = 0; i < arr.length; i++) {\r\n        let indexof = this.getIndexof(temp, arr[i], 'key')\r\n        if (indexof === -1) {\r\n          temp.push(arr[i])\r\n        }\r\n      }\r\n      return temp\r\n    },\r\n    onFixedNavChange(isFixedNav, navWidth) {\r\n      if (isFixedNav) {\r\n        this.leftNavWidth = navWidth\r\n      } else {\r\n        this.leftNavWidth = 0\r\n      }\r\n    },\r\n    registTabComs(obj) {\r\n      // 注册路由\r\n      if (this.value !== obj.url) {\r\n        if (this.getDataType(obj) === 'Object' && obj.code) {\r\n          let indexOf = this.getIndexof(this.tabListCp, obj.url, 'url')\r\n          if (indexOf === -1) {\r\n            this.tabListCp.push(obj)\r\n            this.tabList = this.deepCopy(this.tabListCp)\r\n            this.value = obj.url\r\n          } else {\r\n            this.tabList = this.deepCopy(this.tabListCp)\r\n            this.value = obj.url\r\n          }\r\n        }\r\n      } else {\r\n        this.onRefreshClick(obj.url)\r\n      }\r\n    },\r\n    registIncludedComponents(value) {\r\n      let self = this\r\n      if (this.includedComponents.indexOf(value) === -1) {\r\n        this.includedComponents = this.tabListCp.map((item, index) => {\r\n          return item.url\r\n        }).filter((item, index) => {\r\n          if (item === self.$route.name) {\r\n            return self.$route.meta.keepAlive\r\n          } else {\r\n            return item\r\n          }\r\n        })\r\n      } else {\r\n        this.includedComponents = this.tabListCp.map((item, index) => {\r\n          return item.url\r\n        }).filter((item, index) => {\r\n          if (item === self.$route.name) {\r\n            return self.$route.meta.keepAlive\r\n          } else {\r\n            return item\r\n          }\r\n        })\r\n      }\r\n      if (!this.$route.meta.keepAlive) {\r\n        this.excludedComponents.push(self.$route.name)\r\n        this.excludedComponents = [...new Set(this.excludedComponents)]\r\n      }\r\n      // console.log(this.includedComponents)\r\n    },\r\n    tabTabs(value) {\r\n      if (value !== '') {\r\n        if (\r\n          this.getDataType(this.curRouteTabObj) === 'Object' &&\r\n          this.curRouteTabObj.url !== value\r\n        ) {\r\n          let indexOf = this.getIndexof(this.tabListCp, value, 'url')\r\n\r\n          if (window.self === window.top) {\r\n            this.$store.commit('setCurNavModule', this.tabListCp[indexOf])\r\n          }\r\n          // if (indexOf === -1) {\r\n          //   this.onRefreshClick()\r\n          // }\r\n        }\r\n        if (value === 'Home') {\r\n          this.routerToHome(this.homeShowType)\r\n          // this.$router.push(\r\n          //   {\r\n          //     name: value,\r\n          //     params: {\r\n          //       homeShowType: this.homeShowType,\r\n          //       curNavModule: this.$store.getters.getCurNavModule\r\n          //     }\r\n          //   }\r\n          // )\r\n        } else {\r\n          // this.isShowHeader = false\r\n          if (value.indexOf('.html') >= 0 || value.indexOf('http:') >= 0 || value.indexOf('https') >= 0) {\r\n            this.iframeSrc = value.indexOf('?') >= 0 ? value + '&bosssoftTokenid=' + this.$store.state.loginAuthentication.tokenid : value + '?bosssoftTokenid=' + this.$store.state.loginAuthentication.tokenid\r\n            this.showType = 'iframe'\r\n          } else {\r\n            this.showType = 'router'\r\n            this.iframeSrc = ''\r\n            this.$router.push(\r\n              {\r\n                path: value,\r\n                params: {\r\n                  curNavModule: this.$store.getters.getCurNavModule\r\n                }\r\n              }\r\n            )\r\n          }\r\n        }\r\n\r\n        // this.$nextTick(() => {\r\n        //   this.$nextTick(() => {\r\n        //   })\r\n        // })\r\n      }\r\n    },\r\n    routerToHome(homeShowType) {\r\n      if (window.self !== window.top) return\r\n      if (homeShowType === 'Home-card') {\r\n        this.$router.push({\r\n          name: 'HomeCard',\r\n          params: {\r\n            homeShowType: homeShowType,\r\n            curNavModule: this.$store.getters.getCurNavModule\r\n          }\r\n        })\r\n      }\r\n      if (homeShowType === 'Home-default') {\r\n        this.$router.push({\r\n          name: 'Home',\r\n          params: {\r\n            homeShowType: homeShowType,\r\n            curNavModule: this.$store.getters.getCurNavModule\r\n          }\r\n        })\r\n      }\r\n    },\r\n    onRefreshClick(obj) {\r\n      let self = this\r\n      self.$refs.keepAlive.destroy(this.$route.name)\r\n      // self.updateIframeNode(this.$route.url, this.$store.getters.getCurNavModul.code, 'destory')\r\n      self.ifrouteractive = false\r\n      self.$nextTick(vm => {\r\n        setTimeout(() => {\r\n          self.ifrouteractive = true\r\n        }, 100)\r\n      })\r\n    },\r\n    onTabListChange(tabList) {\r\n      this.list = tabList\r\n      this.tabListCp = JSON.parse(JSON.stringify(tabList))\r\n      this.registIncludedComponents()\r\n    },\r\n    changeHomeShowType(homeShowType) {\r\n      if (this.value === 'Home') {\r\n        this.routerToHome(homeShowType)\r\n      }\r\n    },\r\n    onMenuSelectChange(obj) {\r\n      let self = this\r\n      if (obj.param5 && obj.param5.indexOf('needcheck=true') >= 0) { // 需要校验编报是否已关闭\r\n        let params = {\r\n          menuguid: obj.guid,\r\n          appguid: obj.appid,\r\n          appid: obj.appsysid,\r\n          specroleguid: '',\r\n          roleguid: obj.roleguid }\r\n        MenuModule.getFbPageConfig(params).then(res => {\r\n          Object.assign(obj, res)\r\n          if (res.data.isbudgetbegin === 0 && res.data.datatype !== 8) {\r\n            self.$message('预算编报已关闭')\r\n          } else {\r\n            this.$store.commit('setCurMenuObj', obj)\r\n            // this.registTabComs(obj)\r\n          }\r\n        }).catch(error => {\r\n          console.log(error)\r\n          self.$error('error')\r\n        })\r\n      } else {\r\n        self.$refs.keepAlive.destroy(obj.url)\r\n        this.$store.commit('setCurMenuObj', obj)\r\n        // this.registTabComs(obj)\r\n      }\r\n    },\r\n    // 点击收藏按钮事件\r\n    onCollectClick(isCurNavCollect) {\r\n      this.isCollect = !isCurNavCollect\r\n      let self = this\r\n      let userInfo = self.$store.state.userInfo\r\n      let menuInfo = self.$store.state.curNavModule\r\n      if (!isCurNavCollect) {\r\n        let param = {\r\n          menuguid: [{ menuguid: menuInfo.guid, roleguid: menuInfo.roleguid }],\r\n          userguid: userInfo.guid,\r\n          year: userInfo.year,\r\n          province: userInfo.province,\r\n          appguid: userInfo.app.guid\r\n        }\r\n        MenuModule.saveCollectionMenu(param).then(res => {\r\n          var result = JSON.parse(res)\r\n          if (result && result.result) {\r\n            self.$message({\r\n              message: result.msg,\r\n              type: 'success'\r\n            })\r\n          } else {\r\n            self.$message({\r\n              message: result.msg,\r\n              type: 'success'\r\n            })\r\n          }\r\n        })\r\n      } else {\r\n        let param = {\r\n          menuguid: [{ menuguid: menuInfo.guid, roleguid: menuInfo.roleguid }],\r\n          roleguid: menuInfo.roleguid,\r\n          userguid: userInfo.guid,\r\n          year: userInfo.year,\r\n          province: userInfo.province,\r\n          appguid: userInfo.app.guid\r\n        }\r\n        MenuModule.removeCollectionMenu(param).then(res => {\r\n          var result = JSON.parse(res)\r\n          if (result && result.result) {\r\n            self.$message({\r\n              message: result.msg,\r\n              type: 'success'\r\n            })\r\n          } else {\r\n            self.$message({\r\n              message: result.msg,\r\n              type: 'success'\r\n            })\r\n          }\r\n        })\r\n      }\r\n    },\r\n    updateUrl(url) {\r\n      let tokenid = this.$store.getters.getLoginAuthentication.tokenid\r\n      let roleguid = this.$store.state.curNavModule.roleguid\r\n      let menuId = this.$store.state.curNavModule.guid\r\n      let userInfo = this.$store.state.userInfo\r\n      if (url.indexOf('.cpt') === -1) {\r\n        url = url + '.cpt'\r\n      }\r\n      url = window.gloableToolFn.getReportUrl() + url +\r\n        '&x=1' + '&menuguid=' + menuId +\r\n        '&roleguid=' + roleguid + '&tokenid=' + tokenid + '&userguid=' + userInfo.guid + '&fiscal_year=' + userInfo.year + '&mof_div_code=' + userInfo.province\r\n      return url\r\n    },\r\n\r\n    // 是否收藏\r\n    isCollection() {\r\n      let self = this\r\n      // let userInfo = self.$store.state.userInfo\r\n      let menuInfo = self.$store.state.curNavModule\r\n      let param = {\r\n        menuguid: menuInfo.guid,\r\n        roleguid: menuInfo.roleguid || self.userInfo.guid,\r\n        userguid: self.userInfo.guid,\r\n        year: self.userInfo.year,\r\n        province: self.userInfo.province,\r\n        appguid: self.userInfo.app.guid\r\n      }\r\n      MenuModule.isCollectionMenu(param).then(res => {\r\n        var result = null\r\n        try {\r\n          result = JSON.parse(res)\r\n        } catch (error) {\r\n          result = res\r\n        }\r\n        if (result && result.result) {\r\n          this.isCollect = true\r\n        } else {\r\n          this.isCollect = false\r\n        }\r\n      })\r\n    },\r\n    getObjByNestedIndex(arr, nestedId) {\r\n      // 获取选中菜单的数据源\r\n      let nestArr = nestedId.split('_')\r\n      let obj = {}\r\n      nestArr.forEach((item, index) => {\r\n        if (index === 0) {\r\n          obj = arr[parseInt(item)]\r\n        } else {\r\n          obj = obj.children[parseInt(item)]\r\n        }\r\n      })\r\n      return obj\r\n    },\r\n    getMenus() {\r\n      // 三级菜单请求\r\n      let self = this\r\n      MenuModule.getMenuInfo().then((res) => {\r\n        // this.navMenuData[0].children = res\r\n        // this.menuData = this.navMenuData\r\n        if (Array.isArray(res)) {\r\n          if (res.length) {\r\n            self.menuData = res\r\n            this.addDynamicRoutingRoute(this.recursiveChangeUrl(res))\r\n            this.onMenuSelectChange(this.defaultActiveMenu)\r\n            this.$store.commit('setSystemMenu', res) // 将菜单存储到store\r\n            // 根据菜单信息获取待办\r\n            this.$store.dispatch('todoInfo/getMenuMapTodoInfo', res || [])\r\n          } else {\r\n            // this.$message({\r\n            //   dangerouslyUseHTMLString: true,\r\n            //   message: '当前用户'\r\n            // })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    recursiveChangeUrl(data, reuseRouts = []) {\r\n      // 递归获取动态复用路由\r\n      // this.addDynamicRoutingRoute(this.recursiveChangeUrl(res))\r\n      let self = this\r\n      data.forEach((item, index) => {\r\n        if (Array.isArray(item.children) && item.children.length) {\r\n          self.recursiveChangeUrl(item.children, reuseRouts)\r\n        } else {\r\n          if (item.url.indexOf('pay0') !== -1 || item.url.indexOf('pay1') !== -1 || item.url.indexOf('pay2') !== -1 || item.url.indexOf('.cpt') !== -1) {\r\n            item.url = this.updateUrl(item.url)\r\n          }\r\n          if (item.url && item.url.indexOf('ReuseRoute') >= 0) {\r\n            item.uucode = Math.floor(Math.random() * 100000000)\r\n            reuseRouts.push(Object.assign({}, item))\r\n            item.url = item.uucode + item.url\r\n          }\r\n        }\r\n      })\r\n      return reuseRouts\r\n    },\r\n    addDynamicRoutingRoute(reuseRouts) {\r\n      let route = this.$router.options.routes\r\n      let mainRoute = {}\r\n      route.forEach((item, index) => {\r\n        if (item.name === 'Main') {\r\n          mainRoute = item\r\n        }\r\n      })\r\n      let mainAddRoute = []\r\n      mainRoute.children.forEach((item, index) => {\r\n        reuseRouts.forEach((ritem, rindex) => {\r\n          if (item.name === ritem.url.replace('ReuseRoute', '')) {\r\n            mainAddRoute.push({\r\n              path: `/${ritem.uucode}${ritem.url}`,\r\n              name: `${ritem.code}${ritem.url}`,\r\n              component: item.component,\r\n              meta: {\r\n                keepAlive: true,\r\n                requireAuth: true\r\n              }\r\n            })\r\n          }\r\n        })\r\n      })\r\n      mainRoute.children = mainAddRoute\r\n      // mainRoute.children = mainRoute.children.concat(mainAddRoute)\r\n      this.$router.addRoute(mainRoute)\r\n      this.$router.options.routes = route\r\n    },\r\n    showHeader() {\r\n      // this.isShowHeader = true\r\n    },\r\n    contorHeaderShow() {\r\n      if (this.value !== 'Home') {\r\n        // this.isShowHeader = false\r\n      }\r\n    },\r\n    onQuickNavClick(obj) {\r\n      this.onMenuSelectChange(obj)\r\n    }\r\n  },\r\n  mounted() {\r\n    this.isInited = true\r\n    window.addEventListener('popstate', function () {\r\n      window.history.forward()\r\n    })\r\n    this.getMenus()\r\n    if (window.gloableToolFn.enableWaterMark) {\r\n      let { userInfo, loginData } = this.$store.state\r\n      generateDefaultWaterPrint(userInfo.code, loginData)\r\n    }\r\n  },\r\n  watch: {\r\n    curMenuObj: {\r\n      handler(newValue) {\r\n        let curKeepAlive = this.tabListCp.find(item => item.url === newValue.url)\r\n        if (curKeepAlive) {\r\n          Object.assign(curKeepAlive, newValue)\r\n        }\r\n        if (newValue && Object.keys(newValue).length) {\r\n          this.registTabComs(newValue, true)\r\n          this.$store.commit('setCurMenuObj', {})\r\n        }\r\n      },\r\n      deep: true,\r\n      immediate: false\r\n    },\r\n    homeShowType: {\r\n      handler(newValue) {\r\n        this.changeHomeShowType(newValue)\r\n      },\r\n      immediate: false\r\n    },\r\n    value: {\r\n      handler(newValue) {\r\n        this.tabTabs(newValue)\r\n        this.isCollection()\r\n      },\r\n      deep: true,\r\n      immediate: false\r\n    },\r\n    '$route'(to, from) {\r\n      /** 初始化其他数据 */\r\n      this.registIncludedComponents(to.name)\r\n    },\r\n    isShowHeader: {\r\n      handler(newValue) {\r\n        if (newValue) {\r\n          this.tabClass = 'model2'\r\n          console.log(newValue, this.tabClass)\r\n        } else {\r\n          this.tabClass = 'model2 model3'\r\n          console.log(newValue, this.tabClass)\r\n        }\r\n      },\r\n      deep: true,\r\n      immediately: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}