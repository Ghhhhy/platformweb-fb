{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\statisticAnalysis\\efficiencySheetStatistic\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\statisticAnalysis\\efficiencySheetStatistic\\index.vue","mtime":1694505522826},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIHRvUmF3IH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknDQoNCmltcG9ydCB1c2VUYWJsZSBmcm9tICdAL2hvb2tzL3VzZVRhYmxlJw0KaW1wb3J0IHVzZUZvcm0gZnJvbSAnQC9ob29rcy91c2VGb3JtJw0KaW1wb3J0IHVzZVRhYlBsYW5lbCBmcm9tICcuLi9jb21tb24vaG9va3MvdXNlVGFiUGxhbmVsJw0KaW1wb3J0IHsgZ2V0SW5kZXhDb2x1bW5zLCBnZXRTZWFyY2hTY2hlbWFzIH0gZnJvbSAnLi9tb2RlbC9kYXRhLmpzJw0KDQppbXBvcnQgdHJlZUFwaSBmcm9tICdAL2FwaS9mcmFtZS9jb21tb24vdHJlZS91bml0VHJlZS5qcycNCmltcG9ydCB7IGNoZWNrUnNjb2RlIH0gZnJvbSAnQC91dGlscy9jaGVja1JzY29kZScNCmltcG9ydCB7IHF1ZXJ5UGF5RWZmaWNpZW5jeSB9IGZyb20gJ0AvYXBpL2ZyYW1lL21haW4vc3RhdGlzdGljQW5hbHlzaXMvZWZmaWNpZW5jeVNoZWV0U3RhdGlzdGljJw0KDQpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoew0KICBzZXR1cChfKSB7DQogICAgLyoqDQogICAgICog5pCc57Si6KGo5Y2VDQogICAgICovDQogICAgY29uc3QgWw0KICAgICAgew0KICAgICAgICBmb3JtRGF0YSwNCiAgICAgICAgZm9ybVNjaGVtYXMsDQogICAgICAgIHNldFN1Ym1pdEZvcm1EYXRhLA0KICAgICAgICBnZXRTdWJtaXRGb3JtRGF0YSwNCiAgICAgICAgdXBkYXRlRm9ybVNjaGVtYXMNCiAgICAgIH0sDQogICAgICByZWdpc3RlckZvcm0NCiAgICBdID0gdXNlRm9ybShnZXRTZWFyY2hTY2hlbWFzKCkpDQogICAgLyoqDQogICAgICog6I635Y+W5qCRDQogICAgICogKi8NCiAgICBhc3luYyBmdW5jdGlvbiBnZXRFbGVtZW50VHJlZUhhbmRsZShmaWVsZCA9ICcnKSB7DQogICAgICBjb25zdCB7IGRhdGEgfSA9IGNoZWNrUnNjb2RlKA0KICAgICAgICBhd2FpdCB0cmVlQXBpLmdldEVsZW1lbnRUcmVlKHsNCiAgICAgICAgICBlbGVtZW50Q29kZTogZmllbGQgPT09ICdkZXB0Q29kZScgPyAnZGVwdCcgOiAnbWFuYWdlX21vZl9kZXAnDQogICAgICAgIH0pDQogICAgICApDQogICAgICB1cGRhdGVGb3JtU2NoZW1hcyh7DQogICAgICAgIGZpZWxkLA0KICAgICAgICBpdGVtUmVuZGVyOiB7DQogICAgICAgICAgb3B0aW9uczogZGF0YSB8fCBbXQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0NCiAgICBQcm9taXNlLmFsbCgNCiAgICAgIFsNCiAgICAgICAgZ2V0RWxlbWVudFRyZWVIYW5kbGUoJ21hbmFnZU1vZkRlcENvZGUnKSwNCiAgICAgICAgZ2V0RWxlbWVudFRyZWVIYW5kbGUoJ2RlcHRDb2RlJykNCiAgICAgIF0NCiAgICApDQoNCiAgICAvKioNCiAgICAgKiDmkJzntKIm6YeN572uDQogICAgICogKi8NCiAgICBmdW5jdGlvbiBzZWFyY2gob2JqKSB7DQogICAgICBPYmplY3QuYXNzaWduKGZvcm1EYXRhLCBvYmopDQogICAgICBzZXRTdWJtaXRGb3JtRGF0YSh0b1Jhdyhmb3JtRGF0YSkpDQoNCiAgICAgIHJlc2V0RmV0Y2hUYWJsZURhdGEoKQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOihqOagvA0KICAgICAqICovDQogICAgY29uc3QgWw0KICAgICAgew0KICAgICAgICBjb2x1bW5zLA0KICAgICAgICB0YWJsZVRvb2xiYXJDb25maWcsDQogICAgICAgIHRhYmxlQ29uZmlnLA0KICAgICAgICB0YWJsZURhdGEsDQogICAgICAgIHJlc2V0RmV0Y2hUYWJsZURhdGEsDQogICAgICAgIHRhYmxlTG9hZGluZ1N0YXRlLA0KICAgICAgICBwYWdlckNoYW5nZSwNCiAgICAgICAgcGFnZXJDb25maWcsDQogICAgICAgIG9uVG9vbGJhckJ0bkNsaWNrDQogICAgICB9LA0KICAgICAgcmVnaXN0ZXJUYWJsZQ0KICAgIF0gPSB1c2VUYWJsZSh7DQogICAgICBmZXRjaDogcXVlcnlQYXlFZmZpY2llbmN5LA0KICAgICAgLy8gYmVmb3JlRmV0Y2g6IHBhcmFtcyA9PiB7DQogICAgICAvLyAgIC8qZXNsaW50LWRpc2FibGUqLw0KICAgICAgLy8gICBjb25zdCB7IG1hbmFnZU1vZkRlcENvZGVfY29kZSwgZGVwdENvZGVfY29kZSwgbW9udGggfSA9IGdldFN1Ym1pdEZvcm1EYXRhKCkNCiAgICAgIC8vICAgcmV0dXJuIHsNCiAgICAgIC8vICAgICAuLi5wYXJhbXMsDQogICAgICAvLyAgICAgbWFuYWdlTW9mRGVwQ29kZTogbWFuYWdlTW9mRGVwQ29kZV9jb2RlIHx8ICcnLA0KICAgICAgLy8gICAgIGRlcHRDb2RlOiBkZXB0Q29kZV9jb2RlIHx8ICcnLA0KICAgICAgLy8gICAgIG1vbnRoOiBtb250aCB8fCAnJw0KICAgICAgLy8gICB9DQogICAgICAvLyB9LA0KICAgICAgY29sdW1uczogZ2V0SW5kZXhDb2x1bW5zKCksDQogICAgICBnZXRTdWJtaXRGb3JtRGF0YSwNCiAgICAgIGRhdGFLZXk6ICdkYXRhLnJlc3VsdHMnDQogICAgfSkNCg0KICAgIC8qKg0KICAgICAqIOmhtumDqHRhYuaooeWdlw0KICAgICAqLw0KICAgIGNvbnN0IHsNCiAgICAgIHRhYlN0YXR1c0J0bkNvbmZpZywNCiAgICAgIGlzU2hvd1NlYXJjaEZvcm0sDQogICAgICBvblF1ZXJ5Q29uZGl0aW9uc0NsaWNrDQogICAgfSA9IHVzZVRhYlBsYW5lbCgpDQogICAgdGFiU3RhdHVzQnRuQ29uZmlnLnZhbHVlLmJ1dHRvbnNJbmZvID0gbnVsbA0KDQogICAgcmV0dXJuIHsNCiAgICAgIGNvbHVtbnMsDQogICAgICByZWdpc3RlclRhYmxlLA0KICAgICAgdGFibGVDb25maWcsDQogICAgICB0YWJsZURhdGEsDQogICAgICB0YWJsZUxvYWRpbmdTdGF0ZSwNCiAgICAgIHBhZ2VyQ29uZmlnLA0KICAgICAgdGFibGVUb29sYmFyQ29uZmlnLA0KICAgICAgb25Ub29sYmFyQnRuQ2xpY2ssDQogICAgICBwYWdlckNoYW5nZSwNCiAgICAgIHJlc2V0RmV0Y2hUYWJsZURhdGEsDQoNCiAgICAgIHRhYlN0YXR1c0J0bkNvbmZpZywNCiAgICAgIGlzU2hvd1NlYXJjaEZvcm0sDQogICAgICBvblF1ZXJ5Q29uZGl0aW9uc0NsaWNrLA0KDQogICAgICByZWdpc3RlckZvcm0sDQogICAgICBmb3JtRGF0YSwNCiAgICAgIGZvcm1TY2hlbWFzLA0KICAgICAgc2VhcmNoDQogICAgfQ0KICB9DQp9KQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/main/statisticAnalysis/efficiencySheetStatistic","sourcesContent":["<template>\r\n  <div style=\"height: 100%\">\r\n    <BsMainFormListLayout :left-visible=\"false\">\r\n      <template v-slot:topTabPane>\r\n        <BsTabPanel\r\n          :tab-status-btn-config=\"tabStatusBtnConfig\"\r\n          :is-open=\"isShowSearchForm\"\r\n          @onQueryConditionsClick=\"onQueryConditionsClick\"\r\n        />\r\n      </template>\r\n      <template v-slot:query>\r\n        <div v-show=\"isShowSearchForm\" class=\"main-query\">\r\n          <BsQuery\r\n            :query-form-item-config=\"formSchemas\"\r\n            :query-form-data=\"formData\"\r\n            @onSearchClick=\"search\"\r\n            @register=\"registerForm\"\r\n          />\r\n        </div>\r\n      </template>\r\n      <template v-slot:mainForm>\r\n        <div style=\"height: 100%\">\r\n          <BsTable\r\n            :loading=\"tableLoadingState\"\r\n            :table-config=\"tableConfig\"\r\n            :table-columns-config=\"columns\"\r\n            :table-data=\"tableData\"\r\n            :toolbar-config=\"tableToolbarConfig\"\r\n            :pager-config=\"pagerConfig\"\r\n            size=\"medium\"\r\n            @register=\"registerTable\"\r\n            @ajaxData=\"pagerChange\"\r\n            @onToolbarBtnClick=\"onToolbarBtnClick\"\r\n          >\r\n            <template v-slot:toolbarSlots>\r\n              <div class=\"table-toolbar-left\" style=\"display: flex; align-items: center;\">\r\n                <BsTableTitle title=\"统计分析\" />\r\n                <p style=\"font-size: 14px\">说明：支出处室审核时间当月数据=当月审核间隔天数总和/总笔数</p>\r\n              </div>\r\n            </template>\r\n          </BsTable>\r\n        </div>\r\n      </template>\r\n    </BsMainFormListLayout>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, toRaw } from '@vue/composition-api'\r\n\r\nimport useTable from '@/hooks/useTable'\r\nimport useForm from '@/hooks/useForm'\r\nimport useTabPlanel from '../common/hooks/useTabPlanel'\r\nimport { getIndexColumns, getSearchSchemas } from './model/data.js'\r\n\r\nimport treeApi from '@/api/frame/common/tree/unitTree.js'\r\nimport { checkRscode } from '@/utils/checkRscode'\r\nimport { queryPayEfficiency } from '@/api/frame/main/statisticAnalysis/efficiencySheetStatistic'\r\n\r\nexport default defineComponent({\r\n  setup(_) {\r\n    /**\r\n     * 搜索表单\r\n     */\r\n    const [\r\n      {\r\n        formData,\r\n        formSchemas,\r\n        setSubmitFormData,\r\n        getSubmitFormData,\r\n        updateFormSchemas\r\n      },\r\n      registerForm\r\n    ] = useForm(getSearchSchemas())\r\n    /**\r\n     * 获取树\r\n     * */\r\n    async function getElementTreeHandle(field = '') {\r\n      const { data } = checkRscode(\r\n        await treeApi.getElementTree({\r\n          elementCode: field === 'deptCode' ? 'dept' : 'manage_mof_dep'\r\n        })\r\n      )\r\n      updateFormSchemas({\r\n        field,\r\n        itemRender: {\r\n          options: data || []\r\n        }\r\n      })\r\n    }\r\n    Promise.all(\r\n      [\r\n        getElementTreeHandle('manageMofDepCode'),\r\n        getElementTreeHandle('deptCode')\r\n      ]\r\n    )\r\n\r\n    /**\r\n     * 搜索&重置\r\n     * */\r\n    function search(obj) {\r\n      Object.assign(formData, obj)\r\n      setSubmitFormData(toRaw(formData))\r\n\r\n      resetFetchTableData()\r\n    }\r\n\r\n    /**\r\n     * 表格\r\n     * */\r\n    const [\r\n      {\r\n        columns,\r\n        tableToolbarConfig,\r\n        tableConfig,\r\n        tableData,\r\n        resetFetchTableData,\r\n        tableLoadingState,\r\n        pagerChange,\r\n        pagerConfig,\r\n        onToolbarBtnClick\r\n      },\r\n      registerTable\r\n    ] = useTable({\r\n      fetch: queryPayEfficiency,\r\n      // beforeFetch: params => {\r\n      //   /*eslint-disable*/\r\n      //   const { manageMofDepCode_code, deptCode_code, month } = getSubmitFormData()\r\n      //   return {\r\n      //     ...params,\r\n      //     manageMofDepCode: manageMofDepCode_code || '',\r\n      //     deptCode: deptCode_code || '',\r\n      //     month: month || ''\r\n      //   }\r\n      // },\r\n      columns: getIndexColumns(),\r\n      getSubmitFormData,\r\n      dataKey: 'data.results'\r\n    })\r\n\r\n    /**\r\n     * 顶部tab模块\r\n     */\r\n    const {\r\n      tabStatusBtnConfig,\r\n      isShowSearchForm,\r\n      onQueryConditionsClick\r\n    } = useTabPlanel()\r\n    tabStatusBtnConfig.value.buttonsInfo = null\r\n\r\n    return {\r\n      columns,\r\n      registerTable,\r\n      tableConfig,\r\n      tableData,\r\n      tableLoadingState,\r\n      pagerConfig,\r\n      tableToolbarConfig,\r\n      onToolbarBtnClick,\r\n      pagerChange,\r\n      resetFetchTableData,\r\n\r\n      tabStatusBtnConfig,\r\n      isShowSearchForm,\r\n      onQueryConditionsClick,\r\n\r\n      registerForm,\r\n      formData,\r\n      formSchemas,\r\n      search\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n"]}]}