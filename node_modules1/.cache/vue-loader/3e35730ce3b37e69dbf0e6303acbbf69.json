{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\MointoringMatters\\SystemLevelRulesFlow\\children\\addDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\MointoringMatters\\SystemLevelRulesFlow\\children\\addDialog.vue","mtime":1694576524406},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBwcm9jb25mIH0gZnJvbSAnLi4vU3lzdGVtTGV2ZWxSdWxlc0Zsb3cuanMnDQppbXBvcnQgSHR0cE1vZHVsZSBmcm9tICdAL2FwaS9mcmFtZS9tYWluL01vbml0b3JpbmcvbGV2ZWxSdWxlcy5qcycNCmltcG9ydCBxdWVyeVRyZWVkRWxlbWVudEJ5Q29kZU1peGluIGZyb20gJ0AvbWl4aW4vcXVlcnlUcmVlZEVsZW1lbnRCeUNvZGUuanMnDQppbXBvcnQgZnVuY3Rpb25TZWxlY3RNaXhpbiBmcm9tICdAL21peGluL2Z1bmN0aW9uU2VsZWN0TWl4aW4uanMnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0FkZERpYWxvZycsDQogIG1peGluczogW3F1ZXJ5VHJlZWRFbGVtZW50QnlDb2RlTWl4aW4sIGZ1bmN0aW9uU2VsZWN0TWl4aW5dLA0KICBjb21wb25lbnRzOiB7fSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBjdXJOYXZNb2R1bGUoKSB7DQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuY3VyTmF2TW9kdWxlDQogICAgfQ0KICB9LA0KICBwcm9wczogew0KICAgIHRpdGxlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAnJw0KICAgIH0sDQogICAgYnV0dG9uVHlwZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJycNCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHJlZmxlc2hLZXk6IERhdGUubm93KCksDQogICAgICB3YXJuVHlwZTogJycsDQogICAgICB3YXJuVHlwZU9wdGlvbnM6IFsNCiAgICAgICAgeyB2YWx1ZTogJzEnLCBsYWJlbDogJ+a1geWQkScgfSwNCiAgICAgICAgeyB2YWx1ZTogJzInLCBsYWJlbDogJ+a1gemAnycgfSwNCiAgICAgICAgeyB2YWx1ZTogJzMnLCBsYWJlbDogJ+a1gemHjycgfSwNCiAgICAgICAgeyB2YWx1ZTogJzQnLCBsYWJlbDogJ+WFtuS7licgfQ0KICAgICAgXSwNCiAgICAgIHVwbG9hZEZpbGU6ICcnLA0KICAgICAgdXBsb2FkRmlsZU9wdGlvbnM6IFsNCiAgICAgICAgeyB2YWx1ZTogJzEnLCBsYWJlbDogJ+aYrycgfSwNCiAgICAgICAgeyB2YWx1ZTogJzAnLCBsYWJlbDogJ+WQpicgfQ0KICAgICAgXSwNCiAgICAgIHNob3dhYmxlOiBmYWxzZSwNCiAgICAgIHJpZ2h0VHJlZVZhbHVlOiBbXSwNCiAgICAgIGNvbmZpZ0luOiB7DQogICAgICAgIGRpc2FibGVkOiB0cnVlDQogICAgICB9LA0KICAgICAgdHJlZURhdGE6IFtdLA0KICAgICAgZGlzYWJsZWQ6IGZhbHNlLA0KICAgICAgZWRpdENvbmZpZzogew0KICAgICAgICB0cmlnZ2VyOiAnZGJsY2xpY2snLA0KICAgICAgICBtb2RlOiAnY2VsbCcNCiAgICAgIH0sDQogICAgICBlZGl0UnVsZXNJbjogew0KICAgICAgICBwYXJhbTogW3sgcmVxdWlyZWQ6IHRydWUsIHR5cGU6ICdmbG9hdCcsIHRyaWdnZXI6ICdjaGFuZ2UnLCBtZXNzYWdlOiAn6K+36L6T5YWl6KeE5YiZ5a6a5LmJ55qE5Y+C5pWw5YC8JyB9XQ0KICAgICAgfSwNCiAgICAgIG1vbml0b3JUYWJsZUNvbHVtbnNDb25maWc6IHByb2NvbmYubW9uaXRvclNldFRhYmxlQ29sdW1uc0NvbmZpZywNCiAgICAgIG9wZXJhdGlvblRhYmxlRGF0YTogW10sDQogICAgICB0YWJidG46IFsn5qih5p2/5L+h5oGvJywgJ+inhOWImeWumuS5iScsICfnmb3lkI3ljZUnLCAn55Sf5pWI6IyD5Zu0JywgJ+WuoeaguOaEj+ingSddLA0KICAgICAgcnVsZVNldFNob3c6IHRydWUsDQogICAgICBydWxlRGVzU2hvdzogZmFsc2UsDQogICAgICBhcHBTZXRTaG93OiBmYWxzZSwNCiAgICAgIGVmZmVjdGl2ZVNob3c6IGZhbHNlLA0KICAgICAgYXVkaXRTaG93OiBmYWxzZSwNCiAgICAgIGFjdGl2ZUluZGV4OiAwLA0KICAgICAgY3JUZW1wbGF0ZTogJycsDQogICAgICBtb25pdG9yUnVsZU5hbWU6ICcnLA0KICAgICAgcmVndWxhdGlvblR5cGU6ICcnLA0KICAgICAgcXVodWE6ICcnLA0KICAgICAgcnVsZUZsb3dPcGluaW9uOiAnJywNCiAgICAgIG1vdW50VGFibGVDb2x1bW5zQ29uZmlnOiBwcm9jb25mLm1vdW50VGFibGVDb2x1bW5zQ29uZmlnLA0KICAgICAgbW91bnRUYWJsZURhdGE6IFtdLA0KICAgICAgLy8gQnNRdWVyeSDmn6Xor6LmoI8NCiAgICAgIHF1ZXJ5Q29uZmlnOiBwcm9jb25mLnNldGhpZ2hRdWVyeUNvbmZpZywNCiAgICAgIHNlYXJjaERhdGFMaXN0OiBwcm9jb25mLnNldGhpZ2hRdWVyeURhdGEsDQogICAgICAvLyB0YWJsZSDphY3nva4NCiAgICAgIHRhYmxlQ29uZmlnOiB7DQogICAgICAgIHJlbmRlcmVyczogew0KICAgICAgICAgIC8vIOe8lui+kSDpmYTku7Yg5pON5L2c5pel5b+XDQogICAgICAgICAgJHBheVZvdWNoZXJJbnB1dEdsb2FibGVPcHRpb25Sb3c6IHByb2NvbmYuZ2xvYWJsZU9wdGlvblJvdw0KICAgICAgICB9LA0KICAgICAgICBtZXRob2RzOiB7DQogICAgICAgICAgb25PcHRpb25Sb3dDbGljazogdGhpcy5vbk9wdGlvblJvd0NsaWNrDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBidXNpbmVzc01vZHVsZTogJycsDQogICAgICBidXNpbmVzc01vZHVsZW9wdGlvbnM6IFsNCiAgICAgICAgeyB2YWx1ZTogJzEnLCBsYWJlbDogJzYxMDAwMDAwMC3pmZXopb/nnIHmnKznuqcnIH0sDQogICAgICAgIHsgdmFsdWU6ICcyJywgbGFiZWw6ICc2MTAxMDAwMDAt6KW/5a6J5biC5pys57qnJyB9LA0KICAgICAgICB7IHZhbHVlOiAnMycsIGxhYmVsOiAnNjEwMTAyMDAwLeaWsOWfjuWMuuacrOe6pycgfSwNCiAgICAgICAgeyB2YWx1ZTogJzQnLCBsYWJlbDogJzYxMDEwMjk5OC3mlrDln47ljLrovpbljLonIH0NCiAgICAgIF0sDQogICAgICBidXNpbmVzc0Z1bmN0aW9uOiAnJywNCiAgICAgIGJ1c2luZXNzRnVuY3Rpb25vcHRpb25zOiBbDQogICAgICAgIHsgdmFsdWU6ICcxJywgbGFiZWw6ICcwMDAwMDEt6aKE566X5aSE6aKE55WZJyB9LA0KICAgICAgICB7IHZhbHVlOiAnMicsIGxhYmVsOiAnMDAxMDAxLeecgee6p+i0ouaUv+S4k+mhuei1hOmHkScgfSwNCiAgICAgICAgeyB2YWx1ZTogJzMnLCBsYWJlbDogJzYxMDEwMjAwMC3mlrDln47ljLrmnKznuqcnIH0sDQogICAgICAgIHsgdmFsdWU6ICc0JywgbGFiZWw6ICc2MTAxMDI5OTgt5paw5Z+O5Yy66L6W5Yy6JyB9DQogICAgICBdLA0KICAgICAgd2FybmluZ0xldmVsOiAnJywNCiAgICAgIHdhcm5pbmdMZXZlbG9wdGlvbnM6IHRoaXMuJHN0b3JlLnN0YXRlLndhcm5JbmZvLndhcm5MZXZlbE9wdGlvbnMsDQogICAgICBoYW5kbGVUeXBlOiAnJywNCiAgICAgIGhhbmRsZVR5cGVvcHRpb25zOiB0aGlzLiRzdG9yZS5zdGF0ZS53YXJuSW5mby53YXJuQ29udHJvbFR5cGVPcHRpb25zLA0KICAgICAgaXNFbmFibGU6ICcnLA0KICAgICAgaXNFbmFibGVvcHRpb25zOiBbDQogICAgICAgIHsgdmFsdWU6IDAsIGxhYmVsOiAn5ZCmJyB9LA0KICAgICAgICB7IHZhbHVlOiAxLCBsYWJlbDogJ+aYrycgfQ0KICAgICAgXSwNCiAgICAgIHBvbGljaWVzTmFtZTogJycsDQogICAgICBwb2xpY2llc0Rlc2NyaXB0aW9uOiAnJywNCiAgICAgIGRpYWxvZ1Zpc2libGU6IHRydWUsDQogICAgICBhZGRMb2FkaW5nOiBmYWxzZSwNCiAgICAgIHRva2VuOiAnJywNCiAgICAgIGlzQ29udGludWl0eTogZmFsc2UsDQogICAgICAvLyDmlofku7bkuIrkvKDnm7jlhbPlj4LmlbANCiAgICAgIGZpbGVMaXN0OiBbXSwNCiAgICAgIGZpbGVEYXRhOiBbXSwNCiAgICAgIGZpbGVEYXRhQmFrRGVsOiBbXSwNCiAgICAgIGF0dGFjaG1lbnRJZDogJycsDQogICAgICBzaG93Ym94OiBmYWxzZSwNCiAgICAgIGJ1c2luZXNzU3lzdGVtQ29kZTogJycsDQogICAgICBidXNpbmVzc1N5c3RlbU5hbWU6ICcnLA0KICAgICAgYnVzaW5lc3NTeXN0ZW1Db2Rlb3B0aW9uczogW10sDQogICAgICBidXNpbmVzc01vZHVsZUNvZGU6ICcnLA0KICAgICAgYnVzaW5lc3NNb2R1bGVOYW1lOiAnJywNCiAgICAgIGJ1c2luZXNzTW9kdWxlQ29kZW9wdGlvbnM6IFtdLA0KICAgICAgYnVzaW5lc3NGdW5jdGlvbkNvZGU6IFtdLA0KICAgICAgYnVzaW5lc3NGdW5jdGlvbk5hbWU6ICcnLA0KICAgICAgYnVzaW5lc3NGdW5jdGlvbkNvZGVvcHRpb25zOiBbXSwNCiAgICAgIFN5c3BhcmVudElkOiAwLA0KICAgICAgTW9kcGFyZW50SWQ6IDAsDQogICAgICByZWd1bGF0aW9uQ2xhc3M6ICcnLA0KICAgICAgcmVndWxhdGlvbkNsYXNzb3B0aW9uczogW10sDQogICAgICB0cmlnZ2VyQ2xhc3M6IDEsDQogICAgICB0cmlnZ2VyQ2xhc3NvcHRpb25zOiBbDQogICAgICAgIHsgdmFsdWU6IDEsIGxhYmVsOiAn5a6e5pe26Kem5Y+RJyB9LA0KICAgICAgICB7IHZhbHVlOiAyLCBsYWJlbDogJ+WumuaXtuinpuWPkScgfQ0KICAgICAgXSwNCiAgICAgIHJ1bGVEaXNhYmxlZDogZmFsc2UsDQogICAgICBmb3JtSXRlbXNDb25maWdNZXNzYWdlOiBwcm9jb25mLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2UsDQogICAgICBwYXltZW50TGVuOiAwLA0KICAgICAgcGF5bWVudERhdGE6IFtdLA0KICAgICAgZm9ybURhdGFzOiB7DQogICAgICAgIHVzZURlczogJycsDQogICAgICAgIHBheWVlQWNjdE5vOiAnJywNCiAgICAgICAgcGF5ZWVBY2N0TmFtZTogJycsDQogICAgICAgIGRlczogJycsDQogICAgICAgIGJhc2lzOiAnJw0KICAgICAgfSwNCiAgICAgIGZvcm1WYWxpZGF0aW9uQ29uZmlnTWVzc2FnZTogcHJvY29uZi5mb3JtVmFsaWRhdGlvbkNvbmZpZ01lc3NhZ2UsDQogICAgICByZWd1bGF0aW9uQ2xhc3NOYW1lOiAnJywNCiAgICAgIGRlZmF1bHRDaGVja2VkS2V5czogW10NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBjaG9vc2VXYXJuaW5nTGV2ZWwodmFsKSB7DQogICAgICBpZiAodmFsID09PSAxKSB7DQogICAgICAgIHRoaXMuaGFuZGxlVHlwZSA9IDENCiAgICAgIH0gZWxzZSBpZiAodmFsID09PSAyKSB7DQogICAgICAgIHRoaXMuaGFuZGxlVHlwZSA9IDINCiAgICAgIH0gZWxzZSBpZiAodmFsID09PSAzKSB7DQogICAgICAgIHRoaXMuaGFuZGxlVHlwZSA9IDMNCiAgICAgIH0gZWxzZSBpZiAodmFsID09PSA0KSB7DQogICAgICAgIHRoaXMuaGFuZGxlVHlwZSA9IDQNCiAgICAgIH0NCiAgICB9LA0KICAgIGNob29zZVRyaWdnZXJDbGFzcyh2YWwpIHsNCiAgICAgIGlmICh2YWwgPT09IDIpIHsNCiAgICAgICAgdGhpcy53YXJuaW5nTGV2ZWwgPSA0DQogICAgICAgIHRoaXMuaGFuZGxlVHlwZSA9IDQNCiAgICAgIH0NCiAgICAgIGlmICh2YWwgPT09IDEpIHsNCiAgICAgICAgdGhpcy53YXJuaW5nTGV2ZWwgPSAxDQogICAgICAgIHRoaXMuaGFuZGxlVHlwZSA9IDENCiAgICAgIH0NCiAgICB9LA0KICAgIGNob29zZWhhbmRsZVR5cGUodmFsKSB7DQogICAgICBpZiAodmFsID09PSAxKSB7DQogICAgICAgIHRoaXMud2FybmluZ0xldmVsID0gMQ0KICAgICAgfSBlbHNlIGlmICh2YWwgPT09IDIpIHsNCiAgICAgICAgdGhpcy53YXJuaW5nTGV2ZWwgPSAyDQogICAgICB9IGVsc2UgaWYgKHZhbCA9PT0gMykgew0KICAgICAgICB0aGlzLndhcm5pbmdMZXZlbCA9IDMNCiAgICAgIH0gZWxzZSBpZiAodmFsID09PSA0KSB7DQogICAgICAgIHRoaXMud2FybmluZ0xldmVsID0gNA0KICAgICAgfQ0KICAgIH0sDQogICAgc2VsZWN0UnVsZSh2YWwpIHsNCiAgICAgIGxldCB2YWxBcnIgPSB2YWwuc3BsaXQoJyMjJykNCiAgICAgIHRoaXMucmVndWxhdGlvbkNsYXNzTmFtZSA9IHZhbEFyclsyXQ0KICAgICAgLy8gdGhpcy5yZWd1bGF0aW9uQ2xhc3MgPSB2YWxBcnJbMF0NCiAgICAgIC8vIGxldCBidXNOYW1lID0gdGhpcy5yZWd1bGF0aW9uQ2xhc3NvcHRpb25zLmZpbmQoaXRlbSA9PiB7DQogICAgICAvLyAgIHJldHVybiBpdGVtLmlkID09PSB2YWwNCiAgICAgIC8vIH0pDQogICAgICAvLyB0aGlzLnJlZ3VsYXRpb25DbGFzc05hbWUgPSBidXNOYW1lLnJlZ3VsYXRpb25DbGFzc05hbWUNCiAgICAgIC8vIHRoaXMucmVndWxhdGlvbkNsYXNzID0gYnVzTmFtZS5yZWd1bGF0aW9uQ2xhc3MNCiAgICB9LA0KICAgIGZvcm1JdGVtQ2hhbmdlKG9iaikgew0KICAgICAgaWYgKG9iai5wcm9wZXJ0eSA9PT0gJ3BheW1lbnQnKSB7DQogICAgICAgIGxldCBkYXRhID0gb2JqLml0ZW1WYWx1ZSA/IG9iai5pdGVtVmFsdWUuc3BsaXQoJywnKSA6ICcnDQogICAgICAgIGxldCBjb250ZW50ID0gdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlWzBdLml0ZW1SZW5kZXIub3B0aW9ucw0KICAgICAgICB0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2Uuc3BsaWNlKDEsIHRoaXMucGF5bWVudExlbikNCiAgICAgICAgaWYgKHRoaXMucGF5bWVudERhdGEpIHsNCiAgICAgICAgICBpZiAoZGF0YS5sZW5ndGggPCB0aGlzLnBheW1lbnRMZW4pIHsNCiAgICAgICAgICAgIHRoaXMucGF5bWVudERhdGEuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgaWYgKGRhdGEuaW5kZXhPZihpdGVtKSA9PT0gLTEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhc1t0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2VbMF0uaXRlbVJlbmRlci5vcHRpb25zW2l0ZW1dLm5hbWUgKyAnX192aWV3U29ydCddID0gJycNCiAgICAgICAgICAgICAgICB0aGlzLmZvcm1EYXRhc1t0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2VbMF0uaXRlbVJlbmRlci5vcHRpb25zW2l0ZW1dLm5hbWUgKyAnY29kZV9fbXVsdGlwbGUnXSA9IFtdDQogICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXNbdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlWzBdLml0ZW1SZW5kZXIub3B0aW9uc1tpdGVtXS5uYW1lICsgJ2lkJ10gPSAnJw0KICAgICAgICAgICAgICAgIHRoaXMuZm9ybURhdGFzW3RoaXMuZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZVswXS5pdGVtUmVuZGVyLm9wdGlvbnNbaXRlbV0ubmFtZSArICdpZF9fbXVsdGlwbGUnXSA9IFtdDQogICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXNbdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlWzBdLml0ZW1SZW5kZXIub3B0aW9uc1tpdGVtXS5uYW1lICsgJ25hbWUnXSA9ICcnDQogICAgICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXNbdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlWzBdLml0ZW1SZW5kZXIub3B0aW9uc1tpdGVtXS5uYW1lICsgJ25hbWVfX211bHRpcGxlJ10gPSBbXQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnBheW1lbnREYXRhID0gZGF0YQ0KICAgICAgICB0aGlzLnBheW1lbnRMZW4gPSBkYXRhLmxlbmd0aA0KICAgICAgICBsZXQgZGF0YXMgPSB7fQ0KICAgICAgICBkYXRhLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgICAgaWYgKGl0ZW0gPT09ICcxJykgew0KICAgICAgICAgICAgZGF0YXMgPSB0aGlzLmNyZWF0ZVBybyhjb250ZW50W2l0ZW1dLCBmYWxzZSkNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgZGF0YXMgPSB0aGlzLmNyZWF0ZU9iaihjb250ZW50W2l0ZW1dLCBmYWxzZSkNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlLnNwbGljZSgxICsgaW5kZXgsIDAsIGRhdGFzKQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgY3JlYXRlUHJvKG9iaiwgZGlzYWJsZWQpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGluc2VydE1hcms6IG9iai5sYWJlbCwNCiAgICAgICAgaXNOZXc6IHRydWUsDQogICAgICAgIHRpdGxlOiBvYmoubGFiZWwsDQogICAgICAgIGZpZWxkOiBvYmoubmFtZSwNCiAgICAgICAgYWxpZ246ICdsZWZ0JywNCiAgICAgICAgdGl0bGVfX3ZpZXdTb3J0OiBvYmoubGFiZWwsDQogICAgICAgIGZpZWxkX192aWV3U29ydDogb2JqLm5hbWUsDQogICAgICAgIG5hbWU6ICckdnhlVHJlZScsDQogICAgICAgIGl0ZW1SZW5kZXI6IHsNCiAgICAgICAgICBuYW1lOiAnJHZ4ZVRyZWUnLA0KICAgICAgICAgIG9wdGlvbnM6IFtdLA0KICAgICAgICAgIHByb3BzOiB7DQogICAgICAgICAgICBjb25maWc6IHsNCiAgICAgICAgICAgICAgdHJlZVByb3BzOiB7DQogICAgICAgICAgICAgICAgbGFiZWxGb3JtYXQ6ICd7Y29kZX0te25hbWV9JywNCiAgICAgICAgICAgICAgICBub2RlS2V5OiAnY29kZScsDQogICAgICAgICAgICAgICAgbGFiZWw6ICduYW1lJywNCiAgICAgICAgICAgICAgICBjaGlsZHJlbjogJ2NoaWxkcmVuJyAvLyDlrZDnuqflrZfmrrXlkI0NCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IGDor7fpgInmi6kke29iai5sYWJlbH1gLA0KICAgICAgICAgICAgICBtdWx0aXBsZTogdHJ1ZSwNCiAgICAgICAgICAgICAgZGlzYWJsZWQsDQogICAgICAgICAgICAgIGlzbGVhZjogZmFsc2UsDQogICAgICAgICAgICAgIGF4aW9zQ29uZmlnOiB7DQogICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsDQogICAgICAgICAgICAgICAgdXJsOiAnbGFyZ2UtbW9uaXRvci1wbGF0Zm9ybS9sbXAvZWxlbWVudFF1ZXJ5L2VsZW1lbnR0cmVlJywNCiAgICAgICAgICAgICAgICBzdWNjZXNzQ29kZTogJzAwMDAwMCcsIC8vIOaIkOWKn2NvZGUNCiAgICAgICAgICAgICAgICBzdGF0dXNGaWVsZDogJ2NvZGUnDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBxdWVyeXBhcmFtczogew0KICAgICAgICAgICAgICBjb25kaXRpb246ICcnLA0KICAgICAgICAgICAgICBlbGVtZW50Q29kZTogJ3BybycsDQogICAgICAgICAgICAgIHllYXI6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLnllYXIsDQogICAgICAgICAgICAgIHByb3ZpbmNlOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby5wcm92aW5jZSwNCiAgICAgICAgICAgICAgbGltaXQ6IDIwMDAsDQogICAgICAgICAgICAgIG9mZnNldDogMQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgY3JlYXRlT2JqKG9iaiwgZGlzYWJsZWQpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGluc2VydE1hcms6IG9iai5sYWJlbCwNCiAgICAgICAgaXNOZXc6IHRydWUsDQogICAgICAgIHRpdGxlOiBvYmoubGFiZWwsDQogICAgICAgIGZpZWxkOiBvYmoubmFtZSwNCiAgICAgICAgYWxpZ246ICdsZWZ0JywNCiAgICAgICAgdGl0bGVfX3ZpZXdTb3J0OiBvYmoubGFiZWwsDQogICAgICAgIGZpZWxkX192aWV3U29ydDogb2JqLm5hbWUsDQogICAgICAgIG5hbWU6ICckdnhlVHJlZScsDQogICAgICAgIGl0ZW1SZW5kZXI6IHsNCiAgICAgICAgICBuYW1lOiAnJHZ4ZVRyZWUnLA0KICAgICAgICAgIG9wdGlvbnM6IFtdLA0KICAgICAgICAgIHByb3BzOiB7DQogICAgICAgICAgICBjb25maWc6IHsNCiAgICAgICAgICAgICAgdHJlZVByb3BzOiB7DQogICAgICAgICAgICAgICAgbm9kZUtleTogJ2lkJywNCiAgICAgICAgICAgICAgICBsYWJlbDogJ3RleHQnLA0KICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nIC8vIOWtkOe6p+Wtl+auteWQjQ0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogYOivt+mAieaLqSR7b2JqLmxhYmVsfWAsDQogICAgICAgICAgICAgIGRpc2FibGVkLA0KICAgICAgICAgICAgICBtdWx0aXBsZTogdHJ1ZSwNCiAgICAgICAgICAgICAgaXNsZWFmOiBmYWxzZSwNCiAgICAgICAgICAgICAgYXhpb3NDb25maWc6IHsNCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdnZXQnLA0KICAgICAgICAgICAgICAgIHVybDogYG1wLWItYmFzZWRhdGEtc2VydmljZS92Mi9lbGV2YWx1ZXNldC92aWV3L2pzdHJlZWRhdGEvJHtvYmoudXJsQ31gDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBxdWVyeXBhcmFtczogew0KICAgICAgICAgICAgICB0b2tlbmlkOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldExvZ2luQXV0aGVudGljYXRpb24udG9rZW5pZCwNCiAgICAgICAgICAgICAgYXBwZ3VpZDogJ2FwYWFzJywNCiAgICAgICAgICAgICAgeWVhcjogdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ueWVhciwNCiAgICAgICAgICAgICAgbW9mRGl2Q29kZTogdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ucHJvdmluY2UsDQogICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHt9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICAvLyB0YWLliIfmjaINCiAgICB0YWJDbGljayhpbmRleCkgew0KICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IGluZGV4DQogICAgICBpZiAodGhpcy5hY3RpdmVJbmRleCA9PT0gMCkgew0KICAgICAgICB0aGlzLnJ1bGVTZXRTaG93ID0gdHJ1ZQ0KICAgICAgICB0aGlzLnJ1bGVEZXNTaG93ID0gZmFsc2UNCiAgICAgICAgdGhpcy5hcHBTZXRTaG93ID0gZmFsc2UNCiAgICAgICAgdGhpcy5lZmZlY3RpdmVTaG93ID0gZmFsc2UNCiAgICAgICAgdGhpcy5hdWRpdFNob3cgPSBmYWxzZQ0KICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZUluZGV4ID09PSAxKSB7DQogICAgICAgIHRoaXMucnVsZVNldFNob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLnJ1bGVEZXNTaG93ID0gdHJ1ZQ0KICAgICAgICB0aGlzLmFwcFNldFNob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLmVmZmVjdGl2ZVNob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLmF1ZGl0U2hvdyA9IGZhbHNlDQogICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0aXZlSW5kZXggPT09IDIpIHsNCiAgICAgICAgdGhpcy5ydWxlU2V0U2hvdyA9IGZhbHNlDQogICAgICAgIHRoaXMucnVsZURlc1Nob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLmFwcFNldFNob3cgPSB0cnVlDQogICAgICAgIHRoaXMuZWZmZWN0aXZlU2hvdyA9IGZhbHNlDQogICAgICAgIHRoaXMuYXVkaXRTaG93ID0gZmFsc2UNCiAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3RpdmVJbmRleCA9PT0gMykgew0KICAgICAgICB0aGlzLnJ1bGVTZXRTaG93ID0gZmFsc2UNCiAgICAgICAgdGhpcy5ydWxlRGVzU2hvdyA9IGZhbHNlDQogICAgICAgIHRoaXMuYXBwU2V0U2hvdyA9IGZhbHNlDQogICAgICAgIHRoaXMuZWZmZWN0aXZlU2hvdyA9IHRydWUNCiAgICAgICAgdGhpcy5hdWRpdFNob3cgPSBmYWxzZQ0KICAgICAgfSBlbHNlIGlmICh0aGlzLmFjdGl2ZUluZGV4ID09PSA0KSB7DQogICAgICAgIHRoaXMucnVsZVNldFNob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLnJ1bGVEZXNTaG93ID0gZmFsc2UNCiAgICAgICAgdGhpcy5hcHBTZXRTaG93ID0gZmFsc2UNCiAgICAgICAgdGhpcy5lZmZlY3RpdmVTaG93ID0gZmFsc2UNCiAgICAgICAgdGhpcy5hdWRpdFNob3cgPSB0cnVlDQogICAgICB9DQogICAgfSwNCiAgICBnZXRDaGlsZHJlbk5ld0RhdGEoZGF0YXMpIHsNCiAgICAgIGxldCB0aGF0ID0gdGhpcw0KICAgICAgZGF0YXMuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaXRlbS5sYWJlbCA9IGl0ZW0udGV4dA0KICAgICAgICAvLyBpdGVtLmNvZGUgPSBpdGVtLmlkYQ0KICAgICAgICAvLyBpdGVtLmd1aWQgPSBpdGVtLmlkDQogICAgICAgIC8vIGl0ZW0ubmFtZSA9IGl0ZW0udGV4dA0KICAgICAgICBpdGVtLmRpc2FibGVkID0gdHJ1ZQ0KICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbikgew0KICAgICAgICAgIHRoYXQuZ2V0Q2hpbGRyZW5OZXdEYXRhKGl0ZW0uY2hpbGRyZW4pDQogICAgICAgIH0NCiAgICAgIH0pDQoNCiAgICAgIHJldHVybiBkYXRhcw0KICAgIH0sDQogICAgc2VhcmNoKCkgew0KICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKQ0KICAgIH0sDQogICAgZ2V0VGFibGVEYXRhKHZhbCkgew0KICAgICAgbGV0IHRoYXQgPSB0aGlzDQogICAgICB0aGF0LnRhYmxlTG9hZGluZyA9IHRydWUNCiAgICAgIGxldCBwYXJhbSA9IHsNCiAgICAgICAgcGFnZTogMSwNCiAgICAgICAgcGFnZVNpemU6IDUwMCwNCiAgICAgICAgLi4udGhhdC5zZWFyY2hEYXRhTGlzdA0KICAgICAgfQ0KICAgICAgSHR0cE1vZHVsZS5nZXRQYWdlUXVlcnkocGFyYW0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMDAwMDAwJyAmJiByZXMuZGF0YS5yZXN1bHRzKSB7DQogICAgICAgICAgdGhhdC5vcGVyYXRpb25UYWJsZURhdGEgPSByZXMuZGF0YS5yZXN1bHRzDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhhdC4kbWVzc2FnZS53YXJuaW5nKCfliqDovb3lpLHotKUnKQ0KICAgICAgICB9DQogICAgICAgIHRoYXQudGFibGVMb2FkaW5nID0gZmFsc2UNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDpq5jnuqfmn6Xor6LkuIvmi4nmoYYNCiAgICBpdGVtQ2hhbmdlKG9iaiwgZm9ybSkgew0KICAgICAgY29uc29sZS5sb2cob2JqLCBmb3JtKQ0KICAgICAgaWYgKG9iai5wcm9wZXJ0eSA9PT0gJ2J1c2luZXNzU3lzdGVtTmFtZScpIHsNCiAgICAgICAgdGhpcy5nZXRCdXNpbmVzc01vZGVsQ29kZURhdGFzKHsgYnVzaW5lc3NUeXBlOiAnMicsIHBhcmVudElkOiBvYmoubm9kZS5pZCB9KQ0KICAgICAgfQ0KICAgICAgaWYgKG9iai5wcm9wZXJ0eSA9PT0gJ2J1c2luZXNzTW9kdWxlTmFtZScpIHsNCiAgICAgICAgdGhpcy5nZXRCdXNpbmVzc01vZGVsQ29kZURhdGFzKHsgYnVzaW5lc3NUeXBlOiAnMycsIHBhcmVudElkOiBvYmoubm9kZS5pZCB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgb25Ob2RlQ2hlY2tDbGljayhkYXRhKSB7DQogICAgICBjb25zb2xlLmxvZyhkYXRhLm5vZGVzKQ0KICAgICAgbGV0IGFyciA9IFtdDQoNCiAgICAgIGxldCByZWd1bGF0aW9uVHlwZSA9IHRoaXMuJHN0b3JlLnN0YXRlLmN1ck5hdk1vZHVsZS5mX0Z1bGxOYW1lLnN1YnN0cmluZygwLCAzKQ0KICAgICAgaWYgKHJlZ3VsYXRpb25UeXBlID09PSAn57O757uf57qnJykgew0KICAgICAgICBkYXRhLm5vZGVzLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgaWYgKGl0ZW0uaXNsZWFmKSB7DQogICAgICAgICAgICBsZXQgb2JqID0gew0KICAgICAgICAgICAgICBtb2ZEaXZDb2RlOiAnJywNCiAgICAgICAgICAgICAgYWdlbmN5Q29kZTogJycsDQogICAgICAgICAgICAgIG1vZkRpdjogJycNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG9iai5tb2ZEaXZJZCA9IGl0ZW0uY29kZQ0KICAgICAgICAgICAgb2JqLm1vZkRpdkNvZGUgPSBpdGVtLm5hbWUuc3BsaXQoJy0nKVswXQ0KICAgICAgICAgICAgYXJyLnB1c2gob2JqKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0gZWxzZSBpZiAocmVndWxhdGlvblR5cGUgPT09ICfpg6jpl6jnuqcnKSB7DQogICAgICAgIGRhdGEubm9kZXMuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICBpZiAoaXRlbS5pc2xlYWYpIHsNCiAgICAgICAgICAgIGxldCBvYmogPSB7DQogICAgICAgICAgICAgIG1vZkRpdkNvZGU6ICcnLA0KICAgICAgICAgICAgICBhZ2VuY3lDb2RlOiAnJw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgb2JqLm1vZkRpdklkID0gaXRlbS5jb2RlDQogICAgICAgICAgICBhcnIucHVzaChvYmopDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfSBlbHNlIGlmIChyZWd1bGF0aW9uVHlwZSA9PT0gJ+i0ouaUv+e6pycpIHsNCiAgICAgICAgZGF0YS5ub2Rlcy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAgIGlmIChpdGVtLmlzbGVhZikgew0KICAgICAgICAgICAgbGV0IG9iaiA9IHsNCiAgICAgICAgICAgICAgbW9mRGl2Q29kZTogJycsDQogICAgICAgICAgICAgIGFnZW5jeUNvZGU6ICcnDQogICAgICAgICAgICB9DQogICAgICAgICAgICBvYmoubW9mRGl2SWQgPSBpdGVtLmNvZGUNCiAgICAgICAgICAgIG9iai5tb2ZEaXZDb2RlID0gaXRlbS5uYW1lLnNwbGl0KCctJylbMF0NCiAgICAgICAgICAgIGFyci5wdXNoKG9iaikNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9DQogICAgICBjb25zb2xlLmxvZygnYXJyJywgYXJyKQ0KICAgICAgdGhpcy5zY29wZSA9IGFycg0KICAgIH0sDQogICAgZ2V0Q2hpbGRyZW5EYXRhKGRhdGFzKSB7DQogICAgICBsZXQgdGhhdCA9IHRoaXMNCiAgICAgIGRhdGFzLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGl0ZW0uY29kZSA9IGl0ZW0uaWQNCiAgICAgICAgaXRlbS5uYW1lID0gaXRlbS5idXNpbmVzc05hbWUNCiAgICAgICAgaXRlbS5sYWJlbCA9IGl0ZW0uaWQgKyAnLScgKyBpdGVtLmJ1c2luZXNzTmFtZQ0KICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbikgew0KICAgICAgICAgIHRoYXQuZ2V0Q2hpbGRyZW5EYXRhKGl0ZW0uY2hpbGRyZW4pDQogICAgICAgIH0NCiAgICAgIH0pDQoNCiAgICAgIHJldHVybiBkYXRhcw0KICAgIH0sDQogICAgLy8gLy8g6I635Y+W5Lia5Yqh5qih5Z2XDQogICAgZ2V0QnVzaW5lc3NNb2RlbENvZGVEYXRhcyh2YWwpIHsNCiAgICAgIGxldCB0aGF0ID0gdGhpcw0KICAgICAgSHR0cE1vZHVsZS5nZXRCdXNpbmVzc1RyZWVEYXRhKHZhbCkudGhlbihyZXMgPT4gew0KICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwMDAwMDAnICYmIHJlcy5kYXRhLnJlc3VsdHMpIHsNCiAgICAgICAgICBsZXQgdHJlZVJlc2RhdGEgPSB0aGF0LmdldENoaWxkcmVuRGF0YShyZXMuZGF0YS5yZXN1bHRzKQ0KICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgaWQ6ICdyb290JywNCiAgICAgICAgICAgICAgbGFiZWw6ICflhajpg6gnLA0KICAgICAgICAgICAgICBjb2RlOiAncm9vdCcsDQogICAgICAgICAgICAgIG5hbWU6ICflhajpg6gnLA0KICAgICAgICAgICAgICBpc2xlYWY6ICcwJywNCiAgICAgICAgICAgICAgY2hpbGRyZW46IHRyZWVSZXNkYXRhDQogICAgICAgICAgICB9DQogICAgICAgICAgXQ0KICAgICAgICAgIGlmICh2YWwuYnVzaW5lc3NUeXBlID09PSAnMScpIHsNCiAgICAgICAgICAgIHRoYXQucXVlcnlDb25maWcuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT09ICdidXNpbmVzc1N5c3RlbU5hbWUnKSB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdCcsIHJlc3VsdCkNCiAgICAgICAgICAgICAgICBpdGVtLml0ZW1SZW5kZXIub3B0aW9ucyA9IHJlc3VsdA0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0gZWxzZSBpZiAodmFsLmJ1c2luZXNzVHlwZSA9PT0gJzInKSB7DQogICAgICAgICAgICB0aGF0LnF1ZXJ5Q29uZmlnLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgIGlmIChpdGVtLmZpZWxkID09PSAnYnVzaW5lc3NNb2R1bGVOYW1lJykgew0KICAgICAgICAgICAgICAgIGl0ZW0uaXRlbVJlbmRlci5vcHRpb25zID0gcmVzdWx0DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfSBlbHNlIGlmICh2YWwuYnVzaW5lc3NUeXBlID09PSAnMycpIHsNCiAgICAgICAgICAgIHRoYXQucXVlcnlDb25maWcuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAgICAgaWYgKGl0ZW0uZmllbGQgPT09ICdidXNpbmVzc0Z1bmN0aW9uTmFtZScpIHsNCiAgICAgICAgICAgICAgICBpdGVtLml0ZW1SZW5kZXIub3B0aW9ucyA9IHJlc3VsdA0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGF0LiRtZXNzYWdlLndhcm5pbmcoJ+WKoOi9veWksei0pScpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICByZXNldEZvcm1EYXRhTGlzdE1lc3NhZ2UoKSB7DQogICAgICBsZXQgcGF5bWVudHNBcnIgPSBbJ21vbml0b3JlJywgJ2FnZW5jeV9jb2RlJywgJ3Byb19uYW1lJywgJ2JndF90eXBlX2NvZGUnLCAnYmd0X3NvdXJjZV9jb2RlJywgJ2dvdl9iZ3RfZWNvX2NvZGUnLCAnZXhwX2Z1bmNfY29kZScsICdjb3JfYmd0X2RvY19ub19uYW1lJ10NCiAgICAgIHBheW1lbnRzQXJyLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIHRoaXMuZm9ybURhdGFzW2l0ZW0gKyAnX192aWV3U29ydCddID0gJycNCiAgICAgICAgdGhpcy5mb3JtRGF0YXNbaXRlbSArICdjb2RlJ10gPSAnJw0KICAgICAgICB0aGlzLmZvcm1EYXRhc1tpdGVtICsgJ2NvZGVfX211bHRpcGxlJ10gPSBbXQ0KICAgICAgICB0aGlzLmZvcm1EYXRhc1tpdGVtICsgJ2lkJ10gPSAnJw0KICAgICAgICB0aGlzLmZvcm1EYXRhc1tpdGVtICsgJ2lkX19tdWx0aXBsZSddID0gW10NCiAgICAgICAgdGhpcy5mb3JtRGF0YXNbaXRlbSArICduYW1lJ10gPSAnJw0KICAgICAgICB0aGlzLmZvcm1EYXRhc1tpdGVtICsgJ25hbWVfX211bHRpcGxlJ10gPSBbXQ0KICAgICAgfSkNCiAgICAgIHRoaXMuZm9ybURhdGFzLnBheW1lbnQgPSBbXQ0KICAgICAgdGhpcy5mb3JtRGF0YXMucGF5bWVudF9fbXVsdGlwbGUgPSBbXQ0KICAgICAgdGhpcy5mb3JtRGF0YXMuYWdlbmN5X2NvZGUgPSBbXQ0KICAgICAgdGhpcy5mb3JtRGF0YXMucHJvX25hbWUgPSBbXQ0KICAgICAgdGhpcy5mb3JtRGF0YXMuZ292X2JndF9lY29fY29kZSA9IFtdDQogICAgICB0aGlzLmZvcm1EYXRhcy5leHBfZnVuY19jb2RlID0gW10NCiAgICAgIHRoaXMuZm9ybURhdGFzLmNvcl9iZ3RfZG9jX25vX25hbWUgPSBbXQ0KICAgICAgdGhpcy5mb3JtRGF0YXMuZGVwX2JndF9lY29fY29kZSA9IFtdDQogICAgfSwNCiAgICBkaWFsb2dDbG9zZSgpIHsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMucGF5bWVudExlbikNCiAgICAgIHRoaXMuZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZS5zcGxpY2UoMSwgdGhpcy5wYXltZW50TGVuKQ0KICAgICAgdGhpcy5wYXltZW50TGVuID0gMA0KICAgICAgbGV0IGZvcm0gPSB0aGlzLiRyZWZzLm1lc3NhZ2VGb3JtDQogICAgICBmb3JtLmNsZWFyVmFsaWRhdGUoKQ0KICAgICAgdGhpcy5yZXNldEZvcm1EYXRhTGlzdE1lc3NhZ2UoKQ0KICAgICAgdGhpcy4kcGFyZW50LmRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgdGhpcy4kcGFyZW50LnF1ZXJ5VGFibGVEYXRhcygpDQogICAgfSwNCiAgICAvLyDlpITnkIblrZfnrKbkuLINCiAgICBkZWFsd2l0aFN0cihzdHIpIHsNCiAgICAgIGxldCByZXN1bHQgPSAnJw0KICAgICAgaWYgKHN0cikgew0KICAgICAgICBpZiAoc3RyLnN1YnN0cmluZyhzdHIubGVuZ3RoIC0gNykgPT09ICcwMDAwMDAwJykgew0KICAgICAgICAgIHJlc3VsdCA9ICc2MScNCiAgICAgICAgfSBlbHNlIGlmIChzdHIuc3Vic3RyaW5nKHN0ci5sZW5ndGggLSA1KSA9PT0gJzAwMDAwJykgew0KICAgICAgICAgIHJlc3VsdCA9IHN0ci5zdWJzdHJpbmcoMCwgNCkNCiAgICAgICAgfSBlbHNlIGlmIChzdHIuc3Vic3RyaW5nKHN0ci5sZW5ndGggLSAzKSA9PT0gJzAwMCcpIHsNCiAgICAgICAgICByZXN1bHQgPSBzdHIuc3Vic3RyaW5nKDAsIDYpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmVzdWx0ID0gc3RyDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHJlc3VsdA0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0UHJvdmluY2UoZGF0YSkgew0KICAgICAgZGF0YS5jaGlsZHJlbi5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBpZiAoaXRlbS5wcm92aW5jZSA9PT0gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ucHJvdmluY2UpIHsNCiAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ucHJvdmluY2UgPT09ICc2MTAwMDAwMDAnKSB7DQogICAgICAgICAgICBsZXQgYXJyID0gW10NCiAgICAgICAgICAgIGFyci5wdXNoKGRhdGEpDQogICAgICAgICAgICB0aGlzLnRyZWVEYXRhID0gdGhpcy5nZXRDaGlsZHJlbk5ld0RhdGEoYXJyKQ0KICAgICAgICAgICAgbGV0IGRhdGFBcnIgPSBbXQ0KICAgICAgICAgICAgdGhpcy5nZXRDaGVja0RhdGEoZGF0YUFyciwgdGhpcy50cmVlRGF0YSkNCiAgICAgICAgICAgIHRoaXMuc2NvcGUgPSBkYXRhQXJyDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGxldCBhcnIgPSBbXQ0KICAgICAgICAgICAgYXJyLnB1c2goaXRlbSkNCiAgICAgICAgICAgIHRoaXMudHJlZURhdGEgPSB0aGlzLmdldENoaWxkcmVuTmV3RGF0YShhcnIpDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7DQogICAgICAgICAgICAvLyBsZXQgYXJyID0gW10NCiAgICAgICAgICAgIC8vIGFyci5wdXNoKGl0ZW0pDQogICAgICAgICAgICB0aGlzLmdldFByb3ZpbmNlKGl0ZW0pDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0Q2hpbGRyZW5OZXdEYXRhMShkYXRhcykgew0KICAgICAgbGV0IHRoYXQgPSB0aGlzDQogICAgICBkYXRhcy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICBpdGVtLmxhYmVsID0gaXRlbS50ZXh0DQogICAgICAgIGl0ZW0uY29kZSA9IGl0ZW0uaWQNCiAgICAgICAgaXRlbS5ndWlkID0gaXRlbS5pZA0KICAgICAgICBpdGVtLm5hbWUgPSBpdGVtLnRleHQNCiAgICAgICAgaXRlbS5kaXNhYmxlZCA9IHRydWUNCiAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHsNCiAgICAgICAgICB0aGF0LmdldENoaWxkcmVuTmV3RGF0YTEoaXRlbS5jaGlsZHJlbikNCiAgICAgICAgfQ0KICAgICAgfSkNCg0KICAgICAgcmV0dXJuIGRhdGFzDQogICAgfSwNCiAgICAvLyDojrflj5bnlJ/mlYjojIPlm7QNCiAgICBnZXRXaGVyZVRyZWUoKSB7DQogICAgICB0aGlzLmRlZmF1bHRDaGVja2VkS2V5cyA9IFtdDQogICAgICBsZXQgc2VsZiA9IHRoaXMNCiAgICAgIGxldCByZXN1bHQgPSB0aGlzLmRlYWx3aXRoU3RyKHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLnByb3ZpbmNlKQ0KICAgICAgLy8gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ub3JnQ29kZQ0KICAgICAgbGV0IHBhcmFtID0gew0KICAgICAgICB3aGVyZXNxbDogJ2FuZCBjb2RlIGxpa2UgXCcnICsgcmVzdWx0ICsgJyVcJycsDQogICAgICAgIGVsZW1lbnRDb2RlOiAnYWRtZGl2JywNCiAgICAgICAgLy8gZWxlbWVudENvZGU6ICdBR0VOQ1knLA0KICAgICAgICB5ZWFyOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby55ZWFyLA0KICAgICAgICBwcm92aW5jZTogdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ucHJvdmluY2UNCiAgICAgIH0NCiAgICAgIGxldCByZWd1bGF0aW9uVHlwZSA9IHRoaXMuJHN0b3JlLnN0YXRlLmN1ck5hdk1vZHVsZS5mX0Z1bGxOYW1lLnN1YnN0cmluZygwLCAzKQ0KICAgICAgLy8gbGV0IHJlZ3VsYXRpb25UeXBlID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucmVndWxhdGlvblR5cGUNCiAgICAgIGlmIChyZWd1bGF0aW9uVHlwZSA9PT0gJ+mDqOmXqOe6pycpIHsNCiAgICAgICAgcGFyYW0uZWxlbWVudENvZGUgPSAnREVQQVJUTUVOVCcNCiAgICAgICAgcGFyYW0ud2hlcmVzcWwgPSAnYW5kIGNvZGUgbGlrZSBcJycgKyB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby5vcmdjb2RlICsgJyVcJycNCiAgICAgIH0NCiAgICAgIGlmIChyZWd1bGF0aW9uVHlwZSA9PT0gJ+i0ouaUv+e6pycpIHsNCiAgICAgICAgcGFyYW0uZWxlbWVudENvZGUgPSAnQUdFTkNZJw0KICAgICAgICBwYXJhbS53aGVyZXNxbCA9ICdhbmQgcHJvdmluY2UgPScgKyB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby5wcm92aW5jZQ0KICAgICAgfQ0KICAgICAgSHR0cE1vZHVsZS5nZXRUcmVld2hlcmUocGFyYW0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlZ3VsYXRpb25UeXBlID09PSAn6YOo6Zeo57qnJyB8fCByZWd1bGF0aW9uVHlwZSA9PT0gJ+i0ouaUv+e6pycpIHsNCiAgICAgICAgICBjb25zdCByZXN1bHQgPSBbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIGlkOiAncm9vdCcsDQogICAgICAgICAgICAgIGxhYmVsOiAn5YWo6YOoJywNCiAgICAgICAgICAgICAgY29kZTogJ3Jvb3QnLA0KICAgICAgICAgICAgICBpc2xlYWY6ICcwJywNCiAgICAgICAgICAgICAgbmFtZTogJ+WFqOmDqCcsDQogICAgICAgICAgICAgIGNoaWxkcmVuOiB0aGlzLmdldENoaWxkcmVuTmV3RGF0YTEocmVzLmRhdGEpDQogICAgICAgICAgICB9DQogICAgICAgICAgXQ0KICAgICAgICAgIHRoaXMudHJlZURhdGEgPSByZXN1bHQNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnRyZWVEYXRhID0gc2VsZi5nZXRDaGlsZHJlbk5ld0RhdGExKHJlcy5kYXRhKQ0KICAgICAgICAgIC8vIHRoaXMuZ2V0UHJvdmluY2UocmVzLmRhdGFbMF0pDQogICAgICAgIH0NCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgIHNlbGYuJHBhcmVudC5wcm92aW5jZUxpc3QgJiYgc2VsZi4kcmVmcy5yaWdodFRyZWUudHJlZU9wdGlvbkZuKCkuc2V0Q2hlY2tlZEtleXMoc2VsZi4kcGFyZW50LnByb3ZpbmNlTGlzdCkNCiAgICAgICAgfSkNCiAgICAgICAgaWYgKHRoaXMuJHBhcmVudC5kaWFsb2dUaXRsZSAhPT0gJ+aWsOWinicpIHsNCiAgICAgICAgICBsZXQgdGVtcEFyciA9IFtdDQogICAgICAgICAgLy8gbGV0IHJlZ3VsYXRpb25UeXBlID0gdGhpcy4kc3RvcmUuc3RhdGUuY3VyTmF2TW9kdWxlLmZfRnVsbE5hbWUuc3Vic3RyaW5nKDAsIDMpDQogICAgICAgICAgdGhpcy4kcGFyZW50LkRldGFpbERhdGEucmVndWxhdGlvblNjb3BlLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICBsZXQgc3RyID0gaXRlbS5tb2ZEaXZJZC50b1N0cmluZygpDQogICAgICAgICAgICAvLyBpZiAocmVndWxhdGlvblR5cGUgPT09ICfpg6jpl6jnuqcnKSB7DQogICAgICAgICAgICAvLyAgIHN0ciA9IGl0ZW0ubW9mRGl2SWQudG9TdHJpbmcoKQ0KICAgICAgICAgICAgLy8gfSBlbHNlIHsNCiAgICAgICAgICAgIC8vICAgc3RyID0gaXRlbS5tb2ZEaXZJZC50b1N0cmluZygpDQogICAgICAgICAgICAvLyB9DQogICAgICAgICAgICB0ZW1wQXJyLnB1c2goc3RyKQ0KICAgICAgICAgIH0pDQoNCiAgICAgICAgICAvLyB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5yZWd1bGF0aW9uU2NvcGUuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgICAvLyAgIGxldCBzdHIgPSBpdGVtLm1vZkRpdkNvZGUudG9TdHJpbmcoKQ0KICAgICAgICAgIC8vICAgdGVtcEFyci5wdXNoKHN0cikNCiAgICAgICAgICAvLyB9KQ0KICAgICAgICAgIHRoaXMuJHJlZnMucmlnaHRUcmVlLnRyZWVPcHRpb25GbigpLnNldENoZWNrZWRLZXlzKHRlbXBBcnIpDQogICAgICAgICAgdGhpcy5kZWZhdWx0Q2hlY2tlZEtleXMgPSB0ZW1wQXJyDQogICAgICAgICAgY29uc29sZS5sb2codGhpcy50cmVlRGF0YSwgJ2RkZGRkJykNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOS/neWtmOaWsOWinueahOiuoeWIkuS/oeaBrw0KICAgIGRvSW5zZXJ0KCkgew0KICAgIH0sDQogICAgLy8g6YCB5a6hDQogICAgYXVkaWVEYXRhKCkgew0KICAgICAgaWYgKCF0aGlzLnJ1bGVGbG93T3Bpbmlvbikgew0KICAgICAgICB0aGlzLiRYTW9kYWwubWVzc2FnZSh7IHN0YXR1czogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn6K+36L6T5YWl5a6h5om55oSP6KeB77yBJyB9KQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGxldCBvcGVyYXRlID0gMA0KICAgICAgaWYgKHRoaXMuYnV0dG9uVHlwZSA9PT0gJ2FwcHJvdmFsJykgew0KICAgICAgICBvcGVyYXRlID0gMg0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuYnV0dG9uVHlwZSA9PT0gJ3NlbmRCYWNrJykgew0KICAgICAgICBvcGVyYXRlID0gNA0KICAgICAgfQ0KICAgICAgbGV0IHBhcmFtID0geyBvcGVyYXRlOiBvcGVyYXRlLCBtZW51TmFtZTogdGhpcy4kc3RvcmUuc3RhdGUuY3VyTmF2TW9kdWxlLm5hbWUsIHJlZ3VsYXRpb25Db2RlczogW3RoaXMuJHBhcmVudC5EZXRhaWxEYXRhLnJlZ3VsYXRpb25Db2RlXSwgcnVsZUZsb3dPcGluaW9uOiB0aGlzLnJ1bGVGbG93T3BpbmlvbiB9DQogICAgICBIdHRwTW9kdWxlLmF1ZGllRGF0YShwYXJhbSkudGhlbihyZXMgPT4gew0KICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwMDAwMDAnKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmk43kvZzmiJDlip8nKQ0KICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucGF5bWVudExlbikNCiAgICAgICAgICB0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2Uuc3BsaWNlKDEsIHRoaXMucGF5bWVudExlbikNCiAgICAgICAgICB0aGlzLnBheW1lbnRMZW4gPSAwDQogICAgICAgICAgbGV0IGZvcm0gPSB0aGlzLiRyZWZzLm1lc3NhZ2VGb3JtDQogICAgICAgICAgZm9ybS5jbGVhclZhbGlkYXRlKCkNCiAgICAgICAgICB0aGlzLnJlc2V0Rm9ybURhdGFMaXN0TWVzc2FnZSgpDQogICAgICAgICAgdGhpcy4kcGFyZW50LmRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICAgIHRoaXMuJHBhcmVudC5xdWVyeVRhYmxlRGF0YXMoKQ0KICAgICAgICAgIHRoaXMuJHBhcmVudC5xdWVyeVRhYmxlRGF0YXNDb3VudCgpDQogICAgICAgICAgLy8gdGhpcy5xdWVyeVRhYmxlRGF0YXMoKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g6YCJ5oup5Lia5Yqh57O757ufDQogICAgY2hhbmdlU3lzQ29kZSh2YWwpIHsNCiAgICAgIGNvbnNvbGUubG9nKHZhbCkNCiAgICAgIHRoaXMuU3lzcGFyZW50SWQgPSB2YWwNCiAgICAgIHRoaXMuYnVzaW5lc3NNb2R1bGVDb2RlID0gJycNCiAgICAgIGxldCBidXNOYW1lID0gdGhpcy5idXNpbmVzc1N5c3RlbUNvZGVvcHRpb25zLmZpbmQoaXRlbSA9PiB7DQogICAgICAgIHJldHVybiBpdGVtLmlkID09PSB2YWwNCiAgICAgIH0pDQogICAgICB0aGlzLmJ1c2luZXNzU3lzdGVtTmFtZSA9IGJ1c05hbWUuYnVzaW5lc3NOYW1lDQogICAgICB0aGlzLmdldE1vZExpc3RzKCkNCiAgICB9LA0KICAgIC8vIOmAieaLqeS4muWKoeaooeWdlw0KICAgIGNoYW5nZU1vZENvZGUodmFsKSB7DQogICAgICB0aGlzLk1vZHBhcmVudElkID0gdmFsDQogICAgICBsZXQgYnVzTmFtZSA9IHRoaXMuYnVzaW5lc3NNb2R1bGVDb2Rlb3B0aW9ucy5maW5kKGl0ZW0gPT4gew0KICAgICAgICByZXR1cm4gaXRlbS5pZCA9PT0gdmFsDQogICAgICB9KQ0KICAgICAgdGhpcy5idXNpbmVzc01vZHVsZU5hbWUgPSBidXNOYW1lLmJ1c2luZXNzTmFtZQ0KICAgICAgdGhpcy5idXNpbmVzc0Z1bmN0aW9uQ29kZU1vZGFsID0gJycNCiAgICAgIC8vIHRoaXMuZ2V0RnVuTGlzdHMoKQ0KICAgIH0sDQogICAgLy8g5Lia5Yqh57O757uf5LiL5ouJ5qCRDQogICAgZ2V0U3lzTGlzdHMoKSB7DQogICAgICBjb25zdCBwYXJhbSA9IHsNCiAgICAgICAgYnVzaW5lc3NUeXBlOiAxLA0KICAgICAgICBwYXJlbnRJZDogMA0KICAgICAgfQ0KICAgICAgdGhpcy5hZGRMb2FkaW5nID0gdHJ1ZQ0KICAgICAgSHR0cE1vZHVsZS5nZXRidXNMaXN0cyhwYXJhbSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLmFkZExvYWRpbmcgPSBmYWxzZQ0KICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwMDAwMDAnKSB7DQogICAgICAgICAgdGhpcy5idXNpbmVzc1N5c3RlbUNvZGVvcHRpb25zID0gcmVzLmRhdGEucmVzdWx0cw0KICAgICAgICAgIGlmICh0aGlzLiRwYXJlbnQuZGlhbG9nVGl0bGUgPT09ICfmlrDlop4nKSB7DQogICAgICAgICAgICB0aGlzLmJ1c2luZXNzU3lzdGVtQ29kZSA9ICcxJw0KICAgICAgICAgICAgdGhpcy5jaGFuZ2VTeXNDb2RlKHRoaXMuYnVzaW5lc3NTeXN0ZW1Db2RlKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5Lia5Yqh5qih5Z2X5LiL5ouJ5qCRDQogICAgZ2V0TW9kTGlzdHMoKSB7DQogICAgICBjb25zdCBwYXJhbSA9IHsNCiAgICAgICAgYnVzaW5lc3NUeXBlOiAyLA0KICAgICAgICBwYXJlbnRJZDogdGhpcy5TeXNwYXJlbnRJZA0KICAgICAgfQ0KICAgICAgdGhpcy5hZGRMb2FkaW5nID0gdHJ1ZQ0KICAgICAgSHR0cE1vZHVsZS5nZXRidXNMaXN0cyhwYXJhbSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGlzLmFkZExvYWRpbmcgPSBmYWxzZQ0KICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwMDAwMDAnKSB7DQogICAgICAgICAgdGhpcy5idXNpbmVzc01vZHVsZUNvZGVvcHRpb25zID0gcmVzLmRhdGEucmVzdWx0cw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDkuJrliqHlip/og73kuIvmi4nmoJENCiAgICBnZXRGdW5MaXN0cygpIHsNCiAgICAgIGNvbnN0IHBhcmFtID0gew0KICAgICAgICBidXNpbmVzc1R5cGU6IDMsDQogICAgICAgIHBhcmVudElkOiB0aGlzLk1vZHBhcmVudElkDQogICAgICB9DQogICAgICB0aGlzLmFkZExvYWRpbmcgPSB0cnVlDQogICAgICBIdHRwTW9kdWxlLmdldGJ1c0xpc3RzKHBhcmFtKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuYWRkTG9hZGluZyA9IGZhbHNlDQogICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAwMDAwMCcpIHsNCiAgICAgICAgICB0aGlzLmJ1c2luZXNzRnVuY3Rpb25Db2Rlb3B0aW9ucyA9IHJlcy5kYXRhLnJlc3VsdHMNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0UmVndWxhdGlvbkNoaWxkcmVuRGF0YShkYXRhcykgew0KICAgICAgbGV0IHRoYXQgPSB0aGlzDQogICAgICBkYXRhcy5mb3JFYWNoKGl0ZW0gPT4gew0KICAgICAgICAvLyBpdGVtLmNvZGUgPSBpdGVtLmNvZGUNCiAgICAgICAgaXRlbS5uYW1lID0gaXRlbS5ydWxlTmFtZQ0KICAgICAgICBpdGVtLmxhYmVsID0gaXRlbS5jb2RlICsgJy0nICsgaXRlbS5ydWxlTmFtZQ0KICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbikgew0KICAgICAgICAgIHRoYXQuZ2V0UmVndWxhdGlvbkNoaWxkcmVuRGF0YShpdGVtLmNoaWxkcmVuKQ0KICAgICAgICB9DQogICAgICB9KQ0KDQogICAgICByZXR1cm4gZGF0YXMNCiAgICB9LA0KICAgIGdldFJlZ3VsYXRpb24oKSB7DQogICAgICBIdHRwTW9kdWxlLmdldFRyZWUoMCkudGhlbihyZXMgPT4gew0KICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwMDAwMDAnKSB7DQogICAgICAgICAgbGV0IHRyZWVSZXNkYXRhID0gdGhpcy5nZXRSZWd1bGF0aW9uQ2hpbGRyZW5EYXRhKHJlcy5kYXRhKQ0KICAgICAgICAgIHRoaXMucmVndWxhdGlvbkNsYXNzb3B0aW9ucyA9IHRyZWVSZXNkYXRhDQogICAgICAgICAgdGhpcy5yZWd1bGF0aW9uQ2xhc3NvcHRpb25zLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICBpdGVtLnJlZ3VsYXRpb25OYW1lID0gaXRlbS5jb2RlICsgJy0nICsgaXRlbS5ydWxlTmFtZQ0KICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiL5ouJ5qCR5Yqg6L295aSx6LSlJykNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9DQoNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgfSwNCiAgYXN5bmMgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldFdoZXJlVHJlZSgpDQogICAgaWYgKHRoaXMuYnV0dG9uVHlwZSA9PT0gJ2NoZWNrJykgew0KICAgICAgdGhpcy5ydWxlU2V0U2hvdyA9IGZhbHNlDQogICAgICB0aGlzLnJ1bGVEZXNTaG93ID0gdHJ1ZQ0KICAgICAgdGhpcy5hcHBTZXRTaG93ID0gZmFsc2UNCiAgICAgIHRoaXMuZWZmZWN0aXZlU2hvdyA9IGZhbHNlDQogICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gMQ0KICAgICAgdGhpcy5ydWxlRGlzYWJsZWQgPSB0cnVlDQogICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZQ0KICAgICAgdGhpcy5zaG93YWJsZSA9IGZhbHNlDQogICAgfSBlbHNlIGlmICh0aGlzLmJ1dHRvblR5cGUgPT09ICdhcHByb3ZhbCcgfHwgdGhpcy5idXR0b25UeXBlID09PSAnc2VuZEJhY2snKSB7DQogICAgICB0aGlzLnJ1bGVEaXNhYmxlZCA9IGZhbHNlDQogICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZQ0KICAgICAgdGhpcy5zaG93YWJsZSA9IHRydWUNCiAgICB9IGVsc2Ugew0KICAgICAgdGhpcy5ydWxlRGlzYWJsZWQgPSBmYWxzZQ0KICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWUNCiAgICAgIHRoaXMuc2hvd2FibGUgPSBmYWxzZQ0KICAgIH0NCg0KICAgIHRoaXMud2FyblR5cGUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS53YXJuVHlwZQ0KICAgIHRoaXMudXBsb2FkRmlsZSA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhPy51cGxvYWRGaWxlDQoNCiAgICB0aGlzLnJ1bGVTZXRTaG93ID0gZmFsc2UNCiAgICB0aGlzLnJ1bGVEZXNTaG93ID0gdHJ1ZQ0KICAgIHRoaXMuYXBwU2V0U2hvdyA9IGZhbHNlDQogICAgdGhpcy5lZmZlY3RpdmVTaG93ID0gZmFsc2UNCiAgICB0aGlzLmFjdGl2ZUluZGV4ID0gMQ0KICAgIHRoaXMubW9uaXRvclJ1bGVOYW1lID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucmVndWxhdGlvbk5hbWUNCiAgICB0aGlzLndhcm5pbmdMZXZlbCA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLndhcm5pbmdMZXZlbA0KICAgIC8vIHRoaXMucmVndWxhdGlvbkNsYXNzID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucmVndWxhdGlvbkNsYXNzDQogICAgdGhpcy5nZXRSZWd1bGF0aW9uKCkNCiAgICB0aGlzLnJlZ3VsYXRpb25DbGFzcyA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLnJlZ3VsYXRpb25DbGFzcyArICctJyArIHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLnJlZ3VsYXRpb25DbGFzc05hbWUNCiAgICB0aGlzLnRyaWdnZXJDbGFzcyA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLnRyaWdnZXJDbGFzcw0KICAgIHRoaXMuaGFuZGxlVHlwZSA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLmhhbmRsZVR5cGUNCiAgICB0aGlzLm9wZXJhdGlvblRhYmxlRGF0YSA9IFt0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlVGVtcGxhdGVdDQoNCiAgICB0aGlzLmNyVGVtcGxhdGUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlVGVtcGxhdGUucnVsZVRlbXBsYXRlTmFtZQ0KICAgIC8vIHRoaXMuYnVzaW5lc3NNb2R1bGUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlVGVtcGxhdGUuYnVzaW5lc3NNb2R1bGVOYW1lDQogICAgLy8gdGhpcy5idXNpbmVzc0Z1bmN0aW9uID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucnVsZVRlbXBsYXRlLmJ1c2luZXNzRnVuY3Rpb25OYW1lDQogICAgdGhpcy5idXNpbmVzc1N5c3RlbUNvZGUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5idXNpbmVzc1N5c3RlbUNvZGUgKyAnJw0KICAgIHRoaXMuU3lzcGFyZW50SWQgPSB0aGlzLmJ1c2luZXNzU3lzdGVtQ29kZQ0KICAgIHRoaXMuZ2V0TW9kTGlzdHMoKQ0KICAgIHRoaXMuYnVzaW5lc3NNb2R1bGVDb2RlID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEuYnVzaW5lc3NNb2R1bGVDb2RlICsgJycNCiAgICB0aGlzLk1vZHBhcmVudElkID0gdGhpcy5idXNpbmVzc01vZHVsZUNvZGUNCg0KICAgIC8vIHRoaXMuZ2V0RnVuTGlzdHMoKQ0KICAgIC8vIHRoaXMuYnVzaW5lc3NGdW5jdGlvbkNvZGUucHVzaChwYXJzZUludCh0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5idXNpbmVzc0Z1bmN0aW9uQ29kZSkpDQogICAgLy8gdGhpcy5idXNpbmVzc0Z1bmN0aW9uQ29kZSA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLm1lbnVJZExpc3Quc3BsaXQoJywnKQ0KICAgIHRoaXMuYnVzaW5lc3NTeXN0ZW1OYW1lID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEuYnVzaW5lc3NTeXN0ZW1OYW1lDQogICAgdGhpcy5idXNpbmVzc01vZHVsZU5hbWUgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5idXNpbmVzc01vZHVsZU5hbWUNCiAgICAvLyB0aGlzLmJ1c2luZXNzRnVuY3Rpb25OYW1lLnB1c2godGhpcy4kcGFyZW50LkRldGFpbERhdGEuYnVzaW5lc3NGdW5jdGlvbk5hbWUpDQogICAgLy8gdGhpcy5idXNpbmVzc0Z1bmN0aW9uTmFtZSA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLm1lbnVOYW1lTGlzdA0KICAgIHRoaXMucmVndWxhdGlvbk1vZGVsQ29kZSA9IHRoaXMuJHBhcmVudC5EZXRhaWxEYXRhLnJ1bGVUZW1wbGF0ZUNvZGUNCiAgICB0aGlzLm1vdW50VGFibGVEYXRhID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEucmVndWxhdGlvbkNvbmZpZw0KICAgIHRoaXMucnVsZUZsYWcgPSB0aGlzLiRwYXJlbnQuRGV0YWlsRGF0YS5ydWxlRmxhZw0KICAgIC8vIHRoaXMud2FybkxvY2F0aW9uID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEud2FybkxvY2F0aW9uDQogICAgdGhpcy5wb2xpY2llc0Rlc2NyaXB0aW9uID0gdGhpcy4kcGFyZW50LkRldGFpbERhdGEud2FybmluZ1RpcHMNCiAgICAvLyDkuI3lj6/nvJbovpENCiAgICAvLyB0aGlzLmJ1dHRvbkNvbmZpZyA9IHt9DQogICAgdGhpcy5kaXNhYmxlZCA9IHRydWUNCiAgICB0aGlzLmVkaXRDb25maWcgPSBmYWxzZQ0KDQogICAgaWYgKHRoaXMuJHBhcmVudC5kaWFsb2dUaXRsZSAhPT0gJ+aWsOWinicpIHsNCiAgICAgIGlmICh0aGlzLiRwYXJlbnQuZm9ybURhdGFzKSB7DQogICAgICAgIHRoaXMuZm9ybURhdGFzID0gdGhpcy4kcGFyZW50LmZvcm1EYXRhcw0KICAgICAgICBpZiAodGhpcy5mb3JtRGF0YXMucGF5bWVudCAmJiB0aGlzLmZvcm1EYXRhcy5wYXltZW50ICE9PSAnJykgew0KICAgICAgICAgIHRoaXMuZm9ybURhdGFzLnBheW1lbnRfX211bHRpcGxlID0gdGhpcy5mb3JtRGF0YXMucGF5bWVudC5zcGxpdCgnLCcpLnNsaWNlKDEpDQogICAgICAgICAgdGhpcy5wYXltZW50TGVuID0gdGhpcy5mb3JtRGF0YXMucGF5bWVudF9fbXVsdGlwbGUubGVuZ3RoDQogICAgICAgICAgdGhpcy5mb3JtRGF0YXMucGF5bWVudF9fbXVsdGlwbGUuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsNCiAgICAgICAgICAgIGxldCBkYXRhcyA9IHt9DQogICAgICAgICAgICBpZiAoaXRlbSA9PT0gJzEnKSB7DQogICAgICAgICAgICAgIGRhdGFzID0gdGhpcy4kcGFyZW50LmRpYWxvZ1RpdGxlID09PSAn5p+l55yL6K+m5oOFJyA/IHRoaXMuY3JlYXRlUHJvKHRoaXMuZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZVswXS5pdGVtUmVuZGVyLm9wdGlvbnNbaXRlbV0sIHRydWUpIDogdGhpcy5jcmVhdGVQcm8odGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlWzBdLml0ZW1SZW5kZXIub3B0aW9uc1tpdGVtXSwgZmFsc2UpDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBkYXRhcyA9IHRoaXMuJHBhcmVudC5kaWFsb2dUaXRsZSA9PT0gJ+afpeeci+ivpuaDhScgPyB0aGlzLmNyZWF0ZU9iaih0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2VbMF0uaXRlbVJlbmRlci5vcHRpb25zW2l0ZW1dLCB0cnVlKSA6IHRoaXMuY3JlYXRlT2JqKHRoaXMuZm9ybUl0ZW1zQ29uZmlnTWVzc2FnZVswXS5pdGVtUmVuZGVyLm9wdGlvbnNbaXRlbV0sIGZhbHNlKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlLnNwbGljZSgxICsgaW5kZXgsIDAsIGRhdGFzKQ0KICAgICAgICAgICAgaWYgKHRoaXMuJHBhcmVudC5kaWFsb2dUaXRsZSA9PT0gJ+afpeeci+ivpuaDhScpIHsNCiAgICAgICAgICAgICAgdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgaXRlbS5pdGVtUmVuZGVyLnByb3BzLmRpc2FibGVkID0gdHJ1ZQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgICAgICAgaXRlbS5pdGVtUmVuZGVyLnByb3BzLmRpc2FibGVkID0gZmFsc2UNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIHRoaXMuZm9ybURhdGFzLmFnZW5jeV9jb2RlID0gJzAwMCwwMDAwMDEsMDAwMDAyJw0KICAgICAgICAgICAgLy8gdGhpcy5mb3JtRGF0YXMuYWdlbmN5X25hbWUgPSAn6aKE566X5aSE6aKE55WZLOmihOeul+WkhOmihOeVmSx0ZXN05Y2V5L2N5paw5aKeJw0KICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXMuYWdlbmN5X2NvZGUgPSB0aGlzLmZvcm1EYXRhcy5hZ2VuY3lDb2RlDQogICAgICAgICAgICB0aGlzLmZvcm1EYXRhcy5hZ2VuY3lfbmFtZSA9IHRoaXMuZm9ybURhdGFzLmFnZW5jeU5hbWUNCiAgICAgICAgICAgIHRoaXMuZm9ybURhdGFzLnByb19jb2RlID0gdGhpcy5mb3JtRGF0YXMucHJvQ29kZQ0KICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXMucHJvX25hbWUgPSB0aGlzLmZvcm1EYXRhcy5wcm9OYW1lDQogICAgICAgICAgICB0aGlzLmZvcm1EYXRhcy5leHBfZnVuY19jb2RlID0gdGhpcy5mb3JtRGF0YXMuZXhwRnVuQ29kZQ0KICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXMuZXhwX2Z1bmNfbmFtZSA9IHRoaXMuZm9ybURhdGFzLmV4cEZ1bk5hbWUNCiAgICAgICAgICAgIHRoaXMuZm9ybURhdGFzLmRlcF9iZ3RfZWNvX2NvZGUgPSB0aGlzLmZvcm1EYXRhcy5kZXBCZ3RFY29Db2RlDQogICAgICAgICAgICB0aGlzLmZvcm1EYXRhcy5kZXBfYmd0X2Vjb19uYW1lID0gdGhpcy5mb3JtRGF0YXMuZGVwQmd0RWNvTmFtZQ0KICAgICAgICAgICAgdGhpcy5mb3JtRGF0YXMuZ292X2JndF9lY29fY29kZSA9IHRoaXMuZm9ybURhdGFzLmdvdkJndEVjb0NvZGUNCiAgICAgICAgICAgIHRoaXMuZm9ybURhdGFzLmdvdl9iZ3RfZWNvX25hbWUgPSB0aGlzLmZvcm1EYXRhcy5nb3ZCZ3RFY29OYW1lDQogICAgICAgICAgICB0aGlzLmZvcm1EYXRhcy5jb3JfYmd0X2RvY19ub19jb2RlID0gdGhpcy5mb3JtRGF0YXMuY29yQmd0RG9jTm9Db2RlDQogICAgICAgICAgICB0aGlzLmZvcm1EYXRhcy5jb3JfYmd0X2RvY19ub19uYW1lID0gdGhpcy5mb3JtRGF0YXMuY29yQmd0RG9jTm9OYW1lDQogICAgICAgICAgLy8gdGhpcy5mb3JtRGF0YXMuYWdlbmN5X2NvZGVfaWQgPSAnNTIwOEZFNDkzMkYzNEUyN0IwQTMxQkRERTJEMDI3NkEnDQogICAgICAgICAgLy8gbGV0IGZvcm1EYXRhUGFyYW1zID0gdGhpcy5mb3JtRGF0YXNbdGhpcy5mb3JtSXRlbXNDb25maWdNZXNzYWdlWzBdLml0ZW1SZW5kZXIub3B0aW9uc1tpdGVtXS5uYW1lXS5zcGxpdCgnLCcpDQogICAgICAgICAgLy8gbGV0IHBhcmFtc0NvZGVzID0gJycNCiAgICAgICAgICAvLyBsZXQgcGFyYW1zTmFtZXMgPSAnJw0KICAgICAgICAgIC8vIGZvcm1EYXRhUGFyYW1zLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgLy8gICBpdGVtID0gaXRlbS5zcGxpdCgnLScpDQogICAgICAgICAgLy8gICBwYXJhbXNDb2RlcyArPSBpdGVtWzBdDQogICAgICAgICAgLy8gICBwYXJhbXNOYW1lcyArPSBpdGVtWzFdDQogICAgICAgICAgLy8gfSkNCiAgICAgICAgICAvLyB0aGlzLmZvcm1EYXRhc1t0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2VbMF0uaXRlbVJlbmRlci5vcHRpb25zW2l0ZW1dLm5hbWUgKyAnY29kZSddID0gcGFyYW1zQ29kZXMNCiAgICAgICAgICAvLyB0aGlzLmZvcm1EYXRhc1t0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2VbMF0uaXRlbVJlbmRlci5vcHRpb25zW2l0ZW1dLm5hbWUgKyAnbmFtZSddID0gcGFyYW1zTmFtZXMNCiAgICAgICAgICB9KQ0KICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZm9ybURhdGFzKQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIGlmICh0aGlzLiRwYXJlbnQuZGlhbG9nVGl0bGUgPT09ICfmn6XnnIvor6bmg4UnKSB7DQogICAgICB0aGlzLmZvcm1JdGVtc0NvbmZpZ01lc3NhZ2UuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaXRlbS5pdGVtUmVuZGVyLnByb3BzLmRpc2FibGVkID0gdHJ1ZQ0KICAgICAgfSkNCiAgICB9DQogICAgdGhpcy5yZWd1bGF0aW9uVHlwZSA9IHRoaXMuJHN0b3JlLnN0YXRlLmN1ck5hdk1vZHVsZS5mX0Z1bGxOYW1lPy5zdWJzdHJpbmcoMCwgMykNCiAgICB0aGlzLmdldFN5c0xpc3RzKCkNCiAgICB0aGlzLmdldERlcExpc3RzKCkNCiAgICB0aGlzLmdldFJlZ3VsYXRpb24oKQ0KICB9DQp9DQo="},{"version":3,"sources":["addDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+fA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addDialog.vue","sourceRoot":"src/views/main/MointoringMatters/SystemLevelRulesFlow/children","sourcesContent":["<!--单位用款申请(按计划)录入新增页面弹框-->\r\n<template>\r\n  <vxe-modal\r\n    v-model=\"dialogVisible\"\r\n    :title=\"title\"\r\n    width=\"96%\"\r\n    height=\"90%\"\r\n    :show-footer=\"false\"\r\n    @close=\"dialogClose\"\r\n  >\r\n    <div style=\"width:100%;height:45px;float:left;\">\r\n      <div v-for=\"(item,index) in tabbtn\" :key=\"index\" class=\"setbtn\">\r\n        <div :id=\"index\" class=\"tabone\" :class=\"activeIndex === index ? 'tabone1' : ''\" @click=\"tabClick(index)\">\r\n          {{ item }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--模板信息-->\r\n    <div v-show=\"ruleSetShow\" class=\"payVoucherInput\" style=\"margin-top:50px;\">\r\n      <div v-loading=\"addLoading\" class=\"body\">\r\n        <!-- <div v-show=\"!disabled\" class=\"main-query\">\r\n          <BsQuery\r\n            ref=\"queryFrom\"\r\n            :query-form-item-config=\"queryConfig\"\r\n            :query-form-data=\"searchDataList\"\r\n            @onSearchClick=\"search\"\r\n            @itemChange=\"itemChange\"\r\n          />\r\n        </div> -->\r\n        <div class=\"header-table\" style=\"margin-top:15px;\">\r\n          <BsTable\r\n            ref=\"monitorTableRef\"\r\n            height=\"480px\"\r\n            :footer-config=\"{ showFooter: false }\"\r\n            :table-columns-config=\"monitorTableColumnsConfig\"\r\n            :table-data=\"operationTableData\"\r\n            :table-config=\"tableConfig\"\r\n            :toolbar-config=\"false\"\r\n            :pager-config=\"false\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--规则定义-->\r\n    <div v-show=\"ruleDesShow\" class=\"payVoucherInput\" style=\"margin-top:50px;\">\r\n      <div>\r\n        <div>\r\n          <div>\r\n            <el-row>\r\n              <el-col :span=\"8\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;引用模板</div>\r\n                      <el-input\r\n                        v-model=\"crTemplate\"\r\n                        :disabled=\"disabled\"\r\n                        placeholder=\"请输入模板名称\"\r\n                        style=\"width:45%\"\r\n                      />\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;触发系统</div>\r\n                      <el-select\r\n                        v-model=\"businessSystemCode\"\r\n                        :disabled=\"disabled\"\r\n                        placeholder=\"请选择触发系统\"\r\n                        style=\"width:45%\"\r\n                        @change=\"changeSysCode\"\r\n                      >\r\n                        <el-option\r\n                          v-for=\"item in businessSystemCodeoptions\"\r\n                          :key=\"item.id\"\r\n                          :label=\"item.businessName\"\r\n                          :value=\"item.id\"\r\n                        />\r\n                      </el-select>\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;触发模块</div>\r\n                      <el-select\r\n                        v-model=\"businessModuleCode\"\r\n                        :disabled=\"disabled\"\r\n                        placeholder=\"请选择触发模块\"\r\n                        style=\"width:45%\"\r\n                        @change=\"changeModCode\"\r\n                      >\r\n                        <el-option\r\n                          v-for=\"item in businessModuleCodeoptions\"\r\n                          :key=\"item.id\"\r\n                          :label=\"item.businessName\"\r\n                          :value=\"item.id\"\r\n                        />\r\n                      </el-select>\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font v-show=\"triggerClass !== 2\" color=\"red\">*</font>&nbsp;触发菜单</div>\r\n                      <!--:disabled=\"disabled\"-->\r\n                      <!--<el-select-->\r\n                      <!--  v-model=\"businessFunctionCode\"-->\r\n                      <!--  placeholder=\"请选择触发菜单\"-->\r\n                      <!--  style=\"width:45%\"-->\r\n                      <!--  @change=\"changeFunCode\"-->\r\n                      <!--&gt;-->\r\n                      <!--  <el-option-->\r\n                      <!--    v-for=\"item in businessFunctionCodeoptions\"-->\r\n                      <!--    :key=\"item.id\"-->\r\n                      <!--    :label=\"item.businessName\"-->\r\n                      <!--    :value=\"item.id\"-->\r\n                      <!--  />-->\r\n                      <!--</el-select>-->\r\n                      <BsTree\r\n                        :key=\"refleshKey\"\r\n                        v-model=\"businessFunctionCodeModal\"\r\n                        :is-drop-select-tree=\"true\"\r\n                        :editable=\"true\"\r\n                        :tree-data=\"businessFunctionTreeData\"\r\n                        :default-checked-keys=\"businessFunctionCode\"\r\n                        v-bind=\"{ config: { ...businessFunctionTreeConfig, disabled } }\"\r\n                        class=\"businessFunctionTree\"\r\n                        style=\"display: inline-block;\"\r\n                      />\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;监控规则名称</div>\r\n                      <el-input\r\n                        v-model=\"monitorRuleName\"\r\n                        :disabled=\"disabled\"\r\n                        placeholder=\"请输入监控规则名称\"\r\n                        style=\"width:45%\"\r\n                      />\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;监控主题</div>\r\n                      <el-select\r\n                        v-model=\"regulationClass\"\r\n                        :disabled=\"disabled\"\r\n                        placeholder=\"请选择监控主题\"\r\n                        style=\"width:45%\"\r\n                        @change=\"selectRule\"\r\n                      >\r\n                        <el-option\r\n                          v-for=\"item in regulationClassoptions\"\r\n                          :key=\"item.id\"\r\n                          :label=\"item.regulationName\"\r\n                          :value=\"item.regulationName\"\r\n                        />\r\n                      </el-select>\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"8\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;预警级别</div>\r\n                      <el-select\r\n                        v-model=\"warningLevel\"\r\n                        :disabled=\"disabled\"\r\n                        placeholder=\"请选择预警级别\"\r\n                        style=\"width:45%\"\r\n                        @change=\"chooseWarningLevel\"\r\n                      >\r\n                        <el-option\r\n                          v-for=\"item in warningLeveloptions\"\r\n                          :key=\"item.value\"\r\n                          :label=\"item.label\"\r\n                          :value=\"item.value\"\r\n                        />\r\n                      </el-select>\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;处理方式</div>\r\n                      <el-select\r\n                        v-model=\"handleType\"\r\n                        :disabled=\"true\"\r\n                        placeholder=\"请选择处理方式\"\r\n                        style=\"width:45%\"\r\n                        @change=\"choosehandleType\"\r\n                      >\r\n                        <el-option\r\n                          v-for=\"item in handleTypeoptions\"\r\n                          :key=\"item.value\"\r\n                          :label=\"item.label\"\r\n                          :value=\"item.value\"\r\n                        />\r\n                      </el-select>\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;触发类型</div>\r\n                      <el-select\r\n                        v-model=\"triggerClass\"\r\n                        :disabled=\"disabled\"\r\n                        placeholder=\"请选择触发类型\"\r\n                        style=\"width:45%\"\r\n                        @change=\"chooseTriggerClass\"\r\n                      >\r\n                        <el-option\r\n                          v-for=\"item in triggerClassoptions\"\r\n                          :key=\"item.value\"\r\n                          :label=\"item.label\"\r\n                          :value=\"item.value\"\r\n                        />\r\n                      </el-select>\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n            </el-row>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\">预警类别</div>\r\n                    <el-select\r\n                      v-model=\"warnType\"\r\n                      :disabled=\"disabled\"\r\n                      placeholder=\"请选择预警类别\"\r\n                      style=\"width:45%\"\r\n                    >\r\n                      <el-option\r\n                        v-for=\"item in warnTypeOptions\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                      />\r\n                    </el-select>\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n            <el-col :span=\"8\">\r\n              <el-container>\r\n                <el-main width=\"100%\">\r\n                  <el-row>\r\n                    <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\">是否必传附件</div>\r\n                    <el-select\r\n                      v-model=\"uploadFile\"\r\n                      :disabled=\"disabled\"\r\n                      placeholder=\"请选择是否必传附件\"\r\n                      style=\"width:45%\"\r\n                    >\r\n                      <el-option\r\n                        v-for=\"item in uploadFileOptions\"\r\n                        :key=\"item.value\"\r\n                        :label=\"item.label\"\r\n                        :value=\"item.value\"\r\n                      />\r\n                    </el-select>\r\n                  </el-row>\r\n                </el-main>\r\n              </el-container>\r\n            </el-col>\r\n            <!-- <el-row>\r\n              <el-col :span=\"8\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;主管部门</div>\r\n                      <el-select\r\n                        v-model=\"departmentCode\"\r\n                        placeholder=\"请选择主管部门\"\r\n                        style=\"width:45%\"\r\n                        @change=\"changeDepartmentCode\"\r\n                      >\r\n                        <el-option\r\n                          v-for=\"item in departmentCodeoptions\"\r\n                          :key=\"item.id\"\r\n                          :label=\"item.businessName\"\r\n                          :value=\"item.id\"\r\n                        />\r\n                      </el-select>\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;业务处室</div>\r\n                      <el-select\r\n                        v-model=\"manageCode\"\r\n                        placeholder=\"请选择业务处室\"\r\n                        style=\"width:45%\"\r\n                        @change=\"changeManageCode\"\r\n                      >\r\n                        <el-option\r\n                          v-for=\"item in manageCodeoptions\"\r\n                          :key=\"item.id\"\r\n                          :label=\"item.businessName\"\r\n                          :value=\"item.id\"\r\n                        />\r\n                      </el-select>\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n            </el-row> -->\r\n            <el-row>\r\n              <el-col :span=\"24\">\r\n                <el-container>\r\n                  <el-main width=\"100%\">\r\n                    <el-row>\r\n                      <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;预警提示</div>\r\n                      <el-input\r\n                        v-model=\"policiesDescription\"\r\n                        type=\"textarea\"\r\n                        :disabled=\"disabled\"\r\n                        :rows=\"2\"\r\n                        :maxlength=\"200\"\r\n                        placeholder=\"请使用英文逗号“,”隔开进行填写，例如：楼阁修建,高尔夫球场,名画；\"\r\n                        style=\" width:90%\"\r\n                      />\r\n                    </el-row>\r\n                  </el-main>\r\n                </el-container>\r\n              </el-col>\r\n            </el-row>\r\n          </div>\r\n        </div>\r\n        <div style=\"margin-bottom: 10px; color: red\">\r\n          <p>注意：</p>\r\n          <p>1.【主管部门】和【业务处室】默认全部，不进行处室过滤，只有少数规则需要根据处室过滤权限时才使用此字段 ！</p>\r\n          <p>2.预警级别与处理方式对应关系统一为：{{ $store.state.warnInfo.warnLevelOptions.map(item => `${item.label}（${item.warnTips}）`).join('、') }}</p>\r\n          <p>3.触发类型中“实时触发”指的是事中监控，“定时触发”指的是事后监控，定时触发需要设置触发时间和频率才能生效，比如：每月1次，定时触发的监控规则【处理方式】必须选择“记录”。</p>\r\n        </div>\r\n        <div class=\"header-table\">\r\n          <BsTable\r\n            ref=\"mountTableRef\"\r\n            height=\"300px\"\r\n            :table-global-config=\"{ showOverflow: false }\"\r\n            :footer-config=\"{ showFooter: false }\"\r\n            :table-columns-config=\"mountTableColumnsConfig\"\r\n            :edit-config=\"editConfig\"\r\n            :edit-rules=\"editRulesIn\"\r\n            :table-data=\"mountTableData\"\r\n            :toolbar-config=\"false\"\r\n            :pager-config=\"false\"\r\n          >\r\n            <template\r\n              v-slot:column-editParam=\"{ row, column }\"\r\n            >\r\n              <div class=\"custom-cell\" style=\"font-size: 14px\">\r\n                <div v-if=\"row.paramType !== '5'\">\r\n                  <vxe-input v-model=\"row.param\" />\r\n                </div>\r\n                <div v-else>\r\n                  <vxe-select\r\n                    v-model=\"row.param\"\r\n                    :options=\"functionSelectOptions\"\r\n                    :option-props=\"{ label: 'value', value: 'regId' }\"\r\n                    :placeholder=\"column.title\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </template>\r\n            <template\r\n              v-slot:column-defaultParam=\"{ row }\"\r\n            >\r\n              <span>{{ getFunctionLabel(row.param) }}</span>\r\n            </template>\r\n          </BsTable>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--应用设置-->\r\n    <div v-show=\"appSetShow\" class=\"payVoucherInput\" style=\"margin-top:50px;\">\r\n      <BsForm\r\n        ref=\"messageForm\"\r\n        :is-editable=\"true\"\r\n        :form-items-config=\"formItemsConfigMessage\"\r\n        :form-data-list.sync=\"formDatas\"\r\n        :form-validation-config=\"formValidationConfigMessage\"\r\n        @itemChange=\"formItemChange\"\r\n      />\r\n      <div style=\"margin-bottom: 10px; color: red; margin-top:100px\">\r\n        <p>注意：</p>\r\n        <p>1.当收款人名称和资金用途的关键字为多个时，请使用英文逗号“,”隔开进行填写，例如：楼阁修建,高尔夫球场,名画；</p>\r\n        <p>2.若业务数据满足上述条件任意一项就跳过该规则校验，即不预警</p>\r\n      </div>\r\n    </div>\r\n    <!--生效范围-->\r\n    <div v-show=\"effectiveShow\" class=\"payVoucherInput\" style=\"margin-top:50px;\">\r\n      <el-row>\r\n        <el-col :span=\"12\">\r\n          <el-container>\r\n            <el-main width=\"100%\">\r\n              <el-row>\r\n                <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;管理级次</div>\r\n                <el-input\r\n                  v-model=\"regulationType\"\r\n                  placeholder=\"请输入管理级次\"\r\n                  style=\"width:45%\"\r\n                  :disabled=\"disabled\"\r\n                />\r\n              </el-row>\r\n            </el-main>\r\n          </el-container>\r\n        </el-col>\r\n      </el-row>\r\n      <div>\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-container>\r\n              <el-main width=\"100%\">\r\n                <el-row>\r\n                  <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;生效范围</div>\r\n                  <BsTree\r\n                    ref=\"rightTree\"\r\n                    style=\"height: calc(100% - 100px)\"\r\n                    :tree-data=\"treeData\"\r\n                    :config=\"{ multiple: true, rootName: '全部', disabled: false, treeProps: { nodeKey: 'id', label: 'name',children: 'children' ,id: 'id' } }\"\r\n                    :default-checked-keys=\"defaultCheckedKeys\"\r\n                    @onNodeCheckClick=\"onNodeCheckClick\"\r\n                  />\r\n                </el-row>\r\n              </el-main>\r\n            </el-container>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </div>\r\n    <!--审核意见-->\r\n    <div v-show=\"auditShow\" class=\"payVoucherInput\" style=\"margin-top:50px;\">\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <el-container>\r\n            <el-main width=\"100%\">\r\n              <el-row>\r\n                <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;审核意见</div>\r\n                <el-input\r\n                  v-model=\"ruleFlowOpinion\"\r\n                  :disabled=\"ruleDisabled\"\r\n                  type=\"textarea\"\r\n                  :rows=\"2\"\r\n                  placeholder=\"请输入审核意见\"\r\n                  style=\" width:90%\"\r\n                />\r\n              </el-row>\r\n            </el-main>\r\n          </el-container>\r\n        </el-col>\r\n      </el-row>\r\n      <div v-show=\"!disabled\" slot=\"footer\" style=\"width:100%;height: 80px;margin:0 15px\">\r\n        <div v-if=\"showbox\" id=\"bigbox\"></div>\r\n        <el-divider style=\"color:#E7EBF0\" />\r\n        <div type=\"flex\" justify=\"end\">\r\n          <div style=\"width:100%\">\r\n            <vxe-button id=\"savebutton\" style=\"float:right;margin-right:20px\" status=\"primary\" @click=\"audieData\">确定</vxe-button>\r\n            <vxe-button style=\"float:right;margin-right:20px\" @click=\"dialogClose\">取消</vxe-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div v-show=\"showable\" slot=\"footer\" style=\"width:100%;height: 80px;margin:0 15px\">\r\n        <div type=\"flex\" justify=\"end\">\r\n          <div style=\"width:100%\">\r\n            <vxe-button id=\"savebutton\" style=\"float:right;margin-right:20px\" status=\"primary\" @click=\"audieData\">确定</vxe-button>\r\n            <vxe-button style=\"float:right;margin-right:20px\" @click=\"dialogClose\">取消</vxe-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </vxe-modal>\r\n</template>\r\n<script>\r\nimport { proconf } from '../SystemLevelRulesFlow.js'\r\nimport HttpModule from '@/api/frame/main/Monitoring/levelRules.js'\r\nimport queryTreedElementByCodeMixin from '@/mixin/queryTreedElementByCode.js'\r\nimport functionSelectMixin from '@/mixin/functionSelectMixin.js'\r\n\r\nexport default {\r\n  name: 'AddDialog',\r\n  mixins: [queryTreedElementByCodeMixin, functionSelectMixin],\r\n  components: {},\r\n  computed: {\r\n    curNavModule() {\r\n      return this.$store.state.curNavModule\r\n    }\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    buttonType: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      refleshKey: Date.now(),\r\n      warnType: '',\r\n      warnTypeOptions: [\r\n        { value: '1', label: '流向' },\r\n        { value: '2', label: '流速' },\r\n        { value: '3', label: '流量' },\r\n        { value: '4', label: '其他' }\r\n      ],\r\n      uploadFile: '',\r\n      uploadFileOptions: [\r\n        { value: '1', label: '是' },\r\n        { value: '0', label: '否' }\r\n      ],\r\n      showable: false,\r\n      rightTreeValue: [],\r\n      configIn: {\r\n        disabled: true\r\n      },\r\n      treeData: [],\r\n      disabled: false,\r\n      editConfig: {\r\n        trigger: 'dblclick',\r\n        mode: 'cell'\r\n      },\r\n      editRulesIn: {\r\n        param: [{ required: true, type: 'float', trigger: 'change', message: '请输入规则定义的参数值' }]\r\n      },\r\n      monitorTableColumnsConfig: proconf.monitorSetTableColumnsConfig,\r\n      operationTableData: [],\r\n      tabbtn: ['模板信息', '规则定义', '白名单', '生效范围', '审核意见'],\r\n      ruleSetShow: true,\r\n      ruleDesShow: false,\r\n      appSetShow: false,\r\n      effectiveShow: false,\r\n      auditShow: false,\r\n      activeIndex: 0,\r\n      crTemplate: '',\r\n      monitorRuleName: '',\r\n      regulationType: '',\r\n      quhua: '',\r\n      ruleFlowOpinion: '',\r\n      mountTableColumnsConfig: proconf.mountTableColumnsConfig,\r\n      mountTableData: [],\r\n      // BsQuery 查询栏\r\n      queryConfig: proconf.sethighQueryConfig,\r\n      searchDataList: proconf.sethighQueryData,\r\n      // table 配置\r\n      tableConfig: {\r\n        renderers: {\r\n          // 编辑 附件 操作日志\r\n          $payVoucherInputGloableOptionRow: proconf.gloableOptionRow\r\n        },\r\n        methods: {\r\n          onOptionRowClick: this.onOptionRowClick\r\n        }\r\n      },\r\n      businessModule: '',\r\n      businessModuleoptions: [\r\n        { value: '1', label: '610000000-陕西省本级' },\r\n        { value: '2', label: '610100000-西安市本级' },\r\n        { value: '3', label: '610102000-新城区本级' },\r\n        { value: '4', label: '610102998-新城区辖区' }\r\n      ],\r\n      businessFunction: '',\r\n      businessFunctionoptions: [\r\n        { value: '1', label: '000001-预算处预留' },\r\n        { value: '2', label: '001001-省级财政专项资金' },\r\n        { value: '3', label: '610102000-新城区本级' },\r\n        { value: '4', label: '610102998-新城区辖区' }\r\n      ],\r\n      warningLevel: '',\r\n      warningLeveloptions: this.$store.state.warnInfo.warnLevelOptions,\r\n      handleType: '',\r\n      handleTypeoptions: this.$store.state.warnInfo.warnControlTypeOptions,\r\n      isEnable: '',\r\n      isEnableoptions: [\r\n        { value: 0, label: '否' },\r\n        { value: 1, label: '是' }\r\n      ],\r\n      policiesName: '',\r\n      policiesDescription: '',\r\n      dialogVisible: true,\r\n      addLoading: false,\r\n      token: '',\r\n      isContinuity: false,\r\n      // 文件上传相关参数\r\n      fileList: [],\r\n      fileData: [],\r\n      fileDataBakDel: [],\r\n      attachmentId: '',\r\n      showbox: false,\r\n      businessSystemCode: '',\r\n      businessSystemName: '',\r\n      businessSystemCodeoptions: [],\r\n      businessModuleCode: '',\r\n      businessModuleName: '',\r\n      businessModuleCodeoptions: [],\r\n      businessFunctionCode: [],\r\n      businessFunctionName: '',\r\n      businessFunctionCodeoptions: [],\r\n      SysparentId: 0,\r\n      ModparentId: 0,\r\n      regulationClass: '',\r\n      regulationClassoptions: [],\r\n      triggerClass: 1,\r\n      triggerClassoptions: [\r\n        { value: 1, label: '实时触发' },\r\n        { value: 2, label: '定时触发' }\r\n      ],\r\n      ruleDisabled: false,\r\n      formItemsConfigMessage: proconf.formItemsConfigMessage,\r\n      paymentLen: 0,\r\n      paymentData: [],\r\n      formDatas: {\r\n        useDes: '',\r\n        payeeAcctNo: '',\r\n        payeeAcctName: '',\r\n        des: '',\r\n        basis: ''\r\n      },\r\n      formValidationConfigMessage: proconf.formValidationConfigMessage,\r\n      regulationClassName: '',\r\n      defaultCheckedKeys: []\r\n    }\r\n  },\r\n  methods: {\r\n    chooseWarningLevel(val) {\r\n      if (val === 1) {\r\n        this.handleType = 1\r\n      } else if (val === 2) {\r\n        this.handleType = 2\r\n      } else if (val === 3) {\r\n        this.handleType = 3\r\n      } else if (val === 4) {\r\n        this.handleType = 4\r\n      }\r\n    },\r\n    chooseTriggerClass(val) {\r\n      if (val === 2) {\r\n        this.warningLevel = 4\r\n        this.handleType = 4\r\n      }\r\n      if (val === 1) {\r\n        this.warningLevel = 1\r\n        this.handleType = 1\r\n      }\r\n    },\r\n    choosehandleType(val) {\r\n      if (val === 1) {\r\n        this.warningLevel = 1\r\n      } else if (val === 2) {\r\n        this.warningLevel = 2\r\n      } else if (val === 3) {\r\n        this.warningLevel = 3\r\n      } else if (val === 4) {\r\n        this.warningLevel = 4\r\n      }\r\n    },\r\n    selectRule(val) {\r\n      let valArr = val.split('##')\r\n      this.regulationClassName = valArr[2]\r\n      // this.regulationClass = valArr[0]\r\n      // let busName = this.regulationClassoptions.find(item => {\r\n      //   return item.id === val\r\n      // })\r\n      // this.regulationClassName = busName.regulationClassName\r\n      // this.regulationClass = busName.regulationClass\r\n    },\r\n    formItemChange(obj) {\r\n      if (obj.property === 'payment') {\r\n        let data = obj.itemValue ? obj.itemValue.split(',') : ''\r\n        let content = this.formItemsConfigMessage[0].itemRender.options\r\n        this.formItemsConfigMessage.splice(1, this.paymentLen)\r\n        if (this.paymentData) {\r\n          if (data.length < this.paymentLen) {\r\n            this.paymentData.forEach(item => {\r\n              if (data.indexOf(item) === -1) {\r\n                this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + '__viewSort'] = ''\r\n                this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'code__multiple'] = []\r\n                this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'id'] = ''\r\n                this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'id__multiple'] = []\r\n                this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'name'] = ''\r\n                this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'name__multiple'] = []\r\n              }\r\n            })\r\n          }\r\n        }\r\n        this.paymentData = data\r\n        this.paymentLen = data.length\r\n        let datas = {}\r\n        data.forEach((item, index) => {\r\n          if (item === '1') {\r\n            datas = this.createPro(content[item], false)\r\n          } else {\r\n            datas = this.createObj(content[item], false)\r\n          }\r\n          this.formItemsConfigMessage.splice(1 + index, 0, datas)\r\n        })\r\n      }\r\n    },\r\n    createPro(obj, disabled) {\r\n      return {\r\n        insertMark: obj.label,\r\n        isNew: true,\r\n        title: obj.label,\r\n        field: obj.name,\r\n        align: 'left',\r\n        title__viewSort: obj.label,\r\n        field__viewSort: obj.name,\r\n        name: '$vxeTree',\r\n        itemRender: {\r\n          name: '$vxeTree',\r\n          options: [],\r\n          props: {\r\n            config: {\r\n              treeProps: {\r\n                labelFormat: '{code}-{name}',\r\n                nodeKey: 'code',\r\n                label: 'name',\r\n                children: 'children' // 子级字段名\r\n              },\r\n              placeholder: `请选择${obj.label}`,\r\n              multiple: true,\r\n              disabled,\r\n              isleaf: false,\r\n              axiosConfig: {\r\n                method: 'post',\r\n                url: 'large-monitor-platform/lmp/elementQuery/elementtree',\r\n                successCode: '000000', // 成功code\r\n                statusField: 'code'\r\n              }\r\n            },\r\n            queryparams: {\r\n              condition: '',\r\n              elementCode: 'pro',\r\n              year: this.$store.state.userInfo.year,\r\n              province: this.$store.state.userInfo.province,\r\n              limit: 2000,\r\n              offset: 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    createObj(obj, disabled) {\r\n      return {\r\n        insertMark: obj.label,\r\n        isNew: true,\r\n        title: obj.label,\r\n        field: obj.name,\r\n        align: 'left',\r\n        title__viewSort: obj.label,\r\n        field__viewSort: obj.name,\r\n        name: '$vxeTree',\r\n        itemRender: {\r\n          name: '$vxeTree',\r\n          options: [],\r\n          props: {\r\n            config: {\r\n              treeProps: {\r\n                nodeKey: 'id',\r\n                label: 'text',\r\n                children: 'children' // 子级字段名\r\n              },\r\n              placeholder: `请选择${obj.label}`,\r\n              disabled,\r\n              multiple: true,\r\n              isleaf: false,\r\n              axiosConfig: {\r\n                method: 'get',\r\n                url: `mp-b-basedata-service/v2/elevalueset/view/jstreedata/${obj.urlC}`\r\n              }\r\n            },\r\n            queryparams: {\r\n              tokenid: this.$store.getters.getLoginAuthentication.tokenid,\r\n              appguid: 'apaas',\r\n              year: this.$store.state.userInfo.year,\r\n              mofDivCode: this.$store.state.userInfo.province,\r\n              parameters: {}\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // tab切换\r\n    tabClick(index) {\r\n      this.activeIndex = index\r\n      if (this.activeIndex === 0) {\r\n        this.ruleSetShow = true\r\n        this.ruleDesShow = false\r\n        this.appSetShow = false\r\n        this.effectiveShow = false\r\n        this.auditShow = false\r\n      } else if (this.activeIndex === 1) {\r\n        this.ruleSetShow = false\r\n        this.ruleDesShow = true\r\n        this.appSetShow = false\r\n        this.effectiveShow = false\r\n        this.auditShow = false\r\n      } else if (this.activeIndex === 2) {\r\n        this.ruleSetShow = false\r\n        this.ruleDesShow = false\r\n        this.appSetShow = true\r\n        this.effectiveShow = false\r\n        this.auditShow = false\r\n      } else if (this.activeIndex === 3) {\r\n        this.ruleSetShow = false\r\n        this.ruleDesShow = false\r\n        this.appSetShow = false\r\n        this.effectiveShow = true\r\n        this.auditShow = false\r\n      } else if (this.activeIndex === 4) {\r\n        this.ruleSetShow = false\r\n        this.ruleDesShow = false\r\n        this.appSetShow = false\r\n        this.effectiveShow = false\r\n        this.auditShow = true\r\n      }\r\n    },\r\n    getChildrenNewData(datas) {\r\n      let that = this\r\n      datas.forEach(item => {\r\n        item.label = item.text\r\n        // item.code = item.ida\r\n        // item.guid = item.id\r\n        // item.name = item.text\r\n        item.disabled = true\r\n        if (item.children) {\r\n          that.getChildrenNewData(item.children)\r\n        }\r\n      })\r\n\r\n      return datas\r\n    },\r\n    search() {\r\n      this.getTableData()\r\n    },\r\n    getTableData(val) {\r\n      let that = this\r\n      that.tableLoading = true\r\n      let param = {\r\n        page: 1,\r\n        pageSize: 500,\r\n        ...that.searchDataList\r\n      }\r\n      HttpModule.getPageQuery(param).then(res => {\r\n        if (res.code === '000000' && res.data.results) {\r\n          that.operationTableData = res.data.results\r\n        } else {\r\n          that.$message.warning('加载失败')\r\n        }\r\n        that.tableLoading = false\r\n      })\r\n    },\r\n    // 高级查询下拉框\r\n    itemChange(obj, form) {\r\n      console.log(obj, form)\r\n      if (obj.property === 'businessSystemName') {\r\n        this.getBusinessModelCodeDatas({ businessType: '2', parentId: obj.node.id })\r\n      }\r\n      if (obj.property === 'businessModuleName') {\r\n        this.getBusinessModelCodeDatas({ businessType: '3', parentId: obj.node.id })\r\n      }\r\n    },\r\n    onNodeCheckClick(data) {\r\n      console.log(data.nodes)\r\n      let arr = []\r\n\r\n      let regulationType = this.$store.state.curNavModule.f_FullName.substring(0, 3)\r\n      if (regulationType === '系统级') {\r\n        data.nodes.forEach(item => {\r\n          if (item.isleaf) {\r\n            let obj = {\r\n              mofDivCode: '',\r\n              agencyCode: '',\r\n              mofDiv: ''\r\n            }\r\n            obj.mofDivId = item.code\r\n            obj.mofDivCode = item.name.split('-')[0]\r\n            arr.push(obj)\r\n          }\r\n        })\r\n      } else if (regulationType === '部门级') {\r\n        data.nodes.forEach(item => {\r\n          if (item.isleaf) {\r\n            let obj = {\r\n              mofDivCode: '',\r\n              agencyCode: ''\r\n            }\r\n            obj.mofDivId = item.code\r\n            arr.push(obj)\r\n          }\r\n        })\r\n      } else if (regulationType === '财政级') {\r\n        data.nodes.forEach(item => {\r\n          if (item.isleaf) {\r\n            let obj = {\r\n              mofDivCode: '',\r\n              agencyCode: ''\r\n            }\r\n            obj.mofDivId = item.code\r\n            obj.mofDivCode = item.name.split('-')[0]\r\n            arr.push(obj)\r\n          }\r\n        })\r\n      }\r\n      console.log('arr', arr)\r\n      this.scope = arr\r\n    },\r\n    getChildrenData(datas) {\r\n      let that = this\r\n      datas.forEach(item => {\r\n        item.code = item.id\r\n        item.name = item.businessName\r\n        item.label = item.id + '-' + item.businessName\r\n        if (item.children) {\r\n          that.getChildrenData(item.children)\r\n        }\r\n      })\r\n\r\n      return datas\r\n    },\r\n    // // 获取业务模块\r\n    getBusinessModelCodeDatas(val) {\r\n      let that = this\r\n      HttpModule.getBusinessTreeData(val).then(res => {\r\n        if (res.code === '000000' && res.data.results) {\r\n          let treeResdata = that.getChildrenData(res.data.results)\r\n          const result = [\r\n            {\r\n              id: 'root',\r\n              label: '全部',\r\n              code: 'root',\r\n              name: '全部',\r\n              isleaf: '0',\r\n              children: treeResdata\r\n            }\r\n          ]\r\n          if (val.businessType === '1') {\r\n            that.queryConfig.forEach(item => {\r\n              if (item.field === 'businessSystemName') {\r\n                console.log('result', result)\r\n                item.itemRender.options = result\r\n              }\r\n            })\r\n          } else if (val.businessType === '2') {\r\n            that.queryConfig.forEach(item => {\r\n              if (item.field === 'businessModuleName') {\r\n                item.itemRender.options = result\r\n              }\r\n            })\r\n          } else if (val.businessType === '3') {\r\n            that.queryConfig.forEach(item => {\r\n              if (item.field === 'businessFunctionName') {\r\n                item.itemRender.options = result\r\n              }\r\n            })\r\n          }\r\n        } else {\r\n          that.$message.warning('加载失败')\r\n        }\r\n      })\r\n    },\r\n    resetFormDataListMessage() {\r\n      let paymentsArr = ['monitore', 'agency_code', 'pro_name', 'bgt_type_code', 'bgt_source_code', 'gov_bgt_eco_code', 'exp_func_code', 'cor_bgt_doc_no_name']\r\n      paymentsArr.forEach(item => {\r\n        this.formDatas[item + '__viewSort'] = ''\r\n        this.formDatas[item + 'code'] = ''\r\n        this.formDatas[item + 'code__multiple'] = []\r\n        this.formDatas[item + 'id'] = ''\r\n        this.formDatas[item + 'id__multiple'] = []\r\n        this.formDatas[item + 'name'] = ''\r\n        this.formDatas[item + 'name__multiple'] = []\r\n      })\r\n      this.formDatas.payment = []\r\n      this.formDatas.payment__multiple = []\r\n      this.formDatas.agency_code = []\r\n      this.formDatas.pro_name = []\r\n      this.formDatas.gov_bgt_eco_code = []\r\n      this.formDatas.exp_func_code = []\r\n      this.formDatas.cor_bgt_doc_no_name = []\r\n      this.formDatas.dep_bgt_eco_code = []\r\n    },\r\n    dialogClose() {\r\n      console.log(this.paymentLen)\r\n      this.formItemsConfigMessage.splice(1, this.paymentLen)\r\n      this.paymentLen = 0\r\n      let form = this.$refs.messageForm\r\n      form.clearValidate()\r\n      this.resetFormDataListMessage()\r\n      this.$parent.dialogVisible = false\r\n      this.$parent.queryTableDatas()\r\n    },\r\n    // 处理字符串\r\n    dealwithStr(str) {\r\n      let result = ''\r\n      if (str) {\r\n        if (str.substring(str.length - 7) === '0000000') {\r\n          result = '61'\r\n        } else if (str.substring(str.length - 5) === '00000') {\r\n          result = str.substring(0, 4)\r\n        } else if (str.substring(str.length - 3) === '000') {\r\n          result = str.substring(0, 6)\r\n        } else {\r\n          result = str\r\n        }\r\n        return result\r\n      }\r\n    },\r\n    getProvince(data) {\r\n      data.children.forEach(item => {\r\n        if (item.province === this.$store.state.userInfo.province) {\r\n          if (this.$store.state.userInfo.province === '610000000') {\r\n            let arr = []\r\n            arr.push(data)\r\n            this.treeData = this.getChildrenNewData(arr)\r\n            let dataArr = []\r\n            this.getCheckData(dataArr, this.treeData)\r\n            this.scope = dataArr\r\n          } else {\r\n            let arr = []\r\n            arr.push(item)\r\n            this.treeData = this.getChildrenNewData(arr)\r\n          }\r\n        } else {\r\n          if (item.children) {\r\n            // let arr = []\r\n            // arr.push(item)\r\n            this.getProvince(item)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    getChildrenNewData1(datas) {\r\n      let that = this\r\n      datas.forEach(item => {\r\n        item.label = item.text\r\n        item.code = item.id\r\n        item.guid = item.id\r\n        item.name = item.text\r\n        item.disabled = true\r\n        if (item.children) {\r\n          that.getChildrenNewData1(item.children)\r\n        }\r\n      })\r\n\r\n      return datas\r\n    },\r\n    // 获取生效范围\r\n    getWhereTree() {\r\n      this.defaultCheckedKeys = []\r\n      let self = this\r\n      let result = this.dealwithStr(this.$store.state.userInfo.province)\r\n      // this.$store.state.userInfo.orgCode\r\n      let param = {\r\n        wheresql: 'and code like \\'' + result + '%\\'',\r\n        elementCode: 'admdiv',\r\n        // elementCode: 'AGENCY',\r\n        year: this.$store.state.userInfo.year,\r\n        province: this.$store.state.userInfo.province\r\n      }\r\n      let regulationType = this.$store.state.curNavModule.f_FullName.substring(0, 3)\r\n      // let regulationType = this.$parent.DetailData.regulationType\r\n      if (regulationType === '部门级') {\r\n        param.elementCode = 'DEPARTMENT'\r\n        param.wheresql = 'and code like \\'' + this.$store.state.userInfo.orgcode + '%\\''\r\n      }\r\n      if (regulationType === '财政级') {\r\n        param.elementCode = 'AGENCY'\r\n        param.wheresql = 'and province =' + this.$store.state.userInfo.province\r\n      }\r\n      HttpModule.getTreewhere(param).then(res => {\r\n        if (regulationType === '部门级' || regulationType === '财政级') {\r\n          const result = [\r\n            {\r\n              id: 'root',\r\n              label: '全部',\r\n              code: 'root',\r\n              isleaf: '0',\r\n              name: '全部',\r\n              children: this.getChildrenNewData1(res.data)\r\n            }\r\n          ]\r\n          this.treeData = result\r\n        } else {\r\n          this.treeData = self.getChildrenNewData1(res.data)\r\n          // this.getProvince(res.data[0])\r\n        }\r\n        this.$nextTick(() => {\r\n          self.$parent.provinceList && self.$refs.rightTree.treeOptionFn().setCheckedKeys(self.$parent.provinceList)\r\n        })\r\n        if (this.$parent.dialogTitle !== '新增') {\r\n          let tempArr = []\r\n          // let regulationType = this.$store.state.curNavModule.f_FullName.substring(0, 3)\r\n          this.$parent.DetailData.regulationScope.forEach(item => {\r\n            let str = item.mofDivId.toString()\r\n            // if (regulationType === '部门级') {\r\n            //   str = item.mofDivId.toString()\r\n            // } else {\r\n            //   str = item.mofDivId.toString()\r\n            // }\r\n            tempArr.push(str)\r\n          })\r\n\r\n          // this.$parent.DetailData.regulationScope.forEach(item => {\r\n          //   let str = item.mofDivCode.toString()\r\n          //   tempArr.push(str)\r\n          // })\r\n          this.$refs.rightTree.treeOptionFn().setCheckedKeys(tempArr)\r\n          this.defaultCheckedKeys = tempArr\r\n          console.log(this.treeData, 'ddddd')\r\n        }\r\n      })\r\n    },\r\n    // 保存新增的计划信息\r\n    doInsert() {\r\n    },\r\n    // 送审\r\n    audieData() {\r\n      if (!this.ruleFlowOpinion) {\r\n        this.$XModal.message({ status: 'warning', message: '请输入审批意见！' })\r\n        return\r\n      }\r\n      let operate = 0\r\n      if (this.buttonType === 'approval') {\r\n        operate = 2\r\n      }\r\n      if (this.buttonType === 'sendBack') {\r\n        operate = 4\r\n      }\r\n      let param = { operate: operate, menuName: this.$store.state.curNavModule.name, regulationCodes: [this.$parent.DetailData.regulationCode], ruleFlowOpinion: this.ruleFlowOpinion }\r\n      HttpModule.audieData(param).then(res => {\r\n        if (res.code === '000000') {\r\n          this.$message.success('操作成功')\r\n          console.log(this.paymentLen)\r\n          this.formItemsConfigMessage.splice(1, this.paymentLen)\r\n          this.paymentLen = 0\r\n          let form = this.$refs.messageForm\r\n          form.clearValidate()\r\n          this.resetFormDataListMessage()\r\n          this.$parent.dialogVisible = false\r\n          this.$parent.queryTableDatas()\r\n          this.$parent.queryTableDatasCount()\r\n          // this.queryTableDatas()\r\n        }\r\n      })\r\n    },\r\n    // 选择业务系统\r\n    changeSysCode(val) {\r\n      console.log(val)\r\n      this.SysparentId = val\r\n      this.businessModuleCode = ''\r\n      let busName = this.businessSystemCodeoptions.find(item => {\r\n        return item.id === val\r\n      })\r\n      this.businessSystemName = busName.businessName\r\n      this.getModLists()\r\n    },\r\n    // 选择业务模块\r\n    changeModCode(val) {\r\n      this.ModparentId = val\r\n      let busName = this.businessModuleCodeoptions.find(item => {\r\n        return item.id === val\r\n      })\r\n      this.businessModuleName = busName.businessName\r\n      this.businessFunctionCodeModal = ''\r\n      // this.getFunLists()\r\n    },\r\n    // 业务系统下拉树\r\n    getSysLists() {\r\n      const param = {\r\n        businessType: 1,\r\n        parentId: 0\r\n      }\r\n      this.addLoading = true\r\n      HttpModule.getbusLists(param).then(res => {\r\n        this.addLoading = false\r\n        if (res.code === '000000') {\r\n          this.businessSystemCodeoptions = res.data.results\r\n          if (this.$parent.dialogTitle === '新增') {\r\n            this.businessSystemCode = '1'\r\n            this.changeSysCode(this.businessSystemCode)\r\n          }\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    // 业务模块下拉树\r\n    getModLists() {\r\n      const param = {\r\n        businessType: 2,\r\n        parentId: this.SysparentId\r\n      }\r\n      this.addLoading = true\r\n      HttpModule.getbusLists(param).then(res => {\r\n        this.addLoading = false\r\n        if (res.code === '000000') {\r\n          this.businessModuleCodeoptions = res.data.results\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    // 业务功能下拉树\r\n    getFunLists() {\r\n      const param = {\r\n        businessType: 3,\r\n        parentId: this.ModparentId\r\n      }\r\n      this.addLoading = true\r\n      HttpModule.getbusLists(param).then(res => {\r\n        this.addLoading = false\r\n        if (res.code === '000000') {\r\n          this.businessFunctionCodeoptions = res.data.results\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    getRegulationChildrenData(datas) {\r\n      let that = this\r\n      datas.forEach(item => {\r\n        // item.code = item.code\r\n        item.name = item.ruleName\r\n        item.label = item.code + '-' + item.ruleName\r\n        if (item.children) {\r\n          that.getRegulationChildrenData(item.children)\r\n        }\r\n      })\r\n\r\n      return datas\r\n    },\r\n    getRegulation() {\r\n      HttpModule.getTree(0).then(res => {\r\n        if (res.code === '000000') {\r\n          let treeResdata = this.getRegulationChildrenData(res.data)\r\n          this.regulationClassoptions = treeResdata\r\n          this.regulationClassoptions.forEach(item => {\r\n            item.regulationName = item.code + '-' + item.ruleName\r\n          })\r\n        } else {\r\n          this.$message.error('下拉树加载失败')\r\n        }\r\n      })\r\n    }\r\n\r\n  },\r\n  watch: {\r\n  },\r\n  async created() {\r\n    this.getWhereTree()\r\n    if (this.buttonType === 'check') {\r\n      this.ruleSetShow = false\r\n      this.ruleDesShow = true\r\n      this.appSetShow = false\r\n      this.effectiveShow = false\r\n      this.activeIndex = 1\r\n      this.ruleDisabled = true\r\n      this.disabled = true\r\n      this.showable = false\r\n    } else if (this.buttonType === 'approval' || this.buttonType === 'sendBack') {\r\n      this.ruleDisabled = false\r\n      this.disabled = true\r\n      this.showable = true\r\n    } else {\r\n      this.ruleDisabled = false\r\n      this.disabled = true\r\n      this.showable = false\r\n    }\r\n\r\n    this.warnType = this.$parent.DetailData.warnType\r\n    this.uploadFile = this.$parent.DetailData?.uploadFile\r\n\r\n    this.ruleSetShow = false\r\n    this.ruleDesShow = true\r\n    this.appSetShow = false\r\n    this.effectiveShow = false\r\n    this.activeIndex = 1\r\n    this.monitorRuleName = this.$parent.DetailData.regulationName\r\n    this.warningLevel = this.$parent.DetailData.warningLevel\r\n    // this.regulationClass = this.$parent.DetailData.regulationClass\r\n    this.getRegulation()\r\n    this.regulationClass = this.$parent.DetailData.regulationClass + '-' + this.$parent.DetailData.regulationClassName\r\n    this.triggerClass = this.$parent.DetailData.triggerClass\r\n    this.handleType = this.$parent.DetailData.handleType\r\n    this.operationTableData = [this.$parent.DetailData.ruleTemplate]\r\n\r\n    this.crTemplate = this.$parent.DetailData.ruleTemplate.ruleTemplateName\r\n    // this.businessModule = this.$parent.DetailData.ruleTemplate.businessModuleName\r\n    // this.businessFunction = this.$parent.DetailData.ruleTemplate.businessFunctionName\r\n    this.businessSystemCode = this.$parent.DetailData.businessSystemCode + ''\r\n    this.SysparentId = this.businessSystemCode\r\n    this.getModLists()\r\n    this.businessModuleCode = this.$parent.DetailData.businessModuleCode + ''\r\n    this.ModparentId = this.businessModuleCode\r\n\r\n    // this.getFunLists()\r\n    // this.businessFunctionCode.push(parseInt(this.$parent.DetailData.businessFunctionCode))\r\n    // this.businessFunctionCode = this.$parent.DetailData.menuIdList.split(',')\r\n    this.businessSystemName = this.$parent.DetailData.businessSystemName\r\n    this.businessModuleName = this.$parent.DetailData.businessModuleName\r\n    // this.businessFunctionName.push(this.$parent.DetailData.businessFunctionName)\r\n    // this.businessFunctionName = this.$parent.DetailData.menuNameList\r\n    this.regulationModelCode = this.$parent.DetailData.ruleTemplateCode\r\n    this.mountTableData = this.$parent.DetailData.regulationConfig\r\n    this.ruleFlag = this.$parent.DetailData.ruleFlag\r\n    // this.warnLocation = this.$parent.DetailData.warnLocation\r\n    this.policiesDescription = this.$parent.DetailData.warningTips\r\n    // 不可编辑\r\n    // this.buttonConfig = {}\r\n    this.disabled = true\r\n    this.editConfig = false\r\n\r\n    if (this.$parent.dialogTitle !== '新增') {\r\n      if (this.$parent.formDatas) {\r\n        this.formDatas = this.$parent.formDatas\r\n        if (this.formDatas.payment && this.formDatas.payment !== '') {\r\n          this.formDatas.payment__multiple = this.formDatas.payment.split(',').slice(1)\r\n          this.paymentLen = this.formDatas.payment__multiple.length\r\n          this.formDatas.payment__multiple.forEach((item, index) => {\r\n            let datas = {}\r\n            if (item === '1') {\r\n              datas = this.$parent.dialogTitle === '查看详情' ? this.createPro(this.formItemsConfigMessage[0].itemRender.options[item], true) : this.createPro(this.formItemsConfigMessage[0].itemRender.options[item], false)\r\n            } else {\r\n              datas = this.$parent.dialogTitle === '查看详情' ? this.createObj(this.formItemsConfigMessage[0].itemRender.options[item], true) : this.createObj(this.formItemsConfigMessage[0].itemRender.options[item], false)\r\n            }\r\n            this.formItemsConfigMessage.splice(1 + index, 0, datas)\r\n            if (this.$parent.dialogTitle === '查看详情') {\r\n              this.formItemsConfigMessage.forEach(item => {\r\n                item.itemRender.props.disabled = true\r\n              })\r\n            } else {\r\n              this.formItemsConfigMessage.forEach(item => {\r\n                item.itemRender.props.disabled = false\r\n              })\r\n            }\r\n            // this.formDatas.agency_code = '000,000001,000002'\r\n            // this.formDatas.agency_name = '预算处预留,预算处预留,test单位新增'\r\n            this.formDatas.agency_code = this.formDatas.agencyCode\r\n            this.formDatas.agency_name = this.formDatas.agencyName\r\n            this.formDatas.pro_code = this.formDatas.proCode\r\n            this.formDatas.pro_name = this.formDatas.proName\r\n            this.formDatas.exp_func_code = this.formDatas.expFunCode\r\n            this.formDatas.exp_func_name = this.formDatas.expFunName\r\n            this.formDatas.dep_bgt_eco_code = this.formDatas.depBgtEcoCode\r\n            this.formDatas.dep_bgt_eco_name = this.formDatas.depBgtEcoName\r\n            this.formDatas.gov_bgt_eco_code = this.formDatas.govBgtEcoCode\r\n            this.formDatas.gov_bgt_eco_name = this.formDatas.govBgtEcoName\r\n            this.formDatas.cor_bgt_doc_no_code = this.formDatas.corBgtDocNoCode\r\n            this.formDatas.cor_bgt_doc_no_name = this.formDatas.corBgtDocNoName\r\n          // this.formDatas.agency_code_id = '5208FE4932F34E27B0A31BDDE2D0276A'\r\n          // let formDataParams = this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name].split(',')\r\n          // let paramsCodes = ''\r\n          // let paramsNames = ''\r\n          // formDataParams.forEach(item => {\r\n          //   item = item.split('-')\r\n          //   paramsCodes += item[0]\r\n          //   paramsNames += item[1]\r\n          // })\r\n          // this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'code'] = paramsCodes\r\n          // this.formDatas[this.formItemsConfigMessage[0].itemRender.options[item].name + 'name'] = paramsNames\r\n          })\r\n          console.log(this.formDatas)\r\n        }\r\n      }\r\n    }\r\n    if (this.$parent.dialogTitle === '查看详情') {\r\n      this.formItemsConfigMessage.forEach(item => {\r\n        item.itemRender.props.disabled = true\r\n      })\r\n    }\r\n    this.regulationType = this.$store.state.curNavModule.f_FullName?.substring(0, 3)\r\n    this.getSysLists()\r\n    this.getDepLists()\r\n    this.getRegulation()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n  .payVoucherInput {\r\n    margin: 15px;\r\n    .el-card {\r\n      margin-top: 0\r\n    }\r\n  }\r\n  .setbtn{\r\n    width:100px;\r\n    height:45px;\r\n    float:left;\r\n    margin-right:20px;\r\n  }\r\n  .tabone{\r\n    width:100px;\r\n    height:40px;\r\n    text-align:center;\r\n    line-height:40px;\r\n    float:left;\r\n    border:1px solid #ccc;\r\n    border-radius:4px;\r\n  }\r\n  .tabone1{\r\n    width:100px;\r\n    height:40px;\r\n    text-align:center;\r\n    line-height:40px;\r\n    float:left;\r\n    border:1px solid #ccc;\r\n    background-color:#f2f2f2;\r\n    border-radius:4px;\r\n  }\r\n  .vxe-modal--wrapper .vxe-modal--box {\r\n    z-index: 0;\r\n  }\r\n  #bigbox {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: white;\r\n    z-index: 10;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    opacity: .3;\r\n  }\r\n  .el-row-item .font-set-small .hline{\r\n    width:72px;\r\n  }\r\n  .vxe-toolbar{\r\n    .vxe-button--wrapper{\r\n      display:flex;\r\n    }\r\n  }\r\n</style>\r\n"]}]}