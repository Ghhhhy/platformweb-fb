{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\handlingOfViolations\\components\\AuditModal.vue?vue&type=style&index=0&id=15092b92&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\handlingOfViolations\\components\\AuditModal.vue","mtime":1694576524768},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmxlZnQtaXRlbXMgew0KICBoZWlnaHQ6IDEwMCU7DQogIHBhZGRpbmc6IDRweCA4cHg7DQogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQoNCiAgLml0ZW1zLWRldGFpbCB7DQogICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAyMHB4KTsNCiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgIG92ZXJmbG93OiBhdXRvOw0KICB9DQp9DQoNCi5yaWdodC1pbmZvIHsNCiAgcGFkZGluZzogMCA4cHggMTZweDsNCiAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCn0NCg0KLmRmci1jdXN0b20tY2hlY2stYWxsIHsNCiAgcGFkZGluZzogMCAwIDJweCA0cHg7DQogIHdpZHRoOiAxMDAlOw0KICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICBmb250LXdlaWdodDogYm9sZDsNCiAgZm9udC1zaXplOiAxOHB4Ow0KICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KLmRmci1jdXN0b20tY2hlY2tib3ggew0KICBkaXNwbGF5OiBmbGV4Ow0KICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsNCiAgcGFkZGluZzogMnB4IDRweDsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICAmLmlzLWFjdGl2ZSB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taGlnaHRsaWdodC1jb2xvcik7DQogIH0NCiAgL2RlZXAvLmVsLWNoZWNrYm94X19sYWJlbCB7DQogICAgZGlzcGxheTogbm9uZTsNCiAgfQ0KICAvZGVlcC8uZGZyLWN1c3RvbS1jaGVja2JveC1sYWJlbCB7DQogICAgbWFyZ2luLWxlZnQ6IDEwcHg7DQogICAgZm9udC1zaXplOiAxNnB4Ow0KICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7DQogIH0NCn0NCi5kZnItcHJpbnQtcGFnZS13cmFwcGVyIHsNCiAgcG9zaXRpb246IGZpeGVkOw0KICB0b3A6IDA7DQogIC8vIOWwhmRvbeenu+WHuuWIsOWPr+inhuiMg+WbtOWklg0KICBsZWZ0OiAtMTAwJTsNCiAgLy9sZWZ0OiAwOw0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiBhdXRvOw0KICB6LWluZGV4OiAxMDsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCn0NCg=="},{"version":3,"sources":["AuditModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsgBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AuditModal.vue","sourceRoot":"src/views/main/handlingOfViolations/components","sourcesContent":["<template>\r\n  <div>\r\n    <vxe-modal\r\n      v-model=\"visible\"\r\n      :destroy-on-close=\"true\"\r\n      :title=\"modalTitle\"\r\n      width=\"80%\"\r\n      height=\"80%\"\r\n      resize\r\n      show-footer\r\n    >\r\n      <template #footer>\r\n        <!--查看-->\r\n        <div v-if=\"modalType === ModalTypeEnum.PREVIEW\">\r\n          <vxe-button size=\"small\" @click=\"visible = false\">取消</vxe-button>\r\n          <vxe-button :loading=\"printLoading\" type=\"primary\" size=\"small\" @click=\"printHandle\">打印</vxe-button>\r\n        </div>\r\n        <!--处理-->\r\n        <div v-if=\"modalType === ModalTypeEnum.AUDIT\">\r\n          <vxe-button\r\n            size=\"small\"\r\n            @click=\"visible = false\"\r\n          >\r\n            取消\r\n          </vxe-button>\r\n          <vxe-button\r\n            v-if=\"!isUnitFeedbackPage\"\r\n            :disabled=\"auditButLoading\"\r\n            size=\"small\"\r\n            @click=\"submitFetch(ActionTypeEnum.ACTION_RETURN)\"\r\n          >\r\n            退回\r\n          </vxe-button>\r\n          <vxe-button\r\n            v-if=\"isAllowDisabled\"\r\n            :disabled=\"auditButLoading\"\r\n            size=\"small\"\r\n            @click=\"submitFetch(ActionTypeEnum.ACTION_DISABLED, 1)\"\r\n          >\r\n            禁止\r\n          </vxe-button>\r\n          <vxe-button\r\n            :disabled=\"auditButLoading\"\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            @click=\"submitFetch(ActionTypeEnum.ACTION_AUDIT)\"\r\n          >\r\n            <!-- 需求变动 蓝色警告也是 送审按钮 2023 06 14-->\r\n            {{ btnTitle }}\r\n          </vxe-button>\r\n        </div>\r\n      </template>\r\n      <div class=\"modal-content\" :style=\"{ height: `calc(100% - ${modalType === ModalTypeEnum.AUDIT ? 6 : 20}px)` }\">\r\n        <BsSplitPane\r\n          :default-percent=\"20\"\r\n          split=\"vertical\"\r\n          :style=\"{\r\n            height: `calc(100% - ${modalType !== ModalTypeEnum.PREVIEW ? 110 : 0}px)`,\r\n          }\"\r\n        >\r\n          <!--左侧处理单信息-->\r\n          <template #paneL>\r\n            <div class=\"left-items\">\r\n              <el-checkbox\r\n                v-model=\"checkedAll\"\r\n                :indeterminate=\"isIndeterminate\"\r\n                class=\"dfr-custom-check-all\"\r\n                @change=\"handleCheckAllChange\"\r\n              >\r\n                全部监控处理单（{{ cloneRecords.length }}）\r\n              </el-checkbox>\r\n              <div class=\"items-detail\">\r\n                <el-checkbox-group\r\n                  v-model=\"checkedItemsKey\"\r\n                  @change=\"handleCheckedItemsKeyChange\"\r\n                >\r\n                  <div\r\n                    v-for=\"item in cloneRecords\"\r\n                    :key=\"item.warningCode\"\r\n                    :class=\"['dfr-custom-checkbox', (currentNode && item.warningCode === currentNode.warningCode) && 'is-active']\"\r\n                    data-valid=\"true\"\r\n                    @click=\"nodeClick(item, $event)\"\r\n                  >\r\n                    <el-checkbox\r\n                      :label=\"item.warningCode\"\r\n                    />\r\n                    <span\r\n                      data-valid=\"true\"\r\n                      class=\"dfr-custom-checkbox-label\"\r\n                    >\r\n                      <i :class=\"['warning-icon',...getWarnLevelOption(item.warnLevel).iconClass]\" :style=\"{ ...getWarnLevelOption(item.warnLevel).iconStyle }\"></i>\r\n                      {{ item.warningCode }}\r\n                    </span>\r\n                  </div>\r\n                </el-checkbox-group>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <!--右侧当前选中的处理单信息-->\r\n          <template #paneR>\r\n            <div class=\"right-info\" style=\"height: 100%; overflow-y: auto\">\r\n              <!--规则信息-->\r\n              <RuleInfo :rule-info=\"currentWarnDetail.ruleResVO\">\r\n                <template #header>\r\n                  <bs-table-title title=\"违规单信息\">\r\n                    <div>\r\n                      <!--2023-04-21提出暂时隐藏-->\r\n                      <!--<vxe-button-->\r\n                      <!--  v-if=\"isDivisionPage\"-->\r\n                      <!--  size=\"mini\"-->\r\n                      <!--  @click=\"changeDialogVisible(true)\"-->\r\n                      <!--&gt;-->\r\n                      <!--  规则查看-->\r\n                      <!--</vxe-button>-->\r\n                      <vxe-button\r\n                        size=\"mini\"\r\n                        @click=\"changeReceiptsModalVisible(true)\"\r\n                      >\r\n                        业务单据查看\r\n                      </vxe-button>\r\n                    </div>\r\n                  </bs-table-title>\r\n                </template>\r\n              </RuleInfo>\r\n              <!--处理进度-->\r\n              <AuditProgress\r\n                v-if=\"currentWarnDetail.processResultList\"\r\n                :table-data=\"currentWarnDetail.processResultList\"\r\n              />\r\n              <!--附件信息-->\r\n              <AttachmentInfo\r\n                v-if=\"true\"\r\n                :loading=\"fileLoading\"\r\n                :required=\"currentNode.uploadFile\"\r\n                :file-list=\"currentNode.attachFiles\"\r\n                :billguid=\"currentNode.warningCode\"\r\n                @uploadAfter=\"uploadAfter\"\r\n                @deleteFile=\"deleteFileHandle\"\r\n              />\r\n            </div>\r\n          </template>\r\n        </BsSplitPane>\r\n        <!--处理表单：非处理单查看 | 非蓝色预警 => 显示--> <!-- 需求变动 都需要显示input框 2023 06 14-->\r\n        <AuditForm\r\n          v-if=\"modalType !== ModalTypeEnum.PREVIEW \"\r\n          ref=\"auditFormRef\"\r\n        />\r\n      </div>\r\n      <!--业务单据查看弹窗-->\r\n      <PreviewReceipts\r\n        v-if=\"receiptsModalVisible\"\r\n        v-model=\"receiptsModalVisible\"\r\n        :current-node=\"currentNode\"\r\n      />\r\n      <!--打印组件-->\r\n      <div class=\"dfr-print-page-wrapper\">\r\n        <PrintHtmlNode\r\n          ref=\"printHtmlNodeRef\"\r\n          :list=\"printData\"\r\n          @open=\"openPrintCallback\"\r\n        />\r\n      </div>\r\n    </vxe-modal>\r\n    <!--规则查看-->\r\n    <RulePreview\r\n      v-if=\"dialogVisible\"\r\n      :title=\"dialogTitle\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, computed, ref, unref } from '@vue/composition-api'\r\nimport RuleInfo from './RuleInfo'\r\nimport AuditProgress from './AuditProgress'\r\nimport AttachmentInfo from './AttachmentInfo'\r\nimport AuditForm from './AuditForm'\r\nimport PreviewReceipts from './PreviewReceipts'\r\nimport PrintHtmlNode from './PrintHtmlNode'\r\nimport RulePreview from '@/views/main/MointoringMatters/SystemLevelRules/children/addDialog.vue'\r\n\r\nimport useLoadingState from '@/hooks/useLoadingState'\r\nimport useAttachFiles from '../hooks/useAttachFiles'\r\nimport useIs from '../hooks/useIs'\r\nimport useInjectState from '../hooks/useInjectState'\r\nimport usePrint from '../hooks/usePrint'\r\nimport useWarnInfo from '../hooks/useWarnInfo'\r\nimport useRulePreviewModal from '../hooks/useRulePreviewModal'\r\nimport { useModal, useModalInner } from '@/hooks/useModal/index'\r\nimport store from '@/store'\r\n\r\nimport { Message, MessageBox } from 'element-ui'\r\nimport { ModalTypeEnum, RouterPathEnum, ActionTypeEnum } from '../model/enum'\r\nimport { checkRscode } from '@/utils/checkRscode'\r\nimport { bpmFlow } from '@/api/frame/main/handlingOfViolations/index.js'\r\nimport { pagePathMapNodeType, warnLevelOptions } from '../model/data'\r\n\r\n// 自定义双向绑定\r\nconst model = {\r\n  prop: 'value',\r\n  event: 'changeValue'\r\n}\r\nexport default defineComponent({\r\n  components: {\r\n    RuleInfo,\r\n    AuditProgress,\r\n    AttachmentInfo,\r\n    AuditForm,\r\n    PreviewReceipts,\r\n    PrintHtmlNode,\r\n    RulePreview\r\n  },\r\n  props: {\r\n    // 弹窗显隐\r\n    value: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 勾选行\r\n    checkedRecords: {\r\n      type: Array,\r\n      default: () => ([])\r\n    },\r\n    menuName: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  model,\r\n  setup(props, { emit }) {\r\n    const { menuName } = props\r\n    const isNeedRefreshIndexList = ref(false)\r\n    /**\r\n     * 弹窗内部状态\r\n     * */\r\n    const { visible } = useModalInner(props, emit, {\r\n      ...model,\r\n      setCallback: val => {\r\n        // 关闭弹窗 && 需要刷新父组件列表\r\n        if (!val && unref(isNeedRefreshIndexList)) emit('success')\r\n      }\r\n    })\r\n\r\n    /**\r\n     * 处理单相关\r\n     * */\r\n    const {\r\n      cloneRecords,\r\n      currentNode,\r\n      checkedItemsKey,\r\n      checkedItemsObj,\r\n      checkedAll,\r\n      isIndeterminate,\r\n      handleCheckAllChange,\r\n      handleCheckedItemsKeyChange,\r\n      nodeClick,\r\n      currentWarnDetail,\r\n      getDetailHandle\r\n    } = useWarnInfo(props)\r\n\r\n    /**\r\n     * 依赖注入相关\r\n     * */\r\n    const {\r\n      modalType,\r\n      pagePath\r\n    } = useInjectState()\r\n\r\n    // 单据弹窗显隐\r\n    const [receiptsModalVisible, changeReceiptsModalVisible] = useModal()\r\n\r\n    /**\r\n     * 规则详情弹窗模块\r\n     * */\r\n    const {\r\n      dialogTitle,\r\n      dialogVisible,\r\n      changeDialogVisible,\r\n      DetailData\r\n    } = useRulePreviewModal(currentNode)\r\n\r\n    /**\r\n     * 判断相关\r\n     * */\r\n    const {\r\n      isAllowDisabled,\r\n      isUnitFeedbackPage,\r\n      isBlueWarnLevel,\r\n      isDivisionPage\r\n    } = useIs(currentNode, pagePath, checkedItemsObj)\r\n\r\n    // // 是否显示表单\r\n    // const isShowFormComponent = computed(() => {\r\n    //   if (unref(checkedItemsObj).length) {\r\n    //     return unref(checkedItemsObj)\r\n    //   }\r\n    // })\r\n\r\n    // 弹窗title\r\n    const modalTitle = computed(() => {\r\n      return unref(modalType) === ModalTypeEnum.AUDIT ? '监控处理' : '处理单查看'\r\n    })\r\n\r\n    // 确认、送审按钮文案\r\n    const btnTitle = computed(() => {\r\n      // 非单位反馈 && 非蓝色预警  || unref(isBlueWarnLevel)\r\n      return unref(pagePath) !== RouterPathEnum().UNIT_FEEDBACK\r\n        ? '确认'\r\n        : '送审'\r\n    })\r\n\r\n    // 获取预警级别\r\n    const getWarnLevelOption = (warnLevel) => {\r\n      return warnLevelOptions.find(item => String(item.value) === String(warnLevel)) || {}\r\n    }\r\n\r\n    /**\r\n     * 附件相关\r\n     * */\r\n    const {\r\n      fileLoading,\r\n      uploadAfter,\r\n      deleteFileHandle,\r\n      initWarningCodesAttachFiles,\r\n      isUploadFiles\r\n    } = useAttachFiles(currentNode, cloneRecords, checkedItemsObj)\r\n\r\n    Promise.all([\r\n      initWarningCodesAttachFiles(),\r\n      getDetailHandle({\r\n        warningCode: unref(currentNode).warningCode,\r\n        id: unref(currentNode).id\r\n      })\r\n    ])\r\n\r\n    /**\r\n     * 打印相关\r\n     * */\r\n    const {\r\n      printLoading,\r\n      printHtmlNodeRef,\r\n      printData,\r\n      printHandle,\r\n      openPrintCallback\r\n    } = usePrint(checkedItemsKey, currentWarnDetail, cloneRecords)\r\n\r\n    // 处理意见、说明组件ref实例\r\n    const auditFormRef = ref(null)\r\n    const [ auditButLoading, setAuditButLoading ] = useLoadingState()\r\n\r\n    /**\r\n     * 提交前校验\r\n     */\r\n    function submitBeforeValidate() {\r\n      // 预警级别一致性校验\r\n      if (hasDifferentWarnLevel()) {\r\n        const msg = '预警级别不一致，不可批量操作'\r\n        Message.warning(msg)\r\n        throw new Error(msg)\r\n      }\r\n\r\n      // 附件校验：只有单位反馈 && 后端该处理单需要传附件\r\n      if (unref(isUnitFeedbackPage) && !isUploadFiles()) {\r\n        throw new Error('附件必传')\r\n      }\r\n    }\r\n\r\n    /**\r\n     * 关闭弹窗 刷新父组件\r\n     * */\r\n    function closeModal() {\r\n      isNeedRefreshIndexList.value = true\r\n      visible.value = false\r\n    }\r\n\r\n    /**\r\n     * 共用提交\r\n     * @param actionType {string} 操作类型：送审、确认、退回、禁止\r\n     * */\r\n    async function submitFetch(actionType, forbidStatus) {\r\n      try {\r\n        setAuditButLoading(true)\r\n        submitBeforeValidate()\r\n\r\n        const auditFormData = auditFormRef.value?.formData\r\n        const warningCodeAndFilesList = unref(checkedItemsObj)?.length ? unref(checkedItemsObj) : [unref(currentNode)]\r\n\r\n        // 蓝色预警不校验表单\r\n        if (warningCodeAndFilesList?.[0].warnLevel !== unref(isBlueWarnLevel)) {\r\n          await auditFormRef.value?.validate?.()\r\n        }\r\n\r\n        const menuId = store.state.curNavModule?.guid || ''\r\n        const params = {\r\n          ...auditFormData,\r\n          actionType,\r\n          nodeType: pagePathMapNodeType[unref(pagePath)],\r\n          warningCodeAndFilesList: warningCodeAndFilesList.map(item => {\r\n            const { warningCode, warnLevel, attachFiles, id } = item\r\n            return {\r\n              warningCode,\r\n              warnLevel,\r\n              id,\r\n              attachFiles: attachFiles.map(item => item.fileguid)\r\n            }\r\n          }),\r\n          menuName: menuName,\r\n          statusCode: warningCodeAndFilesList[0]?.statusCode,\r\n          menuId\r\n        }\r\n        // 禁止额外参数标识\r\n        if (forbidStatus) {\r\n          params.forbidStatus = forbidStatus\r\n        }\r\n        // 走请求逻辑\r\n        checkRscode(await bpmFlow(params))\r\n        Message.success('操作成功！')\r\n        // closeModal()\r\n        // 全部处理单都已处理 -> 直接关闭弹窗\r\n        if (warningCodeAndFilesList.length === unref(cloneRecords)?.length) {\r\n          closeModal()\r\n          return\r\n        }\r\n        MessageBox.confirm('存在未处理的处理单，是否继续处理?', '操作成功', {\r\n          confirmButtonText: '继续',\r\n          cancelButtonText: '关闭',\r\n          type: 'success'\r\n        })\r\n          .then(() => {\r\n            warningCodeAndFilesList.forEach(item => {\r\n              const index = cloneRecords.value.findIndex(record => item.warningCode === record.warningCode)\r\n              index > -1 && cloneRecords.value.splice(index, 1)\r\n            })\r\n            if (!cloneRecords.value.find(item => item.warningCode === unref(currentNode).warningCode)) {\r\n              currentNode.value = cloneRecords.value[0]\r\n            }\r\n            // 勾选置空\r\n            checkedItemsKey.value = []\r\n            // 处理意见置空\r\n            auditFormRef.value?.reset()\r\n            // 需要在后续关闭弹窗后执行刷新主列表操作\r\n            isNeedRefreshIndexList.value = true\r\n          })\r\n          .catch(() => {\r\n            closeModal()\r\n          })\r\n      } finally {\r\n        setAuditButLoading(false)\r\n      }\r\n    }\r\n\r\n    /**\r\n     * 是否有不同预警级别\r\n     */\r\n    function hasDifferentWarnLevel() {\r\n      const warnLevelList = (unref(checkedItemsObj)?.length ? unref(checkedItemsObj) : [unref(currentNode)])\r\n        .map(item => item.warnLevel)\r\n\r\n      const levelSet = new Set(warnLevelList)\r\n      return levelSet.size > 1\r\n    }\r\n\r\n    return {\r\n      ModalTypeEnum,\r\n      RouterPathEnum,\r\n      ActionTypeEnum,\r\n\r\n      visible,\r\n      modalTitle,\r\n      modalType,\r\n      pagePath,\r\n      auditFormRef,\r\n\r\n      cloneRecords,\r\n      getWarnLevelOption,\r\n\r\n      isAllowDisabled,\r\n      isUnitFeedbackPage,\r\n      isDivisionPage,\r\n\r\n      printLoading,\r\n      printData,\r\n      printHtmlNodeRef,\r\n      printHandle,\r\n      openPrintCallback,\r\n\r\n      auditButLoading,\r\n      submitFetch,\r\n\r\n      fileLoading,\r\n      uploadAfter,\r\n      deleteFileHandle,\r\n\r\n      btnTitle,\r\n      isBlueWarnLevel,\r\n\r\n      currentWarnDetail,\r\n\r\n      nodeClick,\r\n      currentNode,\r\n      checkedItemsKey,\r\n      isIndeterminate,\r\n      checkedAll,\r\n      handleCheckAllChange,\r\n      handleCheckedItemsKeyChange,\r\n      receiptsModalVisible,\r\n      changeReceiptsModalVisible,\r\n\r\n      changeDialogVisible,\r\n      dialogVisible,\r\n      DetailData,\r\n      dialogTitle\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.left-items {\r\n  height: 100%;\r\n  padding: 4px 8px;\r\n  box-sizing: border-box;\r\n  background-color: #fff;\r\n\r\n  .items-detail {\r\n    height: calc(100% - 20px);\r\n    box-sizing: border-box;\r\n    overflow: auto;\r\n  }\r\n}\r\n\r\n.right-info {\r\n  padding: 0 8px 16px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.dfr-custom-check-all {\r\n  padding: 0 0 2px 4px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  font-weight: bold;\r\n  font-size: 18px;\r\n  overflow: hidden;\r\n}\r\n.dfr-custom-checkbox {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  padding: 2px 4px;\r\n  cursor: pointer;\r\n  &.is-active {\r\n    background-color: var(--hightlight-color);\r\n  }\r\n  /deep/.el-checkbox__label {\r\n    display: none;\r\n  }\r\n  /deep/.dfr-custom-checkbox-label {\r\n    margin-left: 10px;\r\n    font-size: 16px;\r\n    white-space: nowrap;\r\n  }\r\n}\r\n.dfr-print-page-wrapper {\r\n  position: fixed;\r\n  top: 0;\r\n  // 将dom移出到可视范围外\r\n  left: -100%;\r\n  //left: 0;\r\n  width: 100%;\r\n  height: auto;\r\n  z-index: 10;\r\n  background-color: #fff;\r\n}\r\n</style>\r\n"]}]}