{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\CardMenu\\card\\card.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\CardMenu\\card\\card.vue","mtime":1694576524269},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBleHRlbmQgfSBmcm9tICcuLi91dGlscycNCmltcG9ydCB7IGdldFBpbllpbkZpcnN0Q2hhcmFjdGVyIH0gZnJvbSAnQC9jb21wb25lbnRzL0NhcmRNZW51L3V0aWxzL3BpbnlpbicNCmltcG9ydCB7IGRlZmF1bHRDYXJkQ29uZmlnLCBkZWZhdWx0Q2FyZERhdGEgfSBmcm9tICcuL2NvbmZpZy9jb25maWcnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdDYXJkJywNCiAgcHJvcHM6IHsNCiAgICBjYXJkR2xvYmFsOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4ge30NCiAgICAgIH0NCiAgICB9LA0KICAgIGNhcmRNZW51OiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4ge30NCiAgICAgIH0NCiAgICB9LA0KICAgIGJzTWVudUNsaWNrRXZlbnQ6IHsNCiAgICAgIHR5cGU6IEZ1bmN0aW9uLA0KICAgICAgZGVmYXVsdDogZnVuY3Rpb24ob2JqLCAkdGhpcykge30NCiAgICB9LA0KICAgIHJvd05vOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gJycNCiAgICAgIH0NCiAgICB9LA0KICAgIGFjdGl2ZUJ0bjogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuICcnDQogICAgICB9DQogICAgfSwNCiAgICBzZXE6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiAnJw0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgY2FyZEdsb2JhbEluOiBleHRlbmQodHJ1ZSwge30sIHRoaXMuY2FyZEdsb2JhbCksDQogICAgICBjYXJkTWVudUluOiBleHRlbmQodHJ1ZSwge30sIHRoaXMuY2FyZE1lbnUpLA0KICAgICAgcm93TnVtYmVyOiB0aGlzLnJvd05vLA0KICAgICAgc2VxSW46IHRoaXMuc2VxDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDogew0KDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDojrflj5blvoXlip7mlbDph48NCiAgICBnZXRUb2RvQ291bnQoY2FyZE1lbnUpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWyd0b2RvSW5mby9nZXRNZW51VG9kb0luZm8nXShjYXJkTWVudT8ubWVudT8uZ3VpZCk/LnRvdGFsQ291bnQgfHwgMA0KICAgIH0sDQogICAgLy8gY2FyZOaMiemSrueCueWHu+S6i+S7tg0KICAgIG9uQ2xpY2tCdG4ob2JqID0ge30sIGluZGV4KSB7DQogICAgICAvLyDmjInpkq7op6blj5HvvIzkuovku7blm57osIMNCiAgICAgIGxldCBuZXdEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgb2JqLCB7IHR5cGU6IHRoaXMuY2FyZE1lbnVJbi50eXBlLCByb3dObzogdGhpcy5yb3dOdW1iZXIsIHNlcTogdGhpcy5zZXFJbiwgbWVudTogdGhpcy5jYXJkTWVudUluLm1lbnUgfSkNCiAgICAgIHRoaXMuYnNDYXJkQ2xpY2tFdmVudChuZXdEYXRhKQ0KICAgIH0sDQoNCiAgICAvLyDngrnlh7vkuovku7blm57osIMNCiAgICBic0NhcmRDbGlja0V2ZW50KG9iaikgew0KICAgICAgbGV0IHNlbGYgPSB0aGlzDQogICAgICBsZXQgbWV0aG9kcyA9IHRoaXMuY2FyZE1lbnVJbi5tZXRob2RzDQogICAgICBpZiAob2JqLmNvZGUpIHsNCiAgICAgICAgLy8gdGhpcy5jYXJkTWVudUluLm1lbnUg6YeM6Z2i55qEY2hpbGRyZW7kuI3lr7njgILnm7TmjqXku45zeXNtZW516YeM5Y+W5ZCn77yM6L+Z6YeM5Y+q57uZR1VJRA0KICAgICAgICBpZiAob2JqLmNvZGUgPT09ICdhZ2VudEl0ZW0nKSB7DQogICAgICAgICAgdGhpcy4kZW1pdCgnZ2VuZXJhdGVDYXJkQnRucycsICcwJywgdGhpcy5jYXJkTWVudUluLm1lbnUuZ3VpZCkNCiAgICAgICAgfSBlbHNlIGlmIChvYmouY29kZSA9PT0gJ2RvbmVJdGVtJykgew0KICAgICAgICAgIHRoaXMuJGVtaXQoJ2dlbmVyYXRlQ2FyZEJ0bnMnLCAnMScsIHRoaXMuY2FyZE1lbnVJbi5tZW51Lmd1aWQpDQogICAgICAgIH0gZWxzZSBpZiAob2JqLmNvZGUgPT09ICdvcHJhdGVHdWlkZScpIHsNCiAgICAgICAgICB0aGlzLiRlbWl0KCdnZW5lcmF0ZUNhcmRCdG5zJywgJzInLCB0aGlzLmNhcmRNZW51SW4ubWVudS5ndWlkKQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAodHlwZW9mIG9iai5jYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAvLyDmlrnlvI/kuIA6IOW3peWFt+agj+aMiemSrueCueWHu+S6i+S7tuWbnuiwgw0KICAgICAgICBvYmouY2FsbGJhY2sob2JqLCBzZWxmKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy8g5pa55byP5LqMOiB0b29sYmFy5LqL5Lu25Luj55CGDQogICAgICAgIHR5cGVvZiBtZXRob2RzLmJzQ2FyZENsaWNrRXZlbnQgPT09ICdmdW5jdGlvbicgJiYNCiAgICAgICAgICBtZXRob2RzLmJzQ2FyZENsaWNrRXZlbnQob2JqLCBzZWxmKQ0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBpbml0Q2FyZE1lbnUoKSB7DQogICAgICBsZXQgbWVudUNwID0gZXh0ZW5kKHRydWUsIHt9LCB0aGlzLmNhcmRNZW51SW4pDQogICAgICBsZXQgY2FyZE1lbnVJblRlbXAgPSBleHRlbmQodHJ1ZSwgZGVmYXVsdENhcmRDb25maWcsIGRlZmF1bHRDYXJkRGF0YSwgdGhpcy5jYXJkTWVudUluKQ0KICAgICAgaWYgKG1lbnVDcC5idXR0b25zICYmIG1lbnVDcC5idXR0b25zLmxlbmd0aCkgew0KICAgICAgICBjYXJkTWVudUluVGVtcC5idXR0b25zID0gbWVudUNwLmJ1dHRvbnMNCiAgICAgIH0NCg0KICAgICAgdGhpcy5jYXJkTWVudUluID0gZXh0ZW5kKHRydWUsIHt9LCBjYXJkTWVudUluVGVtcCkNCiAgICAgIC8vIGNvbnNvbGUubG9nKCc3NycsIHsgLi4udGhpcy5jYXJkTWVudUluIH0pDQogICAgfSwNCiAgICBnZXRTdHlsZUxldmVsMShpdGVtKSB7DQogICAgICB0cnkgew0KICAgICAgICAvLyDkuLrllaXkuI3nm7TmjqXnlKjkuK3mlofvvJ/lm6DkuLrmnInkuKrkuabljIXkuI3kvJrphY1uZ2lueA0KICAgICAgICBsZXQgdGl0bGUgPSBnZXRQaW5ZaW5GaXJzdENoYXJhY3RlcihpdGVtLnRpdGxlLCAnJywgdHJ1ZSkNCiAgICAgICAgcmV0dXJuIHJlcXVpcmUoJ0AvY29tcG9uZW50cy9DYXJkTWVudS9pbWdTdmcvJyArIHRpdGxlICsgJy5zdmcnKQ0KICAgICAgfSBjYXRjaCB7DQogICAgICAgIHJldHVybiByZXF1aXJlKCdAL2NvbXBvbmVudHMvQ2FyZE1lbnUvaW1nU3ZnL2RlZmF1bHQuc3ZnJykNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQoNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBjYXJkR2xvYmFsOiB7DQogICAgICBoYW5kbGVyKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgew0KICAgICAgICB0aGlzLmNhcmRHbG9iYWxJbiA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY2FyZEdsb2JhbEluLCBuZXdWYWx1ZSkNCiAgICAgIH0sDQogICAgICBkZWVwOiB0cnVlLA0KICAgICAgaW1tZWRpYXRlOiB0cnVlDQogICAgfSwNCiAgICBjYXJkTWVudTogew0KICAgICAgaGFuZGxlcihuZXdWYWx1ZSwgb2xkVmFsdWUpIHsNCiAgICAgICAgdGhpcy5jYXJkTWVudUluID0gZXh0ZW5kKHRydWUsIHt9LCBuZXdWYWx1ZSkNCiAgICAgICAgdGhpcy5pbml0Q2FyZE1lbnUoKQ0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9LA0KICAgIHJvd05vKG5ld1ZhbHVlKSB7DQogICAgICB0aGlzLnJvd051bWJlciA9IG5ld1ZhbHVlDQogICAgfSwNCiAgICBzZXEobmV3VmFsdWUpIHsNCiAgICAgIHRoaXMuc2VxSW4gPSBuZXdWYWx1ZQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["card.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"card.vue","sourceRoot":"src/components/CardMenu/card","sourcesContent":["<template>\r\n  <div class=\"card-content\">\r\n    <img :src=\"cardMenuIn.bgUrl\" class=\"content-bg\">\r\n    <div class=\"card-title\">\r\n      <!-- <i\r\n        class=\"fn-inline base-font base-base-info-icon custom-title-icon\"\r\n        :class=\"cardMenuIn.title.icon\"\r\n        :style=\"{ color: cardMenuIn.iconColor }\"\r\n      ></i> -->\r\n      <div class=\"fn-inline base-font icon_box\" :style=\"{ background: cardMenuIn.iconColor }\">\r\n        <img :src=\"getStyleLevel1(cardMenuIn.title)\" alt=\"\">\r\n      </div>\r\n      <span class=\"custom-title\">{{ cardMenuIn.title.title }}</span>\r\n    </div>\r\n    <div class=\"card-btns\">\r\n      <el-button\r\n        v-for=\"(item, index) in cardMenuIn.buttons\"\r\n        :key=\"index\"\r\n        class=\"card-btn\"\r\n        :class=\"[cardMenuIn.btnHoverColorName, activeBtn === `${cardMenuIn.type}-${item.code}` ? 'btn-active' : '']\"\r\n        :style=\"{ '--btn-btnColor': cardMenuIn.btnColor, '--btn-iconColor': cardMenuIn.iconColor }\"\r\n        @click.stop=\"onClickBtn(item)\"\r\n      >\r\n        <i\r\n          class=\"fn-inline base-font\"\r\n          :class=\"[item.icon, cardMenuIn.iconColorName]\"\r\n        ></i>\r\n        <span>{{ item.title }}</span>\r\n        <span v-if=\"item.code === 'agentItem' && getTodoCount(cardMenu)\" class=\"btn-num todo-num-bg\">{{ getTodoCount(cardMenu) > 99 ? '99+' : getTodoCount(cardMenu) }}</span>\r\n        <span v-else-if=\"item.code !== 'agentItem' && item.num\" class=\"btn-num\">{{ item.num > 99 ? '99+' : item.num }}</span>\r\n      </el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { extend } from '../utils'\r\nimport { getPinYinFirstCharacter } from '@/components/CardMenu/utils/pinyin'\r\nimport { defaultCardConfig, defaultCardData } from './config/config'\r\nexport default {\r\n  name: 'Card',\r\n  props: {\r\n    cardGlobal: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    },\r\n    cardMenu: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    },\r\n    bsMenuClickEvent: {\r\n      type: Function,\r\n      default: function(obj, $this) {}\r\n    },\r\n    rowNo: {\r\n      type: String,\r\n      default() {\r\n        return ''\r\n      }\r\n    },\r\n    activeBtn: {\r\n      type: String,\r\n      default() {\r\n        return ''\r\n      }\r\n    },\r\n    seq: {\r\n      type: String,\r\n      default() {\r\n        return ''\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      cardGlobalIn: extend(true, {}, this.cardGlobal),\r\n      cardMenuIn: extend(true, {}, this.cardMenu),\r\n      rowNumber: this.rowNo,\r\n      seqIn: this.seq\r\n    }\r\n  },\r\n  computed: {\r\n\r\n  },\r\n  methods: {\r\n    // 获取待办数量\r\n    getTodoCount(cardMenu) {\r\n      return this.$store.getters['todoInfo/getMenuTodoInfo'](cardMenu?.menu?.guid)?.totalCount || 0\r\n    },\r\n    // card按钮点击事件\r\n    onClickBtn(obj = {}, index) {\r\n      // 按钮触发，事件回调\r\n      let newData = Object.assign({}, obj, { type: this.cardMenuIn.type, rowNo: this.rowNumber, seq: this.seqIn, menu: this.cardMenuIn.menu })\r\n      this.bsCardClickEvent(newData)\r\n    },\r\n\r\n    // 点击事件回调\r\n    bsCardClickEvent(obj) {\r\n      let self = this\r\n      let methods = this.cardMenuIn.methods\r\n      if (obj.code) {\r\n        // this.cardMenuIn.menu 里面的children不对。直接从sysmenu里取吧，这里只给GUID\r\n        if (obj.code === 'agentItem') {\r\n          this.$emit('generateCardBtns', '0', this.cardMenuIn.menu.guid)\r\n        } else if (obj.code === 'doneItem') {\r\n          this.$emit('generateCardBtns', '1', this.cardMenuIn.menu.guid)\r\n        } else if (obj.code === 'oprateGuide') {\r\n          this.$emit('generateCardBtns', '2', this.cardMenuIn.menu.guid)\r\n        }\r\n      }\r\n      if (typeof obj.callback === 'function') {\r\n        // 方式一: 工具栏按钮点击事件回调\r\n        obj.callback(obj, self)\r\n      } else {\r\n        // 方式二: toolbar事件代理\r\n        typeof methods.bsCardClickEvent === 'function' &&\r\n          methods.bsCardClickEvent(obj, self)\r\n      }\r\n    },\r\n\r\n    initCardMenu() {\r\n      let menuCp = extend(true, {}, this.cardMenuIn)\r\n      let cardMenuInTemp = extend(true, defaultCardConfig, defaultCardData, this.cardMenuIn)\r\n      if (menuCp.buttons && menuCp.buttons.length) {\r\n        cardMenuInTemp.buttons = menuCp.buttons\r\n      }\r\n\r\n      this.cardMenuIn = extend(true, {}, cardMenuInTemp)\r\n      // console.log('77', { ...this.cardMenuIn })\r\n    },\r\n    getStyleLevel1(item) {\r\n      try {\r\n        // 为啥不直接用中文？因为有个书包不会配nginx\r\n        let title = getPinYinFirstCharacter(item.title, '', true)\r\n        return require('@/components/CardMenu/imgSvg/' + title + '.svg')\r\n      } catch {\r\n        return require('@/components/CardMenu/imgSvg/default.svg')\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n\r\n  },\r\n  mounted() {\r\n  },\r\n  watch: {\r\n    cardGlobal: {\r\n      handler(newValue, oldValue) {\r\n        this.cardGlobalIn = Object.assign({}, this.cardGlobalIn, newValue)\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    },\r\n    cardMenu: {\r\n      handler(newValue, oldValue) {\r\n        this.cardMenuIn = extend(true, {}, newValue)\r\n        this.initCardMenu()\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    },\r\n    rowNo(newValue) {\r\n      this.rowNumber = newValue\r\n    },\r\n    seq(newValue) {\r\n      this.seqIn = newValue\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style  lang=\"scss\">\r\n  .card-content{\r\n    width: 356px;\r\n    height: 224px;\r\n    background: #FFFFFF;\r\n    box-shadow: 0 0 12px 0 var(--primary-color-shadow);\r\n    border-radius: 2px;\r\n    padding: 0 5px 10px 5px;\r\n    color: #2E3133;\r\n    box-sizing: border-box;\r\n    display: inline-block;\r\n    position: relative;\r\n    overflow: hidden;\r\n    margin: 20px 0px 0 0px;\r\n    .content-bg{\r\n      width: 240px;\r\n      height: 240px;\r\n      position: absolute;\r\n      right: -42px;\r\n      top: -89px;\r\n    }\r\n    .card-title{\r\n      height: 60px;\r\n      padding: 22px 19px 12px 19px;\r\n      .icon_box{\r\n        height: 60px;\r\n        width: 60px;\r\n        border-radius: 50%;\r\n        text-align: center;\r\n        img{\r\n          color:#fff;\r\n          height: 30px;\r\n          width: 30px;\r\n          margin-top: 15px;\r\n          // filter: drop-shadow(#fff 0px 0px)\r\n          stroke: #fff;\r\n        }\r\n      }\r\n      .custom-title-icon{\r\n        width: 60px;\r\n        height: 60px;\r\n        font-size: 60px;\r\n        line-height: 60px;\r\n      }\r\n      .custom-title{\r\n        display: inline-block;\r\n        width: 220px;\r\n        font-size: 22px;\r\n        color: #2E3133;\r\n        letter-spacing: 0;\r\n        text-align: left;\r\n        margin-left: 13px;\r\n        vertical-align: middle;\r\n      }\r\n    }\r\n\r\n    .card-btns{\r\n      display: grid;\r\n      grid-template-columns: 1fr 1fr;\r\n      font-size: 0;\r\n      .base-font{\r\n        font-size: 18px;\r\n      }\r\n      .card-btn{\r\n        min-width: 163px;\r\n        height: 50px;\r\n        background: #E3F2FE;\r\n        padding: 15px 24px;\r\n        font-size: 16px;\r\n        color: #2E3133;\r\n        text-align: left;\r\n        font-weight: unset;\r\n        border-radius: 0px;\r\n        position: relative;\r\n        margin: 10px 5px 0px 5px;\r\n        .btn-num{\r\n          position: absolute;\r\n          right: 10px;\r\n          top: 50%;\r\n          transform: translateY(-50%);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          font-size: 12px;\r\n\r\n          &.todo-num-bg {\r\n            min-width: 20px;\r\n            height: 20px;\r\n            border-radius: 10px;\r\n            padding: 4px;\r\n            box-sizing: border-box;\r\n            background: #ED411E;\r\n            color: #fff;\r\n          }\r\n        }\r\n      }\r\n      .icon-class{\r\n        margin-top: -3px;\r\n        color: var(--btn-iconColor);\r\n      }\r\n\r\n      .btn-hover__class{\r\n        background-color: var(--btn-btnColor);\r\n        border-color: var(--btn-btnColor);\r\n      }\r\n      .btn-hover__class:hover, .btn-hover__class:active, .btn-active{\r\n        background-color: var(--btn-iconColor);\r\n        border-color: var(--btn-iconColor);\r\n        color: #fff;\r\n        .icon-class{\r\n          color: #fff;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]}]}