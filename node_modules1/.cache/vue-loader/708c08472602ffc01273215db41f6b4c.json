{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\CardMenu\\other\\menuTree\\components\\TreeRender.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\CardMenu\\other\\menuTree\\components\\TreeRender.vue","mtime":1694505521363},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZ2xvYmFsQ29uZmlnIGZyb20gJy4uLy4uLy4uLy4uL0dsb2JhbENvbmZpZy9pbmRleC5qcycNCmltcG9ydCBNZW51TW9kdWxlIGZyb20gJ0AvYXBpL2ZyYW1lL2NvbW1vbi9tZW51LmpzJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHt9LA0KICBuYW1lOiAnTWVudVRyZWUnLA0KICBwcm9wczogew0KICAgIHRyZWVEYXRhOiB7DQogICAgICB0eXBlOiBbQXJyYXksIE9iamVjdF0sDQogICAgICAvLyByZXF1aXJlZDogdHJ1ZSwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IHt9DQogICAgfQ0KICB9LA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcmVuZGVyVGlwOiBnbG9iYWxDb25maWcuaG9tZUNhcmQuc2hvd1RpcCwNCiAgICAgIGtleVdvcmQ6ICcnLA0KICAgICAgbWVudURhdGE6IHRoaXMuZGF0YQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHt9LA0KICBtZXRob2RzOiB7DQogICAgaW5wdXQgKHZhbCkgew0KICAgICAgY29uc29sZS5sb2codmFsKQ0KICAgIH0sDQogICAgb25NZW51U2VsZWN0Q2hhbmdlKG9iaikgew0KICAgICAgbGV0IHNlbGYgPSB0aGlzDQogICAgICBpZiAob2JqLnBhcmFtNSAmJiBvYmoucGFyYW01LmluZGV4T2YoJ25lZWRjaGVjaz10cnVlJykgPj0gMCkgeyAvLyDpnIDopoHmoKHpqoznvJbmiqXmmK/lkKblt7LlhbPpl60NCiAgICAgICAgbGV0IHBhcmFtcyA9IHsNCiAgICAgICAgICBtZW51Z3VpZDogb2JqLmd1aWQsDQogICAgICAgICAgYXBwZ3VpZDogb2JqLmFwcGlkLA0KICAgICAgICAgIGFwcGlkOiBvYmouYXBwc3lzaWQsDQogICAgICAgICAgc3BlY3JvbGVndWlkOiAnJywNCiAgICAgICAgICByb2xlZ3VpZDogb2JqLnJvbGVndWlkIH0NCiAgICAgICAgTWVudU1vZHVsZS5nZXRGYlBhZ2VDb25maWcocGFyYW1zKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgaWYgKHJlcykgew0KICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMTAwMDAwJykgew0KICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG9iaiwgcmVzKQ0KICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuaXNidWRnZXRiZWdpbiA9PT0gMCAmJiByZXMuZGF0YS5kYXRhdHlwZSAhPT0gOCkgew0KICAgICAgICAgICAgICAgIHNlbGYuJFhNb2RhbC5tZXNzYWdlKHsgc3RhdHVzOiAnaW5mbycsIG1lc3NhZ2U6ICfpooTnrpfnvJbmiqXlt7LlhbPpl60nIH0pDQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgc2VsZi4kc3RvcmUuY29tbWl0KCdzZXRDdXJNZW51T2JqJywgb2JqKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZXJyb3JJbmZvcikNCiAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7DQogICAgICAgICAgICAgICAgc2VsZi4kWE1vZGFsLm1lc3NhZ2UoeyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6IHJlcy5lcnJvckluZm9yLnJlc3BvbnNlLmRhdGEubXNnIH0pDQogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLm1zZykgew0KICAgICAgICAgICAgICAgIHNlbGYuJFhNb2RhbC5tZXNzYWdlKHsgc3RhdHVzOiAnZXJyb3InLCBtZXNzYWdlOiBg6ZSZ6K+v77yaWyR7cmVzLmNvZGV9LSR7cmVzLm1zZ31dYCB9KQ0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlcy5tZXNzYWdlKSB7DQogICAgICAgICAgICAgICAgdGhpcy4kWE1vZGFsLm1lc3NhZ2UoeyBzdGF0dXM6ICdlcnJvcicsIG1lc3NhZ2U6IGDplJnor6/vvJpbJHtyZXMuY29kZX0tJHtyZXMubWVzc2FnZX1dYCB9KQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHNlbGYuJFhNb2RhbC5tZXNzYWdlKHsgc3RhdHVzOiAnZXJyb3InLCBtZXNzYWdlOiAn5pyq55+l6ZSZ6K+vJyB9KQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHNlbGYuJFhNb2RhbC5tZXNzYWdlKHsgc3RhdHVzOiAnZXJyb3InLCBtZXNzYWdlOiAn5pyN5Yqh6ZSZ6K+v77yM6K+35p+l55yL5pel5b+XJyB9KQ0KICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkuY2F0Y2goZSA9PiB7DQogICAgICAgICAgc2VsZi4kbWVzc2FnZSgn6I635Y+W6aKE566X57yW5oql54q25oCB5aSx6LSl77yaJyArIGUubWVzc2FnZSkNCiAgICAgICAgfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q3VyTWVudU9iaicsIG9iaikNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldFJvdXRlcih2YWx1ZSkgew0KICAgICAgbGV0IGFyciA9IFtdDQogICAgICBhcnIucHVzaCh2YWx1ZSkNCiAgICAgIGxldCB2YWx1ZU51bSA9IGFyci5zbGljZSgwLCBhcnIubGVuZ3RoICsgMSkNCiAgICAgIGlmICh2YWx1ZU51bVswXS5uYW1lID09PSB2YWx1ZU51bVswXS5mX0Z1bGxOYW1lKSB7DQogICAgICAgIHRoaXMub25NZW51U2VsZWN0Q2hhbmdlKHZhbHVlKQ0KICAgICAgfQ0KICAgIH0sDQogICAgdHJlZUZpbmRQYXRoICh0cmVlLCBmdW5jLCBwYXRoID0gW10pIHsNCiAgICAgIGlmICghdHJlZSkgcmV0dXJuIFtdDQogICAgICBmb3IgKGNvbnN0IGRhdGEgb2YgdHJlZSkgew0KICAgICAgICBwYXRoLnB1c2goZGF0YS5pZCkNCiAgICAgICAgaWYgKGZ1bmMoZGF0YSkpIHJldHVybiBwYXRoDQogICAgICAgIGlmIChkYXRhLmNoaWxkcmVuKSB7DQogICAgICAgICAgY29uc3QgZmluZENoaWxkcmVuID0gdGhpcy50cmVlRmluZFBhdGgoZGF0YS5jaGlsZHJlbiwgZnVuYywgcGF0aCkNCiAgICAgICAgICBpZiAoZmluZENoaWxkcmVuLmxlbmd0aCkgcmV0dXJuIGZpbmRDaGlsZHJlbg0KICAgICAgICB9DQogICAgICAgIHBhdGgucG9wKCkNCiAgICAgIH0NCiAgICAgIHJldHVybiBbXQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCAoKSB7DQogIH0sDQogIG1vdW50ZWQgKCkgew0KDQogIH0sDQogIHdhdGNoOiB7DQogICAgdHJlZURhdGE6IHsNCiAgICAgIGhhbmRsZXIgKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgew0KICAgICAgICB0aGlzLmRhdGEgPSBuZXdWYWx1ZQ0KICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpDQogICAgICB9LA0KICAgICAgZGVlcDogdHJ1ZSwNCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["TreeRender.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TreeRender.vue","sourceRoot":"src/components/CardMenu/other/menuTree/components","sourcesContent":["<!-- 功能菜单 -->\r\n<template>\r\n  <div class=\"tree-box\">\r\n    <ul v-for=\"(item, index) in data\" :key=\"index\">\r\n      <li>\r\n        <div class=\"tree-list-box\">\r\n          <div\r\n            class=\"left\"\r\n            :style=\"{ width: `${206 - item.level * 10}px` }\"\r\n          >{{ item.name }}</div>\r\n          <div\r\n            v-if=\"item.subList\"\r\n            class=\"right\"\r\n          >\r\n            <span v-for=\"(it, idx) in item.subList\" :key=\"idx\" @click=\"getRouter(it)\">\r\n              <el-tooltip v-if=\"it.name.length > 8 && renderTip\" class=\"item\" effect=\"dark\" :content=\"it.name\" placement=\"top-start\">\r\n                <strong>{{ it.name }}</strong>\r\n              </el-tooltip>\r\n              <i v-else> {{ it.name }}</i>\r\n            </span>\r\n          </div>\r\n          <div style=\"clear: both;\"></div>\r\n        </div>\r\n        <menu-tree v-if=\"item.children && item.children.length > 0\" :tree-data=\"item.children\" />\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport globalConfig from '../../../../GlobalConfig/index.js'\r\nimport MenuModule from '@/api/frame/common/menu.js'\r\n\r\nexport default {\r\n  components: {},\r\n  name: 'MenuTree',\r\n  props: {\r\n    treeData: {\r\n      type: [Array, Object],\r\n      // required: true,\r\n      default: () => {}\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      renderTip: globalConfig.homeCard.showTip,\r\n      keyWord: '',\r\n      menuData: this.data\r\n    }\r\n  },\r\n  computed: {},\r\n  methods: {\r\n    input (val) {\r\n      console.log(val)\r\n    },\r\n    onMenuSelectChange(obj) {\r\n      let self = this\r\n      if (obj.param5 && obj.param5.indexOf('needcheck=true') >= 0) { // 需要校验编报是否已关闭\r\n        let params = {\r\n          menuguid: obj.guid,\r\n          appguid: obj.appid,\r\n          appid: obj.appsysid,\r\n          specroleguid: '',\r\n          roleguid: obj.roleguid }\r\n        MenuModule.getFbPageConfig(params).then(res => {\r\n          if (res) {\r\n            if (res.code === '100000') {\r\n              Object.assign(obj, res)\r\n              if (res.data.isbudgetbegin === 0 && res.data.datatype !== 8) {\r\n                self.$XModal.message({ status: 'info', message: '预算编报已关闭' })\r\n              } else {\r\n                self.$store.commit('setCurMenuObj', obj)\r\n              }\r\n            } else {\r\n              console.log(res.errorInfor)\r\n              if (res.code === 0) {\r\n                self.$XModal.message({ status: 'error', message: res.errorInfor.response.data.msg })\r\n              } else if (res.msg) {\r\n                self.$XModal.message({ status: 'error', message: `错误：[${res.code}-${res.msg}]` })\r\n              } else if (res.message) {\r\n                this.$XModal.message({ status: 'error', message: `错误：[${res.code}-${res.message}]` })\r\n              } else {\r\n                self.$XModal.message({ status: 'error', message: '未知错误' })\r\n              }\r\n            }\r\n          } else {\r\n            self.$XModal.message({ status: 'error', message: '服务错误，请查看日志' })\r\n            console.log(res)\r\n          }\r\n        }).catch(e => {\r\n          self.$message('获取预算编报状态失败：' + e.message)\r\n        })\r\n      } else {\r\n        this.$store.commit('setCurMenuObj', obj)\r\n      }\r\n    },\r\n    getRouter(value) {\r\n      let arr = []\r\n      arr.push(value)\r\n      let valueNum = arr.slice(0, arr.length + 1)\r\n      if (valueNum[0].name === valueNum[0].f_FullName) {\r\n        this.onMenuSelectChange(value)\r\n      }\r\n    },\r\n    treeFindPath (tree, func, path = []) {\r\n      if (!tree) return []\r\n      for (const data of tree) {\r\n        path.push(data.id)\r\n        if (func(data)) return path\r\n        if (data.children) {\r\n          const findChildren = this.treeFindPath(data.children, func, path)\r\n          if (findChildren.length) return findChildren\r\n        }\r\n        path.pop()\r\n      }\r\n      return []\r\n    }\r\n  },\r\n  created () {\r\n  },\r\n  mounted () {\r\n\r\n  },\r\n  watch: {\r\n    treeData: {\r\n      handler (newValue, oldValue) {\r\n        this.data = newValue\r\n        this.$forceUpdate()\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.tree-box{\r\n  ul{\r\n    margin-left: 10px;\r\n    .tree-list-box{\r\n      line-height: 25px;\r\n      display: flex;\r\n      .left{\r\n        width: 206px;\r\n        padding-right: 16px;\r\n        font-size: 14px;\r\n        font-weight: 700;\r\n        box-sizing: border-box;\r\n      }\r\n      strong, i{\r\n        font-style: normal;\r\n        font-weight: normal;\r\n      }\r\n      .right{\r\n\r\n        flex: 1;\r\n        cursor: pointer;\r\n        span{\r\n          margin-right: 18px;\r\n          color: var(--menu-item-color);\r\n          display: inline-block;\r\n          width: 240px;\r\n          overflow: hidden;\r\n          white-space: nowrap;\r\n          text-overflow: ellipsis;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}