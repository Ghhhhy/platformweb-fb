{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\warningOverview\\components\\RuleScroll.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\warningOverview\\components\\RuleScroll.vue","mtime":1694576524801},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIHJlZiwgdW5yZWYsIG9uTW91bnRlZCwgb25CZWZvcmVVbm1vdW50LCB3YXRjaCwgbmV4dFRpY2sgfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaScNCmltcG9ydCBTd2lwZXIgZnJvbSAnc3dpcGVyJw0KDQppbXBvcnQgeyBnZXRMYXRlc3REYXRhIH0gZnJvbSAnQC9hcGkvZnJhbWUvbWFpbi93YXJuaW5nT3ZlcnZpZXcnDQoNCmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7DQogIHNldHVwKCkgew0KICAgIC8vIOinhOWImeWIl+ihqOaVsOaNrg0KICAgIGNvbnN0IG5ld3MgPSByZWYoW10pDQoNCiAgICAvLyDlrprml7blmagNCiAgICBsZXQgdGltZXIgPSBudWxsDQogICAgLy8g6Ze06ZqUDQogICAgY29uc3QgaW50ZXJ2YWwgPSA2MDAwMCAqIDUNCg0KICAgIGNvbnN0IGdldExhdGVzdERhdGFIYW5kbGUgPSBhc3luYyAoKSA9PiB7DQogICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGdldExhdGVzdERhdGEoKQ0KICAgICAgbmV3cy52YWx1ZSA9IGRhdGEgfHwgW10NCiAgICAgIHRpbWVyID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4gew0KICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGdldExhdGVzdERhdGEoKQ0KICAgICAgICBuZXdzLnZhbHVlID0gZGF0YSB8fCBbXQ0KICAgICAgfSwgaW50ZXJ2YWwpDQogICAgfQ0KDQogICAgLy8g5piv5ZCm5pi+56S65b2T5YmN6KeE5YiZ55qE5Zu+5qCHDQogICAgY29uc3Qgc2hvd1J1bGVDdXJyZW50U3ltYm9sID0gcmVmKHRydWUpDQoNCiAgICAvLyBzd2lwZXLlrp7kvosNCiAgICBsZXQgc3dpcGVySW5zdGFuY2UgPSBudWxsDQoNCiAgICAvLyBzd2lwZXLlj4LmlbDphY3nva4NCiAgICBjb25zdCBzd2lwZXJPcHRpb24gPSB7DQogICAgICBkaXJlY3Rpb246ICd2ZXJ0aWNhbCcsDQogICAgICBoZWlnaHQ6IDI0MCwNCiAgICAgIHNsaWRlc1BlclZpZXc6IDUsDQogICAgICAvLyDlvqrnjq/liIfmjaINCiAgICAgIGxvb3A6IHsNCiAgICAgICAgbG9vcDogdHJ1ZSwNCiAgICAgICAgbG9vcGVkU2xpZGVzOiA3DQogICAgICB9LA0KICAgICAgLy8g6Ieq5Yqo5YiH5o2iDQogICAgICBhdXRvcGxheTogew0KICAgICAgICBkZWxheTogMjAwMCwNCiAgICAgICAgZGlzYWJsZU9uSW50ZXJhY3Rpb246IGZhbHNlDQogICAgICB9LA0KICAgICAgZWZmZWN0czogew0KICAgICAgICBlZmZlY3Q6ICdmYWRlJw0KICAgICAgfSwNCiAgICAgIC8vIOWIh+aNoumAn+W6pg0KICAgICAgc3BlZWQ6IDQwMCwNCiAgICAgIHRvdWNoZXM6IHsNCiAgICAgICAgc2ltdWxhdGVUb3VjaDogZmFsc2UNCiAgICAgIH0sDQogICAgICBvYnNlcnZlcjogdHJ1ZSwNCiAgICAgIG9ic2VydmVQYXJlbnRzOiB0cnVlLA0KICAgICAgLy8g55uR5ZCs5pe26Ze0DQogICAgICBvbjogew0KICAgICAgICBzbGlkZUNoYW5nZVRyYW5zaXRpb25TdGFydCgpIHsNCiAgICAgICAgICBzaG93UnVsZUN1cnJlbnRTeW1ib2wudmFsdWUgPSBmYWxzZQ0KICAgICAgICB9LA0KICAgICAgICBzbGlkZUNoYW5nZVRyYW5zaXRpb25FbmQoKSB7DQogICAgICAgICAgc2hvd1J1bGVDdXJyZW50U3ltYm9sLnZhbHVlID0gdHJ1ZQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIC8qKg0KICAgICAqIOWIneWni+WMlnN3aXBlcg0KICAgICAqLw0KICAgIGNvbnN0IGluaXRTd2lwZXIgPSAoKSA9PiB7DQogICAgICBuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHN3aXBlckluc3RhbmNlID0gbmV3IFN3aXBlcignLnJ1bGUtc3dpcGVyLWNvbnRhaW5lcicsIHN3aXBlck9wdGlvbikNCiAgICAgIH0pDQogICAgfQ0KDQogICAgLyoqDQogICAgICog6byg5qCH56e75YWlID0+IOaaguWBnHN3aXBlcg0KICAgICAqLw0KICAgIGNvbnN0IHN3aXBlckVudGVySGFuZGxlID0gKCkgPT4gew0KICAgICAgc3dpcGVySW5zdGFuY2U/LmF1dG9wbGF5Py5zdG9wKCkNCiAgICB9DQogICAgLyoqDQogICAgICog6byg5qCH56e75Ye6ID0+IOW8gOWQr3N3aXBlcg0KICAgICAqLw0KICAgIGNvbnN0IHN3aXBlckxlYXZlSGFuZGxlID0gKCkgPT4gew0KICAgICAgc3dpcGVySW5zdGFuY2U/LmF1dG9wbGF5Py5zdGFydCgpDQogICAgfQ0KDQogICAgLyoqDQogICAgICog56aB5q2ic3dpcGVyDQogICAgICovDQogICAgY29uc3QgZGlzYWJsZVN3aXBlciA9ICgpID0+IHsNCiAgICAgIHN3aXBlck9wdGlvbi5sb29wID0gZmFsc2UNCiAgICAgIHN3aXBlck9wdGlvbi5hdXRvcGxheSA9IGZhbHNlDQogICAgICBzd2lwZXJPcHRpb24uZW5hYmxlZCA9IGZhbHNlDQogICAgICBpbml0U3dpcGVyKCkNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDlkK/nlKhzd2lwZXINCiAgICAgKi8NCiAgICBjb25zdCBlbmFibGVTd2lwZXIgPSAoKSA9PiB7DQogICAgICBzd2lwZXJPcHRpb24ubG9vcCA9IHsgbG9vcDogdHJ1ZSwgbG9vcGVkU2xpZGVzOiA3IH0NCiAgICAgIHN3aXBlck9wdGlvbi5hdXRvcGxheSA9IHsgZGVsYXk6IDIwMDAsIGRpc2FibGVPbkludGVyYWN0aW9uOiBmYWxzZSB9DQogICAgICBzd2lwZXJPcHRpb24uZW5hYmxlZCA9IHRydWUNCiAgICAgIGluaXRTd2lwZXIoKQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqIOabtOWDj3N3aXBlcg0KICAgICAqLw0KICAgIGNvbnN0IHVwZGF0ZVN3aXBlciA9ICgpID0+IHsNCiAgICAgIHVucmVmKG5ld3MpPy5sZW5ndGggPD0gNSA/IGRpc2FibGVTd2lwZXIoKSA6IGVuYWJsZVN3aXBlcigpDQogICAgfQ0KDQogICAgd2F0Y2gobmV3cywgKCkgPT4gew0KICAgICAgdXBkYXRlU3dpcGVyKCkNCiAgICB9LCB7IGRlZXA6IHRydWUgfSkNCg0KICAgIG9uTW91bnRlZCgoKSA9PiB7DQogICAgICBnZXRMYXRlc3REYXRhSGFuZGxlKCkNCiAgICB9KQ0KDQogICAgb25CZWZvcmVVbm1vdW50KCgpID0+IHsNCiAgICAgIHRpbWVyICYmIGNsZWFySW50ZXJ2YWwodGltZXIpDQogICAgfSkNCg0KICAgIHJldHVybiB7DQogICAgICBuZXdzLA0KICAgICAgc2hvd1J1bGVDdXJyZW50U3ltYm9sLA0KICAgICAgc3dpcGVyRW50ZXJIYW5kbGUsDQogICAgICBzd2lwZXJMZWF2ZUhhbmRsZQ0KICAgIH0NCiAgfQ0KfSkNCg=="},{"version":3,"sources":["RuleScroll.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RuleScroll.vue","sourceRoot":"src/views/main/warningOverview/components","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"f20 rule-swiper-title\">实时触发规则滚动显示图</div>\r\n    <div v-if=\"!news.length\">\r\n      <BsEmpty />\r\n    </div>\r\n    <div\r\n      v-else\r\n      class=\"rule-handle-container\"\r\n      @mouseenter=\"swiperEnterHandle\"\r\n      @mouseleave=\"swiperLeaveHandle\"\r\n    >\r\n      <transition name=\"ruleSymbolShow\">\r\n        <div\r\n          v-show=\"showRuleCurrentSymbol\"\r\n          class=\"rule-current-symbol\"\r\n        >\r\n        </div>\r\n      </transition>\r\n      <div class=\"swiper-container swiper-no-swiping rule-swiper-container\">\r\n        <div class=\"swiper-wrapper\">\r\n          <div\r\n            v-for=\"(item, index) in news\"\r\n            :key=\"index\"\r\n            class=\"swiper-slide rule-swiper-slide\"\r\n          >\r\n            <el-tooltip class=\"item\" effect=\"light\" :content=\"`${item.fiRuleCode || item.firulecode}-${item.fiRuleName || item.firulename}`\" placement=\"top-start\">\r\n              <div class=\"rule-content\">{{ item.fiRuleCode || item.firulecode }}-{{ item.fiRuleName || item.firulename }}</div>\r\n            </el-tooltip>\r\n            <div class=\"right-time\">\r\n              <span>{{ item.createTime }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref, unref, onMounted, onBeforeUnmount, watch, nextTick } from '@vue/composition-api'\r\nimport Swiper from 'swiper'\r\n\r\nimport { getLatestData } from '@/api/frame/main/warningOverview'\r\n\r\nexport default defineComponent({\r\n  setup() {\r\n    // 规则列表数据\r\n    const news = ref([])\r\n\r\n    // 定时器\r\n    let timer = null\r\n    // 间隔\r\n    const interval = 60000 * 5\r\n\r\n    const getLatestDataHandle = async () => {\r\n      const { data } = await getLatestData()\r\n      news.value = data || []\r\n      timer = setInterval(async () => {\r\n        const { data } = await getLatestData()\r\n        news.value = data || []\r\n      }, interval)\r\n    }\r\n\r\n    // 是否显示当前规则的图标\r\n    const showRuleCurrentSymbol = ref(true)\r\n\r\n    // swiper实例\r\n    let swiperInstance = null\r\n\r\n    // swiper参数配置\r\n    const swiperOption = {\r\n      direction: 'vertical',\r\n      height: 240,\r\n      slidesPerView: 5,\r\n      // 循环切换\r\n      loop: {\r\n        loop: true,\r\n        loopedSlides: 7\r\n      },\r\n      // 自动切换\r\n      autoplay: {\r\n        delay: 2000,\r\n        disableOnInteraction: false\r\n      },\r\n      effects: {\r\n        effect: 'fade'\r\n      },\r\n      // 切换速度\r\n      speed: 400,\r\n      touches: {\r\n        simulateTouch: false\r\n      },\r\n      observer: true,\r\n      observeParents: true,\r\n      // 监听时间\r\n      on: {\r\n        slideChangeTransitionStart() {\r\n          showRuleCurrentSymbol.value = false\r\n        },\r\n        slideChangeTransitionEnd() {\r\n          showRuleCurrentSymbol.value = true\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * 初始化swiper\r\n     */\r\n    const initSwiper = () => {\r\n      nextTick(() => {\r\n        swiperInstance = new Swiper('.rule-swiper-container', swiperOption)\r\n      })\r\n    }\r\n\r\n    /**\r\n     * 鼠标移入 => 暂停swiper\r\n     */\r\n    const swiperEnterHandle = () => {\r\n      swiperInstance?.autoplay?.stop()\r\n    }\r\n    /**\r\n     * 鼠标移出 => 开启swiper\r\n     */\r\n    const swiperLeaveHandle = () => {\r\n      swiperInstance?.autoplay?.start()\r\n    }\r\n\r\n    /**\r\n     * 禁止swiper\r\n     */\r\n    const disableSwiper = () => {\r\n      swiperOption.loop = false\r\n      swiperOption.autoplay = false\r\n      swiperOption.enabled = false\r\n      initSwiper()\r\n    }\r\n\r\n    /**\r\n     * 启用swiper\r\n     */\r\n    const enableSwiper = () => {\r\n      swiperOption.loop = { loop: true, loopedSlides: 7 }\r\n      swiperOption.autoplay = { delay: 2000, disableOnInteraction: false }\r\n      swiperOption.enabled = true\r\n      initSwiper()\r\n    }\r\n\r\n    /**\r\n     * 更像swiper\r\n     */\r\n    const updateSwiper = () => {\r\n      unref(news)?.length <= 5 ? disableSwiper() : enableSwiper()\r\n    }\r\n\r\n    watch(news, () => {\r\n      updateSwiper()\r\n    }, { deep: true })\r\n\r\n    onMounted(() => {\r\n      getLatestDataHandle()\r\n    })\r\n\r\n    onBeforeUnmount(() => {\r\n      timer && clearInterval(timer)\r\n    })\r\n\r\n    return {\r\n      news,\r\n      showRuleCurrentSymbol,\r\n      swiperEnterHandle,\r\n      swiperLeaveHandle\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.rule-swiper-title {\r\n  padding: 16px 22px;\r\n  font-size: 16px;\r\n  color: #595959;\r\n  line-height: 26px;\r\n  font-weight: bold;\r\n  box-sizing: border-box;\r\n}\r\n.rule-swiper-container {\r\n  height: 240px;\r\n  width: 100%;\r\n  padding: 0 24px;\r\n  box-sizing: border-box;\r\n\r\n  .rule-swiper-slide {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    height: 48px !important;\r\n    border-top: 1px solid #e0e0e0;\r\n    box-sizing: border-box;\r\n\r\n    &:last-child {\r\n      border-bottom: 1px solid #e0e0e0;\r\n    }\r\n\r\n    .rule-content {\r\n      width: 362px;\r\n      overflow: hidden;\r\n      white-space: nowrap;\r\n      text-overflow: ellipsis;\r\n      font-size: 14px;\r\n      color: #2E3133;\r\n    }\r\n\r\n    .right-time {\r\n      font-size: 12px;\r\n      color: #8A9299;\r\n    }\r\n  }\r\n}\r\n\r\n.rule-handle-container {\r\n  position: relative;\r\n\r\n  .rule-current-symbol {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    height: 48px;\r\n    display: flex;\r\n    align-items: center;\r\n    border-left: 4px solid #2A8BFD;\r\n\r\n    &::after {\r\n      display: inline-block;\r\n      width: 0;\r\n      height: 0;\r\n      margin-left: 2px;\r\n      border: 6px solid transparent;\r\n      border-left-color: #2A8BFD;\r\n      content: '';\r\n    }\r\n  }\r\n}\r\n\r\n.ruleSymbolShow-leave, .ruleSymbolShow-enter-to {\r\n  opacity: 1;\r\n  transform: scale(1);\r\n  transition: all 0.1s;\r\n}\r\n.ruleSymbolShow-leave-to, .ruleSymbolShow-enter {\r\n  opacity: 0;\r\n  transform: scale(0);\r\n  transition: all 0.2s;\r\n}\r\n</style>\r\n"]}]}