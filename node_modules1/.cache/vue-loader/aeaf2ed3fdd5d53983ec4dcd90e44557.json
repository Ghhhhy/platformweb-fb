{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\GlobalSetting.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\GlobalSetting.vue","mtime":1694505522198},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnJpZ2h0LXNldHRpbmcgew0KICB6LWluZGV4OiAxMDAwOw0KICB3aWR0aDogNDVweDsNCiAgaGVpZ2h0OiAxMHB4Ow0KICBwb3NpdGlvbjogZml4ZWQ7DQogIHRvcDogNTAlOw0KICByaWdodDogLTQwcHg7DQogIHBhZGRpbmc6IDEwcHg7DQogIGJhY2tncm91bmQ6IHZhcigtLXplYnJhLWNvbG9yKTsNCiAgYm9yZGVyLXJhZGl1czogMjBweCAwIDAgMjBweDsNCiAgY29sb3I6IHZhcigtLXByaW1hcnktY29sb3IpOw0KICBkaXNwbGF5OiBmbGV4Ow0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KICBhbGlnbi1zZWxmOiBiYXNlbGluZTsNCiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0taGlnaHRsaWdodC1jb2xvcik7DQogIGJveC1zaGFkb3c6IDZweCA4cHggMjVweCAtMTJweCByZ2JhKDg2LDg2LDg2LDAuNzUpOw0KICB0cmFuc2l0aW9uOiBhbGwgMC4zczsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICBib3gtc2l6aW5nOiBjb250ZW50LWJveDsNCiAgaSB7DQogICAgZm9udC1zaXplOiAxNHB4Ow0KICB9DQogIHNwYW4gew0KICAgIGZvbnQtc2l6ZTogMTBweDsNCiAgICBsaW5lLWhlaWdodDogMTBweDsNCiAgICBwYWRkaW5nLWxlZnQ6IDNweDsNCiAgfQ0KICAmLnJpZ2h0LXRvcCB7DQogICAgdG9wOiAyNXB4Ow0KICAgIHJpZ2h0OiAwOw0KICB9DQogICY6aG92ZXIgew0KICAgIHJpZ2h0OiAwOw0KICB9DQp9DQouZ2xvYmFsLXNldHRpbmcgew0KICAuZWwtZHJhd2VyX193cmFwcGVyIHsNCiAgICB6LWluZGV4OiAxMDAhaW1wb3J0YW50Ow0KICB9DQogIGtiZCB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogaHNsKDBkZWcsIDAlLCA5OSUpOw0KICAgIGJvcmRlci1yYWRpdXM6IDNweDsNCiAgICBib3JkZXI6IDFweCBzb2xpZCBoc2woMGRlZywgMCUsIDgwJSk7DQogICAgcGFkZGluZzogNHB4IDVweDsNCiAgICBmb250LXdlaWdodDogYm9sZDsNCiAgfQ0KfQ0KLnNldHRpbmctZm9ybSB7DQogIC52eGUtZm9ybS5zaXplLS1tZWRpdW0gLnZ4ZS1mb3JtLS1pdGVtLWlubmVyIHsNCiAgICBkaXNwbGF5OiBncmlkOw0KICB9DQogIC52eGUtZm9ybS0taXRlbS10aXRsZSB7DQogICAgZm9udC1zaXplOiAxMHB4Ow0KICAgIHRleHQtYWxpZ246IGxlZnQhaW1wb3J0YW50Ow0KICB9DQogIC52eGUtZm9ybS0taXRlbSB7DQogICAgZmxvYXQ6IGluaGVyaXQhaW1wb3J0YW50Ow0KICB9DQp9DQo="},{"version":3,"sources":["GlobalSetting.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GlobalSetting.vue","sourceRoot":"src/views/main","sourcesContent":["<template>\r\n  <div class=\"global-setting\">\r\n    <el-drawer\r\n      :show-close=\"false\"\r\n      :visible.sync=\"drawer\"\r\n      direction=\"rtl\"\r\n    >\r\n      <el-container class=\"height-all\">\r\n        <el-main>\r\n          <el-row>\r\n            <BsTitle type=\"left\">\r\n              <template slot=\"default\">\r\n                界面设置\r\n              </template>\r\n            </BsTitle>\r\n          </el-row>\r\n          <el-row>\r\n            <BsForm\r\n              ref=\"form\"\r\n              class=\"setting-form\"\r\n              :is-editable=\"true\"\r\n              :form-gloabal-config=\"formGloabalConfig\"\r\n              :form-items-config=\"formItemsConfig\"\r\n              :form-data-list=\"globalSetting\"\r\n              @itemChange=\"itemChange\"\r\n            />\r\n          </el-row>\r\n          <el-row>\r\n            <div>界面缩放比率(更推荐使用浏览器自带的缩放功能&lt;<kbd>Ctrl</kbd>+<kbd>+</kbd>/<kbd>-</kbd>&gt;)</div>\r\n            <el-input-number\r\n              v-model=\"zoomSize\"\r\n              :precision=\"2\"\r\n              :step=\"0.05\"\r\n              :max=\"1.4\"\r\n              :min=\"0.7\"\r\n              size=\"small\"\r\n            />\r\n          </el-row>\r\n        </el-main>\r\n      </el-container>\r\n    </el-drawer>\r\n    <div class=\"right-setting\" :class=\"drawer ? 'right-top' : ''\" @click=\"onSettingClick\">\r\n      <i :class=\"drawer ? 'ri-close-fill' : 'ri-settings-3-fill'\"></i>\r\n      <span>{{ drawer ? '关闭' : '设置' }}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'GlobalSetting',\r\n  data() {\r\n    return {\r\n      drawer: false,\r\n      zoomSize: 1.0,\r\n      formItemsConfig: [\r\n        {\r\n          field: 'bs_table_style',\r\n          title: '表格布局样式',\r\n          span: 24,\r\n          align: 'left',\r\n          itemRender: {\r\n            name: '$vxeSelect',\r\n            props: {\r\n              size: 'mini'\r\n            },\r\n            options: [\r\n              {\r\n                label: '适中（默认）',\r\n                value: 'middle'\r\n              },\r\n              {\r\n                label: '紧凑',\r\n                value: 'narrow'\r\n              },\r\n              {\r\n                label: '宽松',\r\n                value: 'wide'\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          field: 'bs_table_border',\r\n          title: '表格边框样式',\r\n          span: 24,\r\n          align: 'left',\r\n          itemRender: {\r\n            name: '$vxeSelect',\r\n            props: {\r\n              size: 'mini'\r\n            },\r\n            options: [\r\n              {\r\n                label: '无',\r\n                value: 'transparent'\r\n              },\r\n              {\r\n                label: '浅',\r\n                value: '#e8eaec'\r\n              },\r\n              {\r\n                label: '适中（默认）',\r\n                value: '#aaaaaa'\r\n              },\r\n              {\r\n                label: '深',\r\n                value: '#212121'\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          field: 'bs_tree_style',\r\n          title: '左侧树布局样式',\r\n          span: 24,\r\n          align: 'left',\r\n          itemRender: {\r\n            name: '$vxeSelect',\r\n            props: {\r\n              size: 'mini'\r\n            },\r\n            options: [\r\n              {\r\n                label: '适中（默认）',\r\n                value: 'middle'\r\n              },\r\n              {\r\n                label: '紧凑',\r\n                value: 'narrow'\r\n              },\r\n              {\r\n                label: '宽松',\r\n                value: 'wide'\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        {\r\n          field: 'bs_modal_style',\r\n          title: '弹框标题栏样式',\r\n          span: 24,\r\n          align: 'left',\r\n          itemRender: {\r\n            name: '$vxeSelect',\r\n            props: {\r\n              size: 'mini'\r\n            },\r\n            options: [\r\n              {\r\n                label: '浅色（默认）',\r\n                value: 'light'\r\n              },\r\n              {\r\n                label: '深色',\r\n                value: 'deep'\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      ],\r\n      globalSetting: {\r\n        bs_table_style: 'middle',\r\n        bs_tree_style: 'middle',\r\n        bs_table_border: '#aaaaaa',\r\n        bs_modal_style: 'light'\r\n      },\r\n      formGloabalConfig: {\r\n        titleAlign: 'left'\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    onSettingClick() {\r\n      this.drawer = !this.drawer\r\n    },\r\n    itemChange({ data }) {\r\n      this.initStyleConfig(data)\r\n      localStorage.setItem('__boss__globalSetting__', JSON.stringify(data))\r\n    },\r\n    initGlobalSettingConfig() {\r\n      let globalSetting = localStorage.getItem('__boss__globalSetting__')\r\n      if (globalSetting) {\r\n        this.globalSetting = JSON.parse(globalSetting)\r\n        this.zoomSize = this.globalSetting.zoomSize || 1.0\r\n        this.initStyleConfig(this.globalSetting)\r\n      }\r\n    },\r\n    initStyleConfig(globalSetting) {\r\n      let root = document.querySelector(':root')\r\n      // root.style.setProperty('--blue', 'lightblue');\r\n      const calcFunc = {\r\n        bs_table_style: (value) => {\r\n          switch (value) {\r\n            case 'middle':\r\n              root.style.setProperty('--bs-table-font-size', '14px')\r\n              root.style.setProperty('--bs-table-line-height', '32px')\r\n              break\r\n            case 'narrow':\r\n              root.style.setProperty('--bs-table-font-size', '11px')\r\n              root.style.setProperty('--bs-table-line-height', '25px')\r\n              break\r\n            case 'wide':\r\n              root.style.setProperty('--bs-table-font-size', '16px')\r\n              root.style.setProperty('--bs-table-line-height', '36px')\r\n              break\r\n            default:\r\n              break\r\n          }\r\n        },\r\n        bs_tree_style: (value) => {\r\n          switch (value) {\r\n            case 'middle':\r\n              root.style.setProperty('--bs-tree-font-size', '14px')\r\n              root.style.setProperty('--bs-tree-line-height', '32px')\r\n              break\r\n            case 'narrow':\r\n              root.style.setProperty('--bs-tree-font-size', '11px')\r\n              root.style.setProperty('--bs-tree-line-height', '25px')\r\n              break\r\n            case 'wide':\r\n              root.style.setProperty('--bs-tree-font-size', '16px')\r\n              root.style.setProperty('--bs-tree-line-height', '36px')\r\n              break\r\n            default:\r\n              break\r\n          }\r\n        },\r\n        bs_table_border: (value) => {\r\n          root.style.setProperty('--table-border-color', value)\r\n        },\r\n        bs_modal_style: (value) => {\r\n          switch (value) {\r\n            case 'light':\r\n              document.body.style.setProperty('--bs-modal-background', 'var(--hightlight-color)')\r\n              document.body.style.setProperty('--bs-modal-font-color', '#606266')\r\n              document.body.style.setProperty('--bs-modal-close-hover', 'var(--primary-color)')\r\n              break\r\n            case 'deep':\r\n              document.body.style.setProperty('--bs-modal-background', 'var(--primary-color)')\r\n              document.body.style.setProperty('--bs-modal-font-color', '#333333')\r\n              document.body.style.setProperty('--bs-modal-close-hover', 'rgba(255, 255, 255, 0.8)')\r\n              break\r\n          }\r\n        }\r\n      }\r\n      for (let key of Object.keys(globalSetting)) {\r\n        if (calcFunc[key]) {\r\n          calcFunc[key](globalSetting[key])\r\n        }\r\n      }\r\n    },\r\n    setZoomSize() {\r\n      let root = document.querySelector(':root')\r\n      root.style.setProperty('--bs-zoom', this.zoomSize)\r\n      if (this.$refs.form) {\r\n        let globalSetting = this.$refs.form.getFormData()\r\n        globalSetting.zoomSize = this.zoomSize\r\n        localStorage.setItem('__boss__globalSetting__', JSON.stringify(globalSetting))\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    isHomePage() {\r\n      return this.$route.fullPath.indexOf('HomeCard') !== -1\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initGlobalSettingConfig()\r\n  },\r\n  watch: {\r\n    // isHomePage(newVal) {\r\n    //   if (newVal) {\r\n    //     this.initGlobalSettingConfig()\r\n    //   }\r\n    // }\r\n    zoomSize(newVal) {\r\n      this.setZoomSize()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.right-setting {\r\n  z-index: 1000;\r\n  width: 45px;\r\n  height: 10px;\r\n  position: fixed;\r\n  top: 50%;\r\n  right: -40px;\r\n  padding: 10px;\r\n  background: var(--zebra-color);\r\n  border-radius: 20px 0 0 20px;\r\n  color: var(--primary-color);\r\n  display: flex;\r\n  align-items: center;\r\n  align-self: baseline;\r\n  border: 1px solid var(--hightlight-color);\r\n  box-shadow: 6px 8px 25px -12px rgba(86,86,86,0.75);\r\n  transition: all 0.3s;\r\n  cursor: pointer;\r\n  box-sizing: content-box;\r\n  i {\r\n    font-size: 14px;\r\n  }\r\n  span {\r\n    font-size: 10px;\r\n    line-height: 10px;\r\n    padding-left: 3px;\r\n  }\r\n  &.right-top {\r\n    top: 25px;\r\n    right: 0;\r\n  }\r\n  &:hover {\r\n    right: 0;\r\n  }\r\n}\r\n.global-setting {\r\n  .el-drawer__wrapper {\r\n    z-index: 100!important;\r\n  }\r\n  kbd {\r\n    background-color: hsl(0deg, 0%, 99%);\r\n    border-radius: 3px;\r\n    border: 1px solid hsl(0deg, 0%, 80%);\r\n    padding: 4px 5px;\r\n    font-weight: bold;\r\n  }\r\n}\r\n.setting-form {\r\n  .vxe-form.size--medium .vxe-form--item-inner {\r\n    display: grid;\r\n  }\r\n  .vxe-form--item-title {\r\n    font-size: 10px;\r\n    text-align: left!important;\r\n  }\r\n  .vxe-form--item {\r\n    float: inherit!important;\r\n  }\r\n}\r\n</style>\r\n"]}]}