{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\basicInfoTable\\BasicGradeInfoTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\basicInfoTable\\BasicGradeInfoTable.vue","mtime":1694505521695},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdCYXNpY0dyYWRlSW5mb3JUYWJsZScsDQogIGNvbXBvbmVudHM6IHt9LA0KICBwcm9wczogew0KICAgIGlkOiB7IC8vIOihqOagvGlkDQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0ICgpIHsNCiAgICAgICAgcmV0dXJuICdncmFkZUluZm9yJw0KICAgICAgfQ0KICAgIH0sDQogICAgZGVmYXVsdE1vbmV5VW5pdDogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgICAgZGVmYXVsdCAoKSB7DQogICAgICAgIHJldHVybiAxDQogICAgICB9DQogICAgfSwNCiAgICBpdGVtc0NvbmZpZzogeyAvLyDpobnphY3nva7vvIzlj6/ku6XmmK/ltYzlpZfmlbDmja7nu5PmnoQNCiAgICAgIHR5cGU6IFtBcnJheV0sDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIHRpdGxlOiAn5Z+656GA5L+h5oGvJywNCiAgICAgICAgICAgIGNoaWxkcmVuOiBbDQogICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aXRsZTogJ+Wnk+WQjScsDQogICAgICAgICAgICAgICAgZmllbGQ6ICduYW1lJywNCiAgICAgICAgICAgICAgICB3aWR0aDogMTUwLA0KICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywNCiAgICAgICAgICAgICAgICBmaWx0ZXJzOiBmYWxzZSwNCiAgICAgICAgICAgICAgICBlZGl0UmVuZGVyOiB7DQogICAgICAgICAgICAgICAgICBuYW1lOiAnJHZ4ZUlucHV0JywNCiAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ+m7mOiupOeahOWQjeWtlycsDQogICAgICAgICAgICAgICAgICBwcm9wczogew0KICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJywNCiAgICAgICAgICAgICAgICAgICAgcmVkb25seTogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICfor7fovpPlhaXlp5PlkI0nDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGl0bGU6ICflubTpvoQnLA0KICAgICAgICAgICAgICAgIGZpZWxkOiAnYWdlJywNCiAgICAgICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSwNCiAgICAgICAgICAgICAgICB3aWR0aDogMTIwLA0KICAgICAgICAgICAgICAgIGZpbHRlcnM6IGZhbHNlLA0KICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywNCiAgICAgICAgICAgICAgICBjb21iaW5lZFR5cGU6IFsnYXZlcmFnZSddLA0KICAgICAgICAgICAgICAgIGVkaXRSZW5kZXI6IHsNCiAgICAgICAgICAgICAgICAgIG5hbWU6ICckdnhlSW5wdXQnLA0KICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAxLA0KICAgICAgICAgICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgICAgICAgICAgbWluOiAwLA0KICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbnVtYmVyJywNCiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICfmiqLovpPlhaXlubTpvoQnLA0KICAgICAgICAgICAgICAgICAgICByZWRvbmx5OiB0cnVlDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfnsbvliKsnLA0KICAgICAgICAgICAgICAgIGZpZWxkOiAnY2F0ZWdvcnknLA0KICAgICAgICAgICAgICAgIHdpZHRoOiAxNTAsDQogICAgICAgICAgICAgICAgZWRpdFJlbmRlcjogew0KICAgICAgICAgICAgICAgICAgbmFtZTogJyR2eGVTZWxlY3QnLA0KICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAn5YmN56uvJywNCiAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IFsNCiAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogJ+WJjeerrycsIGxhYmVsOiAn5YmN56uvJyB9LA0KICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiAn5ZCO56uvJywgbGFiZWw6ICflkI7nq68nIH0sDQogICAgICAgICAgICAgICAgICAgIHsgdmFsdWU6ICfov5Dnu7QnLCBsYWJlbDogJ+a1i+ivlScgfSwNCiAgICAgICAgICAgICAgICAgICAgeyB2YWx1ZTogJ+WunuaWvScsIGxhYmVsOiAn5a6e5pa9JyB9LA0KICAgICAgICAgICAgICAgICAgICB7IHZhbHVlOiAn5rWL6K+VJywgbGFiZWw6ICfmtYvor5UnIH0NCiAgICAgICAgICAgICAgICAgIF0sDQogICAgICAgICAgICAgICAgICBwcm9wczogew0KICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZTogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICfor7fovpPlhaXop5LoibInDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICBdDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICB0aXRsZTogJ+aUtuWFpee7n+iuoScsDQogICAgICAgICAgICBjaGlsZHJlbjogWw0KICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfmlLblhaUnLA0KICAgICAgICAgICAgICAgIGZpZWxkOiAnaW5jb21lJywNCiAgICAgICAgICAgICAgICBmaWVsZFR5cGU6ICdtb25leScsDQogICAgICAgICAgICAgICAgZm9ybXVsYTogJ3thZ2V9Pj0xOD9NYXRoLnBvdyh7YWdlfSw0KS8yOjAnLA0KICAgICAgICAgICAgICAgIHdpZHRoOiAxNTAsDQogICAgICAgICAgICAgICAgYWxpZ246ICdyaWdodCcsDQogICAgICAgICAgICAgICAgY2VsbFJlbmRlcjogew0KICAgICAgICAgICAgICAgICAgbmFtZTogJyR2eGVNb25leScsDQogICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IDAsDQogICAgICAgICAgICAgICAgICBwcm9wczogew0KICAgICAgICAgICAgICAgICAgICBtaW46IC0xMTExMTExMTExLA0KICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmxvYXQnDQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGl0bGU6ICfmiaPpmaQnLA0KICAgICAgICAgICAgICAgIGZpZWxkOiAnZGVkdWN0aW9uJywNCiAgICAgICAgICAgICAgICB3aWR0aDogMTUwLA0KICAgICAgICAgICAgICAgIGFsaWduOiAncmlnaHQnLA0KICAgICAgICAgICAgICAgIGVkaXRSZW5kZXI6IHsNCiAgICAgICAgICAgICAgICAgIG5hbWU6ICckdnhlTW9uZXknLA0KICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAwLA0KICAgICAgICAgICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgICAgICAgICAgbWluOiAtMTExMTExMTExMSwNCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Zsb2F0Jw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRpdGxlOiAn5aWW6YeRJywNCiAgICAgICAgICAgICAgICB3aWR0aDogMTUwLA0KICAgICAgICAgICAgICAgIGFsaWduOiAncmlnaHQnLA0KICAgICAgICAgICAgICAgIGZpZWxkOiAnYm9udXMnLA0KICAgICAgICAgICAgICAgIGVkaXRSZW5kZXI6IHsNCiAgICAgICAgICAgICAgICAgIG5hbWU6ICckdnhlTW9uZXknLA0KICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAwLA0KICAgICAgICAgICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgICAgICAgICAgbWluOiAtMTExMTExMTExMSwNCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Zsb2F0Jw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRpdGxlOiAn5a6e6ZmF5pS25YWlJywNCiAgICAgICAgICAgICAgICB3aWR0aDogMTgwLA0KICAgICAgICAgICAgICAgIGFsaWduOiAncmlnaHQnLA0KICAgICAgICAgICAgICAgIGZpZWxkOiAnYWN0dWFsSW5jb21lJywNCiAgICAgICAgICAgICAgICBlZGl0UmVuZGVyOiB7DQogICAgICAgICAgICAgICAgICBuYW1lOiAnJHZ4ZU1vbmV5JywNCiAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogMCwNCiAgICAgICAgICAgICAgICAgIHByb3BzOiB7DQogICAgICAgICAgICAgICAgICAgIG1pbjogLTExMTExMTExMTEsDQogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH1dDQogICAgICAgICAgfQ0KICAgICAgICBdDQogICAgICB9DQogICAgfSwNCiAgICBtb2RlOiB7IC8vIOaooeW8jw0KICAgICAgdHlwZTogW1N0cmluZ10sDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gJ2VkaXQnIC8vIGVkaXQo5LiA55u05L+d5oyB57yW6L6R54q25oCBKSxkZXRhaWwo5bGV56S654q25oCBKSxhY3RpdmVFZGl0KOa/gOa0u+e8lui+kSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGVkaXRDb25maWc6IHsgLy8g57yW6L6R6YWN572uDQogICAgICB0eXBlOiBbT2JqZWN0XSwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGVkaXRSdWxlczogeyAvLyDmoKHpqozop4TliJkNCiAgICAgIHR5cGU6IFtPYmplY3RdLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICBuYW1lOiBbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJywNCiAgICAgICAgICAgICAgLy8gbWVzc2FnZTogJ+WQjeensOmVv+W6pumcgOWcqCAzIOWIsCA1IOS4quWtl+espicsDQogICAgICAgICAgICAgIG1lc3NhZ2UoKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICflkI3np7Dplb/luqbpnIDlnKggMiDliLAgMjAg5Liq5a2X56ymJw0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICBtaW46IDIsDQogICAgICAgICAgICAgIG1heDogMjAsDQogICAgICAgICAgICAgIHBhdHRlcm46IC9eW2EtekEtWjAtOV9cc1x1NGUwMC1cdTlmYTVdKyQvaSwNCiAgICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJywNCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaYteensCcsDQogICAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLA0KICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlbGVzcy1lc2NhcGUNCiAgICAgICAgICAgICAgLy8gcGF0dGVybjogL15bYS16QS1aMC05X1woXClce1x9wrcu44CBXFtcXVzvvIhc77yJXOOAkFzjgJFcdTRlMDAtXHU5ZmE1XSskL2kNCiAgICAgICAgICAgICAgLy8gcGF0dGVybjogL15bYS16QS1aMC05X1woXClce1x9wrcu44CBXFtcXVzvvIhc77yJXOOAkFzjgJFcdTRlMDAtXHU5ZmE1XSskL2kNCiAgICAgICAgICAgICAgdmFsaWRhdG9yKHsgY2VsbFZhbHVlLCBydWxlLCBydWxlcywgcm93LCByb3dJbmRleCwgY29sdW1uLCBjb2x1bW5JbmRleCwgJHRhYmxlIH0pIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IGZhbHNlDQogICAgICAgICAgICAgICAgICBpZiAoY2VsbFZhbHVlLmxlbmd0aCA+PSAxMCkgew0KICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdXNlbGVzcy1lc2NhcGUNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gL15bYS16QS1aMC05X1woXClce1x9wrcu44CBXFtcXVzvvIhc77yJXOOAkFzjgJFcdTRlMDAtXHU5ZmE1XSskL2kudGVzdChjZWxsVmFsdWUpDQogICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkgew0KICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpDQogICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKA0KICAgICAgICAgICAgICAgICAgICAgICflkI3np7Dlv4XpobvkuI3og73mnInnibnmrorlrZfnrKbvvIzkuJTlrZfmlbDmlbDkuI3og73lsJHkuo4xMOS4qu+8gScNCiAgICAgICAgICAgICAgICAgICAgKSkNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgXSwNCiAgICAgICAgICBzZXg6IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nmgKfliKsnLA0KICAgICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIF0sDQogICAgICAgICAgYWdlOiBbDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5bm06b6EJywNCiAgICAgICAgICAgICAgbWluOiAxLA0KICAgICAgICAgICAgICBtYXg6IDE1MCwNCiAgICAgICAgICAgICAgdHlwZTogJ251bWJlcicsDQogICAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnDQogICAgICAgICAgICB9DQogICAgICAgICAgXSwNCiAgICAgICAgICBpbmNvbWU6IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmlLblhaUnLA0KICAgICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIF0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgcmVuZGVyQ29sdW1uc0NvbmZpZzogeyAvLyDlrp7pmYXmuLLmn5PliJcNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIFsNCiAgICAgICAgICB7IC8vIOW6j+WPtw0KICAgICAgICAgICAgdGl0bGU6ICfluo/lj7cnLA0KICAgICAgICAgICAgdHlwZTogJ3NlcScsDQogICAgICAgICAgICB3aWR0aDogODAsDQogICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsDQogICAgICAgICAgICBjbGFzc05hbWU6ICd0YWJsZS1zZXAnLA0KICAgICAgICAgICAgc29ydGFibGU6IGZhbHNlDQogICAgICAgICAgfSwNCiAgICAgICAgICB7IC8vIOW6j+WPtw0KICAgICAgICAgICAgdGl0bGU6ICfln7rmnKzkv6Hmga/lkI3np7AnLA0KICAgICAgICAgICAgYWxpZ246ICdsZWZ0JywNCiAgICAgICAgICAgIGNsYXNzTmFtZTogJ3RhYmxlLXRpdGxlJywNCiAgICAgICAgICAgIGZpZWxkOiAncmVuZGVyVGl0bGUnLA0KICAgICAgICAgICAgc29ydGFibGU6IGZhbHNlLA0KICAgICAgICAgICAgY2VsbFJlbmRlcjogew0KICAgICAgICAgICAgICBuYW1lOiAnJHZ4ZUlucHV0JywNCiAgICAgICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sDQogICAgICAgICAgLy8gew0KICAgICAgICAgIC8vICAgdGl0bGU6ICfln7rmnKzkv6Hmga/lkI3np7AnLA0KICAgICAgICAgIC8vICAgY2xhc3NOYW1lOiAndGFibGUtdGl0bGUnLA0KICAgICAgICAgIC8vICAgYWxpZ246ICdsZWZ0JywNCiAgICAgICAgICAvLyAgIHRpdGxlQWxpZ246ICdsZWZ0JywNCiAgICAgICAgICAvLyAgIGZpZWxkOiAncmVuZGVyVGl0bGUnLA0KICAgICAgICAgIC8vICAgc2xvdHM6IHsNCiAgICAgICAgICAvLyAgICAgLy8gZGVmYXVsdDogJ2V4cGFuZENvbnRlbnQnLA0KICAgICAgICAgIC8vICAgICAvLyBjb250ZW50OiAnZXhwYW5kJw0KICAgICAgICAgIC8vICAgICAvLyBjb25zdCB7ICRyb3dJbmRleCwgJHNlcSwgJHRhYmxlLCBjb2x1bW4sIGNvbHVtbkluZGV4LCBmaXhlZCwgbGV2ZWwsIHJvdywgcm93SW5kZXgsIHNlcSwgdHlwZSB9ID0gb2JqDQogICAgICAgICAgLy8gICAgIGRlZmF1bHQob2JqLCBoLCBmaXhlZFR5cGUpIHsNCiAgICAgICAgICAvLyAgICAgICBjb25zdCB7ICR0YWJsZSB9ID0gb2JqDQogICAgICAgICAgLy8gICAgICAgbGV0ICRzY29wZWRTbG90cyA9ICR0YWJsZS4kcGFyZW50LiRwYXJlbnQuJHNjb3BlZFNsb3RzDQogICAgICAgICAgLy8gICAgICAgaWYgKCRzY29wZWRTbG90cy50aXRsZVJlcXVpcmVkKSB7DQogICAgICAgICAgLy8gICAgICAgICByZXR1cm4gJHNjb3BlZFNsb3RzLnRpdGxlUmVxdWlyZWQob2JqKQ0KICAgICAgICAgIC8vICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgLy8gICAgICAgICByZXR1cm4gb2JqLnJvd1tvYmouY29sdW1uLnByb3BlcnR5XQ0KICAgICAgICAgIC8vICAgICAgIH0NCiAgICAgICAgICAvLyAgICAgfQ0KICAgICAgICAgIC8vICAgfQ0KICAgICAgICAgIC8vICAgLy8gPHRlbXBsYXRlIHYtaWY9ImlmUmVuZGVyRXhwYW5kQ29udGVudFRhYmxlIiB2LXNsb3Q6ZXhwYW5kQ29udGVudD0ieyByb3csICRyb3dJbmRleCwgcm93SW5kZXggLGZpeGVkIH0iPg0KICAgICAgICAgIC8vICAgLy8gIDx2dWUgOnJlZj0iJ2V4cGFuZENvbnRlbnRUYWJsZVJlZicgKyAoZml4ZWQgPyBmaXhlZCArIHJvd0luZGV4IDogcm93SW5kZXgpIj48L3Z1ZT4NCiAgICAgICAgICAvLyAgIC8vIDwvdGVtcGxhdGU+DQogICAgICAgICAgLy8gfSwNCiAgICAgICAgICB7IC8vIOW6j+WPtw0KICAgICAgICAgICAgdGl0bGU6ICfln7rmnKzkv6Hmga/lgLwnLA0KICAgICAgICAgICAgYWxpZ246ICdsZWZ0JywNCiAgICAgICAgICAgIHRpdGxlQWxpZ246ICdsZWZ0JywNCiAgICAgICAgICAgIGNsYXNzTmFtZTogJ3RhYmxlLXZhbHVlJywNCiAgICAgICAgICAgIGZpZWxkOiAncmVuZGVyVmFsdWUnLA0KICAgICAgICAgICAgc29ydGFibGU6IGZhbHNlLA0KICAgICAgICAgICAgZWRpdFJlbmRlcjogew0KICAgICAgICAgICAgICBuYW1lOiAnJHZ4ZUJhc2ljSW5mb1JlbmRlcmVyJywNCiAgICAgICAgICAgICAgcHJvcHM6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgXQ0KICAgICAgfQ0KICAgIH0sDQogICAgZGF0YTogeyAvLyDmlbDmja7ljIUNCiAgICAgIHR5cGU6IFtPYmplY3RdLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICBhY3R1YWxJbmNvbWU6ICc1MjAwMCcsDQogICAgICAgICAgYWdlOiAnMjcnLA0KICAgICAgICAgIGJvbnVzOiAnMTAwMDAnLA0KICAgICAgICAgIGNhdGVnb3J5OiAn5YmN56uvJywNCiAgICAgICAgICBkZWR1Y3Rpb246ICczMDAwJywNCiAgICAgICAgICBpbmNvbWU6IDUwMDAwLA0KICAgICAgICAgIG5hbWU6ICflvKDkuIknDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGNlbGxTdHlsZTogeyAvLyDljZXlhYPmoLzmoLflvI8NCiAgICAgIHR5cGU6IFtPYmplY3QsIEZ1bmN0aW9uXSwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIHRvb2xiYXJDb25maWc6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgbW9uZXlJbnB1dFN3aWNoOiB0cnVlLA0KICAgICAgICAgIHZpc2libGU6IGZhbHNlIH0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGNhbGN1bGF0ZUNvbnN0cmFpbnRDb25maWdJbjogew0KICAgICAgICBjYWxjQW5kQ29uc3RyYWludEl0ZW1Db2RlRmllbGQ6ICdtYXBpZCcsIC8vIOmFjee9ruS6hnJvd0NvZGVGb3JtdWxhQ29uZmln5pe25L2/55So55qEaXRlbWNvZGXlrZfmrrXlkI0NCiAgICAgICAgZW5hYmxlZFR5cGU6IHsgLy8g5omn6KGM5byA5YWzDQogICAgICAgICAgcGVyZm9ybUdldERhdGE6IGZhbHNlLCAvLyDlj5bmlbANCiAgICAgICAgICBwZXJmb3JtQ29sRm9ybXVsYTogdHJ1ZSwgLy8g5YiX5YWs5byPDQogICAgICAgICAgZ3JhZGVkU3VtbWFyeTogZmFsc2UsIC8vIOWIhue6p+axh+aAuw0KICAgICAgICAgIHBlcmZvcm1Sb3dDb2RlRm9ybXVsYTogdHJ1ZSwgLy8g5Y2V5YWD5qC85Lqk5Y+J6K6h566XDQogICAgICAgICAgcGVyZm9ybUNvbENvbnN0cmFpbnQ6IGZhbHNlLCAvLyDliJfnuqbmnZ8NCiAgICAgICAgICBwZXJmb3JtQ2VsbENvbnN0cmFpbnQ6IGZhbHNlLy8g5Y2V5YWD5qC857qm5p2fDQogICAgICAgIH0sDQogICAgICAgIGNvbEZvcm11bGFDb25maWc6IHsgLy8g5YWs5byP6YWN572uDQogICAgICAgICAgLy8gcm93Rm9ybXVsYU1hcD0geyAiY29sZmllbGQiOiJ7Y29sZmllbGR9W+i/kOeul+espl0iIH0NCiAgICAgICAgICAvLyBwcm9maXQ6ICd7aW5jb21lfS17dGF4fS17ZGVkdWN0aW9ufScsDQogICAgICAgIH0sDQogICAgICAgIHJvd0NvZGVGb3JtdWxhQ29uZmlnOiB7DQogICAgICAgICAgLy8g5Y2V5YWD5qC85Lqk5Y+J6K6h566XDQogICAgICAgICAgLy8gcm93Rm9ybXVsYU1hcD0geyAiY29sRmllbGQ6aXRlbWNvZGUiOiJ7dGFibGVJZDpjb2xGaWVsZDppdGVtY29kZX1b6L+Q566X56ymXSIgfQ0KICAgICAgICAgIC8vICcxMDAxOmJvbnVzJzogJ3sxMDAxOjEwMDI6aW5jb21lfSt7MTAwMToxMDAzOmJvbnVzfScsDQogICAgICAgIH0sDQogICAgICAgIGNvbnN0cmFpbnRDb25maWc6IHsgLy8g57qm5p2f6YWN572uDQoNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIHRhYmxlR2xvYmFsQ29uZmlnOiB7DQogICAgICAgIG1vdXNlQ29uZmlnOiB7IHNlbGVjdGVkOiBmYWxzZSB9LA0KICAgICAgICB0b29sdGlwQ29uZmlnOiB7IHNob3dBbGw6IGZhbHNlIH0NCiAgICAgIH0sDQogICAgICB0YWJsZUNvbmZpZzogew0KICAgICAgICBnbG9iYWxDb25maWc6IHsgLy8g5YWo5bGA6buY6K6k5riy5p+T5YiX6YWN572uDQogICAgICAgICAgLy8g5YWo5bGA6YWN572uDQogICAgICAgICAgY2hlY2tUeXBlOiAnJywgLy8gaGFzQ2hlY2tib3gg5Y+v6YCJ5YC8ICcnfHxjaGVja2JveHx8cmFkaW8NCiAgICAgICAgICBzZXE6IGZhbHNlLCAvLyDluo/lj7fliJcNCiAgICAgICAgICBjZWxsQ2xpY2tDaGVjazogZmFsc2UsIC8vIOaYr+WQpuW8gOWQr+eCueWHu+ihjOS7u+aEj+WNleWFg+agvOmAieaLqQ0KICAgICAgICAgIGZpbHRlcnM6IGZhbHNlLA0KICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwNCiAgICAgICAgICByb3dEcm9wOiBmYWxzZSwgLy8gIOaYr+WQpuW8gOWQr+WIl+aLluaLvQ0KICAgICAgICAgIG9wdGlvblNvcnQ6IGZhbHNlIC8vICDmmK/lkKbmt7vliqDlubblvIDlkK/ooYzmiYvliqjkuIrnp7vkuIvnp7vmjpLluo8NCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIHRhYmxlUmVuZGVyTWFwOiB7IC8vIOa4suafk+aVsOaNrg0KICAgICAgICBjdXJtYXA6IHsNCiAgICAgICAgICBtYXBpZDogJycsDQogICAgICAgICAgZWRpdGFibGU6IHRydWUsDQogICAgICAgICAgaW5kZXg6IDAsDQogICAgICAgICAgbmVzdEluZGV4OiAwLA0KICAgICAgICAgIGl0ZW1Db25maWc6IHt9LA0KICAgICAgICAgIHJlbmRlcjoge30sDQogICAgICAgICAgbGV2ZWw6IDAsDQogICAgICAgICAgZm9ybXVsYTogJycsDQogICAgICAgICAgcmVuZGVyVGl0bGU6ICcnLnBhZEVuZCg0ICogKDIgLSAxKSkgKyAnJywNCiAgICAgICAgICB0aXRsZTogJycsIC8vIOagh+mimA0KICAgICAgICAgIHJlbmRlckZpZWxkOiAncmVuZGVyVmFsdWUnLCAvLyDmuLLmn5PmlbDmja4NCiAgICAgICAgICBpc1RyZWU6ICdyZW5kZXIubmFtZSAkdnhlVHJlZScsIC8vIOaYr+S4jeaYr+S4i+aLieagke+8jA0KICAgICAgICAgIGZpZWxkOiAnJywgLy8g5Y6f5pys5a2X5q61DQogICAgICAgICAgbmVlZG1hcDogJycgLy8g5piv5ZCm6ZyA6KaB5Y+N5ZON5pig5bCEDQogICAgICAgIH0sDQogICAgICAgIG1hcDoge30sDQogICAgICAgIG1hcFNvdXJjZToge30sDQogICAgICAgIHJlbmRlck1hcDoge30NCiAgICAgIH0sDQogICAgICBlZGl0UnVsZXNNYXA6IHt9LA0KICAgICAgdGFibGVSZW5kZXJEYXRhOiB7fSwgLy8gdGFibGXmuLLmn5PmlbDmja4NCiAgICAgIHJlbmRlckVkaXRSdWxlczoge30sDQogICAgICB0YWJsZVJlbmRlckNvbHVtbnNDb25maWc6IFtdDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0YmFzaWNEYXRhVHlwZShvYmopIHsNCiAgICAgIC8vIOiOt+WPluaVsOaNruexu+Weiw0KICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopLnNsaWNlKDgsIC0xKQ0KICAgIH0sDQogICAgZ2V0VXVpZChoZXhEaWdpdHMgPSAnMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonKSB7IC8vIOiOt+WPlm1hcGlkDQogICAgICBsZXQgcyA9IFtdDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM2OyBpKyspIHsNCiAgICAgICAgc1tpXSA9IGhleERpZ2l0cy5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMHgxMCksIDEpDQogICAgICB9DQogICAgICBzWzE0XSA9ICc0Jw0KICAgICAgc1sxOV0gPSBoZXhEaWdpdHMuc3Vic3RyKChzWzE5XSAmIDB4MykgfCAweDgsIDEpDQogICAgICBzWzhdID0gc1sxM10gPSBzWzE4XSA9IHNbMjNdID0gJycNCiAgICAgIGxldCB1dWlkID0gcy5qb2luKCcnKQ0KICAgICAgcmV0dXJuIHV1aWQNCiAgICB9LA0KICAgIGNodW5rKGFyciwgc2l6ZSkgeyAvLyDliIbnu4QNCiAgICAgIHZhciBhcnIyID0gW10NCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSA9IGkgKyBzaXplKSB7DQogICAgICAgIGFycjIucHVzaChhcnIuc2xpY2UoaSwgaSArIHNpemUpKQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIGFycjINCiAgICB9LA0KICAgIGVkaXRDbG9zZWQob2JqLCAkYnN0YWJsZSwgJGdyaWQpIHsgLy8g57uT5p2f57yW6L6R5LqL5Lu2DQogICAgICBjb25zdCB7IG1hcCB9ID0gdGhpcy50YWJsZVJlbmRlck1hcA0KICAgICAgdGhpcy4kZW1pdCgnZWRpdENsb3NlZCcsIG9iaiwgeyAkYnN0YWJsZSwgJGdyaWQsIGJhc2ljSW5mb1RhYmxlOiB0aGlzIH0sIHsgaXRlbU1hcDogbWFwW29iai5yb3cubWFwaWRdLCBkYXRhOiB0aGlzLmdldERhdGEoKSB9KQ0KICAgICAgdGhpcy4kZW1pdCgnUHJveHlFdmVudCcsICdlZGl0Q2xvc2VkJywgb2JqLCB7ICRic3RhYmxlLCAkZ3JpZCwgYmFzaWNJbmZvVGFibGU6IHRoaXMgfSwgeyBpdGVtTWFwOiBtYXBbb2JqLnJvdy5tYXBpZF0sIGRhdGE6IHRoaXMuZ2V0RGF0YSgpIH0pDQogICAgfSwNCiAgICBlZGl0QWN0aXZlZChvYmosICRic3RhYmxlLCAkZ3JpZCkgeyAvLyDlvIDlp4vnvJbovpHkuovku7YNCiAgICAgIGNvbnN0IHsgbWFwIH0gPSB0aGlzLnRhYmxlUmVuZGVyTWFwDQogICAgICB0aGlzLiRlbWl0KCdlZGl0QWN0aXZlZCcsIG9iaiwgeyAkYnN0YWJsZSwgJGdyaWQsIGJhc2ljSW5mb1RhYmxlOiB0aGlzIH0sIHsgaXRlbU1hcDogbWFwW29iai5yb3cubWFwaWRdLCBkYXRhOiB0aGlzLmdldERhdGEoKSB9KQ0KICAgICAgdGhpcy4kZW1pdCgnUHJveHlFdmVudCcsICdlZGl0QWN0aXZlZCcsIG9iaiwgeyAkYnN0YWJsZSwgJGdyaWQsIGJhc2ljSW5mb1RhYmxlOiB0aGlzIH0sIHsgaXRlbU1hcDogbWFwW29iai5yb3cubWFwaWRdLCBkYXRhOiB0aGlzLmdldERhdGEoKSB9KQ0KICAgIH0sDQogICAgY2VsbENsaWNrKG9iaiwgJGJzdGFibGUsICRncmlkKSB7IC8vIOihjOeCueWHu+S6i+S7tg0KICAgICAgLy8gdGhpcy5pbml0RGF0YSh0aGlzLmdldERhdGEoKS5kYXRhKSAvLyDlvLrliLbop6blj5Hmm7TmlrDlkozph43orqHnrpcNCiAgICAgIGNvbnN0IHsgbWFwIH0gPSB0aGlzLnRhYmxlUmVuZGVyTWFwDQogICAgICB0aGlzLiRlbWl0KCdjZWxsQ2xpY2snLCBvYmosIHsgJGJzdGFibGUsICRncmlkLCBiYXNpY0luZm9UYWJsZTogdGhpcyB9LCB7IGl0ZW1NYXA6IG1hcFtvYmoucm93Lm1hcGlkXSwgZGF0YTogdGhpcy5nZXREYXRhKCkgfSkNCiAgICAgIHRoaXMuJGVtaXQoJ1Byb3h5RXZlbnQnLCAnY2VsbENsaWNrJywgb2JqLCB7ICRic3RhYmxlLCAkZ3JpZCwgYmFzaWNJbmZvVGFibGU6IHRoaXMgfSwgeyBpdGVtTWFwOiBtYXBbb2JqLnJvdy5tYXBpZF0sIGRhdGE6IHRoaXMuZ2V0RGF0YSgpIH0pDQogICAgfSwNCiAgICBjZWxsT3B0aW9uQ2FsbEJhY2sob2JqLCBvcHRpb24sICRic3RhYmxlLCAkZ3JpZCkgeyAvLyDljZXlhYPmoLzmk43kvZzlhbbku5blm57osIMNCiAgICAgIC8vIHRoaXMuaW5pdERhdGEodGhpcy5nZXREYXRhKCkuZGF0YSkgLy8g5by65Yi26Kem5Y+R5pu05paw5ZKM6YeN6K6h566XDQogICAgICBjb25zdCB7IG1hcCB9ID0gdGhpcy50YWJsZVJlbmRlck1hcA0KICAgICAgdGhpcy4kZW1pdCgnY2VsbE9wdGlvbkNhbGxCYWNrJywgb2JqLCBvcHRpb24sIHsgJGJzdGFibGUsICRncmlkLCBiYXNpY0luZm9UYWJsZTogdGhpcyB9LCB7IGl0ZW1NYXA6IG1hcFtvYmoucm93Lm1hcGlkXSwgZGF0YTogdGhpcy5nZXREYXRhKCkgfSkNCiAgICAgIHRoaXMuJGVtaXQoJ1Byb3h5RXZlbnQnLCAnY2VsbE9wdGlvbkNhbGxCYWNrJywgb2JqLCBvcHRpb24sIHsgJGJzdGFibGUsICRncmlkLCBiYXNpY0luZm9UYWJsZTogdGhpcyB9LCB7IGl0ZW1NYXA6IG1hcFtvYmoucm93Lm1hcGlkXSwgZGF0YTogdGhpcy5nZXREYXRhKCkgfSkNCiAgICB9LA0KICAgIGNlbGxTdHlsZUluKHsgcm93LCByb3dJbmRleCwgJHJvd0luZGV4LCBjb2x1bW4sIGNvbHVtbkluZGV4LCAkY29sdW1uSW5kZXggfSkgeyAvLyDljZXlhYPmoLzmoLflvI8NCiAgICAgIGNvbnN0IHsgbWFwIH0gPSB0aGlzLnRhYmxlUmVuZGVyTWFwDQogICAgICBpZiAodHlwZW9mIHRoaXMuY2VsbFN0eWxlID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgIHJldHVybiB0aGlzLmNlbGxTdHlsZSh7IHJvdywgcm93SW5kZXgsICRyb3dJbmRleCwgY29sdW1uLCBjb2x1bW5JbmRleCwgJGNvbHVtbkluZGV4IH0sIG1hcFtyb3cubWFwaWRdLCB0aGlzLmdldERhdGEoKSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmICgkY29sdW1uSW5kZXggJSAyICE9PSAwIHx8ICRjb2x1bW5JbmRleCA9PT0gMCkgew0KICAgICAgICAgIHJldHVybiB7IGJhY2tncm91bmRDb2xvcjogJ3ZhcigtLXplYnJhLWNvbG9yKScgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBpbml0RWRpdFJ1bGVzKGVkaXRSdWxlcykgeyAvLyDmt7vliqDmoKHpqowNCiAgICAgIGNvbnN0IHsgbWFwU291cmNlIH0gPSB0aGlzLnRhYmxlUmVuZGVyTWFwDQogICAgICBsZXQgZWRpdFJ1bGVzTWFwID0ge30NCiAgICAgIE9iamVjdC5rZXlzKGVkaXRSdWxlcykuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsNCiAgICAgICAgaWYgKG1hcFNvdXJjZVtpdGVtXSkgew0KICAgICAgICAgIGVkaXRSdWxlc01hcFttYXBTb3VyY2VbaXRlbV0ubWFwaWRdID0gZWRpdFJ1bGVzW2l0ZW1dDQogICAgICAgICAgaWYgKGVkaXRSdWxlc1tpdGVtXSAmJiBlZGl0UnVsZXNbaXRlbV1bMF0ucmVxdWlyZWQpIHsNCiAgICAgICAgICAgIG1hcFNvdXJjZVtpdGVtXS5yZXF1aXJlZCA9IHRydWUNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgbWFwU291cmNlW2l0ZW1dLnJlcXVpcmVkID0gZmFsc2UNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICB0aGlzLmVkaXRSdWxlc01hcCA9IGVkaXRSdWxlc01hcA0KICAgICAgbGV0IHNlbGYgPSB0aGlzDQogICAgICB0aGlzLnJlbmRlckVkaXRSdWxlcyA9IHsNCiAgICAgICAgcmVuZGVyVmFsdWU6IFt7DQogICAgICAgICAgdmFsaWRhdG9yKG9iaikgew0KICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgICAgICAgc2VsZi52YWxpZGF0b3Iob2JqKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKQ0KICAgICAgICAgICAgICB9KS5jYXRjaChlID0+IHsNCiAgICAgICAgICAgICAgICByZWplY3QoZSkNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfQ0KICAgICAgICB9XQ0KICAgICAgfQ0KICAgIH0sDQogICAgbmV3UnVsZShydWxlKSB7IC8vIOmUmeivr+inhOWImeS/oeaBrw0KICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHsNCiAgICAgICAgJG9wdGlvbnM6IHJ1bGUsDQogICAgICAgIHJlcXVpcmVkOiBydWxlLnJlcXVpcmVkLA0KICAgICAgICBtaW46IHJ1bGUubWluLA0KICAgICAgICBtYXg6IHJ1bGUubWluLA0KICAgICAgICB0eXBlOiBydWxlLnR5cGUsDQogICAgICAgIHBhdHRlcm46IHJ1bGUucGF0dGVybiwNCiAgICAgICAgdmFsaWRhdG9yOiBydWxlLnZhbGlkYXRvciwNCiAgICAgICAgbWF4V2lkdGg6IHJ1bGUubWF4V2lkdGgsDQogICAgICAgIG1lc3NhZ2U6IHJ1bGUubWVzc2FnZQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHZhbGlkQ2VsbFJ1bGVzKHsgcm93LCBjZWxsVmFsdWUsIHJvd0luZGV4LCBjb2x1bW4sIGNvbHVtbkluZGV4IH0pIHsgLy8g5qCh6aqM5Y2V5YWD5qC8DQogICAgICBsZXQgc2VsZiA9IHRoaXMNCiAgICAgIGNvbnN0IHsgbWFwIH0gPSB0aGlzLnRhYmxlUmVuZGVyTWFwDQogICAgICBjb25zdCBlcnJvclJ1bGVzID0gW10NCiAgICAgIGNvbnN0IHN5bmNWYWlsZHMgPSBbXQ0KICAgICAgY29uc3QgcnVsZXMgPSB0aGlzLmVkaXRSdWxlc01hcFtyb3cubWFwaWRdDQogICAgICBpZiAocnVsZXMpIHsNCiAgICAgICAgcnVsZXMuZm9yRWFjaChydWxlID0+IHsNCiAgICAgICAgICBpZiAodHlwZW9mIHJ1bGUudmFsaWRhdG9yID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgICBsZXQgY3VzdG9tVmFsaWQNCiAgICAgICAgICAgIGN1c3RvbVZhbGlkID0gcnVsZS52YWxpZGF0b3Ioew0KICAgICAgICAgICAgICBjZWxsVmFsdWUsDQogICAgICAgICAgICAgIHJ1bGUsDQogICAgICAgICAgICAgIHJ1bGVzLA0KICAgICAgICAgICAgICByb3csDQogICAgICAgICAgICAgIHJvd0luZGV4LA0KICAgICAgICAgICAgICBjb2x1bW4sDQogICAgICAgICAgICAgIGNvbHVtbkluZGV4LA0KICAgICAgICAgICAgICBpdGVtTWFwOiBtYXBbcm93Lm1hcGlkXQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIGlmIChjdXN0b21WYWxpZCkgew0KICAgICAgICAgICAgICBpZiAoc2VsZi5nZXRiYXNpY0RhdGFUeXBlKGN1c3RvbVZhbGlkKSA9PT0gJ0Vycm9yJykgew0KICAgICAgICAgICAgICAgIHNlbGYudmFsaWRSdWxlRXJyID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIGVycm9yUnVsZXMucHVzaChzZWxmLm5ld1J1bGUoeyB0eXBlOiAnY3VzdG9tJywgbWVzc2FnZTogY3VzdG9tVmFsaWQubWVzc2FnZSwgcnVsZTogc2VsZi5uZXdSdWxlKHJ1bGUpIH0pKQ0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbVZhbGlkLmNhdGNoKSB7DQogICAgICAgICAgICAgICAgLy8g5aaC5p6c5Li65byC5q2l5qCh6aqM77yI5rOo77ya5byC5q2l5qCh6aqM5piv5bm25Y+R5peg5bqP55qE77yJDQogICAgICAgICAgICAgICAgc3luY1ZhaWxkcy5wdXNoKA0KICAgICAgICAgICAgICAgICAgY3VzdG9tVmFsaWQuY2F0Y2goZSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHNlbGYudmFsaWRSdWxlRXJyID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgICBlcnJvclJ1bGVzLnB1c2goc2VsZi5uZXdSdWxlKHsgdHlwZTogJ2N1c3RvbScsIG1lc3NhZ2U6IGUgPyBlLm1lc3NhZ2UgOiBydWxlLm1lc3NhZ2UsIHJ1bGU6IHNlbGYubmV3UnVsZShydWxlKSB9KSkNCiAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGNvbnN0IGlzTnVtYmVyID0gcnVsZS50eXBlID09PSAnbnVtYmVyJw0KICAgICAgICAgICAgY29uc3QgbnVtVmFsID0gaXNOdW1iZXIgPyAoaXNOYU4ocGFyc2VGbG9hdChjZWxsVmFsdWUpKSA/IDAgOiBwYXJzZUZsb2F0KGNlbGxWYWx1ZSkpIDogU3RyaW5nKGNlbGxWYWx1ZSkubGVuZ3RoDQogICAgICAgICAgICBpZiAocnVsZS5yZXF1aXJlZCAmJiAoY2VsbFZhbHVlID09PSBudWxsIHx8IGNlbGxWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IGNlbGxWYWx1ZSA9PT0gJycpKSB7DQogICAgICAgICAgICAgIHNlbGYudmFsaWRSdWxlRXJyID0gdHJ1ZQ0KICAgICAgICAgICAgICBlcnJvclJ1bGVzLnB1c2goc2VsZi5uZXdSdWxlKHJ1bGUpKQ0KICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgKGlzTnVtYmVyICYmIGlzTmFOKGNlbGxWYWx1ZSkpIHx8DQogICAgICAgICAgICAgICghaXNOYU4ocnVsZS5taW4pICYmIG51bVZhbCA8IHBhcnNlRmxvYXQocnVsZS5taW4pKSB8fA0KICAgICAgICAgICAgICAoIWlzTmFOKHJ1bGUubWF4KSAmJiBudW1WYWwgPiBwYXJzZUZsb2F0KHJ1bGUubWF4KSkgfHwNCiAgICAgICAgICAgICAgKHJ1bGUucGF0dGVybiAmJiAhKHJ1bGUucGF0dGVybi50ZXN0ID8gcnVsZS5wYXR0ZXJuIDogbmV3IFJlZ0V4cChydWxlLnBhdHRlcm4pKS50ZXN0KGNlbGxWYWx1ZSkpDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgc2VsZi52YWxpZFJ1bGVFcnIgPSB0cnVlDQogICAgICAgICAgICAgIGVycm9yUnVsZXMucHVzaChzZWxmLm5ld1J1bGUocnVsZSkpDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHN5bmNWYWlsZHMpLnRoZW4oKCkgPT4gew0KICAgICAgICBpZiAoZXJyb3JSdWxlcy5sZW5ndGgpIHsNCiAgICAgICAgICBjb25zdCByZXN0ID0geyBydWxlczogZXJyb3JSdWxlcywgcnVsZTogZXJyb3JSdWxlc1swXSB9DQogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3QpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICB2YWxpZGF0b3Iob2JqKSB7IC8vIOagoemqjOWZqA0KICAgICAgbGV0IHNlbGYgPSB0aGlzDQogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICByZXR1cm4gc2VsZi52YWxpZENlbGxSdWxlcyhvYmopLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHJlc29sdmUodHJ1ZSkNCiAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcih0eXBlb2YgZXJyb3IucnVsZS5tZXNzYWdlID09PSAnZnVuY3Rpb24nID8gZXJyb3IucnVsZS5tZXNzYWdlKGVycm9yLnJ1bGUpIDogZXJyb3IucnVsZS5tZXNzYWdlKSkNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICB2YWxpZGF0ZVJvdyhyb3cpIHsgLy8g5qCh6aqM5LiA5p2h5oiW5aSa5p2h5pWw5o2uDQogICAgICBsZXQgc2VsZiA9IHRoaXMNCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7DQogICAgICAgIHNlbGYuJHJlZnMuYmFzaWNJbmZvVGFibGUudGFibGVPcHRpb25GbigpLnZhbGlkYXRlKHJvdykudGhlbihyZXMgPT4gew0KICAgICAgICAgIHJlc29sdmUocmVzKQ0KICAgICAgICB9KS5jYXRjaChlID0+IHsNCiAgICAgICAgICByZWplY3QoZSkNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICB2YWxpZGF0ZUFsbCgpIHsgLy8g5qCh6aqM5YWo6KGoDQogICAgICBsZXQgc2VsZiA9IHRoaXMNCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7DQogICAgICAgIHNlbGYuJHJlZnMuYmFzaWNJbmZvVGFibGUudGFibGVPcHRpb25GbigpLmZ1bGxWYWxpZGF0ZShzZWxmLiRyZWZzLmJhc2ljSW5mb1RhYmxlLmdldFRhYmxlRGF0YSgpLmZ1bGxEYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgcmVzb2x2ZShyZXMpDQogICAgICAgIH0pLmNhdGNoKGUgPT4gew0KICAgICAgICAgIHJlamVjdChlKQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGdldERhdGEoKSB7IC8vIOiOt+WPluihqOagvOaVsOaNrg0KICAgICAgY29uc3QgeyBtYXAgfSA9IHRoaXMudGFibGVSZW5kZXJNYXANCiAgICAgIGxldCB7IGZ1bGxEYXRhIH0gPSB0aGlzLiRyZWZzLmJhc2ljSW5mb1RhYmxlLmdldFB1cmVUYWJsZURhdGEoKQ0KICAgICAgbGV0IHJlc3VsdERhdGEgPSB7fQ0KICAgICAgZnVsbERhdGEuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHsNCiAgICAgICAgaWYgKG1hcFtpdGVtLm1hcGlkXS5uZWVkbWFwKSB7DQogICAgICAgICAgT2JqZWN0LmFzc2lnbihyZXN1bHREYXRhLCB7DQogICAgICAgICAgICBbaXRlbS5yZW5kZXJGaWVsZF06IGl0ZW0ucmVuZGVyVmFsdWUNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICAgIGlmIChtYXBbaXRlbS5tYXBpZF0uaXNUcmVlKSB7DQogICAgICAgICAgbGV0IHsgaXNIdW1wIH0gPSAobWFwW2l0ZW0ubWFwaWRdLnJlbmRlciAmJiBtYXBbaXRlbS5tYXBpZF0ucmVuZGVyLnByb3BzICYmIG1hcFtpdGVtLm1hcGlkXS5yZW5kZXIucHJvcHMuY29uZmlnKSB8fCB7IGlzSHVtcDogZmFsc2UgfQ0KICAgICAgICAgIGxldCBmaWVsZGtleXMgPSBpc0h1bXAgPyBbJ0NvZGUnLCAnTmFtZScsICdJZCddIDogKGl0ZW0ucmVuZGVyRmllbGQuZW5kc1dpdGgoJ18nKSA/IFsnY29kZScsICduYW1lJywgJ2lkJ10gOiBbJ19jb2RlJywgJ19uYW1lJywgJ19pZCddKQ0KICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0RGF0YSwgew0KICAgICAgICAgICAgW21hcFtpdGVtLm1hcGlkXS5maWVsZCArIGZpZWxka2V5c1swXV06IGl0ZW1bbWFwW2l0ZW0ubWFwaWRdLnJlbmRlckZpZWxkICsgZmllbGRrZXlzWzBdXSB8fCAnJywNCiAgICAgICAgICAgIFttYXBbaXRlbS5tYXBpZF0uZmllbGQgKyBmaWVsZGtleXNbMV1dOiBpdGVtW21hcFtpdGVtLm1hcGlkXS5yZW5kZXJGaWVsZCArIGZpZWxka2V5c1sxXV0gfHwgJycsDQogICAgICAgICAgICBbbWFwW2l0ZW0ubWFwaWRdLmZpZWxkICsgZmllbGRrZXlzWzJdXTogaXRlbVttYXBbaXRlbS5tYXBpZF0ucmVuZGVyRmllbGQgKyBmaWVsZGtleXNbMl1dIHx8ICcnDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHJldHVybiB7DQogICAgICAgIHZpZXdEYXRhOiByZXN1bHREYXRhLCAvLyDmuLLmn5PnmoTlj6/op4bmlbDmja4NCiAgICAgICAgZGF0YTogT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kYXRhLCByZXN1bHREYXRhKSwgLy8g5YWo6YeP5pWw5o2u77yMDQogICAgICAgIG9yaWdpbmFsRGF0YTogT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kYXRhKSAvLyDljp/lp4vmlbDmja4NCiAgICAgIH0NCiAgICB9LA0KICAgIGdlbmVyYXRlU2luZ0l0ZW1SZW5kZXJNYXAoY29sdW1uLCBsZXZlbCwgY29sdW1uSW5kZXgsIG5lc3RJbmRleCwgbWFwKSB7IC8vIOeUn+aIkOWNleadoeaVsOaNruaYoOWwhA0KICAgICAgbGV0IHV1aWQgPSB0aGlzLmdldFV1aWQoKQ0KICAgICAgbGV0IHJlbmRlckZpZWxkID0gbmVzdEluZGV4LnNwbGl0KCcuJykuam9pbignXycpDQogICAgICBsZXQgcmVuZGVyID0gY29sdW1uLmNlbGxSZW5kZXIgfHwgY29sdW1uLmVkaXRSZW5kZXINCiAgICAgIGxldCBjdXJtYXAgPSB7DQogICAgICAgIG1hcGlkOiB1dWlkLA0KICAgICAgICBlZGl0YWJsZTogISFjb2x1bW4uZWRpdFJlbmRlciwNCiAgICAgICAgaW5kZXg6IG1hcC5saXN0Lmxlbmd0aCArIDEsDQogICAgICAgIG5lc3RJbmRleDogbmVzdEluZGV4LA0KICAgICAgICBpdGVtQ29uZmlnOiBjb2x1bW4sDQogICAgICAgIHJlbmRlcjogcmVuZGVyLA0KICAgICAgICBsZXZlbDogbGV2ZWwsDQogICAgICAgIGZvcm11bGE6IGNvbHVtbi5mb3JtdWxhID8gY29sdW1uLmZvcm11bGEgKyAnJyA6ICcnLA0KICAgICAgICByZW5kZXJUaXRsZTogJycucGFkRW5kKDQgKiAobGV2ZWwgLSAxKSkgKyBjb2x1bW4udGl0bGUsDQogICAgICAgIHRpdGxlOiBjb2x1bW4udGl0bGUsIC8vIOagh+mimA0KICAgICAgICByZW5kZXJGaWVsZDogJ3JlbmRlclZhbHVlJywgLy8g5riy5p+T5pWw5o2uDQogICAgICAgIGlzVHJlZTogcmVuZGVyICYmIHJlbmRlci5uYW1lID09PSAnJHZ4ZVRyZWUnLCAvLyDmmK/kuI3mmK/kuIvmi4nmoJHvvIwNCiAgICAgICAgZmllbGQ6IGNvbHVtbi5maWVsZCB8fCByZW5kZXJGaWVsZCwgLy8g5Y6f5pys5a2X5q61DQogICAgICAgIG5lZWRtYXA6ICEhY29sdW1uLmZpZWxkIC8vIOaYr+WQpumcgOimgeWPjeWTjeaYoOWwhA0KICAgICAgfQ0KICAgICAgbWFwLmxpc3QucHVzaChjdXJtYXApDQogICAgICBtYXAubWFwW3V1aWRdID0gY3VybWFwDQogICAgICBtYXAubWFwU291cmNlW2NvbHVtbi5maWVsZCB8fCByZW5kZXJGaWVsZF0gPSBjdXJtYXANCiAgICAgIG1hcC5yZW5kZXJNYXBbcmVuZGVyRmllbGRdID0gY3VybWFwDQogICAgfSwNCiAgICBnZW5lcmF0ZVJlbmRlck1hcChjb2x1bW5zLCBsZXZlbCA9IDEsIG5lc3RJbmRleCA9ICcnLCBtYXAgPSB7IGxpc3Q6IFtdLCByZW5kZXJNYXA6IHt9LCBtYXA6IHt9LCBtYXBTb3VyY2U6IHt9IH0pIHsgLy8g55Sf5oiQ5riy5p+T6aG55pig5bCEDQogICAgICBjb2x1bW5zLmZvckVhY2goKGNvbHVtbiwgY29sdW1uSW5kZXgpID0+IHsNCiAgICAgICAgaWYgKGNvbHVtbi52aXNpYmxlICE9PSBmYWxzZSkgew0KICAgICAgICAgIHRoaXMuZ2VuZXJhdGVTaW5nSXRlbVJlbmRlck1hcChjb2x1bW4sIGxldmVsLCBjb2x1bW5JbmRleCwgbmVzdEluZGV4ID8gKG5lc3RJbmRleCArICcuJyArIGNvbHVtbkluZGV4KSA6IChjb2x1bW5JbmRleCArICcnKSwgbWFwKQ0KICAgICAgICB9DQogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbHVtbi5jaGlsZHJlbikgJiYgY29sdW1uLmNoaWxkcmVuLmxlbmd0aCkgew0KICAgICAgICAgIHRoaXMuZ2VuZXJhdGVSZW5kZXJNYXAoY29sdW1uLmNoaWxkcmVuLCBsZXZlbCArIDEsIGNvbHVtbkluZGV4LCBtYXApDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICByZXR1cm4gbWFwDQogICAgfSwNCiAgICBpbml0SXRlbXMoY29sdW1ucykgeyAvLyDliJ3lp4vljJZ0YWJsZemhuQ0KICAgICAgdGhpcy50YWJsZVJlbmRlck1hcCA9IHRoaXMuZ2VuZXJhdGVSZW5kZXJNYXAoY29sdW1ucyB8fCB0aGlzLml0ZW1zQ29uZmlnKQ0KICAgICAgdGhpcy50YWJsZVJlbmRlckNvbHVtbnNDb25maWcgPSB0aGlzLnJlbmRlckNvbHVtbnNDb25maWcNCiAgICAgIHRoaXMudGFibGVSZW5kZXJDb2x1bW5zR3JvdXBzID0gTWF0aC5mbG9vcih0aGlzLnRhYmxlUmVuZGVyQ29sdW1uc0NvbmZpZyAvIDIpDQogICAgfSwNCiAgICBpbml0RGF0YShvYmopIHsgLy8g5Yid5aeL5YyW6KGo5qC85pWw5o2uDQogICAgICBvYmogPSBvYmogfHwgdGhpcy5kYXRhDQogICAgICBjb25zdCB7IGxpc3QgfSA9IHRoaXMudGFibGVSZW5kZXJNYXANCiAgICAgIHRoaXMudGFibGVSZW5kZXJEYXRhID0gbGlzdC5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgIGxldCByZXN1bHREYXRhID0gew0KICAgICAgICAgIGluZGV4OiBpdGVtLmluZGV4LCAvLyDooYzntKLlvJUNCiAgICAgICAgICBuZXN0SW5kZXg6IGl0ZW0ubmVzdEluZGV4LCAvLyDltYzlpZflhbPns7sNCiAgICAgICAgICByZW5kZXJUaXRsZTogaXRlbS5yZXF1aXJlZCA/IGl0ZW0ucmVuZGVyVGl0bGUgKyAnPHNwYW4gY2xhc3M9InJlcXVpcmVkIj4qPC9zcGFuPicgOiBpdGVtLnJlbmRlclRpdGxlLCAvLyDmuLLmn5PmoIfpopgNCiAgICAgICAgICBlZGl0YWJsZTogaXRlbS5lZGl0YWJsZSwgLy8g5piv5ZCm5Y+v57yW6L6RDQogICAgICAgICAgbWFwaWQ6IGl0ZW0ubWFwaWQsIC8vIOWPjeWQkeaYoOWwhOWUr+S4gGlkDQogICAgICAgICAgcmVxdWlyZWQ6IGl0ZW0ucmVxdWlyZWQsDQogICAgICAgICAgcmVuZGVyRmllbGQ6IGl0ZW0uZmllbGQsIC8vIOa4suafk+Wtl+autQ0KICAgICAgICAgIHJlbmRlclZhbHVlOiBvYmpbaXRlbS5maWVsZF0gLy8g5riy5p+T5YC8DQogICAgICAgIH0NCiAgICAgICAgaWYgKGl0ZW0uaXNUcmVlKSB7DQogICAgICAgICAgbGV0IHsgaXNIdW1wIH0gPSAoaXRlbS5yZW5kZXIgJiYgaXRlbS5yZW5kZXIucHJvcHMgJiYgaXRlbS5yZW5kZXIucHJvcHMuY29uZmlnKSB8fCB7IGlzSHVtcDogZmFsc2UgfQ0KICAgICAgICAgIGxldCBmaWVsZGtleXMgPSBpc0h1bXAgPyBbJ0NvZGUnLCAnTmFtZScsICdJZCddIDogKGl0ZW0ucmVuZGVyRmllbGQuZW5kc1dpdGgoJ18nKSA/IFsnY29kZScsICduYW1lJywgJ2lkJ10gOiBbJ19jb2RlJywgJ19uYW1lJywgJ19pZCddKQ0KICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmVzdWx0RGF0YSwgew0KICAgICAgICAgICAgW2l0ZW0ucmVuZGVyRmllbGQgKyBmaWVsZGtleXNbMF1dOiBvYmpbaXRlbS5maWVsZCArIGZpZWxka2V5c1swXV0sDQogICAgICAgICAgICBbaXRlbS5yZW5kZXJGaWVsZCArIGZpZWxka2V5c1sxXV06IG9ialtpdGVtLmZpZWxkICsgZmllbGRrZXlzWzFdXSwNCiAgICAgICAgICAgIFtpdGVtLnJlbmRlckZpZWxkICsgZmllbGRrZXlzWzJdXTogb2JqW2l0ZW0uZmllbGQgKyBmaWVsZGtleXNbMl1dDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gcmVzdWx0RGF0YQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGluaXRGb3JtdWxhKCkgeyAvLyDliJ3lp4vljJblhazlvI8g6L2s5YyW5oiQ5riy5p+T5qC85byPDQogICAgICBsZXQgc2VsZiA9IHRoaXMNCiAgICAgIGNvbnN0IHsgbGlzdCwgbWFwU291cmNlIH0gPSB0aGlzLnRhYmxlUmVuZGVyTWFwDQogICAgICBsZXQgcmVzdWx0RGF0YSA9IHt9DQogICAgICBsaXN0LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgIGlmIChpdGVtLmZvcm11bGEpIHsNCiAgICAgICAgICByZXN1bHREYXRhW2l0ZW0ubWFwaWQgKyAnOicgKyBpdGVtLnJlbmRlckZpZWxkXSA9IHNlbGYudHJhbnNDb2xGb3JtdWxhVG9DZWxsRm9tdWxhKGl0ZW0uZm9ybXVsYSwgaXRlbSwgbWFwU291cmNlKQ0KICAgICAgICAgIGl0ZW0ucmVuZGVyRm9ybXVsZSA9IHJlc3VsdERhdGFbaXRlbS5yZW5kZXJGaWVsZCArICc6JyArIGl0ZW0ubWFwaWRdDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICB0aGlzLmNhbGN1bGF0ZUNvbnN0cmFpbnRDb25maWdJbiA9IE9iamVjdC5hc3NpZ24oDQogICAgICAgIHRoaXMuY2FsY3VsYXRlQ29uc3RyYWludENvbmZpZ0luLA0KICAgICAgICB7DQogICAgICAgICAgcm93Q29kZUNhbGNJdGVtQ29kZUZpZWxkOiAnbWFwaWQnLCAvLyDphY3nva7kuoZyb3dDb2RlRm9ybXVsYUNvbmZpZ+aXtuS9v+eUqOeahGl0ZW1jb2Rl5a2X5q615ZCNDQogICAgICAgICAgcm93Q29kZUZvcm11bGFDb25maWc6IHJlc3VsdERhdGEgLy8geyAiY29sRmllbGQ6aXRlbWNvZGUiOiJ7dGFibGVJZDpjb2xGaWVsZDppdGVtY29kZX1b6L+Q566X56ymXSIgfQ0KICAgICAgICB9KQ0KICAgICAgcmV0dXJuIHJlc3VsdERhdGENCiAgICB9LA0KICAgIHRyYW5zQ29sRm9ybXVsYVRvQ2VsbEZvbXVsYShmb3JtdWxhLCBtYXAsIG1hcFNvdXJjZSkgeyAvLyDovazljJbljZXmnaHmlbDmja7mmKDlsIQNCiAgICAgIGxldCByZWdSID0gbmV3IFJlZ0V4cCgnKHtbYS16QS1aMC05X10qfSknLCAnaWcnKQ0KICAgICAgbGV0IHJvd3NLZXkgPSBmb3JtdWxhLm1hdGNoKHJlZ1IpID09PSBudWxsID8gW10gOiBmb3JtdWxhLm1hdGNoKHJlZ1IpDQogICAgICBpZiAocm93c0tleS5sZW5ndGgpIHsNCiAgICAgICAgZm9yIChsZXQga2V5Q0YgaW4gcm93c0tleSkgew0KICAgICAgICAgIGxldCBrZXlDID0gcm93c0tleVtrZXlDRl0ucmVwbGFjZSgvXHt8XH0vZywgJycpDQogICAgICAgICAgbGV0IHJlZyA9IG5ldyBSZWdFeHAoJyh7JyArIGtleUMgKyAnfSknLCAnaWcnKQ0KICAgICAgICAgIGlmIChtYXBTb3VyY2Vba2V5Q10pIHsNCiAgICAgICAgICAgIGZvcm11bGEgPSBmb3JtdWxhLnJlcGxhY2UocmVnLCAneycgKyB0aGlzLmlkICsgJzonICsgbWFwLnJlbmRlckZpZWxkICsgJzonICsgbWFwU291cmNlW2tleUNdLm1hcGlkICsgJ30nKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAodGhpcy5kYXRhW2tleUNdKSB7DQogICAgICAgICAgICAgIGZvcm11bGEgPSBmb3JtdWxhLnJlcGxhY2UocmVnLCBpc05hTihwYXJzZUZsb2F0KHRoaXMuZGF0YVtrZXlDXSkpID8gMCA6IHBhcnNlRmxvYXQodGhpcy5kYXRhW2tleUNdKSkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGZvcm11bGEgPSBmb3JtdWxhLnJlcGxhY2UocmVnLCAneycgKyB0aGlzLmlkICsgJzonICsga2V5QyArICc6JyArIG51bGwgKyAnfScpDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gZm9ybXVsYQ0KICAgIH0sDQogICAgaW5pdCgpIHsgLy8g5Yid5aeL5YyWDQogICAgICB0aGlzLmluaXRJdGVtcygpDQogICAgICB0aGlzLmluaXRGb3JtdWxhKCkNCiAgICAgIHRoaXMuaW5pdEVkaXRSdWxlcyh0aGlzLmVkaXRSdWxlcykNCiAgICAgIHRoaXMuaW5pdERhdGEodGhpcy5kYXRhKQ0KICAgIH0NCiAgfSwNCiAgY3JhdGVkKCkge30sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5pbml0KCkNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICB0b29sYmFyQ29uZmlnOiB7DQogICAgICBoYW5kbGVyKCkgew0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9LA0KICAgIGl0ZW1zQ29uZmlnOiB7DQogICAgICBoYW5kbGVyKCkgew0KICAgICAgICB0aGlzLmluaXRJdGVtcygpDQogICAgICAgIHRoaXMuaW5pdEZvcm11bGEoKQ0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9LA0KICAgIGRlZmF1bHRNb25leVVuaXQ6IHsNCiAgICAgIGhhbmRsZXIoKSB7fSwNCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQ0KICAgIH0sDQogICAgaWQ6IHsNCiAgICAgIGhhbmRsZXIoKSB7fSwNCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQ0KICAgIH0sDQogICAgbW9kZTogew0KICAgICAgaGFuZGxlcigpIHt9LA0KICAgICAgaW1tZWRpYXRlOiB0cnVlDQogICAgfSwNCiAgICBlZGl0Q29uZmlnOiB7DQogICAgICBoYW5kbGVyKCkge30sDQogICAgICBkZWVwOiB0cnVlLA0KICAgICAgaW1tZWRpYXRlOiB0cnVlDQogICAgfSwNCiAgICByZW5kZXJDb2x1bW5zQ29uZmlnOiB7DQogICAgICBoYW5kbGVyKCkge30sDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9LA0KICAgIGVkaXRSdWxlczogew0KICAgICAgaGFuZGxlcigpIHsNCiAgICAgICAgdGhpcy5pbml0RWRpdFJ1bGVzKHRoaXMuZWRpdFJ1bGVzKQ0KICAgICAgICB0aGlzLmluaXREYXRhKHRoaXMuZGF0YSkNCiAgICAgIH0sDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9LA0KICAgIGRhdGE6IHsNCiAgICAgIGhhbmRsZXIoKSB7DQogICAgICAgIHRoaXMuaW5pdERhdGEodGhpcy5kYXRhKQ0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["BasicGradeInfoTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BasicGradeInfoTable.vue","sourceRoot":"src/components/basicInfoTable","sourcesContent":["<!--  基础分级信息表  Author:Titans@2396757591@qq.com -->\r\n<template>\r\n  <div :class=\"mode\" class=\"basic-info-table\" :style=\"{ height: tableRenderData.length * 34 + 40 + 'px' }\">\r\n    <BsTable\r\n      :id=\"id\"\r\n      ref=\"basicInfoTable\"\r\n      :auto-resize=\"false\"\r\n      :table-global-config=\"tableGlobalConfig\"\r\n      :footer-config=\"{ showFooter: false }\"\r\n      :keyboard-config=\"{ isArrow: false }\"\r\n      :table-config=\"tableConfig\"\r\n      :table-columns-config=\"tableRenderColumnsConfig\"\r\n      :table-data=\"tableRenderData\"\r\n      :expand-config=\"false\"\r\n      :tree-config=\"false\"\r\n      :edit-config=\"mode !== 'detail' ? editConfig : false\"\r\n      :toolbar-config=\"toolbarConfig\"\r\n      :edit-rules=\"renderEditRules\"\r\n      :pager-config=\"false\"\r\n      :default-money-unit=\"defaultMoneyUnit\"\r\n      :calculate-constraint-config=\"calculateConstraintConfigIn\"\r\n      @editClosed=\"editClosed\"\r\n      @editActived=\"editActived\"\r\n      @cellClick=\"cellClick\"\r\n      @cellOptionCallBack=\"cellOptionCallBack\"\r\n    >\r\n      <template v-slot:titleRequired=\"{ row, column }\">\r\n        <span> <span calss=\"fn-inline\">{{ row[column.property] }}</span><span class=\"required\">{{ row.required ? '*' : '' }}</span></span>\r\n      </template>\r\n    </bsTable>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'BasicGradeInforTable',\r\n  components: {},\r\n  props: {\r\n    id: { // 表格id\r\n      type: String,\r\n      default () {\r\n        return 'gradeInfor'\r\n      }\r\n    },\r\n    defaultMoneyUnit: {\r\n      type: Number,\r\n      default () {\r\n        return 1\r\n      }\r\n    },\r\n    itemsConfig: { // 项配置，可以是嵌套数据结构\r\n      type: [Array],\r\n      default() {\r\n        return [\r\n          {\r\n            title: '基础信息',\r\n            children: [\r\n              {\r\n                title: '姓名',\r\n                field: 'name',\r\n                width: 150,\r\n                align: 'center',\r\n                filters: false,\r\n                editRender: {\r\n                  name: '$vxeInput',\r\n                  defaultValue: '默认的名字',\r\n                  props: {\r\n                    type: 'string',\r\n                    redonly: true,\r\n                    placeholder: '请输入姓名'\r\n                  }\r\n                }\r\n              },\r\n              {\r\n                title: '年龄',\r\n                field: 'age',\r\n                sortable: true,\r\n                width: 120,\r\n                filters: false,\r\n                align: 'center',\r\n                combinedType: ['average'],\r\n                editRender: {\r\n                  name: '$vxeInput',\r\n                  defaultValue: 1,\r\n                  props: {\r\n                    min: 0,\r\n                    type: 'number',\r\n                    placeholder: '抢输入年龄',\r\n                    redonly: true\r\n                  }\r\n                }\r\n              },\r\n              {\r\n                title: '类别',\r\n                field: 'category',\r\n                width: 150,\r\n                editRender: {\r\n                  name: '$vxeSelect',\r\n                  defaultValue: '前端',\r\n                  options: [\r\n                    { value: '前端', label: '前端' },\r\n                    { value: '后端', label: '后端' },\r\n                    { value: '运维', label: '测试' },\r\n                    { value: '实施', label: '实施' },\r\n                    { value: '测试', label: '测试' }\r\n                  ],\r\n                  props: {\r\n                    multiple: true,\r\n                    placeholder: '请输入角色'\r\n                  }\r\n                }\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            title: '收入统计',\r\n            children: [\r\n              {\r\n                title: '收入',\r\n                field: 'income',\r\n                fieldType: 'money',\r\n                formula: '{age}>=18?Math.pow({age},4)/2:0',\r\n                width: 150,\r\n                align: 'right',\r\n                cellRender: {\r\n                  name: '$vxeMoney',\r\n                  defaultValue: 0,\r\n                  props: {\r\n                    min: -1111111111,\r\n                    type: 'float'\r\n                  }\r\n                }\r\n              },\r\n              {\r\n                title: '扣除',\r\n                field: 'deduction',\r\n                width: 150,\r\n                align: 'right',\r\n                editRender: {\r\n                  name: '$vxeMoney',\r\n                  defaultValue: 0,\r\n                  props: {\r\n                    min: -1111111111,\r\n                    type: 'float'\r\n                  }\r\n                }\r\n              },\r\n              {\r\n                title: '奖金',\r\n                width: 150,\r\n                align: 'right',\r\n                field: 'bonus',\r\n                editRender: {\r\n                  name: '$vxeMoney',\r\n                  defaultValue: 0,\r\n                  props: {\r\n                    min: -1111111111,\r\n                    type: 'float'\r\n                  }\r\n                }\r\n              },\r\n              {\r\n                title: '实际收入',\r\n                width: 180,\r\n                align: 'right',\r\n                field: 'actualIncome',\r\n                editRender: {\r\n                  name: '$vxeMoney',\r\n                  defaultValue: 0,\r\n                  props: {\r\n                    min: -1111111111,\r\n                    type: 'float'\r\n                  }\r\n                }\r\n              }]\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    mode: { // 模式\r\n      type: [String],\r\n      default() {\r\n        return 'edit' // edit(一直保持编辑状态),detail(展示状态),activeEdit(激活编辑)\r\n      }\r\n    },\r\n    editConfig: { // 编辑配置\r\n      type: [Object],\r\n      default() {\r\n        return {\r\n        }\r\n      }\r\n    },\r\n    editRules: { // 校验规则\r\n      type: [Object],\r\n      default() {\r\n        return {\r\n          name: [\r\n            {\r\n              required: true,\r\n              type: 'string',\r\n              // message: '名称长度需在 3 到 5 个字符',\r\n              message() {\r\n                return '名称长度需在 2 到 20 个字符'\r\n              },\r\n              min: 2,\r\n              max: 20,\r\n              pattern: /^[a-zA-Z0-9_\\s\\u4e00-\\u9fa5]+$/i,\r\n              trigger: 'change'\r\n            },\r\n            {\r\n              required: true,\r\n              type: 'string',\r\n              message: '请输入昵称',\r\n              trigger: 'change',\r\n              // eslint-disable-next-line no-useless-escape\r\n              // pattern: /^[a-zA-Z0-9_\\(\\)\\{\\}·.、\\[\\]\\（\\）\\【\\】\\u4e00-\\u9fa5]+$/i\r\n              // pattern: /^[a-zA-Z0-9_\\(\\)\\{\\}·.、\\[\\]\\（\\）\\【\\】\\u4e00-\\u9fa5]+$/i\r\n              validator({ cellValue, rule, rules, row, rowIndex, column, columnIndex, $table }) {\r\n                return new Promise((resolve, reject) => {\r\n                  let result = false\r\n                  if (cellValue.length >= 10) {\r\n                    // eslint-disable-next-line no-useless-escape\r\n                    result = /^[a-zA-Z0-9_\\(\\)\\{\\}·.、\\[\\]\\（\\）\\【\\】\\u4e00-\\u9fa5]+$/i.test(cellValue)\r\n                  } else {\r\n                    result = false\r\n                  }\r\n                  if (result) {\r\n                    resolve(true)\r\n                  } else {\r\n                    reject(new Error(\r\n                      '名称必须不能有特殊字符，且字数数不能少于10个！'\r\n                    ))\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          ],\r\n          sex: [\r\n            {\r\n              required: true,\r\n              message: '请选择性别',\r\n              trigger: 'change'\r\n            }\r\n          ],\r\n          age: [\r\n            {\r\n              required: true,\r\n              message: '请输入年龄',\r\n              min: 1,\r\n              max: 150,\r\n              type: 'number',\r\n              trigger: 'change'\r\n            }\r\n          ],\r\n          income: [\r\n            {\r\n              required: true,\r\n              message: '请输入收入',\r\n              trigger: 'change'\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    renderColumnsConfig: { // 实际渲染列\r\n      type: Array,\r\n      default() {\r\n        return [\r\n          { // 序号\r\n            title: '序号',\r\n            type: 'seq',\r\n            width: 80,\r\n            align: 'center',\r\n            className: 'table-sep',\r\n            sortable: false\r\n          },\r\n          { // 序号\r\n            title: '基本信息名称',\r\n            align: 'left',\r\n            className: 'table-title',\r\n            field: 'renderTitle',\r\n            sortable: false,\r\n            cellRender: {\r\n              name: '$vxeInput',\r\n              props: {\r\n                type: 'text'\r\n              }\r\n            }\r\n          },\r\n          // {\r\n          //   title: '基本信息名称',\r\n          //   className: 'table-title',\r\n          //   align: 'left',\r\n          //   titleAlign: 'left',\r\n          //   field: 'renderTitle',\r\n          //   slots: {\r\n          //     // default: 'expandContent',\r\n          //     // content: 'expand'\r\n          //     // const { $rowIndex, $seq, $table, column, columnIndex, fixed, level, row, rowIndex, seq, type } = obj\r\n          //     default(obj, h, fixedType) {\r\n          //       const { $table } = obj\r\n          //       let $scopedSlots = $table.$parent.$parent.$scopedSlots\r\n          //       if ($scopedSlots.titleRequired) {\r\n          //         return $scopedSlots.titleRequired(obj)\r\n          //       } else {\r\n          //         return obj.row[obj.column.property]\r\n          //       }\r\n          //     }\r\n          //   }\r\n          //   // <template v-if=\"ifRenderExpandContentTable\" v-slot:expandContent=\"{ row, $rowIndex, rowIndex ,fixed }\">\r\n          //   //  <vue :ref=\"'expandContentTableRef' + (fixed ? fixed + rowIndex : rowIndex)\"></vue>\r\n          //   // </template>\r\n          // },\r\n          { // 序号\r\n            title: '基本信息值',\r\n            align: 'left',\r\n            titleAlign: 'left',\r\n            className: 'table-value',\r\n            field: 'renderValue',\r\n            sortable: false,\r\n            editRender: {\r\n              name: '$vxeBasicInfoRenderer',\r\n              props: {\r\n                type: 'text'\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    data: { // 数据包\r\n      type: [Object],\r\n      default() {\r\n        return {\r\n          actualIncome: '52000',\r\n          age: '27',\r\n          bonus: '10000',\r\n          category: '前端',\r\n          deduction: '3000',\r\n          income: 50000,\r\n          name: '张三'\r\n        }\r\n      }\r\n    },\r\n    cellStyle: { // 单元格样式\r\n      type: [Object, Function],\r\n      default() {\r\n        return {\r\n        }\r\n      }\r\n    },\r\n    toolbarConfig: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          moneyInputSwich: true,\r\n          visible: false }\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      calculateConstraintConfigIn: {\r\n        calcAndConstraintItemCodeField: 'mapid', // 配置了rowCodeFormulaConfig时使用的itemcode字段名\r\n        enabledType: { // 执行开关\r\n          performGetData: false, // 取数\r\n          performColFormula: true, // 列公式\r\n          gradedSummary: false, // 分级汇总\r\n          performRowCodeFormula: true, // 单元格交叉计算\r\n          performColConstraint: false, // 列约束\r\n          performCellConstraint: false// 单元格约束\r\n        },\r\n        colFormulaConfig: { // 公式配置\r\n          // rowFormulaMap= { \"colfield\":\"{colfield}[运算符]\" }\r\n          // profit: '{income}-{tax}-{deduction}',\r\n        },\r\n        rowCodeFormulaConfig: {\r\n          // 单元格交叉计算\r\n          // rowFormulaMap= { \"colField:itemcode\":\"{tableId:colField:itemcode}[运算符]\" }\r\n          // '1001:bonus': '{1001:1002:income}+{1001:1003:bonus}',\r\n        },\r\n        constraintConfig: { // 约束配置\r\n\r\n        }\r\n      },\r\n      tableGlobalConfig: {\r\n        mouseConfig: { selected: false },\r\n        tooltipConfig: { showAll: false }\r\n      },\r\n      tableConfig: {\r\n        globalConfig: { // 全局默认渲染列配置\r\n          // 全局配置\r\n          checkType: '', // hasCheckbox 可选值 ''||checkbox||radio\r\n          seq: false, // 序号列\r\n          cellClickCheck: false, // 是否开启点击行任意单元格选择\r\n          filters: false,\r\n          sortable: false,\r\n          rowDrop: false, //  是否开启列拖拽\r\n          optionSort: false //  是否添加并开启行手动上移下移排序\r\n        }\r\n      },\r\n      tableRenderMap: { // 渲染数据\r\n        curmap: {\r\n          mapid: '',\r\n          editable: true,\r\n          index: 0,\r\n          nestIndex: 0,\r\n          itemConfig: {},\r\n          render: {},\r\n          level: 0,\r\n          formula: '',\r\n          renderTitle: ''.padEnd(4 * (2 - 1)) + '',\r\n          title: '', // 标题\r\n          renderField: 'renderValue', // 渲染数据\r\n          isTree: 'render.name $vxeTree', // 是不是下拉树，\r\n          field: '', // 原本字段\r\n          needmap: '' // 是否需要反响映射\r\n        },\r\n        map: {},\r\n        mapSource: {},\r\n        renderMap: {}\r\n      },\r\n      editRulesMap: {},\r\n      tableRenderData: {}, // table渲染数据\r\n      renderEditRules: {},\r\n      tableRenderColumnsConfig: []\r\n    }\r\n  },\r\n  methods: {\r\n    getbasicDataType(obj) {\r\n      // 获取数据类型\r\n      return Object.prototype.toString.call(obj).slice(8, -1)\r\n    },\r\n    getUuid(hexDigits = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz') { // 获取mapid\r\n      let s = []\r\n      for (let i = 0; i < 36; i++) {\r\n        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1)\r\n      }\r\n      s[14] = '4'\r\n      s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1)\r\n      s[8] = s[13] = s[18] = s[23] = ''\r\n      let uuid = s.join('')\r\n      return uuid\r\n    },\r\n    chunk(arr, size) { // 分组\r\n      var arr2 = []\r\n      for (var i = 0; i < arr.length; i = i + size) {\r\n        arr2.push(arr.slice(i, i + size))\r\n      }\r\n      return arr2\r\n    },\r\n    editClosed(obj, $bstable, $grid) { // 结束编辑事件\r\n      const { map } = this.tableRenderMap\r\n      this.$emit('editClosed', obj, { $bstable, $grid, basicInfoTable: this }, { itemMap: map[obj.row.mapid], data: this.getData() })\r\n      this.$emit('ProxyEvent', 'editClosed', obj, { $bstable, $grid, basicInfoTable: this }, { itemMap: map[obj.row.mapid], data: this.getData() })\r\n    },\r\n    editActived(obj, $bstable, $grid) { // 开始编辑事件\r\n      const { map } = this.tableRenderMap\r\n      this.$emit('editActived', obj, { $bstable, $grid, basicInfoTable: this }, { itemMap: map[obj.row.mapid], data: this.getData() })\r\n      this.$emit('ProxyEvent', 'editActived', obj, { $bstable, $grid, basicInfoTable: this }, { itemMap: map[obj.row.mapid], data: this.getData() })\r\n    },\r\n    cellClick(obj, $bstable, $grid) { // 行点击事件\r\n      // this.initData(this.getData().data) // 强制触发更新和重计算\r\n      const { map } = this.tableRenderMap\r\n      this.$emit('cellClick', obj, { $bstable, $grid, basicInfoTable: this }, { itemMap: map[obj.row.mapid], data: this.getData() })\r\n      this.$emit('ProxyEvent', 'cellClick', obj, { $bstable, $grid, basicInfoTable: this }, { itemMap: map[obj.row.mapid], data: this.getData() })\r\n    },\r\n    cellOptionCallBack(obj, option, $bstable, $grid) { // 单元格操作其他回调\r\n      // this.initData(this.getData().data) // 强制触发更新和重计算\r\n      const { map } = this.tableRenderMap\r\n      this.$emit('cellOptionCallBack', obj, option, { $bstable, $grid, basicInfoTable: this }, { itemMap: map[obj.row.mapid], data: this.getData() })\r\n      this.$emit('ProxyEvent', 'cellOptionCallBack', obj, option, { $bstable, $grid, basicInfoTable: this }, { itemMap: map[obj.row.mapid], data: this.getData() })\r\n    },\r\n    cellStyleIn({ row, rowIndex, $rowIndex, column, columnIndex, $columnIndex }) { // 单元格样式\r\n      const { map } = this.tableRenderMap\r\n      if (typeof this.cellStyle === 'function') {\r\n        return this.cellStyle({ row, rowIndex, $rowIndex, column, columnIndex, $columnIndex }, map[row.mapid], this.getData())\r\n      } else {\r\n        if ($columnIndex % 2 !== 0 || $columnIndex === 0) {\r\n          return { backgroundColor: 'var(--zebra-color)' }\r\n        }\r\n      }\r\n    },\r\n    initEditRules(editRules) { // 添加校验\r\n      const { mapSource } = this.tableRenderMap\r\n      let editRulesMap = {}\r\n      Object.keys(editRules).forEach((item, index) => {\r\n        if (mapSource[item]) {\r\n          editRulesMap[mapSource[item].mapid] = editRules[item]\r\n          if (editRules[item] && editRules[item][0].required) {\r\n            mapSource[item].required = true\r\n          } else {\r\n            mapSource[item].required = false\r\n          }\r\n        }\r\n      })\r\n      this.editRulesMap = editRulesMap\r\n      let self = this\r\n      this.renderEditRules = {\r\n        renderValue: [{\r\n          validator(obj) {\r\n            return new Promise((resolve, reject) => {\r\n              self.validator(obj).then(res => {\r\n                resolve(true)\r\n              }).catch(e => {\r\n                reject(e)\r\n              })\r\n            })\r\n          }\r\n        }]\r\n      }\r\n    },\r\n    newRule(rule) { // 错误规则信息\r\n      return Object.assign({}, {\r\n        $options: rule,\r\n        required: rule.required,\r\n        min: rule.min,\r\n        max: rule.min,\r\n        type: rule.type,\r\n        pattern: rule.pattern,\r\n        validator: rule.validator,\r\n        maxWidth: rule.maxWidth,\r\n        message: rule.message\r\n      })\r\n    },\r\n    validCellRules({ row, cellValue, rowIndex, column, columnIndex }) { // 校验单元格\r\n      let self = this\r\n      const { map } = this.tableRenderMap\r\n      const errorRules = []\r\n      const syncVailds = []\r\n      const rules = this.editRulesMap[row.mapid]\r\n      if (rules) {\r\n        rules.forEach(rule => {\r\n          if (typeof rule.validator === 'function') {\r\n            let customValid\r\n            customValid = rule.validator({\r\n              cellValue,\r\n              rule,\r\n              rules,\r\n              row,\r\n              rowIndex,\r\n              column,\r\n              columnIndex,\r\n              itemMap: map[row.mapid]\r\n            })\r\n            if (customValid) {\r\n              if (self.getbasicDataType(customValid) === 'Error') {\r\n                self.validRuleErr = true\r\n                errorRules.push(self.newRule({ type: 'custom', message: customValid.message, rule: self.newRule(rule) }))\r\n              } else if (customValid.catch) {\r\n                // 如果为异步校验（注：异步校验是并发无序的）\r\n                syncVailds.push(\r\n                  customValid.catch(e => {\r\n                    self.validRuleErr = true\r\n                    errorRules.push(self.newRule({ type: 'custom', message: e ? e.message : rule.message, rule: self.newRule(rule) }))\r\n                  })\r\n                )\r\n              }\r\n            }\r\n          } else {\r\n            const isNumber = rule.type === 'number'\r\n            const numVal = isNumber ? (isNaN(parseFloat(cellValue)) ? 0 : parseFloat(cellValue)) : String(cellValue).length\r\n            if (rule.required && (cellValue === null || cellValue === undefined || cellValue === '')) {\r\n              self.validRuleErr = true\r\n              errorRules.push(self.newRule(rule))\r\n            } else if (\r\n              (isNumber && isNaN(cellValue)) ||\r\n              (!isNaN(rule.min) && numVal < parseFloat(rule.min)) ||\r\n              (!isNaN(rule.max) && numVal > parseFloat(rule.max)) ||\r\n              (rule.pattern && !(rule.pattern.test ? rule.pattern : new RegExp(rule.pattern)).test(cellValue))\r\n            ) {\r\n              self.validRuleErr = true\r\n              errorRules.push(self.newRule(rule))\r\n            }\r\n          }\r\n        })\r\n      }\r\n      return Promise.all(syncVailds).then(() => {\r\n        if (errorRules.length) {\r\n          const rest = { rules: errorRules, rule: errorRules[0] }\r\n          return Promise.reject(rest)\r\n        }\r\n      })\r\n    },\r\n    validator(obj) { // 校验器\r\n      let self = this\r\n      return new Promise((resolve, reject) => {\r\n        return self.validCellRules(obj).then(() => {\r\n          resolve(true)\r\n        }).catch((error) => {\r\n          reject(new Error(typeof error.rule.message === 'function' ? error.rule.message(error.rule) : error.rule.message))\r\n        })\r\n      })\r\n    },\r\n    validateRow(row) { // 校验一条或多条数据\r\n      let self = this\r\n      return new Promise((resolve, reject) => {\r\n        self.$refs.basicInfoTable.tableOptionFn().validate(row).then(res => {\r\n          resolve(res)\r\n        }).catch(e => {\r\n          reject(e)\r\n        })\r\n      })\r\n    },\r\n    validateAll() { // 校验全表\r\n      let self = this\r\n      return new Promise((resolve, reject) => {\r\n        self.$refs.basicInfoTable.tableOptionFn().fullValidate(self.$refs.basicInfoTable.getTableData().fullData).then(res => {\r\n          resolve(res)\r\n        }).catch(e => {\r\n          reject(e)\r\n        })\r\n      })\r\n    },\r\n    getData() { // 获取表格数据\r\n      const { map } = this.tableRenderMap\r\n      let { fullData } = this.$refs.basicInfoTable.getPureTableData()\r\n      let resultData = {}\r\n      fullData.forEach((item, index) => {\r\n        if (map[item.mapid].needmap) {\r\n          Object.assign(resultData, {\r\n            [item.renderField]: item.renderValue\r\n          })\r\n        }\r\n        if (map[item.mapid].isTree) {\r\n          let { isHump } = (map[item.mapid].render && map[item.mapid].render.props && map[item.mapid].render.props.config) || { isHump: false }\r\n          let fieldkeys = isHump ? ['Code', 'Name', 'Id'] : (item.renderField.endsWith('_') ? ['code', 'name', 'id'] : ['_code', '_name', '_id'])\r\n          Object.assign(resultData, {\r\n            [map[item.mapid].field + fieldkeys[0]]: item[map[item.mapid].renderField + fieldkeys[0]] || '',\r\n            [map[item.mapid].field + fieldkeys[1]]: item[map[item.mapid].renderField + fieldkeys[1]] || '',\r\n            [map[item.mapid].field + fieldkeys[2]]: item[map[item.mapid].renderField + fieldkeys[2]] || ''\r\n          })\r\n        }\r\n      })\r\n      return {\r\n        viewData: resultData, // 渲染的可视数据\r\n        data: Object.assign({}, this.data, resultData), // 全量数据，\r\n        originalData: Object.assign({}, this.data) // 原始数据\r\n      }\r\n    },\r\n    generateSingItemRenderMap(column, level, columnIndex, nestIndex, map) { // 生成单条数据映射\r\n      let uuid = this.getUuid()\r\n      let renderField = nestIndex.split('.').join('_')\r\n      let render = column.cellRender || column.editRender\r\n      let curmap = {\r\n        mapid: uuid,\r\n        editable: !!column.editRender,\r\n        index: map.list.length + 1,\r\n        nestIndex: nestIndex,\r\n        itemConfig: column,\r\n        render: render,\r\n        level: level,\r\n        formula: column.formula ? column.formula + '' : '',\r\n        renderTitle: ''.padEnd(4 * (level - 1)) + column.title,\r\n        title: column.title, // 标题\r\n        renderField: 'renderValue', // 渲染数据\r\n        isTree: render && render.name === '$vxeTree', // 是不是下拉树，\r\n        field: column.field || renderField, // 原本字段\r\n        needmap: !!column.field // 是否需要反响映射\r\n      }\r\n      map.list.push(curmap)\r\n      map.map[uuid] = curmap\r\n      map.mapSource[column.field || renderField] = curmap\r\n      map.renderMap[renderField] = curmap\r\n    },\r\n    generateRenderMap(columns, level = 1, nestIndex = '', map = { list: [], renderMap: {}, map: {}, mapSource: {} }) { // 生成渲染项映射\r\n      columns.forEach((column, columnIndex) => {\r\n        if (column.visible !== false) {\r\n          this.generateSingItemRenderMap(column, level, columnIndex, nestIndex ? (nestIndex + '.' + columnIndex) : (columnIndex + ''), map)\r\n        }\r\n        if (Array.isArray(column.children) && column.children.length) {\r\n          this.generateRenderMap(column.children, level + 1, columnIndex, map)\r\n        }\r\n      })\r\n      return map\r\n    },\r\n    initItems(columns) { // 初始化table项\r\n      this.tableRenderMap = this.generateRenderMap(columns || this.itemsConfig)\r\n      this.tableRenderColumnsConfig = this.renderColumnsConfig\r\n      this.tableRenderColumnsGroups = Math.floor(this.tableRenderColumnsConfig / 2)\r\n    },\r\n    initData(obj) { // 初始化表格数据\r\n      obj = obj || this.data\r\n      const { list } = this.tableRenderMap\r\n      this.tableRenderData = list.map((item, index) => {\r\n        let resultData = {\r\n          index: item.index, // 行索引\r\n          nestIndex: item.nestIndex, // 嵌套关系\r\n          renderTitle: item.required ? item.renderTitle + '<span class=\"required\">*</span>' : item.renderTitle, // 渲染标题\r\n          editable: item.editable, // 是否可编辑\r\n          mapid: item.mapid, // 反向映射唯一id\r\n          required: item.required,\r\n          renderField: item.field, // 渲染字段\r\n          renderValue: obj[item.field] // 渲染值\r\n        }\r\n        if (item.isTree) {\r\n          let { isHump } = (item.render && item.render.props && item.render.props.config) || { isHump: false }\r\n          let fieldkeys = isHump ? ['Code', 'Name', 'Id'] : (item.renderField.endsWith('_') ? ['code', 'name', 'id'] : ['_code', '_name', '_id'])\r\n          Object.assign(resultData, {\r\n            [item.renderField + fieldkeys[0]]: obj[item.field + fieldkeys[0]],\r\n            [item.renderField + fieldkeys[1]]: obj[item.field + fieldkeys[1]],\r\n            [item.renderField + fieldkeys[2]]: obj[item.field + fieldkeys[2]]\r\n          })\r\n        }\r\n        return resultData\r\n      })\r\n    },\r\n    initFormula() { // 初始化公式 转化成渲染格式\r\n      let self = this\r\n      const { list, mapSource } = this.tableRenderMap\r\n      let resultData = {}\r\n      list.forEach((item, index) => {\r\n        if (item.formula) {\r\n          resultData[item.mapid + ':' + item.renderField] = self.transColFormulaToCellFomula(item.formula, item, mapSource)\r\n          item.renderFormule = resultData[item.renderField + ':' + item.mapid]\r\n        }\r\n      })\r\n      this.calculateConstraintConfigIn = Object.assign(\r\n        this.calculateConstraintConfigIn,\r\n        {\r\n          rowCodeCalcItemCodeField: 'mapid', // 配置了rowCodeFormulaConfig时使用的itemcode字段名\r\n          rowCodeFormulaConfig: resultData // { \"colField:itemcode\":\"{tableId:colField:itemcode}[运算符]\" }\r\n        })\r\n      return resultData\r\n    },\r\n    transColFormulaToCellFomula(formula, map, mapSource) { // 转化单条数据映射\r\n      let regR = new RegExp('({[a-zA-Z0-9_]*})', 'ig')\r\n      let rowsKey = formula.match(regR) === null ? [] : formula.match(regR)\r\n      if (rowsKey.length) {\r\n        for (let keyCF in rowsKey) {\r\n          let keyC = rowsKey[keyCF].replace(/\\{|\\}/g, '')\r\n          let reg = new RegExp('({' + keyC + '})', 'ig')\r\n          if (mapSource[keyC]) {\r\n            formula = formula.replace(reg, '{' + this.id + ':' + map.renderField + ':' + mapSource[keyC].mapid + '}')\r\n          } else {\r\n            if (this.data[keyC]) {\r\n              formula = formula.replace(reg, isNaN(parseFloat(this.data[keyC])) ? 0 : parseFloat(this.data[keyC]))\r\n            } else {\r\n              formula = formula.replace(reg, '{' + this.id + ':' + keyC + ':' + null + '}')\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return formula\r\n    },\r\n    init() { // 初始化\r\n      this.initItems()\r\n      this.initFormula()\r\n      this.initEditRules(this.editRules)\r\n      this.initData(this.data)\r\n    }\r\n  },\r\n  crated() {},\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  watch: {\r\n    toolbarConfig: {\r\n      handler() {\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    },\r\n    itemsConfig: {\r\n      handler() {\r\n        this.initItems()\r\n        this.initFormula()\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    },\r\n    defaultMoneyUnit: {\r\n      handler() {},\r\n      immediate: true\r\n    },\r\n    id: {\r\n      handler() {},\r\n      immediate: true\r\n    },\r\n    mode: {\r\n      handler() {},\r\n      immediate: true\r\n    },\r\n    editConfig: {\r\n      handler() {},\r\n      deep: true,\r\n      immediate: true\r\n    },\r\n    renderColumnsConfig: {\r\n      handler() {},\r\n      immediate: true\r\n    },\r\n    editRules: {\r\n      handler() {\r\n        this.initEditRules(this.editRules)\r\n        this.initData(this.data)\r\n      },\r\n      immediate: true\r\n    },\r\n    data: {\r\n      handler() {\r\n        this.initData(this.data)\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='scss'>\r\n.basic-info-table{\r\n .vxe-grid {\r\n   .vxe-table.border--default .vxe-table--header-wrapper,\r\n   .vxe-table.border--full .vxe-table--header-wrapper,\r\n   .vxe-table.border--outer .vxe-table--header-wrapper{\r\n      background: var(--hightlight-color);\r\n   }\r\n   .vxe-table .vxe-body--row {\r\n      background: #ffffff;\r\n     &.row--stripe {\r\n       background: var(--zebra-color);\r\n     }\r\n      .vxe-body--column{\r\n        height:34px;\r\n      }\r\n      .required{\r\n        color: #f00;\r\n        font-size: 18px;\r\n        padding: 0 0 0 5px;\r\n        position: relative;\r\n        top: 3px;\r\n      }\r\n     .vxe-body--column * {\r\n       border: none;\r\n       background: transparent;\r\n       &.is--disabled {\r\n         background: #f7fafd;\r\n       }\r\n     }\r\n    }\r\n  }\r\n }\r\n.basic-info-table.detail{\r\n  .vxe-grid .vxe-table .vxe-body--row {\r\n    .required{\r\n     display:none;\r\n    }\r\n  }\r\n}\r\n.vxe-select-option{\r\n   max-width: unset;\r\n}\r\n</style>\r\n"]}]}