{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\warningOverview\\index.vue?vue&type=style&index=1&lang=css&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\warningOverview\\index.vue","mtime":1694576524806},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi53YXJuaW5nLW92ZXJ2aWV3IHsNCi0tZm9udC1mYW1pbHktaHl0OiDnq5nphbfluobnp5Hpu4TmsrnkvZM7DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgbA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/main/warningOverview","sourcesContent":["<template>\r\n  <div class=\"warning-overview\">\r\n    <div class=\"warning-overview-body\">\r\n      <header class=\"warning-overview-header\">{{ $store.state.userInfo.admdivname.replace('本级','') }}监控管理预警总览</header>\r\n      <main>\r\n        <!--顶部规则和地图-->\r\n        <div class=\"warning-overview-top\">\r\n          <div class=\"rule-container\">\r\n            <div class=\"rule-use-wrapper\">\r\n              <!--<RuleUseInfoChart />-->\r\n              <div class=\"f20 rule-swiper-title\">监控整体情况</div>\r\n              <div class=\"width1 color1 mgr15\">\r\n                <div class=\"rule-swiper-title\">本月预警数据：<div class=\"font-style\">{{ warnMonthList.warnCount || '0' }}笔</div></div>\r\n                <div class=\"rule-swiper-title\">本月已处理：<div class=\"font-style\">{{ warnMonthList.handAmount || '0' }}笔</div></div>\r\n              </div>\r\n\r\n              <div class=\"width2 color2 mgr15\">\r\n                <div class=\"rule-swiper-title\">本年累计预警数据：<div class=\"font-style\">{{ warnYearList.warnCount || '0' }}笔</div></div>\r\n                <div class=\"rule-swiper-title\">本年累计已处理：<div class=\"font-style\">{{ warnYearList.handAmount || '0' }}笔</div></div>\r\n              </div>\r\n\r\n              <div class=\"width3 color3 mgr15\">\r\n                <div class=\"rule-swiper-title\">所有规则：<div class=\"font-style\">{{ ruleList.ruleCount || '0' }}笔</div></div>\r\n                <div class=\"rule-swiper-title\">启用规则：<div class=\"font-style\">{{ ruleList.activeRuleCount || '0' }}笔</div></div>\r\n              </div>\r\n            </div>\r\n            <div class=\"rule-scroll-wrapper\">\r\n              <RuleScroll />\r\n            </div>\r\n          </div>\r\n          <div class=\"map-and-menu\">\r\n            <Map />\r\n            <MenuModel />\r\n          </div>\r\n        </div>\r\n        <div class=\"warning-overview-bottom\">\r\n          <div class=\"do-info\">\r\n            <div class=\"module-wrapper\">\r\n              <p class=\"f20 rule-swiper-title\">全省监控预警处理率排名</p>\r\n              <vxe-grid\r\n                :columns=\"tableColumnsConfig1\"\r\n                :data=\"tableData1\"\r\n                height=\"224\"\r\n                auto-resize\r\n                sync-resize\r\n                show-overflow=\"tooltip\"\r\n                show-header-overflow=\"tooltip\"\r\n                border=\"full\"\r\n                class=\"chart-table\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"do-info\">\r\n            <div class=\"module-wrapper\">\r\n              <p class=\"f20 rule-swiper-title\">直达资金管理工作情况排名</p>\r\n              <vxe-grid\r\n                :columns=\"tableColumnsConfig2\"\r\n                :data=\"tableData2\"\r\n                height=\"224\"\r\n                auto-resize\r\n                sync-resize\r\n                show-overflow=\"tooltip\"\r\n                show-header-overflow=\"tooltip\"\r\n                border=\"full\"\r\n                class=\"chart-table\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"warning-data\">\r\n            <div class=\"module-wrapper\">\r\n              <p class=\"f20 rule-swiper-title\">全省“三公”经费预警处理率排名</p>\r\n              <vxe-grid\r\n                :columns=\"tableColumnsConfig3\"\r\n                :data=\"tableData3\"\r\n                height=\"224\"\r\n                auto-resize\r\n                sync-resize\r\n                show-overflow=\"tooltip\"\r\n                show-header-overflow=\"tooltip\"\r\n                border=\"full\"\r\n                class=\"chart-table\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref } from '@vue/composition-api'\r\nimport Map from './components/Map'\r\nimport MenuModel from './components/MenuModel'\r\nimport RuleUseInfoChart from './components/RuleUseInfoChart'\r\nimport RuleScroll from './components/RuleScroll'\r\nimport ViewAllRules from './components/ViewAllRules'\r\nimport MonitoringHandlingInfo from './components/MonitoringHandlingInfo'\r\nimport { getWarnByMofDivCode, ruleActivateInfo, rankProcessing, ledgerProcessing } from '@/api/frame/main/warningOverview'\r\nimport store from '@/store/index'\r\n\r\nexport default defineComponent({\r\n  components: { Map, MenuModel, RuleUseInfoChart, RuleScroll, ViewAllRules, MonitoringHandlingInfo },\r\n  setup() {\r\n    // 表格数据\r\n    const warnMonthList = ref({})\r\n    const warnYearList = ref({})\r\n    const ruleList = ref({})\r\n    const tableData1 = ref([])\r\n    const tableData2 = ref([])\r\n    const tableData3 = ref([])\r\n    /**\r\n     * 获取按月数据\r\n     * @return {Promise<void>}\r\n     */\r\n    async function getMonthData() {\r\n      const { data } = await getWarnByMofDivCode({ type: 2 })\r\n      warnMonthList.value = data[0] || {}\r\n    }\r\n    getMonthData()\r\n    /**\r\n     * 获取按年数据\r\n     * @return {Promise<void>}\r\n     */\r\n    async function getYearData() {\r\n      const { data } = await getWarnByMofDivCode({ type: 1 })\r\n      warnYearList.value = data[0] || {}\r\n    }\r\n    getYearData()\r\n    /**\r\n     * 规则启用情况\r\n     * @return {Promise<void>}\r\n     */\r\n    async function getRuleActivateInfo() {\r\n      const { data } = await ruleActivateInfo()\r\n      ruleList.value = data[0] || {}\r\n    }\r\n    getRuleActivateInfo()\r\n    /**\r\n     * 全省监控预警处理率排名\r\n     * @return {Promise<void>}\r\n     */\r\n    async function getRankProcessing() {\r\n      const { data } = await rankProcessing({ fiscalYear: store.state.userInfo.year })\r\n      tableData1.value = data || []\r\n    }\r\n    getRankProcessing()\r\n    /**\r\n     * 全省“三公”监控预警处理率排名\r\n     * @return {Promise<void>}\r\n     */\r\n    async function getRankSGProcessing() {\r\n      const { data } = await rankProcessing({ fiscalYear: store.state.userInfo.year, regulationClass: '0205' })\r\n      tableData3.value = data || []\r\n    }\r\n    getRankSGProcessing()\r\n    /**\r\n     * 全省监控预警\r\n     * @return {Promise<void>}\r\n     */\r\n    async function getRankQSProcessing() {\r\n      const { data } = await rankProcessing({ fiscalYear: store.state.userInfo.year, regulationClass: '0201' })\r\n      tableData2.value = data || []\r\n    }\r\n    getRankQSProcessing()\r\n    /**\r\n     * 直达资金管理工作排名\r\n     * @return {Promise<void>}\r\n     */\r\n    async function getLedgerProcessing() {\r\n      const { data } = await ledgerProcessing({ fiscalYear: store.state.userInfo.year, reportCode: 'zdzjzcjdpm' })\r\n      tableData2.value = data?.length > 0 && data.map(({ mofDivName, amountPro, amountPayPro }) => {\r\n        return { mofDivName, amountPro, amountPayPro, rankProcess: tableData2['rankProcess'] }\r\n      })\r\n    }\r\n    getLedgerProcessing()\r\n    return {\r\n      warnMonthList,\r\n      warnYearList,\r\n      ruleList,\r\n      tableData1,\r\n      tableData2,\r\n      tableData3\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      tableColumnsConfig1: [\r\n        {\r\n          title: '名次',\r\n          type: 'seq',\r\n          sortable: false,\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '地区名称',\r\n          field: 'mofDivName',\r\n          sortable: false,\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '预警数据处理率',\r\n          field: 'rankProcess',\r\n          sortable: false,\r\n          align: 'center',\r\n          formatter: ({ row }) => {\r\n            return row.rankProcess ? `${row.rankProcess}%` : '0%'\r\n          }\r\n        },\r\n        {\r\n          title: '问询处理率',\r\n          field: 'rankAskProcess',\r\n          sortable: false,\r\n          align: 'center',\r\n          formatter: ({ row }) => {\r\n            return row.rankAskProcess ? `${row.rankAskProcess}%` : '0%'\r\n          }\r\n        }\r\n      ],\r\n      tableColumnsConfig2: [\r\n        {\r\n          title: '名次',\r\n          type: 'seq',\r\n          sortable: false,\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '预算下达进度',\r\n          field: '',\r\n          sortable: false,\r\n          align: 'center',\r\n          children: [\r\n            {\r\n              title: '区划名称',\r\n              field: 'mofDivName',\r\n              sortable: false,\r\n              align: 'center'\r\n            },\r\n            {\r\n              title: '进度',\r\n              field: 'amountPro',\r\n              sortable: false,\r\n              align: 'center',\r\n              formatter: ({ row }) => {\r\n                return row.amountPro ? `${row.amountPro}%` : '0%'\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          title: '资金支出进度',\r\n          field: '',\r\n          sortable: false,\r\n          align: 'center',\r\n          children: [\r\n            {\r\n              title: '区划名称',\r\n              field: 'mofDivName',\r\n              sortable: false,\r\n              align: 'center'\r\n            },\r\n            {\r\n              title: '进度',\r\n              field: 'amountPayPro',\r\n              sortable: false,\r\n              align: 'center',\r\n              formatter: ({ row }) => {\r\n                return row.amountPayPro ? `${row.amountPayPro}%` : '0%'\r\n              }\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          title: '预警数据处理率',\r\n          field: '',\r\n          sortable: false,\r\n          align: 'center',\r\n          children: [\r\n            {\r\n              title: '区划名称',\r\n              field: 'mofDivName',\r\n              sortable: false,\r\n              align: 'center'\r\n            },\r\n            {\r\n              title: '进度',\r\n              field: 'rankProcess',\r\n              sortable: false,\r\n              align: 'center',\r\n              formatter: ({ row }) => {\r\n                return row.rankProcess ? `${row.rankProcess}%` : '0%'\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      tableColumnsConfig3: [\r\n        {\r\n          title: '名次',\r\n          type: 'seq',\r\n          sortable: false,\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '地区名称',\r\n          field: 'mofDivName',\r\n          sortable: false,\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '预警数据处理率',\r\n          field: 'rankProcess',\r\n          sortable: false,\r\n          align: 'center',\r\n          formatter: ({ row }) => {\r\n            return row.rankProcess ? `${row.rankProcess}%` : '0%'\r\n          }\r\n        },\r\n        {\r\n          title: '问询处理率',\r\n          field: 'rankAskProcess',\r\n          sortable: false,\r\n          align: 'center',\r\n          formatter: ({ row }) => {\r\n            return row.rankAskProcess ? `${row.rankAskProcess}%` : '0%'\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n@import \"../../px-to-vw-page/common/style/module-wrapper\";\r\n@import \"../../px-to-vw-page/common/style/vxe-table-style\";\r\n.warning-overview {\r\n  padding: 0 24px 24px;\r\n  box-sizing: border-box;\r\n  .warning-overview-body {\r\n    min-width: 1872px;\r\n    margin: 0 auto;\r\n  }\r\n  &-header {\r\n    padding: 12px 0 10px;\r\n    font-size: 22px;\r\n    color: #595959;\r\n    line-height: 34px;\r\n    font-weight: bold;\r\n    text-align: center;\r\n  }\r\n}\r\n.rule-swiper-title {\r\n  padding: 16px 22px;\r\n  font-size: 16px;\r\n  color: #595959;\r\n  //line-height: 26px;\r\n  font-weight: bold;\r\n  box-sizing: border-box;\r\n}\r\n.font-style{\r\n  font-weight: bold;\r\n  font-size: 20px;\r\n}\r\n.width1{\r\n  height: 200px;\r\n  width: 30%;\r\n  display: inline-block;\r\n}\r\n.width2{\r\n  height: 200px;\r\n  width: 35%;\r\n  display: inline-block;\r\n}\r\n.width3{\r\n  height: 200px;\r\n  width: 25%;\r\n  display: inline-block;\r\n}\r\n.color1{\r\n  background-color: #FBE4D9FF;\r\n}\r\n.color2{\r\n  background-color: #f8cece;\r\n}\r\n.color3{\r\n  background-color: #bafaf9;\r\n}\r\n.warning-overview-top {\r\n  display: flex;\r\n  height: 586px;\r\n\r\n  .rule-container {\r\n    width: 538px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    margin-right: 10px;\r\n\r\n    .rule-use-wrapper,\r\n    .rule-scroll-wrapper{\r\n      flex-shrink: 0;\r\n      width: 538px;\r\n      height: 266px;\r\n      background: #fff;\r\n    }\r\n\r\n    .rule-scroll-wrapper {\r\n      height: 298px;\r\n    }\r\n  }\r\n\r\n  .map-and-menu {\r\n    display: flex;\r\n  }\r\n}\r\n\r\n.warning-overview-bottom {\r\n  display: flex;\r\n  margin-top: 16px;\r\n\r\n  .do-info,\r\n  .warning-data {\r\n    height: 298px;\r\n    width: 616px;\r\n  }\r\n  .do-info {\r\n    margin-right: 16px;\r\n  }\r\n}\r\n</style>\r\n<style>\r\n.warning-overview {\r\n--font-family-hyt: 站酷庆科黄油体;\r\n}\r\n</style>\r\n"]}]}