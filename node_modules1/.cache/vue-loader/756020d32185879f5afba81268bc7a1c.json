{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\filePreview\\filePreview.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\filePreview\\filePreview.vue","mtime":1695716044965},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQXBsYXllciBmcm9tICd2dWUtYXBsYXllcicNCi8vIGltcG9ydCBIdHRwTW9kdWxlIGZyb20gJ0AvYXBpL2ZyYW1lL21haW4vTW9uaXRvcmluZy9Nb25pdG9lUmVwb3J0Q3JlYXRlLmpzJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnRmlsZVByZXZpZXcnLA0KICBjb21wb25lbnRzOiB7IEFwbGF5ZXIgfSwNCiAgcHJvcHM6IHsNCiAgICB2aXNpYmxlOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgfSwNCiAgICBmaWxlR3VpZDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuICcnDQogICAgICB9DQogICAgfSwNCiAgICBhcHBJZDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuICcnDQogICAgICB9DQogICAgfSwNCiAgICB0b3BUaXRsZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuICfpooTop4gnDQogICAgICB9DQogICAgfSwNCiAgICBwcmV2aWV3WWVhcjogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuICcnDQogICAgICB9DQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICByZXNpemU6IGZhbHNlLA0KICAgICAgbG9hZGluZzogZmFsc2UsDQogICAgICBzdHlsZTogew0KICAgICAgICBoZWlnaHQ6ICdjYWxjKDEwMHZoIC0gMXB4KScNCiAgICAgIH0sDQogICAgICBlcnJvclNob3c6IGZhbHNlLA0KICAgICAgZmlsZVNob3c6IGZhbHNlLA0KICAgICAgdGl0bGU6ICfpmYTku7bpooTop4gnLA0KICAgICAgLy8g5paH5pys57G75Z6L5paH5Lu25ZCO57yADQogICAgICB0ZXh0VHlwZTogWyd0eHQnLCAnc3FsJywgJ2phdmEnLCAnanMnLCAnaHRtbCcsICd4bWwnLCAnY3NzJywgJ3ltbCddLA0KICAgICAgLy8g5Zu+54mH57G75Z6L5paH5Lu25ZCO57yADQogICAgICBpbWdUeXBlOiBbJ3BuZycsICdqcGcnLCAnanBlZycsICdibXAnLCAnZ2lmJ10sDQogICAgICAvLyBvZmZpY2Xmlofku7bnsbvlnovlkI7nvIANCiAgICAgIG9mZmljZVR5cGU6IFsnZG9jJywgJ2RvY3gnLCAneGxzeCcsICd4bHMnLCAncHB0JywgJ3BwdHgnXSwNCiAgICAgIC8vIHBkZuaWh+S7tuWQjue8gA0KICAgICAgcGRmVHlwZTogWydwZGYnXSwNCiAgICAgIC8vIOinhumikeexu+Wei+aWh+S7tuWQjue8gA0KICAgICAgdmlkZW9UeXBlOiBbJ21wNCcsICdtMnYnLCAnbWt2J10sDQogICAgICAvLyDpn7PkuZDnsbvlnovmlofku7blkI7nvIANCiAgICAgIG11c2ljVHlwZTogWydtcDMnXSwNCiAgICAgIC8vIOWOi+e8qeWMheebuOWFsw0KICAgICAgY29tcHJlc3NUeXBlOiBbJ3ppcCcsICd0YXInXSwNCiAgICAgIC8vIOS4jeaUr+aMgeeahOaWh+S7tuexu+Weiw0KICAgICAgbm90U3VwcG9ydFR5cGU6IFtdLA0KICAgICAgZGlhbG9nVmlzaWJsZTogdGhpcy52aXNpYmxlLA0KICAgICAgdXJsOiAnJywNCiAgICAgIGZpbGVUeXBlOiAnJywNCiAgICAgIGZpbGU6IHt9LA0KICAgICAgbXVzaWNPcHRpb25zOiB7DQogICAgICAgIHRpdGxlOiAnUHJlcGFyYXRpb24nLA0KICAgICAgICAvLyBhdXRob3I6ICcnLA0KICAgICAgICB1cmw6ICdodHRwOi8vZGV2dGVzdC5xaW5pdWRuLmNvbS9QcmVwYXJhdGlvbi5tcDMnLA0KICAgICAgICAvLyBwaWM6ICdodHRwOi8vZGV2dGVzdC5xaW5pdWRuLmNvbS9QcmVwYXJhdGlvbi5qcGcnLA0KICAgICAgICBscmM6ICdbMDA6MDAuMDBdbHJjIGhlcmVcblswMDowMS4wMF1hcGxheWVyJw0KICAgICAgfSwNCiAgICAgIC8vIOaSreaUvuWZqOmFjee9rg0KICAgICAgcG9zaXRpdmVQbGF5ZXJPcHRpb25zOiB7DQogICAgICAgIHBsYXliYWNrUmF0ZXM6IFswLjUsIDEuMCwgMS41LCAyLjBdLCAvLyDmkq3mlL7pgJ/luqYNCiAgICAgICAgYXV0b3BsYXk6IGZhbHNlLCAvLyDlpoLmnpx0cnVlLOa1j+iniOWZqOWHhuWkh+WlveaXtuW8gOWni+WbnuaUvuOAgg0KICAgICAgICBtdXRlZDogZmFsc2UsIC8vIOm7mOiupOaDheWGteS4i+WwhuS8mua2iOmZpOS7u+S9lemfs+mikeOAgg0KICAgICAgICBsb29wOiBmYWxzZSwgLy8g5a+86Ie06KeG6aKR5LiA57uT5p2f5bCx6YeN5paw5byA5aeL44CCDQogICAgICAgIHByZWxvYWQ6ICdhdXRvJywgLy8g5bu66K6u5rWP6KeI5Zmo5ZyoPHZpZGVvPuWKoOi9veWFg+e0oOWQjuaYr+WQpuW6lOivpeW8gOWni+S4i+i9veinhumikeaVsOaNruOAgmF1dG/mtY/op4jlmajpgInmi6nmnIDkvbPooYzkuLos56uL5Y2z5byA5aeL5Yqg6L296KeG6aKR77yI5aaC5p6c5rWP6KeI5Zmo5pSv5oyB77yJDQogICAgICAgIGxhbmd1YWdlOiAnemgtQ04nLA0KICAgICAgICBhc3BlY3RSYXRpbzogJzE2OjEzJywgLy8g5bCG5pKt5pS+5Zmo572u5LqO5rWB55WF5qih5byP77yM5bm25Zyo6K6h566X5pKt5pS+5Zmo55qE5Yqo5oCB5aSn5bCP5pe25L2/55So6K+l5YC844CC5YC85bqU6K+l5Luj6KGo5LiA5Liq5q+U5L6LIC0g55So5YaS5Y+35YiG6ZqU55qE5Lik5Liq5pWw5a2X77yI5L6L5aaCIjE2Ojki5oiWIjQ6MyLvvIkNCiAgICAgICAgZmx1aWQ6IHRydWUsIC8vIOW9k3RydWXml7bvvIxWaWRlby5qcyBwbGF5ZXLlsIbmi6XmnInmtYHkvZPlpKflsI/jgILmjaLlj6Xor53or7TvvIzlroPlsIbmjInmr5TkvovnvKnmlL7ku6XpgILlupTlhbblrrnlmajjgIINCiAgICAgICAgc291cmNlczogW3sNCiAgICAgICAgICB0eXBlOiAnJywNCiAgICAgICAgICBzcmM6ICcnIC8vIOinhumikXVybOWcsOWdgA0KICAgICAgICB9XSwNCiAgICAgICAgcG9zdGVyOiAnJywgLy8g5L2g55qE5bCB6Z2i5Zyw5Z2ADQogICAgICAgIC8vIHdpZHRoOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgsDQogICAgICAgIG5vdFN1cHBvcnRlZE1lc3NhZ2U6ICfmraTop4bpopHmmoLml6Dms5Xmkq3mlL7vvIzor7fnqI3lkI7lho3or5UnLCAvLyDlhYHorrjopobnm5ZWaWRlby5qc+aXoOazleaSreaUvuWqkuS9k+a6kOaXtuaYvuekuueahOm7mOiupOS/oeaBr+OAgg0KICAgICAgICBjb250cm9sQmFyOiB7DQogICAgICAgICAgdGltZURpdmlkZXI6IHRydWUsDQogICAgICAgICAgZHVyYXRpb25EaXNwbGF5OiB0cnVlLA0KICAgICAgICAgIHJlbWFpbmluZ1RpbWVEaXNwbGF5OiBmYWxzZSwNCiAgICAgICAgICBmdWxsc2NyZWVuVG9nZ2xlOiB0cnVlIC8vIOWFqOWxj+aMiemSrg0KICAgICAgICB9LA0KICAgICAgICBjb21tb246ICdwb3NpdGl2ZVBsYXllcicNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBkaWFsb2dDbG9zZSgpIHsNCiAgICAgIHRoaXMuJHBhcmVudC5maWxlUHJldmlld0RpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgIH0sDQogICAgbW91bnRlZEluaXQoKSB7DQogICAgICB0aGlzLnRvUGRmKCkNCiAgICB9LA0KICAgIC8vIHJlc2l6ZeWbnuiwg+WHveaVsO+8jOiuoeeul+mrmOW6pg0KICAgIHpvb21DYWxsYmFjayh0eXBlLCAkZXZlbnQpIHsNCiAgICAgIGxldCBjdXJNb2RhbEhlaWdodCA9IHRoaXMuJHJlZnMuZmlsZVByZXZpZXdSZWYuZ2V0Qm94KCkuc3R5bGUuaGVpZ2h0DQogICAgICBsZXQgY3VyTW9kYWxIZWlnaHROdW1iZXIgPSBjdXJNb2RhbEhlaWdodC5zdWJzdHJpbmcoMCwgY3VyTW9kYWxIZWlnaHQubGVuZ3RoIC0gMikNCiAgICAgIC8vIHRvZG8g6L+Z6YeM6KaB5YeP5Y6755qE5bqU6K+l5piv5a+86Iiq5qCP5pWi6LWM77yM546w5Zyo5YWI5YaZ5q27DQogICAgICBjdXJNb2RhbEhlaWdodE51bWJlciA9IGN1ck1vZGFsSGVpZ2h0TnVtYmVyIC0gNjUNCiAgICAgIHRoaXMuc3R5bGUgPSB7DQogICAgICAgIGhlaWdodDogY3VyTW9kYWxIZWlnaHROdW1iZXIgKyAncHgnDQogICAgICB9DQogICAgfSwNCiAgICBpbkFycmF5KHR5cGUsIHR5cGVzKSB7DQogICAgICBsZXQgZmxhZyA9IGZhbHNlDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmICh0eXBlID09PSB0eXBlc1tpXSkgew0KICAgICAgICAgIGZsYWcgPSB0cnVlDQogICAgICAgICAgYnJlYWsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIGZsYWcNCiAgICB9LA0KICAgIC8vIOWwhndvcmTnrYnmlofku7bovazmiJBwZGbov5vooYzpooTop4gNCiAgICB0b1BkZigpIHsNCiAgICAgIGlmICghdGhpcy4kc3RvcmUuZ2V0dGVycy5pc1N4KSB7DQogICAgICAgIHdpbmRvdy5vcGVuKGAke3Byb2Nlc3MuZW52LkJBU0VfVVJMfWZpbGVWaWV3Lmh0bWw/ZmlsZWd1aWQ9YCArIHRoaXMuZmlsZUd1aWQgKyAnJmFwcGlkPScgKyB0aGlzLmFwcElkKQ0KICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgfQ0KICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQ0KICAgICAgbGV0IGZpbGVQcmV2aWV3U2VydmljZSA9ICcnDQogICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHsNCiAgICAgICAgZmlsZVByZXZpZXdTZXJ2aWNlID0gd2luZG93Lmdsb2FibGVUb29sRm4uc2VydmVyR2F0ZXdheU1hcC5kZXZlbG9wbWVudC5maWxlUHJldmlld1NlcnZpY2UNCiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykgew0KICAgICAgICBmaWxlUHJldmlld1NlcnZpY2UgPSB3aW5kb3cuZ2xvYWJsZVRvb2xGbi5zZXJ2ZXJHYXRld2F5TWFwLnByb2R1Y3Rpb24uZmlsZVByZXZpZXdTZXJ2aWNlDQogICAgICB9DQogICAgICBjb25zdCB1cmxPYmogPSBmaWxlUHJldmlld1NlcnZpY2UgKyAnL3YxL2ZpbGVfcHJldmlldycNCiAgICAgIHRoaXMuJGh0dHAuZ2V0KHVybE9iaiwgeyBhcHBJZDogdGhpcy5hcHBJZCwgZmlsZUlkOiB0aGlzLmZpbGVHdWlkIH0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsNCiAgICAgICAgICB0aGlzLmZpbGUgPSByZXMuZGF0YQ0KICAgICAgICAgIHRoaXMuYnVpbGRGaWxlVHlwZSgpDQogICAgICAgICAgdGhpcy5maWxlU2hvdyA9IHRydWUNCiAgICAgICAgICB0aGlzLmVycm9yU2hvdyA9IGZhbHNlDQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsgdHlwZTogJ3dhcm5pbmcnLCBtZXNzYWdlOiByZXMubXNnIH0pDQogICAgICAgICAgdGhpcy5maWxlU2hvdyA9IGZhbHNlDQogICAgICAgICAgdGhpcy5lcnJvclNob3cgPSB0cnVlDQogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgICAgICB0aGlzLnJlc2l6ZSA9IGZhbHNlDQogICAgICAgIH0NCiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpDQogICAgICAgIHRoaXMuJG1lc3NhZ2UoeyB0eXBlOiAnZXJyb3InLCBtZXNzYWdlOiBlcnJvciB9KQ0KICAgICAgICB0aGlzLmZpbGVTaG93ID0gZmFsc2UNCiAgICAgICAgdGhpcy5lcnJvclNob3cgPSB0cnVlDQogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICAgIHRoaXMucmVzaXplID0gZmFsc2UNCiAgICAgIH0pDQogICAgICAvLyBoaXMubG9hZGluZyA9IHRydWUNCiAgICAgIC8vIGxldCBmaWxlUHJldmlld1NlcnZpY2UgPSAnJw0KICAgICAgLy8gaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7DQogICAgICAvLyAgIGZpbGVQcmV2aWV3U2VydmljZSA9IHdpbmRvdy5nbG9hYmxlVG9vbEZuLnNlcnZlckdhdGV3YXlNYXAuZGV2ZWxvcG1lbnQuZmlsZVByZXZpZXdTZXJ2aWNlDQogICAgICAvLyB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHsNCiAgICAgIC8vICAgZmlsZVByZXZpZXdTZXJ2aWNlID0gd2luZG93Lmdsb2FibGVUb29sRm4uc2VydmVyR2F0ZXdheU1hcC5wcm9kdWN0aW9uLmZpbGVQcmV2aWV3U2VydmljZQ0KICAgICAgLy8gfQ0KICAgICAgLy8gY29uc3QgdXJsT2JqID0gZmlsZVByZXZpZXdTZXJ2aWNlICsgJy92MS9maWxlX3ByZXZpZXcnDQogICAgICAvLyB0aGlzLiRodHRwLmdldCh1cmxPYmosIHsgYXBwSWQ6IHRoaXMuYXBwSWQsIGZpbGVJZDogdGhpcy5maWxlR3VpZCB9KQ0KICAgICAgLy8gICAudGhlbihyZXMgPT4gew0KICAgICAgLy8gICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7DQogICAgICAvLyAgICAgICB0aGlzLmZpbGUgPSByZXMuZGF0YQ0KICAgICAgLy8gICAgICAgdGhpcy5idWlsZEZpbGVUeXBlKCkNCiAgICAgIC8vICAgICAgIHRoaXMuZmlsZVNob3cgPSB0cnVlDQogICAgICAvLyAgICAgICB0aGlzLmVycm9yU2hvdyA9IGZhbHNlDQogICAgICAvLyAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgLy8gICAgIH0gZWxzZSB7DQogICAgICAvLyAgICAgICB0aGlzLiRtZXNzYWdlKHsgdHlwZTogJ3dhcm5pbmcnLCBtZXNzYWdlOiByZXMubXNnIH0pDQogICAgICAvLyAgICAgICB0aGlzLmZpbGVTaG93ID0gZmFsc2UNCiAgICAgIC8vICAgICAgIHRoaXMuZXJyb3JTaG93ID0gdHJ1ZQ0KICAgICAgLy8gICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgIC8vICAgICAgIHRoaXMucmVzaXplID0gZmFsc2UNCiAgICAgIC8vICAgICB9DQogICAgICAvLyAgIH0pDQogICAgICAvLyAgIC5jYXRjaChlcnJvciA9PiB7DQogICAgICAvLyAgICAgY29uc29sZS5sb2coZXJyb3IpDQogICAgICAvLyAgICAgdGhpcy4kbWVzc2FnZSh7IHR5cGU6ICdlcnJvcicsIG1lc3NhZ2U6IGVycm9yIH0pDQogICAgICAvLyAgICAgdGhpcy5maWxlU2hvdyA9IGZhbHNlDQogICAgICAvLyAgICAgdGhpcy5lcnJvclNob3cgPSB0cnVlDQogICAgICAvLyAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UNCiAgICAgIC8vICAgICB0aGlzLnJlc2l6ZSA9IGZhbHNlDQogICAgICAvLyAgIH0pDQogICAgfSwNCiAgICBidWlsZEZpbGVUeXBlKCkgew0KICAgICAgbGV0IGZpbGVTdWZmaXggPSB0aGlzLmZpbGUuc3VmZml4DQogICAgICB0aGlzLnRpdGxlID0gdGhpcy5maWxlLmZpbGVuYW1lDQogICAgICBsZXQgZmlsZVByZXZpZXdTZXJ2aWNlID0gJycNCiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykgew0KICAgICAgICBmaWxlUHJldmlld1NlcnZpY2UgPSB3aW5kb3cuZ2xvYWJsZVRvb2xGbi5zZXJ2ZXJHYXRld2F5TWFwLmRldmVsb3BtZW50LmZpbGVQcmV2aWV3U2VydmljZQ0KICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7DQogICAgICAgIGZpbGVQcmV2aWV3U2VydmljZSA9IHdpbmRvdy5nbG9hYmxlVG9vbEZuLnNlcnZlckdhdGV3YXlNYXAucHJvZHVjdGlvbi5maWxlUHJldmlld1NlcnZpY2UNCiAgICAgIH0NCiAgICAgIGxldCBuZXdVcmwgPSBmaWxlUHJldmlld1NlcnZpY2UgKyAnLycgKyB0aGlzLmZpbGUucGF0aC5zcGxpdCgnLycpLnNwbGljZSgzKS50b1N0cmluZygpLnJlcGxhY2UoLywvZywgJy8nKQ0KICAgICAgdGhpcy51cmwgPSBuZXdVcmwNCiAgICAgIGNvbnNvbGUubG9nKG5ld1VybCkNCiAgICAgIHRoaXMucG9zaXRpdmVQbGF5ZXJPcHRpb25zLnNvdXJjZXNbMF0uc3JjID0gdGhpcy51cmwNCiAgICAgIGlmICh0aGlzLmluQXJyYXkoZmlsZVN1ZmZpeCwgdGhpcy5ub3RTdXBwb3J0VHlwZSkpIHsNCiAgICAgICAgdGhpcy5maWxlVHlwZSA9ICdub1N1cHBvcnQnDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuaW5BcnJheShmaWxlU3VmZml4LCB0aGlzLmltZ1R5cGUpKSB7DQogICAgICAgIHRoaXMuZmlsZVR5cGUgPSAnaW1nJw0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmluQXJyYXkoZmlsZVN1ZmZpeCwgdGhpcy52aWRlb1R5cGUpKSB7DQogICAgICAgIHRoaXMuZmlsZVR5cGUgPSAndmlkZW8nDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuaW5BcnJheShmaWxlU3VmZml4LCB0aGlzLm11c2ljVHlwZSkpIHsNCiAgICAgICAgdGhpcy5maWxlVHlwZSA9ICdtdXNpYycNCiAgICAgICAgdGhpcy5zdHlsZS5oZWlnaHQgPSAnNzBweCcNCiAgICAgICAgdGhpcy5tdXNpY09wdGlvbnMudXJsID0gdGhpcy51cmwNCiAgICAgICAgdGhpcy5tdXNpY09wdGlvbnMudGl0bGUgPSB0aGlzLnRpdGxlDQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuaW5BcnJheShmaWxlU3VmZml4LCB0aGlzLm9mZmljZVR5cGUpIHx8DQogICAgICAgIHRoaXMuaW5BcnJheShmaWxlU3VmZml4LCB0aGlzLnRleHRUeXBlKSB8fA0KICAgICAgICB0aGlzLmluQXJyYXkoZmlsZVN1ZmZpeCwgdGhpcy5wZGZUeXBlKSkgew0KICAgICAgICB0aGlzLmZpbGVUeXBlID0gJ3dvcmQnDQogICAgICAgIHRoaXMucmVzaXplID0gdHJ1ZQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmluQXJyYXkoZmlsZVN1ZmZpeCwgWydwZGYnXSkpIHsNCiAgICAgICAgdGhpcy5maWxlVHlwZSA9ICdwZGYnDQogICAgICB9DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMubW91bnRlZEluaXQoKQ0KICB9LA0KICB3YXRjaDogew0KICAgIGRpYWxvZ1Zpc2libGU6IHsNCiAgICAgIGhhbmRsZXIobmV3dmFsKSB7DQogICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTp2aXNpYmxlJywgbmV3dmFsKQ0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["filePreview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"filePreview.vue","sourceRoot":"src/components/filePreview","sourcesContent":["<template>\r\n  <vxe-modal\r\n    id=\"filePreview\"\r\n    ref=\"filePreviewRef\"\r\n    v-model=\"dialogVisible\"\r\n    width=\"90%\"\r\n    height=\"90%\"\r\n    :resize=\"resize\"\r\n    :dblclick-zoom=\"resize\"\r\n    storage\r\n    transfer\r\n    esc-closable\r\n    :loading=\"loading\"\r\n    @zoom=\"zoomCallback\"\r\n  >\r\n    <template v-slot:title>\r\n      <span>{{ topTitle }}</span>\r\n    </template>\r\n    <template v-slot>\r\n      <div style=\"text-align: center;\">\r\n        <div v-if=\"fileShow\">\r\n          <!-- 图片 -->\r\n          <el-image\r\n            v-if=\"fileType === 'img'\"\r\n            :src=\"url\"\r\n            fit=\"contain\"\r\n          />\r\n          <!-- 视频 -->\r\n          <video-player\r\n            v-if=\"fileType === 'video'\"\r\n            class=\"video-player vjs-custom-skin\"\r\n            :playsinline=\"true\"\r\n            :options=\"positivePlayerOptions\"\r\n          />\r\n          <!-- 音乐 -->\r\n          <Aplayer\r\n            v-if=\"fileType === 'music'\"\r\n            :music=\"musicOptions\"\r\n          />\r\n          <!-- word -->\r\n          <div v-if=\"fileType === 'word' || fileType === 'pdf'\" class=\"dialog-body-content-base-style\">\r\n            <iframe\r\n              frameborder=\"0\"\r\n              :src=\"url\"\r\n              width=\"100%\"\r\n              :style=\"style\"\r\n            >\r\n            </iframe>\r\n          </div>\r\n          <div v-if=\"fileType === ''\" style=\"text-align:left\">\r\n            <span style=\"color: red; font-weight: 700\">\r\n              <i class=\"vxe-icon--warning\"></i>\r\n              {{ file.suffix }}格式的文件不支持预览，请下载之后查看\r\n            </span>\r\n            <span>\r\n              <el-divider content-position=\"left\">支持如下附件类型进行预览</el-divider>\r\n            </span>\r\n            <div style=\"padding-left: 30px\">\r\n              <span>txt</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>sql</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>java</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>js</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>html</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>xml</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>css</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>yml</span>\r\n              <br>\r\n\r\n              <span>png</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>jpg</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>jpeg</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>bmp</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>gif</span>\r\n              <br>\r\n\r\n              <span>doc</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>docx</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>xlsx</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>xls</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>ppt</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>pptx</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>pdf</span>\r\n              <br>\r\n\r\n              <span>mp4</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>m2v</span>\r\n              <el-divider direction=\"vertical\" />\r\n              <span>mkv</span>\r\n              <br>\r\n\r\n              <span>mp3</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div v-if=\"errorShow\">\r\n          <span style=\"color: red\">\r\n            <i class=\"vxe-icon--warning\"></i>\r\n            附件加载失败\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </vxe-modal>\r\n</template>\r\n\r\n<script>\r\nimport Aplayer from 'vue-aplayer'\r\n// import HttpModule from '@/api/frame/main/Monitoring/MonitoeReportCreate.js'\r\nexport default {\r\n  name: 'FilePreview',\r\n  components: { Aplayer },\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default() {\r\n        return false\r\n      }\r\n    },\r\n    fileGuid: {\r\n      type: String,\r\n      default() {\r\n        return ''\r\n      }\r\n    },\r\n    appId: {\r\n      type: String,\r\n      default() {\r\n        return ''\r\n      }\r\n    },\r\n    topTitle: {\r\n      type: String,\r\n      default() {\r\n        return '预览'\r\n      }\r\n    },\r\n    previewYear: {\r\n      type: String,\r\n      default() {\r\n        return ''\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      resize: false,\r\n      loading: false,\r\n      style: {\r\n        height: 'calc(100vh - 1px)'\r\n      },\r\n      errorShow: false,\r\n      fileShow: false,\r\n      title: '附件预览',\r\n      // 文本类型文件后缀\r\n      textType: ['txt', 'sql', 'java', 'js', 'html', 'xml', 'css', 'yml'],\r\n      // 图片类型文件后缀\r\n      imgType: ['png', 'jpg', 'jpeg', 'bmp', 'gif'],\r\n      // office文件类型后缀\r\n      officeType: ['doc', 'docx', 'xlsx', 'xls', 'ppt', 'pptx'],\r\n      // pdf文件后缀\r\n      pdfType: ['pdf'],\r\n      // 视频类型文件后缀\r\n      videoType: ['mp4', 'm2v', 'mkv'],\r\n      // 音乐类型文件后缀\r\n      musicType: ['mp3'],\r\n      // 压缩包相关\r\n      compressType: ['zip', 'tar'],\r\n      // 不支持的文件类型\r\n      notSupportType: [],\r\n      dialogVisible: this.visible,\r\n      url: '',\r\n      fileType: '',\r\n      file: {},\r\n      musicOptions: {\r\n        title: 'Preparation',\r\n        // author: '',\r\n        url: 'http://devtest.qiniudn.com/Preparation.mp3',\r\n        // pic: 'http://devtest.qiniudn.com/Preparation.jpg',\r\n        lrc: '[00:00.00]lrc here\\n[00:01.00]aplayer'\r\n      },\r\n      // 播放器配置\r\n      positivePlayerOptions: {\r\n        playbackRates: [0.5, 1.0, 1.5, 2.0], // 播放速度\r\n        autoplay: false, // 如果true,浏览器准备好时开始回放。\r\n        muted: false, // 默认情况下将会消除任何音频。\r\n        loop: false, // 导致视频一结束就重新开始。\r\n        preload: 'auto', // 建议浏览器在<video>加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）\r\n        language: 'zh-CN',\r\n        aspectRatio: '16:13', // 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如\"16:9\"或\"4:3\"）\r\n        fluid: true, // 当true时，Video.js player将拥有流体大小。换句话说，它将按比例缩放以适应其容器。\r\n        sources: [{\r\n          type: '',\r\n          src: '' // 视频url地址\r\n        }],\r\n        poster: '', // 你的封面地址\r\n        // width: document.documentElement.clientWidth,\r\n        notSupportedMessage: '此视频暂无法播放，请稍后再试', // 允许覆盖Video.js无法播放媒体源时显示的默认信息。\r\n        controlBar: {\r\n          timeDivider: true,\r\n          durationDisplay: true,\r\n          remainingTimeDisplay: false,\r\n          fullscreenToggle: true // 全屏按钮\r\n        },\r\n        common: 'positivePlayer'\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    dialogClose() {\r\n      this.$parent.filePreviewDialogVisible = false\r\n    },\r\n    mountedInit() {\r\n      this.toPdf()\r\n    },\r\n    // resize回调函数，计算高度\r\n    zoomCallback(type, $event) {\r\n      let curModalHeight = this.$refs.filePreviewRef.getBox().style.height\r\n      let curModalHeightNumber = curModalHeight.substring(0, curModalHeight.length - 2)\r\n      // todo 这里要减去的应该是导航栏敢赌，现在先写死\r\n      curModalHeightNumber = curModalHeightNumber - 65\r\n      this.style = {\r\n        height: curModalHeightNumber + 'px'\r\n      }\r\n    },\r\n    inArray(type, types) {\r\n      let flag = false\r\n      for (let i = 0; i < types.length; i++) {\r\n        if (type === types[i]) {\r\n          flag = true\r\n          break\r\n        }\r\n      }\r\n      return flag\r\n    },\r\n    // 将word等文件转成pdf进行预览\r\n    toPdf() {\r\n      if (!this.$store.getters.isSx) {\r\n        window.open(`${process.env.BASE_URL}fileView.html?fileguid=` + this.fileGuid + '&appid=' + this.appId)\r\n        this.dialogVisible = false\r\n      }\r\n      this.loading = true\r\n      let filePreviewService = ''\r\n      if (process.env.NODE_ENV === 'development') {\r\n        filePreviewService = window.gloableToolFn.serverGatewayMap.development.filePreviewService\r\n      } else if (process.env.NODE_ENV === 'production') {\r\n        filePreviewService = window.gloableToolFn.serverGatewayMap.production.filePreviewService\r\n      }\r\n      const urlObj = filePreviewService + '/v1/file_preview'\r\n      this.$http.get(urlObj, { appId: this.appId, fileId: this.fileGuid }).then(res => {\r\n        if (res.code === 200) {\r\n          this.file = res.data\r\n          this.buildFileType()\r\n          this.fileShow = true\r\n          this.errorShow = false\r\n          this.loading = false\r\n        } else {\r\n          this.$message({ type: 'warning', message: res.msg })\r\n          this.fileShow = false\r\n          this.errorShow = true\r\n          this.loading = false\r\n          this.resize = false\r\n        }\r\n      }).catch(error => {\r\n        console.log(error)\r\n        this.$message({ type: 'error', message: error })\r\n        this.fileShow = false\r\n        this.errorShow = true\r\n        this.loading = false\r\n        this.resize = false\r\n      })\r\n      // his.loading = true\r\n      // let filePreviewService = ''\r\n      // if (process.env.NODE_ENV === 'development') {\r\n      //   filePreviewService = window.gloableToolFn.serverGatewayMap.development.filePreviewService\r\n      // } else if (process.env.NODE_ENV === 'production') {\r\n      //   filePreviewService = window.gloableToolFn.serverGatewayMap.production.filePreviewService\r\n      // }\r\n      // const urlObj = filePreviewService + '/v1/file_preview'\r\n      // this.$http.get(urlObj, { appId: this.appId, fileId: this.fileGuid })\r\n      //   .then(res => {\r\n      //     if (res.code === 200) {\r\n      //       this.file = res.data\r\n      //       this.buildFileType()\r\n      //       this.fileShow = true\r\n      //       this.errorShow = false\r\n      //       this.loading = false\r\n      //     } else {\r\n      //       this.$message({ type: 'warning', message: res.msg })\r\n      //       this.fileShow = false\r\n      //       this.errorShow = true\r\n      //       this.loading = false\r\n      //       this.resize = false\r\n      //     }\r\n      //   })\r\n      //   .catch(error => {\r\n      //     console.log(error)\r\n      //     this.$message({ type: 'error', message: error })\r\n      //     this.fileShow = false\r\n      //     this.errorShow = true\r\n      //     this.loading = false\r\n      //     this.resize = false\r\n      //   })\r\n    },\r\n    buildFileType() {\r\n      let fileSuffix = this.file.suffix\r\n      this.title = this.file.filename\r\n      let filePreviewService = ''\r\n      if (process.env.NODE_ENV === 'development') {\r\n        filePreviewService = window.gloableToolFn.serverGatewayMap.development.filePreviewService\r\n      } else if (process.env.NODE_ENV === 'production') {\r\n        filePreviewService = window.gloableToolFn.serverGatewayMap.production.filePreviewService\r\n      }\r\n      let newUrl = filePreviewService + '/' + this.file.path.split('/').splice(3).toString().replace(/,/g, '/')\r\n      this.url = newUrl\r\n      console.log(newUrl)\r\n      this.positivePlayerOptions.sources[0].src = this.url\r\n      if (this.inArray(fileSuffix, this.notSupportType)) {\r\n        this.fileType = 'noSupport'\r\n        return\r\n      }\r\n      if (this.inArray(fileSuffix, this.imgType)) {\r\n        this.fileType = 'img'\r\n        return\r\n      }\r\n      if (this.inArray(fileSuffix, this.videoType)) {\r\n        this.fileType = 'video'\r\n        return\r\n      }\r\n      if (this.inArray(fileSuffix, this.musicType)) {\r\n        this.fileType = 'music'\r\n        this.style.height = '70px'\r\n        this.musicOptions.url = this.url\r\n        this.musicOptions.title = this.title\r\n        return\r\n      }\r\n      if (this.inArray(fileSuffix, this.officeType) ||\r\n        this.inArray(fileSuffix, this.textType) ||\r\n        this.inArray(fileSuffix, this.pdfType)) {\r\n        this.fileType = 'word'\r\n        this.resize = true\r\n        return\r\n      }\r\n      if (this.inArray(fileSuffix, ['pdf'])) {\r\n        this.fileType = 'pdf'\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.mountedInit()\r\n  },\r\n  watch: {\r\n    dialogVisible: {\r\n      handler(newval) {\r\n        this.$emit('update:visible', newval)\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>\r\n"]}]}