{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\statisticAnalysis\\rulesStatistic\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\statisticAnalysis\\rulesStatistic\\index.vue","mtime":1694505522826},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIHByb3ZpZGUsIHJlZiwgdG9SYXcgfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaScNCmltcG9ydCBQcmV2aWV3RGV0YWlsIGZyb20gJy4uL2NvbW1vbi9jb21wb25lbnRzL1ByZXZpZXdEZXRhaWwnDQoNCmltcG9ydCB1c2VUYWJsZSBmcm9tICdAL2hvb2tzL3VzZVRhYmxlJw0KaW1wb3J0IHVzZUZvcm0gZnJvbSAnQC9ob29rcy91c2VGb3JtJw0KaW1wb3J0IHVzZVRhYlBsYW5lbCBmcm9tICcuLi9jb21tb24vaG9va3MvdXNlVGFiUGxhbmVsJw0KaW1wb3J0IHsgdXNlTW9kYWwgfSBmcm9tICdAL2hvb2tzL3VzZU1vZGFsL2luZGV4Jw0KaW1wb3J0IHsgcXVlcnlSdWxlIH0gZnJvbSAnQC9hcGkvZnJhbWUvbWFpbi9zdGF0aXN0aWNBbmFseXNpcy9ydWxlc1N0YXRpc3RpYy5qcycNCmltcG9ydCB7DQogIGdldFdhcm5Db3VudENvbHVtbnMsDQogIHNlYXJjaEZvcm1Db21tb25TY2hlbWFzLA0KICBjZWxsQ3Vyc29yVW5kZXJsaW5lQ2xhc3NOYW1lDQp9IGZyb20gJ0Avdmlld3MvbWFpbi9zdGF0aXN0aWNBbmFseXNpcy9jb21tb24vbW9kZWwvZGF0YS5qcycNCmltcG9ydCB7DQogIGdldFJ1bGVOYW1lQ29sdW1uLA0KICBnZXRJc0RpckNvbHVtbiwNCiAgZ2V0V2FybkxldmVsQ29sdW1uLA0KICBnZXRDb250cm9sVHlwZUNvbHVtbg0KfSBmcm9tICdAL3ZpZXdzL21haW4vaGFuZGxpbmdPZlZpb2xhdGlvbnMvbW9kZWwvZGF0YS5qcycNCmltcG9ydCB7IHVzZUZvb3RlciB9IGZyb20gJy4uL2NvbW1vbi9ob29rcy91c2VGb290ZXInDQppbXBvcnQgeyB0cmFuc0pzb24xLCB0cmFuc0pzb24zIH0gZnJvbSAnQC91dGlscy9wYXJhbXMuanMnDQovLyBpbXBvcnQgeyB0cmFuc0pzb24xLCB0cmFuc0pzb24yIH0gZnJvbSAnQC91dGlscy9wYXJhbXMuanMnDQppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZScNCmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJw0KDQpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoew0KICBjb21wb25lbnRzOiB7DQogICAgUHJldmlld0RldGFpbA0KICB9LA0KICBzZXR1cChfLCB7IHJvb3QgfSkgew0KICAgIGNvbnN0IHJvdXRlID0gcm9vdC4kcm91dGUNCg0KICAgIC8vIOmhtemdoui3r+eUsQ0KICAgIGNvbnN0IHBhZ2VQYXRoID0gcmVmKHJvdXRlLnBhdGgpDQoNCiAgICAvKioNCiAgICAgKiBtb2RhbFR5cGU65by556qX5omT5byA5pON5L2cDQogICAgICogcGFnZVBhdGg66aG16Z2i6Lev55SxDQogICAgICovDQogICAgcHJvdmlkZSgncGFnZVBhdGgnLCBwYWdlUGF0aCkNCiAgICAvLyDlm6DjgJDlpITnkIbljZXmn6XnnIvjgJHnrYnlrZDlrZnnu4Tku7bkvb/nlKjliLBpbmplY3QoJ21vZGFsVHlwZScp77yM5pWF5q2k5o+Q5L6b5LiA5Liq56m65YC877yM6YG/5YWN5oql6ZSZDQogICAgcHJvdmlkZSgnbW9kYWxUeXBlJywgJycpDQogICAgLy8g5a2Q57uE5Lu25Lyg6YCS5qC557uE5Lu25pa55rOVDQogICAgcHJvdmlkZSgnbG9hZEJzQ29uZmlnJywgcm9vdC5sb2FkQnNDb25maWcpDQogICAgLy8g6KeE5YiZ5by556qX5pi+6ZqQDQogICAgY29uc3QgW3Zpc2libGVTdGF0ZSwgc2V0VmlzaWJsZVN0YXRlXSA9IHVzZU1vZGFsKCkNCiAgICAvLyDlvZPliY3mk43kvZzooYwNCiAgICBjb25zdCBjdXJyZW50Um93ID0gcmVmKG51bGwpDQoNCiAgICAvKioNCiAgICAgKiDmkJzntKLooajljZUNCiAgICAgKi8NCiAgICBjb25zdCBbDQogICAgICB7DQogICAgICAgIGZvcm1EYXRhLA0KICAgICAgICBmb3JtU2NoZW1hcywNCiAgICAgICAgc2V0U3VibWl0Rm9ybURhdGEsDQogICAgICAgIGdldFN1Ym1pdEZvcm1EYXRhDQogICAgICB9LA0KICAgICAgcmVnaXN0ZXJGb3JtDQogICAgXSA9IHVzZUZvcm0oc2VhcmNoRm9ybUNvbW1vblNjaGVtYXMpDQoNCiAgICAvKioNCiAgICAgKiDmkJzntKIm6YeN572uDQogICAgICogKi8NCiAgICBmdW5jdGlvbiBzZWFyY2gob2JqKSB7DQogICAgICBPYmplY3QuYXNzaWduKGZvcm1EYXRhLCBvYmopDQogICAgICBzZXRTdWJtaXRGb3JtRGF0YSh0b1Jhdyhmb3JtRGF0YSkpDQoNCiAgICAgIHJlc2V0RmV0Y2hUYWJsZURhdGEoKQ0KICAgIH0NCiAgICAvKioNCiAgICAgKiDliqjmgIHooajmoLzphY3nva4NCiAgICAgKiAqLw0KICAgIGxldCBjb2x1bW5zU1MgPSByZWYobnVsbCkNCiAgICBsZXQgcnVsZUNvZGVzU1MgPSByZWYoW10pDQogICAgYXN5bmMgZnVuY3Rpb24gbG9hZENvbmZpZyhpZCkgew0KICAgICAgbGV0IHBhcmFtcyA9IHsNCiAgICAgICAgdGFibGVJZDogew0KICAgICAgICAgIGlkOiBpZCwNCiAgICAgICAgICBmaXNjYWx5ZWFyOiBzdG9yZS5zdGF0ZS51c2VySW5mby55ZWFyLA0KICAgICAgICAgIG1vZl9kaXZfY29kZTogc3RvcmUuc3RhdGUudXNlckluZm8ucHJvdmluY2UsDQogICAgICAgICAgbWVudWd1aWQ6IHN0b3JlLnN0YXRlLmN1ck5hdk1vZHVsZS5ndWlkDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGxldCBjb25maWdEYXRhID0gYXdhaXQgcm9vdC5sb2FkQnNDb25maWcocGFyYW1zKQ0KICAgICAgcmV0dXJuIGNvbmZpZ0RhdGEuaXRlbXNDb25maWcNCiAgICB9DQogICAgLyoqDQogICAgICrliKTmlq3kvb/nlKjmnKzlnLDphY3nva58fOWKqOaAgemFjee9rg0KICAgICAqICovDQogICAgaWYgKHRyYW5zSnNvbjMoc3RvcmUuc3RhdGUuY3VyTmF2TW9kdWxlLnBhcmFtNSkgJiYgdHJhbnNKc29uMyhzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUucGFyYW01KS5pc0NvbmZpZ1RhYmxlID09PSAnMScpIHsNCiAgICAgIGxvYWRDb25maWcoJ1RhYmxlMTAxJykudGhlbihyZXMgPT4gew0KICAgICAgICBjb2x1bW5zU1MudmFsdWUgPSByZXMNCiAgICAgIH0pDQogICAgICBsb2FkQ29uZmlnKCdRdWVyeTEwMScpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgZm9ybVNjaGVtYXMudmFsdWUgPSByZXMNCiAgICAgIH0pDQogICAgfSBlbHNlIHsNCiAgICAgIGNvbHVtbnNTUy52YWx1ZSA9IFsNCiAgICAgICAgZ2V0UnVsZU5hbWVDb2x1bW4oew0KICAgICAgICAgIHRpdGxlOiAn6KeE5YiZ5ZCN56ewJywNCiAgICAgICAgICBtaW5XaWR0aDogMTAwLA0KICAgICAgICAgIC8vIHdpZHRoOiAyMDANCiAgICAgICAgICB3aWR0aDogJ2F1dG8nDQogICAgICAgIH0pLA0KICAgICAgICBnZXRXYXJuTGV2ZWxDb2x1bW4oKSwNCiAgICAgICAgZ2V0Q29udHJvbFR5cGVDb2x1bW4oKSwNCiAgICAgICAgLi4uZ2V0V2FybkNvdW50Q29sdW1ucygpLA0KICAgICAgICBnZXRJc0RpckNvbHVtbih7DQogICAgICAgICAgLy8gbWluV2lkdGg6IDEwMA0KICAgICAgICAgIHdpZHRoOiAxMjANCiAgICAgICAgICAvLyB3aWR0aDogJ2F1dG8nDQogICAgICAgIH0pDQogICAgICBdDQogICAgfQ0KICAgIC8qKg0KICAgICAqIOWFs+mXreaJgOacieW8ueeqlw0KICAgICAqICovDQogICAgZnVuY3Rpb24gY2xvc2VBbGxIYW5kbGUoKSB7DQogICAgICBzZXRWaXNpYmxlU3RhdGUoZmFsc2UpDQogICAgfQ0KICAgIGNvbnN0IHsgZm9vdGVyQ29uZmlnIH0gPSB1c2VGb290ZXIoKQ0KDQogICAgLyoqDQogICAgICog6KGo5qC8DQogICAgICogKi8NCiAgICBjb25zdCBbDQogICAgICB7DQogICAgICAgIGNvbHVtbnMsDQogICAgICAgIHRhYmxlVG9vbGJhckNvbmZpZywNCiAgICAgICAgdGFibGVDb25maWcsDQogICAgICAgIHRhYmxlRGF0YSwNCiAgICAgICAgcmVzZXRGZXRjaFRhYmxlRGF0YSwNCiAgICAgICAgdGFibGVMb2FkaW5nU3RhdGUsDQogICAgICAgIHBhZ2VyQ2hhbmdlLA0KICAgICAgICBwYWdlckNvbmZpZywNCiAgICAgICAgb25Ub29sYmFyQnRuQ2xpY2ssDQogICAgICAgIGdldFRhYmxlDQogICAgICB9LA0KICAgICAgcmVnaXN0ZXJUYWJsZQ0KICAgIF0gPSB1c2VUYWJsZSh7DQogICAgICBmZXRjaDogcXVlcnlSdWxlLA0KICAgICAgYmVmb3JlRmV0Y2g6IGFzeW5jIHBhcmFtcyA9PiB7DQogICAgICAgIHJ1bGVDb2Rlc1NTLnZhbHVlID0gYXdhaXQgbG9hZENvbmZpZygnQ29kZUNvbmZpZzEwMScpID8gYXdhaXQgbG9hZENvbmZpZygnQ29kZUNvbmZpZzEwMScpIDogW10NCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAuLi5wYXJhbXMsDQogICAgICAgICAgcnVsZUNvZGVzOiBydWxlQ29kZXNTUy52YWx1ZSwNCiAgICAgICAgICBwYXJhbUNvZGU6IHRyYW5zSnNvbjEoc3RvcmUuc3RhdGUuY3VyTmF2TW9kdWxlLnBhcmFtNSB8fCAnJyk/LnBhcmFtQ29kZSwNCiAgICAgICAgICBpc0ZpbHRlckJ5UGVybTogdHJhbnNKc29uMShzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUucGFyYW01IHx8ICcnKT8uaXNGaWx0ZXJCeVBlcm0NCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGZpbmFsbHlGZXRjaDogZGF0YSA9PiB7DQogICAgICAgIGZvb3RlckNvbmZpZy52YWx1ZS50b3RhbE9iaiA9IGRhdGE/Lndhcm5ISlZPIHx8IHt9DQogICAgICB9LA0KICAgICAgY29sdW1uczogY29sdW1uc1NTLA0KICAgICAgZ2V0U3VibWl0Rm9ybURhdGEsDQogICAgICBkYXRhS2V5OiAnZGF0YS5yZXN1bHRzJw0KICAgIH0pDQoNCiAgICAvKioNCiAgICAgKiDlj4zlh7vljZXlhYPmoLwNCiAgICAgKiAqLw0KICAgIGZ1bmN0aW9uIGNlbGxEYmxjbGljayhyb3cpIHsNCiAgICAgIGN1cnJlbnRSb3cudmFsdWUgPSByb3cucm93DQogICAgICBpZiAocm93LnJvd1tyb3cuY29sdW1uLnByb3BlcnR5XSAqIDEgIT09IDApIHsNCiAgICAgICAgc2V0VmlzaWJsZVN0YXRlKHRydWUpDQogICAgICB9IGVsc2Ugew0KICAgICAgICBNZXNzYWdlLndhcm5pbmcoJ+aVsOaNruetieS6jumbtuaXtuaXoOazlemSu+WPliEnKQ0KICAgICAgfQ0KICAgIH0NCiAgICAvKioNCiAgICAgKiDpobbpg6h0YWLmqKHlnZcNCiAgICAgKi8NCiAgICBjb25zdCB7DQogICAgICB0YWJTdGF0dXNCdG5Db25maWcsDQogICAgICBpc1Nob3dTZWFyY2hGb3JtLA0KICAgICAgb25RdWVyeUNvbmRpdGlvbnNDbGljaw0KICAgIH0gPSB1c2VUYWJQbGFuZWwoc2V0VmlzaWJsZVN0YXRlLCBnZXRUYWJsZSwgY3VycmVudFJvdykNCg0KICAgIHJldHVybiB7DQogICAgICB2aXNpYmxlU3RhdGUsDQoNCiAgICAgIGNlbGxEYmxjbGljaywNCiAgICAgIGZvb3RlckNvbmZpZywNCiAgICAgIGNvbHVtbnMsDQogICAgICByZWdpc3RlclRhYmxlLA0KICAgICAgdGFibGVDb25maWcsDQogICAgICB0YWJsZURhdGEsDQogICAgICB0YWJsZUxvYWRpbmdTdGF0ZSwNCiAgICAgIHBhZ2VyQ29uZmlnLA0KICAgICAgdGFibGVUb29sYmFyQ29uZmlnLA0KICAgICAgb25Ub29sYmFyQnRuQ2xpY2ssDQogICAgICBwYWdlckNoYW5nZSwNCiAgICAgIHJlc2V0RmV0Y2hUYWJsZURhdGEsDQogICAgICBjZWxsQ3Vyc29yVW5kZXJsaW5lQ2xhc3NOYW1lLA0KDQogICAgICBjdXJyZW50Um93LA0KICAgICAgY2xvc2VBbGxIYW5kbGUsDQoNCiAgICAgIHRhYlN0YXR1c0J0bkNvbmZpZywNCiAgICAgIGlzU2hvd1NlYXJjaEZvcm0sDQogICAgICBvblF1ZXJ5Q29uZGl0aW9uc0NsaWNrLA0KDQogICAgICByZWdpc3RlckZvcm0sDQogICAgICBmb3JtRGF0YSwNCiAgICAgIGZvcm1TY2hlbWFzLA0KICAgICAgc2VhcmNoDQogICAgfQ0KICB9DQp9KQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/main/statisticAnalysis/rulesStatistic","sourcesContent":["<template>\r\n  <div style=\"height: 100%\">\r\n    <BsMainFormListLayout :left-visible=\"false\">\r\n      <template v-slot:topTabPane>\r\n        <BsTabPanel\r\n          :tab-status-btn-config=\"tabStatusBtnConfig\"\r\n          :is-open=\"isShowSearchForm\"\r\n          @onQueryConditionsClick=\"onQueryConditionsClick\"\r\n        />\r\n      </template>\r\n      <template v-slot:query>\r\n        <div v-show=\"isShowSearchForm\" class=\"main-query\">\r\n          <BsQuery\r\n            :query-form-item-config=\"formSchemas\"\r\n            :query-form-data=\"formData\"\r\n            @onSearchClick=\"search\"\r\n            @register=\"registerForm\"\r\n          />\r\n        </div>\r\n      </template>\r\n      <template v-slot:mainForm>\r\n        <div style=\"height: 100%\">\r\n          <BsTable\r\n            :loading=\"tableLoadingState\"\r\n            :table-config=\"tableConfig\"\r\n            :table-columns-config=\"columns\"\r\n            :table-data=\"tableData\"\r\n            :footer-config=\"footerConfig\"\r\n            :toolbar-config=\"tableToolbarConfig\"\r\n            :pager-config=\"pagerConfig\"\r\n            size=\"medium\"\r\n            :cell-class-name=\"cellCursorUnderlineClassName\"\r\n            @register=\"registerTable\"\r\n            @ajaxData=\"pagerChange\"\r\n            @onToolbarBtnClick=\"onToolbarBtnClick\"\r\n            @cellDblclick=\"cellDblclick\"\r\n          >\r\n            <template v-slot:toolbarSlots>\r\n              <div class=\"table-toolbar-left\">\r\n                <BsTableTitle title=\"统计分析\" />\r\n              </div>\r\n            </template>\r\n          </BsTable>\r\n        </div>\r\n      </template>\r\n    </BsMainFormListLayout>\r\n    <PreviewDetail\r\n      v-if=\"visibleState\"\r\n      v-model=\"visibleState\"\r\n      :current-row=\"currentRow\"\r\n      @closeAll=\"closeAllHandle\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, provide, ref, toRaw } from '@vue/composition-api'\r\nimport PreviewDetail from '../common/components/PreviewDetail'\r\n\r\nimport useTable from '@/hooks/useTable'\r\nimport useForm from '@/hooks/useForm'\r\nimport useTabPlanel from '../common/hooks/useTabPlanel'\r\nimport { useModal } from '@/hooks/useModal/index'\r\nimport { queryRule } from '@/api/frame/main/statisticAnalysis/rulesStatistic.js'\r\nimport {\r\n  getWarnCountColumns,\r\n  searchFormCommonSchemas,\r\n  cellCursorUnderlineClassName\r\n} from '@/views/main/statisticAnalysis/common/model/data.js'\r\nimport {\r\n  getRuleNameColumn,\r\n  getIsDirColumn,\r\n  getWarnLevelColumn,\r\n  getControlTypeColumn\r\n} from '@/views/main/handlingOfViolations/model/data.js'\r\nimport { useFooter } from '../common/hooks/useFooter'\r\nimport { transJson1, transJson3 } from '@/utils/params.js'\r\n// import { transJson1, transJson2 } from '@/utils/params.js'\r\nimport store from '@/store'\r\nimport { Message } from 'element-ui'\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    PreviewDetail\r\n  },\r\n  setup(_, { root }) {\r\n    const route = root.$route\r\n\r\n    // 页面路由\r\n    const pagePath = ref(route.path)\r\n\r\n    /**\r\n     * modalType:弹窗打开操作\r\n     * pagePath:页面路由\r\n     */\r\n    provide('pagePath', pagePath)\r\n    // 因【处理单查看】等子孙组件使用到inject('modalType')，故此提供一个空值，避免报错\r\n    provide('modalType', '')\r\n    // 子组件传递根组件方法\r\n    provide('loadBsConfig', root.loadBsConfig)\r\n    // 规则弹窗显隐\r\n    const [visibleState, setVisibleState] = useModal()\r\n    // 当前操作行\r\n    const currentRow = ref(null)\r\n\r\n    /**\r\n     * 搜索表单\r\n     */\r\n    const [\r\n      {\r\n        formData,\r\n        formSchemas,\r\n        setSubmitFormData,\r\n        getSubmitFormData\r\n      },\r\n      registerForm\r\n    ] = useForm(searchFormCommonSchemas)\r\n\r\n    /**\r\n     * 搜索&重置\r\n     * */\r\n    function search(obj) {\r\n      Object.assign(formData, obj)\r\n      setSubmitFormData(toRaw(formData))\r\n\r\n      resetFetchTableData()\r\n    }\r\n    /**\r\n     * 动态表格配置\r\n     * */\r\n    let columnsSS = ref(null)\r\n    let ruleCodesSS = ref([])\r\n    async function loadConfig(id) {\r\n      let params = {\r\n        tableId: {\r\n          id: id,\r\n          fiscalyear: store.state.userInfo.year,\r\n          mof_div_code: store.state.userInfo.province,\r\n          menuguid: store.state.curNavModule.guid\r\n        }\r\n      }\r\n      let configData = await root.loadBsConfig(params)\r\n      return configData.itemsConfig\r\n    }\r\n    /**\r\n     *判断使用本地配置||动态配置\r\n     * */\r\n    if (transJson3(store.state.curNavModule.param5) && transJson3(store.state.curNavModule.param5).isConfigTable === '1') {\r\n      loadConfig('Table101').then(res => {\r\n        columnsSS.value = res\r\n      })\r\n      loadConfig('Query101').then(res => {\r\n        formSchemas.value = res\r\n      })\r\n    } else {\r\n      columnsSS.value = [\r\n        getRuleNameColumn({\r\n          title: '规则名称',\r\n          minWidth: 100,\r\n          // width: 200\r\n          width: 'auto'\r\n        }),\r\n        getWarnLevelColumn(),\r\n        getControlTypeColumn(),\r\n        ...getWarnCountColumns(),\r\n        getIsDirColumn({\r\n          // minWidth: 100\r\n          width: 120\r\n          // width: 'auto'\r\n        })\r\n      ]\r\n    }\r\n    /**\r\n     * 关闭所有弹窗\r\n     * */\r\n    function closeAllHandle() {\r\n      setVisibleState(false)\r\n    }\r\n    const { footerConfig } = useFooter()\r\n\r\n    /**\r\n     * 表格\r\n     * */\r\n    const [\r\n      {\r\n        columns,\r\n        tableToolbarConfig,\r\n        tableConfig,\r\n        tableData,\r\n        resetFetchTableData,\r\n        tableLoadingState,\r\n        pagerChange,\r\n        pagerConfig,\r\n        onToolbarBtnClick,\r\n        getTable\r\n      },\r\n      registerTable\r\n    ] = useTable({\r\n      fetch: queryRule,\r\n      beforeFetch: async params => {\r\n        ruleCodesSS.value = await loadConfig('CodeConfig101') ? await loadConfig('CodeConfig101') : []\r\n        return {\r\n          ...params,\r\n          ruleCodes: ruleCodesSS.value,\r\n          paramCode: transJson1(store.state.curNavModule.param5 || '')?.paramCode,\r\n          isFilterByPerm: transJson1(store.state.curNavModule.param5 || '')?.isFilterByPerm\r\n        }\r\n      },\r\n      finallyFetch: data => {\r\n        footerConfig.value.totalObj = data?.warnHJVO || {}\r\n      },\r\n      columns: columnsSS,\r\n      getSubmitFormData,\r\n      dataKey: 'data.results'\r\n    })\r\n\r\n    /**\r\n     * 双击单元格\r\n     * */\r\n    function cellDblclick(row) {\r\n      currentRow.value = row.row\r\n      if (row.row[row.column.property] * 1 !== 0) {\r\n        setVisibleState(true)\r\n      } else {\r\n        Message.warning('数据等于零时无法钻取!')\r\n      }\r\n    }\r\n    /**\r\n     * 顶部tab模块\r\n     */\r\n    const {\r\n      tabStatusBtnConfig,\r\n      isShowSearchForm,\r\n      onQueryConditionsClick\r\n    } = useTabPlanel(setVisibleState, getTable, currentRow)\r\n\r\n    return {\r\n      visibleState,\r\n\r\n      cellDblclick,\r\n      footerConfig,\r\n      columns,\r\n      registerTable,\r\n      tableConfig,\r\n      tableData,\r\n      tableLoadingState,\r\n      pagerConfig,\r\n      tableToolbarConfig,\r\n      onToolbarBtnClick,\r\n      pagerChange,\r\n      resetFetchTableData,\r\n      cellCursorUnderlineClassName,\r\n\r\n      currentRow,\r\n      closeAllHandle,\r\n\r\n      tabStatusBtnConfig,\r\n      isShowSearchForm,\r\n      onQueryConditionsClick,\r\n\r\n      registerForm,\r\n      formData,\r\n      formSchemas,\r\n      search\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>\r\n"]}]}