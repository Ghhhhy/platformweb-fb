{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\UploadBak\\BossUploadBak.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\UploadBak\\BossUploadBak.vue","mtime":1695716044950},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\css-loader\\dist\\cjs.js","mtime":1696752946978},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi8vIOmZhOS7tuWMuuWfnwoudXBsb2FkLW15LWNzcyB7CiAgICBoZWlnaHQ6IDMzcHg7CiAgICBtYXJnaW4tdG9wOiA5cHg7CiAgICBmbG9hdDogbGVmdDsKICAgIG1hcmdpbi1sZWZ0OiAxNnB4OwogIH0KICAuaW1nLW15IHsKICAgIHdpZHRoOiAxMnB4OwogICAgaGVpZ2h0OiAxMnB4OwogICAgbWFyZ2luLWxlZnQ6IDE3cHg7CiAgICBtYXJnaW4tcmlnaHQ6IDlweDsKICAgIG1hcmdpbi10b3A6IDEzLjhweDsKICAgIG1hcmdpbi1ib3R0b206IDE0LjRweDsKICB9CiAgLmltZy1teS10d28gewogICAgd2lkdGg6IDE0cHg7CiAgICBoZWlnaHQ6IDE0cHg7CiAgICBmbG9hdDogcmlnaHQ7CiAgfQogIC5zcC1teSB7CiAgICB3aWR0aDogNTZweDsKICAgIGZvbnQtc2l6ZTogMTRweDsKICAgIGxpbmUtaGVpZ2h0OiAyNHB4OwogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgY29sb3I6ICMwMDAwMDA7CiAgICBtYXJnaW4tdG9wOiA4cHg7CiAgICBtYXJnaW4tYm90dG9tOiA4cHg7CiAgICBtYXJnaW4tcmlnaHQ6IDE2cHg7CiAgfQogIC5zcC1teS10d28gewogICAgZm9udC1zaXplOiAxMnB4OwogICAgcGFkZGluZy1sZWZ0OiA0cHg7CiAgICBjb2xvcjogIzlFQTRBOTsKICAgIGxpbmUtaGVpZ2h0OiAyMnB4OwogIH0KICAuYXR0YWNobWVudHsKICAgIGhlaWdodDogNDRweDsKICAgIG1hcmdpbi10b3A6IDE2cHg7CiAgICBtYXJnaW4tbGVmdDogMjRweDsKICAgIG1hcmdpbi1ib3R0b206IDE2cHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjRGQUZGOwogICAgLmZvb3Rlci1idG57CiAgICAgIGJvcmRlcjoxcHggc29saWQjQ0ZEMkQ0OwogICAgICBib3JkZXItcmFkaXVzOiA1JTsKICAgICAgd2lkdGg6MTEwcHg7CiAgICAgIGhlaWdodDo0MHB4OwogICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4OwogICAgICBiYWNrZ3JvdW5kOiAjRkZGRkZGOwogICAgfQogICAgLmVsLXVwbG9hZCB7CiAgICAgIHRleHQtYWxpZ246IGxlZnQ7CiAgICAgIGZsb2F0OiBsZWZ0OwogICAgICAuZWwtdXBsb2FkLWRyYWdnZXIgewogICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSA0MHB4KSA7CiAgICAgICAgaGVpZ2h0OiA4MHB4OwogICAgICAgIG1hcmdpbjogMjBweCAyMHB4IDAgMjBweDsKICAgICAgICAuZWwtaWNvbi11cGxvYWQgewogICAgICAgICAgbWFyZ2luOiAwIDsKICAgICAgICB9CiAgICAgIH0KICAgICAgLmVsLXVwbG9hZF9fdGlwIHsKICAgICAgICBtYXJnaW4tbGVmdDogMTBweDsKICAgICAgICBtYXJnaW4tdG9wOiBhdXRvOwogICAgICB9CiAgICB9CiAgfQogIC50aXRsZXsKICAgIGhlaWdodDogNDBweDsKICAgIGZvbnQtc2l6ZTogMThweDsKICAgIC8qYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7Ki8KICAgIGxpbmUtaGVpZ2h0OiA0MHB4OwogICAgcGFkZGluZzogMCAyMHB4OwogIH0KICAuZWwtY2FyZCB7CiAgICBtYXJnaW4tdG9wOiAxMHB4OwogIH0KICAuYmVsb3ctdGFibGV7CiAgLyog6KGo5qC85qC35byPICovCiAgICAucGF5LWlucHV0LXRhYmxlewogICAgICBib3JkZXI6IDJweCBzb2xpZCAjMGM5ZmUzOwogICAgICBjb2xvcjogIzBjOWZlMzsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIG1hcmdpbjogMCBhdXRvOwogICAgICBwYWRkaW5nOiAxNXB4IDBweDsKICAgIH0KICAgIHRhYmxlPnRib2R5PnRyPnRkIHsKICAgICAgcGFkZGluZzogOHB4OwogICAgICBib3JkZXI6IDFweCBzb2xpZCAjMGM5ZmUzOwogICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICB9CiAgICAvKiDku5jmrL7kurrliJfooaggKi8KICAgIC50b3Atc2VhcmNoLXRpcCwudG9wLXNlYXJjaC1pbnB1dHN7CiAgICAgIGRpc3BsYXk6IGdyaWQ7CiAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczoyZnIgMmZyIDJmciAwLjNmciA7CiAgICAgIGNvbHVtbi1nYXA6IDE1cHg7CiAgICB9CiAgfQogIC5mdW5QbGFuSGVhZGVyIHsKICBmb250LWZhbWlseTogUGluZ0ZhbmdTQy1SZWd1bGFyOwogIGZvbnQtc2l6ZTogMTZweDsKICBjb2xvcjogIzJFMzEzMzsKICBsZXR0ZXItc3BhY2luZzogMDsKICBsaW5lLWhlaWdodDogMzlweDsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0NDRDJEODsKICB9CiAgLmZ1blBsYW5IZWFkZXJXb3JkIHsKICAgIGZvbnQtZmFtaWx5OiBQaW5nRmFuZ1NDLVJlZ3VsYXI7CiAgICBmb250LXNpemU6IDE2cHg7CiAgICBjb2xvcjogIzJFMzEzMzsKICAgIGxldHRlci1zcGFjaW5nOiAwOwogICAgbGluZS1oZWlnaHQ6IDI0cHg7CiAgICBtYXJnaW4tbGVmdDogMjRweDsKICAgIHBhZGRpbmctdG9wOiA3cHg7CiAgICBtYXJnaW4tYm90dG9tOiA5cHg7CiAgfQogIC5mdW5kUGxhbkJvZHl7CiAgICBiYWNrZ3JvdW5kOiAjRjRGQUZGOwogICAgaGVpZ2h0OiAxMThweDsKICB9CiAgLmZ1bmRQbGFuQm9keVR3byB7CiAgICBiYWNrZ3JvdW5kOiAjRjRGQUZGOwogIH0KICAuZnVuZFBsYW5Cb2R5VGhyIHsKICAgIC8vIG1hcmdpbi10b3A6IC04MHB4OwogICAgbWFyZ2luLWxlZnQ6IDhweDsKICAgIG1hcmdpbi1yaWdodDogMjRweDsKICB9CiAgLmVuY2xvc3VyZS1jc3MgewogICAgbWFyZ2luLXRvcDogMHB4OwogICAgd2lkdGg6IDEwMCU7CiAgICBtYXJnaW4tYm90dG9tOiAxNnB4OwogICAgLmVuY2xvc3VyZS1jc3MxIHsKICAgICAgaGVpZ2h0OiA1NnB4OwogICAgICB3aWR0aDogNTAlOwogICAgICAuZW5jbG9zdXJlLWNzczIgewogICAgICAgIG1hcmdpbi1sZWZ0OiAxNnB4OwogICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAxNnB4KTsKICAgICAgICBoZWlnaHQ6IDQwcHg7CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIzMSwgMjQxLCAyNTQpOwogICAgICAgIC5lbmNsb3N1cmUtY3NzNSB7CiAgICAgICAgICAvLyB3aWR0aDogY2FsYygxMDAlIC0gMzRweCk7CiAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgIGhlaWdodDogMjJweDsKICAgICAgICAgIHBhZGRpbmctbGVmdDogMTZweDsKICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDE4cHg7CiAgICAgICAgICBwYWRkaW5nLXRvcDogOXB4OwogICAgICAgICAgcGFkZGluZy1ib3R0b206IDlweDsKICAgICAgICB9CiAgICAgICAgLmVuY2xvc3VyZS1jc3MzIHsKICAgICAgICAgIHdpZHRoOiA1MCU7CiAgICAgICAgICBoZWlnaHQ6IDIycHg7CiAgICAgICAgICAgIC5zcC1teS10aHIgewogICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMjJweDsKICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAuZW5jbG9zdXJlLWNzczQgewogICAgICAgICAgd2lkdGg6IDQ1JTsKICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0OwogICAgICAgICAgaGVpZ2h0OiAyMnB4OwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0K"},{"version":3,"sources":["BossUploadBak.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BossUploadBak.vue","sourceRoot":"src/components/UploadBak","sourcesContent":["<template>\r\n  <!-- <div style=\"height:118px\"> -->\r\n  <!-- 附件区域 -->\r\n  <div class=\"fundPlanBody\" style=\"margin-top:16px;\">\r\n    <div class=\"funPlanHeader\">\r\n      <div class=\"funPlanHeaderWord\">附件上传</div>\r\n    </div>\r\n    <div v-if=\"isUpload\" class=\"attachment\">\r\n      <el-upload\r\n        ref=\"fileUpload\"\r\n        action=\"#\"\r\n        :show-file-list=\"false\"\r\n        :data=\"uploadDFileParams\"\r\n        :disabled=\"disabled\"\r\n        :on-remove=\"handleRemove\"\r\n        :http-request=\"handelUploadDebugfile\"\r\n      >\r\n        <!-- <div class=\"fn-inline\"> -->\r\n        <div class=\"fn-inline\" style=\"float:left\">\r\n          <div class=\"footer-btn\">\r\n            <el-row\r\n              style=\"display: inline-block;height: 42px;float: left;\"\r\n            >\r\n              <el-col :span=\"8\">\r\n                <img src=\"@/assets/img/upload/uploadicon.svg\" alt=\"\" class=\"img-my\">\r\n              </el-col>\r\n              <el-col :span=\"16\">\r\n                <span class=\"sp-my\">上传附件</span>\r\n              </el-col>\r\n            </el-row>\r\n          </div>\r\n        </div>\r\n        <div slot=\"tip\" class=\"fn-inline upload-my-css\">\r\n          <div\r\n            class=\"fn-inline\"\r\n            style=\"margin-top: 3px;height: 33px;float:left\"\r\n          >\r\n            <img src=\"@/assets/img/upload/beizhu.svg\" alt=\"\" class=\"img-my-two\">\r\n          </div>\r\n          <div class=\"fn-inline\" style=\"height:33px;float:left\">\r\n            <span class=\"sp-my-two\">支持png/jpg/pdf等，不超过{{ sizeNum }}M</span>\r\n          </div>\r\n        </div>\r\n      </el-upload>\r\n    </div>\r\n\r\n    <div class=\"fn-inline enclosure-css fundPlanBodyTwo\">\r\n      <div class=\"fundPlanBodyThr\">\r\n        <div\r\n          v-for=\"( file, index ) in fileData\"\r\n          :key=\"index\"\r\n          class=\"fn-inline enclosure-css1\"\r\n        >\r\n          <div class=\"enclosure-css2 fn-inline\">\r\n            <div class=\"fn-inline enclosure-css5\">\r\n              <div class=\"fn-inline enclosure-css3\">\r\n                <span class=\"sp-my-thr\">{{ file['filename'] }}</span>\r\n              </div>\r\n              <div class=\"fn-inline enclosure-css4\">\r\n                <button v-if=\"allowDelete\" :disabled=\"disabled\" @click=\"handleRemove(index, file)\"><img src=\"@/assets/img/upload/deleteicon@2x.png\" alt=\"\" class=\"img-my-two\"></button>\r\n                <i v-if=\"allowDownload\" class=\"ri-file-download-fill cursor\" @click=\"handleDownload(file)\"></i>\r\n                <i v-if=\"allowPreview\" class=\"ri-eye-fill cursor\" @click=\"handleFilePreview(file)\"></i>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <bs-file-preview\r\n      v-if=\"filePreviewDialogVisible\"\r\n      :visible.sync=\"filePreviewDialogVisible\"\r\n      :file-guid=\"currentFile.fileguid\"\r\n      :app-id=\"$store.getters.getLoginAuthentication.appguid\"\r\n    />\r\n  </div>\r\n  <!-- </div> -->\r\n</template>\r\n<script>\r\nimport HttpModule from '@/api/frame/main/Monitoring/Monitoring.js'\r\nimport { downloadByFileId } from '@/utils/download'\r\n\r\nexport default {\r\n  props: {\r\n    isUpload: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    attachmentId: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    fileDataBakDel: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    fileData: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    // 允许被删除\r\n    allowDelete: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 允许下载\r\n    allowDownload: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 允许预览\r\n    allowPreview: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 文件大小\r\n    sizeNum: {\r\n      type: Number,\r\n      default: 10\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      // 当前操作的file\r\n      currentFile: null,\r\n      // 文件预览弹窗显隐\r\n      filePreviewDialogVisible: false,\r\n      isChange: true,\r\n      uploadDFileParams: {},\r\n      fileDataBakAdd: []\r\n    }\r\n  },\r\n  watch: {\r\n    attachmentId() {\r\n      // this.getAttachmentInfo()\r\n    }\r\n  },\r\n  methods: {\r\n    // 从附件服务中移除文件\r\n    onRemove(val) {\r\n      let fileguids = []\r\n      val.forEach(item => {\r\n        fileguids.push(item['fileguid'])\r\n      })\r\n      let params = 'fileguids=' + fileguids + ',&' + 'appid=pay_plan_voucher'\r\n      HttpModule.deleteAttachment(params).then(res => {\r\n        if (res.rscode === '100000') {\r\n          //   let fileguidList = []\r\n          //   // this.fileList.splice(index, 1)\r\n          //   for (let i in this.fileData) {\r\n          //     if (this.fileData[i].fileguid === file['fileguid']) {\r\n          //       fileguidList.push(this.fileData[i].fileguid)\r\n          //       this.fileData.splice(i, 1)\r\n          //       break\r\n          //     }\r\n          //   }\r\n          //   this.onRemove(fileguidList)\r\n          //   this.$emit('update:fileData', this.fileData)\r\n          //   this.$message.success('删除成功')\r\n        }\r\n      }).catch()\r\n    },\r\n    // 移除文件\r\n    handleRemove(index, file) {\r\n      console.log('file', file)\r\n      for (let i in this.fileData) {\r\n        if (this.fileData[i].fileguid === file['fileguid']) {\r\n          this.fileDataBakDel.push(this.fileData[i])\r\n          this.fileData.splice(i, 1)\r\n          break\r\n        }\r\n      }\r\n      console.log('this.fileDataBakDel', this.fileDataBakDel)\r\n      let params = 'fileguids=' + file['fileguid'] + ',&' + 'appid=pay_plan_voucher'\r\n      HttpModule.deleteAttachment(params).then(res => {\r\n        if (res.rscode === '100000') {\r\n          let fileguidList = []\r\n          // this.fileList.splice(index, 1)\r\n          for (let i in this.fileData) {\r\n            if (this.fileData[i].fileguid === file['fileguid']) {\r\n              fileguidList.push(this.fileData[i].fileguid)\r\n              this.fileData.splice(i, 1)\r\n              break\r\n            }\r\n          }\r\n          this.onRemove(fileguidList)\r\n          this.$emit('update:fileData', this.fileData)\r\n          this.$message.success('删除成功')\r\n        }\r\n      }).catch()\r\n    },\r\n    // 单个删除\r\n    deleteAttachment() {\r\n      if (this.$refs.bsTableRef.getSelectionData().length === 0) {\r\n        this.$message.warning('请选择需要删除的数据')\r\n        return\r\n      }\r\n      const temp = this.attachmentList\r\n      let fileguids = []\r\n      var fileguid = ''\r\n      this.$refs.bsTableRef.getSelectionData().forEach(v => {\r\n        fileguids.push(v.fileguid)\r\n        for (let i = 0; i < temp.length; i++) {\r\n          if (v.fileguid === temp[i].fileguid) {\r\n            fileguid = v.fileguid\r\n            temp.splice(i, 1)\r\n            i -= 1\r\n          }\r\n        }\r\n      })\r\n      let params = 'fileguids=' + fileguids + ',&' + 'appid=pay_plan_voucher'\r\n      HttpModule.deleteAttachment(params).then(res => {\r\n        if (res.rscode === '100000') {\r\n          this.attachmentList = temp\r\n          for (let i in this.fileData) {\r\n            if (this.fileData[i].fileguid === fileguid) {\r\n              this.fileData.splice(i, 1)\r\n              break\r\n            }\r\n          }\r\n          this.$emit('update:fileData', this.fileData)\r\n          this.$message.success('删除成功')\r\n        }\r\n      }).catch()\r\n    },\r\n    // 取消时全部删除\r\n    cancel() {\r\n      console.log('调用子组件')\r\n      // 只删除新增加的id\r\n      let fileguids = []\r\n      if (this.fileDataBakAdd.length === 0) {\r\n        return\r\n      }\r\n      this.fileDataBakAdd.forEach(v => {\r\n        fileguids.push(v['fileguid'])\r\n      })\r\n      let params = 'fileguids=' + fileguids + ',&' + 'appid=pay_plan_voucher'\r\n      HttpModule.deleteAttachment(params).then(res => {\r\n        if (res.rscode === '100000') {\r\n          this.$message.success('已上传附件删除成功')\r\n          // this.onRemove(fileguids)\r\n          this.fileData = []\r\n          this.$emit('update:fileData', this.fileData)\r\n          this.isChange = true\r\n        } else {\r\n          this.$message.warning('已上传附件删除失败: ' + res.result)\r\n          this.isChange = false\r\n          return false\r\n        }\r\n      }).catch()\r\n    },\r\n    // 删除\r\n    // 判断文件大小，限制1m\r\n    beforeUpload(file) {\r\n      let s = file.size\r\n      if (s > 1024 * 1024 * this.sizeNum) {\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    },\r\n    // 上传文件\r\n    handelUploadDebugfile(e) {\r\n      console.log(e.file)\r\n      if (this.beforeUpload(e.file) === false) {\r\n        this.$message({ showClose: true, message: '上传失败:上传的文件大小不能超过' + this.sizeNum + 'M', type: 'warning' })\r\n        return\r\n      }\r\n      const form = new FormData()\r\n      const temp = []\r\n      console.log(this.attachmentId)\r\n      // 文件对象\r\n      form.append('file', e.file)\r\n      form.append('filename', e.file.name)\r\n      form.append('appid', '4564CC930A9F45BAAEC7ADF7F6B7C6E5')\r\n      temp.push(e.file.name)\r\n      form.append('doctype', '')\r\n      form.append('year', this.$store.state.userInfo.year)\r\n      form.append('province', this.$store.state.userInfo.province)\r\n      form.append('userguid', this.$store.state.userInfo.guid)\r\n      form.append('billguid', this.attachmentId)\r\n      console.log('attachmentId', this.attachmentId)\r\n      this.addLoading = true\r\n      HttpModule.fileUpload(form).then(res => {\r\n        this.addLoading = false\r\n        if (res.rscode === '100000') {\r\n          let resultData = ''\r\n          if (res.data || res.data != null) {\r\n            resultData = res.data\r\n          } else {\r\n            resultData = res.result\r\n          }\r\n          let data = {}\r\n          temp.push(resultData)\r\n          // this.fileList.push(temp)1\r\n          this.$emit('update:attachmentId', this.attachmentId)\r\n          data['year'] = this.$store.state.userInfo.year\r\n          data['count'] = 0\r\n          data['filesize'] = e.file.size\r\n          data['filename'] = e.file.name\r\n          data['fileguid'] = resultData\r\n          data['filepath'] = e.file.webkitRelativePath\r\n          data['province'] = this.$store.state.userInfo.province\r\n          data['appid'] = 'pay_plan_voucher'\r\n          data['creater'] = e.file.uid\r\n          data['guid'] = this.$store.state.userInfo.guid\r\n          data['billguid'] = this.attachmentId\r\n          data['importuser'] = this.$store.state.userInfo.name\r\n          this.fileData.push(data)\r\n          console.log(this.$store.state.userInfo)\r\n          this.fileDataBakAdd.push(data)\r\n          this.$emit('update:fileData', this.fileData)\r\n          this.$message.success('上传成功')\r\n        } else {\r\n          this.$message.error(res?.result || '上传失败')\r\n        }\r\n      }).catch((res) => {\r\n        this.$message.error(res?.result || '上传失败')\r\n      })\r\n    },\r\n    // 点击表格行触发事件\r\n    /**\r\n     * 根据fileId下载文件\r\n     */\r\n    handleDownload(file) {\r\n      if (!file.fileguid) {\r\n        this.$message.error('未知的文件id')\r\n        return\r\n      }\r\n      downloadByFileId(file.fileguid)\r\n    },\r\n    /**\r\n     * 预览\r\n     */\r\n    handleFilePreview(file) {\r\n      this.currentFile = file\r\n      this.filePreviewDialogVisible = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style  lang=\"scss\">\r\n  // 附件区域\r\n  .upload-my-css {\r\n      height: 33px;\r\n      margin-top: 9px;\r\n      float: left;\r\n      margin-left: 16px;\r\n    }\r\n    .img-my {\r\n      width: 12px;\r\n      height: 12px;\r\n      margin-left: 17px;\r\n      margin-right: 9px;\r\n      margin-top: 13.8px;\r\n      margin-bottom: 14.4px;\r\n    }\r\n    .img-my-two {\r\n      width: 14px;\r\n      height: 14px;\r\n      float: right;\r\n    }\r\n    .sp-my {\r\n      width: 56px;\r\n      font-size: 14px;\r\n      line-height: 24px;\r\n      display: inline-block;\r\n      color: #000000;\r\n      margin-top: 8px;\r\n      margin-bottom: 8px;\r\n      margin-right: 16px;\r\n    }\r\n    .sp-my-two {\r\n      font-size: 12px;\r\n      padding-left: 4px;\r\n      color: #9EA4A9;\r\n      line-height: 22px;\r\n    }\r\n    .attachment{\r\n      height: 44px;\r\n      margin-top: 16px;\r\n      margin-left: 24px;\r\n      margin-bottom: 16px;\r\n      background-color: #F4FAFF;\r\n      .footer-btn{\r\n        border:1px solid#CFD2D4;\r\n        border-radius: 5%;\r\n        width:110px;\r\n        height:40px;\r\n        font-size: 14px;\r\n        line-height: 24px;\r\n        background: #FFFFFF;\r\n      }\r\n      .el-upload {\r\n        text-align: left;\r\n        float: left;\r\n        .el-upload-dragger {\r\n          width: calc(100% - 40px) ;\r\n          height: 80px;\r\n          margin: 20px 20px 0 20px;\r\n          .el-icon-upload {\r\n            margin: 0 ;\r\n          }\r\n        }\r\n        .el-upload__tip {\r\n          margin-left: 10px;\r\n          margin-top: auto;\r\n        }\r\n      }\r\n    }\r\n    .title{\r\n      height: 40px;\r\n      font-size: 18px;\r\n      /*border-bottom: 1px solid #ddd;*/\r\n      line-height: 40px;\r\n      padding: 0 20px;\r\n    }\r\n    .el-card {\r\n      margin-top: 10px;\r\n    }\r\n    .below-table{\r\n    /* 表格样式 */\r\n      .pay-input-table{\r\n        border: 2px solid #0c9fe3;\r\n        color: #0c9fe3;\r\n        width: 100%;\r\n        margin: 0 auto;\r\n        padding: 15px 0px;\r\n      }\r\n      table>tbody>tr>td {\r\n        padding: 8px;\r\n        border: 1px solid #0c9fe3;\r\n        text-align: center;\r\n      }\r\n      /* 付款人列表 */\r\n      .top-search-tip,.top-search-inputs{\r\n        display: grid;\r\n        grid-template-columns:2fr 2fr 2fr 0.3fr ;\r\n        column-gap: 15px;\r\n      }\r\n    }\r\n    .funPlanHeader {\r\n    font-family: PingFangSC-Regular;\r\n    font-size: 16px;\r\n    color: #2E3133;\r\n    letter-spacing: 0;\r\n    line-height: 39px;\r\n    border-bottom: 1px solid #CCD2D8;\r\n    }\r\n    .funPlanHeaderWord {\r\n      font-family: PingFangSC-Regular;\r\n      font-size: 16px;\r\n      color: #2E3133;\r\n      letter-spacing: 0;\r\n      line-height: 24px;\r\n      margin-left: 24px;\r\n      padding-top: 7px;\r\n      margin-bottom: 9px;\r\n    }\r\n    .fundPlanBody{\r\n      background: #F4FAFF;\r\n      height: 118px;\r\n    }\r\n    .fundPlanBodyTwo {\r\n      background: #F4FAFF;\r\n    }\r\n    .fundPlanBodyThr {\r\n      // margin-top: -80px;\r\n      margin-left: 8px;\r\n      margin-right: 24px;\r\n    }\r\n    .enclosure-css {\r\n      margin-top: 0px;\r\n      width: 100%;\r\n      margin-bottom: 16px;\r\n      .enclosure-css1 {\r\n        height: 56px;\r\n        width: 50%;\r\n        .enclosure-css2 {\r\n          margin-left: 16px;\r\n          width: calc(100% - 16px);\r\n          height: 40px;\r\n          background-color: rgb(231, 241, 254);\r\n          .enclosure-css5 {\r\n            // width: calc(100% - 34px);\r\n            width: 100%;\r\n            height: 22px;\r\n            padding-left: 16px;\r\n            padding-right: 18px;\r\n            padding-top: 9px;\r\n            padding-bottom: 9px;\r\n          }\r\n          .enclosure-css3 {\r\n            width: 50%;\r\n            height: 22px;\r\n              .sp-my-thr {\r\n                font-size: 14px;\r\n                line-height: 22px;\r\n                display: inline-block;\r\n              }\r\n            }\r\n          .enclosure-css4 {\r\n            width: 45%;\r\n            text-align: right;\r\n            height: 22px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n</style>\r\n"]}]}