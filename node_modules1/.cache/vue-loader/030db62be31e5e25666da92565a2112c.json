{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\statisticAnalysis\\unitStatistic\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\statisticAnalysis\\unitStatistic\\index.vue","mtime":1695716045798},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIHByb3ZpZGUsIHJlZiwgdW5yZWYsIHRvUmF3IH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknDQppbXBvcnQgUHJldmlld0RldGFpbCBmcm9tICcuLi9jb21tb24vY29tcG9uZW50cy9QcmV2aWV3RGV0YWlsJw0KaW1wb3J0IHsgZWFjaFRyZWUgfSBmcm9tICd4ZS11dGlscycNCg0KaW1wb3J0IHVzZVRhYmxlIGZyb20gJ0AvaG9va3MvdXNlVGFibGUnDQppbXBvcnQgdXNlRm9ybSBmcm9tICdAL2hvb2tzL3VzZUZvcm0nDQppbXBvcnQgdXNlVHJlZSBmcm9tICdAL2hvb2tzL3VzZVRyZWUnDQppbXBvcnQgdXNlVGFiUGxhbmVsIGZyb20gJy4uL2NvbW1vbi9ob29rcy91c2VUYWJQbGFuZWwnDQppbXBvcnQgeyB1c2VNb2RhbCB9IGZyb20gJ0AvaG9va3MvdXNlTW9kYWwvaW5kZXgnDQoNCmltcG9ydCB7IHF1ZXJ5RGVwIH0gZnJvbSAnQC9hcGkvZnJhbWUvbWFpbi9zdGF0aXN0aWNBbmFseXNpcy91bml0U3RhdGlzdGljLmpzJw0KaW1wb3J0IHsNCiAgZ2V0V2FybkNvdW50Q29sdW1ucywNCiAgc2VhcmNoRm9ybUNvbW1vblNjaGVtYXMsDQogIGNlbGxDdXJzb3JVbmRlcmxpbmVDbGFzc05hbWUNCn0gZnJvbSAnQC92aWV3cy9tYWluL3N0YXRpc3RpY0FuYWx5c2lzL2NvbW1vbi9tb2RlbC9kYXRhLmpzJw0KaW1wb3J0IHsgZ2V0QWdlbmN5TmFtZUNvbHVtbiB9IGZyb20gJ0Avdmlld3MvbWFpbi9oYW5kbGluZ09mVmlvbGF0aW9ucy9tb2RlbC9kYXRhLmpzJw0KaW1wb3J0IGVsZW1lbnRUcmVlQXBpIGZyb20gJ0AvYXBpL2ZyYW1lL2NvbW1vbi90cmVlL3VuaXRUcmVlJw0KaW1wb3J0IHsgdXNlRm9vdGVyIH0gZnJvbSAnLi4vY29tbW9uL2hvb2tzL3VzZUZvb3RlcicNCg0KZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsNCiAgY29tcG9uZW50czogew0KICAgIFByZXZpZXdEZXRhaWwNCiAgfSwNCiAgc2V0dXAoXywgeyByb290IH0pIHsNCiAgICBjb25zdCByb3V0ZSA9IHJvb3QuJHJvdXRlDQoNCiAgICAvLyDpobXpnaLot6/nlLENCiAgICBjb25zdCBwYWdlUGF0aCA9IHJlZihyb3V0ZS5wYXRoKQ0KDQogICAgLyoqDQogICAgICogbW9kYWxUeXBlOuW8ueeql+aJk+W8gOaTjeS9nA0KICAgICAqIHBhZ2VQYXRoOumhtemdoui3r+eUsQ0KICAgICAqLw0KICAgIHByb3ZpZGUoJ3BhZ2VQYXRoJywgcGFnZVBhdGgpDQogICAgcHJvdmlkZSgnbW9kYWxUeXBlJywgJycpDQoNCiAgICAvLyDlt6bkvqfljLrliJLmoJHmmL7pmpANCiAgICBjb25zdCBsZWZ0VmlzaWJsZSA9IHJlZih0cnVlKQ0KDQogICAgLy8g6KeE5YiZ5by556qX5pi+6ZqQDQogICAgY29uc3QgW3J1bGVNb2RhbFZpc2libGUsIGNoYW5nZVJ1bGVNb2RhbFZpc2libGVWaXNpYmxlXSA9IHVzZU1vZGFsKCkNCg0KICAgIC8vIOW9k+WJjeaTjeS9nOihjA0KICAgIGNvbnN0IGN1cnJlbnRSb3cgPSByZWYobnVsbCkNCiAgICBjb25zdCBpc1NIID0gcm9vdC50cmFuc0pzb24ocm9vdC4kc3RvcmUuc3RhdGUuY3VyTmF2TW9kdWxlLnBhcmFtNSB8fCAnJyk/LnByb2plY3RDb2RlID09PSAnU0gnDQogICAgLyoqDQogICAgICog5Yy65YiS5qCR55u45YWzDQogICAgICovDQogICAgY29uc3Qgew0KICAgICAgdHJlZVByb3BzLA0KICAgICAgdHJlZURhdGEsDQogICAgICB0cmVlRmlsdGVyVGV4dCwNCiAgICAgIHRyZWVMb2FkaW5nDQogICAgfSA9IHVzZVRyZWUoDQogICAgICB7DQogICAgICAgIHRyZWVQcm9wczogew0KICAgICAgICAgIG5vZGVLZXk6ICdjb2RlJywNCiAgICAgICAgICBsYWJlbEZvcm1hdDogaXNTSCA/IHVuZGVmaW5lZCA6ICd7bmFtZX0nDQogICAgICAgIH0sDQogICAgICAgIGZldGNoOiBlbGVtZW50VHJlZUFwaS5nZXRBZ2VuY3lUcmVlLA0KICAgICAgICBhZnRlckZldGNoOiBkYXRhID0+IHsNCiAgICAgICAgICByZXR1cm4gWw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBuYW1lOiAn5YWo6YOoJywNCiAgICAgICAgICAgICAgY3VzdG9tQ29kZTogJ0FMTF9OT0RFX0NPREUnLA0KICAgICAgICAgICAgICBjaGlsZHJlbjogZGF0YSB8fCBbXQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIF0NCiAgICAgICAgfSwNCiAgICAgICAgLy8g5paw5aKe6LWL5YC857uT5p2f55qE6ZKp5a2Q77ya6ZyA6KaB5qC55o2u5Y2V5L2N5qCR5Yqg6L295YiX6KGo5pWw5o2uDQogICAgICAgIGZpbmFsbHlGZXRjaDogKCkgPT4gew0KICAgICAgICAgIHJlc2V0RmV0Y2hUYWJsZURhdGEoKQ0KICAgICAgICB9DQogICAgICB9DQogICAgKQ0KICAgIC8vIOW9k+WJjemAieS4reeahOagkeiKgueCuQ0KICAgIGNvbnN0IGN1cnJlbnRUcmVlTm9kZSA9IHJlZihudWxsKQ0KICAgIC8qKg0KICAgICAqIOaMh+agh+aVsOiKgueCueeCueWHuw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIG5vZGVDbGljayh7IG5vZGUgfSkgew0KICAgICAgY3VycmVudFRyZWVOb2RlLnZhbHVlID0gbm9kZQ0KICAgICAgcmVzZXRGZXRjaFRhYmxlRGF0YSgpDQogICAgfQ0KDQogICAgLyoqDQogICAgICog5pCc57Si6KGo5Y2VDQogICAgICovDQogICAgY29uc3QgWw0KICAgICAgew0KICAgICAgICBmb3JtRGF0YSwNCiAgICAgICAgZm9ybVNjaGVtYXMsDQogICAgICAgIHNldFN1Ym1pdEZvcm1EYXRhLA0KICAgICAgICBnZXRTdWJtaXRGb3JtRGF0YQ0KICAgICAgfSwNCiAgICAgIHJlZ2lzdGVyRm9ybQ0KICAgIF0gPSB1c2VGb3JtKHNlYXJjaEZvcm1Db21tb25TY2hlbWFzKQ0KDQogICAgLyoqDQogICAgICog5pCc57SiJumHjee9rg0KICAgICAqICovDQogICAgZnVuY3Rpb24gc2VhcmNoKG9iaikgew0KICAgICAgT2JqZWN0LmFzc2lnbihmb3JtRGF0YSwgb2JqKQ0KICAgICAgc2V0U3VibWl0Rm9ybURhdGEodG9SYXcoZm9ybURhdGEpKQ0KDQogICAgICByZXNldEZldGNoVGFibGVEYXRhKCkNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDlhbPpl63miYDmnInlvLnnqpcNCiAgICAgKiAqLw0KICAgIGZ1bmN0aW9uIGNsb3NlQWxsSGFuZGxlKCkgew0KICAgICAgY2hhbmdlUnVsZU1vZGFsVmlzaWJsZVZpc2libGUoZmFsc2UpDQogICAgfQ0KDQogICAgY29uc3QgeyBmb290ZXJDb25maWcgfSA9IHVzZUZvb3RlcigpDQoNCiAgICAvKioNCiAgICAgKiDooajmoLwNCiAgICAgKiAqLw0KICAgIGNvbnN0IFsNCiAgICAgIHsNCiAgICAgICAgY29sdW1ucywNCiAgICAgICAgdGFibGVUb29sYmFyQ29uZmlnLA0KICAgICAgICB0YWJsZUNvbmZpZywNCiAgICAgICAgdGFibGVEYXRhLA0KICAgICAgICByZXNldEZldGNoVGFibGVEYXRhLA0KICAgICAgICB0YWJsZUxvYWRpbmdTdGF0ZSwNCiAgICAgICAgcGFnZXJDaGFuZ2UsDQogICAgICAgIHBhZ2VyQ29uZmlnLA0KICAgICAgICBvblRvb2xiYXJCdG5DbGljaywNCiAgICAgICAgZ2V0VGFibGUNCiAgICAgIH0sDQogICAgICByZWdpc3RlclRhYmxlDQogICAgXSA9IHVzZVRhYmxlKHsNCiAgICAgIGZldGNoOiBxdWVyeURlcCwNCiAgICAgIGJlZm9yZUZldGNoOiBwYXJhbXMgPT4gew0KICAgICAgICBjb25zdCBjb2RlcyA9IFtdDQogICAgICAgIGlmICghdW5yZWYoY3VycmVudFRyZWVOb2RlKSB8fCB1bnJlZihjdXJyZW50VHJlZU5vZGUpLmN1c3RvbUNvZGUgPT09ICdBTExfTk9ERV9DT0RFJykgew0KICAgICAgICAgIGVhY2hUcmVlKHVucmVmKHRyZWVEYXRhKVswXT8uY2hpbGRyZW4gPyB1bnJlZih0cmVlRGF0YSlbMF0/LmNoaWxkcmVuIDogW10sIGl0ZW0gPT4gew0KICAgICAgICAgICAgY29kZXMucHVzaChpdGVtLmNvZGUpDQogICAgICAgICAgfSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBlYWNoVHJlZShbdW5yZWYoY3VycmVudFRyZWVOb2RlKV0sIGl0ZW0gPT4gew0KICAgICAgICAgICAgY29kZXMucHVzaChpdGVtLmNvZGUpDQogICAgICAgICAgfSkNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgLi4ucGFyYW1zLA0KICAgICAgICAgIGFnZW5jeUNvZGU6IGNvZGVzDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBmaW5hbGx5RmV0Y2g6IGRhdGEgPT4gew0KICAgICAgICBmb290ZXJDb25maWcudmFsdWUudG90YWxPYmogPSBkYXRhPy53YXJuSEpWTyB8fCB7fQ0KICAgICAgfSwNCiAgICAgIGNvbHVtbnM6IFsNCiAgICAgICAgZ2V0QWdlbmN5TmFtZUNvbHVtbih7DQogICAgICAgICAgd2lkdGg6ICdhdXRvJw0KICAgICAgICB9KSwNCiAgICAgICAgLi4uZ2V0V2FybkNvdW50Q29sdW1ucygpDQogICAgICBdLA0KICAgICAgZ2V0U3VibWl0Rm9ybURhdGEsDQogICAgICBkYXRhS2V5OiAnZGF0YS5yZXN1bHRzJw0KICAgIH0sIGZhbHNlKQ0KDQogICAgLyoqDQogICAgICog5Y+M5Ye75Y2V5YWD5qC8DQogICAgICogKi8NCiAgICBmdW5jdGlvbiBjZWxsRGJsY2xpY2soeyByb3cgfSkgew0KICAgICAgY3VycmVudFJvdy52YWx1ZSA9IHJvdw0KICAgICAgY2hhbmdlUnVsZU1vZGFsVmlzaWJsZVZpc2libGUodHJ1ZSkNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDpobbpg6h0YWLmqKHlnZcNCiAgICAgKi8NCiAgICBjb25zdCB7DQogICAgICB0YWJTdGF0dXNCdG5Db25maWcsDQogICAgICBpc1Nob3dTZWFyY2hGb3JtLA0KICAgICAgb25RdWVyeUNvbmRpdGlvbnNDbGljaw0KICAgIH0gPSB1c2VUYWJQbGFuZWwoY2hhbmdlUnVsZU1vZGFsVmlzaWJsZVZpc2libGUsIGdldFRhYmxlLCBjdXJyZW50Um93KQ0KICAgIHJldHVybiB7DQogICAgICBsZWZ0VmlzaWJsZSwNCiAgICAgIHJ1bGVNb2RhbFZpc2libGUsDQoNCiAgICAgIHRyZWVQcm9wcywNCiAgICAgIHRyZWVEYXRhLA0KICAgICAgdHJlZUZpbHRlclRleHQsDQogICAgICB0cmVlTG9hZGluZywNCiAgICAgIGN1cnJlbnRUcmVlTm9kZSwNCiAgICAgIG5vZGVDbGljaywNCg0KICAgICAgY2VsbERibGNsaWNrLA0KICAgICAgZm9vdGVyQ29uZmlnLA0KICAgICAgY29sdW1ucywNCiAgICAgIHJlZ2lzdGVyVGFibGUsDQogICAgICB0YWJsZUNvbmZpZywNCiAgICAgIHRhYmxlRGF0YSwNCiAgICAgIHRhYmxlTG9hZGluZ1N0YXRlLA0KICAgICAgcGFnZXJDb25maWcsDQogICAgICB0YWJsZVRvb2xiYXJDb25maWcsDQogICAgICBvblRvb2xiYXJCdG5DbGljaywNCiAgICAgIHBhZ2VyQ2hhbmdlLA0KICAgICAgcmVzZXRGZXRjaFRhYmxlRGF0YSwNCiAgICAgIGNlbGxDdXJzb3JVbmRlcmxpbmVDbGFzc05hbWUsDQoNCiAgICAgIGN1cnJlbnRSb3csDQogICAgICBjbG9zZUFsbEhhbmRsZSwNCg0KICAgICAgdGFiU3RhdHVzQnRuQ29uZmlnLA0KICAgICAgaXNTaG93U2VhcmNoRm9ybSwNCiAgICAgIG9uUXVlcnlDb25kaXRpb25zQ2xpY2ssDQoNCiAgICAgIHJlZ2lzdGVyRm9ybSwNCiAgICAgIGZvcm1EYXRhLA0KICAgICAgZm9ybVNjaGVtYXMsDQogICAgICBzZWFyY2gNCiAgICB9DQogIH0NCn0pDQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/main/statisticAnalysis/unitStatistic","sourcesContent":["<template>\r\n  <div style=\"height: 100%\" class=\"unitStatistic\">\r\n    <BsMainFormListLayout :left-visible=\"leftVisible\">\r\n      <template v-slot:topTabPane>\r\n        <BsTabPanel\r\n          :tab-status-btn-config=\"tabStatusBtnConfig\"\r\n          :is-open=\"isShowSearchForm\"\r\n          @onQueryConditionsClick=\"onQueryConditionsClick\"\r\n        />\r\n      </template>\r\n      <template v-slot:query>\r\n        <div v-show=\"isShowSearchForm\" class=\"main-query\">\r\n          <BsQuery\r\n            :query-form-item-config=\"formSchemas\"\r\n            :query-form-data=\"formData\"\r\n            @onSearchClick=\"search\"\r\n            @register=\"registerForm\"\r\n          />\r\n        </div>\r\n      </template>\r\n      <template v-slot:mainTree>\r\n        <div style=\"height: 100%;\">\r\n          <BsTreeTitle\r\n            :visiable.sync=\"leftVisible\"\r\n            :input-value.sync=\"treeFilterText\"\r\n            label=\"导航\"\r\n          />\r\n          <div class=\"mmc-left-tree-body\" style=\"height: calc(100% - 48px); overflow-y: auto\">\r\n            <BsTree\r\n              ref=\"mofDivTree\"\r\n              v-loading=\"treeLoading\"\r\n              :filter-text=\"treeFilterText\"\r\n              :config=\"{ showFilter: false, expandOnClickNode: false, treeProps }\"\r\n              :tree-data=\"treeData\"\r\n              @onNodeClick=\"nodeClick\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </template>\r\n      <template v-slot:mainForm>\r\n        <div style=\"height: 100%\">\r\n          <BsTable\r\n            :loading=\"tableLoadingState\"\r\n            :table-config=\"tableConfig\"\r\n            :table-columns-config=\"columns\"\r\n            :table-data=\"tableData\"\r\n            :footer-config=\"footerConfig\"\r\n            :toolbar-config=\"tableToolbarConfig\"\r\n            :pager-config=\"pagerConfig\"\r\n            size=\"medium\"\r\n            :cell-class-name=\"cellCursorUnderlineClassName\"\r\n            @register=\"registerTable\"\r\n            @ajaxData=\"pagerChange\"\r\n            @onToolbarBtnClick=\"onToolbarBtnClick\"\r\n            @cellDblclick=\"cellDblclick\"\r\n          >\r\n            <template v-slot:toolbarSlots>\r\n              <div class=\"table-toolbar-left\">\r\n                <div\r\n                  v-if=\"!leftVisible\"\r\n                  class=\"table-toolbar-contro-leftvisible\"\r\n                  @click=\"leftVisible = true\"\r\n                >\r\n                </div>\r\n                <BsTableTitle title=\"统计分析\" />\r\n              </div>\r\n            </template>\r\n          </BsTable>\r\n        </div>\r\n      </template>\r\n    </BsMainFormListLayout>\r\n    <PreviewDetail\r\n      v-if=\"ruleModalVisible\"\r\n      v-model=\"ruleModalVisible\"\r\n      :current-row=\"currentRow\"\r\n      :query-data=\"formData\"\r\n      @closeAll=\"closeAllHandle\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, provide, ref, unref, toRaw } from '@vue/composition-api'\r\nimport PreviewDetail from '../common/components/PreviewDetail'\r\nimport { eachTree } from 'xe-utils'\r\n\r\nimport useTable from '@/hooks/useTable'\r\nimport useForm from '@/hooks/useForm'\r\nimport useTree from '@/hooks/useTree'\r\nimport useTabPlanel from '../common/hooks/useTabPlanel'\r\nimport { useModal } from '@/hooks/useModal/index'\r\n\r\nimport { queryDep } from '@/api/frame/main/statisticAnalysis/unitStatistic.js'\r\nimport {\r\n  getWarnCountColumns,\r\n  searchFormCommonSchemas,\r\n  cellCursorUnderlineClassName\r\n} from '@/views/main/statisticAnalysis/common/model/data.js'\r\nimport { getAgencyNameColumn } from '@/views/main/handlingOfViolations/model/data.js'\r\nimport elementTreeApi from '@/api/frame/common/tree/unitTree'\r\nimport { useFooter } from '../common/hooks/useFooter'\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    PreviewDetail\r\n  },\r\n  setup(_, { root }) {\r\n    const route = root.$route\r\n\r\n    // 页面路由\r\n    const pagePath = ref(route.path)\r\n\r\n    /**\r\n     * modalType:弹窗打开操作\r\n     * pagePath:页面路由\r\n     */\r\n    provide('pagePath', pagePath)\r\n    provide('modalType', '')\r\n\r\n    // 左侧区划树显隐\r\n    const leftVisible = ref(true)\r\n\r\n    // 规则弹窗显隐\r\n    const [ruleModalVisible, changeRuleModalVisibleVisible] = useModal()\r\n\r\n    // 当前操作行\r\n    const currentRow = ref(null)\r\n    const isSH = root.transJson(root.$store.state.curNavModule.param5 || '')?.projectCode === 'SH'\r\n    /**\r\n     * 区划树相关\r\n     */\r\n    const {\r\n      treeProps,\r\n      treeData,\r\n      treeFilterText,\r\n      treeLoading\r\n    } = useTree(\r\n      {\r\n        treeProps: {\r\n          nodeKey: 'code',\r\n          labelFormat: isSH ? undefined : '{name}'\r\n        },\r\n        fetch: elementTreeApi.getAgencyTree,\r\n        afterFetch: data => {\r\n          return [\r\n            {\r\n              name: '全部',\r\n              customCode: 'ALL_NODE_CODE',\r\n              children: data || []\r\n            }\r\n          ]\r\n        },\r\n        // 新增赋值结束的钩子：需要根据单位树加载列表数据\r\n        finallyFetch: () => {\r\n          resetFetchTableData()\r\n        }\r\n      }\r\n    )\r\n    // 当前选中的树节点\r\n    const currentTreeNode = ref(null)\r\n    /**\r\n     * 指标数节点点击\r\n     */\r\n    function nodeClick({ node }) {\r\n      currentTreeNode.value = node\r\n      resetFetchTableData()\r\n    }\r\n\r\n    /**\r\n     * 搜索表单\r\n     */\r\n    const [\r\n      {\r\n        formData,\r\n        formSchemas,\r\n        setSubmitFormData,\r\n        getSubmitFormData\r\n      },\r\n      registerForm\r\n    ] = useForm(searchFormCommonSchemas)\r\n\r\n    /**\r\n     * 搜索&重置\r\n     * */\r\n    function search(obj) {\r\n      Object.assign(formData, obj)\r\n      setSubmitFormData(toRaw(formData))\r\n\r\n      resetFetchTableData()\r\n    }\r\n\r\n    /**\r\n     * 关闭所有弹窗\r\n     * */\r\n    function closeAllHandle() {\r\n      changeRuleModalVisibleVisible(false)\r\n    }\r\n\r\n    const { footerConfig } = useFooter()\r\n\r\n    /**\r\n     * 表格\r\n     * */\r\n    const [\r\n      {\r\n        columns,\r\n        tableToolbarConfig,\r\n        tableConfig,\r\n        tableData,\r\n        resetFetchTableData,\r\n        tableLoadingState,\r\n        pagerChange,\r\n        pagerConfig,\r\n        onToolbarBtnClick,\r\n        getTable\r\n      },\r\n      registerTable\r\n    ] = useTable({\r\n      fetch: queryDep,\r\n      beforeFetch: params => {\r\n        const codes = []\r\n        if (!unref(currentTreeNode) || unref(currentTreeNode).customCode === 'ALL_NODE_CODE') {\r\n          eachTree(unref(treeData)[0]?.children ? unref(treeData)[0]?.children : [], item => {\r\n            codes.push(item.code)\r\n          })\r\n        } else {\r\n          eachTree([unref(currentTreeNode)], item => {\r\n            codes.push(item.code)\r\n          })\r\n        }\r\n\r\n        return {\r\n          ...params,\r\n          agencyCode: codes\r\n        }\r\n      },\r\n      finallyFetch: data => {\r\n        footerConfig.value.totalObj = data?.warnHJVO || {}\r\n      },\r\n      columns: [\r\n        getAgencyNameColumn({\r\n          width: 'auto'\r\n        }),\r\n        ...getWarnCountColumns()\r\n      ],\r\n      getSubmitFormData,\r\n      dataKey: 'data.results'\r\n    }, false)\r\n\r\n    /**\r\n     * 双击单元格\r\n     * */\r\n    function cellDblclick({ row }) {\r\n      currentRow.value = row\r\n      changeRuleModalVisibleVisible(true)\r\n    }\r\n\r\n    /**\r\n     * 顶部tab模块\r\n     */\r\n    const {\r\n      tabStatusBtnConfig,\r\n      isShowSearchForm,\r\n      onQueryConditionsClick\r\n    } = useTabPlanel(changeRuleModalVisibleVisible, getTable, currentRow)\r\n    return {\r\n      leftVisible,\r\n      ruleModalVisible,\r\n\r\n      treeProps,\r\n      treeData,\r\n      treeFilterText,\r\n      treeLoading,\r\n      currentTreeNode,\r\n      nodeClick,\r\n\r\n      cellDblclick,\r\n      footerConfig,\r\n      columns,\r\n      registerTable,\r\n      tableConfig,\r\n      tableData,\r\n      tableLoadingState,\r\n      pagerConfig,\r\n      tableToolbarConfig,\r\n      onToolbarBtnClick,\r\n      pagerChange,\r\n      resetFetchTableData,\r\n      cellCursorUnderlineClassName,\r\n\r\n      currentRow,\r\n      closeAllHandle,\r\n\r\n      tabStatusBtnConfig,\r\n      isShowSearchForm,\r\n      onQueryConditionsClick,\r\n\r\n      registerForm,\r\n      formData,\r\n      formSchemas,\r\n      search\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.unitStatistic{\r\n  /deep/ .vxe-pager--total{\r\n    display: none;\r\n  }\r\n}\r\n</style>\r\n"]}]}