{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\functionalComponent\\import\\importTable\\ImportTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\functionalComponent\\import\\importTable\\ImportTable.vue","mtime":1694505521742},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgSW1wb3J0VGFibGVVdGlsQ2IgZnJvbSAnLi9pbXBvcnRUYWJsZVV0aWwuanMnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdJbnZvaWNUYWJsZScsDQogIHByb3BzOiB7DQogICAgaW1wb3J0TW9kYWxWaXNpYmxlOiB7DQogICAgICB0eXBlOiBCb29sZWFuDQogICAgfSwNCiAgICBjb25maWc6IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgcmVtaW5kZXI6ICfor7fkvb/nlKjmnIDmlrDnmoTlr7zlhaXmqKHmnb8s6Iul5piv56ys5LiA5qyhLOivt+WcqOS4i+aWueS4i+i9veOAgicsDQogICAgICAgICAgaW5zdHJ1Y3Rpb25zOg0KICAgICAgICAgICAgJ+WvvOWFpeaooeeJiOWPquiDveS4ukV4Y2VsLOaWh+S7tuWkp+Wwj+S4jeiDveWkp+S6jjEwTSzlhoXlrrnkuLrnuq/mlofmnKzmiJbmlbDlrZfloavlhpku5qih5p2/5Lit56eR55uu5ZCN56ew5ZKM56eR55uu57yW56CB5LiN6IO95Li656m6LOWFtuS7luS/oeaBr+ivt+afpeeci+aooeadv+S4reivtOaYjuOAgicsDQogICAgICAgICAgZG93bmxvYWRUZW1wbGF0ZVRleHQ6ICfkuIvovb3mnIDmlrDmqKHniYgnLA0KICAgICAgICAgIGRvd25sb2FkVGVtcGxhdGU6IGZhbHNlLCAvLyDmmK/lkKbmmL7npLrkuIvovb3mqKHniYjmjInpkq4NCiAgICAgICAgICBtYXhTaXplOiAxMDI0ICogMTAyNCAqIDEwLCAvLyAg5o6l5Y+X5paH5Lu25bC65a+4DQogICAgICAgICAgYWNjZXB0VHlwZTogJ3hsc3gnLCAvLyDmjqXlj5fmlofku7bnsbvlnosNCiAgICAgICAgICBpbXBvcnRUaGVhZDogdHJ1ZSwgLy8g5a+85YWl6KGo5aS0DQogICAgICAgICAgaW1wb3J0VGJvZHk6IHRydWUsIC8vIOWvvOWFpeihqOS9kw0KICAgICAgICAgIHNob3dUaGVhZFNlbGVjdDogdHJ1ZSwgLy8g5pi+56S66KGo5aS06KGM57Si5byV6YCJ5oupDQogICAgICAgICAgdGhlYWRSb3dJbmRleFN0YXJ0OiAxLCAvLyDooajlpLTlvIDlp4vooYzntKLlvJUNCiAgICAgICAgICB0aGVhZFJvd0luZGV4RW5kOiAxLCAvLyDooajlpLTnu5PmnZ/ooYzntKLlvJUNCiAgICAgICAgICBmaWxlbmFtZTogJycgLy8g5paH5Lu25ZCNDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHt9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDlhbPpl63lr7nor53moYYNCiAgICBjbG9zZUFuZENsZWFyKCkgew0KICAgICAgdGhpcy5pbXBvcnRNb2RhbFZpc2libGUgPSBmYWxzZQ0KICAgIH0sDQogICAgb25Eb3dubG9hZFRlbXBsYXRlQ2xpY2soKSB7DQogICAgICAvLyDkuIvovb3mnIDmlrDmqKHmnb8NCiAgICAgIHRoaXMuJGVtaXQoJ29uRG93bmxvYWRUZW1wbGF0ZUNsaWNrJywge30sIHRoaXMpDQogICAgICBpZiAodHlwZW9mIHRoaXMuZG93bmxvYWRUZW1wbGF0ZSA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICB0aGlzLmRvd25sb2FkVGVtcGxhdGUodGhpcykNCiAgICAgIH0NCiAgICB9LA0KICAgIG9uRG93bmxvYWRTYW1wbGVDbGljaygpIHsNCiAgICAgIHRoaXMuJGVtaXQoJ29uRG93bmxvYWRTYW1wbGVDbGljaycsIHt9LCB0aGlzKQ0KICAgICAgaWYgKHR5cGVvZiB0aGlzLmRvd25sb2FkU2FtcGxlID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgIHRoaXMuZG93bmxvYWRTYW1wbGUodGhpcykNCiAgICAgIH0NCiAgICB9LA0KICAgIG9uSW1wb3J0RmlsZUNsaWNrKCkgew0KICAgICAgLy8g6YCJ5oup5paH5Lu2DQogICAgICBsZXQgc2VsZiA9IHRoaXMNCiAgICAgIGlmICh0eXBlb2YgdGhpcy5yZVNldENvbmZpZyA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICBJbXBvcnRUYWJsZVV0aWxDYi5pbXBvcnRFeGNlbCh7IGNvbmZpZzogdGhpcy5yZVNldENvbmZpZyh0aGlzLmNvbmZpZykgfSwgKGRhdGEpID0+IHsNCiAgICAgICAgICBzZWxmLmN1ckltcG9ydERhdGEgPSBkYXRhDQogICAgICAgICAgc2VsZi5jb25maWcuZmlsZW5hbWUgPSBkYXRhLmZpbGVuYW1lDQogICAgICAgIH0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICBJbXBvcnRUYWJsZVV0aWxDYi5pbXBvcnRFeGNlbCh7IGNvbmZpZzogdGhpcy5jb25maWcgfSwgKGRhdGEpID0+IHsNCiAgICAgICAgICBzZWxmLmN1ckltcG9ydERhdGEgPSBkYXRhDQogICAgICAgICAgc2VsZi5jb25maWcuZmlsZW5hbWUgPSBkYXRhLmZpbGVuYW1lDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBvbkltcG9ydENsaWNrKGRhdGEpIHsgLy8g5a+85YWlDQogICAgICBsZXQgc2VsZiA9IHRoaXMNCiAgICAgIHRoaXMuJGVtaXQoJ29uSW1wb3J0Q2xpY2snLCBzZWxmLmN1ckltcG9ydERhdGEsIHRoaXMpDQogICAgICBpZiAodHlwZW9mIHRoaXMuaW1wb3J0U3VjY2VzcyA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICB0aGlzLmltcG9ydFN1Y2Nlc3Moc2VsZi5jdXJJbXBvcnREYXRhLCB0aGlzKQ0KICAgICAgfQ0KICAgIH0sDQogICAgb25DYW5jZWxDbGljaygpIHsNCiAgICAgIHRoaXMuJGVtaXQoJ29uQ2FuY2VsJywgdGhpcy5jb250ZW50KQ0KICAgICAgaWYgKHR5cGVvZiB0aGlzLmNhbmNlbCA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICB0aGlzLmNhbmNlbCh0aGlzKQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICBpZiAodHlwZW9mIHRoaXMuaW1wb3J0Q29uZmlnID09PSAnb2JqZWN0Jykgew0KICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbmZpZywgdGhpcy5pbXBvcnRDb25maWcpDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDoge30sDQogIHdhdGNoOiB7DQogICAgaW1wb3J0TW9kYWxWaXNpYmxlOiB7DQogICAgICBoYW5kbGVyKG5ld1ZhbCkgew0KICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6aW1wb3J0TW9kYWxWaXNpYmxlJywgbmV3VmFsKQ0KICAgICAgfSwNCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQ0KICAgIH0sDQogICAgY29uZmlnOiB7DQogICAgICBoYW5kbGVyKG5ld1ZhbCkgew0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["ImportTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ImportTable.vue","sourceRoot":"src/components/functionalComponent/import/importTable","sourcesContent":["<!--  导入表体弹框，支持解析嵌套表头   Author:Titans@2396757591@qq.com -->\r\n<template>\r\n  <div class=\"idtu-template-generate\">\r\n    <vxe-modal\r\n      v-model=\"importModalVisible\"\r\n      width=\"800\"\r\n      top=\"15\"\r\n      :position=\"{\r\n        top: '10%',\r\n      }\"\r\n      title=\"导入\"\r\n      @click=\"closeAndClear\"\r\n      @cancel=\"onCancelClick\"\r\n    >\r\n      <div class=\"import-download-template-up\">\r\n        <!-- 下载提示 -->\r\n        <div>\r\n          <div v-if=\"config.downloadTemplate || config.downloadSample\" class=\"idtu-tip\">\r\n            {{ config.reminder }}\r\n          </div>\r\n          <!-- 下载最新模板 -->\r\n          <div class=\"idtu-download-template\">\r\n            <vxe-button\r\n              v-if=\"config.downloadTemplate\"\r\n              class=\"btn\"\r\n              content=\"下载最新模板\"\r\n              @click=\"onDownloadTemplateClick\"\r\n            />\r\n            <vxe-button\r\n              v-if=\"config.downloadSample\"\r\n              class=\"btn\"\r\n              content=\"下载示例模板\"\r\n              @click=\"onDownloadSampleClick\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"idtu-import\">\r\n          <vxe-form\r\n            :data=\"config\"\r\n            size=\"medium\"\r\n            title-width=\"150\"\r\n            title-align=\"right\"\r\n            align=\"left\"\r\n            title-colon\r\n          >\r\n            <vxe-form-item v-if=\"config.showTheadSelect\" title=\"导入说明\" :span=\"24\">\r\n              <div class=\"idtu-import-tip\">\r\n                {{ config.instructions }}\r\n              </div>\r\n            </vxe-form-item>\r\n            <vxe-form-item title=\"导入选项\" :span=\"24\">\r\n              <template v-slot>\r\n                <div class=\"vxe-checkbox-group fn-inline\">\r\n                  <vxe-checkbox\r\n                    v-model=\"config.importThead\"\r\n                    label=\"isEOnlySourceField\"\r\n                    content=\"导入表头\"\r\n                    size=\"medium\"\r\n                  />\r\n                  <vxe-checkbox\r\n                    v-model=\"config.importTbody\"\r\n                    label=\"isExportOnlySourceField\"\r\n                    content=\"导入表体\"\r\n                    size=\"medium\"\r\n                  />\r\n                </div>\r\n              </template>\r\n            </vxe-form-item>\r\n            <vxe-form-item v-if=\"config.showTheadSelect\" title=\"指定表头行索引\" :span=\"24\">\r\n              <vxe-input v-model=\"config.theadRowIndexStart\" placeholder=\"开始行索引\" type=\"integer\" />\r\n              <span class=\"fgx\">-</span>\r\n              <vxe-input v-model=\"config.theadRowIndexEnd\" placeholder=\"结束行索引\" type=\"integer\" />\r\n            </vxe-form-item>\r\n            <vxe-form-item title=\"点击导入\" :span=\"24\">\r\n              <vxe-button\r\n                class=\"download-button-btn\"\r\n                type=\"text\"\r\n                status=\"primary\"\r\n                icon=\"fa fa-upload\"\r\n                content=\"点击导入文件\"\r\n                @click=\"onImportFileClick\"\r\n              />\r\n            </vxe-form-item>\r\n            <vxe-form-item v-if=\"config.filename !== ''\" title=\"导入文件名\" :span=\"24\">\r\n              <div class=\"idtu-importFile-tip\">\r\n                {{ config.filename }}\r\n              </div>\r\n            </vxe-form-item>\r\n          </vxe-form>\r\n\r\n        </div>\r\n        <div class=\"idtu-import-btn\">\r\n          <vxe-button\r\n            class=\"download-button-btn\"\r\n            status=\"primary\"\r\n            icon=\"fa fa-save\"\r\n            :disabled=\"config.filename === ''\"\r\n            content=\"导入\"\r\n            @click=\"onImportClick\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </vxe-modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport ImportTableUtilCb from './importTableUtil.js'\r\nexport default {\r\n  name: 'InvoicTable',\r\n  props: {\r\n    importModalVisible: {\r\n      type: Boolean\r\n    },\r\n    config: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          reminder: '请使用最新的导入模板,若是第一次,请在下方下载。',\r\n          instructions:\r\n            '导入模版只能为Excel,文件大小不能大于10M,内容为纯文本或数字填写.模板中科目名称和科目编码不能为空,其他信息请查看模板中说明。',\r\n          downloadTemplateText: '下载最新模版',\r\n          downloadTemplate: false, // 是否显示下载模版按钮\r\n          maxSize: 1024 * 1024 * 10, //  接受文件尺寸\r\n          acceptType: 'xlsx', // 接受文件类型\r\n          importThead: true, // 导入表头\r\n          importTbody: true, // 导入表体\r\n          showTheadSelect: true, // 显示表头行索引选择\r\n          theadRowIndexStart: 1, // 表头开始行索引\r\n          theadRowIndexEnd: 1, // 表头结束行索引\r\n          filename: '' // 文件名\r\n        }\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {}\r\n  },\r\n  methods: {\r\n    // 关闭对话框\r\n    closeAndClear() {\r\n      this.importModalVisible = false\r\n    },\r\n    onDownloadTemplateClick() {\r\n      // 下载最新模板\r\n      this.$emit('onDownloadTemplateClick', {}, this)\r\n      if (typeof this.downloadTemplate === 'function') {\r\n        this.downloadTemplate(this)\r\n      }\r\n    },\r\n    onDownloadSampleClick() {\r\n      this.$emit('onDownloadSampleClick', {}, this)\r\n      if (typeof this.downloadSample === 'function') {\r\n        this.downloadSample(this)\r\n      }\r\n    },\r\n    onImportFileClick() {\r\n      // 选择文件\r\n      let self = this\r\n      if (typeof this.reSetConfig === 'function') {\r\n        ImportTableUtilCb.importExcel({ config: this.reSetConfig(this.config) }, (data) => {\r\n          self.curImportData = data\r\n          self.config.filename = data.filename\r\n        })\r\n      } else {\r\n        ImportTableUtilCb.importExcel({ config: this.config }, (data) => {\r\n          self.curImportData = data\r\n          self.config.filename = data.filename\r\n        })\r\n      }\r\n    },\r\n    onImportClick(data) { // 导入\r\n      let self = this\r\n      this.$emit('onImportClick', self.curImportData, this)\r\n      if (typeof this.importSuccess === 'function') {\r\n        this.importSuccess(self.curImportData, this)\r\n      }\r\n    },\r\n    onCancelClick() {\r\n      this.$emit('onCancel', this.content)\r\n      if (typeof this.cancel === 'function') {\r\n        this.cancel(this)\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    if (typeof this.importConfig === 'object') {\r\n      Object.assign(this.config, this.importConfig)\r\n    }\r\n  },\r\n  computed: {},\r\n  watch: {\r\n    importModalVisible: {\r\n      handler(newVal) {\r\n        this.$emit('update:importModalVisible', newVal)\r\n      },\r\n      immediate: true\r\n    },\r\n    config: {\r\n      handler(newVal) {\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.idtu-template-generate{\r\n   .import-download-template-up {\r\n    padding: 10px 50px 15px 50px;\r\n    .idtu-tip {\r\n      font-size: 14px;\r\n      font-weight: bold;\r\n    }\r\n    .idtu-download-template {\r\n      margin: 10px 0 0 0;\r\n    }\r\n    .idtu-import {\r\n      margin-top: 10px;\r\n      border: 1px dashed #d9d9d9;\r\n      box-sizing: border-box;\r\n      padding: 10px;\r\n      .idtu-import-btn:hover {\r\n        opacity: 0.75;\r\n      }\r\n      .idtu-import-tip {\r\n        text-align: left;\r\n        font-size: 14px;\r\n        font-weight: bold;\r\n      }\r\n      .idtu-importFile-tip{\r\n        text-align: left;\r\n        margin-top: 0;\r\n        font-size: 14px;\r\n        font-weight: bold;\r\n        background: transparent;\r\n        color: #3b9afb;\r\n        line-height: 20px;\r\n        padding: 5px 0px;\r\n      }\r\n    }\r\n    .idtu-import-btn {\r\n      margin: 20px 0 0 0;\r\n    }\r\n    .vxe-form--item .vxe-form--item-inner .vxe-form--item-content{\r\n      display:flex;\r\n      .vxe-input.size--medium {\r\n        flex:1;\r\n      }\r\n      .fgx{\r\n        line-height: 32px;\r\n        padding: 0 10px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</style>\r\n"]}]}