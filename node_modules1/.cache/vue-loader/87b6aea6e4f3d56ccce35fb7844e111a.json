{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\InvoiceTable\\InvoiceTable.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\InvoiceTable\\InvoiceTable.vue","mtime":1694505521442},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmludm9pY3sNCiAgZGlzcGxheTogZ3JpZDsNCiAgd2lkdGg6IDEwMCU7DQogIGdyaWQtdGVtcGxhdGUtY29sdW1uczogNGZyIDkyZnIgNGZyOw0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAvKuWPkeelqOihqOagvOagt+W8jyovDQogIC5pbnZvaWMtdGFibGV7DQogICAgZGlzcGxheTogZ3JpZDsNCiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgxMCwxZnIpOw0KICAgIGdyaWQtYXV0by1yb3dzOiA1OHB4Ow0KICAgIGJvcmRlcjogMXB4IHNvbGlkICMwYzlmZTM7DQogICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICMwYzlmZTM7DQogICAgYm9yZGVyLWxlZnQ6IDJweCBzb2xpZCAjMGM5ZmUzOw0KICAgIHdpZHRoOiAxMDAlOw0KICB9DQogIC5pbnZvaWMtdGFibGUtaXRlbXsNCiAgICBib3JkZXItcmlnaHQ6IDAuNXB4IHNvbGlkICMwYzlmZTM7DQogICAgYm9yZGVyLXRvcDogMC41cHggc29saWQgIzBjOWZlMzsNCiAgICBjb2xvcjogIzBjOWZlMzsNCiAgICAudmFsaWQtdGlwew0KICAgICAgY29sb3I6IHJlZDsNCiAgICAgIGZvbnQtc2l6ZTogOHB4Ow0KICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7DQogICAgfQ0KICB9DQogIC8vIOagh+mimA0KICAuaW52b2ljLXRhYmxlLWl0ZW0tdGV4dHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgbGluZS1oZWlnaHQ6IDUwcHg7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIG92ZXJmbG93OmhpZGRlbjsNCiAgfQ0KICAvL+i3qOi2iuWkmuihjOeahOagh+mimA0KICAuaW52b2ljLXRhYmxlLWl0ZW0tbXVsdGlwbGUtdGV4dHsNCiAgICB3aWR0aDogMTAwJTsNCiAgICBoZWlnaHQ6IDEwMCU7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIGxldHRlci1zcGFjaW5nOiA1cHg7DQogICAgd2lkdGg6IDYwJTsNCiAgICB3cml0aW5nLW1vZGU6IHRiLXJsOw0KICB9DQogIC8v6L6T5YWl5qGGDQogIC5pbnZvaWMtdGFibGUtaXRlbS1pbnB1dHsNCiAgICB3aWR0aDogY2FsYygxMDAlIC0gMTZweCk7DQogICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAxNnB4KTsNCiAgICBwYWRkaW5nOiAxMHB4Ow0KICAgIC52eGUtaW5wdXQgew0KICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgaGVpZ2h0OiAzOHB4Ow0KICAgICAgd2lkdGg6IDEwMCU7DQogICAgfQ0KICAgIC52eGUtaW5wdXQtLWlubmVyW2Rpc2FibGVkXSB7DQogICAgICBjb2xvcjogIzAwMDsNCiAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7DQogICAgfQ0KICB9DQogIC5ib3JkZXJDaXJjbGV7DQogICAgd2lkdGg6IDE2cHg7DQogICAgaGVpZ2h0OiAxNnB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjNmOGZmOw0KICAgIG1hcmdpbi1ib3R0b206IDIzcHg7DQogIH0NCiAgLnZvdUxEaXYtcmlnaHQgLmJvcmRlckNpcmNsZXsNCiAgbWFyZ2luLWxlZnQ6IGNhbGMoMTAwJSAtIDE0cHgpOw0KICB9DQogIC5pbnZvaWMtdGFibGUtaXRlbS10cmVlSW5wdXR7DQogICAgd2lkdGg6IGNhbGMoMTAwJSAtIDE2cHgpOw0KICAgIHBhZGRpbmc6OHB4DQogIH0NCiAgLyoqDQogICBzZWxlY3TmoYbnmoTmoLflvI8NCiAgKi8NCiAgLmludm9pYy10YWJsZS1pdGVtLXNlbGVjdHsNCiAgICB3aWR0aDogY2FsYygxMDAlIC0gMTZweCk7DQogICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSAxNnB4KTsNCiAgICBwYWRkaW5nOiAxMHB4Ow0KICAgIC52eGUtc2VsZWN0ew0KICAgICAgd2lkdGg6IDEwMCU7DQogICAgICBoZWlnaHQ6IDM4cHg7DQogICAgfQ0KICAgIC52eGUtaW5wdXQgew0KICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgaGVpZ2h0OiAzOHB4Ow0KICAgICAgd2lkdGg6IDEwMCU7DQogICAgfQ0KDQogIH0NCn0NCg0K"},{"version":3,"sources":["InvoiceTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"InvoiceTable.vue","sourceRoot":"src/components/InvoiceTable","sourcesContent":["<template>\r\n  <div>\r\n    <el-card\r\n      shadow=\"always\"\r\n      style=\"padding:20px 0\"\r\n    >\r\n      <div class=\"invoic\">\r\n        <!-- 左侧发票装饰 -->\r\n        <div class=\"vouLDiv-left\">\r\n          <div class=\"borderCircle\"></div>\r\n          <div class=\"borderCircle\"></div>\r\n          <div class=\"borderCircle\"></div>\r\n          <div class=\"borderCircle\"></div>\r\n          <div class=\"borderCircle\"></div>\r\n          <div class=\"borderCircle\"></div>\r\n          <div class=\"borderCircle\"></div>\r\n        </div>\r\n        <!-- 发票区 -->\r\n        <div v-if=\"reFresh\" :key=\"index\" class=\"invoic-table\">\r\n          <div v-for=\"item in itemConfig\" :key=\"item.name\" class=\"invoic-table-item\" :style=\"{ gridColumnStart: 'span ' + item.col,gridRowStart: 'span ' + item.row }\">\r\n            <!-- 遍历渲染组件 -->\r\n            <div v-if=\"item.type === 'text'\" :class=\"item.row > 1 ? 'invoic-table-item-multiple-text' : 'invoic-table-item-text'\">\r\n              <span v-if=\"item.required === true\" style=\"color:red;\">*</span>\r\n              {{ item.name }}\r\n            </div>\r\n            <div v-else-if=\"item.type === 'input'\" :id=\"item.model\" class=\"invoic-table-item-input\">\r\n              <vxe-input\r\n                v-model=\"dataList[item.model]\"\r\n                :placeholder=\"item.placeholder\"\r\n                :disabled=\"item.disabled\"\r\n                @suffix-click=\"appendMethod(item.appendMethod)\"\r\n                @change=\"clearValidate\"\r\n                @input=\"itemChange($event,item)\"\r\n              >\r\n                <template v-if=\"item.append\" v-slot:suffix>\r\n                  <i><img src=\"~@/assets/img/basic/person.svg\"></i>\r\n                </template>\r\n              </vxe-input>\r\n              <div class=\"valid-tip\"></div>\r\n            </div>\r\n            <!-- 若果是金额类型,则只允许输入数字 -->\r\n            <div v-else-if=\"item.type === 'money'\" :id=\"item.model\" class=\"invoic-table-item-input\">\r\n              <vxe-input\r\n                v-model=\"dataList[item.model]\"\r\n                align=\"right\"\r\n                :disabled=\"item.disabled\"\r\n                @blur=\"changeFormat(item)\"\r\n                @focus=\"clearFormat(item)\"\r\n                @input=\"itemChange($event,item)\"\r\n              />\r\n              <div class=\"valid-tip\"></div>\r\n            </div>\r\n            <div v-else-if=\"item.type === 'treeInput'\" :id=\"item.model\" class=\"invoic-table-item-treeInput\">\r\n              <BsTreeInput\r\n                ref=\"testTreeInput\"\r\n                v-model=\"dataList[item.model]\"\r\n                :is-server=\"true\"\r\n                :edit-config=\"item.editConfig\"\r\n                :elecode=\"item.elecode\"\r\n                :server-uri=\"item.serverUri\"\r\n                :disabled=\"item.disabled\"\r\n                :queryparams=\"item.queryparams\"\r\n                :isleaf=\"item.isleaf\"\r\n                :dropdownmethod=\"setTreeData\"\r\n                @input=\"itemChange($event,item)\"\r\n              />\r\n              <div class=\"valid-tip\"></div>\r\n            </div>\r\n            <div v-else-if=\"item.type === 'vxe-select'\" :id=\"item.model\" class=\"invoic-table-item-select\">\r\n              <vxe-select v-model=\"dataList[item.model]\" :placeholder=\"item.placeholder\" @input=\"itemChange($event,item)\">\r\n                <vxe-option\r\n                  v-for=\"option in item.options\"\r\n                  :key=\"option.value\"\r\n                  :value=\"option.value\"\r\n                  :label=\"option.label\"\r\n                />\r\n              </vxe-select>\r\n              <div class=\"valid-tip\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- 右侧发票装饰 -->\r\n        <div class=\"vouLDiv-right\">\r\n          <div class=\"borderCircle\"></div>\r\n          <div class=\"borderCircle\"></div>\r\n          <div class=\"borderCircle\"></div>\r\n          <div class=\"borderCircle\"></div>\r\n          <div class=\"borderCircle\"></div>\r\n          <div class=\"borderCircle\"></div>\r\n          <div class=\"borderCircle\"></div>\r\n        </div>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport util from '@/components/tool/util.js'\r\nimport { commonFn } from './common.js'\r\nexport default {\r\n  name: 'InvoicTable',\r\n  props: {\r\n    itemConfig: {\r\n      type: [Array, Object],\r\n      default() {\r\n        return [\r\n          {\r\n\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    dataList: {\r\n      type: [Array, Object],\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currentRequestItem: '',\r\n      itemConfigIn: [...this.itemConfig],\r\n      reFresh: true,\r\n      index: 1\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * 把金额千分位格式显示\r\n     */\r\n    changeFormat(item) {\r\n      this.dataList[item.model] = commonFn.format(Number(this.dataList[item.model]).toFixed(2))\r\n    },\r\n    setTreeData(val, e, { elementCode }) {\r\n      // 手动为treeinput的id,code,name赋值\r\n      elementCode = elementCode.toLowerCase()\r\n      let data = {}\r\n      Object.assign(data, this.dataList)\r\n      data[elementCode + '_id'] = val.id\r\n      data[elementCode + '_code'] = val.code\r\n      data[elementCode + '_name'] = val.name\r\n      this.dataList = data\r\n      this.doValidate({ field: elementCode }, false)\r\n    },\r\n    clearValidate({ value, $event }) {\r\n      let element = $event.path[2]\r\n      element.querySelector('input').style.border = '1px solid #DCDFE6'\r\n      element.querySelector('.valid-tip').style.display = 'none'\r\n    },\r\n    // 校验添加提示信息\r\n    doValidate(item, validates) {\r\n      let element = document.querySelector('#' + item.field)\r\n      if (validates === true) {\r\n        element.querySelector('input').style.border = '1px red solid'\r\n        element.querySelector('.valid-tip').style.display = 'block'\r\n        element.querySelector('.valid-tip').innerHTML = item.message || '请输入' + item.name\r\n      } else {\r\n        element.querySelector('input').style.border = '1px solid #DCDFE6'\r\n        element.querySelector('.valid-tip').style.display = 'none'\r\n      }\r\n    },\r\n    /**\r\n     * 当用户输入时\r\n     * 对单个Item进行校验\r\n     */\r\n    validateItem(item) {\r\n      if (item.type === 'text' && item.required) {\r\n        if (!self.dataList[item.field] || (self.dataList[item.field] + '').includes('initId')) {\r\n          this.doValidate(item, true)\r\n        } else {\r\n          this.doValidate(item, false)\r\n        }\r\n      }\r\n    },\r\n    // 提交时 验证非空\r\n    validate() {\r\n      // 校验非空\r\n      var self = this\r\n      var validates = false\r\n      this.itemConfig.map(item => {\r\n        if (item.type === 'text' && item.required) {\r\n          if (!self.dataList[item.field] || (self.dataList[item.field] + '').includes('initId')) {\r\n            validates = true\r\n            this.doValidate(item, true)\r\n          } else {\r\n            this.doValidate(item, false)\r\n          }\r\n        }\r\n      })\r\n      if (!validates) {\r\n        this.itemConfig.map(item => {\r\n          // 千分位转数字\r\n          if (item.type === 'money') {\r\n            this.dataList[item.model] = commonFn.thousandToNum(this.dataList[item.model])\r\n          }\r\n        })\r\n      }\r\n      return validates\r\n    },\r\n    appendMethod(code) {\r\n      this.$emit('appendMethod', code)\r\n    },\r\n    refresh() {\r\n      this.index++\r\n    },\r\n    // 转换金额大小写\r\n    transferUpper() {\r\n      this.itemConfig.map(item => {\r\n        if (item.type === 'money') {\r\n          this.dataList[item.model + '_big'] = util.transformFn.digitUppercase(this.dataList[item.model])\r\n        }\r\n      })\r\n    },\r\n    /**\r\n     * 当数据发生改变时触发事件\r\n     * Todo\r\n     * 先把非空校验设为空 以后有正则校验时再改为重新校验\r\n     * 再触发itenchange事件  供业务处理数据\r\n     */\r\n    itemChange($event, item) {\r\n      this.validateItem(item)\r\n      this.$emit('itemChange', item.model, this.dataList[item.model], this.dataList, this.itemConfig)\r\n    },\r\n    /**\r\n     * 清除千分位模式\r\n     */\r\n    clearFormat(item) {\r\n      if (this.dataList[item.model] !== '') {\r\n        this.dataList[item.model] = commonFn.thousandToNum(this.dataList[item.model])\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    dataList: {\r\n      handler(newValue, oldValue) {\r\n        this.$emit('update:dataList', this.dataList)\r\n        this.transferUpper()\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.invoic{\r\n  display: grid;\r\n  width: 100%;\r\n  grid-template-columns: 4fr 92fr 4fr;\r\n  align-items: center;\r\n  /*发票表格样式*/\r\n  .invoic-table{\r\n    display: grid;\r\n    grid-template-columns: repeat(10,1fr);\r\n    grid-auto-rows: 58px;\r\n    border: 1px solid #0c9fe3;\r\n    border-bottom: 2px solid #0c9fe3;\r\n    border-left: 2px solid #0c9fe3;\r\n    width: 100%;\r\n  }\r\n  .invoic-table-item{\r\n    border-right: 0.5px solid #0c9fe3;\r\n    border-top: 0.5px solid #0c9fe3;\r\n    color: #0c9fe3;\r\n    .valid-tip{\r\n      color: red;\r\n      font-size: 8px;\r\n      text-align: right;\r\n    }\r\n  }\r\n  // 标题\r\n  .invoic-table-item-text{\r\n    width: 100%;\r\n    height: 100%;\r\n    line-height: 50px;\r\n    text-align: center;\r\n    overflow:hidden;\r\n  }\r\n  //跨越多行的标题\r\n  .invoic-table-item-multiple-text{\r\n    width: 100%;\r\n    height: 100%;\r\n    text-align: center;\r\n    letter-spacing: 5px;\r\n    width: 60%;\r\n    writing-mode: tb-rl;\r\n  }\r\n  //输入框\r\n  .invoic-table-item-input{\r\n    width: calc(100% - 16px);\r\n    height: calc(100% - 16px);\r\n    padding: 10px;\r\n    .vxe-input {\r\n      font-size: 14px;\r\n      height: 38px;\r\n      width: 100%;\r\n    }\r\n    .vxe-input--inner[disabled] {\r\n      color: #000;\r\n      font-weight: 700;\r\n    }\r\n  }\r\n  .borderCircle{\r\n    width: 16px;\r\n    height: 16px;\r\n    border-radius: 50%;\r\n    background-color: #f3f8ff;\r\n    margin-bottom: 23px;\r\n  }\r\n  .vouLDiv-right .borderCircle{\r\n  margin-left: calc(100% - 14px);\r\n  }\r\n  .invoic-table-item-treeInput{\r\n    width: calc(100% - 16px);\r\n    padding:8px\r\n  }\r\n  /**\r\n   select框的样式\r\n  */\r\n  .invoic-table-item-select{\r\n    width: calc(100% - 16px);\r\n    height: calc(100% - 16px);\r\n    padding: 10px;\r\n    .vxe-select{\r\n      width: 100%;\r\n      height: 38px;\r\n    }\r\n    .vxe-input {\r\n      font-size: 14px;\r\n      height: 38px;\r\n      width: 100%;\r\n    }\r\n\r\n  }\r\n}\r\n\r\n</style>\r\n"]}]}