{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\directFund\\indexFindNew\\indexFindNew.vue?vue&type=style&index=0&id=98dab18c&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\directFund\\indexFindNew\\indexFindNew.vue","mtime":1694505522417},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5nb3ZfYnVkZ2V0X2FkanVzdG1lbnRfcmVxdWVzdCB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQp9DQoNCg=="},{"version":3,"sources":["indexFindNew.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4VA;AACA;AACA;AACA","file":"indexFindNew.vue","sourceRoot":"src/views/main/directFund/indexFindNew","sourcesContent":["<template>\r\n  <div class=\"gov_budget_adjustment_request\">\r\n    <BsMainFormListLayout :left-visible.sync=\"leftVisible\">\r\n      <template v-slot:topTabPane>\r\n        <BsTabPanel\r\n          :tab-status-btn-config=\"tabStatusBtnConfig\"\r\n          :is-hide-query=\"true\"\r\n          :is-open=\"true\"\r\n          @onQueryConditionsClick=\"onQueryConditionsClick\"\r\n          @tabClick=\"onTabPaneltabClick\"\r\n          @btnClick=\"onTabPanelBtnClick\"\r\n        />\r\n      </template>\r\n      <template v-slot:query>\r\n        <div v-show=\"queryFormProps.visible\" class=\"main-query\">\r\n          <!-- 高级查询 -->\r\n          <BsQuery\r\n            ref=\"queryFormRef\"\r\n            :query-form-item-config=\"queryFormProps.queryFormItemConfig\"\r\n            :query-form-data=\"queryFormProps.queryFormData\"\r\n            @onSearchClick=\"onSearchClick\"\r\n            @onSearchResetClick=\"onSearchResetClick\"\r\n          />\r\n        </div>\r\n      </template>\r\n      <template v-slot:mainTree></template>\r\n      <template v-slot:mainForm>\r\n        <BsTable\r\n          ref=\"bsTableRef\"\r\n          :table-config=\"tableProps.tableConfig\"\r\n          :table-columns-config=\"tableProps.tableColumnsConfig\"\r\n          :table-data=\"tableProps.tableData\"\r\n          :toolbar-config=\"tableProps.toolbarConfig\"\r\n          :pager-config=\"tableProps.pagerConfig\"\r\n          :loading=\"tableProps.loading\"\r\n          :default-money-unit=\"tableProps.defaultMoneyUnit\"\r\n          :edit-rules=\"tableProps.editRules\"\r\n          :footer-config=\"tableProps.footerConfig\"\r\n          @ajaxData=\"pageChangeHandle\"\r\n          @onToolbarBtnClick=\"onToolbarBtnClick\"\r\n          @cellClick=\"cellClick\"\r\n        >\r\n          <template v-slot:toolbarSlots>\r\n            <div class=\"table-toolbar-left\">\r\n              <div class=\"table-toolbar-left-title\">\r\n                <span class=\"fn-inline\">{{ tableProps.title }}</span>\r\n                <i class=\"fn-inline\"></i>\r\n              </div>\r\n            </div>\r\n          </template>\r\n        </BsTable>\r\n      </template>\r\n    </BsMainFormListLayout>\r\n    <SearchModal\r\n      v-if=\"modalVisiableState\"\r\n      :dialog-visible.sync=\"modalVisiableState\"\r\n      :current-value=\"currentRow\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mix from '@//mixin/commonMixin'\r\nimport SearchModal from './components/SearchModal.vue'\r\n\r\nexport default {\r\n  name: 'IndexFindNew',\r\n  components: { SearchModal },\r\n  mixins: [mix],\r\n  data() {\r\n    return {\r\n      currentRow: {},\r\n      modalVisiableState: false,\r\n      tabStatusBtnConfig: {\r\n        buttons: [\r\n          {\r\n            code: '0',\r\n            label: '指标列表',\r\n            type: 'button',\r\n            iconName: 'base-zhibaio.png',\r\n            iconNameActive: 'base-zhibaio-active.png'\r\n          }\r\n        ],\r\n        buttonsInfo: {\r\n          '0': [\r\n            { code: 'toolbar-search',\r\n              label: '查看来源去向',\r\n              status: 'primary' }\r\n          ]\r\n        },\r\n        curButton: {\r\n          code: '0',\r\n          label: '指标列表',\r\n          type: 'button',\r\n          iconName: 'base-zhibaio.png',\r\n          iconNameActive: 'base-zhibaio-active.png'\r\n        }\r\n      },\r\n      queryFormProps: { // 高级查询表单配置参数\r\n        visible: false,\r\n        queryFormItemConfig: [],\r\n        queryFormData: {}\r\n      },\r\n      leftVisible: false,\r\n      tableProps: {\r\n        tableConfig: {\r\n          globalConfig: { // 全局配置\r\n            checkType: 'checkbox', // 'checkbox'复选框\r\n            seq: true // 序号列\r\n          }\r\n        },\r\n        tableColumnsConfig: [], // 表格列配置\r\n        tableData: [], // 表格数据\r\n        toolbarConfig: { // 工具栏配置\r\n          calculator: false,\r\n          disabledMoneyConversion: true,\r\n          moneyConversion: true,\r\n          refresh: true,\r\n          buttons: [\r\n            // { code: 'test', name: 'test', callback: () => {} }\r\n          ],\r\n          slots: {\r\n            tools: 'toolbarTools', // tools使用toolbarTools插槽\r\n            buttons: 'toolbarSlots' // buttons使用toolbarSlots插槽 // 一定要有这个， v-slot:toolbarSlots才能自定义否则会被原有的buttons覆盖\r\n          }\r\n        },\r\n        pagerConfig: { // 分页配置\r\n          total: 0,\r\n          pageSize: 20,\r\n          currentPage: 1\r\n        },\r\n        loading: false, // 加载\r\n        defaultMoneyUnit: 1, // 金额单位\r\n        editRules: {}, // 校验规则\r\n        footerConfig: { // 表尾配置\r\n          combinedType: ['subTotal', 'total', 'totalAll', 'switchTotal'],\r\n          showFooter: true\r\n        },\r\n        title: '中央来源资金分配情况表'\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n  },\r\n  created() {\r\n    this.initPageConfig()\r\n  },\r\n  methods: {\r\n    onSaveBack() {\r\n      this.closeDialog()\r\n      this.doRefresh()\r\n    },\r\n    onQueryConditionsClick() {\r\n      console.log('onQueryConditionsClick')\r\n    },\r\n    onTabPaneltabClick(tab) {\r\n    },\r\n    // 页签右侧按钮点击事件\r\n    onTabPanelBtnClick(obj) {\r\n      switch (obj.code) {\r\n        case 'toolbar-search': // 查看来源去向\r\n          this.doSearch()\r\n          break\r\n      }\r\n    },\r\n    cellClick(obj, context, from) {\r\n      this.canEdit = false\r\n      if (obj.column.property === 'adjBatchNo') {\r\n        if (Number(obj.row.busiTypeCode) >= 20) {\r\n          this.getDetailReduce(obj.row, 'detail')\r\n        } else if (Number(obj.row.busiTypeCode) >= 17) {\r\n          this.getDetailAdd(obj.row, 'detail')\r\n        }\r\n      }\r\n    },\r\n    doSearch() {\r\n      const datas = this.$refs.bsTableRef.getSelectionData()\r\n      if (datas.length !== 1) {\r\n        this.$XModal.message({ status: 'warning', message: '请勾选一条数据进行操作!' })\r\n        return\r\n      }\r\n      this.currentRow = datas[0]\r\n      this.modalVisiableState = true\r\n    },\r\n    async getDetailReduce(data, type = 'edit') {\r\n      const param = {\r\n        adjBatchNo: data.adjBatchNo,\r\n        busiTypeCode: data.busiTypeCode\r\n      }\r\n      await this.handleHttpMethod(this.$http.post('fbAdjustComponent/bgt/adjust/gov/queryReduceDetail', param), true, '查询中...请稍后').then(res => {\r\n        if (res) {\r\n          this.editData = res.data\r\n          this.editData.isArrangeRegulatoryFund = data.isArrangeRegulatoryFund\r\n          this.modalConfigInfo.title = type === 'detail' ? '追减详情' : '修改追减'\r\n          this.modalConfigInfo.currentComponent = 'ReduceCom'\r\n          this.modalConfigInfo.visible = true\r\n        }\r\n      })\r\n    },\r\n\r\n    onSearchClick() {\r\n      console.log('onSearchClick')\r\n    },\r\n    onSearchResetClick() {\r\n      console.log('onSearchResetClick')\r\n    },\r\n    closeDialog() {\r\n\r\n    },\r\n    pageChangeHandle({ currentPage, pageSize }) { // 表格分页点击\r\n      this.tableProps.pagerConfig.currentPage = currentPage\r\n      this.tableProps.pagerConfig.pageSize = pageSize\r\n      this.doRefresh()\r\n    },\r\n    onToolbarBtnClick({ context, table, code }) {\r\n      switch (code) {\r\n        // 刷新\r\n        case 'refresh':\r\n          this.doRefresh()\r\n          break\r\n      }\r\n    },\r\n    // 刷新表格\r\n    doRefresh() { // 这个方法有被ModifyDialog组件通过$parent.doRefresh()来调用\r\n      this.getTableData()\r\n    },\r\n    async initPageConfig() {\r\n      this.setTableColumns()\r\n      this.getTableData()\r\n    },\r\n    setTableColumns() {\r\n      this.tableProps.tableColumnsConfig = [\r\n        {\r\n          field: 'cznsjg',\r\n          sortable: true,\r\n          title: '财政内设机构'\r\n        },\r\n        // {\r\n        //   field: 'bm',\r\n        //   sortable: true,\r\n        //   title: '部门'\r\n        // },\r\n        {\r\n          field: 'trackProName',\r\n          sortable: true,\r\n          title: '专项资金'\r\n        },\r\n        {\r\n          field: 'zcgnfl',\r\n          sortable: true,\r\n          title: '支出功能分类科目'\r\n        },\r\n        {\r\n          field: 'ysly',\r\n          title: '预算来源',\r\n          sortable: true,\r\n          visible: false\r\n        },\r\n        {\r\n          field: 'zjxz',\r\n          sortable: true,\r\n          title: '资金性质'\r\n        },\r\n        {\r\n          field: 'zwbs',\r\n          title: '债务标识',\r\n          sortable: true,\r\n          visible: false\r\n        },\r\n        {\r\n          field: 'sjwh',\r\n          sortable: true,\r\n          title: '上级文号'\r\n        },\r\n        // {\r\n        //   field: 'sjzx',\r\n        //   sortable: true,\r\n        //   title: '上级专项'\r\n        // },\r\n        {\r\n          field: 'amount',\r\n          title: '下达金额',\r\n          align: 'right',\r\n          sortable: true,\r\n          cellRender: {\r\n            name: '$vxeMoney'\r\n          },\r\n          combinedType: ['average', 'subTotal', 'total', 'totalAll'],\r\n          sort: true\r\n        },\r\n        {\r\n          field: 'fpAmount',\r\n          title: '分配金额',\r\n          align: 'right',\r\n          sortable: true,\r\n          cellRender: {\r\n            name: '$vxeMoney'\r\n          },\r\n          combinedType: ['average', 'subTotal', 'total', 'totalAll'],\r\n          sort: true\r\n        },\r\n        {\r\n          field: 'fpRate',\r\n          title: '分配进度',\r\n          align: 'right',\r\n          sortable: true,\r\n          formula: '({amount}-0==0)?0:(({fpAmount})/{amount}*100)',\r\n          cellRender: {\r\n            name: '$vxeRatio'\r\n          }\r\n        },\r\n        {\r\n          field: 'sfzd',\r\n          sortable: true,\r\n          title: '是否直达资金'\r\n        },\r\n        {\r\n          field: 'toctrlId',\r\n          sortable: true,\r\n          visible: false\r\n        }\r\n      ]\r\n    },\r\n    // 获取表格数据\r\n    async getTableData() {\r\n      this.tableProps.loading = true // 加载显示\r\n      const { currentPage, pageSize } = this.tableProps.pagerConfig\r\n      const params = {\r\n        current: currentPage, // 分页-当前页号\r\n        size: pageSize, // 分页-规模\r\n        fiscalYear: this.$store.state.userInfo.year,\r\n        reportCode: 'queryHome'\r\n      }\r\n      await this.$http.post('dfr-monitor-service/dfr/bgtInfoQuery/queryHomePage', params).then((res) => {\r\n        if (res.code === '000000' && res.data) {\r\n          this.tableProps.tableData = res.data.results\r\n          this.tableProps.pagerConfig.total = res.data.totalCount\r\n        } else {\r\n          this.$message(res.message)\r\n        }\r\n        this.tableProps.loading = false\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n.gov_budget_adjustment_request {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n</style>\r\n"]}]}