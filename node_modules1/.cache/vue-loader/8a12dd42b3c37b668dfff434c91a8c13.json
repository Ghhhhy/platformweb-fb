{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\fundMonitoring\\dataExtraction\\children\\addDialog.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\fundMonitoring\\dataExtraction\\children\\addDialog.vue","mtime":1694505522653},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\css-loader\\dist\\cjs.js","mtime":1696752946978},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5wYXlWb3VjaGVySW5wdXQgew0KICBtYXJnaW46IDE1cHg7DQogIC5lbC1jYXJkIHsNCiAgICBtYXJnaW4tdG9wOiAwDQogIH0NCn0NCi52eGUtbW9kYWwtLXdyYXBwZXIgLnZ4ZS1tb2RhbC0tYm94IHsNCiAgei1pbmRleDogMDsNCn0NCiNiaWdib3ggew0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsNCiAgei1pbmRleDogMTA7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAwOw0KICBsZWZ0OiAwOw0KICByaWdodDogMDsNCiAgYm90dG9tOiAwOw0KICBvcGFjaXR5OiAuMzsNCn0NCi5lbC1yb3ctaXRlbSAuZm9udC1zZXQtc21hbGwgLmhsaW5lew0KICB3aWR0aDo3MnB4Ow0KfQ0KLmNvbnRhaW5lcnsNCiAgcGFkZGluZzogNXB4IDEwcHggMjBweDsNCiAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIC5oZWFkLXRpdGxlew0KICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICBkaXNwbGF5OiAtd2Via2l0LWJveDsNCiAgICBkaXNwbGF5OiAtbXMtZmxleGJveDsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIC1tcy1mbGV4LXdyYXA6IG5vd3JhcDsNCiAgICBmbGV4LXdyYXA6IG5vd3JhcDsNCiAgICAtd2Via2l0LWJveC1hbGlnbjogY2VudGVyOw0KICAgIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBmb250LXNpemU6IDE4cHg7DQogICAgZm9udC13ZWlnaHQ6IGJvbGRlcjsNCiAgICBsaW5lLWhlaWdodDogNTBweDsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VmZWZlZjsNCiAgICBjb2xvcjogIzE4OTBmZjsNCiAgICBzcGFuOiB7DQogICAgICB3aWR0aDogMTUwcHg7DQogICAgICBoZWlnaHQ6IDMwcHg7DQogICAgICBsaW5lLWhlaWdodDogMzBweDsNCiAgICAgIGZvbnQtc2l6ZTogMThweDsNCiAgICB9DQogICAgLnRpdGxlMXsNCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgIGxlZnQ6IDA7DQogICAgICByaWdodDogMDsNCiAgICAgIG1hcmdpbjogYXV0bzsNCiAgICAgIC5mbi1pbmxpbmV7DQogICAgICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICAgIH0NCiAgICB9DQogICAgLnRpdGxlMnsNCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgIHJpZ2h0OiAyMHB4Ow0KICAgIH0NCiAgfQ0KICAuaGVhZC10aXRsZTo6YmVmb3JlIHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgY29udGVudDogIiAiOw0KICAgIGxlZnQ6IC0xMHB4Ow0KICAgIHJpZ2h0OiAwOw0KICAgIHRvcDogMDsNCiAgICB3aWR0aDogM3B4Ow0KICAgIGhlaWdodDogMzBweDsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTg5MGZmOw0KICB9DQp9DQo="},{"version":3,"sources":["addDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addDialog.vue","sourceRoot":"src/views/main/fundMonitoring/dataExtraction/children","sourcesContent":["<template>\r\n  <vxe-modal\r\n    v-model=\"dialogVisible\"\r\n    :title=\"title\"\r\n    width=\"96%\"\r\n    height=\"90%\"\r\n    :show-footer=\"true\"\r\n    @close=\"dialogClose\"\r\n  >\r\n    <BsTable\r\n      ref=\"bsTableRef\"\r\n      :footer-config=\"tableFooterConfig\"\r\n      :table-columns-config=\"addFormItemsConfig\"\r\n      :table-data=\"tableData\"\r\n      :table-config=\"tableConfig\"\r\n      :toolbar-config=\"tableToolbarConfig\"\r\n      :pager-config=\"pagerConfig\"\r\n      :expand-config=\"{\r\n        showIcon: true,\r\n        accordion: true,\r\n        lazy: true,\r\n        toggleMethod: toggleContentMethod,\r\n        loadMethod: loadContentMethod,\r\n        visibleMethod: visibleContentMethod,\r\n      }\"\r\n      @onToolbarBtnClick=\"onToolbarBtnClick\"\r\n      @cellClick=\"onCellClick\"\r\n      @ajaxData=\"ajaxTableData\"\r\n    />\r\n    <div slot=\"footer\" class=\"vxeModalUnique\" style=\"height: 80px;\">\r\n      <el-divider style=\"color:#E7EBF0\" />\r\n      <el-row type=\"flex\" justify=\"space-around\" style=\"margin-bottom:14px;margin-top:0px;\">\r\n        <el-col :span=\"8\" style=\"margin-top:10px;\" />\r\n        <el-col :span=\"4\" />\r\n        <el-col :span=\"12\" style=\"margin-top:0px;float:right;\">\r\n          <div>\r\n            <el-button @click=\"dialogClose\">取消</el-button>\r\n            <el-button type=\"primary\" style=\"margin-right:0px;\" :loading=\"showLoading\" @click=\"extraction\">抽取</el-button>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n  </vxe-modal>\r\n</template>\r\n<script>\r\n// import { proconf } from '../PoliciesAndRegulationsManagement.js'\r\nimport HttpModule from '@/api/frame/main/fundMonitoring/dataExtraction.js'\r\nexport default {\r\n  name: 'AddDialog',\r\n  components: {},\r\n  computed: {\r\n    // curNavModule() {\r\n    //   return this.$store.state.curNavModule\r\n    // }\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      tableFooterConfig: {\r\n        showFooter: false\r\n      },\r\n      tableConfig: {\r\n        // globalConfig: {\r\n        //   // 全局配置\r\n        //   seq: true // 序号列\r\n        // }\r\n      },\r\n      addFormItemsConfig: [\r\n        {\r\n          'title': '表名',\r\n          'field': 'formCode',\r\n          'align': 'center',\r\n          'sortable': 'true'\r\n        },\r\n        {\r\n          title: '主键字段',\r\n          field: 'primaryCode',\r\n          sortable: false,\r\n          align: 'center'\r\n        },\r\n        {\r\n          'title': '表描述',\r\n          'field': 'formName',\r\n          'align': 'center',\r\n          'sortable': 'true'\r\n        }\r\n      ],\r\n      table1: {\r\n        formCode: '',\r\n        primaryCode: '',\r\n        formName: ''\r\n      },\r\n      tables: [],\r\n      formData: [],\r\n      tableData: [],\r\n      tableToolbarConfig: {\r\n        // table工具栏配置\r\n        disabledMoneyConversion: false,\r\n        moneyConversion: false, // 是否有金额转换\r\n        search: false, // 是否有search\r\n        import: false, // 导入\r\n        export: false, // 导出\r\n        print: false, // 打印\r\n        zoom: false, // 缩放\r\n        custom: false, // 选配展示列\r\n        slots: {\r\n          tools: 'toolbarTools',\r\n          buttons: 'toolbarSlots'\r\n        }\r\n      },\r\n      pagerConfig: {\r\n        total: 0,\r\n        currentPage: 1,\r\n        pageSize: 20\r\n      },\r\n      dialogVisible: true,\r\n      showLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    // 表格单元行单击\r\n    onCellClick(obj, context, e) {\r\n      let key = obj\r\n      console.log(key)\r\n      if (key.column.type === 'checkbox') {\r\n        this.ruleAccord = key.row.ruleAccord\r\n      }\r\n    },\r\n    toggleContentMethod({ expanded, column, columnIndex, row, rowIndex }) {\r\n      this.$refs.bsTableRef.tableOptionFn().clearRowExpandLoaded(row)\r\n      return true\r\n    },\r\n    loadContentMethod({ row, rowIndex, $rowIndex }) {\r\n      return new Promise((resolve) => {\r\n        setTimeout(() => {\r\n          resolve()\r\n        }, 500)\r\n      })\r\n    },\r\n    onToolbarBtnClick({ context, table, code }) {\r\n      switch (code) {\r\n        // 刷新\r\n        case 'refresh':\r\n          this.refresh()\r\n          break\r\n      }\r\n    },\r\n    fullExtraction(datas) {\r\n      this.showLoading = true\r\n      const tables = []\r\n      for (let i = 0; i < datas.length; i++) {\r\n        this.table1.formName = datas[i].formName\r\n        this.table1.formCode = datas[i].formCode\r\n        this.table1.primaryCode = datas[i].primaryCode\r\n        tables.push({ ...this.table1 })\r\n      }\r\n      // 这有啥用？\r\n      this.table1 = {\r\n        formCode: '',\r\n        primaryCode: '',\r\n        formName: ''\r\n      }\r\n      const param = {\r\n        tables\r\n      }\r\n      var _this = this\r\n      HttpModule.fullExtract(param)\r\n        .then(res => {\r\n          _this.showLoading = false\r\n          if (res.code === '000000') {\r\n            this.$message.success('抽取成功！')\r\n            _this.$parent.dialogVisible = false\r\n            _this.$parent.queryTableDatas()\r\n            _this.dialogVisible = false\r\n          } else {\r\n            this.$message.error(res.message)\r\n          }\r\n        })\r\n        .catch()\r\n        .finally(() => {\r\n          _this.showLoading = false\r\n        })\r\n    },\r\n    addExtraction(datas) {\r\n      this.showLoading = true\r\n      const tables = []\r\n      for (let i = 0; i < datas.length; i++) {\r\n        this.table1.formName = datas[i].formName\r\n        this.table1.formCode = datas[i].formCode\r\n        tables.push({ ...this.table1 })\r\n      }\r\n      this.table1 = {\r\n        formCode: '',\r\n        primaryCode: '',\r\n        formName: ''\r\n      }\r\n      const param = {\r\n        tables\r\n      }\r\n      var _this = this\r\n      HttpModule.addExtract(param)\r\n        .then(res => {\r\n          _this.showLoading = false\r\n          if (res.code === '000000') {\r\n            this.$message.success('抽取成功！')\r\n            _this.$parent.dialogVisible = false\r\n            _this.$parent.queryTableDatas()\r\n            _this.dialogVisible = false\r\n          } else {\r\n            this.$message.error(res.message)\r\n          }\r\n        })\r\n        .catch()\r\n        .finally(() => {\r\n          _this.showLoading = false\r\n        })\r\n    },\r\n    extraction() {\r\n      const selectionRow = this.$refs.bsTableRef.selection\r\n      // const selectionRow = this.$refs.bsTableRef.$refs.xGrid.getCheckboxRecords()\r\n      console.log(selectionRow)\r\n      if (selectionRow.length === 0) {\r\n        this.$message.warning('请选择至少一条数据进行抽取')\r\n        return\r\n      }\r\n      if (this.title === '全量抽取') {\r\n        this.fullExtraction(selectionRow)\r\n      } else {\r\n        this.addExtraction(selectionRow)\r\n      }\r\n    },\r\n    dialogClose() {\r\n      this.showLoading = false\r\n      this.$parent.dialogVisible = false\r\n      this.$parent.queryTableDatas()\r\n    },\r\n    ajaxTableData({ params, currentPage, pageSize }) {\r\n      this.pagerConfig.currentPage = currentPage\r\n      this.pagerConfig.pageSize = pageSize\r\n      this.queryTableDatas()\r\n    },\r\n    // 查询 table 数据\r\n    queryTableDatas() {\r\n      const param = {\r\n        page: this.pagerConfig.currentPage, // 页码\r\n        pageSize: this.pagerConfig.pageSize // 每页条数\r\n      }\r\n      HttpModule.getTableDatas(param).then(res => {\r\n        if (res.code === '000000') {\r\n          this.tableData = res.data.results\r\n          this.pagerConfig.total = res.data.totalCount\r\n          // this.tabStatusNumConfig['1'] = res.data.totalCount\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    },\r\n    // 修改回显\r\n    showInfo() {\r\n      this.queryTableDatas()\r\n      // this.tableData = [\r\n      //   {\r\n      //     formCode: 'ba_tr_bgt_info',\r\n      //     primaryCode: 'bgt_id',\r\n      //     formName: '直达资金分配表'\r\n      //   },\r\n      //   {\r\n      //     formCode: 'ba_bgt_info',\r\n      //     primaryCode: 'bgt_id',\r\n      //     formName: '直达资金指标信息表'\r\n      //   },\r\n      //   {\r\n      //     formCode: 'ba_tr_bgt_rec',\r\n      //     primaryCode: 'bgt_id',\r\n      //     formName: '直达资金接收表'\r\n      //   },\r\n      //   {\r\n      //     formCode: 'pay_voucher',\r\n      //     primaryCode: 'voucher_id',\r\n      //     formName: ''\r\n      //   },\r\n      //   {\r\n      //     formCode: 'budget_t_pro_adm_county',\r\n      //     primaryCode: 'ori_bgt_id',\r\n      //     formName: ''\r\n      //   }\r\n      // ]\r\n      // this.pagerConfig.total = 3\r\n    }\r\n  },\r\n  watch: {\r\n  },\r\n  created() {\r\n    // this.getSysLists()\r\n    this.showInfo()\r\n    // this.getModLists()\r\n    // this.getFunLists()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.payVoucherInput {\r\n  margin: 15px;\r\n  .el-card {\r\n    margin-top: 0\r\n  }\r\n}\r\n.vxe-modal--wrapper .vxe-modal--box {\r\n  z-index: 0;\r\n}\r\n#bigbox {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: white;\r\n  z-index: 10;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  opacity: .3;\r\n}\r\n.el-row-item .font-set-small .hline{\r\n  width:72px;\r\n}\r\n.container{\r\n  padding: 5px 10px 20px;\r\n  border-radius: 4px;\r\n  background-color: #fff;\r\n  position: relative;\r\n  .head-title{\r\n    position: relative;\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -ms-flex-wrap: nowrap;\r\n    flex-wrap: nowrap;\r\n    -webkit-box-align: center;\r\n    -ms-flex-align: center;\r\n    align-items: center;\r\n    font-size: 18px;\r\n    font-weight: bolder;\r\n    line-height: 50px;\r\n    border-bottom: 1px solid #efefef;\r\n    color: #1890ff;\r\n    span: {\r\n      width: 150px;\r\n      height: 30px;\r\n      line-height: 30px;\r\n      font-size: 18px;\r\n    }\r\n    .title1{\r\n      position: absolute;\r\n      left: 0;\r\n      right: 0;\r\n      margin: auto;\r\n      .fn-inline{\r\n        font-size: 16px;\r\n      }\r\n    }\r\n    .title2{\r\n      position: absolute;\r\n      right: 20px;\r\n    }\r\n  }\r\n  .head-title::before {\r\n    position: absolute;\r\n    content: \" \";\r\n    left: -10px;\r\n    right: 0;\r\n    top: 0;\r\n    width: 3px;\r\n    height: 30px;\r\n    background-color: #1890ff;\r\n  }\r\n}\r\n</style>\r\n"]}]}