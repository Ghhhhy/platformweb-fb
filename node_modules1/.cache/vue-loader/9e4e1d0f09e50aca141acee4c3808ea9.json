{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\manageSystem\\table\\Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\manageSystem\\table\\Main.vue","mtime":1694505522857},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVGFibGVDb25mTW9kYWwgZnJvbSAnLi90YWJsZUNvbmZNb2RhbC52dWUnDQppbXBvcnQgRm9ybUNvbmZNb2RhbCBmcm9tICcuL0Zvcm1Db25mTW9kYWwudnVlJw0KaW1wb3J0IEVudGVyaW5nRGVmYXVsdCBmcm9tICcuL2VudGVyaW5nRGVmYXVsdC52dWUnDQppbXBvcnQgZ2V0Rm9ybUNvbmZEYXRhIGZyb20gJy4vZm9ybUNvbmYuanMnDQppbXBvcnQgU3ViVGFiQ29uZmlnTW9kYWwgZnJvbSAnLi9TdWJUYWJDb25maWdNb2RhbC52dWUnDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICcnLA0KICBjb21wb25lbnRzOiB7DQogICAgVGFibGVDb25mTW9kYWwsDQogICAgRm9ybUNvbmZNb2RhbCwNCiAgICBFbnRlcmluZ0RlZmF1bHQsDQogICAgU3ViVGFiQ29uZmlnTW9kYWwNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICBhbGxQcm9wRGF0YTogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIHt9DQogICAgICB9DQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBtZW51Z3VpZHM6IFtdLA0KICAgICAgY3VyQ29uZlR5cGU6ICd0YWJsZScsDQogICAgICBsZWZ0VmlzaWJsZTogdHJ1ZSwNCiAgICAgIGxlZnRUcmVlRGF0YTogW10sDQogICAgICBjdXJTcGxpdFBhbmVMZWZ0V2lkdGg6IDIwLA0KICAgICAgaXNTaG93UXVlcnlDb25kaXRpb25zOiBmYWxzZSwNCiAgICAgIHNlcnZlclVyaTogJ21wLWItcGVybS1zZXJ2aWNlL3YxL3RhYmxlY29uZi9tZW51Z3VpZCcsDQogICAgICB0cmVlUXVlcnlwYXJhbXM6IHsNCiAgICAgICAgbWVudWd1aWQ6ICd0ZXN0XzEyMzQ1NicsDQogICAgICAgIHVzZVJpZ2h0OiBmYWxzZSwNCiAgICAgICAgYmF0Y2hubzogMiwNCiAgICAgICAgZGF0YXR5cGU6IDUsDQogICAgICAgIGVsZUNvZGU6ICdERVBCR1RFQ08nLA0KICAgICAgICBzeHNwZWNyb2xlZ3VpZDogJzYzN0I2RDVBODIzRjQ1OUFCMzEzQ0JGOTRDODc3NjVCJw0KICAgICAgfSwNCiAgICAgIHRyZWVsZWZ0VHJlZUNvbmZpZzogew0KICAgICAgICBpbnB1dFZhbDogJycNCiAgICAgIH0sDQogICAgICB0cmVlQ29uZmlnOiB7DQogICAgICAgIGN1clJhZGlvOiAnemYnLA0KICAgICAgICByYWRpb0dyb3VwOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgY29kZTogJ3pmJywNCiAgICAgICAgICAgIGxhYmVsOiAn5pS/5bqc6YOo6Zeo5qCRJw0KICAgICAgICAgIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgY29kZTogJ3h1ZXhpYW8nLA0KICAgICAgICAgICAgbGFiZWw6ICflrabmoKHmoJEnDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBjb2RlOiAnamlnb3UnLA0KICAgICAgICAgICAgbGFiZWw6ICfmnLrmnoTmoJEnDQogICAgICAgICAgfQ0KICAgICAgICBdDQogICAgICB9LA0KICAgICAgbGVmdFRyZWVDb25maWc6IHsNCiAgICAgICAgaW5wdXRWYWw6ICcnDQogICAgICB9LA0KICAgICAgcGFnZXJDb25maWc6IHsNCiAgICAgICAgY3VycmVudFBhZ2U6IDEsDQogICAgICAgIHRvdGFsOiAxMDANCiAgICAgIH0sDQogICAgICBjdXJUYWJsZUNvbmZEYXRhczogW10sDQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIGN1clRhYmxlQ29uZkRhdGFzTWFwQXJyOiBbDQogICAgICAgIC8vIHsNCiAgICAgICAgLy8gICB0YWJsZU5hbWU6ICcxJywNCiAgICAgICAgLy8gICBidXNpbmVzc1RhYmxlTmFtZTogJzEnLA0KICAgICAgICAvLyAgIHRhYmxlTm90ZTogJzEnLA0KICAgICAgICAvLyAgIG1lYXN1cmluZ1VuaXQ6IDEsDQogICAgICAgIC8vICAgdmlld09yZGVyOiAnMDAxJywNCiAgICAgICAgLy8gICBlZGl0YWJsZUJhdGNoOiAnMDAxJywNCiAgICAgICAgLy8gICB0YWJsZVR5cGU6ICcwMDEnLA0KICAgICAgICAvLyAgIG5vdGU6ICcxJywNCiAgICAgICAgLy8gICBhdXRvQnVpbHRUYWJsZXM6IGZhbHNlLA0KICAgICAgICAvLyAgIGVkaXRibGU6IHRydWUsDQogICAgICAgIC8vICAgc2hvd0NoZWNrYm94OiB0cnVlLA0KICAgICAgICAvLyAgIGNhblVzZTogdHJ1ZSwNCiAgICAgICAgLy8gICBhU2luZ2xlVGFibGU6IGZhbHNlLA0KICAgICAgICAvLyAgIGJhdGNoTW9kaWZ5OiBmYWxzZSwNCiAgICAgICAgLy8gICByb3dDb25maWc6IGZhbHNlLA0KICAgICAgICAvLyAgIG5vUmVjb3JkSXNBbGxvd2VkVG9SZXBvcnQ6IHRydWUsDQogICAgICAgIC8vICAgc3VidG90YWxSb3dzOiB0cnVlDQogICAgICAgIC8vIH0NCiAgICAgIF0sDQogICAgICBjdXJUYWJsZUNvbmZEYXRhc01hcDoge30sDQogICAgICBnbG9ibGVDb25maWdDcDogew0KICAgICAgICB0YWJsZU5hbWU6ICcnLA0KICAgICAgICBidXNpbmVzc1RhYmxlTmFtZTogJycsDQogICAgICAgIHRhYmxlTm90ZTogJycsDQogICAgICAgIG1lYXN1cmluZ1VuaXQ6ICcnLA0KICAgICAgICB2aWV3T3JkZXI6ICcnLA0KICAgICAgICBlZGl0YWJsZUJhdGNoOiAnJywNCiAgICAgICAgdGFibGVUeXBlOiAnJywNCiAgICAgICAgbm90ZTogJycsDQogICAgICAgIGF1dG9CdWlsdFRhYmxlczogZmFsc2UsDQogICAgICAgIGVkaXRibGU6IHRydWUsDQogICAgICAgIHNob3dDaGVja2JveDogdHJ1ZSwNCiAgICAgICAgY2FuVXNlOiB0cnVlLA0KICAgICAgICBhU2luZ2xlVGFibGU6IGZhbHNlLA0KICAgICAgICBiYXRjaE1vZGlmeTogZmFsc2UsDQogICAgICAgIHJvd0NvbmZpZzogZmFsc2UsDQogICAgICAgIG5vUmVjb3JkSXNBbGxvd2VkVG9SZXBvcnQ6IHRydWUsDQogICAgICAgIHN1YnRvdGFsUm93czogdHJ1ZQ0KICAgICAgfSwNCiAgICAgIHRvb2xiYXJDb25maWc6IHsNCiAgICAgICAgZGlzYWJsZWRNb25leUNvbnZlcnNpb246IHRydWUsDQogICAgICAgIC4uLmdldEZvcm1Db25mRGF0YSgndGFibGVJbmZvckNvbmYnLCAndG9vbGJhckNvbmZpZycpDQogICAgICB9LA0KICAgICAgdGFibGVDb25maWc6IGdldEZvcm1Db25mRGF0YSgndGFibGVJbmZvckNvbmYnLCAndGFibGVDb25maWcnKSwNCiAgICAgIHRhYmxlQ29sdW1uc0NvbmZpZzogZ2V0Rm9ybUNvbmZEYXRhKA0KICAgICAgICAndGFibGVJbmZvckNvbmYnLA0KICAgICAgICAndGFibGVDb2x1bW5zQ29uZmlnJw0KICAgICAgKSwNCiAgICAgIHRhYmxlQ29uZk1vZGFsVmlzaWJsZTogZmFsc2UsDQogICAgICBmb3JtQ29uZk1vZGFsVmlzaWJsZTogZmFsc2UsDQogICAgICBlbnRlcmluZ0RlZmF1bHRWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGN1ckxlZnRUcmVlQ2xpY2tOb2RlOiB7fSwNCiAgICAgIGVudGVyaW5nRGVmYXVsdEZsYWc6IGZhbHNlLA0KICAgICAgU3ViVGFiQ29uZmlnVmlzaWJsZTogZmFsc2UNCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgY3VyTmF2TW9kdWxlKCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmN1ck5hdk1vZHVsZQ0KICAgIH0sDQogICAgdXNlckluZm8oKSB7DQogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBkZWVwQ29weShvYmopIHsNCiAgICAgIC8vIOa3seaLt+i0nemAmueUqOaWueazlQ0KICAgICAgbGV0IG1lID0gdGhpcw0KICAgICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkgcmV0dXJuIG9iag0KICAgICAgbGV0IG5ld09iaiA9IG9iaiBpbnN0YW5jZW9mIEFycmF5ID8gW10gOiB7fQ0KICAgICAgZm9yIChsZXQga2V5IGluIG9iaikgew0KICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHsNCiAgICAgICAgICBuZXdPYmpba2V5XSA9DQogICAgICAgICAgICB0eXBlb2Ygb2JqW2tleV0gPT09ICdvYmplY3QnID8gbWUuZGVlcENvcHkob2JqW2tleV0pIDogb2JqW2tleV0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIG5ld09iag0KICAgIH0sDQogICAganNvblN0cmluZ2lmeShjb2x1bW5zKSB7DQogICAgICAvLyDlr7nosaHovazmjaLmiJBqc29u5a2X56ym5LiyDQogICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY29sdW1ucywgZnVuY3Rpb24gKGtleSwgdmFsKSB7DQogICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAgICAgcmV0dXJuIHZhbCArICcnDQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHZhbA0KICAgICAgfSkNCiAgICB9LA0KICAgIGpzb25QYXJzZShzdHIpIHsNCiAgICAgIC8vIGpzb27lrZfnrKbkuLLovazmjaLmiJDlr7nosaENCiAgICAgIHJldHVybiBKU09OLnBhcnNlKHN0ciwgZnVuY3Rpb24gKGssIHYpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICB2LmluZGV4T2YgJiYNCiAgICAgICAgICAgICh2LmluZGV4T2YoJ2Z1bmN0aW9uJykgPiAtMSB8fCB2LmluZGV4T2YoJz0+JykgPiAtMSkNCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIC8vIHJldHVybiBldmFsKCcoZnVuY3Rpb24oKXtyZXR1cm4gJyArIHYgKyAnIH0pKCknKQ0KICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ldy1mdW5jDQogICAgICAgICAgICBsZXQgZnVuYyA9IG5ldyBGdW5jdGlvbigncmV0dXJuICcgKyB2KQ0KICAgICAgICAgICAgcmV0dXJuIGZ1bmMoKQ0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gdg0KICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgcmV0dXJuIHYNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGNoYW5nZUlucHV0KHZhbCkgew0KICAgICAgdGhpcy50cmVlbGVmdFRyZWVDb25maWcuaW5wdXRWYWwgPSB2YWwNCiAgICB9LA0KICAgIGNvbmZyaW1EYXRhKGN1clRyZWUpIHsNCiAgICAgIHRoaXMuY29uZnJpbURhdGEuY3VyUmFkaW8gPSBjdXJUcmVlLmNvZGUNCiAgICAgIHN3aXRjaCAoY3VyVHJlZS5jb2RlKSB7DQogICAgICAgIGNhc2UgJ3pmJzoNCiAgICAgICAgICBjb25zb2xlLmxvZygn5YiH5o2i5oiQ5pS/5bqc5qCR5p2h5Lu277yM5Yqg6L295pS/5bqc5qCRLi4uJykNCiAgICAgICAgICBicmVhaw0KICAgICAgICBjYXNlICd4dWV4aWFvJzoNCiAgICAgICAgICBjb25zb2xlLmxvZygn5YiH5o2i5oiQ5a2m5qCh5qCR5p2h5Lu277yM5Yqg6L295a2m5qCh5qCRLi4uJykNCiAgICAgICAgICB0aGlzLnRhYlN0YXR1c051bUNvbmZpZ1sneWNsJ10gPSAxMg0KICAgICAgICAgIGJyZWFrDQogICAgICAgIGNhc2UgJ2ppZ291JzoNCiAgICAgICAgICBjb25zb2xlLmxvZygn5YiH5o2i5oiQ5py65p6E5qCR5p2h5Lu277yM5Yqg6L295py65p6E5qCRLi4uJykNCiAgICAgICAgICBicmVhaw0KICAgICAgfQ0KICAgIH0sDQogICAgb25TcGxpdFBhbmVSZXNpemUobGVmdFdpZHRoKSB7DQogICAgICBpZiAobGVmdFdpZHRoID4gMSkgew0KICAgICAgICB0aGlzLmN1clNwbGl0UGFuZUxlZnRXaWR0aCA9IGxlZnRXaWR0aA0KICAgICAgICB0aGlzLmxlZnRWaXNpYmxlID0gdHJ1ZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5sZWZ0VmlzaWJsZSA9IGZhbHNlDQogICAgICB9DQogICAgfSwNCiAgICBhamF4RGF0YSh7IGN1cnJlbnRQYWdlLCBwYWdlU2l6ZSB9KSB7DQogICAgICB0aGlzLnBhZ2VyQ29uZmlnLmN1cnJlbnRQYWdlID0gY3VycmVudFBhZ2UNCiAgICAgIHRoaXMucXVlcnlQYXJhbXMgPSBPYmplY3QuYXNzaWduKHRoaXMucXVlcnlQYXJhbXMsIHsNCiAgICAgICAgY3VycmVudFBhZ2UsDQogICAgICAgIHBhZ2VTaXplDQogICAgICB9KQ0KICAgICAgdGhpcy5nZXRUYWJsZURhdGFzKGN1cnJlbnRQYWdlLCBwYWdlU2l6ZSkNCiAgICB9LA0KICAgIGdldFRhYmxlRGF0YXMoY3VycmVudFBhZ2UsIHBhZ2VTaXplKSB7DQogICAgICAvLyDmnI3liqHnq6/mn6Xor6LmlbDmja4NCiAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlDQogICAgICBsZXQgc2VsZiA9IHRoaXMNCiAgICAgIHRoaXMuJGh0dHAucG9zdCgndXJsJywgdGhpcy5xdWVyeVBhcmFtcykudGhlbigocmVzKSA9PiB7DQogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgc2VsZi50YWJsZURhdGEgPSByZXMuZGF0YS5saXN0DQogICAgICAgICAgc2VsZi5wYWdlckNvbmZpZyA9IHsNCiAgICAgICAgICAgIHRvdGFsOiByZXMuZGF0YS50b3RhbCwNCiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiBjdXJyZW50UGFnZQ0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHRyYW5zZm9ybUNvbmx1bXNEYXRhVG9OZXN0KGNvbHVtbnMpIHsNCiAgICAgIC8vIGNvbHVtbnPovazljJbkuLp2eGUtdGFibGUgY29sdW1uc+aVsOaNrue7k+aehA0KICAgICAgbGV0IHNlbGYgPSB0aGlzDQogICAgICBjb2x1bW5zLmZvckVhY2goKGNvbHVtbiwgY29sdW1uSW5kZXgpID0+IHsNCiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29sdW1uLmNoaWxkcmVuKSAmJiBjb2x1bW4uY2hpbGRyZW4ubGVuZ3RoKSB7DQogICAgICAgICAgY29sdW1uLmNoaWxkcmVuID0gc2VsZi50cmFuc2Zvcm1Db25sdW1zRGF0YVRvTmVzdChjb2x1bW4uY2hpbGRyZW4pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY29sdW1uW2NvbHVtbi5yZW5kZXJUeXBlXSA9IHsNCiAgICAgICAgICAgIG5hbWU6IGNvbHVtbi5yZW5kZXJOYW1lLCAvLyDmuLLmn5PlmajlkI0sDQogICAgICAgICAgICBvcHRpb25zOiAoKHBhcmFtcykgPT4gew0KICAgICAgICAgICAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5kZWVwQ29weShwYXJhbXMpDQogICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zDQogICAgICAgICAgICAgICAgICA/IHBhcmFtcy5zcGxpdCgnKycpLm1hcCgoaXRlbSwgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbS5zcGxpdCgnIycpWzBdLA0KICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBpdGVtLnNwbGl0KCcjJylbMV0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgIDogW10NCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pKGNvbHVtbi5vcHRpb25zKSwgLy8g5LiL5ouJ5pWw5o2u5rqQDQogICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGNvbHVtbi5kZWZhdWx0VmFsdWUsIC8vIOm7mOiupOWAvA0KICAgICAgICAgICAgcHJvcHM6IGNvbHVtbi5wcm9wcyAvLyDpop3lpJblj4LmlbANCiAgICAgICAgICB9DQogICAgICAgICAgZGVsZXRlIGNvbHVtbi5fWElEDQogICAgICAgICAgZGVsZXRlIGNvbHVtbi5yZW5kZXJUeXBlDQogICAgICAgICAgZGVsZXRlIGNvbHVtbi5yZW5kZXJOYW1lDQogICAgICAgICAgZGVsZXRlIGNvbHVtbi5vcHRpb25zDQogICAgICAgICAgZGVsZXRlIGNvbHVtbi5wcm9wcw0KICAgICAgICAgIGRlbGV0ZSBjb2x1bW4uZGVmYXVsdFZhbHVlDQogICAgICAgICAgZGVsZXRlIHNlbGYuZGVlcENvcHkoY29sdW1uLnByb3BzKQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgcmV0dXJuIGNvbHVtbnMNCiAgICB9LA0KICAgIHRyYW5zZm9ybUNvbmx1bXNEYXRhVG9TaW5nbGUoY29sdW1ucykgew0KICAgICAgLy8gdnhlLXRhYmxlIGNvbHVtbnPmlbDmja7nu5PmnoTovazljJbkuLrljZXlsYJjb2x1bW5zDQogICAgICBsZXQgc2VsZiA9IHRoaXMNCiAgICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sdW1uLCBjb2x1bW5JbmRleCkgPT4gew0KICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb2x1bW4uY2hpbGRyZW4pICYmIGNvbHVtbi5jaGlsZHJlbi5sZW5ndGgpIHsNCiAgICAgICAgICBjb2x1bW4uY2hpbGRyZW4gPSBzZWxmLnRyYW5zZm9ybUNvbmx1bXNEYXRhVG9OZXN0KGNvbHVtbi5jaGlsZHJlbikNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAoY29sdW1uLmhhc093blByb3BlcnR5KCdlZGl0UmVuZGVyJykpIHsNCiAgICAgICAgICAgIGNvbHVtbi5yZW5kZXJUeXBlID0gJ2VkaXRSZW5kZXInDQogICAgICAgICAgICBjb2x1bW4ucmVuZGVyTmFtZSA9IGNvbHVtbi5lZGl0UmVuZGVyLm5hbWUNCiAgICAgICAgICAgIGNvbHVtbiA9IE9iamVjdC5hc3NpZ24oY29sdW1uLCBzZWxmLmRlZXBDb3B5KGNvbHVtbi5lZGl0UmVuZGVyKSkNCiAgICAgICAgICAgIGRlbGV0ZSBjb2x1bW4uZWRpdFJlbmRlcg0KICAgICAgICAgIH0gZWxzZSBpZiAoY29sdW1uLmhhc093blByb3BlcnR5KCdjZWxsUmVuZGVyJykpIHsNCiAgICAgICAgICAgIGNvbHVtbi5yZW5kZXJUeXBlID0gJ2NlbGxSZW5kZXInDQogICAgICAgICAgICBjb2x1bW4ucmVuZGVyTmFtZSA9IGNvbHVtbi5jZWxsUmVuZGVyLm5hbWUNCiAgICAgICAgICAgIGNvbHVtbiA9IE9iamVjdC5hc3NpZ24oY29sdW1uLCBzZWxmLmRlZXBDb3B5KGNvbHVtbi5jZWxsUmVuZGVyKSkNCiAgICAgICAgICB9IGVsc2UgaWYgKGNvbHVtbi5oYXNPd25Qcm9wZXJ0eSgnaXRlbVJlbmRlcicpKSB7DQogICAgICAgICAgICBjb2x1bW4ucmVuZGVyVHlwZSA9ICdpdGVtUmVuZGVyJw0KICAgICAgICAgICAgY29sdW1uLnJlbmRlck5hbWUgPSBjb2x1bW4uaXRlbVJlbmRlci5uYW1lDQogICAgICAgICAgICBjb2x1bW4gPSBPYmplY3QuYXNzaWduKGNvbHVtbiwgc2VsZi5kZWVwQ29weShjb2x1bW4uaXRlbVJlbmRlcikpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKFsnJHNlbGVjdCcsICckdnhlU2VsZWN0JywgJyR2eGVGb3JtU2VsZWN0JywgJyR2eGVTd2l0Y2gnLCAnJHZ4ZVJhZGlvJywgJyR2eGVTd2l0Y2gnLCAnJHZ4ZUNoZWNrYm94J10uaW5kZXhPZihjb2x1bW4ucmVuZGVyTmFtZSkgPj0gMCkgew0KICAgICAgICAgICAgY29sdW1uLm9wdGlvbnMgPSBjb2x1bW4ub3B0aW9ucw0KICAgICAgICAgICAgICAubWFwKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnZhbHVlICsgJyMnICsgaXRlbS5sYWJlbA0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAuam9pbignKycpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgcmV0dXJuIGNvbHVtbnMNCiAgICB9LA0KICAgIHRyYW5zZm9ybUl0ZW1zRGF0YVRvU2luZ2xlKGl0ZW1zKSB7DQogICAgICAvLyB2eGUtdGFibGUgaXRlbXPmlbDmja7nu5PmnoTovazljJbkuLrljZXlsYJpdGVtcw0KICAgICAgbGV0IHNlbGYgPSB0aGlzDQogICAgICBpdGVtcy5mb3JFYWNoKChpdGVtLCBpdGVtSW5kZXgpID0+IHsNCiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbS5jaGlsZHJlbikgJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGgpIHsNCiAgICAgICAgICBpdGVtLmNoaWxkcmVuID0gc2VsZi50cmFuc2Zvcm1Db25sdW1zRGF0YVRvTmVzdChpdGVtLmNoaWxkcmVuKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChpdGVtLmhhc093blByb3BlcnR5KCdpdGVtUmVuZGVyJykpIHsNCiAgICAgICAgICAgIGl0ZW0ucmVuZGVyVHlwZSA9ICdpdGVtUmVuZGVyJw0KICAgICAgICAgICAgaXRlbS5yZW5kZXJOYW1lID0gaXRlbS5pdGVtUmVuZGVyLm5hbWUNCiAgICAgICAgICAgIGl0ZW0gPSBPYmplY3QuYXNzaWduKGl0ZW0sIHNlbGYuZGVlcENvcHkoaXRlbS5pdGVtUmVuZGVyKSkNCiAgICAgICAgICAgIGRlbGV0ZSBpdGVtLml0ZW1SZW5kZXINCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKFsnJHNlbGVjdCcsICckdnhlU2VsZWN0JywgJyR2eGVGb3JtUmFkaW8nLCAnJHZ4ZUZvcm1TZWxlY3QnLCAnJHZ4ZVN3aXRjaCcsICckdnhlUmFkaW8nLCAnJHZ4ZVN3aXRjaCcsICckdnhlQ2hlY2tib3gnLCAnJHZ4ZUZvcm1DaGVja2JveCddLmluZGV4T2YoaXRlbS5yZW5kZXJOYW1lKSA+PSAwKSB7DQogICAgICAgICAgICBpdGVtLm9wdGlvbnMgPSBBcnJheS5pc0FycmF5KGl0ZW0ub3B0aW9ucykgPyBpdGVtLm9wdGlvbnMNCiAgICAgICAgICAgICAgLm1hcCgoaXRlbSwgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS52YWx1ZSArICcjJyArIGl0ZW0ubGFiZWwNCiAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgLmpvaW4oJysnKSA6IGl0ZW0ub3B0aW9ucw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHJldHVybiBpdGVtcw0KICAgIH0sDQogICAgZ2V0VGFibGVDb25mQnlNZW51Z3VpZChtZW51Z3VpZCkgew0KICAgICAgLy8g5qC55o2u6I+c5Y2VbWVudWd1aWTojrflj5blhbbkuIvmiYDmnInooajphY3nva4NCiAgICAgIGxldCBzZWxmID0gdGhpcw0KICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsNCiAgICAgICAgc2VsZi4kaHR0cA0KICAgICAgICAgIC5nZXQoJ21wLWItcGVybS1zZXJ2aWNlL3YxL3RhYmxlY29uZi9tZW51Z3VpZCcsIHsNCiAgICAgICAgICAgIG1lbnVndWlkOiBtZW51Z3VpZCwNCiAgICAgICAgICAgIG1vZl9kaXZfY29kZTogc2VsZi51c2VySW5mby5wcm92aW5jZSwgLy8g5Yy65YiSDQogICAgICAgICAgICBmaXNjYWx5ZWFyOiBzZWxmLnVzZXJJbmZvLnllYXIgLy8g5bm05Lu9DQogICAgICAgICAgfSkNCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICBpZiAocmVzLnJzY29kZSA9PT0gJzEwMDAwMCcpIHsNCiAgICAgICAgICAgICAgcmVzb2x2ZShyZXMuZGF0YSkNCiAgICAgICAgICAgICAgLy8gcmVzb2x2ZShzZWxmLmdlbmVyYXRlQ3VyVGFibGVDb25mRGF0YU1hcChyZXMuZGF0YSkpDQogICAgICAgICAgICB9DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgICAgICByZWplY3QoZXJyb3IpDQogICAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBnZW5lcmF0ZUN1clRhYmxlQ29uZkRhdGFNYXAoY3VyTWVudUNvbmZzKSB7DQogICAgICAvLyDnlJ/miJDlvZPliY1tZW515LiL6KGo5qC85pWw5o2u5pig5bCEDQogICAgICBsZXQgc2VsZiA9IHRoaXMNCiAgICAgIGxldCByZXN1bHRPYmogPSB7fQ0KICAgICAgbGV0IGN1clRhYmxlQ29uZkRhdGFzTWFwID0ge30NCiAgICAgIGxldCBjdXJUYWJsZUNvbmZEYXRhc01hcEFyciA9IFtdDQogICAgICByZXN1bHRPYmouY3VyVGFibGVDb25mRGF0YXMgPSBjdXJNZW51Q29uZnMNCiAgICAgIGN1ck1lbnVDb25mcy5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICBsZXQgeyBpdGVtc0NvbmZpZywgZ2xvYmFsQ29uZmlnLCBmb3JtQ29uZmlnIH0gPSBzZWxmLmpzb25QYXJzZSgNCiAgICAgICAgICBpdGVtLmNvbmZpZ3VyZQ0KICAgICAgICApDQogICAgICAgIGdsb2JhbENvbmZpZyA9IGdsb2JhbENvbmZpZyB8fCB7fQ0KICAgICAgICBpdGVtc0NvbmZpZyA9IGl0ZW1zQ29uZmlnIHx8IFtdDQogICAgICAgIGZvcm1Db25maWcgPSBmb3JtQ29uZmlnIHx8IFtdDQogICAgICAgIGxldCBnbG9iYWxDb25maWdDcCA9IE9iamVjdC5hc3NpZ24oDQogICAgICAgICAgew0KICAgICAgICAgICAgdGFibGVuYW1lOiAnJywNCiAgICAgICAgICAgIGJ1c2luZXNzVGFibGVOYW1lOiAnJywNCiAgICAgICAgICAgIHRhYmxlTm90ZTogJycsDQogICAgICAgICAgICBtZWFzdXJpbmdVbml0OiAnJywNCiAgICAgICAgICAgIHZpZXdPcmRlcjogJycsDQogICAgICAgICAgICBlZGl0YWJsZUJhdGNoOiAnJywNCiAgICAgICAgICAgIHRhYmxlVHlwZTogJycsDQogICAgICAgICAgICBub3RlOiAnJywNCiAgICAgICAgICAgIGF1dG9CdWlsdFRhYmxlczogJycsDQogICAgICAgICAgICBlZGl0YmxlOiAnJywNCiAgICAgICAgICAgIHNob3dDaGVja2JveDogJycsDQogICAgICAgICAgICBjYW5Vc2U6ICcnLA0KICAgICAgICAgICAgYVNpbmdsZVRhYmxlOiAnJywNCiAgICAgICAgICAgIGJhdGNoTW9kaWZ5OiAnJywNCiAgICAgICAgICAgIHJvd0NvbmZpZzogJycsDQogICAgICAgICAgICBub1JlY29yZElzQWxsb3dlZFRvUmVwb3J0OiAnJywNCiAgICAgICAgICAgIHN1YnRvdGFsUm93czogJycNCiAgICAgICAgICB9LA0KICAgICAgICAgIGdsb2JhbENvbmZpZywNCiAgICAgICAgICB7DQogICAgICAgICAgICAvLyB0YWJsZW5hbWU6IGl0ZW0udGFibGVuYW1lLA0KICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlLA0KICAgICAgICAgICAgdXBkYXRldGltZTogaXRlbS51cGRhdGV0aW1lLA0KICAgICAgICAgICAgbWVudW5hbWU6IHRoaXMuY3VyTGVmdFRyZWVDbGlja05vZGUubmFtZSwNCiAgICAgICAgICAgIGlkOiBpdGVtLmlkLA0KICAgICAgICAgICAgbWVudWd1aWQ6IGl0ZW0ubWVudWd1aWQNCiAgICAgICAgICB9DQogICAgICAgICkNCiAgICAgICAgY3VyVGFibGVDb25mRGF0YXNNYXBBcnIucHVzaChnbG9iYWxDb25maWdDcCkNCiAgICAgICAgY3VyVGFibGVDb25mRGF0YXNNYXBbaXRlbS5pZF0gPSB7DQogICAgICAgICAgaXRlbXNDb25maWc6IHNlbGYudHJhbnNmb3JtQ29ubHVtc0RhdGFUb1NpbmdsZShpdGVtc0NvbmZpZyksDQogICAgICAgICAgZm9ybUNvbmZpZzogc2VsZi50cmFuc2Zvcm1JdGVtc0RhdGFUb1NpbmdsZShmb3JtQ29uZmlnKSwNCiAgICAgICAgICBpZDogaXRlbS5pZCwNCiAgICAgICAgICBnbG9iYWxDb25maWc6IGdsb2JhbENvbmZpZ0NwLA0KICAgICAgICAgIG1lbnVndWlkOiBpdGVtLm1lbnVndWlkLA0KICAgICAgICAgIHR5cGU6IGl0ZW0udHlwZQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgcmVzdWx0T2JqLmN1clRhYmxlQ29uZkRhdGFzTWFwQXJyID0gY3VyVGFibGVDb25mRGF0YXNNYXBBcnINCiAgICAgIHJlc3VsdE9iai5jdXJUYWJsZUNvbmZEYXRhc01hcCA9IGN1clRhYmxlQ29uZkRhdGFzTWFwDQogICAgICByZXR1cm4gcmVzdWx0T2JqDQogICAgfSwNCiAgICBzZXRMZWZ0TWVudVRyZWUoKSB7DQogICAgICAvLyDliqDovb3lt6bkvqfmoJENCiAgICAgIHRoaXMubGVmdFRyZWVEYXRhID0gW10uY29uY2F0KHRoaXMuJHN0b3JlLnN0YXRlLnN5c3RlbU1lbnUpDQogICAgfSwNCiAgICBvbkxlZnRUcmVlTm9kZUNsaWNrKG5vZGUsIGxlZnRUcmVlKSB7DQogICAgICAvLyDlt6bkvqfmoJHngrnlh7vkuovku7YNCiAgICAgIGlmICghKEFycmF5LmlzQXJyYXkobm9kZS5jaGlsZHJlbikgJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGgpKSB7DQogICAgICAgIGxldCBzZWxmID0gdGhpcw0KICAgICAgICB0aGlzLmN1ckxlZnRUcmVlQ2xpY2tOb2RlID0gbm9kZQ0KICAgICAgICB0aGlzLmdldFRhYmxlQ29uZkJ5TWVudWd1aWQobm9kZS5ndWlkKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBzZWxmLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgIG1lc3NhZ2U6IGDlvZPliY3oj5zljZXmlbDmja7mn6Xor6LmiJDlip8s5YWx6K6hKCR7cmVzLmxlbmd0aH3mnaEpYCwNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgIH0pDQogICAgICAgICAgc2VsZi5jdXJUYWJsZUNvbmZEYXRhc01hcEFyciA9IHJlcw0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgcmVmcmVzaFRhYmxlKCkgew0KICAgICAgLy8g5Yi35paw6KGo5qC8DQogICAgICBsZXQgc2VsZiA9IHRoaXMNCiAgICAgIHRoaXMuZ2V0VGFibGVDb25mQnlNZW51Z3VpZCh0aGlzLmN1ckxlZnRUcmVlQ2xpY2tOb2RlLmd1aWQpLnRoZW4oDQogICAgICAgIChyZXMpID0+IHsNCiAgICAgICAgICBzZWxmLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZSwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICflvZPliY3oj5zljZXmlbDmja7lt7LliLfmlrAnLA0KICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnDQogICAgICAgICAgfSkNCiAgICAgICAgICBzZWxmLmN1clRhYmxlQ29uZkRhdGFzTWFwQXJyID0gcmVzDQogICAgICAgICAgc2VsZi4kcmVmcy5ic1RhYmxlUmVmDQogICAgICAgICAgICAudGFibGVPcHRpb25GbigpDQogICAgICAgICAgICAucmVsb2FkRGF0YShzZWxmLmN1clRhYmxlQ29uZkRhdGFzTWFwQXJyKS50aGVuKCgpID0+IHt9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICApDQogICAgfSwNCiAgICBvbkVkaXRUYWJsZUNsaWNrKCkgew0KICAgICAgLy8g57yW6L6R54K55Ye75LqL5Lu2DQogICAgICBsZXQgc2VsZWN0aW9uID0gdGhpcy4kcmVmcy5ic1RhYmxlUmVmLnNlbGVjdGlvbg0KICAgICAgaWYgKHNlbGVjdGlvbi5sZW5ndGggPT09IDEpIHsNCiAgICAgICAgbGV0IHsgaXRlbXNDb25maWcsIGdsb2JhbENvbmZpZywgZm9ybUNvbmZpZyB9ID0gdGhpcy5qc29uUGFyc2UoDQogICAgICAgICAgc2VsZWN0aW9uWzBdLmNvbmZpZ3VyZQ0KICAgICAgICApDQogICAgICAgIGdsb2JhbENvbmZpZyA9IGdsb2JhbENvbmZpZyB8fCB7fQ0KICAgICAgICBpdGVtc0NvbmZpZyA9IGl0ZW1zQ29uZmlnIHx8IFtdDQogICAgICAgIGZvcm1Db25maWcgPSBmb3JtQ29uZmlnIHx8IFtdDQogICAgICAgIHRoaXMudGFibGVDb25mTW9kYWxQYXJhbXMgPSBPYmplY3QuYXNzaWduKHNlbGVjdGlvblswXSwgew0KICAgICAgICAgIGdsb2JhbENvbmZpZzogZ2xvYmFsQ29uZmlnLA0KICAgICAgICAgIGl0ZW1zQ29uZmlnOiB0aGlzLnRyYW5zZm9ybUNvbmx1bXNEYXRhVG9TaW5nbGUoaXRlbXNDb25maWcpLA0KICAgICAgICAgIGZvcm1Db25maWc6IHRoaXMudHJhbnNmb3JtSXRlbXNEYXRhVG9TaW5nbGUoZm9ybUNvbmZpZykNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy50YWJsZUNvbmZNb2RhbFZpc2libGUgPSB0cnVlDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeS4gOadoeaVsOaNrui/m+ihjOe8lui+kScsDQogICAgICAgICAgdHlwZTogJ2luZm8nDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBvbkVkaXRGb3JtQ2xpY2soKSB7DQogICAgICAvLyDnvJbovpHngrnlh7vkuovku7YNCiAgICAgIGxldCBzZWxlY3Rpb24gPSB0aGlzLiRyZWZzLmJzVGFibGVSZWYuc2VsZWN0aW9uDQogICAgICBpZiAoc2VsZWN0aW9uLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICBsZXQgeyBpdGVtc0NvbmZpZywgZ2xvYmFsQ29uZmlnLCBmb3JtQ29uZmlnIH0gPSB0aGlzLmpzb25QYXJzZSgNCiAgICAgICAgICBzZWxlY3Rpb25bMF0uY29uZmlndXJlDQogICAgICAgICkNCiAgICAgICAgZ2xvYmFsQ29uZmlnID0gZ2xvYmFsQ29uZmlnIHx8IHt9DQogICAgICAgIGl0ZW1zQ29uZmlnID0gaXRlbXNDb25maWcgfHwgW10NCiAgICAgICAgZm9ybUNvbmZpZyA9IGZvcm1Db25maWcgfHwgW10NCiAgICAgICAgdGhpcy50YWJsZUNvbmZNb2RhbFBhcmFtcyA9IE9iamVjdC5hc3NpZ24oc2VsZWN0aW9uWzBdLCB7DQogICAgICAgICAgZ2xvYmFsQ29uZmlnOiBnbG9iYWxDb25maWcsDQogICAgICAgICAgaXRlbXNDb25maWc6IHRoaXMudHJhbnNmb3JtQ29ubHVtc0RhdGFUb1NpbmdsZShpdGVtc0NvbmZpZyksDQogICAgICAgICAgZm9ybUNvbmZpZzogdGhpcy50cmFuc2Zvcm1JdGVtc0RhdGFUb1NpbmdsZShmb3JtQ29uZmlnKQ0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLmZvcm1Db25mTW9kYWxWaXNpYmxlID0gdHJ1ZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlLA0KICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nkuIDmnaHmlbDmja7ov5vooYznvJbovpEnLA0KICAgICAgICAgIHR5cGU6ICdpbmZvJw0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgb25FZGl0Q2xpY2soKSB7DQogICAgICBsZXQgc2VsZWN0aW9uID0gdGhpcy4kcmVmcy5ic1RhYmxlUmVmLnNlbGVjdGlvbg0KICAgICAgaWYgKHNlbGVjdGlvbi5sZW5ndGggPT09IDEpIHsNCiAgICAgICAgbGV0IHsgaXRlbXNDb25maWcsIGdsb2JhbENvbmZpZywgc3ViVGFiQ29uZmlnLCBkZWZhdWx0Q29uZmlnIH0gPSB0aGlzLmpzb25QYXJzZSgNCiAgICAgICAgICBzZWxlY3Rpb25bMF0uY29uZmlndXJlDQogICAgICAgICkNCiAgICAgICAgZ2xvYmFsQ29uZmlnID0gZ2xvYmFsQ29uZmlnIHx8IHt9DQogICAgICAgIGl0ZW1zQ29uZmlnID0gaXRlbXNDb25maWcgfHwgW10NCiAgICAgICAgc3ViVGFiQ29uZmlnID0gc3ViVGFiQ29uZmlnIHx8IHsNCiAgICAgICAgICBidXR0b25zOiBbXSwNCiAgICAgICAgICBidXR0b25zSW5mbzoge30NCiAgICAgICAgfQ0KICAgICAgICBkZWZhdWx0Q29uZmlnID0gZGVmYXVsdENvbmZpZyB8fCBbXQ0KICAgICAgICBpZiAoc2VsZWN0aW9uWzBdLnR5cGUgPT09ICdmb3JtJyB8fCBzZWxlY3Rpb25bMF0udHlwZSA9PT0gJ2Zvcm1Db25mJyB8fCBzZWxlY3Rpb25bMF0udHlwZSA9PT0gJ2RldGFpbCcgfHwgc2VsZWN0aW9uWzBdLnR5cGUgPT09ICdkZXRhaWxDb25mJykgew0KICAgICAgICAgIHRoaXMudGFibGVDb25mTW9kYWxQYXJhbXMgPSBPYmplY3QuYXNzaWduKHNlbGVjdGlvblswXSwgew0KICAgICAgICAgICAgZ2xvYmFsQ29uZmlnOiBnbG9iYWxDb25maWcsDQogICAgICAgICAgICBpdGVtc0NvbmZpZ05lc3Q6IHRoaXMuZGVlcENvcHkoaXRlbXNDb25maWcpLA0KICAgICAgICAgICAgaXRlbXNDb25maWc6IHRoaXMudHJhbnNmb3JtSXRlbXNEYXRhVG9TaW5nbGUoaXRlbXNDb25maWcpDQogICAgICAgICAgfSkNCiAgICAgICAgICB0aGlzLmZvcm1Db25mTW9kYWxWaXNpYmxlID0gdHJ1ZQ0KICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGlvblswXS50eXBlID09PSAndGFiUGFuZUNvbmYnKSB7DQogICAgICAgICAgdGhpcy50YWJsZUNvbmZNb2RhbFBhcmFtcyA9IE9iamVjdC5hc3NpZ24oc2VsZWN0aW9uWzBdLCB7DQogICAgICAgICAgICBnbG9iYWxDb25maWc6IGdsb2JhbENvbmZpZywNCiAgICAgICAgICAgIGl0ZW1zQ29uZmlnTmVzdDogdGhpcy5kZWVwQ29weShzdWJUYWJDb25maWcpLA0KICAgICAgICAgICAgc3ViVGFiQ29uZmlnOiBzdWJUYWJDb25maWcNCiAgICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMuU3ViVGFiQ29uZmlnVmlzaWJsZSA9IHRydWUNCiAgICAgICAgfSBlbHNlIGlmIChzZWxlY3Rpb25bMF0udHlwZSA9PT0gJ2VudGVyaW5nRGVmYXVsdCcpIHsNCiAgICAgICAgICB0aGlzLnRhYmxlQ29uZk1vZGFsUGFyYW1zID0gT2JqZWN0LmFzc2lnbihzZWxlY3Rpb25bMF0sIHsNCiAgICAgICAgICAgIGdsb2JhbENvbmZpZzogZ2xvYmFsQ29uZmlnLA0KICAgICAgICAgICAgaXRlbXNDb25maWdOZXN0OiB0aGlzLmRlZXBDb3B5KGRlZmF1bHRDb25maWcpLA0KICAgICAgICAgICAgaXRlbXNDb25maWc6IHRoaXMudHJhbnNmb3JtQ29ubHVtc0RhdGFUb1NpbmdsZShkZWZhdWx0Q29uZmlnKQ0KICAgICAgICAgIH0pDQogICAgICAgICAgdGhpcy5lbnRlcmluZ0RlZmF1bHRWaXNpYmxlID0gdHJ1ZQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMudGFibGVDb25mTW9kYWxQYXJhbXMgPSBPYmplY3QuYXNzaWduKHNlbGVjdGlvblswXSwgew0KICAgICAgICAgICAgZ2xvYmFsQ29uZmlnOiBnbG9iYWxDb25maWcsDQogICAgICAgICAgICBpdGVtc0NvbmZpZ05lc3Q6IHRoaXMuZGVlcENvcHkoaXRlbXNDb25maWcpLA0KICAgICAgICAgICAgaXRlbXNDb25maWc6IHRoaXMudHJhbnNmb3JtQ29ubHVtc0RhdGFUb1NpbmdsZShpdGVtc0NvbmZpZykNCiAgICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMudGFibGVDb25mTW9kYWxWaXNpYmxlID0gdHJ1ZQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsDQogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeS4gOadoeaVsOaNrui/m+ihjOe8lui+kScsDQogICAgICAgICAgdHlwZTogJ2luZm8nDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBvbkFkZENsaWNrKCkgew0KICAgICAgbGV0IHNlbGYgPSB0aGlzDQogICAgICB0aGlzLiRyZWZzLmJzVGFibGVSZWYuaW5zZXJ0Um93RGF0YSh7DQogICAgICAgIGRhdGE6IHsNCiAgICAgICAgICBtZW51Z3VpZDogc2VsZi5jdXJMZWZ0VHJlZUNsaWNrTm9kZS5ndWlkLA0KICAgICAgICAgIHR5cGU6ICd0YWJsZScsDQogICAgICAgICAgb3B0aW9uVHlwZTogJ2FkZCcsDQogICAgICAgICAgaWQ6IHNlbGYuJFRvb2xGbi51dGlsRm4uZ2V0VXVpZCgpLA0KICAgICAgICAgIG1lbnVuYW1lOiBzZWxmLmN1ckxlZnRUcmVlQ2xpY2tOb2RlLm5hbWUsDQogICAgICAgICAgdGFibGVuYW1lOiAnJywNCiAgICAgICAgICBjb25maWd1cmU6IHNlbGYuanNvblN0cmluZ2lmeSh7DQogICAgICAgICAgICBnbG9iYWxDb25maWc6IHt9LCAvLyDlhajlsYDphY3nva4NCiAgICAgICAgICAgIGl0ZW1zQ29uZmlnOiBbXSwgLy8g6aG56YWN572uDQogICAgICAgICAgICBwYWdlQ29uZmlnOiB7fSwgLy8g5YiG6aG16YWN572uDQogICAgICAgICAgICBlZGl0Q29uZmlnOiB7fSwgLy8g57yW6L6R6YWN572uDQogICAgICAgICAgICBlZGl0UnVsZXM6IHt9LCAvLyDmoKHpqozop4TliJkNCiAgICAgICAgICAgIGZvb3RlckNvbmZpZzoge30sIC8vIOihqOWwvumFjee9rg0KICAgICAgICAgICAgZGF0YUNvbmZpZzogew0KICAgICAgICAgICAgICBkYXRhU291Y2VUeXBlOiAncXVlcnknDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgc3ViVGFiQ29uZmlnOiBbXSwNCiAgICAgICAgICAgIGRlZmF1bHRDb25maWc6IFtdIC8vIOW9leWFpem7mOiupOWAvA0KICAgICAgICAgIH0pDQogICAgICAgIC8vIG1lbnVndWlkOiAnMTIzNDU2Jw0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0sDQogICAgb25EZWxldGVDbGljaygpIHsNCiAgICAgIGxldCBzZWxmID0gdGhpcw0KICAgICAgbGV0IGlkcyA9IHRoaXMuJHJlZnMuYnNUYWJsZVJlZi5zZWxlY3Rpb24ubWFwKChpdGVtLCBpbmRleCkgPT4gew0KICAgICAgICByZXR1cm4gaXRlbS5pZA0KICAgICAgfSkNCiAgICAgIGxldCBtZW51Z3VpZCA9IHRoaXMuJHJlZnMuYnNUYWJsZVJlZi5zZWxlY3Rpb25bMF0ubWVudWd1aWQNCiAgICAgIHRoaXMubWVudWd1aWRzWzBdID0gbWVudWd1aWQNCiAgICAgIGlmIChpZHMubGVuZ3RoKSB7DQogICAgICAgIHNlbGYuJGNvbmZpcm0oJ+ehruWumuWIoOmZpO+8nycsICfmj5DnpLonLCB7DQogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICBzZWxmLiRodHRwDQogICAgICAgICAgICAuZGVsKCdtcC1iLXBlcm0tc2VydmljZS92MS90YWJsZWNvbmYnLCB7DQogICAgICAgICAgICAgIG1vZl9kaXZfY29kZTogc2VsZi51c2VySW5mby5wcm92aW5jZSwgLy8g5Yy65YiSDQogICAgICAgICAgICAgIGZpc2NhbHllYXI6IHNlbGYudXNlckluZm8ueWVhciwgLy8g5bm05Lu9cw0KICAgICAgICAgICAgICBpZHM6IGlkcywNCiAgICAgICAgICAgICAgbWVudWd1aWRzOiB0aGlzLm1lbnVndWlkcw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgaWYgKHJlcy5yc2NvZGUgPT09ICcxMDAwMDAnKSB7DQogICAgICAgICAgICAgICAgc2VsZi4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUsDQogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBg6YCJ5Lit55qEJHtpZHMubGVuZ3RofeadoeaVsOaNruW3suWIoOmZpGAsDQogICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIHNlbGYucmVmcmVzaFRhYmxlKCkNCiAgICAgICAgICAgICAgICAvLyByZXNvbHZlKHNlbGYuZ2VuZXJhdGVDdXJUYWJsZUNvbmZEYXRhTWFwKHJlcy5kYXRhKSkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpDQogICAgICAgICAgICB9KQ0KICAgICAgICB9KS5jYXRjaChlID0+IHsNCiAgICAgICAgICBzZWxmLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WPlua2iOWIoOmZpOaIkOWKnycpDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBvblRhYmxlQ2VsbENsaWNrKHsNCiAgICAgIHJvdywNCiAgICAgIHJvd0luZGV4LA0KICAgICAgJHJvd0luZGV4LA0KICAgICAgY29sdW1uLA0KICAgICAgY29sdW1uSW5kZXgsDQogICAgICAkY29sdW1uSW5kZXgsDQogICAgICB0cmlnZ2VyUmFkaW8sDQogICAgICB0cmlnZ2VyQ2hlY2tib3gsDQogICAgICB0cmlnZ2VyVHJlZU5vZGUsDQogICAgICB0cmlnZ2VyRXhwYW5kTm9kZSwNCiAgICAgICRldmVudA0KICAgIH0pIHsNCiAgICAgIC8vIHRoaXMudGFibGVDb25mTW9kYWxQYXJhbXMgPSB0aGlzLmN1clRhYmxlQ29uZkRhdGFzTWFwW3Jvdy5pZF0NCiAgICAgIC8vIHRoaXMuVGFibGVDb25mTW9kYWxWaXNpYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgLy8g5Yy65YiS6buY6K6k5YC8DQogICAgZ2V0UHJvdmluY2UoKSB7DQogICAgICBsZXQgb2JqID0gew0KICAgICAgICB2YWx1ZTogdGhpcy51c2VySW5mby5wcm92aW5jZSwNCiAgICAgICAgbGFiZWw6IHRoaXMudXNlckluZm8uYWRtZGl2bmFtZQ0KICAgICAgfQ0KICAgICAgbGV0IGZsYWcgPSBmYWxzZQ0KICAgICAgdGhpcy50YWJsZUNvbHVtbnNDb25maWdbMF0uZWRpdFJlbmRlci5vcHRpb25zLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGlmIChpdGVtLnZhbHVlID09PSB0aGlzLnVzZXJJbmZvLnByb3ZpbmNlKSB7DQogICAgICAgICAgZmxhZyA9IHRydWUNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIGlmICghZmxhZykgew0KICAgICAgICB0aGlzLnRhYmxlQ29sdW1uc0NvbmZpZ1swXS5lZGl0UmVuZGVyLm9wdGlvbnMucHVzaChvYmopDQogICAgICB9DQogICAgICB0aGlzLnRhYmxlQ29sdW1uc0NvbmZpZ1swXS5lZGl0UmVuZGVyLmRlZmF1bHRWYWx1ZSA9IHRoaXMudXNlckluZm8ucHJvdmluY2UNCiAgICB9LA0KICAgIC8vIOe8lui+keeahOaXtuWAmeW9leWFpem7mOiupOWAvOacieS4qum7mOiupGlkDQogICAgZWRpdENsb3NlZCh7IHJvdywgY29sdW1uIH0pIHsNCiAgICAgIC8vIGVudGVyaW5nRGVmYXVsdEZsYWfmoIfor4bvvIzlvZPmlLnov4fkuLrlvZXlhaXpu5jorqTlgLzlkI7vvIzlho3mm7TmlLnmiY3lvbHlk41pZOWPmOWMlg0KICAgICAgaWYgKHJvdy50eXBlID09PSAnZW50ZXJpbmdEZWZhdWx0Jykgew0KICAgICAgICByb3cuaWQgPSAnRDlBMEI1OEU1QzIyNDJGMzg2MEU2RDgxNTFDMjExQjInDQogICAgICAgIHJvdy5pZF9fdmlld1NvcnQgPSAnRDlBMEI1OEU1QzIyNDJGMzg2MEU2RDgxNTFDMjExQjInDQogICAgICAgIHRoaXMuZW50ZXJpbmdEZWZhdWx0RmxhZyA9IHRydWUNCiAgICAgIH0gZWxzZSBpZiAocm93LnR5cGUgIT09ICdlbnRlcmluZ0RlZmF1bHQnICYmIHRoaXMuZW50ZXJpbmdEZWZhdWx0RmxhZyA9PT0gdHJ1ZSkgew0KICAgICAgICByb3cuaWQgPSB0aGlzLiRUb29sRm4udXRpbEZuLmdldFV1aWQoKQ0KICAgICAgICByb3cuaWRfX3ZpZXdTb3J0ID0gcm93LmlkDQogICAgICAgIHRoaXMuZW50ZXJpbmdEZWZhdWx0RmxhZyA9IGZhbHNlDQogICAgICB9DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuc2V0TGVmdE1lbnVUcmVlKCkNCiAgICBpZiAodGhpcy4kZ2xvYWJsZVRvb2xGbi5jdXJyZW50UHJvdmluY2UgPT09IHRoaXMuJGdsb2FibGVUb29sRm4uRnVKaWFuKSB7DQogICAgICB0aGlzLmdldFByb3ZpbmNlKCkNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgdGFibGVDb25mTW9kYWxWaXNpYmxlOiB7DQogICAgICBoYW5kbGVyKG5ld3ZhbCkgew0KICAgICAgICAvLyBpZiAoIW5ld3ZhbCkgew0KICAgICAgICAvLyAgIHRoaXMucmVmcmVzaFRhYmxlKCkNCiAgICAgICAgLy8gfQ0KICAgICAgfSwNCiAgICAgIC8vIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9LA0KICAgIGZvcm1Db25mTW9kYWxWaXNpYmxlOiB7DQogICAgICBoYW5kbGVyKG5ld3ZhbCkgew0KICAgICAgICAvLyBpZiAoIW5ld3ZhbCkgew0KICAgICAgICAvLyAgIHRoaXMucmVmcmVzaFRhYmxlKCkNCiAgICAgICAgLy8gfQ0KICAgICAgfSwNCiAgICAgIC8vIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["Main.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Main.vue","sourceRoot":"src/views/manageSystem/table","sourcesContent":["<!--  表格信息配置   Author:Titans@2396757591@qq.com -->\r\n<template>\r\n  <div class=\"height-all\">\r\n    <BsMainFormListLayout :left-visible.sync=\"leftVisible\">\r\n      <template v-slot:topTap>\r\n        <!-- <BsJsonEditor />  -->\r\n      </template>\r\n      <template v-slot:topTabPane> </template>\r\n      <template v-slot:query> </template>\r\n      <!-- leftVisible不为undefined为渲染mainTree和mainForm插槽 ，否则渲染mainCon插槽-->\r\n      <template v-slot:mainTree>\r\n        <div class=\"height-all left-tree-pane\">\r\n          <div class=\"mmc-left-tree-title\">\r\n            <BsTreeSet\r\n              :tree-config=\"treeConfig\"\r\n              @onAsideChange=\"leftVisible = false\"\r\n              @onChangeInput=\"changeInput\"\r\n              @onConfrimData=\"confrimData\"\r\n            />\r\n            <!-- <div class=\"mmc-title\">\r\n              <span class=\"fn-inline\">菜单树</span>\r\n            </div> -->\r\n          </div>\r\n          <div class=\"mmc-left-tree-body\" style=\"height: calc(100% - 48px)\">\r\n            <BsBossTree\r\n              ref=\"testTree\"\r\n              is-need-root\r\n              :tree-props=\"{\r\n                label: 'name',\r\n                children: 'children',\r\n              }\"\r\n              open-loading\r\n              :is-server=\"false\"\r\n              :datas=\"leftTreeData\"\r\n              :server-uri=\"serverUri\"\r\n              :global-config=\"leftTreeConfig\"\r\n              :queryparams=\"treeQueryparams\"\r\n              :clickmethod=\"onLeftTreeNodeClick\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </template>\r\n      <template v-slot:mainForm>\r\n        <BsTable1\r\n          ref=\"bsTableRef\"\r\n          :footer-config=\"{ showFooter: false }\"\r\n          :table-config=\"tableConfig\"\r\n          :table-columns-config=\"tableColumnsConfig\"\r\n          :table-data=\"curTableConfDatasMapArr\"\r\n          :toolbar-config=\"toolbarConfig\"\r\n          :pager-config=\"false\"\r\n          :edit-config=\"{}\"\r\n          @ajaxData=\"ajaxData\"\r\n          @editClosed=\"editClosed\"\r\n        >\r\n          <template v-slot:toolbarSlots>\r\n            <div class=\"table-toolbar-left\">\r\n              <div\r\n                v-if=\"leftVisible === false\"\r\n                class=\"table-toolbar-contro-leftvisible\"\r\n                @click=\"leftVisible = true\"\r\n              ></div>\r\n              <div class=\"table-toolbar-left-title\">\r\n                <span class=\"fn-inline\">{{\r\n                  (curLeftTreeClickNode.name ? curLeftTreeClickNode.name : '') + '菜单表配置'\r\n                }}</span>\r\n                <i class=\"fn-inline\"></i>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <template v-slot:toolbar-custom-slot>\r\n            <div class=\"toolbar-slot-custom-slot fn-inline\">\r\n              <!-- <vxe-button\r\n                size=\"medium\"\r\n                status=\"primary\"\r\n                content=\"编辑表单项配置\"\r\n                @click=\"onEditFormClick\"\r\n              />\r\n              <vxe-button\r\n                size=\"medium\"\r\n                status=\"primary\"\r\n                content=\"编辑表格列配置\"\r\n                @click=\"onEditTableClick\"\r\n              /> -->\r\n              <vxe-button\r\n                size=\"medium\"\r\n                status=\"primary\"\r\n                content=\"新增\"\r\n                @click=\"onAddClick\"\r\n              />\r\n              <vxe-button\r\n                size=\"medium\"\r\n                status=\"primary\"\r\n                content=\"删除\"\r\n                @click=\"onDeleteClick\"\r\n              />\r\n              <vxe-button\r\n                size=\"medium\"\r\n                status=\"primary\"\r\n                content=\"编辑\"\r\n                @click=\"onEditClick\"\r\n              />\r\n            </div>\r\n          </template>\r\n        </BsTable1>\r\n      </template>\r\n    </BsMainFormListLayout>\r\n    <div>\r\n      <TableConfModal\r\n        v-if=\"tableConfModalVisible\"\r\n        :dialog-visible.sync=\"tableConfModalVisible\"\r\n        :params=\"tableConfModalParams\"\r\n        @closeCallback=\"refreshTable\"\r\n      />\r\n      <FormConfModal\r\n        v-if=\"formConfModalVisible\"\r\n        :dialog-visible.sync=\"formConfModalVisible\"\r\n        :params=\"tableConfModalParams\"\r\n        @closeCallback=\"refreshTable\"\r\n      />\r\n      <EnteringDefault\r\n        v-if=\"enteringDefaultVisible\"\r\n        :dialog-visible.sync=\"enteringDefaultVisible\"\r\n        :params=\"tableConfModalParams\"\r\n        @closeCallback=\"refreshTable\"\r\n      />\r\n      <SubTabConfigModal\r\n        v-if=\"SubTabConfigVisible\"\r\n        :dialog-visible.sync=\"SubTabConfigVisible\"\r\n        :params=\"tableConfModalParams\"\r\n        @closeCallback=\"refreshTable\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport TableConfModal from './tableConfModal.vue'\r\nimport FormConfModal from './FormConfModal.vue'\r\nimport EnteringDefault from './enteringDefault.vue'\r\nimport getFormConfData from './formConf.js'\r\nimport SubTabConfigModal from './SubTabConfigModal.vue'\r\nexport default {\r\n  name: '',\r\n  components: {\r\n    TableConfModal,\r\n    FormConfModal,\r\n    EnteringDefault,\r\n    SubTabConfigModal\r\n  },\r\n  props: {\r\n    allPropData: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      menuguids: [],\r\n      curConfType: 'table',\r\n      leftVisible: true,\r\n      leftTreeData: [],\r\n      curSplitPaneLeftWidth: 20,\r\n      isShowQueryConditions: false,\r\n      serverUri: 'mp-b-perm-service/v1/tableconf/menuguid',\r\n      treeQueryparams: {\r\n        menuguid: 'test_123456',\r\n        useRight: false,\r\n        batchno: 2,\r\n        datatype: 5,\r\n        eleCode: 'DEPBGTECO',\r\n        sxspecroleguid: '637B6D5A823F459AB313CBF94C87765B'\r\n      },\r\n      treeleftTreeConfig: {\r\n        inputVal: ''\r\n      },\r\n      treeConfig: {\r\n        curRadio: 'zf',\r\n        radioGroup: [\r\n          {\r\n            code: 'zf',\r\n            label: '政府部门树'\r\n          },\r\n          {\r\n            code: 'xuexiao',\r\n            label: '学校树'\r\n          },\r\n          {\r\n            code: 'jigou',\r\n            label: '机构树'\r\n          }\r\n        ]\r\n      },\r\n      leftTreeConfig: {\r\n        inputVal: ''\r\n      },\r\n      pagerConfig: {\r\n        currentPage: 1,\r\n        total: 100\r\n      },\r\n      curTableConfDatas: [],\r\n      currentPage: 1,\r\n      curTableConfDatasMapArr: [\r\n        // {\r\n        //   tableName: '1',\r\n        //   businessTableName: '1',\r\n        //   tableNote: '1',\r\n        //   measuringUnit: 1,\r\n        //   viewOrder: '001',\r\n        //   editableBatch: '001',\r\n        //   tableType: '001',\r\n        //   note: '1',\r\n        //   autoBuiltTables: false,\r\n        //   editble: true,\r\n        //   showCheckbox: true,\r\n        //   canUse: true,\r\n        //   aSingleTable: false,\r\n        //   batchModify: false,\r\n        //   rowConfig: false,\r\n        //   noRecordIsAllowedToReport: true,\r\n        //   subtotalRows: true\r\n        // }\r\n      ],\r\n      curTableConfDatasMap: {},\r\n      globleConfigCp: {\r\n        tableName: '',\r\n        businessTableName: '',\r\n        tableNote: '',\r\n        measuringUnit: '',\r\n        viewOrder: '',\r\n        editableBatch: '',\r\n        tableType: '',\r\n        note: '',\r\n        autoBuiltTables: false,\r\n        editble: true,\r\n        showCheckbox: true,\r\n        canUse: true,\r\n        aSingleTable: false,\r\n        batchModify: false,\r\n        rowConfig: false,\r\n        noRecordIsAllowedToReport: true,\r\n        subtotalRows: true\r\n      },\r\n      toolbarConfig: {\r\n        disabledMoneyConversion: true,\r\n        ...getFormConfData('tableInforConf', 'toolbarConfig')\r\n      },\r\n      tableConfig: getFormConfData('tableInforConf', 'tableConfig'),\r\n      tableColumnsConfig: getFormConfData(\r\n        'tableInforConf',\r\n        'tableColumnsConfig'\r\n      ),\r\n      tableConfModalVisible: false,\r\n      formConfModalVisible: false,\r\n      enteringDefaultVisible: false,\r\n      curLeftTreeClickNode: {},\r\n      enteringDefaultFlag: false,\r\n      SubTabConfigVisible: false\r\n    }\r\n  },\r\n  computed: {\r\n    curNavModule() {\r\n      return this.$store.state.curNavModule\r\n    },\r\n    userInfo() {\r\n      return this.$store.state.userInfo\r\n    }\r\n  },\r\n  methods: {\r\n    deepCopy(obj) {\r\n      // 深拷贝通用方法\r\n      let me = this\r\n      if (typeof obj !== 'object' || obj === null) return obj\r\n      let newObj = obj instanceof Array ? [] : {}\r\n      for (let key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\n          newObj[key] =\r\n            typeof obj[key] === 'object' ? me.deepCopy(obj[key]) : obj[key]\r\n        }\r\n      }\r\n      return newObj\r\n    },\r\n    jsonStringify(columns) {\r\n      // 对象转换成json字符串\r\n      return JSON.stringify(columns, function (key, val) {\r\n        if (typeof val === 'function') {\r\n          return val + ''\r\n        }\r\n        return val\r\n      })\r\n    },\r\n    jsonParse(str) {\r\n      // json字符串转换成对象\r\n      return JSON.parse(str, function (k, v) {\r\n        try {\r\n          if (\r\n            v.indexOf &&\r\n            (v.indexOf('function') > -1 || v.indexOf('=>') > -1)\r\n          ) {\r\n            // return eval('(function(){return ' + v + ' })()')\r\n            // eslint-disable-next-line no-new-func\r\n            let func = new Function('return ' + v)\r\n            return func()\r\n          }\r\n          return v\r\n        } catch (e) {\r\n          return v\r\n        }\r\n      })\r\n    },\r\n    changeInput(val) {\r\n      this.treeleftTreeConfig.inputVal = val\r\n    },\r\n    confrimData(curTree) {\r\n      this.confrimData.curRadio = curTree.code\r\n      switch (curTree.code) {\r\n        case 'zf':\r\n          console.log('切换成政府树条件，加载政府树...')\r\n          break\r\n        case 'xuexiao':\r\n          console.log('切换成学校树条件，加载学校树...')\r\n          this.tabStatusNumConfig['ycl'] = 12\r\n          break\r\n        case 'jigou':\r\n          console.log('切换成机构树条件，加载机构树...')\r\n          break\r\n      }\r\n    },\r\n    onSplitPaneResize(leftWidth) {\r\n      if (leftWidth > 1) {\r\n        this.curSplitPaneLeftWidth = leftWidth\r\n        this.leftVisible = true\r\n      } else {\r\n        this.leftVisible = false\r\n      }\r\n    },\r\n    ajaxData({ currentPage, pageSize }) {\r\n      this.pagerConfig.currentPage = currentPage\r\n      this.queryParams = Object.assign(this.queryParams, {\r\n        currentPage,\r\n        pageSize\r\n      })\r\n      this.getTableDatas(currentPage, pageSize)\r\n    },\r\n    getTableDatas(currentPage, pageSize) {\r\n      // 服务端查询数据\r\n      this.showLoading = true\r\n      let self = this\r\n      this.$http.post('url', this.queryParams).then((res) => {\r\n        if (res.code === 200) {\r\n          self.tableData = res.data.list\r\n          self.pagerConfig = {\r\n            total: res.data.total,\r\n            currentPage: currentPage\r\n          }\r\n          this.showLoading = false\r\n        }\r\n      })\r\n    },\r\n    transformConlumsDataToNest(columns) {\r\n      // columns转化为vxe-table columns数据结构\r\n      let self = this\r\n      columns.forEach((column, columnIndex) => {\r\n        if (Array.isArray(column.children) && column.children.length) {\r\n          column.children = self.transformConlumsDataToNest(column.children)\r\n        } else {\r\n          column[column.renderType] = {\r\n            name: column.renderName, // 渲染器名,\r\n            options: ((params) => {\r\n              if (typeof params === 'object') {\r\n                return self.deepCopy(params)\r\n              } else if (typeof params === 'string') {\r\n                return params\r\n                  ? params.split('+').map((item, index) => {\r\n                    return {\r\n                      value: item.split('#')[0],\r\n                      label: item.split('#')[1]\r\n                    }\r\n                  })\r\n                  : []\r\n              } else {\r\n                return params\r\n              }\r\n            })(column.options), // 下拉数据源\r\n            defaultValue: column.defaultValue, // 默认值\r\n            props: column.props // 额外参数\r\n          }\r\n          delete column._XID\r\n          delete column.renderType\r\n          delete column.renderName\r\n          delete column.options\r\n          delete column.props\r\n          delete column.defaultValue\r\n          delete self.deepCopy(column.props)\r\n        }\r\n      })\r\n      return columns\r\n    },\r\n    transformConlumsDataToSingle(columns) {\r\n      // vxe-table columns数据结构转化为单层columns\r\n      let self = this\r\n      columns.forEach((column, columnIndex) => {\r\n        if (Array.isArray(column.children) && column.children.length) {\r\n          column.children = self.transformConlumsDataToNest(column.children)\r\n        } else {\r\n          if (column.hasOwnProperty('editRender')) {\r\n            column.renderType = 'editRender'\r\n            column.renderName = column.editRender.name\r\n            column = Object.assign(column, self.deepCopy(column.editRender))\r\n            delete column.editRender\r\n          } else if (column.hasOwnProperty('cellRender')) {\r\n            column.renderType = 'cellRender'\r\n            column.renderName = column.cellRender.name\r\n            column = Object.assign(column, self.deepCopy(column.cellRender))\r\n          } else if (column.hasOwnProperty('itemRender')) {\r\n            column.renderType = 'itemRender'\r\n            column.renderName = column.itemRender.name\r\n            column = Object.assign(column, self.deepCopy(column.itemRender))\r\n          } else {\r\n          }\r\n          if (['$select', '$vxeSelect', '$vxeFormSelect', '$vxeSwitch', '$vxeRadio', '$vxeSwitch', '$vxeCheckbox'].indexOf(column.renderName) >= 0) {\r\n            column.options = column.options\r\n              .map((item, index) => {\r\n                return item.value + '#' + item.label\r\n              })\r\n              .join('+')\r\n          }\r\n        }\r\n      })\r\n      return columns\r\n    },\r\n    transformItemsDataToSingle(items) {\r\n      // vxe-table items数据结构转化为单层items\r\n      let self = this\r\n      items.forEach((item, itemIndex) => {\r\n        if (Array.isArray(item.children) && item.children.length) {\r\n          item.children = self.transformConlumsDataToNest(item.children)\r\n        } else {\r\n          if (item.hasOwnProperty('itemRender')) {\r\n            item.renderType = 'itemRender'\r\n            item.renderName = item.itemRender.name\r\n            item = Object.assign(item, self.deepCopy(item.itemRender))\r\n            delete item.itemRender\r\n          }\r\n          if (['$select', '$vxeSelect', '$vxeFormRadio', '$vxeFormSelect', '$vxeSwitch', '$vxeRadio', '$vxeSwitch', '$vxeCheckbox', '$vxeFormCheckbox'].indexOf(item.renderName) >= 0) {\r\n            item.options = Array.isArray(item.options) ? item.options\r\n              .map((item, index) => {\r\n                return item.value + '#' + item.label\r\n              })\r\n              .join('+') : item.options\r\n          }\r\n        }\r\n      })\r\n      return items\r\n    },\r\n    getTableConfByMenuguid(menuguid) {\r\n      // 根据菜单menuguid获取其下所有表配置\r\n      let self = this\r\n      return new Promise((resolve, reject) => {\r\n        self.$http\r\n          .get('mp-b-perm-service/v1/tableconf/menuguid', {\r\n            menuguid: menuguid,\r\n            mof_div_code: self.userInfo.province, // 区划\r\n            fiscalyear: self.userInfo.year // 年份\r\n          })\r\n          .then((res) => {\r\n            if (res.rscode === '100000') {\r\n              resolve(res.data)\r\n              // resolve(self.generateCurTableConfDataMap(res.data))\r\n            }\r\n          })\r\n          .catch((error) => {\r\n            reject(error)\r\n          })\r\n      })\r\n    },\r\n    generateCurTableConfDataMap(curMenuConfs) {\r\n      // 生成当前menu下表格数据映射\r\n      let self = this\r\n      let resultObj = {}\r\n      let curTableConfDatasMap = {}\r\n      let curTableConfDatasMapArr = []\r\n      resultObj.curTableConfDatas = curMenuConfs\r\n      curMenuConfs.forEach((item, index) => {\r\n        let { itemsConfig, globalConfig, formConfig } = self.jsonParse(\r\n          item.configure\r\n        )\r\n        globalConfig = globalConfig || {}\r\n        itemsConfig = itemsConfig || []\r\n        formConfig = formConfig || []\r\n        let globalConfigCp = Object.assign(\r\n          {\r\n            tablename: '',\r\n            businessTableName: '',\r\n            tableNote: '',\r\n            measuringUnit: '',\r\n            viewOrder: '',\r\n            editableBatch: '',\r\n            tableType: '',\r\n            note: '',\r\n            autoBuiltTables: '',\r\n            editble: '',\r\n            showCheckbox: '',\r\n            canUse: '',\r\n            aSingleTable: '',\r\n            batchModify: '',\r\n            rowConfig: '',\r\n            noRecordIsAllowedToReport: '',\r\n            subtotalRows: ''\r\n          },\r\n          globalConfig,\r\n          {\r\n            // tablename: item.tablename,\r\n            type: item.type,\r\n            updatetime: item.updatetime,\r\n            menuname: this.curLeftTreeClickNode.name,\r\n            id: item.id,\r\n            menuguid: item.menuguid\r\n          }\r\n        )\r\n        curTableConfDatasMapArr.push(globalConfigCp)\r\n        curTableConfDatasMap[item.id] = {\r\n          itemsConfig: self.transformConlumsDataToSingle(itemsConfig),\r\n          formConfig: self.transformItemsDataToSingle(formConfig),\r\n          id: item.id,\r\n          globalConfig: globalConfigCp,\r\n          menuguid: item.menuguid,\r\n          type: item.type\r\n        }\r\n      })\r\n      resultObj.curTableConfDatasMapArr = curTableConfDatasMapArr\r\n      resultObj.curTableConfDatasMap = curTableConfDatasMap\r\n      return resultObj\r\n    },\r\n    setLeftMenuTree() {\r\n      // 加载左侧树\r\n      this.leftTreeData = [].concat(this.$store.state.systemMenu)\r\n    },\r\n    onLeftTreeNodeClick(node, leftTree) {\r\n      // 左侧树点击事件\r\n      if (!(Array.isArray(node.children) && node.children.length)) {\r\n        let self = this\r\n        this.curLeftTreeClickNode = node\r\n        this.getTableConfByMenuguid(node.guid).then((res) => {\r\n          self.$message({\r\n            showClose: true,\r\n            message: `当前菜单数据查询成功,共计(${res.length}条)`,\r\n            type: 'success'\r\n          })\r\n          self.curTableConfDatasMapArr = res\r\n        })\r\n      }\r\n    },\r\n    refreshTable() {\r\n      // 刷新表格\r\n      let self = this\r\n      this.getTableConfByMenuguid(this.curLeftTreeClickNode.guid).then(\r\n        (res) => {\r\n          self.$message({\r\n            showClose: true,\r\n            message: '当前菜单数据已刷新',\r\n            type: 'success'\r\n          })\r\n          self.curTableConfDatasMapArr = res\r\n          self.$refs.bsTableRef\r\n            .tableOptionFn()\r\n            .reloadData(self.curTableConfDatasMapArr).then(() => {}).catch(err => {\r\n              console.log(err)\r\n            })\r\n        }\r\n      )\r\n    },\r\n    onEditTableClick() {\r\n      // 编辑点击事件\r\n      let selection = this.$refs.bsTableRef.selection\r\n      if (selection.length === 1) {\r\n        let { itemsConfig, globalConfig, formConfig } = this.jsonParse(\r\n          selection[0].configure\r\n        )\r\n        globalConfig = globalConfig || {}\r\n        itemsConfig = itemsConfig || []\r\n        formConfig = formConfig || []\r\n        this.tableConfModalParams = Object.assign(selection[0], {\r\n          globalConfig: globalConfig,\r\n          itemsConfig: this.transformConlumsDataToSingle(itemsConfig),\r\n          formConfig: this.transformItemsDataToSingle(formConfig)\r\n        })\r\n        this.tableConfModalVisible = true\r\n      } else {\r\n        this.$message({\r\n          showClose: true,\r\n          message: '请选择一条数据进行编辑',\r\n          type: 'info'\r\n        })\r\n      }\r\n    },\r\n    onEditFormClick() {\r\n      // 编辑点击事件\r\n      let selection = this.$refs.bsTableRef.selection\r\n      if (selection.length === 1) {\r\n        let { itemsConfig, globalConfig, formConfig } = this.jsonParse(\r\n          selection[0].configure\r\n        )\r\n        globalConfig = globalConfig || {}\r\n        itemsConfig = itemsConfig || []\r\n        formConfig = formConfig || []\r\n        this.tableConfModalParams = Object.assign(selection[0], {\r\n          globalConfig: globalConfig,\r\n          itemsConfig: this.transformConlumsDataToSingle(itemsConfig),\r\n          formConfig: this.transformItemsDataToSingle(formConfig)\r\n        })\r\n        this.formConfModalVisible = true\r\n      } else {\r\n        this.$message({\r\n          showClose: true,\r\n          message: '请选择一条数据进行编辑',\r\n          type: 'info'\r\n        })\r\n      }\r\n    },\r\n    onEditClick() {\r\n      let selection = this.$refs.bsTableRef.selection\r\n      if (selection.length === 1) {\r\n        let { itemsConfig, globalConfig, subTabConfig, defaultConfig } = this.jsonParse(\r\n          selection[0].configure\r\n        )\r\n        globalConfig = globalConfig || {}\r\n        itemsConfig = itemsConfig || []\r\n        subTabConfig = subTabConfig || {\r\n          buttons: [],\r\n          buttonsInfo: {}\r\n        }\r\n        defaultConfig = defaultConfig || []\r\n        if (selection[0].type === 'form' || selection[0].type === 'formConf' || selection[0].type === 'detail' || selection[0].type === 'detailConf') {\r\n          this.tableConfModalParams = Object.assign(selection[0], {\r\n            globalConfig: globalConfig,\r\n            itemsConfigNest: this.deepCopy(itemsConfig),\r\n            itemsConfig: this.transformItemsDataToSingle(itemsConfig)\r\n          })\r\n          this.formConfModalVisible = true\r\n        } else if (selection[0].type === 'tabPaneConf') {\r\n          this.tableConfModalParams = Object.assign(selection[0], {\r\n            globalConfig: globalConfig,\r\n            itemsConfigNest: this.deepCopy(subTabConfig),\r\n            subTabConfig: subTabConfig\r\n          })\r\n          this.SubTabConfigVisible = true\r\n        } else if (selection[0].type === 'enteringDefault') {\r\n          this.tableConfModalParams = Object.assign(selection[0], {\r\n            globalConfig: globalConfig,\r\n            itemsConfigNest: this.deepCopy(defaultConfig),\r\n            itemsConfig: this.transformConlumsDataToSingle(defaultConfig)\r\n          })\r\n          this.enteringDefaultVisible = true\r\n        } else {\r\n          this.tableConfModalParams = Object.assign(selection[0], {\r\n            globalConfig: globalConfig,\r\n            itemsConfigNest: this.deepCopy(itemsConfig),\r\n            itemsConfig: this.transformConlumsDataToSingle(itemsConfig)\r\n          })\r\n          this.tableConfModalVisible = true\r\n        }\r\n      } else {\r\n        this.$message({\r\n          showClose: true,\r\n          message: '请选择一条数据进行编辑',\r\n          type: 'info'\r\n        })\r\n      }\r\n    },\r\n    onAddClick() {\r\n      let self = this\r\n      this.$refs.bsTableRef.insertRowData({\r\n        data: {\r\n          menuguid: self.curLeftTreeClickNode.guid,\r\n          type: 'table',\r\n          optionType: 'add',\r\n          id: self.$ToolFn.utilFn.getUuid(),\r\n          menuname: self.curLeftTreeClickNode.name,\r\n          tablename: '',\r\n          configure: self.jsonStringify({\r\n            globalConfig: {}, // 全局配置\r\n            itemsConfig: [], // 项配置\r\n            pageConfig: {}, // 分页配置\r\n            editConfig: {}, // 编辑配置\r\n            editRules: {}, // 校验规则\r\n            footerConfig: {}, // 表尾配置\r\n            dataConfig: {\r\n              dataSouceType: 'query'\r\n            },\r\n            subTabConfig: [],\r\n            defaultConfig: [] // 录入默认值\r\n          })\r\n        // menuguid: '123456'\r\n        }\r\n      })\r\n    },\r\n    onDeleteClick() {\r\n      let self = this\r\n      let ids = this.$refs.bsTableRef.selection.map((item, index) => {\r\n        return item.id\r\n      })\r\n      let menuguid = this.$refs.bsTableRef.selection[0].menuguid\r\n      this.menuguids[0] = menuguid\r\n      if (ids.length) {\r\n        self.$confirm('确定删除？', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          self.$http\r\n            .del('mp-b-perm-service/v1/tableconf', {\r\n              mof_div_code: self.userInfo.province, // 区划\r\n              fiscalyear: self.userInfo.year, // 年份s\r\n              ids: ids,\r\n              menuguids: this.menuguids\r\n            })\r\n            .then((res) => {\r\n              if (res.rscode === '100000') {\r\n                self.$message({\r\n                  showClose: true,\r\n                  message: `选中的${ids.length}条数据已删除`,\r\n                  type: 'success'\r\n                })\r\n                self.refreshTable()\r\n                // resolve(self.generateCurTableConfDataMap(res.data))\r\n              }\r\n            })\r\n            .catch((error) => {\r\n              console.log(error)\r\n            })\r\n        }).catch(e => {\r\n          self.$message.success('取消删除成功')\r\n        })\r\n      }\r\n    },\r\n    onTableCellClick({\r\n      row,\r\n      rowIndex,\r\n      $rowIndex,\r\n      column,\r\n      columnIndex,\r\n      $columnIndex,\r\n      triggerRadio,\r\n      triggerCheckbox,\r\n      triggerTreeNode,\r\n      triggerExpandNode,\r\n      $event\r\n    }) {\r\n      // this.tableConfModalParams = this.curTableConfDatasMap[row.id]\r\n      // this.TableConfModalVisible = true\r\n    },\r\n    // 区划默认值\r\n    getProvince() {\r\n      let obj = {\r\n        value: this.userInfo.province,\r\n        label: this.userInfo.admdivname\r\n      }\r\n      let flag = false\r\n      this.tableColumnsConfig[0].editRender.options.forEach(item => {\r\n        if (item.value === this.userInfo.province) {\r\n          flag = true\r\n        }\r\n      })\r\n      if (!flag) {\r\n        this.tableColumnsConfig[0].editRender.options.push(obj)\r\n      }\r\n      this.tableColumnsConfig[0].editRender.defaultValue = this.userInfo.province\r\n    },\r\n    // 编辑的时候录入默认值有个默认id\r\n    editClosed({ row, column }) {\r\n      // enteringDefaultFlag标识，当改过为录入默认值后，再更改才影响id变化\r\n      if (row.type === 'enteringDefault') {\r\n        row.id = 'D9A0B58E5C2242F3860E6D8151C211B2'\r\n        row.id__viewSort = 'D9A0B58E5C2242F3860E6D8151C211B2'\r\n        this.enteringDefaultFlag = true\r\n      } else if (row.type !== 'enteringDefault' && this.enteringDefaultFlag === true) {\r\n        row.id = this.$ToolFn.utilFn.getUuid()\r\n        row.id__viewSort = row.id\r\n        this.enteringDefaultFlag = false\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.setLeftMenuTree()\r\n    if (this.$gloableToolFn.currentProvince === this.$gloableToolFn.FuJian) {\r\n      this.getProvince()\r\n    }\r\n  },\r\n  watch: {\r\n    tableConfModalVisible: {\r\n      handler(newval) {\r\n        // if (!newval) {\r\n        //   this.refreshTable()\r\n        // }\r\n      },\r\n      // deep: true,\r\n      immediate: true\r\n    },\r\n    formConfModalVisible: {\r\n      handler(newval) {\r\n        // if (!newval) {\r\n        //   this.refreshTable()\r\n        // }\r\n      },\r\n      // deep: true,\r\n      immediate: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='scss'>\r\n.left-tree-pane {\r\n  .mmc-title {\r\n    height: 47px;\r\n    padding: 7px 15px;\r\n    line-height: 31px;\r\n    color: #464c5b;\r\n    font-size: 16px;\r\n    box-sizing: border-box;\r\n    border-bottom: 1px solid #dce3f3;\r\n    background-color: #e3f2fe;\r\n  }\r\n}\r\n</style>\r\n"]}]}