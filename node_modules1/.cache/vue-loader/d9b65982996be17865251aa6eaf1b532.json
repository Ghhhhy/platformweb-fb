{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\OperationLog\\operationLog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\OperationLog\\operationLog.vue","mtime":1694505521442},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdPcGVyYXRpb25Mb2cnLA0KICBwcm9wczogew0KICAgIHNob3dMb2dWaWV3OiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgfSwNCiAgICBsb2dzRGF0YTogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4gW10NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxvZ3NEYXRhczogW10sDQogICAgICBhbGxMb2dzRGF0YTogW10sDQogICAgICBzaG93TG9nVmlld3M6IHRoaXMuc2hvd0xvZ1ZpZXcsDQogICAgICBpc1Nob3c6IHRydWUsDQogICAgICBuYW1lczogJ+WxleW8gOabtOWkmicsDQogICAgICBzaG93TW9yZUxpc3Q6IGZhbHNlDQogICAgfQ0KICB9LA0KICBjb21wdXRlZDoge30sDQogIG1ldGhvZHM6IHsNCiAgICBjb2xzZSgpIHsNCiAgICAgIHRoaXMuJHBhcmVudC5zaG93TG9nVmlldyA9IGZhbHNlDQogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6c2hvd0xvZ1ZpZXcnLCBmYWxzZSkgLy8g5pS55Y+Y54i257uE5Lu25Y+C5pWw77yM55SoLnN5bmPotbfmlYgNCiAgICB9LA0KICAgIHNob3dNb3JlKCkgew0KICAgICAgdGhpcy5zaG93TW9yZUxpc3QgPSAhdGhpcy5zaG93TW9yZUxpc3QNCiAgICAgIGxldCBkZWVwVmFsdWUgPSB0aGlzLmRlZXBDb3B5KHRoaXMuYWxsTG9nc0RhdGEpDQogICAgICBpZiAodGhpcy5zaG93TW9yZUxpc3QpIHsNCiAgICAgICAgdGhpcy5sb2dzRGF0YXMgPSBkZWVwVmFsdWUNCiAgICAgICAgdGhpcy5uYW1lcyA9ICfmlLbotbfmm7TlpJonDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLm5hbWVzID0gJ+WxleW8gOabtOWkmicNCiAgICAgICAgdGhpcy5sb2dzRGF0YXMuc3BsaWNlKDMsIHRoaXMubG9nc0RhdGFzLmxlbmd0aCAtIDMpDQogICAgICB9DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmxvZ3NEYXRhcykNCiAgICB9LA0KICAgIGRlZXBDb3B5KG9iaikgew0KICAgICAgLy8g5rex5ou36LSd6YCa55So5pa55rOVDQogICAgICAvLyB2YXIgbmV3X2FyciA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYXJyKSkgLy8g5LiN5LuF5Y+v5ou36LSd5pWw57uE6L+Y6IO95ou36LSd5a+56LGh77yIIOS9huS4jeiDveaLt+i0neWHveaVsO+8iQ0KICAgICAgLy8g5Y+q5ou36LSd5a+56LGhDQogICAgICBsZXQgbWUgPSB0aGlzDQogICAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSByZXR1cm4gb2JqDQogICAgICAvLyDmoLnmja5vYmrnmoTnsbvlnovliKTmlq3mmK/mlrDlu7rkuIDkuKrmlbDnu4Tov5jmmK/kuIDkuKrlr7nosaENCiAgICAgIGxldCBuZXdPYmogPSBvYmogaW5zdGFuY2VvZiBBcnJheSA/IFtdIDoge30NCiAgICAgIGZvciAobGV0IGtleSBpbiBvYmopIHsNCiAgICAgICAgLy8g6YGN5Y6Gb2JqLOW5tuS4lOWIpOaWreaYr29iaueahOWxnuaAp+aJjeaLt+i0nQ0KICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHsNCiAgICAgICAgICAvLyDliKTmlq3lsZ7mgKflgLznmoTnsbvlnovvvIzlpoLmnpzmmK/lr7nosaHpgJLlvZLosIPnlKjmt7Hmi7fotJ0NCiAgICAgICAgICBuZXdPYmpba2V5XSA9DQogICAgICAgICAgICB0eXBlb2Ygb2JqW2tleV0gPT09ICdvYmplY3QnID8gbWUuZGVlcENvcHkob2JqW2tleV0pIDogb2JqW2tleV0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgcmV0dXJuIG5ld09iag0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgfSwNCiAgbW91bnRlZCgpIHt9LA0KICB3YXRjaDogew0KICAgIGxvZ3NEYXRhOiB7DQogICAgICBoYW5kbGVyKG5ld1ZhbHVlKSB7DQogICAgICAgIHRoaXMuYWxsTG9nc0RhdGEgPSB0aGlzLmRlZXBDb3B5KG5ld1ZhbHVlKQ0KICAgICAgICB0aGlzLmxvZ3NEYXRhcyA9IHRoaXMuZGVlcENvcHkobmV3VmFsdWUpDQogICAgICAgIGlmIChuZXdWYWx1ZS5sZW5ndGggPiAzKSB7DQogICAgICAgICAgdGhpcy5pc1Nob3cgPSB0cnVlDQogICAgICAgICAgY29uc29sZS5sb2codGhpcy5sb2dzRGF0YXMubGVuZ3RoIC0gMykNCiAgICAgICAgICB0aGlzLmxvZ3NEYXRhcy5zcGxpY2UoMCwgdGhpcy5sb2dzRGF0YXMubGVuZ3RoIC0gMykNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkZWVwVmFsdWUsIGRlZXBWYWx1ZS5zcGxpY2UoMywgZGVlcFZhbHVlLmxlbmd0aCArIDEpLCBkZWVwVmFsdWUubGVuZ3RoICsgMSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmlzU2hvdyA9IGZhbHNlDQogICAgICAgICAgdGhpcy5sb2dzRGF0YXMgPSB0aGlzLmRlZXBDb3B5KG5ld1ZhbHVlKQ0KICAgICAgICB9DQogICAgICAgIHRoaXMubG9nc0RhdGFzID0gdGhpcy5sb2dzRGF0YXMucmV2ZXJzZSgpDQogICAgICAgIHRoaXMuYWxsTG9nc0RhdGEgPSB0aGlzLmFsbExvZ3NEYXRhLnJldmVyc2UoKQ0KICAgICAgfSwNCiAgICAgIGRlZXA6IHRydWUsDQogICAgICBpbW1lZGlhdGU6IHRydWUNCiAgICB9LA0KICAgIHNob3dMb2dWaWV3OiB7DQogICAgICBoYW5kbGVyKG5ld1ZhbHVlKSB7DQogICAgICAgIHRoaXMuc2hvd0xvZ1ZpZXdzID0gbmV3VmFsdWUNCiAgICAgIH0sDQogICAgICBkZWVwOiB0cnVlLA0KICAgICAgaW1tZWRpYXRlOiB0cnVlDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["operationLog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"operationLog.vue","sourceRoot":"src/components/OperationLog","sourcesContent":["<template>\r\n  <!-- 操作日志 -->\r\n  <el-drawer\r\n    style=\"z-index:5000;\"\r\n    :visible.sync=\"showLogViews\"\r\n    :append-to-body=\"true\"\r\n    :show-close=\"true\"\r\n    size=\"40%\"\r\n    :with-header=\"false\"\r\n    @closed=\"colse\"\r\n  >\r\n    <div class=\"drawer-title\">\r\n      <p>操作日志</p>\r\n    </div>\r\n    <div class=\"drawer-block\">\r\n      <ul>\r\n        <li\r\n          v-for=\"(log, index) in logsDatas\"\r\n          :key=\"log.logId\"\r\n        >\r\n          <div class=\"drawer-circular\"></div>\r\n          <div class=\"drawer-straight\">{{ log.actionName }}</div>\r\n          <div class=\"drawer-right\">\r\n            <div class=\"journal\">\r\n              <!-- <p>{{ log.nodeName }}</p> -->\r\n              <p>操作人员： {{ log.actionUser }}      &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp 操作时间： {{ log.actionTime }}</p>\r\n            </div>\r\n            <div class=\"journal-buttom\">\r\n              <!-- <p>{{ log.dutyName }}</p> -->\r\n              <p v-if=\"logsDatas[index].message !== ''\"> 意见：{{ log.message }}</p>\r\n            </div>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n      <button v-if=\"isShow\" class=\"Morebutton\" @click=\"showMore\">{{ names }}&nbsp<img :style=\"showMoreList ? 'transform: scaleY(-1);' : ''\" src=\"@/assets/img/focusPayment/drop-down-arrow.svg\" alt=\"\"></button>\r\n    </div>\r\n  </el-drawer>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'OperationLog',\r\n  props: {\r\n    showLogView: {\r\n      type: Boolean,\r\n      default() {\r\n        return false\r\n      }\r\n    },\r\n    logsData: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      logsDatas: [],\r\n      allLogsData: [],\r\n      showLogViews: this.showLogView,\r\n      isShow: true,\r\n      names: '展开更多',\r\n      showMoreList: false\r\n    }\r\n  },\r\n  computed: {},\r\n  methods: {\r\n    colse() {\r\n      this.$parent.showLogView = false\r\n      this.$emit('update:showLogView', false) // 改变父组件参数，用.sync起效\r\n    },\r\n    showMore() {\r\n      this.showMoreList = !this.showMoreList\r\n      let deepValue = this.deepCopy(this.allLogsData)\r\n      if (this.showMoreList) {\r\n        this.logsDatas = deepValue\r\n        this.names = '收起更多'\r\n      } else {\r\n        this.names = '展开更多'\r\n        this.logsDatas.splice(3, this.logsDatas.length - 3)\r\n      }\r\n      console.log(this.logsDatas)\r\n    },\r\n    deepCopy(obj) {\r\n      // 深拷贝通用方法\r\n      // var new_arr = JSON.parse(JSON.stringify(arr)) // 不仅可拷贝数组还能拷贝对象（ 但不能拷贝函数）\r\n      // 只拷贝对象\r\n      let me = this\r\n      if (typeof obj !== 'object' || obj === null) return obj\r\n      // 根据obj的类型判断是新建一个数组还是一个对象\r\n      let newObj = obj instanceof Array ? [] : {}\r\n      for (let key in obj) {\r\n        // 遍历obj,并且判断是obj的属性才拷贝\r\n        if (obj.hasOwnProperty(key)) {\r\n          // 判断属性值的类型，如果是对象递归调用深拷贝\r\n          newObj[key] =\r\n            typeof obj[key] === 'object' ? me.deepCopy(obj[key]) : obj[key]\r\n        }\r\n      }\r\n      return newObj\r\n    }\r\n  },\r\n  created() {\r\n  },\r\n  mounted() {},\r\n  watch: {\r\n    logsData: {\r\n      handler(newValue) {\r\n        this.allLogsData = this.deepCopy(newValue)\r\n        this.logsDatas = this.deepCopy(newValue)\r\n        if (newValue.length > 3) {\r\n          this.isShow = true\r\n          console.log(this.logsDatas.length - 3)\r\n          this.logsDatas.splice(0, this.logsDatas.length - 3)\r\n          // console.log(deepValue, deepValue.splice(3, deepValue.length + 1), deepValue.length + 1)\r\n        } else {\r\n          this.isShow = false\r\n          this.logsDatas = this.deepCopy(newValue)\r\n        }\r\n        this.logsDatas = this.logsDatas.reverse()\r\n        this.allLogsData = this.allLogsData.reverse()\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    },\r\n    showLogView: {\r\n      handler(newValue) {\r\n        this.showLogViews = newValue\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.el-drawer{\r\n  overflow-y:auto;\r\n}\r\n.drawer-title{\r\n  height:48px;\r\n  width:100%;\r\n  border-bottom: 1px solid #E8E8E8;\r\n  p{\r\n    font-size: 16px;\r\n    line-height: 48px;\r\n    color:#1D1F25;\r\n    padding-left:14px;\r\n    font-weight: bold;\r\n  }\r\n}\r\n.drawer-block{\r\n  margin-bottom: 48px;\r\n  .Morebutton{\r\n    img{\r\n      position: relative;\r\n      top: -3px;\r\n      left: 5px;\r\n    }\r\n    padding-right: 7px;\r\n    width:96px;\r\n    height:32px;\r\n    font-size: 12px;\r\n    line-height: 22px;\r\n    border:1px solid #CCD2D8;\r\n    border-radius: 5%;\r\n    margin-left: 12px;\r\n    background:#fff;\r\n    color:rgb(57, 57, 61);\r\n  }\r\n  ul{\r\n    margin-bottom: -10px;\r\n    li:first-child{\r\n      margin-top:24px;\r\n      .drawer-circular{\r\n        margin-left:15px;\r\n        width: 20px;\r\n        height: 20px;\r\n        background:url(../../assets/img/focusPayment/提交节点icon.svg);\r\n        border-radius: 50%;\r\n      }\r\n      .drawer-straight{\r\n        position: relative;\r\n        left: 30px;\r\n        top:-20px;\r\n        height: 20px;\r\n        font-size: 14px;\r\n        font-weight: bold;\r\n        line-height: 20px;\r\n        // border-left: 2px solid #E4E7ED;\r\n      }\r\n      .drawer-right{\r\n        top:-17px;\r\n      }\r\n    }\r\n    li:last-child{\r\n      .drawer-right{\r\n        padding-bottom: 24px;\r\n        .journal{\r\n          margin-top:5px;\r\n        }\r\n      }\r\n    }\r\n    li{\r\n      .drawer-circular{\r\n        margin-left:20px;\r\n        width: 8px;\r\n        height: 8px;\r\n        // position: absolute;\r\n        background:rgb(121, 124, 131);\r\n        border-radius: 50%;\r\n      }\r\n      .drawer-straight{\r\n        margin-left:21px;\r\n        position: relative;\r\n        left: 30px;\r\n        top:-15px;\r\n        height: 20px;\r\n        font-size: 14px;\r\n        font-weight: bold;\r\n        line-height: 20px;\r\n        color:#2E3133;\r\n      }\r\n      .drawer-right{\r\n        box-sizing:border-box;\r\n        padding-bottom: 10px;\r\n        border-left: 2px solid #E4E7ED;\r\n        left: 24px;\r\n        position: relative;\r\n        padding-left: 24px;\r\n        top: -10px;\r\n        .journal{\r\n          margin-right: 48px;\r\n          margin-top:5px;\r\n          p{\r\n            font-size: 12px;\r\n            line-height: 17px;\r\n            color:#5C6166\r\n          }\r\n          display: flex;\r\n          justify-content: space-between;\r\n        }\r\n        .journal-buttom{\r\n          padding-left: 15px;\r\n          margin-right: 48px;\r\n          overflow: hidden;\r\n          min-height: 30px;\r\n          // height:40px;\r\n          p:nth-child(1){\r\n            // padding:12px 0 0 16px;\r\n            font-size: 12px;\r\n            min-height: 30px;\r\n            word-wrap: break-word;\r\n            word-break: break-all;\r\n            margin-top: 5px;\r\n            color:#5C6166;\r\n            line-height: 30px\r\n          }\r\n          p:nth-child(2){\r\n            // padding:12px 0 0 16px;\r\n            //height: 30px;\r\n            word-break: break-all;\r\n            line-height: 30px;\r\n            // border-top: 5px solid white;\r\n            font-size: 12px;\r\n            // line-height: 17px;\r\n            color:#5C6166\r\n          }\r\n          background: var(--hightlight-color) 100%\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}