{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\PrintDrawer\\PrintDrawerMultiply.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\components\\PrintDrawer\\PrintDrawerMultiply.vue","mtime":1694505521442},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBwcm9jb25mIH0gZnJvbSAnLi9QcmludERyYXdlck11bHRpcGx5LmpzJw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnQnNQcmludERyYXdlcicsDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGlzVmlzaWJsZTogZmFsc2UsDQogICAgICB0b29sQmFyU3RhdHVzQnRuQ29uZmlnOiB7DQogICAgICAgIGNoYW5nZUJ0bnM6IHRydWUsDQogICAgICAgIGJ1dHRvbnM6IHByb2NvbmYudG9vbEJhclN0YXR1c0J1dHRvbiwNCiAgICAgICAgY3VyQnV0dG9uOiB7DQogICAgICAgICAgdHlwZTogJ2J1dHRvbicsDQogICAgICAgICAgaWNvbk5hbWU6ICdiYXNlLXpoaWJhaW8ucG5nJywNCiAgICAgICAgICBpY29uTmFtZUFjdGl2ZTogJ2Jhc2UtemhpYmFpby1hY3RpdmUucG5nJywNCiAgICAgICAgICBpY29uVXJsOiAnJywNCiAgICAgICAgICBsYWJlbDogJ+i9rOi0puaUr+elqOWNlScsDQogICAgICAgICAgY29kZTogJzEnLA0KICAgICAgICAgIGN1clZhbHVlOiAnMScNCiAgICAgICAgfSwNCiAgICAgICAgbWV0aG9kczogew0KICAgICAgICAgIGJzVG9vbGJhckNsaWNrRXZlbnQ6IHRoaXMub25TdGF0dXNUYWJDbGljaw0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgdG9vbEJhclN0YXR1czogew0KICAgICAgICB0eXBlOiAnYnV0dG9uJywNCiAgICAgICAgaWNvbk5hbWU6ICdiYXNlLXpoaWJhaW8ucG5nJywNCiAgICAgICAgaWNvbk5hbWVBY3RpdmU6ICdiYXNlLXpoaWJhaW8tYWN0aXZlLnBuZycsDQogICAgICAgIGljb25Vcmw6ICcnLA0KICAgICAgICBsYWJlbDogJ+i9rOi0puaUr+elqOWNlScsDQogICAgICAgIGNvZGU6ICcxJywNCiAgICAgICAgY3VyVmFsdWU6ICcxJw0KICAgICAgfSwNCiAgICAgIHRvb2xCYXJTdGF0dXNTZWxlY3Q6IHsNCiAgICAgICAgdHlwZTogJ2J1dHRvbicsDQogICAgICAgIGljb25OYW1lOiAnYmFzZS16aGliYWlvLnBuZycsDQogICAgICAgIGljb25OYW1lQWN0aXZlOiAnYmFzZS16aGliYWlvLWFjdGl2ZS5wbmcnLA0KICAgICAgICBpY29uVXJsOiAnJywNCiAgICAgICAgbGFiZWw6ICfovazotKbmlK/npajljZUnLA0KICAgICAgICBjb2RlOiAnMScsDQogICAgICAgIGN1clZhbHVlOiAnMScNCiAgICAgIH0sDQogICAgICB1c2VySW5mbzoge30sDQogICAgICBtZW51SWQ6ICcnLA0KICAgICAgdG9rZW5pZDogJycsDQogICAgICByb2xlZ3VpZDogJycNCiAgICB9DQogIH0sDQogIHByb3BzOiB7DQogICAgdGl0bGU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICflh63or4HmiZPljbAnDQogICAgfSwNCiAgICB2aXNpYmxlOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogZmFsc2UNCiAgICB9LA0KICAgIGd1aWRzOiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIGRlZmF1bHQoKSB7DQogICAgICAgIHJldHVybiBbXQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8gY3B05ZCN5a2XDQogICAgY3B0OiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAnenp6cCcNCiAgICB9LA0KICAgIGR6Q3B0OiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAnJw0KICAgIH0sDQogICAgLy8g5piv5ZCm6LWw5bel5L2c5rWB77yM6ZmV6KW/6LWw77yM5ZCJ5p6X5LiN6LWwDQogICAgaXNXb3JrRmxvdzogew0KICAgICAgdHlwZTogQm9vbGVhbiwNCiAgICAgIGRlZmF1bHQ6IHRydWUNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBjbG9zZSgpIHsNCiAgICAgIHRoaXMuJGVtaXQoJ29uQ2xvc2UnKQ0KICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZQ0KICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOnZpc2libGUnLCB0aGlzLmlzVmlzaWJsZSkNCiAgICB9LA0KICAgIC8vIOWIh+aNoueKtuaAgeagjw0KICAgIG9uU3RhdHVzVGFiQ2xpY2sob2JqKSB7DQogICAgICBpZiAoIW9iai50eXBlKSB7DQogICAgICAgIHJldHVybg0KICAgICAgfQ0KICAgICAgdGhpcy50b29sQmFyU3RhdHVzU2VsZWN0ID0gb2JqDQogICAgICBzd2l0Y2ggKG9iai5jdXJWYWx1ZSkgew0KICAgICAgICBjYXNlICcxJzogLy8g6L2s6LSm5pSv56WoDQogICAgICAgICAgdGhpcy5jaGVja1JlcG9ydCh0aGlzLmNwdCkNCiAgICAgICAgICBicmVhaw0KICAgICAgICBjYXNlICcyJzogLy8g55S15rGH5Y2VDQogICAgICAgICAgdGhpcy5jaGVja1JlcG9ydCh0aGlzLmR6Q3B0KQ0KICAgICAgICAgIGJyZWFrDQogICAgICB9DQogICAgfSwNCiAgICBjaGVja1JlcG9ydChjcHQpIHsNCiAgICAgIGxldCBzcWxJbiA9ICcnDQogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5ndWlkcy5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgICAgc3dpdGNoIChpbmRleCkgew0KICAgICAgICAgIGNhc2UgMDoNCiAgICAgICAgICAgIHNxbEluID0gdGhpcy5ndWlkc1tpbmRleF0gKyAnXCcsJw0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICBjYXNlIHRoaXMuZ3VpZHMubGVuZ3RoIC0gMToNCiAgICAgICAgICAgIHNxbEluID0gc3FsSW4gKyAnXCcnICsgdGhpcy5ndWlkc1tpbmRleF0NCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgIHNxbEluID0gc3FsSW4gKyAnXCcnICsgdGhpcy5ndWlkc1tpbmRleF0gKyAnXCcsJw0KICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMuZ3VpZHMubGVuZ3RoID09PSAxKSB7DQogICAgICAgIHNxbEluID0gdGhpcy5ndWlkc1swXQ0KICAgICAgfQ0KICAgICAgbGV0IHVybCA9IHRoaXMuJGdsb2FibGVUb29sRm4uZ2V0UmVwb3J0VXJsKCkgKyAnL2ZpbmUtcmVwb3J0L2Jvc3MvUmVwb3J0U2VydmVyP3JlcG9ydGxldD0nICsgY3B0ICsgJy5jcHQmaWQ9JyArIHNxbEluICsgJyZ4PTEnICsgJyZtZW51Z3VpZD0nICsgdGhpcy5tZW51SWQgKw0KICAgICAgICAnJnJvbGVndWlkPScgKyB0aGlzLnJvbGVndWlkICsgJyZ0b2tlbmlkPScgKyB0aGlzLnRva2VuaWQgKyAnJnVzZXJndWlkPScgKyB0aGlzLnVzZXJJbmZvLmd1aWQgKyAnJmZpc2NhbF95ZWFyPScgKyB0aGlzLnVzZXJJbmZvLnllYXIgKyAnJm1vZl9kaXZfY29kZT0nICsgdGhpcy51c2VySW5mby5wcm92aW5jZQ0KICAgICAgbGV0IHNyYyA9ICc8aWZyYW1lIGZyYW1lYm9yZGVyPW5vIHdpZHRoPTEwMCUgaGVpZ2h0PTEwMCUgc3JjPScgKyB1cmwgKyAnPjwvaWZyYW1lPicNCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdSZXBvcnRDcHRJZCcpLmlubmVySFRNTCA9IHNyYw0KICAgIH0sDQogICAgLy8g5paw5aKe5oiQ5Yqf5ZCO5YiH5o2i54q25oCB5oyJ6ZKuDQogICAgb25BZGRTdWNjZXNzKCkgew0KICAgICAgdGhpcy4kcmVmcy50YWJQYW5lbC5pbml0VGFiU3RhdHVzQnRuQ29uZmlnKCkNCiAgICB9LA0KICAgIGRvUHJpbnQoKSB7DQogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmiZPljbDlh63or4EnLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLiRlbWl0KCdwcmludCcpDQogICAgICAgIHRoaXMuY2xvc2UoKQ0KICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICB0eXBlOiAnaW5mbycsDQogICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOaJk+WNsCcNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KDQogIH0sDQogIHdhdGNoOiB7DQogICAgdmlzaWJsZTogew0KICAgICAgaGFuZGxlcihuZXdWYWx1ZSkgew0KICAgICAgICBsZXQgc2VsZiA9IHRoaXMNCiAgICAgICAgdGhpcy50b2tlbmlkID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRMb2dpbkF1dGhlbnRpY2F0aW9uLnRva2VuaWQNCiAgICAgICAgdGhpcy5yb2xlZ3VpZCA9IHRoaXMuJHN0b3JlLnN0YXRlLmN1ck5hdk1vZHVsZS5yb2xlZ3VpZA0KICAgICAgICB0aGlzLm1lbnVJZCA9IHRoaXMuJHN0b3JlLnN0YXRlLmN1ck5hdk1vZHVsZS5ndWlkDQogICAgICAgIHRoaXMudXNlckluZm8gPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbw0KICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IG5ld1ZhbHVlDQogICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTp2aXNpYmxlJywgbmV3VmFsdWUpDQogICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gdHJ1ZSkgew0KICAgICAgICAgIHNlbGYudG9vbEJhclN0YXR1c0J0bkNvbmZpZy5jdXJCdXR0b24gPSBzZWxmLnRvb2xCYXJTdGF0dXMNCiAgICAgICAgICBzZWxmLm9uQWRkU3VjY2VzcygpDQogICAgICAgICAgc2V0VGltZW91dCh0aGlzLmNoZWNrUmVwb3J0KHRoaXMuY3B0KSwgMTApDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg0K"},{"version":3,"sources":["PrintDrawerMultiply.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PrintDrawerMultiply.vue","sourceRoot":"src/components/PrintDrawer","sourcesContent":["<template>\r\n  <el-drawer\r\n    size=\"50%\"\r\n    :visible.sync=\"isVisible\"\r\n    class=\"print\"\r\n    @close=\"close\"\r\n  >\r\n    <div slot=\"title\">{{ title }}</div>\r\n    <BsTabPanel\r\n      ref=\"tabPanel\"\r\n      :show-zero=\"false\"\r\n      :tab-status-btn-config=\"toolBarStatusBtnConfig\"\r\n      :is-open=\"false\"\r\n      :is-hide-query=\"true\"\r\n    />\r\n    <div id=\"ReportCptId\"></div>\r\n    <div v-if=\"isWorkFlow\" style=\"float:right;margin:10px 10px 0 0\">\r\n      <vxe-button @click=\"doPrint\">打印(到下一岗)</vxe-button>\r\n      <vxe-button @click=\"close\">取消</vxe-button>\r\n    </div>\r\n  </el-drawer>\r\n</template>\r\n\r\n<script>\r\nimport { proconf } from './PrintDrawerMultiply.js'\r\nexport default {\r\n  name: 'BsPrintDrawer',\r\n  data() {\r\n    return {\r\n      isVisible: false,\r\n      toolBarStatusBtnConfig: {\r\n        changeBtns: true,\r\n        buttons: proconf.toolBarStatusButton,\r\n        curButton: {\r\n          type: 'button',\r\n          iconName: 'base-zhibaio.png',\r\n          iconNameActive: 'base-zhibaio-active.png',\r\n          iconUrl: '',\r\n          label: '转账支票单',\r\n          code: '1',\r\n          curValue: '1'\r\n        },\r\n        methods: {\r\n          bsToolbarClickEvent: this.onStatusTabClick\r\n        }\r\n      },\r\n      toolBarStatus: {\r\n        type: 'button',\r\n        iconName: 'base-zhibaio.png',\r\n        iconNameActive: 'base-zhibaio-active.png',\r\n        iconUrl: '',\r\n        label: '转账支票单',\r\n        code: '1',\r\n        curValue: '1'\r\n      },\r\n      toolBarStatusSelect: {\r\n        type: 'button',\r\n        iconName: 'base-zhibaio.png',\r\n        iconNameActive: 'base-zhibaio-active.png',\r\n        iconUrl: '',\r\n        label: '转账支票单',\r\n        code: '1',\r\n        curValue: '1'\r\n      },\r\n      userInfo: {},\r\n      menuId: '',\r\n      tokenid: '',\r\n      roleguid: ''\r\n    }\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: '凭证打印'\r\n    },\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    guids: {\r\n      type: Array,\r\n      default() {\r\n        return []\r\n      }\r\n    },\r\n    // cpt名字\r\n    cpt: {\r\n      type: String,\r\n      default: 'zzzp'\r\n    },\r\n    dzCpt: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    // 是否走工作流，陕西走，吉林不走\r\n    isWorkFlow: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.$emit('onClose')\r\n      this.isVisible = false\r\n      this.$emit('update:visible', this.isVisible)\r\n    },\r\n    // 切换状态栏\r\n    onStatusTabClick(obj) {\r\n      if (!obj.type) {\r\n        return\r\n      }\r\n      this.toolBarStatusSelect = obj\r\n      switch (obj.curValue) {\r\n        case '1': // 转账支票\r\n          this.checkReport(this.cpt)\r\n          break\r\n        case '2': // 电汇单\r\n          this.checkReport(this.dzCpt)\r\n          break\r\n      }\r\n    },\r\n    checkReport(cpt) {\r\n      let sqlIn = ''\r\n      for (let index = 0; index < this.guids.length; index++) {\r\n        switch (index) {\r\n          case 0:\r\n            sqlIn = this.guids[index] + '\\','\r\n            break\r\n          case this.guids.length - 1:\r\n            sqlIn = sqlIn + '\\'' + this.guids[index]\r\n            break\r\n          default:\r\n            sqlIn = sqlIn + '\\'' + this.guids[index] + '\\','\r\n            break\r\n        }\r\n      }\r\n      if (this.guids.length === 1) {\r\n        sqlIn = this.guids[0]\r\n      }\r\n      let url = this.$gloableToolFn.getReportUrl() + '/fine-report/boss/ReportServer?reportlet=' + cpt + '.cpt&id=' + sqlIn + '&x=1' + '&menuguid=' + this.menuId +\r\n        '&roleguid=' + this.roleguid + '&tokenid=' + this.tokenid + '&userguid=' + this.userInfo.guid + '&fiscal_year=' + this.userInfo.year + '&mof_div_code=' + this.userInfo.province\r\n      let src = '<iframe frameborder=no width=100% height=100% src=' + url + '></iframe>'\r\n      document.getElementById('ReportCptId').innerHTML = src\r\n    },\r\n    // 新增成功后切换状态按钮\r\n    onAddSuccess() {\r\n      this.$refs.tabPanel.initTabStatusBtnConfig()\r\n    },\r\n    doPrint() {\r\n      this.$confirm('此操作将打印凭证', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.$emit('print')\r\n        this.close()\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消打印'\r\n        })\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n\r\n  },\r\n  watch: {\r\n    visible: {\r\n      handler(newValue) {\r\n        let self = this\r\n        this.tokenid = this.$store.getters.getLoginAuthentication.tokenid\r\n        this.roleguid = this.$store.state.curNavModule.roleguid\r\n        this.menuId = this.$store.state.curNavModule.guid\r\n        this.userInfo = this.$store.state.userInfo\r\n        this.isVisible = newValue\r\n        this.$emit('update:visible', newValue)\r\n        if (newValue === true) {\r\n          self.toolBarStatusBtnConfig.curButton = self.toolBarStatus\r\n          self.onAddSuccess()\r\n          setTimeout(this.checkReport(this.cpt), 10)\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n<style lang=\"scss\">\r\n.print{\r\n  #ReportCptId{\r\n    height: 500px;\r\n  }\r\n}\r\n</style>\r\n"]}]}