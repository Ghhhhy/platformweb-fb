{"remainingRequest":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\monitor\\children\\mofDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\src\\views\\main\\monitor\\children\\mofDialog.vue","mtime":1694505522810},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\何小龙\\Desktop\\platformweb-fb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBpbXBvcnQgeyBwcm9jb25mIH0gZnJvbSAnLi4vU3lzdGVtTGV2ZWxSdWxlc0Zsb3cuanMnDQppbXBvcnQgSHR0cE1vZHVsZSBmcm9tICdAL2FwaS9mcmFtZS9tYWluL01vbml0b3JpbmcvbGV2ZWxSdWxlcy5qcycNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ01vZkRpYWxvZycsDQogIGNvbXBvbmVudHM6IHt9LA0KICBjb21wdXRlZDogew0KICAgIGN1ck5hdk1vZHVsZSgpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jdXJOYXZNb2R1bGUNCiAgICB9DQogIH0sDQogIHByb3BzOiB7DQogICAgYWRkUGFyYW06IHsNCiAgICAgIHR5cGU6IE9iamVjdCwNCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgew0KICAgICAgICByZXR1cm4ge30NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHJpZ2h0VHJlZVZhbHVlOiBbXSwNCiAgICAgIHRyZWVEYXRhOiBbXSwNCiAgICAgIGRpc2FibGVkOiBmYWxzZSwNCiAgICAgIHNjb3BlOiBbXSwNCiAgICAgIG1vZlNob3c6IHRydWUNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnZXRDaGlsZHJlbk5ld0RhdGEoZGF0YXMpIHsNCiAgICAgIGxldCB0aGF0ID0gdGhpcw0KICAgICAgZGF0YXMuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaXRlbS5sYWJlbCA9IGl0ZW0udGV4dA0KICAgICAgICBpdGVtLmNvZGUgPSBpdGVtLmlkDQogICAgICAgIGl0ZW0uZ3VpZCA9IGl0ZW0uaWQNCiAgICAgICAgaXRlbS5uYW1lID0gaXRlbS50ZXh0DQogICAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7DQogICAgICAgICAgdGhhdC5nZXRDaGlsZHJlbk5ld0RhdGEoaXRlbS5jaGlsZHJlbikNCiAgICAgICAgfQ0KICAgICAgfSkNCg0KICAgICAgcmV0dXJuIGRhdGFzDQogICAgfSwNCiAgICBvbk5vZGVDaGVja0NsaWNrKGRhdGEpIHsNCiAgICAgIGNvbnNvbGUubG9nKGRhdGEubm9kZXMpDQogICAgICBsZXQgYXJyID0gW10NCiAgICAgIGRhdGEubm9kZXMuZm9yRWFjaChpdGVtID0+IHsNCiAgICAgICAgaWYgKGl0ZW0uaXNsZWFmKSB7DQogICAgICAgICAgbGV0IG9iaiA9IHsNCiAgICAgICAgICAgIG1vZkRpdkNvZGU6ICcnLA0KICAgICAgICAgICAgYWdlbmN5Q29kZTogJycsDQogICAgICAgICAgICBtb2ZEaXY6ICcnDQogICAgICAgICAgfQ0KICAgICAgICAgIG9iai5tb2ZEaXZJZCA9IGl0ZW0uY29kZQ0KICAgICAgICAgIG9iai5tb2ZEaXZDb2RlID0gaXRlbS5uYW1lLnNwbGl0KCctJylbMF0NCiAgICAgICAgICBhcnIucHVzaChvYmoubW9mRGl2Q29kZSkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHRoaXMuc2NvcGUgPSBhcnINCiAgICB9LA0KICAgIGRpYWxvZ0Nsb3NlKCkgew0KICAgICAgdGhpcy4kcGFyZW50Lm1vZlNob3cgPSBmYWxzZQ0KICAgIH0sDQogICAgLy8g5aSE55CG5a2X56ym5LiyDQogICAgZGVhbHdpdGhTdHIoc3RyKSB7DQogICAgICBsZXQgcmVzdWx0ID0gJycNCiAgICAgIGlmIChzdHIpIHsNCiAgICAgICAgaWYgKHN0ci5zdWJzdHJpbmcoc3RyLmxlbmd0aCAtIDcpID09PSAnMDAwMDAwMCcpIHsNCiAgICAgICAgICByZXN1bHQgPSAnNjEnDQogICAgICAgIH0gZWxzZSBpZiAoc3RyLnN1YnN0cmluZyhzdHIubGVuZ3RoIC0gNSkgPT09ICcwMDAwMCcpIHsNCiAgICAgICAgICByZXN1bHQgPSBzdHIuc3Vic3RyaW5nKDAsIDQpDQogICAgICAgIH0gZWxzZSBpZiAoc3RyLnN1YnN0cmluZyhzdHIubGVuZ3RoIC0gMykgPT09ICcwMDAnKSB7DQogICAgICAgICAgcmVzdWx0ID0gc3RyLnN1YnN0cmluZygwLCA2KQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJlc3VsdCA9IHN0cg0KICAgICAgICB9DQogICAgICAgIHJldHVybiByZXN1bHQNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOiOt+WPlueUn+aViOiMg+WbtA0KICAgIGdldFdoZXJlVHJlZSgpIHsNCiAgICAgIGxldCB0aGF0ID0gdGhpcw0KICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuZGVhbHdpdGhTdHIodGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ucHJvdmluY2UpDQogICAgICAvLyB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby5vcmdDb2RlDQogICAgICBsZXQgcGFyYW0gPSB7DQogICAgICAgIHdoZXJlc3FsOiAnYW5kIGNvZGUgbGlrZSBcJycgKyByZXN1bHQgKyAnJVwnJywNCiAgICAgICAgZWxlbWVudENvZGU6ICdhZG1kaXYnLA0KICAgICAgICAvLyBlbGVtZW50Q29kZTogJ0FHRU5DWScsDQogICAgICAgIHllYXI6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLnllYXIsDQogICAgICAgIHByb3ZpbmNlOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby5wcm92aW5jZQ0KICAgICAgfQ0KICAgICAgLy8gbGV0IHJlZ3VsYXRpb25UeXBlID0gdGhpcy4kc3RvcmUuc3RhdGUuY3VyTmF2TW9kdWxlLmZfRnVsbE5hbWUuc3Vic3RyaW5nKDAsIDMpDQogICAgICBIdHRwTW9kdWxlLmdldFRyZWV3aGVyZShwYXJhbSkudGhlbihyZXMgPT4gew0KICAgICAgICB0aGF0LnRyZWVEYXRhID0gdGhhdC5nZXRDaGlsZHJlbk5ld0RhdGEocmVzLmRhdGEpDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5L+d5a2Y5paw5aKe55qE6K6h5YiS5L+h5oGvDQogICAgZG9JbnNlcnQoKSB7DQogICAgICBjb25zb2xlLmxvZygnLSstJywgdGhpcy5zY29wZSkNCiAgICAgIC8vIHRoaXMuYWRkUGFyYW0ubW9mDQogICAgICBIdHRwTW9kdWxlLndhcm5Mb2dBZGQodGhpcy5hZGRQYXJhbSkudGhlbigocmVzKSA9PiB7DQogICAgICAgIHRoaXMuYWRkTG9hZGluZyA9IGZhbHNlDQogICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAwMDAwMCcpIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aWsOWinuaIkOWKnycpDQogICAgICAgICAgdGhpcy4kcGFyZW50LmFkZERpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICAgIHRoaXMuJHBhcmVudC5xdWVyeVRhYmxlRGF0YXMoKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfQ0KICB9LA0KICB3YXRjaDogew0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGNvbnNvbGUubG9nKCd4eHgtLS14eHgnKQ0KICAgIHRoaXMuZ2V0V2hlcmVUcmVlKCkNCiAgfQ0KfQ0K"},{"version":3,"sources":["mofDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mofDialog.vue","sourceRoot":"src/views/main/monitor/children","sourcesContent":["<!--单位用款申请(按计划)录入新增页面弹框-->\r\n<template>\r\n  <vxe-modal\r\n    v-model=\"mofShow\"\r\n    title=\"生效范围\"\r\n    width=\"80%\"\r\n    height=\"90%\"\r\n    :show-footer=\"false\"\r\n    @close=\"dialogClose\"\r\n  >\r\n    <!--生效范围-->\r\n    <div class=\"payVoucherInput\" style=\"margin-top:50px;\">\r\n      <div>\r\n        <el-row>\r\n          <el-col :span=\"12\">\r\n            <el-container>\r\n              <el-main width=\"100%\">\r\n                <el-row>\r\n                  <div class=\"sub-title-add\" style=\"width:100px;float:left;margin-top:8px\"><font color=\"red\">*</font>&nbsp;生效范围</div>\r\n                  <BsTree\r\n                    ref=\"rightTree\"\r\n                    v-model=\"rightTreeValue\"\r\n                    :tree-data=\"treeData\"\r\n                    :config=\"{ multiple: true, rootName: '全部', disabled: false }\"\r\n                    @onNodeCheckClick=\"onNodeCheckClick\"\r\n                  />\r\n                </el-row>\r\n              </el-main>\r\n            </el-container>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n      <div slot=\"footer\" style=\"height: 80px; margin: 0 15px;float: right\">\r\n        <div type=\"flex\" justify=\"space-around\">\r\n          <div>\r\n            <vxe-button status=\"primary\" @click=\"doInsert\">执行</vxe-button>\r\n            <vxe-button @click=\"dialogClose\">取消</vxe-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </vxe-modal>\r\n</template>\r\n<script>\r\n// import { proconf } from '../SystemLevelRulesFlow.js'\r\nimport HttpModule from '@/api/frame/main/Monitoring/levelRules.js'\r\nexport default {\r\n  name: 'MofDialog',\r\n  components: {},\r\n  computed: {\r\n    curNavModule() {\r\n      return this.$store.state.curNavModule\r\n    }\r\n  },\r\n  props: {\r\n    addParam: {\r\n      type: Object,\r\n      default: function _default() {\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      rightTreeValue: [],\r\n      treeData: [],\r\n      disabled: false,\r\n      scope: [],\r\n      mofShow: true\r\n    }\r\n  },\r\n  methods: {\r\n    getChildrenNewData(datas) {\r\n      let that = this\r\n      datas.forEach(item => {\r\n        item.label = item.text\r\n        item.code = item.id\r\n        item.guid = item.id\r\n        item.name = item.text\r\n        if (item.children) {\r\n          that.getChildrenNewData(item.children)\r\n        }\r\n      })\r\n\r\n      return datas\r\n    },\r\n    onNodeCheckClick(data) {\r\n      console.log(data.nodes)\r\n      let arr = []\r\n      data.nodes.forEach(item => {\r\n        if (item.isleaf) {\r\n          let obj = {\r\n            mofDivCode: '',\r\n            agencyCode: '',\r\n            mofDiv: ''\r\n          }\r\n          obj.mofDivId = item.code\r\n          obj.mofDivCode = item.name.split('-')[0]\r\n          arr.push(obj.mofDivCode)\r\n        }\r\n      })\r\n      this.scope = arr\r\n    },\r\n    dialogClose() {\r\n      this.$parent.mofShow = false\r\n    },\r\n    // 处理字符串\r\n    dealwithStr(str) {\r\n      let result = ''\r\n      if (str) {\r\n        if (str.substring(str.length - 7) === '0000000') {\r\n          result = '61'\r\n        } else if (str.substring(str.length - 5) === '00000') {\r\n          result = str.substring(0, 4)\r\n        } else if (str.substring(str.length - 3) === '000') {\r\n          result = str.substring(0, 6)\r\n        } else {\r\n          result = str\r\n        }\r\n        return result\r\n      }\r\n    },\r\n    // 获取生效范围\r\n    getWhereTree() {\r\n      let that = this\r\n      let result = this.dealwithStr(this.$store.state.userInfo.province)\r\n      // this.$store.state.userInfo.orgCode\r\n      let param = {\r\n        wheresql: 'and code like \\'' + result + '%\\'',\r\n        elementCode: 'admdiv',\r\n        // elementCode: 'AGENCY',\r\n        year: this.$store.state.userInfo.year,\r\n        province: this.$store.state.userInfo.province\r\n      }\r\n      // let regulationType = this.$store.state.curNavModule.f_FullName.substring(0, 3)\r\n      HttpModule.getTreewhere(param).then(res => {\r\n        that.treeData = that.getChildrenNewData(res.data)\r\n      })\r\n    },\r\n    // 保存新增的计划信息\r\n    doInsert() {\r\n      console.log('-+-', this.scope)\r\n      // this.addParam.mof\r\n      HttpModule.warnLogAdd(this.addParam).then((res) => {\r\n        this.addLoading = false\r\n        if (res.code === '000000') {\r\n          this.$message.success('新增成功')\r\n          this.$parent.addDialogVisible = false\r\n          this.$parent.queryTableDatas()\r\n        } else {\r\n          this.$message.error(res.message)\r\n        }\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n  },\r\n  created() {\r\n    console.log('xxx---xxx')\r\n    this.getWhereTree()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n  .payVoucherInput {\r\n    margin: 15px;\r\n    .el-card {\r\n      margin-top: 0\r\n    }\r\n  }\r\n  .setbtn{\r\n    width:100px;\r\n    height:45px;\r\n    float:left;\r\n    margin-right:20px;\r\n  }\r\n  .tabone{\r\n    width:100px;\r\n    height:40px;\r\n    text-align:center;\r\n    line-height:40px;\r\n    float:left;\r\n    border:1px solid #ccc;\r\n    border-radius:4px;\r\n  }\r\n  .tabone1{\r\n    width:100px;\r\n    height:40px;\r\n    text-align:center;\r\n    line-height:40px;\r\n    float:left;\r\n    border:1px solid #ccc;\r\n    background-color:#f2f2f2;\r\n    border-radius:4px;\r\n  }\r\n  .vxe-modal--wrapper .vxe-modal--box {\r\n    z-index: 0;\r\n  }\r\n  #bigbox {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: white;\r\n    z-index: 10;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    opacity: .3;\r\n  }\r\n  .el-row-item .font-set-small .hline{\r\n    width:72px;\r\n  }\r\n</style>\r\n"]}]}